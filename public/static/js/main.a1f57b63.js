/*! For license information please see main.a1f57b63.js.LICENSE.txt */
(()=>{var e={150:(e,t,n)=>{var r=n(5099),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},160:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=109)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(18),a=n(19),s=n(45),o=n(46),l=n(47),c=n(48),d=n(49),u=n(12),h=n(32),p=n(33),m=n(31),f=n(1),g={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:r.default,Format:i.default,Leaf:a.default,Embed:c.default,Scroll:s.default,Block:l.default,Inline:o.default,Text:d.default,Attributor:{Attribute:u.default,Class:h.default,Style:p.default,Store:m.default}};t.default=g},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=this;return t="[Parchment] "+t,(n=e.call(this,t)||this).message=t,n.name=n.constructor.name,n}return r(t,e),t}(Error);t.ParchmentError=i;var a,s={},o={},l={},c={};function d(e,t){var n;if(void 0===t&&(t=a.ANY),"string"===typeof e)n=c[e]||s[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)n=c.text;else if("number"===typeof e)e&a.LEVEL&a.BLOCK?n=c.block:e&a.LEVEL&a.INLINE&&(n=c.inline);else if(e instanceof HTMLElement){var r=(e.getAttribute("class")||"").split(/\s+/);for(var i in r)if(n=o[r[i]])break;n=n||l[e.tagName]}return null==n?null:t&a.LEVEL&n.scope&&t&a.TYPE&n.scope?n:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(a=t.Scope||(t.Scope={})),t.create=function(e,t){var n=d(e);if(null==n)throw new i("Unable to create "+e+" blot");var r=n,a=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(t);return new r(a,t)},t.find=function e(n,r){return void 0===r&&(r=!1),null==n?null:null!=n[t.DATA_KEY]?n[t.DATA_KEY].blot:r?e(n.parentNode,r):null},t.query=d,t.register=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1)return t.map((function(t){return e(t)}));var r=t[0];if("string"!==typeof r.blotName&&"string"!==typeof r.attrName)throw new i("Invalid definition");if("abstract"===r.blotName)throw new i("Cannot register abstract class");return c[r.blotName||r.attrName]=r,"string"===typeof r.keyName?s[r.keyName]=r:(null!=r.className&&(o[r.className]=r),null!=r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(e){return e.toUpperCase()})):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach((function(e){null!=l[e]&&null!=r.className||(l[e]=r)})))),r}},function(e,t,n){var r=n(51),i=n(11),a=n(3),s=n(20),o=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var n={};return 0===e.length?this:(n.insert=e,null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var n={retain:e};return null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},l.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=a(!0,{},e),"object"===typeof n){if("number"===typeof e.delete&&"number"===typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"===typeof n.delete&&null!=e.insert&&(t-=1,"object"!==typeof(n=this.ops[t-1])))return this.ops.unshift(e),this;if(i(e.attributes,n.attributes)){if("string"===typeof e.insert&&"string"===typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"===typeof e.retain&&"number"===typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],n=[];return this.forEach((function(r){(e(r)?t:n).push(r)})),[t,n]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+s.length(t):t.delete?e-t.delete:e}),0)},l.prototype.length=function(){return this.reduce((function(e,t){return e+s.length(t)}),0)},l.prototype.slice=function(e,t){e=e||0,"number"!==typeof t&&(t=1/0);for(var n=[],r=s.iterator(this.ops),i=0;i<t&&r.hasNext();){var a;i<e?a=r.next(e-i):(a=r.next(t-i),n.push(a)),i+=s.length(a)}return new l(n)},l.prototype.compose=function(e){var t=s.iterator(this.ops),n=s.iterator(e.ops),r=[],a=n.peek();if(null!=a&&"number"===typeof a.retain&&null==a.attributes){for(var o=a.retain;"insert"===t.peekType()&&t.peekLength()<=o;)o-=t.peekLength(),r.push(t.next());a.retain-o>0&&n.next(a.retain-o)}for(var c=new l(r);t.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===t.peekType())c.push(t.next());else{var d=Math.min(t.peekLength(),n.peekLength()),u=t.next(d),h=n.next(d);if("number"===typeof h.retain){var p={};"number"===typeof u.retain?p.retain=d:p.insert=u.insert;var m=s.attributes.compose(u.attributes,h.attributes,"number"===typeof u.retain);if(m&&(p.attributes=m),c.push(p),!n.hasNext()&&i(c.ops[c.ops.length-1],p)){var f=new l(t.rest());return c.concat(f).chop()}}else"number"===typeof h.delete&&"number"===typeof u.retain&&c.push(h)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var n=[this,e].map((function(t){return t.map((function(n){if(null!=n.insert)return"string"===typeof n.insert?n.insert:o;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),a=new l,c=r(n[0],n[1],t),d=s.iterator(this.ops),u=s.iterator(e.ops);return c.forEach((function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case r.INSERT:n=Math.min(u.peekLength(),t),a.push(u.next(n));break;case r.DELETE:n=Math.min(t,d.peekLength()),d.next(n),a.delete(n);break;case r.EQUAL:n=Math.min(d.peekLength(),u.peekLength(),t);var o=d.next(n),l=u.next(n);i(o.insert,l.insert)?a.retain(n,s.attributes.diff(o.attributes,l.attributes)):a.push(l).delete(n)}t-=n}})),a.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var n=s.iterator(this.ops),r=new l,i=0;n.hasNext();){if("insert"!==n.peekType())return;var a=n.peek(),o=s.length(a)-n.peekLength(),c="string"===typeof a.insert?a.insert.indexOf(t,o)-o:-1;if(c<0)r.push(n.next());else if(c>0)r.push(n.next(c));else{if(!1===e(r,n.next(1).attributes||{},i))return;i+=1,r=new l}}r.length()>0&&e(r,{},i)},l.prototype.transform=function(e,t){if(t=!!t,"number"===typeof e)return this.transformPosition(e,t);for(var n=s.iterator(this.ops),r=s.iterator(e.ops),i=new l;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===r.peekType())if("insert"===r.peekType())i.push(r.next());else{var a=Math.min(n.peekLength(),r.peekLength()),o=n.next(a),c=r.next(a);if(o.delete)continue;c.delete?i.push(c):i.retain(a,s.attributes.transform(o.attributes,c.attributes,t))}else i.retain(s.length(n.next()));return i.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var n=s.iterator(this.ops),r=0;n.hasNext()&&r<=e;){var i=n.peekLength(),a=n.peekType();n.next(),"delete"!==a?("insert"===a&&(r<e||!t)&&(e+=i),r+=i):e-=Math.min(i,e-r)}return e},e.exports=l},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},o=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,i=n.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(t in e);return"undefined"===typeof t||n.call(e,t)},l=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(a)return a(e,t).value}return e[t]};e.exports=function e(){var t,n,r,i,a,d,u=arguments[0],h=1,p=arguments.length,m=!1;for("boolean"===typeof u&&(m=u,u=arguments[1]||{},h=2),(null==u||"object"!==typeof u&&"function"!==typeof u)&&(u={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)r=c(u,n),u!==(i=c(t,n))&&(m&&i&&(o(i)||(a=s(i)))?(a?(a=!1,d=r&&s(r)?r:[]):d=r&&o(r)?r:{},l(u,{name:n,newValue:e(m,d,i)})):"undefined"!==typeof i&&l(u,{name:n,newValue:i}));return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=u(n(3)),s=u(n(2)),o=u(n(0)),l=u(n(16)),c=u(n(6)),d=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"attach",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new o.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new s.default).insert(this.value(),(0,a.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var n=o.default.query(e,o.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,t)}},{key:"formatAt",value:function(e,t,n,r){this.format(n,r)}},{key:"insertAt",value:function(e,n,r){if("string"===typeof n&&n.endsWith("\n")){var a=o.default.create(g.blotName);this.parent.insertBefore(a,0===e?this:this.next),a.insertAt(0,n.slice(0,-1))}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r)}}]),t}(o.default.Embed);f.scope=o.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache={},n}return m(t,e),r(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(o.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),v(t))}),new s.default).insert("\n",v(this))),this.cache.delta}},{key:"deleteAt",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),this.cache={}}},{key:"formatAt",value:function(e,n,r,a){n<=0||(o.default.query(r,o.default.Scope.BLOCK)?e+n===this.length()&&this.format(r,a):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(n,this.length()-e-1),r,a),this.cache={})}},{key:"insertAt",value:function(e,n,r){if(null!=r)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);if(0!==n.length){var a=n.split("\n"),s=a.shift();s.length>0&&(e<this.length()-1||null==this.children.tail?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});var o=this;a.reduce((function(e,t){return(o=o.split(e,!0)).insertAt(0,t),t.length}),e+s.length)}}},{key:"insertBefore",value:function(e,n){var r=this.children.head;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n),r instanceof l.default&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,n),this.cache={}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){var r=this.clone();return 0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var a=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,n);return this.cache={},a}}]),t}(o.default.Block);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"===typeof e.formats&&(t=(0,a.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:v(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,o.default.Embed,d.default],t.bubbleFormats=v,t.BlockEmbed=f,t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(50);var s=g(n(2)),o=g(n(14)),l=g(n(8)),c=g(n(9)),d=g(n(0)),u=n(15),h=g(u),p=g(n(3)),m=g(n(10)),f=g(n(34));function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,m.default)("quill"),y=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=x(t,r),this.container=this.options.container,null==this.container)return b.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=d.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new o.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e){e===l.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(e,t){var r=n.selection.lastRange,i=r&&0===r.length?r.index:void 0;w.call(n,(function(){return n.editor.update(null,t,i)}),e)}));var a=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+i+"<p><br></p></div>");this.setContents(a),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),m.default.level(e)}},{key:"find",value:function(e){return e.__quill||d.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&b.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e){var i=e.attrName||e.blotName;"string"===typeof i?this.register("formats/"+i,e,t):Object.keys(e).forEach((function(r){n.register(r,e[r],t)}))}else null==this.imports[e]||r||b.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?d.default.register(t):e.startsWith("modules")&&"function"===typeof t.register&&t.register()}}]),a(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof e){var n=e;(e=document.createElement("div")).classList.add(n)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,n){var r=this,a=_(e,t,n),s=i(a,4);return e=s[0],t=s[1],n=s[3],w.call(this,(function(){return r.editor.deleteText(e,t)}),n,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,(function(){var r=n.getSelection(!0),i=new s.default;if(null==r)return i;if(d.default.query(e,d.default.Scope.BLOCK))i=n.editor.formatLine(r.index,r.length,v({},e,t));else{if(0===r.length)return n.selection.format(e,t),i;i=n.editor.formatText(r.index,r.length,v({},e,t))}return n.setSelection(r,l.default.sources.SILENT),i}),r)}},{key:"formatLine",value:function(e,t,n,r,a){var s,o=this,l=_(e,t,n,r,a),c=i(l,4);return e=c[0],t=c[1],s=c[2],a=c[3],w.call(this,(function(){return o.editor.formatLine(e,t,s)}),a,e,0)}},{key:"formatText",value:function(e,t,n,r,a){var s,o=this,l=_(e,t,n,r,a),c=i(l,4);return e=c[0],t=c[1],s=c[2],a=c[3],w.call(this,(function(){return o.editor.formatText(e,t,s)}),a,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"===typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=_(e,t),r=i(n,2);return e=r[0],t=r[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=_(e,t),r=i(n,2);return e=r[0],t=r[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,(function(){return i.editor.insertEmbed(t,n,r)}),a,t)}},{key:"insertText",value:function(e,t,n,r,a){var s,o=this,l=_(e,0,n,r,a),c=i(l,4);return e=c[0],s=c[2],a=c[3],w.call(this,(function(){return o.editor.insertText(e,t,s)}),a,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,n){this.clipboard.dangerouslyPasteHTML(e,t,n)}},{key:"removeFormat",value:function(e,t,n){var r=this,a=_(e,t,n),s=i(a,4);return e=s[0],t=s[1],n=s[3],w.call(this,(function(){return r.editor.removeFormat(e,t)}),n,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){e=new s.default(e);var n=t.getLength(),r=t.editor.deleteText(0,n),i=t.editor.applyDelta(e),a=i.ops[i.ops.length-1];return null!=a&&"string"===typeof a.insert&&"\n"===a.insert[a.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),i.delete(1)),r.compose(i)}),n)}},{key:"setSelection",value:function(t,n,r){if(null==t)this.selection.setRange(null,n||e.sources.API);else{var a=_(t,n,r),s=i(a,4);t=s[0],n=s[1],r=s[3],this.selection.setRange(new u.Range(t,n),r),r!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,n=(new s.default).insert(e);return this.setContents(n,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){return e=new s.default(e),t.editor.applyDelta(e,n)}),n,!0)}}]),e}();function x(e,t){if((t=(0,p.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==y.DEFAULTS.theme){if(t.theme=y.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=f.default;var n=(0,p.default)(!0,{},t.theme.DEFAULTS);[n,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var r=Object.keys(n.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var n=y.import("modules/"+t);return null==n?b.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=n.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,p.default)(!0,{},y.DEFAULTS,{modules:r},n,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"===typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e}),{}),t}function w(e,t,n,r){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new s.default;var i=null==n?null:this.getSelection(),a=this.editor.delta,o=e();if(null!=i&&(!0===n&&(n=i.index),null==r?i=k(i,o,t):0!==r&&(i=k(i,n,r,t)),this.setSelection(i,l.default.sources.SILENT)),o.length()>0){var c,d,u=[l.default.events.TEXT_CHANGE,o,a,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(u)),t!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,u)}return o}function _(e,t,n,i,a){var s={};return"number"===typeof e.index&&"number"===typeof e.length?"number"!==typeof t?(a=i,i=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!==typeof t&&(a=i,i=n,n=t,t=0),"object"===("undefined"===typeof n?"undefined":r(n))?(s=n,a=i):"string"===typeof n&&(null!=i?s[n]=i:a=n),[e,t,s,a=a||l.default.sources.API]}function k(e,t,n,r){if(null==e)return null;var a=void 0,o=void 0;if(t instanceof s.default){var c=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,r!==l.default.sources.USER)})),d=i(c,2);a=d[0],o=d[1]}else{var h=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&r===l.default.sources.USER?e:n>=0?e+n:Math.max(t,e+n)})),p=i(h,2);a=p[0],o=p[1]}return new u.Range(a,o-a)}y.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},y.events=l.default.events,y.sources=l.default.sources,y.version="1.3.7",y.imports={delta:s.default,parchment:d.default,"core/module":c.default,"core/theme":f.default},t.expandConfig=x,t.overload=_,t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=o(n(7)),s=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"formatAt",value:function(e,n,r,a){if(t.compare(this.statics.blotName,r)<0&&s.default.query(r,s.default.Scope.BLOT)){var o=this.isolate(e,n);a&&o.wrap(r,a)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,a)}},{key:"optimize",value:function(e){if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(e,n){var r=t.order.indexOf(e),i=t.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}}]),t}(s.default.Inline);l.allowedChildren=[l,s.default.Embed,a.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default.Text);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=s(n(54));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,s(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var n;e.__quill&&e.__quill.emitter&&(n=e.__quill.emitter).handleDOM.apply(n,t)}))}))}));var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",o.error),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"emit",value:function(){o.log.apply(o,arguments),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(this.listeners[e.type]||[]).forEach((function(t){var r=t.node,i=t.handler;(e.target===r||r.contains(e.target))&&i.apply(void 0,[e].concat(n))}))}},{key:"listenDOM",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}]),t}(a.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n};r.DEFAULTS={},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["error","warn","log","info"],i="warn";function a(e){if(r.indexOf(e)<=r.indexOf(i)){for(var t,n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];(t=console)[e].apply(t,a)}}function s(e){return r.reduce((function(t,n){return t[n]=a.bind(console,n,e),t}),{})}a.level=s.level=function(e){i=e},t.default=s},function(e,t,n){var r=Array.prototype.slice,i=n(52),a=n(53),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var c,d;if(o(e)||o(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=r.call(e),t=r.call(t),s(e,t,n));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=i(e),h=i(t)}catch(p){return!1}if(u.length!=h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!=h[c])return!1;for(c=u.length-1;c>=0;c--)if(d=u[c],!s(e[d],t[d],n))return!1;return typeof e===typeof t}(e,t,n))};function o(e){return null===e||void 0===e}function l(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&"function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var i=r.Scope.TYPE&r.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&r.Scope.LEVEL|i:this.scope=r.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=r.query(e,r.Scope.BLOT&(this.scope|r.Scope.TYPE))&&(null==this.whitelist||("string"===typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=u(n(2)),o=u(n(0)),l=u(n(4)),c=u(n(6)),d=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),t}(c.default);f.blotName="code",f.tagName="CODE";var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,n){return t.insert(n).insert("\n",e.formats())}),new s.default)}},{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n){var i=this.descendant(d.default,this.length()-1),s=r(i,1)[0];null!=s&&s.deleteAt(s.length()-1,1),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}},{key:"formatAt",value:function(e,n,r,i){if(0!==n&&null!=o.default.query(r,o.default.Scope.BLOCK)&&(r!==this.statics.blotName||i!==this.statics.formats(this.domNode))){var a=this.newlineIndex(e);if(!(a<0||a>=e+n)){var s=this.newlineIndex(e,!0)+1,l=a-s+1,c=this.isolate(s,l),d=c.next;c.format(r,i),d instanceof t&&d.formatAt(0,e-s+n-l,r,i)}}}},{key:"insertAt",value:function(e,t,n){if(null==n){var i=this.descendant(d.default,e),a=r(i,2),s=a[0],o=a[1];s.insertAt(o,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(o.default.create("text","\n")),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(e),n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=o.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof o.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=f,t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=v(n(2)),o=v(n(20)),l=v(n(0)),c=v(n(13)),d=v(n(24)),u=n(4),h=v(u),p=v(n(16)),m=v(n(21)),f=v(n(11)),g=v(n(3));function v(e){return e&&e.__esModule?e:{default:e}}var b=/^[ -~]*$/,y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return a(e,[{key:"applyDelta",value:function(e){var t=this,n=!1;this.scroll.update();var a=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var n=(0,m.default)(t.attributes);return delete n.image,e.insert({image:t.attributes.image},n)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,m.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"===typeof t.insert){var r=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(r,t.attributes)}return e.push(t)}),new s.default)}(e)).reduce((function(e,s){var c=s.retain||s.delete||s.insert.length||1,d=s.attributes||{};if(null!=s.insert){if("string"===typeof s.insert){var p=s.insert;p.endsWith("\n")&&n&&(n=!1,p=p.slice(0,-1)),e>=a&&!p.endsWith("\n")&&(n=!0),t.scroll.insertAt(e,p);var m=t.scroll.line(e),f=i(m,2),v=f[0],b=f[1],y=(0,g.default)({},(0,u.bubbleFormats)(v));if(v instanceof h.default){var x=v.descendant(l.default.Leaf,b),w=i(x,1)[0];y=(0,g.default)(y,(0,u.bubbleFormats)(w))}d=o.default.attributes.diff(y,d)||{}}else if("object"===r(s.insert)){var _=Object.keys(s.insert)[0];if(null==_)return e;t.scroll.insertAt(e,_,s.insert[_])}a+=c}return Object.keys(d).forEach((function(n){t.scroll.formatAt(e,c,n,d[n])})),e+c}),0),e.reduce((function(e,n){return"number"===typeof n.delete?(t.scroll.deleteAt(e,n.delete),e):e+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new s.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(r).forEach((function(i){if(null==n.scroll.whitelist||n.scroll.whitelist[i]){var a=n.scroll.lines(e,Math.max(t,1)),s=t;a.forEach((function(t){var a=t.length();if(t instanceof c.default){var o=e-t.offset(n.scroll),l=t.newlineIndex(o+s)-o+1;t.formatAt(o,l,i,r[i])}else t.format(i,r[i]);s-=a}))}})),this.scroll.optimize(),this.update((new s.default).retain(e).retain(t,(0,m.default)(r)))}},{key:"formatText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t,i,r[i])})),this.update((new s.default).retain(e).retain(t,(0,m.default)(r)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new s.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===t?this.scroll.path(e).forEach((function(e){var t=i(e,1)[0];t instanceof h.default?n.push(t):t instanceof l.default.Leaf&&r.push(t)})):(n=this.scroll.lines(e,t),r=this.scroll.descendants(l.default.Leaf,e,t));var a=[n,r].map((function(e){if(0===e.length)return{};for(var t=(0,u.bubbleFormats)(e.shift());Object.keys(t).length>0;){var n=e.shift();if(null==n)return t;t=x((0,u.bubbleFormats)(n),t)}return t}));return g.default.apply(g.default,a)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"===typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new s.default).retain(e).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)))}},{key:"insertText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t.length,i,r[i])})),this.update((new s.default).retain(e).insert(t,(0,m.default)(r)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===h.default.blotName&&!(e.children.length>1)&&e.children.head instanceof p.default}},{key:"removeFormat",value:function(e,t){var n=this.getText(e,t),r=this.scroll.line(e+t),a=i(r,2),o=a[0],l=a[1],d=0,u=new s.default;null!=o&&(d=o instanceof c.default?o.newlineIndex(l)-l+1:o.length()-l,u=o.delta().slice(l,l+d-1).insert("\n"));var h=this.getContents(e,t+d).diff((new s.default).insert(n).concat(u)),p=(new s.default).retain(e).concat(h);return this.applyDelta(p)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(b)&&l.default.find(t[0].target)){var i=l.default.find(t[0].target),a=(0,u.bubbleFormats)(i),o=i.offset(this.scroll),c=t[0].oldValue.replace(d.default.CONTENTS,""),h=(new s.default).insert(c),p=(new s.default).insert(i.value());e=(new s.default).retain(o).concat(h.diff(p,n)).reduce((function(e,t){return t.insert?e.insert(t.insert,a):e.push(t)}),new s.default),this.delta=r.compose(e)}else this.delta=this.getDelta(),e&&(0,f.default)(r.compose(e),this.delta)||(e=r.diff(this.delta,n));return e}}]),e}();function x(e,t){return Object.keys(t).reduce((function(n,r){return null==e[r]||(t[r]===e[r]?n[r]=t[r]:Array.isArray(t[r])?t[r].indexOf(e[r])<0&&(n[r]=t[r].concat([e[r]])):n[r]=[t[r],e[r]]),n}),{})}t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=c(n(0)),s=c(n(21)),o=c(n(11)),l=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=(0,c(n(10)).default)("quill:selection"),p=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.index=t,this.length=n},m=function(){function e(t,n){var r=this;u(this,e),this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=a.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){r.mouseDown||setTimeout(r.update.bind(r,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&r.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(r.hasFocus()){var e=r.getNativeRange();null!=e&&e.start.node!==r.cursor.textNode&&r.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{r.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var n=t.range,i=n.startNode,a=n.startOffset,s=n.endNode,o=n.endOffset;r.setNativeRange(i,a,s,o)}})),this.update(l.default.sources.SILENT)}return i(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!a.default.query(e,a.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var r=a.default.find(n.start.node,!1);if(null==r)return;if(r instanceof a.default.Leaf){var i=r.split(n.start.offset);r.parent.insertBefore(this.cursor,i)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;var i=void 0,a=this.scroll.leaf(e),s=r(a,2),o=s[0],l=s[1];if(null==o)return null;var c=o.position(l,!0),d=r(c,2);i=d[0],l=d[1];var u=document.createRange();if(t>0){u.setStart(i,l);var h=this.scroll.leaf(e+t),p=r(h,2);if(o=p[0],l=p[1],null==o)return null;var m=o.position(l,!0),f=r(m,2);return i=f[0],l=f[1],u.setEnd(i,l),u.getBoundingClientRect()}var g="left",v=void 0;return i instanceof Text?(l<i.data.length?(u.setStart(i,l),u.setEnd(i,l+1)):(u.setStart(i,l-1),u.setEnd(i,l),g="right"),v=u.getBoundingClientRect()):(v=o.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:v.top+v.height,height:v.height,left:v[g],right:v[g],top:v.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var n=this.normalizeNative(t);return h.info("getNativeRange",n),n}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);var i=n.map((function(e){var n=r(e,2),i=n[0],s=n[1],o=a.default.find(i,!0),l=o.offset(t.scroll);return 0===s?l:o instanceof a.default.Container?l+o.length():l+o.index(i,s)})),s=Math.min(Math.max.apply(Math,d(i)),this.scroll.length()-1),o=Math.min.apply(Math,[s].concat(d(i)));return new p(o,s-o)}},{key:"normalizeNative",value:function(e){if(!f(this.root,e.startContainer)||!e.collapsed&&!f(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,n=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;n=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=n})),t}},{key:"rangeToNative",value:function(e){var t=this,n=e.collapsed?[e.index]:[e.index,e.index+e.length],i=[],a=this.scroll.length();return n.forEach((function(e,n){e=Math.min(a-1,e);var s,o=t.scroll.leaf(e),l=r(o,2),c=l[0],d=l[1],u=c.position(d,0!==n),h=r(u,2);s=h[0],d=h[1],i.push(s,d)})),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var n=this.getBounds(t.index,t.length);if(null!=n){var i=this.scroll.length()-1,a=this.scroll.line(Math.min(t.index,i)),s=r(a,1)[0],o=s;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,i));o=r(l,1)[0]}if(null!=s&&null!=o){var c=e.getBoundingClientRect();n.top<c.top?e.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(e.scrollTop+=n.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(h.info("setNativeRange",e,t,n,r),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=n.parentNode){var a=document.getSelection();if(null!=a)if(null!=e){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||i||e!==s.startContainer||t!==s.startOffset||n!==s.endContainer||r!==s.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==n.tagName&&(r=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var o=document.createRange();o.setStart(e,t),o.setEnd(n,r),a.removeAllRanges(),a.addRange(o)}}else a.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"===typeof t&&(n=t,t=!1),h.info("setRange",e),null!=e){var r=this.rangeToNative(e);this.setNativeRange.apply(this,d(r).concat([t]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,n=this.getRange(),i=r(n,2),a=i[0],c=i[1];if(this.lastRange=a,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,o.default)(t,this.lastRange)){var d;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var u,h=[l.default.events.SELECTION_CHANGE,(0,s.default)(this.lastRange),(0,s.default)(t),e];(d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(h)),e!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,h)}}}]),e}();function f(e,t){try{t.parentNode}catch(n){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=p,t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"insertInto",value:function(e,n){0===e.children.length?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default.Embed);o.blotName="break",o.tagName="BR",t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(44),a=n(30),s=n(1),o=function(e){function t(t){var n=e.call(this,t)||this;return n.build(),n}return r(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var n=l(t);e.insertBefore(n,e.children.head||void 0)}catch(r){if(r instanceof s.ParchmentError)return;throw r}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,n){e.deleteAt(t,n)}))},t.prototype.descendant=function(e,n){var r=this.children.find(n),i=r[0],a=r[1];return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,a]:i instanceof t?i.descendant(e,a):[null,-1]},t.prototype.descendants=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var i=[],a=r;return this.children.forEachAt(n,r,(function(n,r,s){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&i.push(n),n instanceof t&&(i=i.concat(n.descendants(e,r,a))),a-=s})),i},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,n,r){this.children.forEachAt(e,t,(function(e,t,i){e.formatAt(t,i,n,r)}))},t.prototype.insertAt=function(e,t,n){var r=this.children.find(e),i=r[0],a=r[1];if(i)i.insertAt(a,t,n);else{var o=null==n?s.create("text",t):s.create(t,n);this.appendChild(o)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new s.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(n){e.insertBefore(n,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var n=s.create(this.statics.defaultChild);this.appendChild(n),n.optimize(t)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var r=this.children.find(e,n),i=r[0],a=r[1],s=[[this,e]];return i instanceof t?s.concat(i.path(a,n)):(null!=i&&s.push([i,a]),s)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),e.prototype.replace.call(this,n)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(e,this.length(),(function(e,r,i){e=e.split(r,t),n.appendChild(e)})),n},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var n=this,r=[],i=[];e.forEach((function(e){e.target===n.domNode&&"childList"===e.type&&(r.push.apply(r,e.addedNodes),i.push.apply(i,e.removedNodes))})),i.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=s.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}})),r.filter((function(e){return e.parentNode==n.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=s.find(e.nextSibling));var r=l(e);r.next==t&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,t||void 0))}))},t}(a.default);function l(e){var t=s.find(e);if(null==t)try{t=s.create(e)}catch(n){t=s.create(s.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=n(31),s=n(17),o=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.attributes=new a.default(n.domNode),n}return r(t,e),t.formats=function(e){return"string"===typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var n=o.query(e);n instanceof i.default?this.attributes.attribute(n,t):t&&(null==n||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,n){var r=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(r),r},t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),t.some((function(e){return e.target===r.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(n,r){var i=e.prototype.wrap.call(this,n,r);return i instanceof t&&i.statics.scope===this.statics.scope&&this.attributes.move(i),i},t}(s.default);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),a=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,n){var r=n(11),i=n(3),a={attributes:{compose:function(e,t,n){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var r=i(!0,{},t);for(var a in n||(r=Object.keys(r).reduce((function(e,t){return null!=r[t]&&(e[t]=r[t]),e}),{})),e)void 0!==e[a]&&void 0===t[a]&&(r[a]=e[a]);return Object.keys(r).length>0?r:void 0},diff:function(e,t){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce((function(n,i){return r(e[i],t[i])||(n[i]=void 0===t[i]?null:t[i]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(e,t,n){if("object"!==typeof e)return t;if("object"===typeof t){if(!n)return t;var r=Object.keys(t).reduce((function(n,r){return void 0===e[r]&&(n[r]=t[r]),n}),{});return Object.keys(r).length>0?r:void 0}}},iterator:function(e){return new s(e)},length:function(e){return"number"===typeof e.delete?e.delete:"number"===typeof e.retain?e.retain:"string"===typeof e.insert?e.insert.length:1}};function s(e){this.ops=e,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,r=a.length(t);if(e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e,"number"===typeof t.delete)return{delete:e};var i={};return t.attributes&&(i.attributes=t.attributes),"number"===typeof t.retain?i.retain=e:"string"===typeof t.insert?i.insert=t.insert.substr(n,e):i.insert=t.insert,i}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"===typeof this.ops[this.index].delete?"delete":"number"===typeof this.ops[this.index].retain?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}return[]},e.exports=a},function(e,t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(o){t=function(){}}try{n=Set}catch(o){n=function(){}}try{r=Promise}catch(o){r=function(){}}function i(a,o,l,c,d){"object"===typeof o&&(l=o.depth,c=o.prototype,d=o.includeNonEnumerable,o=o.circular);var u=[],h=[],p="undefined"!=typeof Buffer;return"undefined"==typeof o&&(o=!0),"undefined"==typeof l&&(l=1/0),function a(l,m){if(null===l)return null;if(0===m)return l;var f,g;if("object"!=typeof l)return l;if(e(l,t))f=new t;else if(e(l,n))f=new n;else if(e(l,r))f=new r((function(e,t){l.then((function(t){e(a(t,m-1))}),(function(e){t(a(e,m-1))}))}));else if(i.__isArray(l))f=[];else if(i.__isRegExp(l))f=new RegExp(l.source,s(l)),l.lastIndex&&(f.lastIndex=l.lastIndex);else if(i.__isDate(l))f=new Date(l.getTime());else{if(p&&Buffer.isBuffer(l))return f=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(f),f;e(l,Error)?f=Object.create(l):"undefined"==typeof c?(g=Object.getPrototypeOf(l),f=Object.create(g)):(f=Object.create(c),g=c)}if(o){var v=u.indexOf(l);if(-1!=v)return h[v];u.push(l),h.push(f)}for(var b in e(l,t)&&l.forEach((function(e,t){var n=a(t,m-1),r=a(e,m-1);f.set(n,r)})),e(l,n)&&l.forEach((function(e){var t=a(e,m-1);f.add(t)})),l){var y;g&&(y=Object.getOwnPropertyDescriptor(g,b)),y&&null==y.set||(f[b]=a(l[b],m-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(b=0;b<x.length;b++){var w=x[b];(!(k=Object.getOwnPropertyDescriptor(l,w))||k.enumerable||d)&&(f[w]=a(l[w],m-1),k.enumerable||Object.defineProperty(f,w,{enumerable:!1}))}}if(d){var _=Object.getOwnPropertyNames(l);for(b=0;b<_.length;b++){var k,j=_[b];(k=Object.getOwnPropertyDescriptor(l,j))&&k.enumerable||(f[j]=a(l[j],m-1),Object.defineProperty(f,j,{enumerable:!1}))}}return f}(a,l)}function a(e){return Object.prototype.toString.call(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=a,i.__isDate=function(e){return"object"===typeof e&&"[object Date]"===a(e)},i.__isArray=function(e){return"object"===typeof e&&"[object Array]"===a(e)},i.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===a(e)},i.__getRegExpFlags=s,i}();"object"===typeof e&&e.exports&&(e.exports=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=p(n(0)),o=p(n(8)),l=n(4),c=p(l),d=p(n(16)),u=p(n(13)),h=p(n(25));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return e instanceof c.default||e instanceof l.BlockEmbed}var f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.emitter=n.emitter,Array.isArray(n.whitelist)&&(r.whitelist=n.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),r.domNode.addEventListener("DOMNodeInserted",(function(){})),r.optimize(),r.enable(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,n){var i=this.line(e),s=r(i,2),o=s[0],c=s[1],h=this.line(e+n),p=r(h,1)[0];if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),null!=p&&o!==p&&c>0){if(o instanceof l.BlockEmbed||p instanceof l.BlockEmbed)return void this.optimize();if(o instanceof u.default){var m=o.newlineIndex(o.length(),!0);if(m>-1&&(o=o.split(m+1))===p)return void this.optimize()}else if(p instanceof u.default){var f=p.newlineIndex(0);f>-1&&p.split(f+1)}var g=p.children.head instanceof d.default?null:p.children.head;o.moveChildren(p,g),o.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,n,r,i){(null==this.whitelist||this.whitelist[r])&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,i),this.optimize())}},{key:"insertAt",value:function(e,n,r){if(null==r||null==this.whitelist||this.whitelist[n]){if(e>=this.length())if(null==r||null==s.default.query(n,s.default.Scope.BLOCK)){var i=s.default.create(this.statics.defaultChild);this.appendChild(i),null==r&&n.endsWith("\n")&&(n=n.slice(0,-1)),i.insertAt(0,n,r)}else{var o=s.default.create(n,r);this.appendChild(o)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);this.optimize()}}},{key:"insertBefore",value:function(e,n){if(e.statics.scope===s.default.Scope.INLINE_BLOT){var r=s.default.create(this.statics.defaultChild);r.appendChild(e),e=r}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(m,e)}},{key:"lines",value:function(){return function e(t,n,r){var i=[],a=r;return t.children.forEachAt(n,r,(function(t,n,r){m(t)?i.push(t):t instanceof s.default.Container&&(i=i.concat(e(t,n,a))),a-=r})),i}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,n),e.length>0&&this.emitter.emit(o.default.events.SCROLL_OPTIMIZE,e,n))}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var n=o.default.sources.USER;"string"===typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(o.default.events.SCROLL_BEFORE_UPDATE,n,e),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(o.default.events.SCROLL_UPDATE,n,e)}}}]),t}(s.default.Scroll);f.blotName="scroll",f.className="ql-editor",f.tagName="DIV",f.defaultChild="block",f.allowedChildren=[c.default,l.BlockEmbed,h.default],t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=f(n(21)),o=f(n(11)),l=f(n(3)),c=f(n(2)),d=f(n(20)),u=f(n(0)),h=f(n(5)),p=f(n(10)),m=f(n(9));function f(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,p.default)("quill:keyboard"),b=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",y=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.bindings={},Object.keys(r.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&r.options.bindings[t]&&r.addBinding(r.options.bindings[t])})),r.addBinding({key:t.keys.ENTER,shiftKey:null},j),r.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},w),r.addBinding({key:t.keys.DELETE},{collapsed:!0},_)):(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),r.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},_)),r.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},k),r.addBinding({key:t.keys.DELETE},{collapsed:!1},k),r.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),r.listen(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"match",value:function(e,t){return t=E(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!t[n]!==e[n]&&null!==t[n]}))&&t.key===(e.which||e.keyCode)}}]),a(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=E(e);if(null==r||null==r.key)return v.warn("Attempted to add invalid keyboard binding",r);"function"===typeof t&&(t={handler:t}),"function"===typeof n&&(n={handler:n}),r=(0,l.default)(r,t,n),this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented){var a=n.which||n.keyCode,s=(e.bindings[a]||[]).filter((function(e){return t.match(n,e)}));if(0!==s.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),d=i(c,2),h=d[0],p=d[1],m=e.quill.getLeaf(l.index),f=i(m,2),g=f[0],v=f[1],b=0===l.length?[g,v]:e.quill.getLeaf(l.index+l.length),y=i(b,2),x=y[0],w=y[1],_=g instanceof u.default.Text?g.value().slice(0,v):"",k=x instanceof u.default.Text?x.value().slice(w):"",j={collapsed:0===l.length,empty:0===l.length&&h.length()<=1,format:e.quill.getFormat(l),offset:p,prefix:_,suffix:k};s.some((function(t){if(null!=t.collapsed&&t.collapsed!==j.collapsed)return!1;if(null!=t.empty&&t.empty!==j.empty)return!1;if(null!=t.offset&&t.offset!==j.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==j.format[e]})))return!1}else if("object"===r(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=j.format[e]:!1===t.format[e]?null==j.format[e]:(0,o.default)(t.format[e],j.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(j.prefix))&&!(null!=t.suffix&&!t.suffix.test(j.suffix))&&!0!==t.handler.call(e,l,j)}))&&n.preventDefault()}}}}))}}]),t}(m.default);function x(e,t){var n,r=e===y.keys.LEFT?"prefix":"suffix";return g(n={key:e,shiftKey:t,altKey:null},r,/^$/),g(n,"handler",(function(n){var r=n.index;e===y.keys.RIGHT&&(r+=n.length+1);var a=this.quill.getLeaf(r);return!(i(a,1)[0]instanceof u.default.Embed)||(e===y.keys.LEFT?t?this.quill.setSelection(n.index-1,n.length+1,h.default.sources.USER):this.quill.setSelection(n.index-1,h.default.sources.USER):t?this.quill.setSelection(n.index,n.length+1,h.default.sources.USER):this.quill.setSelection(n.index+n.length+1,h.default.sources.USER),!1)})),n}function w(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var n=this.quill.getLine(e.index),r=i(n,1)[0],a={};if(0===t.offset){var s=this.quill.getLine(e.index-1),o=i(s,1)[0];if(null!=o&&o.length()>1){var l=r.formats(),c=this.quill.getFormat(e.index-1,1);a=d.default.attributes.diff(l,c)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-u,u,h.default.sources.USER),Object.keys(a).length>0&&this.quill.formatLine(e.index-u,u,a,h.default.sources.USER),this.quill.focus()}}function _(e,t){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-n)){var r={},a=0,s=this.quill.getLine(e.index),o=i(s,1)[0];if(t.offset>=o.length()-1){var l=this.quill.getLine(e.index+1),c=i(l,1)[0];if(c){var u=o.formats(),p=this.quill.getFormat(e.index,1);r=d.default.attributes.diff(u,p)||{},a=c.length()}}this.quill.deleteText(e.index,n,h.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index+a-1,n,r,h.default.sources.USER)}}function k(e){var t=this.quill.getLines(e),n={};if(t.length>1){var r=t[0].formats(),i=t[t.length-1].formats();n=d.default.attributes.diff(i,r)||{}}this.quill.deleteText(e,h.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index,1,n,h.default.sources.USER),this.quill.setSelection(e.index,h.default.sources.SILENT),this.quill.focus()}function j(e,t){var n=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var r=Object.keys(t.format).reduce((function(e,n){return u.default.query(n,u.default.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e}),{});this.quill.insertText(e.index,"\n",r,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==r[e]&&(Array.isArray(t.format[e])||"link"!==e&&n.quill.format(e,t.format[e],h.default.sources.USER))}))}function N(e){return{key:y.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var n=u.default.query("code-block"),r=t.index,a=t.length,s=this.quill.scroll.descendant(n,r),o=i(s,2),l=o[0],c=o[1];if(null!=l){var d=this.quill.getIndex(l),p=l.newlineIndex(c,!0)+1,m=l.newlineIndex(d+c+a),f=l.domNode.textContent.slice(p,m).split("\n");c=0,f.forEach((function(t,i){e?(l.insertAt(p+c,n.TAB),c+=n.TAB.length,0===i?r+=n.TAB.length:a+=n.TAB.length):t.startsWith(n.TAB)&&(l.deleteAt(p+c,n.TAB.length),c-=n.TAB.length,0===i?r-=n.TAB.length:a-=n.TAB.length),c+=t.length+1})),this.quill.update(h.default.sources.USER),this.quill.setSelection(r,a,h.default.sources.SILENT)}}}}function S(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,n){this.quill.format(e,!n.format[e],h.default.sources.USER)}}}function E(e){if("string"===typeof e||"number"===typeof e)return E({key:e});if("object"===("undefined"===typeof e?"undefined":r(e))&&(e=(0,s.default)(e,!1)),"string"===typeof e.key)if(null!=y.keys[e.key.toUpperCase()])e.key=y.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[b]=e.shortKey,delete e.shortKey),e}y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},y.DEFAULTS={bindings:{bold:S("bold"),italic:S("italic"),underline:S("underline"),indent:{key:y.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",h.default.sources.USER)}},outdent:{key:y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",h.default.sources.USER)}},"outdent backspace":{key:y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",h.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,h.default.sources.USER)}},"indent code-block":N(!0),"outdent code-block":N(!1),"remove tab":{key:y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,h.default.sources.USER)}},tab:{key:y.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,h.default.sources.SILENT)}},"list empty enter":{key:y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,h.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,h.default.sources.USER)}},"checklist enter":{key:y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),n=i(t,2),r=n[0],a=n[1],s=(0,l.default)({},r.formats(),{list:"checked"}),o=(new c.default).retain(e.index).insert("\n",s).retain(r.length()-a-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var n=this.quill.getLine(e.index),r=i(n,2),a=r[0],s=r[1],o=(new c.default).retain(e.index).insert("\n",t.format).retain(a.length()-s-1).retain(1,{header:null});this.quill.updateContents(o,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var n=t.prefix.length,r=this.quill.getLine(e.index),a=i(r,2),s=a[0],o=a[1];if(o>n)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",h.default.sources.USER),this.quill.history.cutoff();var d=(new c.default).retain(e.index-o).delete(n+1).retain(s.length()-2-o).retain(1,{list:l});this.quill.updateContents(d,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,h.default.sources.SILENT)}},"code exit":{key:y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),n=i(t,2),r=n[0],a=n[1],s=(new c.default).retain(e.index+r.length()-a-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(s,h.default.sources.USER)}},"embed left":x(y.keys.LEFT,!1),"embed left shift":x(y.keys.LEFT,!0),"embed right":x(y.keys.RIGHT,!1),"embed right shift":x(y.keys.RIGHT,!0)}},t.default=y,t.SHORTKEY=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=l(n(0)),o=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.selection=n,r.textNode=document.createTextNode(t.CONTENTS),r.domNode.appendChild(r.textNode),r._length=0,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"value",value:function(){}}]),a(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,n){if(0!==this._length)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);for(var r=this,a=0;null!=r&&r.statics.scope!==s.default.Scope.BLOCK_BLOT;)a+=r.offset(r.parent),r=r.parent;null!=r&&(this._length=t.CONTENTS.length,r.optimize(),r.formatAt(a,t.CONTENTS.length,e,n),this._length=0)}},{key:"index",value:function(e,n){return e===this.textNode?0:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,n=this.selection.getNativeRange(),i=void 0,a=void 0,l=void 0;if(null!=n&&n.start.node===e&&n.end.node===e){var c=[e,n.start.offset,n.end.offset];i=c[0],a=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var d=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof o.default?(i=this.next.domNode,this.next.insertAt(0,d),this.textNode.data=t.CONTENTS):(this.textNode.data=d,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=a){var u=[a,l].map((function(e){return Math.max(0,Math.min(i.data.length,e-1))})),h=r(u,2);return a=h[0],l=h[1],{startNode:i,startOffset:a,endNode:i,endOffset:l}}}}},{key:"update",value:function(e,t){var n=this;if(e.some((function(e){return"characterData"===e.type&&e.target===n.textNode}))){var r=this.restore();r&&(t.range=r)}}},{key:"value",value:function(){return""}}]),t}(s.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=n(4),a=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default.Container);o.allowedChildren=[a.default,i.BlockEmbed,o],t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),o=(r=s)&&r.__esModule?r:{default:r},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){var n=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+n.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):n}}]),t}(o.default.Attributor.Style),c=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),d=new l("color","color",{scope:o.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=c,t.ColorStyle=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);n=this.constructor.sanitize(n),this.domNode.setAttribute("href",n)}}],[{key:"create",value:function(e){var n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),n.setAttribute("href",e),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);function l(e,t){var n=document.createElement("a");n.href=e;var r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=o,t.sanitize=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(23)),s=o(n(107));function o(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case a.default.keys.ENTER:n.togglePicker();break;case a.default.keys.ESCAPE:n.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return i(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),e.hasAttribute("value")&&n.setAttribute("data-value",e.getAttribute("value")),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",(function(){t.selectItem(n,!0)})),n.addEventListener("keydown",(function(e){switch(e.keyCode){case a.default.keys.ENTER:t.selectItem(n,!0),e.preventDefault();break;case a.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),n}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=s.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(n){var r=e.buildItem(n);t.appendChild(r),!0===n.selected&&e.selectItem(r)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(e!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"===typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"===typeof Event?"undefined":r(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var n=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(0)),i=v(n(5)),a=n(4),s=v(a),o=v(n(16)),l=v(n(25)),c=v(n(24)),d=v(n(35)),u=v(n(6)),h=v(n(22)),p=v(n(7)),m=v(n(55)),f=v(n(42)),g=v(n(23));function v(e){return e&&e.__esModule?e:{default:e}}i.default.register({"blots/block":s.default,"blots/block/embed":a.BlockEmbed,"blots/break":o.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":d.default,"blots/inline":u.default,"blots/scroll":h.default,"blots/text":p.default,"modules/clipboard":m.default,"modules/history":f.default,"modules/keyboard":g.default}),r.default.register(s.default,o.default,c.default,u.default,h.default,p.default),t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e){this.domNode=e,this.domNode[r.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new r.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"===typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"===typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return r.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,n,i){var a=this.isolate(e,t);if(null!=r.query(n,r.Scope.BLOT)&&i)a.wrap(n,i);else if(null!=r.query(n,r.Scope.ATTRIBUTE)){var s=r.create(this.statics.scope);a.wrap(s),s.format(n,i)}},e.prototype.insertAt=function(e,t,n){var i=null==n?r.create("text",t):r.create(t,n),a=this.split(e);this.parent.insertBefore(i,a)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var n=null;e.children.insertBefore(this,t),null!=t&&(n=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==n||e.domNode.insertBefore(this.domNode,n),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var n=this.split(e);return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[r.DATA_KEY]&&delete this.domNode[r.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var n="string"===typeof e?r.create(e,t):e;return n.replace(this),n},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var n="string"===typeof e?r.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},e.blotName="abstract",e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(32),a=n(33),s=n(1),o=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=r.default.keys(this.domNode),n=i.default.keys(this.domNode),o=a.default.keys(this.domNode);t.concat(n).concat(o).forEach((function(t){var n=s.query(t,s.Scope.ATTRIBUTE);n instanceof r.default&&(e.attributes[n.attrName]=n)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(n){var r=t.attributes[n].value(t.domNode);e.format(n,r)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,n){return t[n]=e.attributes[n].value(e.domNode),t}),{})},e}();t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){i(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function i(e){var t=e.split("-"),n=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+n}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n,this.modules={}}return r(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();i.DEFAULTS={modules:{}},i.themes={default:i},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=o(n(0)),s=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach((function(e){n.contentNode.appendChild(e)})),n.leftGuard=document.createTextNode(l),n.rightGuard=document.createTextNode(l),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"index",value:function(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"restore",value:function(e){var t=void 0,n=void 0,r=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof s.default){var i=this.prev.length();this.prev.insertAt(i,r),t={startNode:this.prev.domNode,startOffset:i+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(a.default.create(n),this),t={startNode:n,startOffset:r.length};else e===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,r),t={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(a.default.create(n),this.next),t={startNode:n,startOffset:r.length}));return e.data=l,t}},{key:"update",value:function(e,t){var n=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===n.leftGuard||e.target===n.rightGuard)){var r=n.restore(e.target);r&&(t.range=r)}}))}}]),t}(a.default.Embed);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},s={scope:a.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new a.default.Attributor.Attribute("align","align",s),l=new a.default.Attributor.Class("align","ql-align",s),c=new a.default.Attributor.Style("align","text-align",s);t.AlignAttribute=o,t.AlignClass=l,t.AlignStyle=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},s=n(26),o=new a.default.Attributor.Class("background","ql-bg",{scope:a.default.Scope.INLINE}),l=new s.ColorAttributor("background","background-color",{scope:a.default.Scope.INLINE});t.BackgroundClass=o,t.BackgroundStyle=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},s={scope:a.default.Scope.BLOCK,whitelist:["rtl"]},o=new a.default.Attributor.Attribute("direction","dir",s),l=new a.default.Attributor.Class("direction","ql-direction",s),c=new a.default.Attributor.Style("direction","direction",s);t.DirectionAttribute=o,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),o=(r=s)&&r.__esModule?r:{default:r},l={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new o.default.Attributor.Class("font","ql-font",l),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(o.default.Attributor.Style),u=new d("font","font-family",l);t.FontStyle=u,t.FontClass=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},s=new a.default.Attributor.Class("size","ql-size",{scope:a.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new a.default.Attributor.Style("size","font-size",{scope:a.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=s,t.SizeStyle=o},function(e,t,n){"use strict";e.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(0)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.lastRecorded=0,r.ignoreChange=!1,r.clear(),r.quill.on(a.default.events.EDITOR_CHANGE,(function(e,t,n,i){e!==a.default.events.TEXT_CHANGE||r.ignoreChange||(r.options.userOnly&&i!==a.default.sources.USER?r.transform(t):r.record(t,n))})),r.quill.keyboard.addBinding({key:"Z",shortKey:!0},r.undo.bind(r)),r.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},r.redo.bind(r)),/Win/i.test(navigator.platform)&&r.quill.keyboard.addBinding({key:"Y",shortKey:!0},r.redo.bind(r)),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var n=this.stack[e].pop();this.stack[t].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[e],a.default.sources.USER),this.ignoreChange=!1;var r=l(n[e]);this.quill.setSelection(r)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(t),r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){var i=this.stack.undo.pop();n=n.compose(i.undo),e=i.redo.compose(e)}else this.lastRecorded=r;this.stack.undo.push({redo:e,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(s(n(9)).default);function l(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),n=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"===typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=i.default.query(e,i.default.Scope.BLOCK)})))}(e)&&(n-=1),n}o.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=o,t.getLastChangeIndex=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=m(n(3)),s=m(n(2)),o=m(n(8)),l=m(n(23)),c=m(n(34)),d=m(n(59)),u=m(n(60)),h=m(n(28)),p=m(n(61));function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[!1,"center","right","justify"],y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],w=["1","2","3",!1],_=["small",!1,"large","huge"],k=function(e){function t(e,n){f(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.emitter.listenDOM("click",document.body,(function t(n){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==r.tooltip||r.tooltip.root.contains(n.target)||document.activeElement===r.tooltip.textbox||r.quill.hasFocus()||r.tooltip.hide(),null!=r.pickers&&r.pickers.forEach((function(e){e.container.contains(n.target)||e.close()}))})),r}return v(t,e),r(t,[{key:"addModule",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice(3),null!=t[n]))if("direction"===n)e.innerHTML=t[n][""]+t[n].rtl;else if("string"===typeof t[n])e.innerHTML=t[n];else{var r=e.value||"";null!=r&&t[n][r]&&(e.innerHTML=t[n][r])}}))}))}},{key:"buildPickers",value:function(e,t){var n=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&N(e,b),new u.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var n=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&N(e,y,"background"===n?"#ffffff":"#000000"),new d.default(e,t[n])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?N(e,x):e.classList.contains("ql-header")?N(e,w):e.classList.contains("ql-size")&&N(e,_)),new h.default(e)})),this.quill.on(o.default.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(e){e.update()}))}))}}]),t}(c.default);k.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var n=new FileReader;n.onload=function(n){var r=e.quill.getSelection(!0);e.quill.updateContents((new s.default).retain(r.index).delete(r.length).insert({image:n.target.result}),o.default.sources.USER),e.quill.setSelection(r.index+1,o.default.sources.SILENT),t.value=""},n.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var j=function(e){function t(e,n){f(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.textbox=r.root.querySelector('input[type="text"]'),r.listen(),r}return v(t,e),r(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,o.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,o.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=function(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}(e);case"formula":if(!e)break;var n=this.quill.getSelection(!0);if(null!=n){var r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,o.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",o.default.sources.USER),this.quill.setSelection(r+2,o.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(p.default);function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var r=document.createElement("option");t===n?r.setAttribute("selected","selected"):r.setAttribute("value",t),e.appendChild(r)}))}t.BaseTooltip=j,t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,n=this.iterator();t=n();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n,r=this.iterator();n=r();){var i=n.length();if(e<i||t&&e===i&&(null==n.next||0!==n.next.length()))return[n,e];e-=i}return[null,0]},e.prototype.forEach=function(e){for(var t,n=this.iterator();t=n();)e(t)},e.prototype.forEachAt=function(e,t,n){if(!(t<=0))for(var r,i=this.find(e),a=i[0],s=e-i[1],o=this.iterator(a);(r=o())&&s<e+t;){var l=r.length();e>s?n(r,e-s,Math.min(t,s+l-e)):n(r,0,Math.min(l,e+t-s)),s+=l}},e.prototype.map=function(e){return this.reduce((function(t,n){return t.push(e(n)),t}),[])},e.prototype.reduce=function(e,t){for(var n,r=this.iterator();n=r();)t=e(t,n);return t},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),a=n(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},o=function(e){function t(t){var n=e.call(this,t)||this;return n.scroll=n,n.observer=new MutationObserver((function(e){n.update(e)})),n.observer.observe(n.domNode,s),n.attach(),n}return r(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,r,i){this.update(),e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){this.update(),e.prototype.insertAt.call(this,t,n,r)},t.prototype.optimize=function(t,n){var r=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)t.push(s.pop());for(var o=function(e,t){void 0===t&&(t=!0),null!=e&&e!==r&&null!=e.domNode.parentNode&&(null==e.domNode[a.DATA_KEY].mutations&&(e.domNode[a.DATA_KEY].mutations=[]),t&&o(e.parent))},l=function(e){null!=e.domNode[a.DATA_KEY]&&null!=e.domNode[a.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(l),e.optimize(n))},c=t,d=0;c.length>0;d+=1){if(d>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(e){var t=a.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(o(a.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=a.find(e,!1);o(t,!1),t instanceof i.default&&t.children.forEach((function(e){o(e,!1)}))}))):"attributes"===e.type&&o(t.prev)),o(t))})),this.children.forEach(l),s=(c=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)t.push(s.pop())}},t.prototype.update=function(t,n){var r=this;void 0===n&&(n={}),(t=t||this.observer.takeRecords()).map((function(e){var t=a.find(e.target,!0);return null==t?null:null==t.domNode[a.DATA_KEY].mutations?(t.domNode[a.DATA_KEY].mutations=[e],t):(t.domNode[a.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==r&&null!=e.domNode[a.DATA_KEY]&&e.update(e.domNode[a.DATA_KEY].mutations||[],n)})),null!=this.domNode[a.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),a=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){if(n.tagName!==t.tagName)return e.formats.call(this,n)},t.prototype.format=function(n,r){var a=this;n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):(this.children.forEach((function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),a.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,n,r,i){null!=this.formats()[r]||a.query(r,a.Scope.ATTRIBUTE)?this.isolate(t,n).format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var i=this.next;i instanceof t&&i.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(r,i.formats())&&(i.moveChildren(this),i.remove())},t.blotName="inline",t.scope=a.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),a=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){var r=a.query(t.blotName).tagName;if(n.tagName!==r)return e.formats.call(this,n)},t.prototype.format=function(n,r){null!=a.query(n,a.Scope.BLOCK)&&(n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,n,r,i){null!=a.query(r,a.Scope.BLOCK)?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){if(null==r||null!=a.query(n,a.Scope.INLINE))e.prototype.insertAt.call(this,t,n,r);else{var i=this.split(t),s=a.create(n,r);i.parent.insertBefore(s,i)}},t.prototype.update=function(t,n){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,n)},t.blotName="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(e){},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,r,i){0===t&&n===this.length()?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(n(19).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),a=n(1),s=function(e){function t(t){var n=e.call(this,t)||this;return n.text=n.statics.value(n.domNode),n}return r(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,r){null==r?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,r)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=a.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e,t){var n=this;e.some((function(e){return"characterData"===e.type&&e.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,n){"use strict";var r=document.createElement("div");if(r.classList.toggle("test-class",!1),r.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)===!t?t:i.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],a=0;a<r;a++)if(t=n[a],e.call(i,t,a,n))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var n=-1;function r(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var d=a(e,t),u=e.substring(0,d);d=s(e=e.substring(d),t=t.substring(d));var h=e.substring(e.length-d),p=function(e,t){var o;if(!e)return[[1,t]];if(!t)return[[n,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,d=l.indexOf(c);if(-1!=d)return o=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],e.length>t.length&&(o[0][0]=o[2][0]=n),o;if(1==c.length)return[[n,e],[1,t]];var u=function(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;function i(e,t,n){for(var r,i,o,l,c=e.substring(n,n+Math.floor(e.length/4)),d=-1,u="";-1!=(d=t.indexOf(c,d+1));){var h=a(e.substring(n),t.substring(d)),p=s(e.substring(0,n),t.substring(0,d));u.length<p+h&&(u=t.substring(d-p,d)+t.substring(d,d+h),r=e.substring(0,n-p),i=e.substring(n+h),o=t.substring(0,d-p),l=t.substring(d+h))}return 2*u.length>=e.length?[r,i,o,l,u]:null}var o,l,c,d,u,h=i(n,r,Math.ceil(n.length/4)),p=i(n,r,Math.ceil(n.length/2));if(!h&&!p)return null;o=p?h&&h[4].length>p[4].length?h:p:h,e.length>t.length?(l=o[0],c=o[1],d=o[2],u=o[3]):(d=o[0],u=o[1],l=o[2],c=o[3]);var m=o[4];return[l,c,d,u,m]}(e,t);if(u){var h=u[0],p=u[1],m=u[2],f=u[3],g=u[4],v=r(h,m),b=r(p,f);return v.concat([[0,g]],b)}return function(e,t){for(var r=e.length,a=t.length,s=Math.ceil((r+a)/2),o=s,l=2*s,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[o+1]=0,d[o+1]=0;for(var h=r-a,p=h%2!=0,m=0,f=0,g=0,v=0,b=0;b<s;b++){for(var y=-b+m;y<=b-f;y+=2){for(var x=o+y,w=(S=y==-b||y!=b&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-y;S<r&&w<a&&e.charAt(S)==t.charAt(w);)S++,w++;if(c[x]=S,S>r)f+=2;else if(w>a)m+=2;else if(p&&(j=o+h-y)>=0&&j<l&&-1!=d[j]&&S>=(k=r-d[j]))return i(e,t,S,w)}for(var _=-b+g;_<=b-v;_+=2){for(var k,j=o+_,N=(k=_==-b||_!=b&&d[j-1]<d[j+1]?d[j+1]:d[j-1]+1)-_;k<r&&N<a&&e.charAt(r-k-1)==t.charAt(a-N-1);)k++,N++;if(d[j]=k,k>r)v+=2;else if(N>a)g+=2;else if(!p){var S;if((x=o+h-_)>=0&&x<l&&-1!=c[x])if(w=o+(S=c[x])-x,S>=(k=r-k))return i(e,t,S,w)}}}return[[n,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-d),t=t.substring(0,t.length-d));return u&&p.unshift([0,u]),h&&p.push([0,h]),o(p),null!=l&&(p=function(e,t){var r=function(e,t){if(0===t)return[0,e];for(var r=0,i=0;i<e.length;i++){var a=e[i];if(a[0]===n||0===a[0]){var s=r+a[1].length;if(t===s)return[i+1,e];if(t<s){e=e.slice();var o=t-r,l=[a[0],a[1].slice(0,o)],c=[a[0],a[1].slice(o)];return e.splice(i,1,l,c),[i+1,e]}r=s}}throw new Error("cursor_pos is out of bounds!")}(e,t),i=r[1],a=r[0],s=i[a],o=i[a+1];if(null==s)return e;if(0!==s[0])return e;if(null!=o&&s[1]+o[1]===o[1]+s[1])return i.splice(a,2,o,s),c(i,a,2);if(null!=o&&0===o[1].indexOf(s[1])){i.splice(a,2,[o[0],s[1]],[0,s[1]]);var l=o[1].slice(s[1].length);return l.length>0&&i.splice(a+2,0,[o[0],l]),c(i,a,3)}return e}(p,l)),p=function(e){for(var t=!1,r=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},i=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},a=2;a<e.length;a+=1)0===e[a-2][0]&&i(e[a-2][1])&&e[a-1][0]===n&&r(e[a-1][1])&&1===e[a][0]&&r(e[a][1])&&(t=!0,e[a-1][1]=e[a-2][1].slice(-1)+e[a-1][1],e[a][1]=e[a-2][1].slice(-1)+e[a][1],e[a-2][1]=e[a-2][1].slice(0,-1));if(!t)return e;var s=[];for(a=0;a<e.length;a+=1)e[a][1].length>0&&s.push(e[a]);return s}(p)}function i(e,t,n,i){var a=e.substring(0,n),s=t.substring(0,i),o=e.substring(n),l=t.substring(i),c=r(a,s),d=r(o,l);return c.concat(d)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;n<i;)e.substring(a,i)==t.substring(a,i)?a=n=i:r=i,i=Math.floor((r-n)/2+n);return i}function s(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;n<i;)e.substring(e.length-i,e.length-a)==t.substring(t.length-i,t.length-a)?a=n=i:r=i,i=Math.floor((r-n)/2+n);return i}function o(e){e.push([0,""]);for(var t,r=0,i=0,l=0,c="",d="";r<e.length;)switch(e[r][0]){case 1:l++,d+=e[r][1],r++;break;case n:i++,c+=e[r][1],r++;break;case 0:i+l>1?(0!==i&&0!==l&&(0!==(t=a(d,c))&&(r-i-l>0&&0==e[r-i-l-1][0]?e[r-i-l-1][1]+=d.substring(0,t):(e.splice(0,0,[0,d.substring(0,t)]),r++),d=d.substring(t),c=c.substring(t)),0!==(t=s(d,c))&&(e[r][1]=d.substring(d.length-t)+e[r][1],d=d.substring(0,d.length-t),c=c.substring(0,c.length-t))),0===i?e.splice(r-l,i+l,[1,d]):0===l?e.splice(r-i,i+l,[n,c]):e.splice(r-i-l,i+l,[n,c],[1,d]),r=r-i-l+(i?1:0)+(l?1:0)+1):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,l=0,i=0,c="",d=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),u=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),u=!0)),r++;u&&o(e)}var l=r;function c(e,t,n){for(var r=t+n-1;r>=0&&r>=t-1;r--)if(r+1<e.length){var i=e[r],a=e[r+1];i[0]===a[1]&&e.splice(r,2,[i[0],i[1]+a[1]])}return e}l.INSERT=1,l.DELETE=n,l.EQUAL=0,e.exports=l},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"===typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function i(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var a=0,s=i.length,o=new Array(s);a<s;a++)o[a]=i[a].fn;return o},s.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,i),!0;case 5:return d.fn.call(d.context,t,n,i,a),!0;case 6:return d.fn.call(d.context,t,n,i,a,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},s.prototype.on=function(e,t,n){var i=new a(t,n||this),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},s.prototype.once=function(e,t,n){var i=new a(t,n||this,!0),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},s.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return 0===--this._eventsCount?this._events=new i:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||(0===--this._eventsCount?this._events=new i:delete this._events[s]);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new i:delete this._events[s]}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=r,s.EventEmitter=s,"undefined"!==typeof e&&(e.exports=s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=y(n(3)),o=y(n(2)),l=y(n(0)),c=y(n(5)),d=y(n(10)),u=y(n(9)),h=n(36),p=n(37),m=y(n(13)),f=n(26),g=n(38),v=n(39),b=n(40);function y(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(0,d.default)("quill:clipboard"),_="__ql-matcher",k=[[Node.TEXT_NODE,I],[Node.TEXT_NODE,R],["br",function(e,t){return A(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,function(e,t){var n={},r=e.style||{};return r.fontStyle&&"italic"===C(e).fontStyle&&(n.italic=!0),r.fontWeight&&(C(e).fontWeight.startsWith("bold")||parseInt(C(e).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=E(t,n)),parseFloat(r.textIndent||0)>0&&(t=(new o.default).insert("\t").concat(t)),t}],["li",function(e,t){var n=l.default.query(e);if(null==n||"list-item"!==n.blotName||!A(t,"\n"))return t;for(var r=-1,i=e.parentNode;!i.classList.contains("ql-clipboard");)"list"===(l.default.query(i)||{}).blotName&&(r+=1),i=i.parentNode;return r<=0?t:t.compose((new o.default).retain(t.length()-1).retain(1,{indent:r}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new o.default}]],j=[h.AlignAttribute,g.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),N=[h.AlignStyle,p.BackgroundStyle,f.ColorStyle,g.DirectionStyle,v.FontStyle,b.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),S=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.root.addEventListener("paste",r.onPaste.bind(r)),r.container=r.quill.addContainer("ql-clipboard"),r.container.setAttribute("contenteditable",!0),r.container.setAttribute("tabindex",-1),r.matchers=[],k.concat(r.options.matchers).forEach((function(e){var t=i(e,2),a=t[0],s=t[1];(n.matchVisual||s!==L)&&r.addMatcher(a,s)})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"===typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[m.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new o.default).insert(n,x({},m.default.blotName,t[m.default.blotName]))}var r=this.prepareMatching(),a=i(r,2),s=a[0],l=a[1],c=O(this.container,s,l);return A(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new o.default).retain(c.length()-1).delete(1))),w.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"===typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var r=this.convert(t);this.quill.updateContents((new o.default).retain(e).concat(r),n),this.quill.setSelection(e+r.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),r=(new o.default).retain(n.index),i=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout((function(){r=r.concat(t.convert()).delete(n.length),t.quill.updateContents(r,c.default.sources.USER),t.quill.setSelection(r.length()-n.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=i,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],n=[];return this.matchers.forEach((function(r){var a=i(r,2),s=a[0],o=a[1];switch(s){case Node.TEXT_NODE:n.push(o);break;case Node.ELEMENT_NODE:t.push(o);break;default:[].forEach.call(e.container.querySelectorAll(s),(function(e){e[_]=e[_]||[],e[_].push(o)}))}})),[t,n]}}]),t}(u.default);function E(e,t,n){return"object"===("undefined"===typeof t?"undefined":r(t))?Object.keys(t).reduce((function(e,n){return E(e,n,t[n])}),e):e.reduce((function(e,r){return r.attributes&&r.attributes[t]?e.push(r):e.insert(r.insert,(0,s.default)({},x({},t,n),r.attributes))}),new o.default)}function C(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function A(e,t){for(var n="",r=e.ops.length-1;r>=0&&n.length<t.length;--r){var i=e.ops[r];if("string"!==typeof i.insert)break;n=i.insert+n}return n.slice(-1*t.length)===t}function T(e){if(0===e.childNodes.length)return!1;var t=C(e);return["block","list-item"].indexOf(t.display)>-1}function O(e,t,n){return e.nodeType===e.TEXT_NODE?n.reduce((function(t,n){return n(e,t)}),new o.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(r,i){var a=O(i,t,n);return i.nodeType===e.ELEMENT_NODE&&(a=t.reduce((function(e,t){return t(i,e)}),a),a=(i[_]||[]).reduce((function(e,t){return t(i,e)}),a)),r.concat(a)}),new o.default):new o.default}function P(e,t,n){return E(n,e,!0)}function M(e,t){var n=l.default.Attributor.Attribute.keys(e),r=l.default.Attributor.Class.keys(e),i=l.default.Attributor.Style.keys(e),a={};return n.concat(r).concat(i).forEach((function(t){var n=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=n&&(a[n.attrName]=n.value(e),a[n.attrName])||(null==(n=j[t])||n.attrName!==t&&n.keyName!==t||(a[n.attrName]=n.value(e)||void 0),null==(n=N[t])||n.attrName!==t&&n.keyName!==t||(n=N[t],a[n.attrName]=n.value(e)||void 0))})),Object.keys(a).length>0&&(t=E(t,a)),t}function D(e,t){var n=l.default.query(e);if(null==n)return t;if(n.prototype instanceof l.default.Embed){var r={},i=n.value(e);null!=i&&(r[n.blotName]=i,t=(new o.default).insert(r,n.formats(e)))}else"function"===typeof n.formats&&(t=E(t,n.blotName,n.formats(e)));return t}function R(e,t){return A(t,"\n")||(T(e)||t.length()>0&&e.nextSibling&&T(e.nextSibling))&&t.insert("\n"),t}function L(e,t){if(T(e)&&null!=e.nextElementSibling&&!A(t,"\n\n")){var n=e.offsetHeight+parseFloat(C(e).marginTop)+parseFloat(C(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*n&&t.insert("\n")}return t}function I(e,t){var n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!C(e.parentNode).whiteSpace.startsWith("pre")){var r=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,r.bind(r,!0)),(null==e.previousSibling&&T(e.parentNode)||null!=e.previousSibling&&T(e.previousSibling))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==e.nextSibling&&T(e.parentNode)||null!=e.nextSibling&&T(e.nextSibling))&&(n=n.replace(/\s+$/,r.bind(r,!1)))}return t.insert(n)}S.DEFAULTS={matchers:[],matchVisual:!0},t.default=S,t.matchAttributor=M,t.matchBlot=D,t.matchNewline=R,t.matchSpacing=L,t.matchText=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);o.blotName="bold",o.tagName=["STRONG","B"],t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=d(n(2)),s=d(n(0)),o=d(n(5)),l=d(n(10)),c=d(n(9));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=(0,l.default)("quill:toolbar"),p=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i,a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(Array.isArray(a.options.container)){var s=document.createElement("div");f(s,a.options.container),e.container.parentNode.insertBefore(s,e.container),a.container=s}else"string"===typeof a.options.container?a.container=document.querySelector(a.options.container):a.container=a.options.container;return a.container instanceof HTMLElement?(a.container.classList.add("ql-toolbar"),a.controls=[],a.handlers={},Object.keys(a.options.handlers).forEach((function(e){a.addHandler(e,a.options.handlers[e])})),[].forEach.call(a.container.querySelectorAll("button, select"),(function(e){a.attach(e)})),a.quill.on(o.default.events.EDITOR_CHANGE,(function(e,t){e===o.default.events.SELECTION_CHANGE&&a.update(t)})),a.quill.on(o.default.events.SCROLL_OPTIMIZE,(function(){var e=a.quill.selection.getRange(),t=r(e,1)[0];a.update(t)})),a):(i=h.error("Container required for toolbar",a.options),u(a,i))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,n=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(n){if(n=n.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void h.warn("ignoring attaching to disabled format",n,e);if(null==s.default.query(n))return void h.warn("ignoring attaching to nonexistent format",n,e)}var i="SELECT"===e.tagName?"change":"click";e.addEventListener(i,(function(i){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),i.preventDefault();t.quill.focus();var d=t.quill.selection.getRange(),u=r(d,1)[0];if(null!=t.handlers[n])t.handlers[n].call(t,l);else if(s.default.query(n).prototype instanceof s.default.Embed){if(!(l=prompt("Enter "+n)))return;t.quill.updateContents((new a.default).retain(u.index).delete(u.length).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,l)),o.default.sources.USER)}else t.quill.format(n,l,o.default.sources.USER);t.update(u)})),this.controls.push([n,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(n){var i=r(n,2),a=i[0],s=i[1];if("SELECT"===s.tagName){var o=void 0;if(null==e)o=null;else if(null==t[a])o=s.querySelector("option[selected]");else if(!Array.isArray(t[a])){var l=t[a];"string"===typeof l&&(l=l.replace(/\"/g,'\\"')),o=s.querySelector('option[value="'+l+'"]')}null==o?(s.value="",s.selectedIndex=-1):o.selected=!0}else if(null==e)s.classList.remove("ql-active");else if(s.hasAttribute("value")){var c=t[a]===s.getAttribute("value")||null!=t[a]&&t[a].toString()===s.getAttribute("value")||null==t[a]&&!s.getAttribute("value");s.classList.toggle("ql-active",c)}else s.classList.toggle("ql-active",null!=t[a])}))}}]),t}(c.default);function m(e,t,n){var r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("ql-"+t),null!=n&&(r.value=n),e.appendChild(r)}function f(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var n=document.createElement("span");n.classList.add("ql-formats"),t.forEach((function(e){if("string"===typeof e)m(n,e);else{var t=Object.keys(e)[0],r=e[t];Array.isArray(r)?function(e,t,n){var r=document.createElement("select");r.classList.add("ql-"+t),n.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),r.appendChild(t)})),e.appendChild(r)}(n,t,r):m(n,t,r)}})),e.appendChild(n)}))}p.DEFAULTS={},p.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(t){null!=s.default.query(t,s.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,o.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",o.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,o.default.sources.USER),this.quill.format("direction",e,o.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0);if("+1"===e||"-1"===e){var i="+1"===e?1:-1;"rtl"===n.direction&&(i*=-1),this.quill.format("indent",r+i,o.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,o.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t);"check"===e?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,o.default.sources.USER):this.quill.format("list","unchecked",o.default.sources.USER):this.quill.format("list",e,o.default.sources.USER)}}},t.default=p,t.addControls=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(28),o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.label.innerHTML=n,r.container.classList.add("ql-color-picker"),[].slice.call(r.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"buildItem",value:function(e){var n=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return n.style.backgroundColor=e.getAttribute("value")||"",n}},{key:"selectItem",value:function(e,n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n);var r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&("line"===r.tagName?r.style.stroke=i:r.style.fill=i)}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(28),o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.container.classList.add("ql-icon-picker"),[].forEach.call(r.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=n[e.getAttribute("data-value")||""]})),r.defaultItem=r.container.querySelector(".ql-selected"),r.selectItem(r.defaultItem),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"selectItem",value:function(e,n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){r.root.style.marginTop=-1*r.quill.root.scrollTop+"px"})),this.hide()}return r(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),a=0;if(i.right>r.right&&(a=r.right-i.right,this.root.style.left=t+a+"px"),i.left<r.left&&(a=r.left-i.left,this.root.style.left=t+a+"px"),i.bottom>r.bottom){var s=i.bottom-i.top,o=e.bottom-e.top+s;this.root.style.top=n-o+"px",this.root.classList.add("ql-flip")}return a}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=p(n(3)),o=p(n(8)),l=n(43),c=p(l),d=p(n(27)),u=n(15),h=p(n(41));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],b=function(e){function t(e,n){m(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=v);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-snow"),r}return g(t,e),a(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),h.default),this.tooltip=new y(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,n){e.handlers.link.call(e,!n.format.link)}))}}]),t}(c.default);b.DEFAULTS=(0,s.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var y=function(e){function t(e,n){m(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preview=r.root.querySelector("a.ql-preview"),r}return g(t,e),a(t,[{key:"listen",value:function(){var e=this;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var n=e.linkRange;e.restoreFocus(),e.quill.formatText(n,"link",!1,o.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(o.default.events.SELECTION_CHANGE,(function(t,n,i){if(null!=t){if(0===t.length&&i===o.default.sources.USER){var a=e.quill.scroll.descendant(d.default,t.index),s=r(a,2),l=s[0],c=s[1];if(null!=l){e.linkRange=new u.Range(t.index-c,l.length());var h=d.default.formats(l.domNode);return e.preview.textContent=h,e.preview.setAttribute("href",h),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=R(n(29)),i=n(36),a=n(38),s=n(64),o=R(n(65)),l=R(n(66)),c=n(67),d=R(c),u=n(37),h=n(26),p=n(39),m=n(40),f=R(n(56)),g=R(n(68)),v=R(n(27)),b=R(n(69)),y=R(n(70)),x=R(n(71)),w=R(n(72)),_=R(n(73)),k=n(13),j=R(k),N=R(n(74)),S=R(n(75)),E=R(n(57)),C=R(n(41)),A=R(n(28)),T=R(n(59)),O=R(n(60)),P=R(n(61)),M=R(n(108)),D=R(n(62));function R(e){return e&&e.__esModule?e:{default:e}}r.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":i.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":i.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":m.SizeStyle},!0),r.default.register({"formats/align":i.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":s.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":p.FontClass,"formats/size":m.SizeClass,"formats/blockquote":o.default,"formats/code-block":j.default,"formats/header":l.default,"formats/list":d.default,"formats/bold":f.default,"formats/code":k.Code,"formats/italic":g.default,"formats/link":v.default,"formats/script":b.default,"formats/strike":y.default,"formats/underline":x.default,"formats/image":w.default,"formats/video":_.default,"formats/list/item":c.ListItem,"modules/formula":N.default,"modules/syntax":S.default,"modules/toolbar":E.default,"themes/bubble":M.default,"themes/snow":D.default,"ui/icons":C.default,"ui/picker":A.default,"ui/icon-picker":O.default,"ui/color-picker":T.default,"ui/tooltip":P.default},!0),t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),o=(r=s)&&r.__esModule?r:{default:r},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"add",value:function(e,n){if("+1"===n||"-1"===n){var r=this.value(e)||0;n="+1"===n?r+1:r-1}return 0===n?(this.remove(e),!0):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n)}},{key:"canAdd",value:function(e,n){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,n)||a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(n))}},{key:"value",value:function(e){return parseInt(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(o.default.Attributor.Class),c=new l("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(4),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);a.blotName="blockquote",a.tagName="blockquote",t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((r=a)&&r.__esModule?r:{default:r}).default);s.blotName="header",s.tagName=["H1","H2","H3","H4","H5","H6"],t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=l(n(0)),s=l(n(4)),o=l(n(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),r(t,[{key:"format",value:function(e,n){e!==p.blotName||n?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n):this.replaceWith(a.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,n){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,n),this):(this.parent.unwrap(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,n))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:i(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(s.default);h.blotName="list-item",h.tagName="LI";var p=function(e){function t(e){c(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=function(t){if(t.target.parentNode===e){var r=n.statics.formats(e),i=a.default.find(t.target);"checked"===r?i.format("list","unchecked"):"unchecked"===r&&i.format("list","checked")}};return e.addEventListener("touchstart",r),e.addEventListener("mousedown",r),n}return u(t,e),r(t,null,[{key:"create",value:function(e){var n="ordered"===e?"OL":"UL",r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,n);return"checked"!==e&&"unchecked"!==e||r.setAttribute("data-checked","checked"===e),r}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),r(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,n=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var e,t,n}},{key:"insertBefore",value:function(e,n){if(e instanceof h)i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n);else{var r=null==n?this.length():n.offset(this),a=this.split(r);a.parent.insertBefore(e,a)}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var n=a.default.create(this.statics.defaultChild);e.moveChildren(n),this.appendChild(n)}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(o.default);p.blotName="list",p.scope=a.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[h],t.ListItem=h,t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(56),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);a.blotName="italic",a.tagName=["EM","I"],t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);o.blotName="script",o.tagName=["SUB","SUP"],t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);a.blotName="strike",a.tagName="S",t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);a.blotName="underline",a.tagName="U",t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),o=(r=s)&&r.__esModule?r:{default:r},l=n(27),c=["alt","height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){c.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return c.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.default.Embed);d.blotName="image",d.tagName="IMG",t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(4),o=n(27),l=(r=o)&&r.__esModule?r:{default:r},c=["height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){c.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return c.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(s.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=l(n(35)),s=l(n(5)),o=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),r(t,null,[{key:"create",value:function(e){var n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(a.default);h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var p=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return u(t,e),r(t,null,[{key:"register",value:function(){s.default.register(h,!0)}}]),t}(o.default);t.FormulaBlot=h,t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},a=l(n(0)),s=l(n(5)),o=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),r(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(n(13)).default);h.className="ql-syntax";var p=new a.default.Attributor.Class("token","hljs",{scope:a.default.Scope.INLINE}),m=function(e){function t(e,n){c(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if("function"!==typeof r.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var i=null;return r.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(i),i=setTimeout((function(){r.highlight(),i=null}),r.options.interval)})),r.highlight(),r}return u(t,e),r(t,null,[{key:"register",value:function(){s.default.register(p,!0),s.default.register(h,!0)}}]),r(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(s.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(h).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(s.default.sources.SILENT),null!=t&&this.quill.setSelection(t,s.default.sources.SILENT)}}}]),t}(o.default);m.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=h,t.CodeToken=p,t.default=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(3)),s=u(n(8)),o=n(43),l=u(o),c=n(15),d=u(n(41));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,n){h(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=f);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-bubble"),r}return m(t,e),i(t,[{key:"extendToolbar",value:function(e){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default)}}]),t}(l.default);g.DEFAULTS=(0,a.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=function(e){function t(e,n){h(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t,n,i){if(e===s.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&i===s.default.sources.USER){r.show(),r.root.style.left="0px",r.root.style.width="",r.root.style.width=r.root.offsetWidth+"px";var a=r.quill.getLines(t.index,t.length);if(1===a.length)r.position(r.quill.getBounds(t));else{var o=a[a.length-1],l=r.quill.getIndex(o),d=Math.min(o.length()-1,t.index+t.length-l),u=r.quill.getBounds(new c.Range(l,d));r.position(u)}}else document.activeElement!==r.textbox&&r.quill.hasFocus()&&r.hide()})),r}return m(t,e),i(t,[{key:"listen",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===n)return n;i.style.marginLeft=-1*n-i.offsetWidth/2+"px"}}]),t}(o.BaseTooltip);v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=v,t.default=g},function(e,t,n){e.exports=n(63)}]).default},e.exports=t()},182:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){void 0===n&&(n={});for(var r=[],i="function"===typeof n.replace,c=n.transform||s.returnFirstArg,d=n.library||o,u=d.cloneElement,h=d.createElement,p=d.isValidElement,m=t.length,f=0;f<m;f++){var g=t[f];if(i){var v=n.replace(g,f);if(p(v)){m>1&&(v=u(v,{key:v.key||f})),r.push(c(v,g,f));continue}}if("text"!==g.type){var b=g,y={};l(b)?((0,s.setStyleProp)(b.attribs.style,b.attribs),y=b.attribs):b.attribs&&(y=(0,a.default)(b.attribs,b.name));var x=void 0;switch(g.type){case"script":case"style":g.children[0]&&(y.dangerouslySetInnerHTML={__html:g.children[0].data});break;case"tag":"textarea"===g.name&&g.children[0]?y.defaultValue=g.children[0].data:g.children&&g.children.length&&(x=e(g.children,n));break;default:continue}m>1&&(y.key=f),r.push(c(h(g.name,y,x),g,f))}else{var w=!g.data.trim().length;if(w&&g.parent&&!(0,s.canTextBeChildOfNode)(g.parent))continue;if(n.trim&&w)continue;r.push(c(g.data,g,f))}}return 1===r.length?r[0]:r};var i=n(8554),a=r(n(2202)),s=n(4160),o={cloneElement:i.cloneElement,createElement:i.createElement,isValidElement:i.isValidElement};function l(e){return s.PRESERVE_CUSTOM_ATTRIBUTES&&"tag"===e.type&&(0,s.isCustomComponent)(e.name,e.attribs)}},202:(e,t,n)=>{var r=n(220)(n(4759),"Promise");e.exports=r},220:(e,t,n)=>{var r=n(7949),i=n(8166);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},231:(e,t,n)=>{var r=n(3616),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},475:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).has(e)}},708:(e,t,n)=>{var r=n(7101);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},738:(e,t,n)=>{var r=n(1111),i=n(5661),a=n(1465);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},799:e=>{e.exports=function(e){return this.__data__.has(e)}},854:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r=n(6339),i=new(function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):(0,r.G6)((function(){t.notifyFn(e)}))},t.batchCalls=function(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.schedule((function(){e.apply(void 0,r)}))}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&(0,r.G6)((function(){e.batchNotifyFn((function(){t.forEach((function(t){e.notifyFn(t)}))}))}))},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}())},943:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1111:(e,t,n)=>{var r=n(6958),i=n(1176),a=n(1787),s=n(231),o=n(7455);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},1176:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1404:(e,t,n)=>{var r=n(2130),i=n(9248);e.exports=function e(t,n,a,s,o){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,a,s,e,o))}},1416:(e,t,n)=>{var r=n(4635),i=n(8246),a=n(4206),s=n(9757),o=n(943),l=n(6557),c=r?r.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,u,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=o;case"[object Set]":var m=1&r;if(p||(p=l),e.size!=t.size&&!m)return!1;var f=h.get(e);if(f)return f==t;r|=2,h.set(e,t);var g=s(p(e),p(t),r,c,u,h);return h.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},1438:(e,t,n)=>{"use strict";n.d(t,{E:()=>b});var r=n(8168),i=n(6339),a=n(5540),s=n(854),o=n(5592),l=n(7639),c=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=(0,r.A)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,i.gn)(this.cacheTime)&&(this.gcTimeout=setTimeout((function(){e.optionalRemove()}),this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var n,r,a=this.state.data,s=(0,i.Zw)(e,a);return(null==(n=(r=this.options).isDataEqual)?void 0:n.call(r,a,s))?s=a:!1!==this.options.structuralSharing&&(s=(0,i.BH)(a,s)),this.dispatch({data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),s},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(i.lQ).catch(i.lQ):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some((function(e){return!1!==e.options.enabled}))},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((function(e){return e.getCurrentResult().isStale}))},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,i.j3)(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnWindowFocus()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnReconnect()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((function(t){return t!==e})),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var n,r,a,s=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return null==(c=this.retryer)||c.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var d=this.observers.find((function(e){return e.options.queryFn}));d&&this.setOptions(d.options)}var u=(0,i.HN)(this.queryKey),h=(0,i.jY)(),p={queryKey:u,pageParam:void 0,meta:this.meta};Object.defineProperty(p,"signal",{enumerable:!0,get:function(){if(h)return s.abortSignalConsumed=!0,h.signal}});var m,f,g={fetchOptions:t,options:this.options,queryKey:u,state:this.state,fetchFn:function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(p)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(n=this.options.behavior)?void 0:n.onFetch)&&(null==(m=this.options.behavior)||m.onFetch(g));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(r=g.fetchOptions)?void 0:r.meta))||this.dispatch({type:"fetch",meta:null==(f=g.fetchOptions)?void 0:f.meta});return this.retryer=new l.eJ({fn:g.fetchFn,abort:null==h||null==(a=h.abort)?void 0:a.bind(h),onSuccess:function(e){s.setData(e),null==s.cache.config.onSuccess||s.cache.config.onSuccess(e,s),0===s.cacheTime&&s.optionalRemove()},onError:function(e){(0,l.wm)(e)&&e.silent||s.dispatch({type:"error",error:e}),(0,l.wm)(e)||(null==s.cache.config.onError||s.cache.config.onError(e,s),(0,o.t)().error(e)),0===s.cacheTime&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),s.j.batch((function(){t.observers.forEach((function(t){t.onQueryUpdate(e)})),t.cache.notify({query:t,type:"queryUpdated",action:e})}))},t.getDefaultState=function(e){var t="function"===typeof e.initialData?e.initialData():e.initialData,n="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r="undefined"!==typeof t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:r?"success":"idle"}},t.reducer=function(e,t){var n,i;switch(t.type){case"failed":return(0,r.A)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,r.A)({},e,{isPaused:!0});case"continue":return(0,r.A)({},e,{isPaused:!1});case"fetch":return(0,r.A)({},e,{fetchFailureCount:0,fetchMeta:null!=(n=t.meta)?n:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,r.A)({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(i=t.dataUpdatedAt)?i:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=t.error;return(0,l.wm)(a)&&a.revert&&this.revertState?(0,r.A)({},this.revertState):(0,r.A)({},e,{error:a,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,r.A)({},e,{isInvalidated:!0});case"setState":return(0,r.A)({},e,t.state);default:return e}},e}(),d=n(6817),u=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.queries=[],n.queriesMap={},n}(0,a.A)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r,a=t.queryKey,s=null!=(r=t.queryHash)?r:(0,i.F$)(a,t),o=this.get(s);return o||(o=new c({cache:this,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a),meta:t.meta}),this.add(o)),o},n.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},n.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter((function(t){return t!==e})),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},n.clear=function(){var e=this;s.j.batch((function(){e.queries.forEach((function(t){e.remove(t)}))}))},n.get=function(e){return this.queriesMap[e]},n.getAll=function(){return this.queries},n.find=function(e,t){var n=(0,i.b_)(e,t)[0];return"undefined"===typeof n.exact&&(n.exact=!0),this.queries.find((function(e){return(0,i.MK)(n,e)}))},n.findAll=function(e,t){var n=(0,i.b_)(e,t)[0];return Object.keys(n).length>0?this.queries.filter((function(e){return(0,i.MK)(n,e)})):this.queries},n.notify=function(e){var t=this;s.j.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){var e=this;s.j.batch((function(){e.queries.forEach((function(e){e.onFocus()}))}))},n.onOnline=function(){var e=this;s.j.batch((function(){e.queries.forEach((function(e){e.onOnline()}))}))},t}(d.Q),h=n(4223),p=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.mutations=[],n.mutationId=0,n}(0,a.A)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r=new h.s({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r},n.add=function(e){this.mutations.push(e),this.notify(e)},n.remove=function(e){this.mutations=this.mutations.filter((function(t){return t!==e})),e.cancel(),this.notify(e)},n.clear=function(){var e=this;s.j.batch((function(){e.mutations.forEach((function(t){e.remove(t)}))}))},n.getAll=function(){return this.mutations},n.find=function(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find((function(t){return(0,i.nJ)(e,t)}))},n.findAll=function(e){return this.mutations.filter((function(t){return(0,i.nJ)(e,t)}))},n.notify=function(e){var t=this;s.j.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var e=this.mutations.filter((function(e){return e.state.isPaused}));return s.j.batch((function(){return e.reduce((function(e,t){return e.then((function(){return t.continue().catch(i.lQ)}))}),Promise.resolve())}))},t}(d.Q),m=n(5643),f=n(4576);function g(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function v(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}var b=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new u,this.mutationCache=e.mutationCache||new p,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=m.m.subscribe((function(){m.m.isFocused()&&f.t.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())})),this.unsubscribeOnline=f.t.subscribe((function(){m.m.isFocused()&&f.t.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())}))},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var n=(0,i.b_)(e,t)[0];return n.fetching=!0,this.queryCache.findAll(n).length},t.isMutating=function(e){return this.mutationCache.findAll((0,r.A)({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map((function(e){return[e.queryKey,e.state.data]}))},t.setQueryData=function(e,t,n){var r=(0,i.vh)(e),a=this.defaultQueryOptions(r);return this.queryCache.build(this,a).setData(t,n)},t.setQueriesData=function(e,t,n){var r=this;return s.j.batch((function(){return r.getQueryCache().findAll(e).map((function(e){var i=e.queryKey;return[i,r.setQueryData(i,t,n)]}))}))},t.getQueryState=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state},t.removeQueries=function(e,t){var n=(0,i.b_)(e,t)[0],r=this.queryCache;s.j.batch((function(){r.findAll(n).forEach((function(e){r.remove(e)}))}))},t.resetQueries=function(e,t,n){var a=this,o=(0,i.b_)(e,t,n),l=o[0],c=o[1],d=this.queryCache,u=(0,r.A)({},l,{active:!0});return s.j.batch((function(){return d.findAll(l).forEach((function(e){e.reset()})),a.refetchQueries(u,c)}))},t.cancelQueries=function(e,t,n){var r=this,a=(0,i.b_)(e,t,n),o=a[0],l=a[1],c=void 0===l?{}:l;"undefined"===typeof c.revert&&(c.revert=!0);var d=s.j.batch((function(){return r.queryCache.findAll(o).map((function(e){return e.cancel(c)}))}));return Promise.all(d).then(i.lQ).catch(i.lQ)},t.invalidateQueries=function(e,t,n){var a,o,l,c=this,d=(0,i.b_)(e,t,n),u=d[0],h=d[1],p=(0,r.A)({},u,{active:null==(a=null!=(o=u.refetchActive)?o:u.active)||a,inactive:null!=(l=u.refetchInactive)&&l});return s.j.batch((function(){return c.queryCache.findAll(u).forEach((function(e){e.invalidate()})),c.refetchQueries(p,h)}))},t.refetchQueries=function(e,t,n){var a=this,o=(0,i.b_)(e,t,n),l=o[0],c=o[1],d=s.j.batch((function(){return a.queryCache.findAll(l).map((function(e){return e.fetch(void 0,(0,r.A)({},c,{meta:{refetchPage:null==l?void 0:l.refetchPage}}))}))})),u=Promise.all(d).then(i.lQ);return(null==c?void 0:c.throwOnError)||(u=u.catch(i.lQ)),u},t.fetchQuery=function(e,t,n){var r=(0,i.vh)(e,t,n),a=this.defaultQueryOptions(r);"undefined"===typeof a.retry&&(a.retry=!1);var s=this.queryCache.build(this,a);return s.isStaleByTime(a.staleTime)?s.fetch(a):Promise.resolve(s.state.data)},t.prefetchQuery=function(e,t,n){return this.fetchQuery(e,t,n).then(i.lQ).catch(i.lQ)},t.fetchInfiniteQuery=function(e,t,n){var r=(0,i.vh)(e,t,n);return r.behavior={onFetch:function(e){e.fetchFn=function(){var t,n,r,a,s,o,c,d=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,u=null==(r=e.fetchOptions)||null==(a=r.meta)?void 0:a.fetchMore,h=null==u?void 0:u.pageParam,p="forward"===(null==u?void 0:u.direction),m="backward"===(null==u?void 0:u.direction),f=(null==(s=e.state.data)?void 0:s.pages)||[],b=(null==(o=e.state.data)?void 0:o.pageParams)||[],y=(0,i.jY)(),x=null==y?void 0:y.signal,w=b,_=!1,k=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},j=function(e,t,n,r){return w=r?[t].concat(w):[].concat(w,[t]),r?[n].concat(e):[].concat(e,[n])},N=function(t,n,r,i){if(_)return Promise.reject("Cancelled");if("undefined"===typeof r&&!n&&t.length)return Promise.resolve(t);var a={queryKey:e.queryKey,signal:x,pageParam:r,meta:e.meta},s=k(a),o=Promise.resolve(s).then((function(e){return j(t,r,e,i)}));return(0,l.dd)(s)&&(o.cancel=s.cancel),o};if(f.length)if(p){var S="undefined"!==typeof h,E=S?h:g(e.options,f);c=N(f,S,E)}else if(m){var C="undefined"!==typeof h,A=C?h:v(e.options,f);c=N(f,C,A,!0)}else!function(){w=[];var t="undefined"===typeof e.options.getNextPageParam,n=!d||!f[0]||d(f[0],0,f);c=n?N([],t,b[0]):Promise.resolve(j([],b[0],f[0]));for(var r=function(n){c=c.then((function(r){if(!d||!f[n]||d(f[n],n,f)){var i=t?b[n]:g(e.options,r);return N(r,t,i)}return Promise.resolve(j(r,b[n],f[n]))}))},i=1;i<f.length;i++)r(i)}();else c=N([]);var T=c.then((function(e){return{pages:e,pageParams:w}}));return T.cancel=function(){_=!0,null==y||y.abort(),(0,l.dd)(c)&&c.cancel()},T}}},this.fetchQuery(r)},t.prefetchInfiniteQuery=function(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(i.lQ).catch(i.lQ)},t.cancelMutations=function(){var e=this,t=s.j.batch((function(){return e.mutationCache.getAll().map((function(e){return e.cancel()}))}));return Promise.all(t).then(i.lQ).catch(i.lQ)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var n=this.queryDefaults.find((function(t){return(0,i.Od)(e)===(0,i.Od)(t.queryKey)}));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find((function(t){return(0,i.Cp)(e,t.queryKey)})))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var n=this.mutationDefaults.find((function(t){return(0,i.Od)(e)===(0,i.Od)(t.mutationKey)}));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find((function(t){return(0,i.Cp)(e,t.mutationKey)})))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=(0,r.A)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=(0,i.F$)(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,r.A)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}()},1465:(e,t,n)=>{var r=n(220)(n(4759),"Map");e.exports=r},1515:e=>{e.exports=function(){return[]}},1581:(e,t,n)=>{var r=n(4635),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(l){}var i=s.call(e);return r&&(t?e[o]=n:delete e[o]),i}},1641:(e,t,n)=>{var r=n(8183),i=n(5639),a=n(2479),s=a&&a.isTypedArray,o=s?i(s):r;e.exports=o},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<i&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,x(e),!f)if(null!==r(c))f=!0,M(_);else{var t=r(d);null!==t&&D(w,t.startTime-e)}}function _(e,n){f=!1,g&&(g=!1,b(S),S=-1),m=!0;var a=p;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&D(w,u.startTime-n),l=!1}return l}finally{h=null,p=a,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,j=!1,N=null,S=-1,E=5,C=-1;function A(){return!(t.unstable_now()-C<E)}function T(){if(null!==N){var e=t.unstable_now();C=e;var n=!0;try{n=N(!0,e)}finally{n?k():(j=!1,N=null)}}else j=!1}if("function"===typeof y)k=function(){y(T)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,P=O.port2;O.port1.onmessage=T,k=function(){P.postMessage(null)}}else k=function(){v(T,0)};function M(e){N=e,j||(j=!0,k())}function D(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,M(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(g?(b(S),S=-1):g=!0,D(w,a-s))):(e.sortIndex=o,n(c,e),f||m||(f=!0,M(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},1787:(e,t,n)=>{var r=n(3616),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1920:(e,t,n)=>{"use strict";n.d(t,{QueryClient:()=>r.QueryClient,QueryClientProvider:()=>i.QueryClientProvider,useMutation:()=>i.useMutation,useQuery:()=>i.useQuery,useQueryClient:()=>i.useQueryClient});var r=n(6146);n.o(r,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return r.QueryClientProvider}}),n.o(r,"useMutation")&&n.d(t,{useMutation:function(){return r.useMutation}}),n.o(r,"useQuery")&&n.d(t,{useQuery:function(){return r.useQuery}}),n.o(r,"useQueryClient")&&n.d(t,{useQueryClient:function(){return r.useQueryClient}});var i=n(2999)},2022:(e,t,n)=>{var r=n(4635),i=n(1581),a=n(5336),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):a(e)}},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,f(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!j.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+C(l,0):a,w(s)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+C(o=e[c],c);l+=A(o,t,i,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=A(o=o.value,t,i,d=a+C(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},M={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!j.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},2127:()=>{},2130:(e,t,n)=>{var r=n(5535),i=n(9757),a=n(1416),s=n(6195),o=n(5531),l=n(2279),c=n(6794),d=n(1641),u="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,g,v){var b=l(e),y=l(t),x=b?h:o(e),w=y?h:o(t),_=(x=x==u?p:x)==p,k=(w=w==u?p:w)==p,j=x==w;if(j&&c(e)){if(!c(t))return!1;b=!0,_=!1}if(j&&!_)return v||(v=new r),b||d(e)?i(e,t,n,f,g,v):a(e,t,x,n,f,g,v);if(!(1&n)){var N=_&&m.call(e,"__wrapped__"),S=k&&m.call(t,"__wrapped__");if(N||S){var E=N?e.value():e,C=S?t.value():t;return v||(v=new r),g(E,C,n,f,v)}}return!!j&&(v||(v=new r),s(e,t,n,f,g,v))}},2138:e=>{e.exports=function(e){return this.__data__.has(e)}},2161:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},2202:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===e&&(e={});var n={},c=Boolean(e.type&&o[e.type]);for(var d in e){var u=e[d];if((0,r.isCustomAttribute)(d))n[d]=u;else{var h=d.toLowerCase(),p=l(h);if(p){var m=(0,r.getPropertyInfo)(p);switch(a.includes(p)&&s.includes(t)&&!c&&(p=l("default"+h)),n[p]=u,m&&m.type){case r.BOOLEAN:n[p]=!0;break;case r.OVERLOADED_BOOLEAN:""===u&&(n[p]=!0)}}else i.PRESERVE_CUSTOM_ATTRIBUTES&&(n[d]=u)}}return(0,i.setStyleProp)(e.style,n),n};var r=n(2944),i=n(4160),a=["checked","value"],s=["input","select","textarea"],o={reset:!0,submit:!0};function l(e){return r.possibleStandardNames[e]}},2274:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2279:e=>{var t=Array.isArray;e.exports=t},2427:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var a=n(5119),s=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),w(this,e)},e}();t.Node=s;var o=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return r(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(s);t.DataNode=o;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Text,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(o);t.Text=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Comment,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(o);t.Comment=c;var d=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t,r.type=a.ElementType.Directive,r}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(o);t.ProcessingInstruction=d;var u=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return r(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(s);t.NodeWithChildren=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.CDATA,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(u);t.CDATA=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Root,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(u);t.Document=p;var m=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i="script"===t?a.ElementType.Script:"style"===t?a.ElementType.Style:a.ElementType.Tag);var s=e.call(this,r)||this;return s.name=t,s.attribs=n,s.type=i,s}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(u);function f(e){return(0,a.isTag)(e)}function g(e){return e.type===a.ElementType.CDATA}function v(e){return e.type===a.ElementType.Text}function b(e){return e.type===a.ElementType.Comment}function y(e){return e.type===a.ElementType.Directive}function x(e){return e.type===a.ElementType.Root}function w(e,t){var n;if(void 0===t&&(t=!1),v(e))n=new l(e.data);else if(b(e))n=new c(e.data);else if(f(e)){var r=t?_(e.children):[],a=new m(e.name,i({},e.attribs),r);r.forEach((function(e){return e.parent=a})),null!=e.namespace&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=i({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=i({},e["x-attribsPrefix"])),n=a}else if(g(e)){r=t?_(e.children):[];var s=new h(r);r.forEach((function(e){return e.parent=s})),n=s}else if(x(e)){r=t?_(e.children):[];var o=new p(r);r.forEach((function(e){return e.parent=o})),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else{if(!y(e))throw new Error("Not implemented yet: ".concat(e.type));var u=new d(e.name,e.data);null!=e["x-name"]&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function _(e){for(var t=e.map((function(e){return w(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=m,t.isTag=f,t.isCDATA=g,t.isText=v,t.isComment=b,t.isDirective=y,t.isDocument=x,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=w},2434:(e,t,n)=>{var r=n(220)(n(4759),"DataView");e.exports=r},2479:(e,t,n)=>{e=n.nmd(e);var r=n(6658),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i&&r.process,o=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=o},2621:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},2654:(e,t,n)=>{"use strict";var r=n(9950),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},2791:(e,t,n)=>{var r=n(5661),i=n(1465),a=n(4467);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(e,t),this.size=n.size,this}},2944:(e,t,n)=>{"use strict";function r(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}const i={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((e=>{i[e]=new r(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((e=>{let[t,n]=e;i[t]=new r(t,1,!1,n,null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((e=>{i[e]=new r(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((e=>{i[e]=new r(e,2,!1,e,null,!1,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((e=>{i[e]=new r(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((e=>{i[e]=new r(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((e=>{i[e]=new r(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((e=>{i[e]=new r(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((e=>{i[e]=new r(e,5,!1,e.toLowerCase(),null,!1,!1)}));const a=/[\-\:]([a-z])/g,s=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((e=>{const t=e.replace(a,s);i[t]=new r(t,1,!1,e,null,!1,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((e=>{const t=e.replace(a,s);i[t]=new r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((e=>{const t=e.replace(a,s);i[t]=new r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((e=>{i[e]=new r(e,1,!1,e.toLowerCase(),null,!1,!1)}));i.xlinkHref=new r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((e=>{i[e]=new r(e,1,!1,e.toLowerCase(),null,!0,!0)}));const{CAMELCASE:o,SAME:l,possibleStandardNames:c}=n(6621),d=RegExp.prototype.test.bind(new RegExp("^(data|aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$")),u=Object.keys(c).reduce(((e,t)=>{const n=c[t];return n===l?e[t]=t:n===o?e[t.toLowerCase()]=t:e[t]=n,e}),{});t.BOOLEAN=3,t.BOOLEANISH_STRING=2,t.NUMERIC=5,t.OVERLOADED_BOOLEAN=4,t.POSITIVE_NUMERIC=6,t.RESERVED=0,t.STRING=1,t.getPropertyInfo=function(e){return i.hasOwnProperty(e)?i[e]:null},t.isCustomAttribute=d,t.possibleStandardNames=u},2999:(e,t,n)=>{"use strict";n.d(t,{QueryClientProvider:()=>h,useMutation:()=>x,useQuery:()=>O,useQueryClient:()=>u});var r=n(854),i=n(7119).unstable_batchedUpdates;r.j.setBatchNotifyFunction(i);var a=n(5592),s=console;(0,a.B)(s);var o=n(9950),l=o.createContext(void 0),c=o.createContext(!1);function d(e){return e&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=l),window.ReactQueryClientContext):l}var u=function(){var e=o.useContext(d(o.useContext(c)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},h=function(e){var t=e.client,n=e.contextSharing,r=void 0!==n&&n,i=e.children;o.useEffect((function(){return t.mount(),function(){t.unmount()}}),[t]);var a=d(r);return o.createElement(c.Provider,{value:r},o.createElement(a.Provider,{value:t},i))},p=n(8168),m=n(6339),f=n(5540),g=n(4223),v=n(6817),b=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}(0,f.A)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,p.A)({},this.options,{variables:"undefined"!==typeof e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:(0,g.$)(),t=(0,p.A)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},n.notify=function(e){var t=this;r.j.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(v.Q);function y(e,t,n){return"function"===typeof t?t.apply(void 0,n):"boolean"===typeof t?t:!!e}function x(e,t,n){var i=o.useRef(!1),a=o.useState(0)[1],s=(0,m.GR)(e,t,n),l=u(),c=o.useRef();c.current?c.current.setOptions(s):c.current=new b(l,s);var d=c.current.getCurrentResult();o.useEffect((function(){i.current=!0;var e=c.current.subscribe(r.j.batchCalls((function(){i.current&&a((function(e){return e+1}))})));return function(){i.current=!1,e()}}),[]);var h=o.useCallback((function(e,t){c.current.mutate(e,t).catch(m.lQ)}),[]);if(d.error&&y(void 0,c.current.options.useErrorBoundary,[d.error]))throw d.error;return(0,p.A)({},d,{mutate:h,mutateAsync:d.mutate})}var w=n(5643),_=n(7639),k=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.options=n,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(n),r}(0,f.A)(t,e);var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),j(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return N(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return N(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(e,t){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var i=this.hasListeners();i&&S(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),!i||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var a=this.computeRefetchInterval();!i||this.currentQuery===r&&this.options.enabled===n.enabled&&a===this.currentRefetchInterval||this.updateRefetchInterval(a)},n.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,t);return this.createResult(n,t)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(e,t){var n=this,r={},i=function(e){n.trackedProps.includes(e)||n.trackedProps.push(e)};return Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:function(){return i(t),e[t]}})})),(t.useErrorBoundary||t.suspense)&&i("error"),r},n.getNextResult=function(e){var t=this;return new Promise((function(n,r){var i=t.subscribe((function(t){t.isFetching||(i(),t.isError&&(null==e?void 0:e.throwOnError)?r(t.error):n(t))}))}))},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(e){return this.fetch((0,p.A)({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},n.fetchOptimistic=function(e){var t=this,n=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.fetch().then((function(){return t.createResult(r,n)}))},n.fetch=function(e){var t=this;return this.executeFetch(e).then((function(){return t.updateResult(),t.currentResult}))},n.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(m.lQ)),t},n.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!m.S$&&!this.currentResult.isStale&&(0,m.gn)(this.options.staleTime)){var t=(0,m.j3)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),t)}},n.computeRefetchInterval=function(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},n.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!m.S$&&!1!==this.options.enabled&&(0,m.gn)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(t.options.refetchIntervalInBackground||w.m.isFocused())&&t.executeFetch()}),this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(e,t){var n,r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,l=this.currentResultOptions,c=e!==r,d=c?e.state:this.currentQueryInitialState,u=c?this.currentResult:this.previousQueryResult,h=e.state,p=h.dataUpdatedAt,f=h.error,g=h.errorUpdatedAt,v=h.isFetching,b=h.status,y=!1,x=!1;if(t.optimisticResults){var w=this.hasListeners(),_=!w&&j(e,t),k=w&&S(e,r,t,i);(_||k)&&(v=!0,p||(b="loading"))}if(t.keepPreviousData&&!h.dataUpdateCount&&(null==u?void 0:u.isSuccess)&&"error"!==b)n=u.data,p=u.dataUpdatedAt,b=u.status,y=!0;else if(t.select&&"undefined"!==typeof h.data)if(s&&h.data===(null==o?void 0:o.data)&&t.select===this.selectFn)n=this.selectResult;else try{this.selectFn=t.select,n=t.select(h.data),!1!==t.structuralSharing&&(n=(0,m.BH)(null==s?void 0:s.data,n)),this.selectResult=n,this.selectError=null}catch(C){(0,a.t)().error(C),this.selectError=C}else n=h.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof n&&("loading"===b||"idle"===b)){var N;if((null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==l?void 0:l.placeholderData))N=s.data;else if(N="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof N)try{N=t.select(N),!1!==t.structuralSharing&&(N=(0,m.BH)(null==s?void 0:s.data,N)),this.selectError=null}catch(C){(0,a.t)().error(C),this.selectError=C}"undefined"!==typeof N&&(b="success",n=N,x=!0)}return this.selectError&&(f=this.selectError,n=this.selectResult,g=Date.now(),b="error"),{status:b,isLoading:"loading"===b,isSuccess:"success"===b,isError:"error"===b,isIdle:"idle"===b,data:n,dataUpdatedAt:p,error:f,errorUpdatedAt:g,failureCount:h.fetchFailureCount,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&"loading"!==b,isLoadingError:"error"===b&&0===h.dataUpdatedAt,isPlaceholderData:x,isPreviousData:y,isRefetchError:"error"===b&&0!==h.dataUpdatedAt,isStale:E(e,t),refetch:this.refetch,remove:this.remove}},n.shouldNotifyListeners=function(e,t){if(!t)return!0;var n=this.options,r=n.notifyOnChangeProps,i=n.notifyOnChangePropsExclusions;if(!r&&!i)return!0;if("tracked"===r&&!this.trackedProps.length)return!0;var a="tracked"===r?this.trackedProps:r;return Object.keys(e).some((function(n){var r=n,s=e[r]!==t[r],o=null==a?void 0:a.some((function(e){return e===n})),l=null==i?void 0:i.some((function(e){return e===n}));return s&&!l&&(!a||o)}))},n.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,m.f8)(this.currentResult,t)){var n={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(n.listeners=!0),this.notify((0,p.A)({},n,e))}},n.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},n.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||(0,_.wm)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},n.notify=function(e){var t=this;r.j.batch((function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)})),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})}))},t}(v.Q);function j(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&N(e,t,t.refetchOnMount)}function N(e,t,n){if(!1!==t.enabled){var r="function"===typeof n?n(e):n;return"always"===r||!1!==r&&E(e,t)}return!1}function S(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&E(e,n)}function E(e,t){return e.isStaleByTime(t.staleTime)}function C(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var A=o.createContext(C()),T=function(){return o.useContext(A)};function O(e,t,n){return function(e,t){var n=o.useRef(!1),i=o.useState(0)[1],a=u(),s=T(),l=a.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=r.j.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=r.j.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=r.j.batchCalls(l.onSettled)),l.suspense&&("number"!==typeof l.staleTime&&(l.staleTime=1e3),0===l.cacheTime&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(s.isReset()||(l.retryOnMount=!1));var c=o.useState((function(){return new t(a,l)}))[0],d=c.getOptimisticResult(l);if(o.useEffect((function(){n.current=!0,s.clearReset();var e=c.subscribe(r.j.batchCalls((function(){n.current&&i((function(e){return e+1}))})));return c.updateResult(),function(){n.current=!1,e()}}),[s,c]),o.useEffect((function(){c.setOptions(l,{listeners:!1})}),[l,c]),l.suspense&&d.isLoading)throw c.fetchOptimistic(l).then((function(e){var t=e.data;null==l.onSuccess||l.onSuccess(t),null==l.onSettled||l.onSettled(t,null)})).catch((function(e){s.clearReset(),null==l.onError||l.onError(e),null==l.onSettled||l.onSettled(void 0,e)}));if(d.isError&&!s.isReset()&&!d.isFetching&&y(l.suspense,l.useErrorBoundary,[d.error,c.getCurrentQuery()]))throw d.error;return"tracked"===l.notifyOnChangeProps&&(d=c.trackResult(d,l)),d}((0,m.vh)(e,t,n),k)}},3008:(e,t,n)=>{var r=n(2022),i=n(4567);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},3012:(e,t,n)=>{var r=n(2022),i=n(9248);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},3077:(e,t,n)=>{var r=n(5099);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},3306:(e,t,n)=>{var r=n(4123),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},3340:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToDOM=t.domToReact=t.attributesToProps=t.Text=t.ProcessingInstruction=t.Element=t.Comment=void 0,t.default=function(e,t){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];return(0,s.default)((0,i.default)(e,(null===t||void 0===t?void 0:t.htmlparser2)||l),t)};var i=r(n(4121));t.htmlToDOM=i.default;var a=r(n(2202));t.attributesToProps=a.default;var s=r(n(182));t.domToReact=s.default;var o=n(9611);Object.defineProperty(t,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(t,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(t,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return o.Text}});var l={lowerCaseAttributeNames:!1}},3445:e=>{e.exports=function(e,t){return e.has(t)}},3616:(e,t,n)=>{var r=n(220)(Object,"create");e.exports=r},3660:(e,t,n)=>{var r=n(4761),i=n(8194),a=n(5724);e.exports=function(e){return r(e,a,i)}},3721:e=>{e.exports=function(){return!1}},3995:function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(9531)),i=n(9819);function a(e,t){var n={};return e&&"string"===typeof e?((0,r.default)(e,(function(e,r){e&&r&&(n[(0,i.camelCase)(e,t)]=r)})),n):n}a.default=a,e.exports=a},4102:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},4121:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(s),n=t?t[1]:void 0;return(0,a.formatDOM)((0,i.default)(e),null,n)};var i=r(n(7810)),a=n(5377),s=/<(![a-zA-Z\s]+)>/},4123:(e,t,n)=>{var r=n(4759)["__core-js_shared__"];e.exports=r},4160:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.returnFirstArg=t.canTextBeChildOfNode=t.ELEMENTS_WITH_NO_TEXT_CHILDREN=t.PRESERVE_CUSTOM_ATTRIBUTES=void 0,t.isCustomComponent=function(e,t){if(!e.includes("-"))return Boolean(t&&"string"===typeof t.is);if(s.has(e))return!1;return!0},t.setStyleProp=function(e,t){if("string"!==typeof e)return;if(!e.trim())return void(t.style={});try{t.style=(0,a.default)(e,o)}catch(n){t.style={}}};var i=n(8554),a=r(n(3995)),s=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var o={reactCompat:!0};t.PRESERVE_CUSTOM_ATTRIBUTES=Number(i.version.split(".")[0])>=16,t.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);t.canTextBeChildOfNode=function(e){return!t.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(e.name)};t.returnFirstArg=function(e){return e}},4206:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},4223:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,s:()=>l});var r=n(8168),i=n(5592),a=n(854),s=n(7639),o=n(6339),l=function(){function e(e){this.options=(0,r.A)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||c(),this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter((function(t){return t!==e}))},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(o.lQ).catch(o.lQ)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,n="loading"===this.state.status,r=Promise.resolve();return n||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then((function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)})).then((function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)})).then((function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})}))),r.then((function(){return t.executeMutation()})).then((function(n){e=n,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)})).then((function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)})).then((function(){return t.dispatch({type:"success",data:e}),e})).catch((function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),(0,i.t)().error(e),Promise.resolve().then((function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)})).then((function(){throw t.dispatch({type:"error",error:e}),e}))}))},t.executeMutation=function(){var e,t=this;return this.retryer=new s.eJ({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return(0,r.A)({},e,{failureCount:e.failureCount+1});case"pause":return(0,r.A)({},e,{isPaused:!0});case"continue":return(0,r.A)({},e,{isPaused:!1});case"loading":return(0,r.A)({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return(0,r.A)({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return(0,r.A)({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,r.A)({},e,t.state);default:return e}}(this.state,e),a.j.batch((function(){t.observers.forEach((function(t){t.onMutationUpdate(e)})),t.mutationCache.notify(t)}))},e}();function c(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}},4349:(e,t,n)=>{var r=n(5099);e.exports=function(e){return r(this.__data__,e)>-1}},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4467:(e,t,n)=>{var r=n(738),i=n(708),a=n(6823),s=n(475),o=n(7859);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},4567:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},4570:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function d(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var u=1,h=1;function p(e){var t=e.match(n);t&&(u+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function m(){var e={line:u,column:h};return function(t){return t.position=new f(e),y(),t}}function f(e){this.start=e,this.end={line:u,column:h},this.source=l.source}f.prototype.content=e;var g=[];function v(t){var n=new Error(l.source+":"+u+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=u,n.column=h,n.source=e,!l.silent)throw n;g.push(n)}function b(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function y(){b(r)}function x(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var t=m();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return v("End of comment missing");var r=e.slice(2,n-2);return h+=2,p(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function _(){var e=m(),n=b(i);if(n){if(w(),!b(a))return v("property missing ':'");var r=b(s),l=e({type:"declaration",property:d(n[0].replace(t,c)),value:r?d(r[0].replace(t,c)):c});return b(o),l}}return y(),function(){var e,t=[];for(x(t);e=_();)!1!==e&&(t.push(e),x(t));return t}()}},4576:(e,t,n)=>{"use strict";n.d(t,{t:()=>s});var r=n(5540),i=n(6817),a=n(6339),s=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!a.S$&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},t}(0,r.A)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"===typeof e?n.setOnline(e):n.onOnline()}))},n.setOnline=function(e){this.online=e,e&&this.onOnline()},n.onOnline=function(){this.listeners.forEach((function(e){e()}))},n.isOnline=function(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine},t}(i.Q))},4578:(e,t,n)=>{var r=n(3012),i=n(9248),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},4635:(e,t,n)=>{var r=n(4759).Symbol;e.exports=r},4672:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4710:(e,t,n)=>{var r=n(5661);e.exports=function(){this.__data__=new r,this.size=0}},4759:(e,t,n)=>{var r=n(6658),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},4761:(e,t,n)=>{var r=n(7518),i=n(2279);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},4801:(e,t,n)=>{var r=n(220)(n(4759),"WeakMap");e.exports=r},5088:e=>{e.exports=function(){this.__data__=[],this.size=0}},5099:(e,t,n)=>{var r=n(4206);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},5112:(e,t,n)=>{var r=n(2621)(Object.keys,Object);e.exports=r},5119:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},5254:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=s(n(9950)),l=s(n(7119)),c=s(n(9418)),d=s(n(160)),u=function(e){function t(t){var n=e.call(this,t)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(e,t,r,i){var a,s,o,l;"text-change"===e?null===(s=(a=n).onEditorChangeText)||void 0===s||s.call(a,n.editor.root.innerHTML,t,i,n.unprivilegedEditor):"selection-change"===e&&(null===(l=(o=n).onEditorChangeSelection)||void 0===l||l.call(o,t,i,n.unprivilegedEditor))};var r=n.isControlled()?t.value:t.defaultValue;return n.value=null!==r&&void 0!==r?r:"",n}return r(t,e),t.prototype.validateProps=function(e){var t;if(o.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(o.default.Children.count(e.children)&&"textarea"===(null===(t=o.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var n,r=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var i=this.getEditorContents(),s=null!==(n=e.value)&&void 0!==n?n:"";this.isEqualValue(s,i)||this.setEditorContents(this.editor,s)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),a(this.cleanProps,this.dirtyProps).some((function(t){return!c.default(e[t],r.props[t])}))},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some((function(n){return!c.default(e[n],t.props[n])}))},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.editor&&this.shouldComponentRegenerate(e)){var r=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var a=this.regenerationSnapshot,s=(r=a.delta,a.selection);delete this.regenerationSnapshot,this.instantiateEditor();var o=this.editor;o.setContents(r),h((function(){return n.setEditorSelection(o,s)}))}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var n=new d.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?c.default(e.ops,t.ops):c.default(e,t)},t.prototype.setEditorContents=function(e,t){var n=this;this.value=t;var r=this.getEditorSelection();"string"===typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),h((function(){return n.setEditorSelection(e,r)}))},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var n=e.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var n,r;(null===(r=null===(n=e)||void 0===n?void 0:n.scroll)||void 0===r?void 0:r.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=l.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,n=t.children,r=t.preserveWhitespace,a={key:this.state.generation,ref:function(t){e.editingArea=t}};return o.default.Children.count(n)?o.default.cloneElement(o.default.Children.only(n),a):r?o.default.createElement("pre",i({},a)):o.default.createElement("div",i({},a))},t.prototype.render=function(){var e;return o.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!==e&&void 0!==e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,n,r){var i,a;if(this.editor){var s=this.isDelta(this.value)?r.getContents():r.getHTML();s!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=s,null===(a=(i=this.props).onChange)||void 0===a||a.call(i,e,t,n,r))}},t.prototype.onEditorChangeSelection=function(e,t,n){var r,i,a,s,o,l;if(this.editor){var d=this.getEditorSelection(),u=!d&&e,h=d&&!e;c.default(e,d)||(this.selection=e,null===(i=(r=this.props).onChangeSelection)||void 0===i||i.call(r,e,t,n),u?null===(s=(a=this.props).onFocus)||void 0===s||s.call(a,e,t,n):h&&(null===(l=(o=this.props).onBlur)||void 0===l||l.call(o,d,t,n)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=d.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(o.default.Component);function h(e){Promise.resolve().then(e)}e.exports=u},5336:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5355:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var s=a[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},5377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatAttributes=a,t.escapeSpecialCharacters=function(e){return e.replace(i.CARRIAGE_RETURN_REGEX,i.CARRIAGE_RETURN_PLACEHOLDER)},t.revertEscapedCharacters=o,t.formatDOM=function e(t,n,i){void 0===n&&(n=null);for(var l,c=[],d=0,u=t.length;d<u;d++){var h=t[d];switch(h.nodeType){case 1:var p=s(h.nodeName);(l=new r.Element(p,a(h.attributes))).children=e("template"===p?h.content.childNodes:h.childNodes,l);break;case 3:l=new r.Text(o(h.nodeValue));break;case 8:l=new r.Comment(h.nodeValue);break;default:continue}var m=c[d-1]||null;m&&(m.next=l),l.parent=n,l.prev=m,l.next=null,c.push(l)}i&&((l=new r.ProcessingInstruction(i.substring(0,i.indexOf(" ")).toLowerCase(),i)).next=c[0]||null,l.parent=n,c.unshift(l),c[1]&&(c[1].prev=c[0]));return c};var r=n(9611),i=n(8128);function a(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function s(e){var t=function(e){return i.CASE_SENSITIVE_TAG_NAMES_MAP[e]}(e=e.toLowerCase());return t||e}function o(e){return e.replace(i.CARRIAGE_RETURN_PLACEHOLDER_REGEX,i.CARRIAGE_RETURN)}},5531:(e,t,n)=>{var r=n(2434),i=n(1465),a=n(202),s=n(7887),o=n(4801),l=n(2022),c=n(9131),d="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",f=c(r),g=c(i),v=c(a),b=c(s),y=c(o),x=l;(r&&x(new r(new ArrayBuffer(1)))!=m||i&&x(new i)!=d||a&&x(a.resolve())!=u||s&&x(new s)!=h||o&&x(new o)!=p)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return m;case g:return d;case v:return u;case b:return h;case y:return p}return t}),e.exports=x},5535:(e,t,n)=>{var r=n(5661),i=n(4710),a=n(8384),s=n(7379),o=n(799),l=n(2791);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=o,c.prototype.set=l,e.exports=c},5540:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{A:()=>i})},5592:(e,t,n)=>{"use strict";n.d(t,{B:()=>a,t:()=>i});var r=console;function i(){return r}function a(e){r=e}},5639:e=>{e.exports=function(e){return function(t){return e(t)}}},5643:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var r=n(5540),i=n(6817),a=n(6339),s=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!a.S$&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},t}(0,r.A)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"===typeof e?n.setFocused(e):n.onFocus()}))},n.setFocused=function(e){this.focused=e,e&&this.onFocus()},n.onFocus=function(){this.listeners.forEach((function(e){e()}))},n.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(i.Q))},5661:(e,t,n)=>{var r=n(5088),i=n(150),a=n(7889),s=n(4349),o=n(3077);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},5724:(e,t,n)=>{var r=n(7405),i=n(7462),a=n(7840);e.exports=function(e){return a(e)?r(e):i(e)}},5776:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6010:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},6146:(e,t,n)=>{"use strict";n.d(t,{QueryClient:()=>r.E});var r=n(1438),i=n(2127);n.o(i,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return i.QueryClientProvider}}),n.o(i,"useMutation")&&n.d(t,{useMutation:function(){return i.useMutation}}),n.o(i,"useQuery")&&n.d(t,{useQuery:function(){return i.useQuery}}),n.o(i,"useQueryClient")&&n.d(t,{useQueryClient:function(){return i.useQueryClient}})},6195:(e,t,n)=>{var r=n(3660),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,o){var l=1&n,c=r(e),d=c.length;if(d!=r(t).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in t:i.call(t,h)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var f=!0;o.set(e,t),o.set(t,e);for(var g=l;++u<d;){var v=e[h=c[u]],b=t[h];if(a)var y=l?a(b,v,h,t,e,o):a(v,b,h,e,t,o);if(!(void 0===y?v===b||s(v,b,n,a,o):y)){f=!1;break}g||(g="constructor"==h)}if(f&&!g){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(e),o.delete(t),f}},6339:(e,t,n)=>{"use strict";n.d(t,{BH:()=>y,Cp:()=>v,F$:()=>f,G6:()=>N,GR:()=>u,HN:()=>l,MK:()=>p,Od:()=>g,S$:()=>i,Zw:()=>s,b_:()=>h,f8:()=>x,gn:()=>o,j3:()=>c,jY:()=>S,lQ:()=>a,nJ:()=>m,vh:()=>d,yy:()=>j});var r=n(8168),i="undefined"===typeof window;function a(){}function s(e,t){return"function"===typeof e?e(t):e}function o(e){return"number"===typeof e&&e>=0&&e!==1/0}function l(e){return Array.isArray(e)?e:[e]}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function d(e,t,n){return k(e)?"function"===typeof t?(0,r.A)({},n,{queryKey:e,queryFn:t}):(0,r.A)({},t,{queryKey:e}):e}function u(e,t,n){return k(e)?"function"===typeof t?(0,r.A)({},n,{mutationKey:e,mutationFn:t}):(0,r.A)({},t,{mutationKey:e}):"function"===typeof e?(0,r.A)({},t,{mutationFn:e}):(0,r.A)({},e)}function h(e,t,n){return k(e)?[(0,r.A)({},t,{queryKey:e}),n]:[e||{},t]}function p(e,t){var n=e.active,r=e.exact,i=e.fetching,a=e.inactive,s=e.predicate,o=e.queryKey,l=e.stale;if(k(o))if(r){if(t.queryHash!==f(o,t.options))return!1}else if(!v(t.queryKey,o))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(n,a);if("none"===c)return!1;if("all"!==c){var d=t.isActive();if("active"===c&&!d)return!1;if("inactive"===c&&d)return!1}return("boolean"!==typeof l||t.isStale()===l)&&(("boolean"!==typeof i||t.isFetching()===i)&&!(s&&!s(t)))}function m(e,t){var n=e.exact,r=e.fetching,i=e.predicate,a=e.mutationKey;if(k(a)){if(!t.options.mutationKey)return!1;if(n){if(g(t.options.mutationKey)!==g(a))return!1}else if(!v(t.options.mutationKey,a))return!1}return("boolean"!==typeof r||"loading"===t.state.status===r)&&!(i&&!i(t))}function f(e,t){return((null==t?void 0:t.queryKeyHashFn)||g)(e)}function g(e){var t,n=l(e);return t=n,JSON.stringify(t,(function(e,t){return w(t)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}))}function v(e,t){return b(l(e),l(t))}function b(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some((function(n){return!b(e[n],t[n])})))}function y(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||w(e)&&w(t)){for(var r=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),a=i.length,s=n?[]:{},o=0,l=0;l<a;l++){var c=n?l:i[l];s[c]=y(e[c],t[c]),s[c]===e[c]&&o++}return r===a&&o===r?e:s}return t}function x(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function w(e){if(!_(e))return!1;var t=e.constructor;if("undefined"===typeof t)return!0;var n=t.prototype;return!!_(n)&&!!n.hasOwnProperty("isPrototypeOf")}function _(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e){return"string"===typeof e||Array.isArray(e)}function j(e){return new Promise((function(t){setTimeout(t,e)}))}function N(e){Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}function S(){if("function"===typeof AbortController)return new AbortController}},6523:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,f(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function j(e,t,r,i,a,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(){}function A(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(o){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case r:d=!0;break;case h:return A((d=e._init)(e._payload),t,i,a,s)}}if(d)return s=s(e),d=""===a?"."+E(e,0):a,w(s)?(i="",null!=d&&(i=d.replace(S,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(N(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+d,s=j(l.type,c,void 0,0,0,l.props)),t.push(s)),1;d=0;var u,m=""===a?".":a+":";if(w(e))for(var f=0;f<e.length;f++)d+=A(a=e[f],t,i,o=m+E(a,f),s);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(a=e.next()).done;)d+=A(a=a.value,t,i,o=m+E(a,f++),s);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function T(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!k.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];r.children=s}return j(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return j(e,a,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var r=e(),i=_.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(M,P)}catch(a){P(a)}finally{_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=_.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.1.0"},6557:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6621:(e,t)=>{t.SAME=0;t.CAMELCASE=1,t.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1}},6658:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},6669:(e,t,n)=>{var r=n(4467),i=n(2274),a=n(2138);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=a,e.exports=s},6794:(e,t,n)=>{e=n.nmd(e);var r=n(4759),i=n(3721),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,o=s&&s.exports===a?r.Buffer:void 0,l=(o?o.isBuffer:void 0)||i;e.exports=l},6817:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,n=e||function(){};return this.listeners.push(n),this.onSubscribe(),function(){t.listeners=t.listeners.filter((function(e){return e!==n})),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}()},6823:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).get(e)}},6860:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a}},6958:(e,t,n)=>{var r=n(3616);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7059:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7101:(e,t,n)=>{var r=n(4672);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7379:e=>{e.exports=function(e){return this.__data__.get(e)}},7405:(e,t,n)=>{var r=n(4102),i=n(4578),a=n(2279),s=n(6794),o=n(7059),l=n(1641),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),d=!n&&i(e),u=!n&&!d&&s(e),h=!n&&!d&&!u&&l(e),p=n||d||u||h,m=p?r(e.length,String):[],f=m.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,f))||m.push(g);return m}},7413:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},7455:(e,t,n)=>{var r=n(3616);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7462:(e,t,n)=>{var r=n(2161),i=n(5112),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7518:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},7639:(e,t,n)=>{"use strict";n.d(t,{dd:()=>o,eJ:()=>d,wm:()=>c});var r=n(5643),i=n(4576),a=n(6339);function s(e){return Math.min(1e3*Math.pow(2,e),3e4)}function o(e){return"function"===typeof(null==e?void 0:e.cancel)}var l=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function c(e){return e instanceof l}var d=function(e){var t,n,c,d,u=this,h=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){h=!0},this.continueRetry=function(){h=!1},this.continue=function(){return null==n?void 0:n()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise((function(e,t){c=e,d=t}));var p=function(t){u.isResolved||(u.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==n||n(),c(t))},m=function(t){u.isResolved||(u.isResolved=!0,null==e.onError||e.onError(t),null==n||n(),d(t))};!function c(){if(!u.isResolved){var d;try{d=e.fn()}catch(f){d=Promise.reject(f)}t=function(e){if(!u.isResolved&&(m(new l(e)),null==u.abort||u.abort(),o(d)))try{d.cancel()}catch(t){}},u.isTransportCancelable=o(d),Promise.resolve(d).then(p).catch((function(t){var o,l;if(!u.isResolved){var d=null!=(o=e.retry)?o:3,p=null!=(l=e.retryDelay)?l:s,f="function"===typeof p?p(u.failureCount,t):p,g=!0===d||"number"===typeof d&&u.failureCount<d||"function"===typeof d&&d(u.failureCount,t);!h&&g?(u.failureCount++,null==e.onFail||e.onFail(u.failureCount,t),(0,a.yy)(f).then((function(){if(!r.m.isFocused()||!i.t.isOnline())return new Promise((function(t){n=t,u.isPaused=!0,null==e.onPause||e.onPause()})).then((function(){n=void 0,u.isPaused=!1,null==e.onContinue||e.onContinue()}))})).then((function(){h?m(t):c()}))):m(t)}}))}}()}},7810:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,h=(e=(0,r.escapeSpecialCharacters)(e)).match(o),p=h&&h[1]?h[1].toLowerCase():"";switch(p){case i:var m=u(e);if(!l.test(e))null===(t=null===(v=m.querySelector(a))||void 0===v?void 0:v.parentNode)||void 0===t||t.removeChild(v);if(!c.test(e))null===(n=null===(v=m.querySelector(s))||void 0===v?void 0:v.parentNode)||void 0===n||n.removeChild(v);return m.querySelectorAll(i);case a:case s:var g=d(e).querySelectorAll(p);return c.test(e)&&l.test(e)?g[0].parentNode.childNodes:g;default:return f?f(e):(v=d(e,s).querySelector(s)).childNodes;var v}};var r=n(5377),i="html",a="head",s="body",o=/<([a-zA-Z]+[0-9]?)/,l=/<head[^]*>/i,c=/<body[^]*>/i,d=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},u=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},h="object"===typeof window&&window.DOMParser;if("function"===typeof h){var p=new h;d=u=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),p.parseFromString(e,"text/html")}}if("object"===typeof document&&document.implementation){var m=document.implementation.createHTMLDocument();d=function(e,t){if(t){var n=m.documentElement.querySelector(t);return n&&(n.innerHTML=e),m}return m.documentElement.innerHTML=e,m}}var f,g="object"===typeof document&&document.createElement("template");g&&g.content&&(f=function(e){return g.innerHTML=e,g.content.childNodes})},7840:(e,t,n)=>{var r=n(3008),i=n(5776);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},7859:(e,t,n)=>{var r=n(7101);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},7887:(e,t,n)=>{var r=n(220)(n(4759),"Set");e.exports=r},7889:(e,t,n)=>{var r=n(5099);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7949:(e,t,n)=>{var r=n(3008),i=n(3306),a=n(4567),s=n(9131),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:o).test(s(e))}},8128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=t.CARRIAGE_RETURN_PLACEHOLDER=t.CARRIAGE_RETURN_REGEX=t.CARRIAGE_RETURN=t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES=void 0,t.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES.reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{}),t.CARRIAGE_RETURN="\r",t.CARRIAGE_RETURN_REGEX=new RegExp(t.CARRIAGE_RETURN,"g"),t.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(t.CARRIAGE_RETURN_PLACEHOLDER,"g")},8166:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8183:(e,t,n)=>{var r=n(2022),i=n(5776),a=n(9248),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!s[r(e)]}},8194:(e,t,n)=>{var r=n(6860),i=n(1515),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return a.call(e,t)})))}:i;e.exports=o},8246:(e,t,n)=>{var r=n(4759).Uint8Array;e.exports=r},8345:(e,t,n)=>{"use strict";var r=n(9950),i=n(5340);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,I=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function q(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case N:return"Profiler";case j:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,je=null;function Ne(e){if(e=yi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Se(e){ke?je?je.push(e):je=[e]:ke=e}function Ee(){if(ke){var e=ke,t=je;if(je=ke=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Te=!1;function Oe(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ce(e,t,n)}finally{Te=!1,(null!==ke||null!==je)&&(Ae(),Ee())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Me=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Me=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Me=!1}function Re(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Le=!1,Ie=null,Fe=!1,ze=null,qe={onError:function(e){Le=!0,Ie=e}};function Be(e,t,n,r,i,a,s,o,l){Le=!1,Ie=null,Re.apply(qe,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(a(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=ut(o):0!==(a&=s)&&(r=ut(a))}else 0!==(s=n&~i)?r=ut(s):0!==a&&(r=ut(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,jt,Nt,St=!1,Et=[],Ct=null,At=null,Tt=null,Ot=new Map,Pt=new Map,Mt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function It(e){var t=bi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Nt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function qt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),null!==Tt&&Ft(Tt)&&(Tt=null),Ot.forEach(zt),Pt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Tt&&Bt(Tt,e),Ot.forEach(t),Pt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)It(n),null===n.blockedOn&&Mt.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var i=yt,a=Wt.transition;Wt.transition=null;try{yt=1,Qt(e,t,n,r)}finally{yt=i,Wt.transition=a}}function Gt(e,t,n,r){var i=yt,a=Wt.transition;Wt.transition=null;try{yt=4,Qt(e,t,n,r)}finally{yt=i,Wt.transition=a}}function Qt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ot.set(a,Lt(Ot.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=bi(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=I({},cn,{view:0,detail:0}),hn=an(un),pn=I({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=an(pn),fn=an(I({},pn,{dataTransfer:0})),gn=an(I({},un,{relatedTarget:0})),vn=an(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),xn=an(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Nn(){return jn}var Sn=I({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Sn),Cn=an(I({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(I({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Tn=an(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=I({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(On),Mn=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var Ln=d&&"TextEvent"in window&&!Rn,In=d&&(!Dn||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),zn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Qn=null;function Kn(e){Fr(e,0)}function Yn(e){if(Q(xi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(d){var $n;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Qn)){var t=[];Vn(t,Qn,e,we(e)),Oe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Qn)}function ar(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=dr(n,a);var s=dr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,br=null,yr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Gr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},jr={};function Nr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return kr[e]=n[t];return e}d&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Nr("animationend"),Er=Nr("animationiteration"),Cr=Nr("animationstart"),Ar=Nr("transitionend"),Tr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Tr.set(e,t),l(t,[e])}for(var Mr=0;Mr<Or.length;Mr++){var Dr=Or[Mr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Er,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var d=Ie;Le=!1,Ie=null,Fe||(Fe=!0,ze=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Ir(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Ir(i,o,c),a=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,qr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=Vt;break;case 4:i=Gt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=bi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Oe((function(){var r=a,i=we(n),s=[];e:{var o=Tr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Sr:case Er:case Cr:l=vn;break;case Ar:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Pe(m,h))&&d.push(Vr(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:xi(l),p=null==c?o:xi(c),(o=new d(f,m+"leave",l,n,i)).target=u,o.relatedTarget=p,f=null,bi(i)===r&&((d=new d(h,m+"enter",c,n,i)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Qr(p))m++;for(p=0,f=h;f;f=Qr(f))p++;for(;0<m-p;)d=Qr(d),m--;for(;0<p-m;)h=Qr(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Qr(d),h=Qr(h)}d=null}else d=null;null!==l&&Kr(s,o,l,d,!1),null!==c&&null!==u&&Kr(s,u,c,d,!0)}if("select"===(l=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Jn)g=sr;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Vn(s,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?xi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,br=null);break;case"focusout":br=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,xr(s,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":xr(s,n,i)}var b;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Un?qn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(In&&"ko"!==n.locale&&(Un||"onCompositionStart"!==y?"onCompositionEnd"===y&&Un&&(b=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Un=!0)),0<(v=Gr(r,y)).length&&(y=new xn(y,e,null,n,i),s.push({event:y,listeners:v}),b?y.data=b:null!==(b=Bn(n))&&(y.data=b))),(b=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Dn&&qn(e,t)?(e=en(),Zt=$t=Jt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b))}Fr(s,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Vr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Vr(e,a,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,a))&&s.unshift(Vr(n,l,o)):i||null!=(l=Pe(n,a))&&s.push(Vr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,mi="__reactContainer$"+ui,fi="__reactEvents$"+ui,gi="__reactListeners$"+ui,vi="__reactHandles$"+ui;function bi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var _i=[],ki=-1;function ji(e){return{current:e}}function Ni(e){0>ki||(e.current=_i[ki],_i[ki]=null,ki--)}function Si(e,t){ki++,_i[ki]=e.current,e.current=t}var Ei={},Ci=ji(Ei),Ai=ji(!1),Ti=Ei;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Ni(Ai),Ni(Ci)}function Di(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Si(Ci,t),Si(Ai,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,W(e)||"Unknown",i));return I({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ti=Ci.current,Si(Ci,e),Si(Ai,Ai.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Ni(Ai),Ni(Ci),Si(Ci,e)):Ni(Ai),Si(Ai,n)}var Fi=null,zi=!1,qi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function Ui(){if(!qi&&null!==Fi){qi=!0;var e=0,t=yt;try{var n=Fi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Qe(Ze,Ui),i}finally{yt=t,qi=!1}}return null}var Wi=[],Hi=0,Vi=null,Gi=0,Qi=[],Ki=0,Yi=null,Xi=1,Ji="";function $i(e,t){Wi[Hi++]=Gi,Wi[Hi++]=Vi,Vi=e,Gi=t}function Zi(e,t,n){Qi[Ki++]=Xi,Qi[Ki++]=Ji,Qi[Ki++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Vi;)Vi=Wi[--Hi],Wi[Hi]=null,Gi=Wi[--Hi],Wi[Hi]=null;for(;e===Yi;)Yi=Qi[--Ki],Qi[Ki]=null,Ji=Qi[--Ki],Qi[Ki]=null,Xi=Qi[--Ki],Qi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ua(e){if(e!==na)return!1;if(!ia)return da(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ci(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function pa(){ra=na=null,ia=!1}function ma(e){null===aa?aa=[e]:aa.push(e)}var fa=x.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ic(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===k?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&ba(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?d(e,t,n,r):null;case P:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:u(e,t,n,r,null);va(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return u(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function f(i,a,o,l){for(var c=null,d=null,u=a,f=a=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=p(i,u,o[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(i,u),a=s(v,a,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===o.length)return n(i,u),ia&&$i(i,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(i,o[f],l))&&(a=s(u,a,f),null===d?c=u:d.sibling=u,d=u);return ia&&$i(i,f),c}for(u=r(i,u);f<o.length;f++)null!==(g=m(u,i,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),a=s(g,a,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(i,e)})),ia&&$i(i,f),c}function g(i,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=o,g=o=0,v=null,b=l.next();null!==f&&!b.done;g++,b=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var y=p(i,f,b.value,c);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(i,f),o=s(y,o,g),null===u?d=y:u.sibling=y,u=y,f=v}if(b.done)return n(i,f),ia&&$i(i,g),d;if(null===f){for(;!b.done;g++,b=l.next())null!==(b=h(i,b.value,c))&&(o=s(b,o,g),null===u?d=b:u.sibling=b,u=b);return ia&&$i(i,g),d}for(f=r(i,f);!b.done;g++,b=l.next())null!==(b=m(f,i,g,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?g:b.key),o=s(b,o,g),null===u?d=b:u.sibling=b,u=b);return e&&f.forEach((function(e){return t(i,e)})),ia&&$i(i,g),d}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===k&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,d=a;null!==d;){if(d.key===c){if((c=s.type)===k){if(7===d.tag){n(r,d.sibling),(a=i(d,s.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ba(c)===d.type){n(r,d.sibling),(a=i(d,s.props)).ref=ga(r,d,s),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}s.type===k?((a=Rc(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=ga(r,a,s),l.return=r,r=l)}return o(r);case _:e:{for(d=s.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(s,r.mode,l)).return=r,r=a}return o(r);case P:return e(r,a,(d=s._init)(s._payload),l)}if(te(s))return f(r,a,s,l);if(R(s))return g(r,a,s,l);va(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Ic(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var xa=ya(!0),wa=ya(!1),_a=ji(null),ka=null,ja=null,Na=null;function Sa(){Na=ja=ka=null}function Ea(e){var t=_a.current;Ni(_a),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t){ka=e,Na=ja=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},null===ja){if(null===ka)throw Error(a(308));ja=e,ka.dependencies={lanes:0,firstContext:e}}else ja=ja.next=e;return t}var Oa=null;function Pa(e){null===Oa?Oa=[e]:Oa.push(e)}function Ma(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Pa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Pa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function qa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=i.baseState;for(s=0,d=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=I({},u,h);break e;case 2:Ra=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ll|=s,e.lanes=s,e.memoizedState=u}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},Va=ji(Ha),Ga=ji(Ha),Qa=ji(Ha);function Ka(e){if(e===Ha)throw Error(a(174));return e}function Ya(e,t){switch(Si(Qa,t),Si(Ga,e),Si(Va,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ni(Va),Si(Va,t)}function Xa(){Ni(Va),Ni(Ga),Ni(Qa)}function Ja(e){Ka(Qa.current);var t=Ka(Va.current),n=le(t,e.type);t!==n&&(Si(Ga,e),Si(Va,n))}function $a(e){Ga.current===e&&(Ni(Va),Ni(Ga))}var Za=ji(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=x.ReactCurrentDispatcher,is=x.ReactCurrentBatchConfig,as=0,ss=null,os=null,ls=null,cs=!1,ds=!1,us=0,hs=0;function ps(){throw Error(a(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fs(e,t,n,r,i,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?$s:Zs,e=n(r,i),ds){s=0;do{if(ds=!1,us=0,25<=s)throw Error(a(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,i)}while(ds)}if(rs.current=Js,t=null!==os&&null!==os.next,as=0,ls=os=ss=null,cs=!1,t)throw Error(a(300));return e}function gs(){var e=0!==us;return us=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function bs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function ys(e,t){return"function"===typeof t?t(e):t}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,d=s;do{var u=d.lane;if((as&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ss.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(yo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ss.lanes|=s,Ll|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(yo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _s(){}function ks(e,t){var n=ss,r=bs(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,yo=!0),r=r.queue,Rs(Ss.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Ts(9,Ns.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(a(349));0!==(30&as)||js(n,t,i)}return i}function js(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Es(t)&&Cs(e)}function Ss(e,t,n){return n((function(){Es(t)&&Cs(e)}))}function Es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Cs(e){var t=Da(e,1);null!==t&&nc(t,e,1,-1)}function As(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},t.queue=e,e=e.dispatch=Qs.bind(null,ss,e),[t.memoizedState,e]}function Ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Os(){return bs().memoizedState}function Ps(e,t,n,r){var i=vs();ss.flags|=e,i.memoizedState=Ts(1|t,n,void 0,void 0===r?null:r)}function Ms(e,t,n,r){var i=bs();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ts(t,n,a,r))}ss.flags|=e,i.memoizedState=Ts(1|t,n,a,r)}function Ds(e,t){return Ps(8390656,8,e,t)}function Rs(e,t){return Ms(2048,8,e,t)}function Ls(e,t){return Ms(4,2,e,t)}function Is(e,t){return Ms(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ms(4,4,Fs.bind(null,t,e),n)}function qs(){}function Bs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Us(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ws(e,t,n){return 0===(21&as)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),ss.lanes|=n,Ll|=n,e.baseState=!0),t)}function Hs(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{yt=n,is.transition=r}}function Vs(){return bs().memoizedState}function Gs(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e))Ys(t,n);else if(null!==(n=Ma(e,t,n,r))){nc(n,e,r,ec()),Xs(n,t,r)}}function Qs(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))Ys(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(i.next=i,Pa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ma(e,t,i,r))&&(nc(n,e,r,i=ec()),Xs(n,t,r))}}function Ks(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Ys(e,t){ds=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Js={readContext:Ta,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},$s={readContext:Ta,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4194308,4,Fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gs.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:As,useDebugValue:qs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=As(!1),t=e[0];return e=Hs.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,i=vs();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Al)throw Error(a(349));0!==(30&as)||js(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(Ss.bind(null,r,s,e),[e]),r.flags|=2048,Ts(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Al.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=us++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Ta,useCallback:Bs,useContext:Ta,useEffect:Rs,useImperativeHandle:zs,useInsertionEffect:Ls,useLayoutEffect:Is,useMemo:Us,useReducer:xs,useRef:Os,useState:function(){return xs(ys)},useDebugValue:qs,useDeferredValue:function(e){return Ws(bs(),os.memoizedState,e)},useTransition:function(){return[xs(ys)[0],bs().memoizedState]},useMutableSource:_s,useSyncExternalStore:ks,useId:Vs,unstable_isNewReconciler:!1},eo={readContext:Ta,useCallback:Bs,useContext:Ta,useEffect:Rs,useImperativeHandle:zs,useInsertionEffect:Ls,useLayoutEffect:Is,useMemo:Us,useReducer:ws,useRef:Os,useState:function(){return ws(ys)},useDebugValue:qs,useDeferredValue:function(e){var t=bs();return null===os?t.memoizedState=e:Ws(t,os.memoizedState,e)},useTransition:function(){return[ws(ys)[0],bs().memoizedState]},useMutableSource:_s,useSyncExternalStore:ks,useId:Vs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Fa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,i))&&(nc(t,e,i,r),qa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Fa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,i))&&(nc(t,e,i,r),qa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=za(e,i,r))&&(nc(t,e,r,n),qa(t,e,r))}};function io(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function ao(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Pi(t)?Ti:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Pi(t)?Ti:Ci.current,i.context=Oi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),uo(0,t)},n}function mo(e,t,n){(n=Fa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fa(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bo=x.ReactCurrentOwner,yo=!1;function xo(e,t,n,r){t.child=null===e?wa(t,null,n,r):xa(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var a=t.ref;return Aa(t,i),r=fs(e,t,n,r,a,i),n=gs(),null===e||yo?(ia&&n&&ea(t),t.flags|=1,xo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function _o(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ko(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Mc(a,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(yo=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(yo=!0)}}return So(e,t,n,r,i)}function jo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ml,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ml,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ml,Pl),Pl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ml,Pl),Pl|=r;return xo(e,t,i,n),t.child}function No(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var a=Pi(n)?Ti:Ci.current;return a=Oi(t,a),Aa(t,i),n=fs(e,t,n,r,a,i),r=gs(),null===e||yo?(ia&&r&&ea(t),t.flags|=1,xo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Eo(e,t,n,r,i){if(Pi(n)){var a=!0;Li(t)}else a=!1;if(Aa(t,i),null===t.stateNode)Wo(e,t),ao(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Oi(t,c=Pi(n)?Ti:Ci.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&so(t,s,r,c),Ra=!1;var h=t.memoizedState;s.state=h,Ua(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Ai.current||Ra?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Ra||io(t,n,o,r,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ia(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ta(l):l=Oi(t,l=Pi(n)?Ti:Ci.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||h!==l)&&so(t,s,r,l),Ra=!1,h=t.memoizedState,s.state=h,Ua(t,r,s,i);var m=t.memoizedState;o!==u||h!==m||Ai.current||Ra?("function"===typeof p&&(no(t,n,p,r),m=t.memoizedState),(c=Ra||io(t,n,c,r,h,m,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,a,i)}function Co(e,t,n,r,i,a){No(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Ii(t,n,!1),Ho(e,t,a);r=t.stateNode,bo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,o,a)):xo(e,t,o,a),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ya(e,t.containerInfo)}function To(e,t,n,r,i){return pa(),ma(i),t.flags|=256,xo(e,t,n,r),t.child}var Oo,Po,Mo,Do,Ro={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,n){var r,i=t.pendingProps,s=Za.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Si(Za,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Rc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Ro,e):Fo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(s=Rc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&xa(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Ro,s);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(r=Al)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Da(e,i),nc(r,e,i,-1))}return fc(),zo(e,t,o,r=co(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Qi[Ki++]=Xi,Qi[Ki++]=Ji,Qi[Ki++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Mc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,i}return e=(o=e.child).sibling,i=Mc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&ma(r),xa(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function Bo(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Uo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n,t);else if(19===e.tag)qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bo(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Pi(t.type)&&Mi(),Go(t),null;case 3:return r=t.stateNode,Xa(),Ni(Ai),Ni(Ci),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Po(e,t),Go(t),null;case 5:$a(t);var i=Ka(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Go(t),null}if(e=Ka(Va.current),ua(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)zr(Rr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ie(r,s),zr("invalid",r)}for(var l in be(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":G(r),Z(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)zr(Rr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=I({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(s in be(n,i),c=i)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?ge(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=d&&"onScroll"===s&&zr("scroll",e):null!=d&&y(e,s,d,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ka(Qa.current),Ka(Va.current),ua(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Go(t),null;case 13:if(Ni(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,s=!1;else if(s=ua(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),s=!1}else null!==aa&&(sc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Xa(),Po(e,t),null===e&&Ur(t.stateNode.containerInfo),Go(t),null;case 10:return Ea(t.type._context),Go(t),null;case 19:if(Ni(Za),null===(s=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Vo(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Vo(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Za,1&Za.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Ul&&(t.flags|=128,r=!0,Vo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ia)return Go(t),null}else 2*Je()-s.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Vo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=Za.current,Si(Za,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ko(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Ni(Ai),Ni(Ci),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(Ni(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ni(Za),null;case 4:return Xa(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Mo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ka(Va.current);var a,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=I({},i,{value:void 0}),r=I({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in be(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=dl,i=ul;dl=null,hl(e,t,n),ul=i,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(dl,n.stateNode));break;case 4:r=dl,i=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){jc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(s,o,i),dl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){jc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){jc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){jc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){jc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),ye(l,o);var d=ye(l,s);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):y(i,u,h,d)}switch(l){case"input":$(i,s);break;case"textarea":ae(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;null!=m?ne(i,!!s.multiple,m,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){jc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){jc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){jc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(d=Xo)||u,fl(t,e),Xo=d):fl(t,e),vl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for($o=e,u=e.child;null!==u;){for(h=$o=u;null!==$o;){switch(m=(p=$o).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){jc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,$o=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){jc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){jc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(a(161))}}catch(o){jc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){$o=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var i=$o,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Yo;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=s,(Xo=l)&&!c)for($o=i;null!==$o;)l=(s=$o).child,22===s.tag&&null!==s.memoizedState?_l(i):null!==l?(l.return=s,$o=l):_l(i);for(;null!==a;)$o=a,yl(a,t,n),a=a.sibling;$o=i,Yo=o,Xo=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$o=a):xl(e)}}function xl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wa(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(a(163))}Xo||512&t.flags&&il(t)}catch(p){jc(t,t.return,p)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function wl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function _l(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){jc(t,i,l)}}var a=t.return;try{il(t)}catch(l){jc(t,a,l)}break;case 5:var s=t.return;try{il(t)}catch(l){jc(t,s,l)}}}catch(l){jc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var kl,jl=Math.ceil,Nl=x.ReactCurrentDispatcher,Sl=x.ReactCurrentOwner,El=x.ReactCurrentBatchConfig,Cl=0,Al=null,Tl=null,Ol=0,Pl=0,Ml=ji(0),Dl=0,Rl=null,Ll=0,Il=0,Fl=0,zl=null,ql=null,Bl=0,Ul=1/0,Wl=null,Hl=!1,Vl=null,Gl=null,Ql=!1,Kl=null,Yl=0,Xl=0,Jl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Cl)?Je():-1!==$l?$l:$l=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Ol?Ol&-Ol:null!==fa.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(a(185));vt(e,n,r),0!==(2&Cl)&&e===Al||(e===Al&&(0===(2&Cl)&&(Il|=n),4===Dl&&oc(e,Ol)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Ul=Je()+500,zi&&Ui()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Al?Ol:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(lc.bind(null,e)):Bi(lc.bind(null,e)),si((function(){0===(6&Cl)&&Ui()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&Cl))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var s=mc();for(Al===e&&Ol===t||(Wl=null,Ul=Je()+500,hc(e,t));;)try{bc();break}catch(l){pc(e,l)}Sa(),Nl.current=s,Cl=i,null!==Tl?t=0:(Al=null,Ol=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Rl,hc(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=mt(e))&&(r=s,t=ac(e,s))),1===t))throw n=Rl,hc(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,ql,Wl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,ql,Wl),t);break}wc(e,ql,Wl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,ql,Wl),r);break}wc(e,ql,Wl);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=ql,ql=n,null!==t&&sc(t)),e}function sc(e){null===ql?ql=e:ql.push.apply(ql,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,ql,Wl),rc(e,Je()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Ul=Je()+500,zi&&Ui())}}function dc(e){null!==Kl&&0===Kl.tag&&0===(6&Cl)&&_c();var t=Cl;Cl|=1;var n=El.transition,r=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=r,El.transition=n,0===(6&(Cl=t))&&Ui()}}function uc(){Pl=Ml.current,Ni(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:Xa(),Ni(Ai),Ni(Ci),ns();break;case 5:$a(r);break;case 4:Xa();break;case 13:case 19:Ni(Za);break;case 10:Ea(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Al=e,Tl=e=Mc(e.current,null),Ol=Pl=t,Dl=0,Rl=null,Fl=Il=Ll=0,ql=zl=null,null!==Oa){for(t=0;t<Oa.length;t++)if(null!==(r=(n=Oa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Oa=null}return e}function pc(e,t){for(;;){var n=Tl;try{if(Sa(),rs.current=Js,cs){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(as=0,ls=os=ss=null,ds=!1,us=0,Sl.current=null,null===n||null===n.return){Dl=1,Rl=t,Tl=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&fo(s,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(s,d,t),fc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ma(lo(c,l));break e}}s=c=lo(c,l),4!==Dl&&(Dl=2),null===zl?zl=[s]:zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,po(0,c,t));break e;case 1:l=c;var b=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,mo(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(x){t=x,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function mc(){var e=Nl.current;return Nl.current=Js,null===e?Js:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Al||0===(268435455&Ll)&&0===(268435455&Il)||oc(Al,Ol)}function gc(e,t){var n=Cl;Cl|=2;var r=mc();for(Al===e&&Ol===t||(Wl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Sa(),Cl=n,Nl.current=r,null!==Tl)throw Error(a(261));return Al=null,Ol=0,Dl}function vc(){for(;null!==Tl;)yc(Tl)}function bc(){for(;null!==Tl&&!Ye();)yc(Tl)}function yc(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?xc(e):Tl=t,Sl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Pl)))return void(Tl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Dl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=yt,i=El.transition;try{El.transition=null,yt=1,function(e,t,n,r){do{_c()}while(null!==Kl);if(0!==(6&Cl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Al&&(Tl=Al=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(tt,(function(){return _c(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=El.transition,El.transition=null;var o=yt;yt=1;var l=Cl;Cl|=4,Sl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===i&&(l=o),p===s&&++u===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){jc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Xe(),Cl=l,yt=o,El.transition=s}else e.current=n;if(Ql&&(Ql=!1,Kl=e,Yl=i),s=e.pendingLanes,0===s&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),s=e.pendingLanes,0!==(1&s)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Ui()}(e,t,n,r)}finally{El.transition=i,yt=r}return null}function _c(){if(null!==Kl){var e=xt(Yl),t=El.transition,n=yt;try{if(El.transition=null,yt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Cl))throw Error(a(331));var i=Cl;for(Cl|=4,$o=e.current;null!==$o;){var s=$o,o=s.child;if(0!==(16&$o.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for($o=d;null!==$o;){var u=$o;switch(u.tag){case 0:case 11:case 15:nl(8,u,s)}var h=u.child;if(null!==h)h.return=u,$o=h;else for(;null!==$o;){var p=(u=$o).sibling,m=u.return;if(al(u),u===d){$o=null;break}if(null!==p){p.return=m,$o=p;break}$o=m}}}var f=s.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$o=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,$o=o;else e:for(;null!==$o;){if(0!==(2048&(s=$o).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,$o=b;break e}$o=s.return}}var y=e.current;for($o=y;null!==$o;){var x=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,$o=x;else e:for(o=y;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){jc(l,l.return,_)}if(l===o){$o=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$o=w;break e}$o=l.return}}if(Cl=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{yt=n,El.transition=t}}return!1}function kc(e,t,n){e=za(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=za(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Ol&n)===n&&(4===Dl||3===Dl&&(130023424&Ol)===Ol&&500>Je()-Bl?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Da(e,t))&&(vt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Ac(e,t){return Qe(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Tc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Rc(n.children,i,s,t);case j:o=8,i|=8;break;case N:return(e=Oc(12,n,t,2|i)).elementType=N,e.lanes=s,e;case A:return(e=Oc(13,n,t,i)).elementType=A,e.lanes=s,e;case T:return(e=Oc(19,n,t,i)).elementType=T,e.lanes=s,e;case M:return Lc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case E:o=9;break e;case C:o=11;break e;case O:o=14;break e;case P:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Rc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,s,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return Ei;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Ri(e,n,t)}return t}function Uc(e,t,n,r,i,a,s,o,l){return(e=qc(n,r,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=Fa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,za(n,a,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),s=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fa(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(i,t,s))&&(nc(e,i,s,a),qa(e,i,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),pa();break;case 5:Ja(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(_a,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Io(e,t,n):(Si(Za,1&Za.current),null!==(e=Ho(e,t,n))?e.sibling:null);Si(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return Ho(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=Oi(t,Ci.current);Aa(t,n),i=fs(null,t,r,e,i,n);var s=gs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,La(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),xo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(r),e=to(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=Eo(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Ao(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ia(e,t),Ua(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=To(e,t,r,n,i=lo(Error(a(423)),t));break e}if(r!==i){t=To(e,t,r,n,i=lo(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Ho(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),No(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Io(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Si(_a,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ai.current){t=Ho(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Fa(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ca(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ca(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}xo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Aa(t,n),r=r(i=Ta(i)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),_o(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Wo(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Aa(t,n),ao(t,r,i),oo(t,r,i,n),Co(null,t,r,!0,e,n);case 19:return Uo(e,t,n);case 22:return jo(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Hc(s);o.call(e)}}Wc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(s);a.call(e)}}var s=Uc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[mi]=s.current,Ur(8===e.nodeType?e.parentNode:e),dc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=qc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[mi]=l.current,Ur(8===e.nodeType?e.parentNode:e),dc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(s)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Wc(null,e,null,null)})),t[mi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Je()),0===(6&Cl)&&(Ul=Je()+500,Ui()))}break;case 13:dc((function(){var t=Da(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Da(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},jt=function(){return yt},Nt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));Q(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=dc;var ed={usingClientEntryPoint:!1,Events:[yi,xi,wi,Se,Ee,cc]},td={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{it=rd.inject(nd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,i,0,s,o),e[mi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[mi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8384:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},8554:(e,t,n)=>{"use strict";e.exports=n(6523)},9131:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},9248:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},9418:(e,t,n)=>{var r=n(1404);e.exports=function(e,t){return r(e,t)}},9531:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,i.default)(e),a="function"===typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,i=e.value;a?t(r,i,e):i&&((n=n||{})[r]=i)}})),n};var i=r(n(4570))},9611:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var a=n(5119),s=n(2427);i(n(2427),t);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,n){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof t&&(n=t,t=o),"object"===typeof e&&(t=e,e=void 0),this.callback=null!==e&&void 0!==e?e:null,this.options=null!==t&&void 0!==t?t:o,this.elementCB=null!==n&&void 0!==n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?a.ElementType.Tag:void 0,r=new s.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===a.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new s.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment)this.lastNode.data+=e;else{var t=new s.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new s.Text(""),t=new s.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new s.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"===typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},9757:(e,t,n)=>{var r=n(6669),i=n(6010),a=n(3445);e.exports=function(e,t,n,s,o,l){var c=1&n,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var m=-1,f=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++m<d;){var v=e[m],b=t[m];if(s)var y=c?s(b,v,m,t,e,l):s(v,b,m,e,t,l);if(void 0!==y){if(y)continue;f=!1;break}if(g){if(!i(t,(function(e,t){if(!a(g,t)&&(v===e||o(v,e,n,s,l)))return g.push(t)}))){f=!1;break}}else if(v!==b&&!o(v,b,n,s,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},9819:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,i=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||i.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(s,l):e.replace(a,l)).replace(r,o))}},9950:(e,t,n)=>{"use strict";e.exports=n(2049)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>cr,hasStandardBrowserEnv:()=>ur,hasStandardBrowserWebWorkerEnv:()=>hr,navigator:()=>dr,origin:()=>pr});var t={};n.r(t),n.d(t,{FILE:()=>Rm,HTML:()=>Fm,TEXT:()=>Im,URL:()=>Lm});var r,i=n(9950),a=n.t(i,2),s=n(1352),o=n(7119),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(He){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,i){void 0===i&&(i={});let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,l=r.Pop,h=null,g=v();function v(){return(o.state||{idx:null}).idx}function b(){l=r.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:l,location:x.location,delta:t})}function y(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let x={get action(){return l},get location(){return e(a,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(d,b),h=e,()=>{a.removeEventListener(d,b),h=null}},createHref:e=>t(a,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=m(x.location,e,t);n&&n(i,e),g=v()+1;let c=p(i,g),d=x.createHref(i);try{o.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;a.location.assign(d)}s&&h&&h({action:l,location:x.location,delta:1})},replace:function(e,t){l=r.Replace;let i=m(x.location,e,t);n&&n(i,e),g=v();let a=p(i,g),c=x.createHref(i);o.replaceState(a,"",c),s&&h&&h({action:l,location:x.location,delta:0})},go:e=>o.go(e)};return x}var b;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(b||(b={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,r){let i=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let a=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=M(i);s=O(a[o],e,r)}return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=z([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=_(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),i&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,j=3,N=2,S=1,E=10,C=-2,A=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(A)&&(r+=C),t&&(r+=N),n.filter((e=>!A(e))).reduce(((e,t)=>e+(k.test(t)?j:""===t?S:E)),r)}function O(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:z([a,d.pathname]),pathnameBase:q(z([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=z([a,d.pathnameBase]))}return s}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:s,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function I(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=c({},e),u(!i.pathname||!i.pathname.includes("?"),R("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),R("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),R("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:B(r),hash:U(i)}}(i,a),d=o&&"/"!==o&&o.endsWith("/"),h=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!d&&!h||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],V=(new Set(H),["get",...H]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const Q=i.createContext(null);const K=i.createContext(null);const Y=i.createContext(null);const X=i.createContext(null);const J=i.createContext({outlet:null,matches:[],isDataRoute:!1});const $=i.createContext(null);function Z(){return null!=i.useContext(X)}function ee(){return Z()||u(!1),i.useContext(X).location}function te(e){i.useContext(Y).static||i.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=me(he.UseNavigateStable),t=ge(pe.UseNavigateStable),n=i.useRef(!1);return te((()=>{n.current=!0})),i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},i)))}),[e,t])}():function(){Z()||u(!1);let e=i.useContext(Q),{basename:t,future:n,navigator:r}=i.useContext(Y),{matches:a}=i.useContext(J),{pathname:s}=ee(),o=JSON.stringify(I(a,n.v7_relativeSplatPath)),l=i.useRef(!1);te((()=>{l.current=!0}));let c=i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let a=F(n,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:z([t,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}),[t,r,o,s,e]);return c}()}const re=i.createContext(null);function ie(){let{matches:e}=i.useContext(J),t=e[e.length-1];return t?t.params:{}}function ae(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(Y),{matches:a}=i.useContext(J),{pathname:s}=ee(),o=JSON.stringify(I(a,r.v7_relativeSplatPath));return i.useMemo((()=>F(e,JSON.parse(o),s,"path"===n)),[e,o,s,n])}function se(e,t,n,a){Z()||u(!1);let{navigator:s}=i.useContext(Y),{matches:o}=i.useContext(J),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||u(!1),h=e}else h=p;let f=h.pathname||"/",v=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:v});let x=ue(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:z([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,a);return t&&x?i.createElement(X.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},x):x}function oe(){let e=function(){var e;let t=i.useContext($),n=fe(pe.UseRouteError),r=ge(pe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const le=i.createElement(oe,null);class ce extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:n,children:r}=e,a=i.useContext(Q);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}function ue(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight(((e,r,a)=>{let s,u=!1,h=null,p=null;n&&(s=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||le,c&&(d<0&&0===a?(!function(e,t){t||ve[e]||(ve[e]=!0)}("route-fallback",!1),u=!0,p=null):d===a&&(u=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,a+1)),f=()=>{let t;return t=s?h:u?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(de,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?i.createElement(ce,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()}),null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),pe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(pe||{});function me(e){let t=i.useContext(Q);return t||u(!1),t}function fe(e){let t=i.useContext(K);return t||u(!1),t}function ge(e){let t=function(){let e=i.useContext(J);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const ve={};function be(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}a.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:a}=e;Z()||u(!1);let{future:s,static:o}=i.useContext(Y),{matches:l}=i.useContext(J),{pathname:c}=ee(),d=ne(),h=F(t,I(l,s.v7_relativeSplatPath),c,"path"===a),p=JSON.stringify(h);return i.useEffect((()=>d(JSON.parse(p),{replace:n,state:r,relative:a})),[d,p,a,n,r]),null}function xe(e){return function(e){let t=i.useContext(J).outlet;return t?i.createElement(re.Provider,{value:e},t):t}(e.context)}function we(e){u(!1)}function _e(e){let{basename:t="/",children:n=null,location:a,navigationType:s=r.Pop,navigator:o,static:l=!1,future:c}=e;Z()&&u(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo((()=>({basename:d,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},c)})),[d,c,o,l]);"string"===typeof a&&(a=g(a));let{pathname:p="/",search:m="",hash:f="",state:v=null,key:b="default"}=a,y=i.useMemo((()=>{let e=D(p,d);return null==e?null:{location:{pathname:e,search:m,hash:f,state:v,key:b},navigationType:s}}),[d,p,m,f,v,b,s]);return null==y?null:i.createElement(Y.Provider,{value:h},i.createElement(X.Provider,{children:n,value:y}))}function ke(e){let{children:t,location:n}=e;return se(je(t),n)}new Promise((()=>{}));i.Component;function je(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let a=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,je(e.props.children,a));e.type!==we&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=je(e.props.children,a)),n.push(s)})),n}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Ee(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(He){}new Map;const Ae=a.startTransition;l.flushSync,a.useId;function Te(e){let{basename:t,children:n,future:r,window:a}=e,s=i.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),v((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return m("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,e)}({window:a,v5Compat:!0}));let o=s.current,[l,c]=i.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=i.useCallback((e=>{d&&Ae?Ae((()=>c(e))):c(e)}),[c,d]);return i.useLayoutEffect((()=>o.listen(u)),[o,u]),i.useEffect((()=>be(r)),[r]),i.createElement(_e,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Oe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Pe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Me=i.forwardRef((function(e,t){let n,{onClick:r,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p}=e,m=Se(e,Ce),{basename:g}=i.useContext(Y),v=!1;if("string"===typeof d&&Pe.test(d)&&(n=d,Oe))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(He){}let b=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||u(!1);let{basename:r,navigator:a}=i.useContext(Y),{hash:s,pathname:o,search:l}=ae(e,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:z([r,o])),a.createHref({pathname:c,search:l,hash:s})}(d,{relative:a}),y=function(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=void 0===t?{}:t,c=ne(),d=ee(),u=ae(e,{relative:o});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(d)===f(u);c(e,{replace:n,state:a,preventScrollReset:s,relative:o,viewTransition:l})}}),[d,c,u,r,a,n,e,s,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:p});return i.createElement("a",Ne({},m,{href:n||b,onClick:v||s?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));var De,Re;function Le(e){let t=i.useRef(Ee(e)),n=i.useRef(!1),r=ee(),a=i.useMemo((()=>function(e,t){let n=Ee(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(r.search,n.current?null:t.current)),[r.search]),s=ne(),o=i.useCallback(((e,t)=>{const r=Ee("function"===typeof e?e(a):e);n.current=!0,s("?"+r,t)}),[s,a]);return[a,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(De||(De={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var Ie=n(1920);function Fe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function qe(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ze(t)?t:t+""}function Be(e,t,n){return(t=qe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let He={data:""},Ve=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||He,Ge=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Qe=/\/\*[^]*?\*\/|  +/g,Ke=/\n+/g,Ye=(e,t)=>{let n="",r="",i="";for(let a in e){let s=e[a];"@"==a[0]?"i"==a[1]?n=a+" "+s+";":r+="f"==a[1]?Ye(s,a):a+"{"+Ye(s,"k"==a[1]?"":t)+"}":"object"==typeof s?r+=Ye(s,t?t.replace(/([^,])+/g,(e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):a):null!=s&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ye.p?Ye.p(a,s):a+":"+s+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Xe={},Je=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Je(e[n]);return t}return e},$e=(e,t,n,r,i)=>{let a=Je(e),s=Xe[a]||(Xe[a]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(a));if(!Xe[s]){let t=a!==e?e:(e=>{let t,n,r=[{}];for(;t=Ge.exec(e.replace(Qe,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Ke," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Ke," ").trim();return r[0]})(e);Xe[s]=Ye(i?{["@keyframes "+s]:t}:t,n?"":"."+s)}let o=n&&Xe.g?Xe.g:null;return n&&(Xe.g=Xe[s]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Xe[s],t,r,o),s};function Ze(e){let t=this||{},n=e.call?e(t.p):e;return $e(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let a=t[i];if(a&&a.call){let e=a(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":Ye(e,""):!1===e?"":e}return e+r+(null==a?"":a)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,Ve(t.target),t.g,t.o,t.k)}Ze.bind({g:1});let et,tt,nt,rt=Ze.bind({k:1});function it(e,t){let n=this||{};return function(){let r=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;n.p=Object.assign({theme:tt&&tt()},o),n.o=/ *go\d+/.test(l),o.className=Ze.apply(n,r)+(l?" "+l:""),t&&(o.ref=s);let c=e;return e[0]&&(c=o.as||e,delete o.as),nt&&c[0]&&nt(o),et(c,o)}return t?t(i):i}}var at,st,ot,lt,ct,dt,ut,ht,pt,mt,ft,gt,vt,bt,yt,xt,wt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,_t=(()=>{let e=0;return()=>(++e).toString()})(),kt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),jt=(e,t)=>{switch(t.type){case 0:return We(We({},e),{},{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return We(We({},e),{},{toasts:e.toasts.map((e=>e.id===t.toast.id?We(We({},e),t.toast):e))});case 2:let{toast:n}=t;return jt(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return We(We({},e),{},{toasts:e.toasts.map((e=>e.id===r||void 0===r?We(We({},e),{},{dismissed:!0,visible:!1}):e))});case 4:return void 0===t.toastId?We(We({},e),{},{toasts:[]}):We(We({},e),{},{toasts:e.toasts.filter((e=>e.id!==t.toastId))});case 5:return We(We({},e),{},{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return We(We({},e),{},{pausedAt:void 0,toasts:e.toasts.map((e=>We(We({},e),{},{pauseDuration:e.pauseDuration+i})))})}},Nt=[],St={toasts:[],pausedAt:void 0},Et=e=>{St=jt(St,e),Nt.forEach((e=>{e(St)}))},Ct={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},At=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return We(We({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||_t()})}(t,e,n);return Et({type:2,toast:r}),r.id},Tt=(e,t)=>At("blank")(e,t);Tt.error=At("error"),Tt.success=At("success"),Tt.loading=At("loading"),Tt.custom=At("custom"),Tt.dismiss=e=>{Et({type:3,toastId:e})},Tt.remove=e=>Et({type:4,toastId:e}),Tt.promise=(e,t,n)=>{let r=Tt.loading(t.loading,We(We({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?wt(t.success,e):void 0;return i?Tt.success(i,We(We({id:r},n),null==n?void 0:n.success)):Tt.dismiss(r),e})).catch((e=>{let i=t.error?wt(t.error,e):void 0;i?Tt.error(i,We(We({id:r},n),null==n?void 0:n.error)):Tt.dismiss(r)})),e};var Ot=(e,t)=>{Et({type:1,toast:{id:e,height:t}})},Pt=()=>{Et({type:5,time:Date.now()})},Mt=new Map,Dt=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,i.useState)(St),r=(0,i.useRef)(St);(0,i.useEffect)((()=>(r.current!==St&&n(St),Nt.push(n),()=>{let e=Nt.indexOf(n);e>-1&&Nt.splice(e,1)})),[]);let a=t.toasts.map((t=>{var n,r,i;return We(We(We(We({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Ct[t.type],style:We(We(We({},e.style),null==(i=e[t.type])?void 0:i.style),t.style)})}));return We(We({},t),{},{toasts:a})}(e);(0,i.useEffect)((()=>{if(n)return;let e=Date.now(),r=t.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>Tt.dismiss(t.id)),n);t.visible&&Tt.dismiss(t.id)}));return()=>{r.forEach((e=>e&&clearTimeout(e)))}}),[t,n]);let r=(0,i.useCallback)((()=>{n&&Et({type:6,time:Date.now()})}),[n]),a=(0,i.useCallback)(((e,n)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:a}=n||{},s=t.filter((t=>(t.position||a)===(e.position||a)&&t.height)),o=s.findIndex((t=>t.id===e.id)),l=s.filter(((e,t)=>t<o&&e.visible)).length;return s.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[t]);return(0,i.useEffect)((()=>{t.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(Mt.has(e))return;let n=setTimeout((()=>{Mt.delete(e),Et({type:4,toastId:e})}),t);Mt.set(e,n)}(e.id,e.removeDelay);else{let t=Mt.get(e.id);t&&(clearTimeout(t),Mt.delete(e.id))}}))}),[t]),{toasts:t,handlers:{updateHeight:Ot,startPause:Pt,endPause:r,calculateOffset:a}}},Rt=rt(at||(at=Fe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Lt=rt(st||(st=Fe(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),It=rt(ot||(ot=Fe(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Ft=it("div")(lt||(lt=Fe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),(e=>e.primary||"#ff4b4b"),Rt,Lt,(e=>e.secondary||"#fff"),It),zt=rt(ct||(ct=Fe(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),qt=it("div")(dt||(dt=Fe(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),(e=>e.secondary||"#e0e0e0"),(e=>e.primary||"#616161"),zt),Bt=rt(ut||(ut=Fe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Ut=rt(ht||(ht=Fe(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Wt=it("div")(pt||(pt=Fe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),(e=>e.primary||"#61d345"),Bt,Ut,(e=>e.secondary||"#fff")),Ht=it("div")(mt||(mt=Fe(["\n  position: absolute;\n"]))),Vt=it("div")(ft||(ft=Fe(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Gt=rt(gt||(gt=Fe(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Qt=it("div")(vt||(vt=Fe(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Gt),Kt=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:a}=t;return void 0!==n?"string"==typeof n?i.createElement(Qt,null,n):n:"blank"===r?null:i.createElement(Vt,null,i.createElement(qt,We({},a)),"loading"!==r&&i.createElement(Ht,null,"error"===r?i.createElement(Ft,We({},a)):i.createElement(Wt,We({},a))))},Yt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Xt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Jt=it("div")(bt||(bt=Fe(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),$t=it("div")(yt||(yt=Fe(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Zt=i.memo((e=>{let{toast:t,position:n,style:r,children:a}=e,s=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=kt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Yt(n),Xt(n)];return{animation:t?"".concat(rt(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(rt(i)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},o=i.createElement(Kt,{toast:t}),l=i.createElement($t,We({},t.ariaProps),wt(t.message,t));return i.createElement(Jt,{className:t.className,style:We(We(We({},s),r),t.style)},"function"==typeof a?a({icon:o,message:l}):i.createElement(i.Fragment,null,o,l))}));!function(e,t,n,r){Ye.p=t,et=e,tt=n,nt=r}(i.createElement);var en=e=>{let{id:t,className:n,style:r,onHeightUpdate:a,children:s}=e,o=i.useCallback((e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;a(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,a]);return i.createElement("div",{ref:o,className:n,style:r},s)},tn=Ze(xt||(xt=Fe(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),nn=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:a,children:s,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:d}=Dt(r);return i.createElement("div",{id:"_rht_toaster",style:We({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},o),className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map((e=>{let r=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return We(We({left:0,right:0,display:"flex",position:"absolute",transition:kt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),i)})(r,d.calculateOffset(e,{reverseOrder:t,gutter:a,defaultPosition:n}));return i.createElement(en,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?tn:"",style:o},"custom"===e.type?wt(e.message,e):s?s(e):i.createElement(Zt,{toast:e,position:r}))})))},rn=Tt;function an(e,t){return function(){return e.apply(t,arguments)}}const{toString:sn}=Object.prototype,{getPrototypeOf:on}=Object,{iterator:ln,toStringTag:cn}=Symbol,dn=(un=Object.create(null),e=>{const t=sn.call(e);return un[t]||(un[t]=t.slice(8,-1).toLowerCase())});var un;const hn=e=>(e=e.toLowerCase(),t=>dn(t)===e),pn=e=>t=>typeof t===e,{isArray:mn}=Array,fn=pn("undefined");const gn=hn("ArrayBuffer");const vn=pn("string"),bn=pn("function"),yn=pn("number"),xn=e=>null!==e&&"object"===typeof e,wn=e=>{if("object"!==dn(e))return!1;const t=on(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(cn in e)&&!(ln in e)},_n=hn("Date"),kn=hn("File"),jn=hn("Blob"),Nn=hn("FileList"),Sn=hn("URLSearchParams"),[En,Cn,An,Tn]=["ReadableStream","Request","Response","Headers"].map(hn);function On(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mn(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let s;for(n=0;n<a;n++)s=r[n],t.call(null,e[s],s,e)}}function Pn(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Mn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Dn=e=>!fn(e)&&e!==Mn;const Rn=(Ln="undefined"!==typeof Uint8Array&&on(Uint8Array),e=>Ln&&e instanceof Ln);var Ln;const In=hn("HTMLFormElement"),Fn=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),zn=hn("RegExp"),qn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};On(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)};const Bn=hn("AsyncFunction"),Un=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],Mn.addEventListener("message",(e=>{let{source:t,data:i}=e;t===Mn&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),Mn.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,bn(Mn.postMessage)),Wn="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Mn):"undefined"!==typeof process&&process.nextTick||Un,Hn={isArray:mn,isArrayBuffer:gn,isBuffer:function(e){return null!==e&&!fn(e)&&null!==e.constructor&&!fn(e.constructor)&&bn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||bn(e.append)&&("formdata"===(t=dn(e))||"object"===t&&bn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&gn(e.buffer),t},isString:vn,isNumber:yn,isBoolean:e=>!0===e||!1===e,isObject:xn,isPlainObject:wn,isReadableStream:En,isRequest:Cn,isResponse:An,isHeaders:Tn,isUndefined:fn,isDate:_n,isFile:kn,isBlob:jn,isRegExp:zn,isFunction:bn,isStream:e=>xn(e)&&bn(e.pipe),isURLSearchParams:Sn,isTypedArray:Rn,isFileList:Nn,forEach:On,merge:function e(){const{caseless:t}=Dn(this)&&this||{},n={},r=(r,i)=>{const a=t&&Pn(n,i)||i;wn(n[a])&&wn(r)?n[a]=e(n[a],r):wn(r)?n[a]=e({},r):mn(r)?n[a]=r.slice():n[a]=r};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&On(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return On(t,((t,r)=>{n&&bn(t)?e[r]=an(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,s;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==n&&on(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:dn,kindOfTest:hn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(mn(e))return e;let t=e.length;if(!yn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[ln]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:In,hasOwnProperty:Fn,hasOwnProp:Fn,reduceDescriptors:qn,freezeMethods:e=>{qn(e,((t,n)=>{if(bn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];bn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return mn(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Pn,global:Mn,isContextDefined:Dn,isSpecCompliantForm:function(e){return!!(e&&bn(e.append)&&"FormData"===e[cn]&&e[ln])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(xn(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=mn(e)?[]:{};return On(e,((e,t)=>{const a=n(e,r+1);!fn(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Bn,isThenable:e=>e&&(xn(e)||bn(e))&&bn(e.then)&&bn(e.catch),setImmediate:Un,asap:Wn,isIterable:e=>null!=e&&bn(e[ln])};function Vn(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Hn.inherits(Vn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Hn.toJSONObject(this.config),code:this.code,status:this.status}}});const Gn=Vn.prototype,Qn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Qn[e]={value:e}})),Object.defineProperties(Vn,Qn),Object.defineProperty(Gn,"isAxiosError",{value:!0}),Vn.from=(e,t,n,r,i,a)=>{const s=Object.create(Gn);return Hn.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Vn.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const Kn=Vn;function Yn(e){return Hn.isPlainObject(e)||Hn.isArray(e)}function Xn(e){return Hn.endsWith(e,"[]")?e.slice(0,-2):e}function Jn(e,t,n){return e?e.concat(t).map((function(e,t){return e=Xn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const $n=Hn.toFlatObject(Hn,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Zn=function(e,t,n){if(!Hn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Hn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Hn.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,s=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Hn.isSpecCompliantForm(t);if(!Hn.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Hn.isDate(e))return e.toISOString();if(!o&&Hn.isBlob(e))throw new Kn("Blob is not supported. Use a Buffer instead.");return Hn.isArrayBuffer(e)||Hn.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"===typeof e)if(Hn.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Hn.isArray(e)&&function(e){return Hn.isArray(e)&&!e.some(Yn)}(e)||(Hn.isFileList(e)||Hn.endsWith(n,"[]"))&&(o=Hn.toArray(e)))return n=Xn(n),o.forEach((function(e,r){!Hn.isUndefined(e)&&null!==e&&t.append(!0===s?Jn([n],r,a):null===s?n:n+"[]",l(e))})),!1;return!!Yn(e)||(t.append(Jn(i,n,a),l(e)),!1)}const d=[],u=Object.assign($n,{defaultVisitor:c,convertValue:l,isVisitable:Yn});if(!Hn.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Hn.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),Hn.forEach(n,(function(n,a){!0===(!(Hn.isUndefined(n)||null===n)&&i.call(t,n,Hn.isString(a)?a.trim():a,r,u))&&e(n,r?r.concat(a):[a])})),d.pop()}}(e),t};function er(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function tr(e,t){this._pairs=[],e&&Zn(e,this,t)}const nr=tr.prototype;nr.append=function(e,t){this._pairs.push([e,t])},nr.toString=function(e){const t=e?function(t){return e.call(this,t,er)}:er;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const rr=tr;function ir(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ar(e,t,n){if(!t)return e;const r=n&&n.encode||ir;Hn.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(a=i?i(t,n):Hn.isURLSearchParams(t)?t.toString():new rr(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const sr=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Hn.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},or={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:rr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},cr="undefined"!==typeof window&&"undefined"!==typeof document,dr="object"===typeof navigator&&navigator||void 0,ur=cr&&(!dr||["ReactNative","NativeScript","NS"].indexOf(dr.product)<0),hr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pr=cr&&window.location.href||"http://localhost",mr=We(We({},e),lr);const fr=function(e){function t(e,n,r,i){let a=e[i++];if("__proto__"===a)return!0;const s=Number.isFinite(+a),o=i>=e.length;if(a=!a&&Hn.isArray(r)?r.length:a,o)return Hn.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!s;r[a]&&Hn.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],i)&&Hn.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}(r[a])),!s}if(Hn.isFormData(e)&&Hn.isFunction(e.entries)){const n={};return Hn.forEachEntry(e,((e,r)=>{t(function(e){return Hn.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const gr={transitional:or,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Hn.isObject(e);i&&Hn.isHTMLForm(e)&&(e=new FormData(e));if(Hn.isFormData(e))return r?JSON.stringify(fr(e)):e;if(Hn.isArrayBuffer(e)||Hn.isBuffer(e)||Hn.isStream(e)||Hn.isFile(e)||Hn.isBlob(e)||Hn.isReadableStream(e))return e;if(Hn.isArrayBufferView(e))return e.buffer;if(Hn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Zn(e,new mr.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return mr.isNode&&Hn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Hn.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Zn(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Hn.isString(e))try{return(t||JSON.parse)(e),Hn.trim(e)}catch(He){if("SyntaxError"!==He.name)throw He}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||gr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Hn.isResponse(e)||Hn.isReadableStream(e))return e;if(e&&Hn.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(He){if(n){if("SyntaxError"===He.name)throw Kn.from(He,Kn.ERR_BAD_RESPONSE,this,null,this.response);throw He}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mr.classes.FormData,Blob:mr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Hn.forEach(["delete","get","head","post","put","patch"],(e=>{gr.headers[e]={}}));const vr=gr,br=Hn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yr=Symbol("internals");function xr(e){return e&&String(e).trim().toLowerCase()}function wr(e){return!1===e||null==e?e:Hn.isArray(e)?e.map(wr):String(e)}function _r(e,t,n,r,i){return Hn.isFunction(r)?r.call(this,t,n):(i&&(t=n),Hn.isString(t)?Hn.isString(r)?-1!==t.indexOf(r):Hn.isRegExp(r)?r.test(t):void 0:void 0)}class kr{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=xr(t);if(!i)throw new Error("header name must be a non-empty string");const a=Hn.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=wr(e))}const a=(e,t)=>Hn.forEach(e,((e,n)=>i(e,n,t)));if(Hn.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Hn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&br[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Hn.isObject(e)&&Hn.isIterable(e)){let n,r,i={};for(const t of e){if(!Hn.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?Hn.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=xr(e)){const n=Hn.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Hn.isFunction(t))return t.call(this,e,n);if(Hn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=xr(e)){const n=Hn.findKey(this,e);return!(!n||void 0===this[n]||t&&!_r(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=xr(e)){const i=Hn.findKey(n,e);!i||t&&!_r(0,n[i],i,t)||(delete n[i],r=!0)}}return Hn.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!_r(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Hn.forEach(this,((r,i)=>{const a=Hn.findKey(n,i);if(a)return t[a]=wr(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=wr(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Hn.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Hn.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[yr]=this[yr]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=xr(e);t[r]||(!function(e,t){const n=Hn.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Hn.isArray(e)?e.forEach(r):r(e),this}}kr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Hn.reduceDescriptors(kr.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Hn.freezeMethods(kr);const jr=kr;function Nr(e,t){const n=this||vr,r=t||n,i=jr.from(r.headers);let a=r.data;return Hn.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Sr(e){return!(!e||!e.__CANCEL__)}function Er(e,t,n){Kn.call(this,null==e?"canceled":e,Kn.ERR_CANCELED,t,n),this.name="CanceledError"}Hn.inherits(Er,Kn,{__CANCEL__:!0});const Cr=Er;function Ar(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Kn("Request failed with status code "+n.status,[Kn.ERR_BAD_REQUEST,Kn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Tr=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];i||(i=l),n[a]=o,r[a]=l;let d=s,u=0;for(;d!==a;)u+=n[d++],d%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Or=function(e,t){let n,r,i=0,a=1e3/t;const s=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=a?s(l,e):(n=l,r||(r=setTimeout((()=>{r=null,s(n)}),a-t)))},()=>n&&s(n)]},Pr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=Tr(50,250);return Or((n=>{const a=n.loaded,s=n.lengthComputable?n.total:void 0,o=a-r,l=i(o);r=a;e({loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},Mr=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Dr=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hn.asap((()=>e(...n)))},Rr=mr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,mr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(mr.origin),mr.navigator&&/(msie|trident)/i.test(mr.navigator.userAgent)):()=>!0,Lr=mr.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const s=[e+"="+encodeURIComponent(t)];Hn.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Hn.isString(r)&&s.push("path="+r),Hn.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ir(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Fr=e=>e instanceof jr?We({},e):e;function zr(e,t){t=t||{};const n={};function r(e,t,n,r){return Hn.isPlainObject(e)&&Hn.isPlainObject(t)?Hn.merge.call({caseless:r},e,t):Hn.isPlainObject(t)?Hn.merge({},t):Hn.isArray(t)?t.slice():t}function i(e,t,n,i){return Hn.isUndefined(t)?Hn.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function a(e,t){if(!Hn.isUndefined(t))return r(void 0,t)}function s(e,t){return Hn.isUndefined(t)?Hn.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,n)=>i(Fr(e),Fr(t),0,!0)};return Hn.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||i,s=a(e[r],t[r],r);Hn.isUndefined(s)&&a!==o||(n[r]=s)})),n}const qr=e=>{const t=zr({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=jr.from(o),t.url=ar(Ir(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Hn.isFormData(r))if(mr.hasStandardBrowserEnv||mr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(mr.hasStandardBrowserEnv&&(i&&Hn.isFunction(i)&&(i=i(t)),i||!1!==i&&Rr(t.url))){const e=a&&s&&Lr.read(s);e&&o.set(a,e)}return t},Br="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=qr(e);let i=r.data;const a=jr.from(r.headers).normalize();let s,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=r;function m(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=jr.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Ar((function(e){t(e),m()}),(function(e){n(e),m()}),{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Kn("Request aborted",Kn.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new Kn("Network Error",Kn.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||or;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Kn(t,i.clarifyTimeoutError?Kn.ETIMEDOUT:Kn.ECONNABORTED,e,f)),f=null},void 0===i&&a.setContentType(null),"setRequestHeader"in f&&Hn.forEach(a.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),Hn.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),u&&"json"!==u&&(f.responseType=r.responseType),p&&([l,d]=Pr(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=Pr(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{f&&(n(!t||t.type?new Cr(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===mr.protocols.indexOf(v)?n(new Kn("Unsupported protocol "+v+":",Kn.ERR_BAD_REQUEST,e)):f.send(i||null)}))},Ur=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Kn?t:new Cr(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,i(new Kn("timeout ".concat(t," of ms exceeded"),Kn.ETIMEDOUT))}),t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=r;return o.unsubscribe=()=>Hn.asap(s),o}};function Wr(e,t){this.v=e,this.k=t}function Hr(e){return function(){return new Vr(e.apply(this,arguments))}}function Vr(e){var t,n;function r(t,n){try{var a=e[t](n),s=a.value,o=s instanceof Wr;Promise.resolve(o?s.v:s).then((function(n){if(o){var l="return"===t?"return":"next";if(!s.k||n.done)return r(l,n);n=e[l](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,s){var o={key:e,arg:i,resolve:a,reject:s,next:null};n?n=n.next=o:(t=n=o,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function Gr(e){return new Wr(e,0)}function Qr(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new Wr(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Kr(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Yr(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Yr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Yr=function(e){this.s=e,this.n=e.next},Yr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Yr(e)}Vr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Vr.prototype.next=function(e){return this._invoke("next",e)},Vr.prototype.throw=function(e){return this._invoke("throw",e)},Vr.prototype.return=function(e){return this._invoke("return",e)};const Xr=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Jr=function(){var e=Hr((function*(e,t){var n,r=!1,i=!1;try{for(var a,s=Kr($r(e));r=!(a=yield Gr(s.next())).done;r=!1){const e=a.value;yield*Qr(Kr(Xr(e,t)))}}catch(o){i=!0,n=o}finally{try{r&&null!=s.return&&(yield Gr(s.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),$r=function(){var e=Hr((function*(e){if(e[Symbol.asyncIterator])return void(yield*Qr(Kr(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Gr(t.read());if(e)break;yield n}}finally{yield Gr(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Zr=(e,t,n,r)=>{const i=Jr(e,t);let a,s=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=s+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},ei="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ti=ei&&"function"===typeof ReadableStream,ni=ei&&("function"===typeof TextEncoder?(ri=new TextEncoder,e=>ri.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ri;const ii=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(He){return!1}},ai=ti&&ii((()=>{let e=!1;const t=new Request(mr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),si=ti&&ii((()=>Hn.isReadableStream(new Response("").body))),oi={stream:si&&(e=>e.body)};var li;ei&&(li=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!oi[e]&&(oi[e]=Hn.isFunction(li[e])?t=>t[e]():(t,n)=>{throw new Kn("Response type '".concat(e,"' is not supported"),Kn.ERR_NOT_SUPPORT,n)})})));const ci=async(e,t)=>{const n=Hn.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Hn.isBlob(e))return e.size;if(Hn.isSpecCompliantForm(e)){const t=new Request(mr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Hn.isArrayBufferView(e)||Hn.isArrayBuffer(e)?e.byteLength:(Hn.isURLSearchParams(e)&&(e+=""),Hn.isString(e)?(await ni(e)).byteLength:void 0)})(t):n},di=ei&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=qr(e);c=c?(c+"").toLowerCase():"text";let p,m=Ur([i,a&&a.toAbortSignal()],s);const f=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(l&&ai&&"get"!==n&&"head"!==n&&0!==(g=await ci(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Hn.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Mr(g,Pr(Dr(l)));r=Zr(n.body,65536,e,t)}}Hn.isString(u)||(u=u?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,We(We({},h),{},{signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:i?u:void 0}));let a=await fetch(p);const s=si&&("stream"===c||"response"===c);if(si&&(o||s&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=Hn.toFiniteNumber(a.headers.get("content-length")),[n,r]=o&&Mr(t,Pr(Dr(o),!0))||[];a=new Response(Zr(a.body,65536,n,(()=>{r&&r(),f&&f()})),e)}c=c||"text";let v=await oi[Hn.findKey(oi,c)||"text"](a,e);return!s&&f&&f(),await new Promise(((t,n)=>{Ar(t,n,{data:v,headers:jr.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(v){if(f&&f(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new Kn("Network Error",Kn.ERR_NETWORK,e,p),{cause:v.cause||v});throw Kn.from(v,v&&v.code,e,p)}}),ui={http:null,xhr:Br,fetch:di};Hn.forEach(ui,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(He){}Object.defineProperty(e,"adapterName",{value:t})}}));const hi=e=>"- ".concat(e),pi=e=>Hn.isFunction(e)||null===e||!1===e,mi=e=>{e=Hn.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!pi(n)&&(r=ui[(t=String(n)).toLowerCase()],void 0===r))throw new Kn("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+a]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(hi).join("\n"):" "+hi(e[0]):"as no adapter specified";throw new Kn("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function fi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cr(null,e)}function gi(e){fi(e),e.headers=jr.from(e.headers),e.data=Nr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return mi(e.adapter||vr.adapter)(e).then((function(t){return fi(e),t.data=Nr.call(e,e.transformResponse,t),t.headers=jr.from(t.headers),t}),(function(t){return Sr(t)||(fi(e),t&&t.response&&(t.response.data=Nr.call(e,e.transformResponse,t.response),t.response.headers=jr.from(t.response.headers))),Promise.reject(t)}))}const vi="1.9.0",bi={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{bi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const yi={};bi.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new Kn(r(i," has been removed"+(t?" in "+t:"")),Kn.ERR_DEPRECATED);return t&&!yi[i]&&(yi[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},bi.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const xi={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Kn("options must be an object",Kn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=t[a];if(s){const t=e[a],n=void 0===t||s(t,a,e);if(!0!==n)throw new Kn("option "+a+" must be "+n,Kn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Kn("Unknown option "+a,Kn.ERR_BAD_OPTION)}},validators:bi},wi=xi.validators;class _i{constructor(e){this.defaults=e||{},this.interceptors={request:new sr,response:new sr}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(He){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=zr(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&xi.assertOptions(n,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1),null!=r&&(Hn.isFunction(r)?t.paramsSerializer={serialize:r}:xi.assertOptions(r,{encode:wi.function,serialize:wi.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),xi.assertOptions(t,{baseUrl:wi.spelling("baseURL"),withXsrfToken:wi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&Hn.merge(i.common,i[t.method]);i&&Hn.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=jr.concat(a,i);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!o){const e=[gi.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let h=t;for(u=0;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=gi.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ar(Ir((e=zr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Hn.forEach(["delete","get","head","options"],(function(e){_i.prototype[e]=function(t,n){return this.request(zr(n||{},{method:e,url:t,data:(n||{}).data}))}})),Hn.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(zr(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}_i.prototype[e]=t(),_i.prototype[e+"Form"]=t(!0)}));const ki=_i;class ji{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Cr(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new ji((function(t){e=t}));return{token:t,cancel:e}}}const Ni=ji;const Si={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Si).forEach((e=>{let[t,n]=e;Si[n]=t}));const Ei=Si;const Ci=function e(t){const n=new ki(t),r=an(ki.prototype.request,n);return Hn.extend(r,ki.prototype,n,{allOwnKeys:!0}),Hn.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(zr(t,n))},r}(vr);Ci.Axios=ki,Ci.CanceledError=Cr,Ci.CancelToken=Ni,Ci.isCancel=Sr,Ci.VERSION=vi,Ci.toFormData=Zn,Ci.AxiosError=Kn,Ci.Cancel=Ci.CanceledError,Ci.all=function(e){return Promise.all(e)},Ci.spread=function(e){return function(t){return e.apply(null,t)}},Ci.isAxiosError=function(e){return Hn.isObject(e)&&!0===e.isAxiosError},Ci.mergeConfig=zr,Ci.AxiosHeaders=jr,Ci.formToJSON=e=>fr(Hn.isHTMLForm(e)?new FormData(e):e),Ci.getAdapter=mi,Ci.HttpStatusCode=Ei,Ci.default=Ci;const Ai=Ci,Ti=e=>"string"===typeof e,Oi=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n},Pi=e=>null==e?"":""+e,Mi=/###/g,Di=e=>e&&e.indexOf("###")>-1?e.replace(Mi,"."):e,Ri=e=>!e||Ti(e),Li=(e,t,n)=>{const r=Ti(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(Ri(e))return{};const t=Di(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return Ri(e)?{}:{obj:e,k:Di(r[i])}},Ii=(e,t,n)=>{const{obj:r,k:i}=Li(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let a=t[t.length-1],s=t.slice(0,t.length-1),o=Li(e,s,Object);for(;void 0===o.obj&&s.length;){var l;a="".concat(s[s.length-1],".").concat(a),s=s.slice(0,s.length-1),o=Li(e,s,Object),null!==(l=o)&&void 0!==l&&l.obj&&"undefined"!==typeof o.obj["".concat(o.k,".").concat(a)]&&(o.obj=void 0)}o.obj["".concat(o.k,".").concat(a)]=n},Fi=(e,t)=>{const{obj:n,k:r}=Li(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},zi=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?Ti(e[r])||e[r]instanceof String||Ti(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):zi(e[r],t[r],n):e[r]=t[r]);return e},qi=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Bi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ui=e=>Ti(e)?e.replace(/[&<>"'\/]/g,(e=>Bi[e])):e;const Wi=[" ",",","?","!",";"],Hi=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),Vi=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(n);let i=e;for(let a=0;a<r.length;){if(!i||"object"!==typeof i)return;let e,t="";for(let s=a;s<r.length;++s)if(s!==a&&(t+=n),t+=r[s],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&s<r.length-1)continue;a+=s-a+1;break}i=e}return i},Gi=e=>null===e||void 0===e?void 0:e.replace("_","-"),Qi={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;null===(n=console)||void 0===n||null===(n=n[e])||void 0===n||null===(r=n.apply)||void 0===r||r.call(n,console,t)}};class Ki{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Qi,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(Ti(e[0])&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new Ki(this.logger,We(We({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Ki(this.logger,e)}}var Yi=new Ki;class Xi{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let i=0;i<r;i++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[r,i]=t;for(let a=0;a<i;a++)r.apply(r,[e,...n])}))}}}class Ji extends Xi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):Ti(n)&&a?o.push(...n.split(a)):o.push(n)));const l=Fi(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!l&&s&&Ti(n)?Vi(null===(r=this.data)||void 0===r||null===(r=r[e])||void 0===r?void 0:r[t],n,a):l}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const a=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let s=[e,t];n&&(s=s.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(s=e.split("."),r=t,t=s[1]),this.addNamespaces(t),Ii(this.data,s,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in n)(Ti(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),r=n,n=t,t=s[1]),this.addNamespaces(t);let o=Fi(this.data,s)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?zi(o,n,i):o=We(We({},o),n),Ii(this.data,s,o),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var $i={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach((e=>{var a,s;t=null!==(a=null===(s=this.processors[e])||void 0===s?void 0:s.process(t,n,r,i))&&void 0!==a?a:t})),t}};const Zi={},ea=e=>!Ti(e)&&"boolean"!==typeof e&&"number"!==typeof e;class ta extends Xi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Yi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){const t=We({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}});if(null==e)return!1;const n=this.resolve(e,t);return void 0!==(null===n||void 0===n?void 0:n.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const r=Wi.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const i=Hi.getRegExp("(".concat(r.map((e=>"?"===e?"\\?":e)).join("|"),")"));let a=!i.test(e);if(!a){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(a=!0)}return a})(e,n,r);if(a&&!s){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:Ti(i)?[i]:i};const a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return{key:e,namespaces:Ti(i)?[i]:i}}translate(e,t,n){let r="object"===typeof t?We({},t):t;if("object"!==typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof options&&(r=We({},r)),r||(r={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:s,namespaces:o}=this.extractFromKey(e[e.length-1],r),l=o[o.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const d=r.lng||this.language,u=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null===d||void 0===d?void 0:d.toLowerCase()))return u?i?{res:"".concat(l).concat(c).concat(s),usedKey:s,exactUsedKey:s,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:"".concat(l).concat(c).concat(s):i?{res:s,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:s;const h=this.resolve(e,r);let p=null===h||void 0===h?void 0:h.res;const m=(null===h||void 0===h?void 0:h.usedKey)||s,f=(null===h||void 0===h?void 0:h.exactUsedKey)||s,g=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,b=void 0!==r.count&&!Ti(r.count),y=ta.hasDefaultValue(r),x=b?this.pluralResolver.getSuffix(d,r.count,r):"",w=r.ordinal&&b?this.pluralResolver.getSuffix(d,r.count,{ordinal:!1}):"",_=b&&!r.ordinal&&0===r.count,k=_&&r["defaultValue".concat(this.options.pluralSeparator,"zero")]||r["defaultValue".concat(x)]||r["defaultValue".concat(w)]||r.defaultValue;let j=p;v&&!p&&y&&(j=k);const N=ea(j),S=Object.prototype.toString.apply(j);if(!(v&&j&&N&&["[object Number]","[object Function]","[object RegExp]"].indexOf(S)<0)||Ti(g)&&Array.isArray(j))if(v&&Ti(g)&&Array.isArray(p))p=p.join(g),p&&(p=this.extendTranslation(p,e,r,n));else{let t=!1,i=!1;!this.isValidLookup(p)&&y&&(t=!0,p=k),this.isValidLookup(p)||(i=!0,p=s);const o=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:p,u=y&&k!==p&&this.options.updateMissing;if(i||t||u){if(this.logger.log(u?"updateKey":"missingKey",d,l,s,u?k:p),a){const e=this.resolve(s,We(We({},r),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{var i;const a=y&&n!==p?n:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,a,u,r):null!==(i=this.backendConnector)&&void 0!==i&&i.saveMissing&&this.backendConnector.saveMissing(e,l,t,a,u,r),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,r);_&&r["defaultValue".concat(this.options.pluralSeparator,"zero")]&&t.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&t.push("".concat(this.options.pluralSeparator,"zero")),t.forEach((t=>{n([e],s+t,r["defaultValue".concat(t)]||k)}))})):n(e,s,k))}p=this.extendTranslation(p,e,r,h,n),i&&p===s&&this.options.appendNamespaceToMissingKey&&(p="".concat(l).concat(c).concat(s)),(i||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l).concat(c).concat(s):s,t?p:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,j,We(We({},r),{},{ns:o})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");return i?(h.res=e,h.usedParams=this.getUsedParamsDetails(r),h):e}if(a){const e=Array.isArray(j),t=e?[]:{},n=e?f:m;for(const i in j)if(Object.prototype.hasOwnProperty.call(j,i)){const e="".concat(n).concat(a).concat(i);t[i]=y&&!p?this.translate(e,We(We({},r),{},{defaultValue:ea(k)?k[i]:void 0},{joinArrays:!1,ns:o})):this.translate(e,We(We({},r),{joinArrays:!1,ns:o})),t[i]===e&&(t[i]=j[i])}p=t}}return i?(h.res=p,h.usedParams=this.getUsedParamsDetails(r),h):p}extendTranslation(e,t,n,r,i){var a,s=this;if(null!==(a=this.i18nFormat)&&void 0!==a&&a.parse)e=this.i18nFormat.parse(e,We(We({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){var o;n.interpolation&&this.interpolator.init(We(We({},n),{interpolation:We(We({},this.options.interpolation),n.interpolation)}));const a=Ti(e)&&(void 0!==(null===n||void 0===n||null===(o=n.interpolation)||void 0===o?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(a){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let c=n.replace&&!Ti(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=We(We({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language||r.usedLng,n),a){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(null===i||void 0===i?void 0:i[0])!==r[0]||n.context?s.translate(...r,t):(s.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null)}),n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=Ti(l)?[l]:l;return null!=e&&null!==c&&void 0!==c&&c.length&&!1!==n.applyPostProcessor&&(e=$i.handle(c,e,t,this.options&&this.options.postProcessPassResolved?We({i18nResolved:We(We({},r),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e){let t,n,r,i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ti(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,s),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==s.count&&!Ti(s.count),u=d&&!s.ordinal&&0===s.count,h=void 0!==s.context&&(Ti(s.context)||"number"===typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);c.forEach((e=>{var o,c;this.isValidLookup(t)||(a=e,Zi["".concat(p[0],"-").concat(e)]||null===(o=this.utils)||void 0===o||!o.hasLoadedNamespace||null!==(c=this.utils)&&void 0!==c&&c.hasLoadedNamespace(a)||(Zi["".concat(p[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((n=>{var a;if(this.isValidLookup(t))return;i=n;const o=[l];if(null!==(a=this.i18nFormat)&&void 0!==a&&a.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,n,e,s);else{let e;d&&(e=this.pluralResolver.getSuffix(n,s.count,s));const t="".concat(this.options.pluralSeparator,"zero"),r="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(d&&(o.push(l+e),s.ordinal&&0===e.indexOf(r)&&o.push(l+e.replace(r,this.options.pluralSeparator)),u&&o.push(l+t)),h){const n="".concat(l).concat(this.options.contextSeparator).concat(s.context);o.push(n),d&&(o.push(n+e),s.ordinal&&0===e.indexOf(r)&&o.push(n+e.replace(r,this.options.pluralSeparator)),u&&o.push(n+t))}}let c;for(;c=o.pop();)this.isValidLookup(t)||(r=c,t=this.getResource(n,e,c,s))})))}))})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:a}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){var r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!==(r=this.i18nFormat)&&void 0!==r&&r.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ti(e.replace);let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=We(We({},this.options.interpolation.defaultVariables),r)),!n){r=We({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class na{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Yi.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Gi(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Gi(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ti(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(He){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find((e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),Ti(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return Ti(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):Ti(e)&&i(this.formatLanguageCode(e)),n.forEach((e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))})),r}}const ra={zero:0,one:1,two:2,few:3,many:4,other:5},ia={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Yi.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Gi("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:r})}catch(s){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ia;if(!e.match(/-|_/))return ia;const n=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(n,t)}return this.pluralRulesCache[i]=a,a}needsPlural(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(null===(t=r)||void 0===t?void 0:t.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>"".concat(t).concat(e)))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort(((e,t)=>ra[e]-ra[t])).map((e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(r.select(t)):(this.logger.warn("no plural rule found for: ".concat(e)),this.getSuffix("dev",t,n))}}const sa=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=((e,t,n)=>{const r=Fi(e,n);return void 0!==r?r:Fi(t,n)})(e,t,n);return!a&&i&&Ti(n)&&(a=Vi(e,n,r),void 0===a&&(a=Vi(t,n,r))),a},oa=e=>e.replace(/\$/g,"$$$$");class la{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Yi.create("interpolator"),this.options=t,this.format=(null===t||void 0===t||null===(e=t.interpolation)||void 0===e?void 0:e.format)||(e=>e),this.init(t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:s,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:f,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:Ui,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?qi(i):a||"{{",this.suffix=s?qi(s):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?qi(u):h||qi("$t("),this.nestingSuffix=p?qi(p):m||qi(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null===e||void 0===e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix))}interpolate(e,t,n,r){var i;let a,s,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const i=sa(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,We(We(We({},r),t),{},{interpolationkey:e})):i}const i=e.split(this.formatSeparator),a=i.shift().trim(),s=i.join(this.formatSeparator).trim();return this.format(sa(t,l,a,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,We(We(We({},r),t),{},{interpolationkey:a}))};this.resetRegExp();const d=(null===r||void 0===r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,u=void 0!==(null===r||void 0===r||null===(i=r.interpolation)||void 0===i?void 0:i.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>oa(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?oa(this.escape(e)):oa(e)}].forEach((t=>{for(o=0;a=t.regex.exec(e);){const n=a[1].trim();if(s=c(n),void 0===s)if("function"===typeof d){const t=d(e,a,r);s=Ti(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))s="";else{if(u){s=a[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),s=""}else Ti(s)||this.useRawValueToEscape||(s=Pi(s));const i=t.safeValue(s);if(e=e.replace(a[0],i),u?(t.regex.lastIndex+=s.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),e}nest(e,t){let n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(e,t)=>{var n;const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const a=e.split(new RegExp("".concat(r,"[ ]*{")));let s="{".concat(a[1]);e=a[0],s=this.interpolate(s,i);const o=s.match(/'/g),l=s.match(/"/g);((null!==(n=null===o||void 0===o?void 0:o.length)&&void 0!==n?n:0)%2===0&&!l||l.length%2!==0)&&(s=s.replace(/'/g,'"'));try{i=JSON.parse(s),t&&(i=We(We({},t),i))}catch(He){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),He),"".concat(e).concat(r).concat(s)}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];i=We({},a),i=i.replace&&!Ti(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),o=e,l=!0}if(r=t(s.call(this,n[1].trim(),i),i),r&&n[0]===e&&!Ti(r))return r;Ti(r)||(r=Pi(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=o.reduce(((e,t)=>this.format(e,t,a.lng,We(We({},a),{},{interpolationkey:n[1].trim()}))),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const ca=e=>{const t={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a=We(We({},a),{},{[i.interpolationkey]:void 0}));const s=r+JSON.stringify(a);let o=t[s];return o||(o=e(Gi(r),i),t[s]=o),o(n)}},da=e=>(t,n,r)=>e(Gi(n),r)(t);class ua{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Yi.create("formatter"),this.options=e,this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?ca:da;this.formats={number:n(((e,t)=>{const n=new Intl.NumberFormat(e,We({},t));return e=>n.format(e)})),currency:n(((e,t)=>{const n=new Intl.NumberFormat(e,We(We({},t),{},{style:"currency"}));return e=>n.format(e)})),datetime:n(((e,t)=>{const n=new Intl.DateTimeFormat(e,We({},t));return e=>n.format(e)})),relativetime:n(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,We({},t));return e=>n.format(e,t.range||"day")})),list:n(((e,t)=>{const n=new Intl.ListFormat(e,We({},t));return e=>n.format(e)}))}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ca(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find((e=>e.indexOf(")")>-1))){const e=i.findIndex((e=>e.indexOf(")")>-1));i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}const a=i.reduce(((e,t)=>{const{formatName:i,formatOptions:a}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),a=t.trim();n[a]||(n[a]=i),"false"===i&&(n[a]=!1),"true"===i&&(n[a]=!0),isNaN(i)||(n[a]=parseInt(i,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{var s;const o=(null===r||void 0===r||null===(s=r.formatParams)||void 0===s?void 0:s[r.interpolationkey])||{},l=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[i](e,l,We(We(We({},a),r),o))}catch(o){this.logger.warn(o)}return t}return this.logger.warn("there was no format function for ".concat(i)),e}),e);return a}}class ha extends Xi{constructor(e,t,n){var r,i;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=Yi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],null===(r=this.backend)||void 0===r||null===(i=r.init)||void 0===i||i.call(r,n,a.backend,a)}queueLoad(e,t,n,r){const i={},a={},s={},o={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const s="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===a[s]&&(a[s]=!0):(this.state[s]=1,r=!1,void 0===a[s]&&(a[s]=!0),void 0===i[s]&&(i[s]=!0),void 0===o[t]&&(o[t]=!0)))})),r||(s[e]=!0)})),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const r=e.split("|"),i=r[0],a=r[1];t&&this.emit("failedLoading",i,a,t),!t&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const s={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:r,k:i}=Li(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],a),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===s[e][t]&&(s[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:a});this.readingCalls++;const s=(s,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&o&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*i,a)}),i):a(s,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,s);try{const n=o(e,t);n&&"function"===typeof n.then?n.then((e=>s(null,e))).catch(s):s(null,n)}catch(l){s(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Ti(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ti(t)&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,((n,a)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(i," for language ").concat(r," failed"),n),!n&&a&&this.logger.log("".concat(t,"loaded namespace ").concat(i," for language ").concat(r),a),this.loaded(e,n,a)}))}saveMissing(e,t,n,r,i){var a,s,o;let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(null===(a=this.services)||void 0===a||null===(a=a.utils)||void 0===a||!a.hasLoadedNamespace||null!==(s=this.services)&&void 0!==s&&null!==(s=s.utils)&&void 0!==s&&s.hasLoadedNamespace(t)){if(void 0!==n&&null!==n&&""!==n){if(null!==(o=this.backend)&&void 0!==o&&o.create){const a=We(We({},l),{},{isUpdate:i}),s=this.backend.create.bind(this.backend);if(s.length<6)try{let i;i=5===s.length?s(e,t,n,r,a):s(e,t,n,r),i&&"function"===typeof i.then?i.then((e=>c(null,e))).catch(c):c(null,i)}catch(d){c(d)}else s(e,t,n,r,c,a)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}else this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const pa=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),Ti(e[1])&&(t.defaultValue=e[1]),Ti(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ma=e=>{var t,n;return Ti(e.ns)&&(e.ns=[e.ns]),Ti(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Ti(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null===(t=e.supportedLngs)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"===typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},fa=()=>{};class ga extends Xi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=ma(e),this.services={},this.logger=Yi,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),null==t.defaultNS&&t.ns&&(Ti(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=pa();this.options=We(We(We({},r),this.options),ma(t)),this.options.interpolation=We(We({},r.interpolation),this.options.interpolation),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?Yi.init(i(this.modules.logger),this.options):Yi.init(null,this.options),t=this.modules.formatter?this.modules.formatter:ua;const n=new na(this.options);this.store=new Ji(this.options.resources,this.options);const a=this.services;a.logger=Yi,a.resourceStore=this.store,a.languageUtils=n,a.pluralResolver=new aa(n,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(a.formatter=i(t),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new la(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new ha(i(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.languageDetector&&(a.languageDetector=i(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=i(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new ta(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=fa),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const a=Oi(),s=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),a}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fa;const n=Ti(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){var r,i;if("cimode"===(null===n||void 0===n?void 0:n.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],a=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)a(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>a(e)))}null===(r=this.options.preload)||void 0===r||null===(i=r.forEach)||void 0===i||i.call(r,(e=>a(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=Oi();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=fa),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&$i.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=Oi();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},a=(a,s)=>{s?this.isLanguageChangingTo===e&&(i(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,r.resolve((function(){return n.t(...arguments)})),t&&t(a,(function(){return n.t(...arguments)}))},s=t=>{e||t||!this.services.languageDetector||(t=[]);const n=Ti(t)?t:t&&t[0],r=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(Ti(t)?[t]:t);var s,o;r&&(this.language||i(r),this.translator.language||this.translator.changeLanguage(r),null===(s=this.services.languageDetector)||void 0===s||null===(o=s.cacheUserLanguage)||void 0===o||o.call(s,r));this.loadResources(r,(e=>{a(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const i=function(e,t){let a;if("object"!==typeof t){for(var s=arguments.length,o=new Array(s>2?s-2:0),l=2;l<s;l++)o[l-2]=arguments[l];a=r.options.overloadTranslationOptionHandler([e,t].concat(o))}else a=We({},t);a.lng=a.lng||i.lng,a.lngs=a.lngs||i.lngs,a.ns=a.ns||i.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||n||i.keyPrefix);const c=r.options.keySeparator||".";let d;return d=a.keyPrefix&&Array.isArray(e)?e.map((e=>"".concat(a.keyPrefix).concat(c).concat(e))):a.keyPrefix?"".concat(a.keyPrefix).concat(c).concat(e):e,r.t(d,a)};return Ti(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null===(e=this.translator)||void 0===e?void 0:e.translate(...n)}exists(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null===(e=this.translator)||void 0===e?void 0:e.exists(...n)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const a=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,a);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!a(n,e)||r&&!a(i,e)))}loadNamespaces(e,t){const n=Oi();return this.options.ns?(Ti(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Oi();Ti(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter((e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return i.length?(this.options.preload=r.concat(i),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null===(t=this.languages)||void 0===t?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";const r=(null===(n=this.services)||void 0===n?void 0:n.languageUtils)||new na(pa());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new ga(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fa;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=We(We(We({},this.options),e),{isClone:!0}),i=new ga(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));if(["store","services","language"].forEach((e=>{i[e]=this[e]})),i.services=We({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const e=Object.keys(this.store.data).reduce(((e,t)=>(e[t]=We({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce(((n,r)=>(n[r]=We({},e[t][r]),n)),e[t]),e)),{});i.store=new Ji(e,r),i.services.resourceStore=i.store}return i.translator=new ta(i.services,r),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)})),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const va=ga.createInstance();va.createInstance=ga.createInstance;va.createInstance,va.dir,va.init,va.loadResources,va.reloadResources,va.use,va.changeLanguage,va.getFixedT,va.t,va.exists,va.setDefaultNamespace,va.hasLoadedNamespace,va.loadNamespaces,va.loadLanguages;n(7413);Object.create(null);const ba={},ya=(e,t,n,r)=>{ka(n)&&ba[n]||(ka(n)&&(ba[n]=new Date),((e,t,n,r)=>{var i,a,s;const o=[n,We({code:t},r||{})];if(null!==e&&void 0!==e&&null!==(i=e.services)&&void 0!==i&&null!==(i=i.logger)&&void 0!==i&&i.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);ka(o[0])&&(o[0]="react-i18next:: ".concat(o[0])),null!==e&&void 0!==e&&null!==(a=e.services)&&void 0!==a&&null!==(a=a.logger)&&void 0!==a&&a.warn?e.services.logger.warn(...o):null!==(s=console)&&void 0!==s&&s.warn&&console.warn(...o)})(e,t,n,r))},xa=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout((()=>{e.off("initialized",n)}),0),t()};e.on("initialized",n)}},wa=(e,t,n)=>{e.loadNamespaces(t,xa(e,n))},_a=(e,t,n,r)=>{if(ka(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return wa(e,n,r);n.forEach((t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,xa(e,r))},ka=e=>"string"===typeof e,ja=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Na={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Sa=e=>Na[e];let Ea={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(ja,Sa)};let Ca;const Aa={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ea=We(We({},Ea),e)}(e.options.react),(e=>{Ca=e})(e)}},Ta=(0,i.createContext)();class Oa{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Pa=(e,t,n,r)=>e.getFixedT(t,n,r),Ma=function(e){var t,n,r,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:o}=s,{i18n:l,defaultNS:c}=(0,i.useContext)(Ta)||{},d=o||l||Ca;if(d&&!d.reportNamespaces&&(d.reportNamespaces=new Oa),!d){ya(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return ka(t)?t:"object"===typeof(n=t)&&null!==n&&ka(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}null!==(t=d.options.react)&&void 0!==t&&t.wait&&ya(d,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u=We(We(We({},Ea),d.options.react),s),{useSuspense:h,keyPrefix:p}=u;let m=e||c||(null===(n=d.options)||void 0===n?void 0:n.defaultNS);m=ka(m)?[m]:m||["translation"],null===(r=(a=d.reportNamespaces).addUsedNamespaces)||void 0===r||r.call(a,m);const f=(d.isInitialized||d.initializedStoreOnce)&&m.every((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{var i;if((null===(i=n.bindI18n)||void 0===i?void 0:i.indexOf("languageChanging"))>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(ya(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,d,u))),g=((e,t,n,r)=>(0,i.useCallback)(Pa(e,t,n,r),[e,t,n,r]))(d,s.lng||null,"fallback"===u.nsMode?m:m[0],p),v=()=>g,b=()=>Pa(d,s.lng||null,"fallback"===u.nsMode?m:m[0],p),[y,x]=(0,i.useState)(v);let w=m.join();s.lng&&(w="".concat(s.lng).concat(w));const _=((e,t)=>{const n=(0,i.useRef)();return(0,i.useEffect)((()=>{n.current=t?n.current:e}),[e,t]),n.current})(w),k=(0,i.useRef)(!0);(0,i.useEffect)((()=>{const{bindI18n:e,bindI18nStore:t}=u;k.current=!0,f||h||(s.lng?_a(d,s.lng,m,(()=>{k.current&&x(b)})):wa(d,m,(()=>{k.current&&x(b)}))),f&&_&&_!==w&&k.current&&x(b);const n=()=>{k.current&&x(b)};return e&&(null===d||void 0===d||d.on(e,n)),t&&(null===d||void 0===d||d.store.on(t,n)),()=>{k.current=!1,d&&(null===e||void 0===e||e.split(" ").forEach((e=>d.off(e,n)))),t&&d&&t.split(" ").forEach((e=>d.store.off(e,n)))}}),[d,w]),(0,i.useEffect)((()=>{k.current&&f&&x(v)}),[d,p,f]);const j=[y,d,f];if(j.t=y,j.i18n=d,j.ready=f,f)return j;if(!f&&!h)return j;throw new Promise((e=>{s.lng?_a(d,s.lng,m,(()=>e())):wa(d,m,(()=>e()))}))};const{slice:Da,forEach:Ra}=[];const La=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ia={create(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"},r=encodeURIComponent(t);let i="".concat(e,"=").concat(r);if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");i+="; Max-Age=".concat(Math.floor(e))}if(n.domain){if(!La.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain=".concat(n.domain)}if(n.path){if(!La.test(n.path))throw new TypeError("option path is invalid");i+="; Path=".concat(n.path)}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i}(e,t,i)},read(e){const t="".concat(e,"="),n=document.cookie.split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var Fa={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!==typeof document)return Ia.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:a}=t;n&&"undefined"!==typeof document&&Ia.create(n,e,r,i,a)}},za={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!==typeof window){var r;let{search:e}=window.location;!window.location.search&&(null===(r=window.location.hash)||void 0===r?void 0:r.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const i=e.substring(1).split("&");for(let r=0;r<i.length;r++){const e=i[r].indexOf("=");if(e>0){i[r].substring(0,e)===n&&(t=i[r].substring(e+1))}}}return t}},qa={name:"hash",lookup(e){let t,{lookupHash:n,lookupFromHashIndex:r}=e;if("undefined"!==typeof window){const{hash:e}=window.location;if(e&&e.length>2){const a=e.substring(1);if(n){const e=a.split("&");for(let r=0;r<e.length;r++){const i=e[r].indexOf("=");if(i>0){e[r].substring(0,i)===n&&(t=e[r].substring(i+1))}}}if(t)return t;if(!t&&r>-1){var i;const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return;return null===(i=t["number"===typeof r?r:0])||void 0===i?void 0:i.replace("/","")}}}return t}};let Ba=null;const Ua=()=>{if(null!==Ba)return Ba;try{if(Ba="undefined"!==typeof window&&null!==window.localStorage,!Ba)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(He){Ba=!1}return Ba};var Wa={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Ua())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Ua()&&window.localStorage.setItem(n,e)}};let Ha=null;const Va=()=>{if(null!==Ha)return Ha;try{if(Ha="undefined"!==typeof window&&null!==window.sessionStorage,!Ha)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(He){Ha=!1}return Ha};var Ga={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Va())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&Va()&&window.sessionStorage.setItem(n,e)}},Qa={name:"navigator",lookup(e){const t=[];if("undefined"!==typeof navigator){const{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let i=0;i<e.length;i++)t.push(e[i]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},Ka={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const r=n||("undefined"!==typeof document?document.documentElement:null);return r&&"function"===typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},Ya={name:"path",lookup(e){var t;let{lookupFromPathIndex:n}=e;if("undefined"===typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null===(t=r["number"===typeof n?n:0])||void 0===t?void 0:t.replace("/","")}},Xa={name:"subdomain",lookup(e){var t;let{lookupFromSubdomainIndex:n}=e;const r="number"===typeof n?n+1:1,i="undefined"!==typeof window&&(null===(t=window.location)||void 0===t||null===(t=t.hostname)||void 0===t?void 0:t.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[r]}};let Ja=!1;try{document.cookie,Ja=!0}catch(He){}const $a=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ja||$a.splice(1,1);class Za{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return Ra.call(Da.call(arguments,1),(t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:$a,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"===typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Fa),this.addDetector(za),this.addDetector(Wa),this.addDetector(Ga),this.addDetector(Qa),this.addDetector(Ka),this.addDetector(Ya),this.addDetector(Xa),this.addDetector(qa)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach((e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"===typeof n&&(n=[n]),n&&(t=t.concat(n))}})),t=t.filter((e=>{return void 0!==e&&null!==e&&!("string"===typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some((e=>e.test(t))));var t})).map((e=>this.options.convertDetectedLanguage(e))),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)})))}}Za.type="languageDetector";const es={en:{common:JSON.parse('{"navigation":{"dashboard":"Control Panel","profile":"Crew Record","logout":"Logout","training":"Training Program","quiz":"Assessment"},"buttons":{"continue":"Continue","start":"Start","finish":"Finish","next":"Next","previous":"Previous","save":"Save","cancel":"Cancel","submit":"Submit","upload":"Upload","download":"Download","retry":"Retry","review":"Review","approve":"Approve","reject":"Reject","edit":"Edit","delete":"Delete","view":"View","close":"Close","confirm":"Confirm","back":"Back","loading":"Loading...","locked":"Locked","take_quiz":"Take Quiz","view_results":"View Results","sync_now":"Sync Now","back_to_dashboard":"Back to Control Panel"},"status":{"completed":"Completed","in_progress":"In Progress","not_started":"Not Started","pending":"Pending","active":"Active","inactive":"Inactive","passed":"Passed","failed":"Failed","approved":"Approved","rejected":"Rejected","overdue":"Overdue"},"forms":{"required":"This field is required","email_invalid":"Please enter a valid email address","password_min_length":"Password must be at least {{min}} characters","file_too_large":"File size exceeds the maximum allowed limit","file_invalid_type":"Invalid file type","min_length":"{{field}} must be at least {{min}} characters"},"time":{"hours":"hours","minutes":"minutes","days":"days","weeks":"weeks","due_in":"Due in {{time}}","overdue_by":"Overdue by {{time}}"},"progress":{"overall":"Overall Progress","completed_items":"{{completed}}/{{total}} items completed","percentage":"{{percentage}}%"},"errors":{"generic":"An error occurred. Please try again.","network":"Network error. Please check your connection.","unauthorized":"You are not authorized to perform this action.","not_found":"The requested resource was not found.","server_error":"Server error. Please try again later.","connection_restored":"Connection restored! You\'re back online.","session_expired":"Your session has expired. Please log in again.","access_denied":"Access denied. Contact your administrator if needed."},"success":{"saved":"Successfully saved","updated":"Successfully updated","deleted":"Successfully deleted","uploaded":"Successfully uploaded"},"admin":{"dashboard":"Admin Control Panel","templates":"PDF Templates","settings":"System Preferences","crew_members":"Crew Members","system_administration":"System Administration","welcome_back":"Welcome back, {{name}}","administrator":"Administrator","total_managers":"Total Managers","total_crew_members":"Total Crew Members","active_sessions":"Active Sessions","system_health":"System Health","overview":"Overview","managers":"Managers","audit_logs":"Audit Logs"},"manager":{"dashboard":"Manager Control Panel","crew_management":"Crew Management","quiz_reviews":"Quiz Reviews","onboarding_reviews":"Onboarding Reviews","certificates":"Certificates","add_crew":"Add New Crew Member","bulk_actions":"Bulk Actions","select_all":"Select All","deselect_all":"Deselect All","export_selected":"Export Selected","send_reminder":"Send Reminder","archive_selected":"Archive Selected","add_manager":"Add New Manager","edit_manager":"Edit Manager","create_manager":"Create Manager","update_manager":"Update Manager","creating":"Creating...","updating":"Updating...","first_name":"First Name","last_name":"Last Name","password":"Password","new_password":"New Password (optional)","password_requirements":"Password must be at least 8 characters with uppercase, lowercase, and number","password_leave_blank":"Leave blank to keep current password","manager_permissions":"Manager Permissions","permissions":"Permissions","permissions_default":"Default permissions will be assigned if none are selected","permissions_selected":"{{count}} permission(s) selected","email_cannot_change":"Email cannot be changed","loading_manager":"Loading manager data...","manager_created":"Manager created successfully","manager_updated":"Manager updated successfully","failed_create":"Failed to create manager","failed_update":"Failed to update manager","permission_labels":{"view_crew_list":"View Crew List","manage_crew_members":"Manage Crew Members","review_quiz_results":"Review Quiz Results","approve_training_completion":"Approve Training","view_certificates":"View Certificates","regenerate_certificates":"Regenerate Certificates","view_compliance_reports":"View Compliance Reports","export_training_data":"Export Training Data","content_edit":"Content Management"},"permission_descriptions":{"view_crew_list":"View all crew members","manage_crew_members":"Create, edit, and manage crew members","review_quiz_results":"View and review training quiz results","approve_training_completion":"Approve training completion and issue certificates","view_certificates":"View issued certificates","regenerate_certificates":"Regenerate and reissue certificates","view_compliance_reports":"Access compliance and training reports","export_training_data":"Export training data and reports","content_edit":"Edit training content, phases, and quiz questions"}},"crew":{"member":"Crew Member","members":"Crew Members","onboarding":"Crew Onboarding","training_items":"Training Items","phase_overview":"Phase Overview"},"common":{"status":"Status","not_set":"Not set"},"general":{"search":"Search","filter":"Filter","refresh":"Refresh","actions":"Actions","details":"Details","overview":"Overview","all_rights_reserved":"All rights reserved","safety_management_system":"Safety Management System","burando_maritime":"Burando Maritime","maritime_services":"Maritime Services","completion_rate":"Completion Rate","overall_completion_rate":"Overall Completion Rate","pending_reviews":"Pending Reviews","recent_activity":"Recent Activity","no_activity":"No recent activity","compliance_metrics":"Compliance Metrics","item":"Item","of":"of"},"profile":{"title":"Crew Record","my_profile":"My Crew Record","personal_information":"Personal information and contact details","personal_info":"Personal Information","contact_info":"Contact Information","work_info":"Work Information","full_name":"Full Name","email":"Email Address","email_address":"Email Address","phone":"Phone Number","phone_number":"Phone Number","role":"Role","position":"Position","vessel":"Vessel Assignment","boarding_date":"Expected Boarding Date","emergency_contact":"Emergency Contact","contact_name":"Contact Name","contact_phone":"Contact Phone","vessel_assignment":"Vessel Assignment","start_date":"Start Date","loading_profile":"Loading profile...","preferences":"Preferences","language_preference":"Language Preference","language_description":"Choose your preferred language for the interface and email communications","language_updated":"Language preference updated successfully","language_update_failed":"Failed to update language preference","updating_language":"Updating language preference"},"error_boundary":{"title":"Something went wrong","message":"We\'re sorry, but something unexpected happened. Please try refreshing the page.","refresh_button":"Refresh Page"},"loading":{"default":"Loading...","profile":"Loading profile...","content":"Loading content...","quiz":"Loading quiz...","saving":"Saving...","uploading":"Uploading..."},"session":{"expiring_soon":"Session Expiring Soon!","warning":"Session Warning","expires_in":"Your session will expire in {{time}}. Please save your work.","refresh_session":"Refresh Session","logout":"Logout Now"},"auto_save":{"saving":"Saving...","saved":"Saved","save_failed":"Save failed","unsaved_changes":"Unsaved changes","saved_time_ago":"Saved {{time}} ago","just_now":"just now"},"quiz_errors":{"loading_failed":"Error Loading Quiz","failed_message":"Failed to load the quiz for Phase {{phase}}","try_again":"Try Again","unknown_error":"Unknown error","error":"Error"},"audit_log":{"title":"Audit Logs","action":"Action","all_actions":"All Actions","user":"User","timestamp":"Timestamp","details":"Details","filters":"Filters","from_date":"From Date","to_date":"To Date","resource_type":"Resource Type","failed_to_load":"Failed to load audit logs"},"content_management":{"title":"Content Management","description":"Manage training phases and quiz content","access_denied":{"title":"Access Denied","message":"You don\'t have permission to edit training content. Contact your administrator if you need access."},"migration":{"title":"Database Migration Required","message":"The content management tables have not been created yet. Please run the migration:","filename":"20250602000002_content_management_system.sql"},"tabs":{"training":"Training Phases","quizzes":"Quizzes"},"training":{"title":"Training Phases","create":"Create Training Phase","create_button":"+ Create Training Phase","edit":"Edit","delete":"Delete","delete_confirm":"Are you sure you want to delete this training phase? This action cannot be undone.","delete_success":"Training phase deleted successfully!","delete_failed":"Failed to delete training phase. Please try again.","untitled":"Untitled Phase","no_description":"No description","items_count":"{{count}} items","time_limit":"{{limit}}h limit","empty":{"title":"No training phases yet","message":"Create your first training phase to get started or load the default training content.","load_default":"Load Default Content","load_confirm":"This will load the default training content. Continue?","load_success":"Loaded {{phases}} phases and {{quizzes}} quizzes","load_failed":"Failed to load initial data"}},"quizzes":{"title":"Quizzes","create":"Create Quiz","create_button":"+ Create New Quiz","edit":"Edit","delete":"Delete","delete_confirm":"Are you sure you want to delete this quiz? This action cannot be undone.","delete_success":"Quiz deleted successfully!","delete_failed":"Failed to delete quiz. Please try again.","save_failed":"Failed to save quiz. Please try again.","untitled":"Untitled Quiz","no_description":"No description","questions_count":"{{count}} questions","time_limit":"{{limit}}min","passing_score":"{{score}}% pass","empty":{"title":"No quizzes yet","message":"Create your first quiz to get started."}}},"actions":{"preview":"Preview","edit":"Edit","delete":"Delete","view":"View","download":"Download","save":"Save","cancel":"Cancel"},"roles":{"admin":"Administrator","manager":"Manager","crew":"Crew Member"},"pdf_template":{"failed_load":"Failed to load template","created":"Template created successfully!","saved":"Template saved successfully!","failed_save":"Failed to save template","failed_preview":"Failed to generate preview","close_confirm":"Are you sure you want to close? Any unsaved changes will be lost."},"translation":{"translateWorkflow":"Translate Workflow","translating":"Translating...","multilingualContent":"Multilingual Content","progress":"Translation Progress","noSourceContent":"No source content to translate","workflowTranslated":"Workflow translated to {{count}} languages","failed":"Translation failed","success":"Translation successful","batchSuccess":"Batch translation completed for {{count}} languages","batchFailed":"Batch translation failed","error":"Translation error: {{error}}","noSourceText":"No source text to translate","translatedBy":"Translated by {{method}}","maritimeEnhanced":"Maritime Enhanced","humanReviewed":"Human Reviewed","confidence":"Confidence","improve":"Improve","markReviewed":"Mark as Reviewed","markedReviewed":"Marked as reviewed","aiTranslate":"AI Translate","translateAll":"Translate All","preview":"Translation Preview","notTranslated":"Not translated","enterContent":"Enter content..."},"mobile_warning":{"title":"Mobile Device Detected","subtitle":"This page works best on desktop","desktop_required":"This editor requires a desktop computer with a larger screen for the best experience. Some features may not work properly on mobile devices.","desktop_recommended":"While this page works on mobile, we recommend using a desktop computer for the best experience.","limitations_title":"Mobile Limitations:","limitation_1":"Limited drag & drop functionality","limitation_2":"Smaller workspace area","limitation_3":"Touch navigation challenges","limitation_4":"Some features may not work","proceed":"Continue Anyway","dismiss":"I Understand","help_text":"For the best experience, please use a computer with a screen width of at least 768px."}}'),auth:JSON.parse('{"title":"\ud83d\udea2 Welcome to Burando Maritime Training","subtitle":"Professional Maritime Training Platform","tagline":"New to the platform? Enter your email address and we\'ll send you a secure login link.","copyright":"\xa9 2024 Burando Maritime Services. All rights reserved.","login_methods":{"title":"Crew Member Access","subtitle":"Enter your email to get started with your training program","magic_link":{"title":"Login Link","description":"For crew members - secure email authentication","token_label":"Enter Your Login Code","token_placeholder":"Paste your code here...","help_title":"Need help?","help_text":"Check your email for an invitation from Burando Maritime. Click the secure login link, and your code will be filled automatically.","button":"Access Training Program","loading":"Verifying Login Link..."},"request":{"title":"Get Started","description":"Enter your email address and we\'ll send you a secure login link","email_label":"Your Email Address","email_placeholder":"Enter your email address","help_title":"What happens next?","help_text":"You\'ll receive a secure login link via email within moments. Click the link to access your training program instantly.","note":"Use the same email address that was registered by your manager.","button":"Get Started","loading":"Sending Login Link...","alternative_text":"Already have a login code?","manual_token_button":"Enter Login Code","admin_button":"System Administrator"},"token":{"title":"\ud83d\udce7 Have a Login Code?","description":"If your email link didn\'t work, you can enter your email and login code below","email_label":"Your Email Address","email_placeholder":"Enter your email address","token_label":"Login Code","token_placeholder":"Paste your login code here (e.g., ABC123XYZ...)","button":"Continue","loading":"Verifying Login Code...","back_button":"\u2190 Back to Get Started"},"admin":{"title":"\u2699\ufe0f System Administrator","description":"For system administrators only","email_label":"Administrator Email","email_placeholder":"admin@shipdocs.app","password_label":"Administrator Password","password_placeholder":"Enter secure password","button":"Administrator Login","loading":"Authenticating...","security_notice":"\ud83d\udd12 This is a secure administrative area. All access attempts are logged.","back_button":"\u2190 Back to Crew Login"}},"messages":{"welcome_back":"Welcome back, {{name}}!","welcome":"Welcome aboard, {{name}}!","magic_link_expired":"This login code has expired. Please request a new one.","magic_link_sent":"Login link sent! Check your email for the secure login link.","login_failed":"We couldn\'t log you in. Please check your email for a new login link.","invalid_credentials":"We couldn\'t log you in. Please check your email for a new login link.","token_required":"Login code is required","email_required":"Email is required","password_required":"Password is required","network_error":"Connection problem. Please check your internet and try again."},"validation":{"email_invalid":"Please enter a valid email address","email_required":"Email address is required","token_required":"Login code is required","token_min_length":"Login code must be at least 10 characters","admin_email_required":"Administrator email is required","admin_password_required":"Administrator password is required","admin_password_min_length":"Password must be at least 8 characters"}}'),dashboard:JSON.parse('{"crew":{"welcome":"Welcome, {{name}}!","subtitle":"Continue your onboarding training journey","vessel":"Vessel","position":"Position","overall_progress":"Overall Progress","current_training":"Current Training","items_completed":"Items Completed","quiz_results":"Quiz Results","my_profile":"My Profile","loading_dashboard":"Loading your dashboard...","stats":{"phases_completed":"Phases Completed","items_completed":"Items Completed","quizzes_passed":"Quizzes Passed","status":"Status"},"training_phases":{"title":"Training Phases","subtitle":"Complete each phase in order to progress","steps_label":"Steps","quiz_label":"Quiz","quiz_required":"Quiz Required","quiz_passed":"Quiz Passed ({{score}}%)","quiz_failed":"Quiz Failed ({{score}}%) - Retake Required","quiz_approved":"Quiz Approved ({{score}}%)","awaiting_review":"Awaiting Review ({{score}}%)","take_quiz":"Take Quiz","view_results":"View Results","retake_quiz":"Retake Quiz"},"next_steps":{"title":"Next Steps","complete_training":"Complete your current training phase","take_quiz":"Take the quiz for Phase {{phase}}","wait_approval":"Wait for manager approval of your quiz results","all_complete":"Congratulations! You have completed all training phases.","continue_training":"Continue Your Training","phase1_next":"Start with Phase 1: Immediate Safety Training to begin your onboarding journey.","phase2_next":"Move on to Phase 2: Operational Training to learn about vessel operations.","phase3_next":"Complete Phase 3: Advanced Training & Policies to finish your onboarding."},"completion":{"congratulations":"Congratulations! \ud83c\udf89","all_complete_message":"You have successfully completed all phases of the onboarding training program. Your completion certificate has been generated and sent to HR.","items_completed_count":"{{completed}}/{{total}} items completed","overdue_by_days":"Overdue by {{days}} days","due_in_days":"Due in {{days}} days","status_not_started":"not started","status_in_progress":"in progress","status_completed":"completed"}},"manager":{"welcome":"Manager Dashboard","subtitle":"Manage crew onboarding and training progress"}}'),training:JSON.parse('{"phase":"Phase","phases":{"phase1":{"title":"Immediate Safety Training","description":"Essential safety training to be completed within 24 hours of boarding","time_limit":"24 hours"},"phase2":{"title":"Nautical Training","description":"Comprehensive nautical procedures and vessel operations training","time_limit":"72 hours"},"phase3":{"title":"Advanced Safety & Environmental","description":"Advanced safety protocols and environmental compliance training","time_limit":"1 week"}},"items":{"meet_colleagues":"Meet colleagues + daily affairs on board","safety_equipment":"Safety equipment and emergency procedures","fire_safety":"Fire safety and firefighting equipment","emergency_procedures":"Emergency procedures and muster stations","personal_protective":"Personal protective equipment (PPE)","vessel_layout":"Vessel layout and restricted areas","communication":"Communication procedures and protocols","environmental":"Environmental protection procedures","cargo_operations":"Cargo operations and safety","navigation":"Navigation and bridge procedures","engine_room":"Engine room safety and procedures","maintenance":"Maintenance and repair procedures"},"categories":{"orientation":"Orientation","safety":"Safety","emergency":"Emergency Procedures","equipment":"Equipment","procedures":"Procedures","environmental":"Environmental","navigation":"Navigation","maintenance":"Maintenance"},"instructions":{"read_carefully":"Please read the following information carefully","complete_all":"Complete all training items in this phase","take_photos":"Take photos as proof of completion where required","ask_questions":"Ask your supervisor if you have any questions","safety_first":"Safety is our top priority - never skip safety procedures"},"completion":{"item_completed":"Training item completed","phase_completed":"Phase completed successfully","all_completed":"All training phases completed","certificate_ready":"Certificate ready for download","instructor_signature":"Instructor signature required","photo_required":"Photo proof required"},"navigation":{"previous_item":"Previous Item","next_item":"Next Item","back_to_phase":"Back to Phase Overview","mark_complete":"Mark as Complete","undo_complete":"Undo Completion"},"ui":{"time_spent":"Time Spent","minutes":"minutes","start_training":"Start Training","continue_training":"Continue Training","phase_complete":"Phase Complete","take_quiz_now":"Take Quiz Now","back_to_dashboard":"Back to Dashboard","congratulations":"Congratulations!","phase_completed_message":"You have successfully completed this training phase.","ready_for_quiz":"You are now ready to take the quiz for this phase.","loading_content":"Loading training content...","not_found_title":"Training Phase Not Found","not_found_message":"The requested training phase could not be loaded.","return_to_dashboard":"Return to Dashboard","training_progress":"Training Progress","time_limit":"Time Limit","total_items":"Total Items","completed":"Completed","remaining":"Remaining","phase_overview":"Phase Overview","quick_actions":"Quick Actions","excellent_work":"Excellent Work! Phase Complete!","outstanding_achievement":"Outstanding Achievement!","phase_completion_message":"You\'ve successfully completed all {{count}} training items for {{title}}!","dedication_message":"Your dedication to maritime safety training is commendable.","test_knowledge":"Ready to test your knowledge?","view_quiz_results_message":"You can review your quiz results or continue studying the materials.","auto_navigate_message":"Automatically proceeding to quiz in:","cancel_auto_nav":"Cancel auto-navigation","auto_nav_10_seconds":"Auto-navigate to quiz in 10 seconds","streamlined_flow_title":"Streamlined Training Flow","auto_complete_message":"This item will be automatically marked as complete when you click \\"Next\\". You can always undo completion if needed.","mark_complete_now":"Mark as Complete Now","mark_incomplete":"Mark as Incomplete","last_training_item":"Last training item!","take_final_quiz":"Take Final Quiz Now","complete_and_next":"Complete & Next","overview":"Overview","learning_objectives":"Learning Objectives","key_points":"Key Points to Remember","procedures":"Procedures","emergency_response_types":"Emergency Response Types","training_content_placeholder":"Detailed training content for \\"{{title}}\\" will be displayed here.","training_content":"Training Content"}}'),quiz:JSON.parse('{"title":"Phase {{phase}} Assessment","instructions":{"title":"Quiz Instructions","read_carefully":"Please read all questions carefully before answering","time_limit":"Time limit: {{minutes}} minutes","passing_score":"Passing score: {{score}}%","single_attempt":"You have one attempt per quiz session","save_progress":"Your progress is automatically saved","review_answers":"Review your answers before submitting","no_going_back":"You cannot change answers after submission"},"question_types":{"multiple_choice":"Multiple Choice","true_false":"True/False","file_upload":"File Upload","short_answer":"Short Answer","drag_drop":"Drag and Drop","fill_gaps":"Fill in the Gaps"},"navigation":{"question_progress":"Question {{current}} of {{total}}","previous_question":"Previous Question","next_question":"Next Question","submit_quiz":"Submit Quiz","review_quiz":"Review Quiz","start_quiz":"Start Quiz","retake_quiz":"Retake Quiz","ready_to_begin":"Ready to Begin?","time_limit_label":"Time Limit","questions_label":"Questions","passing_score_label":"Passing Score","questions_count":"{{count}} questions"},"file_upload":{"instructions":"Upload a clear photo showing the required safety equipment","drag_drop":"Drag and drop your file here, or click to browse","file_types":"Accepted file types: JPG, PNG, PDF","max_size":"Maximum file size: {{size}}MB","upload_success":"File uploaded successfully","upload_error":"Upload failed. Please try again.","remove_file":"Remove file","file_removed":"File removed. You can upload a new one."},"results":{"quiz_completed":"Quiz Completed","your_score":"Your Score: {{score}}%","passing_score":"Passing Score: {{required}}%","result_passed":"Congratulations! You passed the quiz.","result_failed":"You did not meet the passing score. Please review the training material and retake the quiz.","pending_review":"Your quiz is pending manager review.","approved":"Your quiz has been approved by management.","rejected":"Your quiz was not approved. Please retake the quiz.","time_taken":"Time taken: {{time}}","questions_correct":"{{correct}} out of {{total}} questions correct","view_answers":"View Detailed Results","download_certificate":"Download Certificate"},"validation":{"answer_required":"Please provide an answer for this question","file_required":"Please upload a file for this question","invalid_file_type":"Invalid file type. Please upload JPG, PNG, or PDF files only.","file_too_large":"File size exceeds the maximum limit of {{size}}MB","text_too_short":"Answer must be at least {{min}} characters long","text_too_long":"Answer must not exceed {{max}} characters"},"safety_equipment":{"fire_extinguisher":"Fire Extinguisher","life_jacket":"Life Jacket","emergency_alarm":"Emergency Alarm","first_aid_kit":"First Aid Kit","emergency_exit":"Emergency Exit","muster_station":"Muster Station","safety_shower":"Safety Shower","eye_wash_station":"Eye Wash Station"},"common_answers":{"yes":"Yes","no":"No","true":"True","false":"False","correct":"Correct","incorrect":"Incorrect","not_answered":"Not answered"},"loading":{"preparing_quiz":"Please wait while we prepare your Phase {{phase}} quiz."},"errors":{"not_found":"Quiz Not Found","not_available":"The quiz for Phase {{phase}} is not available.","session_expired":"Quiz session expired. Please refresh the page to start over.","submission_failed":"Failed to submit quiz: {{error}}","session_not_found":"Quiz session not found. Please refresh and try again."},"ui":{"auto_advance":"Advancing automatically in 1.5s...","question_answered":"Question answered","provide_answer":"Please provide an answer to continue","question_progress":"Question","save_progress":"Save your progress","quiz_completed_title":"Quiz Completed!","quiz_completed_message":"Your answers have been submitted and are being reviewed. You will receive your results and certificate once the review is complete.","return_to_training":"Return to Training","go_to_dashboard":"Go to Dashboard","important_instructions":"Important Instructions:","instruction_photos":"Some questions require photo uploads - ensure good lighting and clear images","instruction_navigation":"You can navigate between questions but cannot restart once submitted","instruction_files":"File uploads must be under 5MB and in JPG, PNG, or WebP format","instruction_all_questions":"All questions must be answered to complete the quiz","instruction_auto_save":"Your progress is automatically saved","quiz_started":"Quiz started! Good luck!"},"offline":{"mode_active":"Offline Mode","pending_sync":"Will Sync","progress_restored":"Quiz progress restored from offline storage","now_offline":"You\'re now offline. Your progress will be saved locally.","back_online_will_sync":"Back online! Your quiz will sync automatically.","saved_will_sync":"Quiz completed offline. Results will sync when connection is restored.","save_failed":"Failed to save quiz offline. Please try again."}}'),admin:JSON.parse('{"dashboard":{"title":"Admin Dashboard","tabs":{"overview":"Overview","managers":"Manager Management","templates":"PDF Templates","content":"Content Management","settings":"System Settings","audit":"Audit Log"},"stats":{"managers":"Total Managers","crew":"Total Crew Members","sessions":"Active Sessions","health":"System Health"},"sections":{"managers":{"title":"Manager Accounts","description":"Manage manager accounts and permissions","add":"Add Manager","active":"Active","inactive":"Inactive"},"templates":{"title":"PDF Templates","description":"Manage certificate and document templates","create":"Create Template","empty":"No templates","emptyDescription":"Get started by creating your first PDF template."},"content":{"title":"Content Management","description":"Edit Training & Quizzes","redirecting":"Redirecting to Content Management..."},"audit":{"view":"View Activity","title":"System Audit Log","description":"Track all administrative actions and system events","loading":"Loading audit logs...","failed":"Failed to load audit logs","tryAgain":"Try Again","filters":"Filters","refresh":"Refresh","action":"Action","allActions":"All Actions","resourceType":"Resource Type","fromDate":"From Date","toDate":"To Date","clearFilters":"Clear Filters","noLogs":"No audit logs found","noLogsDescription":"No audit log entries match your current filters.","viewDetails":"View Details","previous":"Previous","next":"Next","showing":"Showing","to":"to","of":"of","results":"results","page":"Page {{page}} of {{totalPages}}","actions":{"adminLogin":"Admin Login","managerLogin":"Manager Login","crewLogin":"Crew Login","userCreated":"User Created","userUpdated":"User Updated","userDeleted":"User Deleted","emailSent":"Email Sent","certificateGenerated":"Certificate Generated"},"resourceTypes":{"admin":"Admin","manager":"Manager","crew":"Crew","template":"Template","email":"Email"}}},"actions":{"deactivate":"Deactivate manager","activate":"Activate manager","sendMagicLink":"Send magic login link","resendWelcomeEmail":"Resend welcome email","edit":"Edit manager","delete":"Delete manager"},"tooltips":{"deactivateManager":"Deactivate this manager account and revoke access","activateManager":"Activate this manager account and grant access","sendMagicLink":"Send a secure login link to this manager\'s email (3-hour expiration)","resendWelcomeEmail":"Resend welcome email with new password and manager guide (respects current language preference)","editManager":"Edit manager account details, permissions, and settings","deleteManager":"Permanently delete this manager account (cannot be undone)"},"messages":{"loadFailed":"Failed to load dashboard data","managerActivated":"Manager {{name}} activated successfully","managerDeactivated":"Manager {{name}} deactivated successfully","statusUpdateFailed":"Failed to update manager status","magicLinkSent":"Magic link sent to {{name}}","magicLinkFailed":"Failed to send magic link","welcomeEmailResent":"Welcome email with new credentials sent to {{name}}","welcomeEmailFailed":"Failed to send welcome email","deleteConfirm":"Are you sure you want to delete manager \\"{{name}}\\"? This action cannot be undone.","managerDeleted":"Manager deleted successfully","deleteFailed":"Failed to delete manager","templateDeleteConfirm":"Are you sure you want to delete template \\"{{name}}\\"? This action cannot be undone.","templateDeleted":"Template deleted successfully","templateDeleteFailed":"Failed to delete template"}},"settings":{"title":"System Settings","description":"Configure global application settings and preferences","categories":{"application":"Application","email":"Email","security":"Security","training":"Training","notifications":"Notifications"},"descriptions":{"application":"General application settings","email":"Email configuration and notifications","security":"Security and authentication settings","training":"Training and certification settings","notifications":"Notification preferences"},"actions":{"save":"Save Changes","saving":"Saving...","refresh":"Refresh","reset":"Reset to Defaults","unsaved_changes":"Unsaved changes"},"messages":{"loading":"Loading system settings...","load_failed":"Failed to load system settings","try_again":"Try Again","reset_confirm":"Are you sure you want to reset {{category}} settings to defaults? This cannot be undone.","reset_all_confirm":"Are you sure you want to reset all settings to defaults? This cannot be undone."},"email":{"provider_title":"Email Service Provider","provider_description":"Choose your email service provider. Only relevant settings will be shown below.","smtp_title":"SMTP","smtp_description":"ProtonMail, Gmail, etc.","mailersend_title":"MailerSend","mailersend_description":"Transactional Email API"},"empty":{"title":"No settings found","message":"No settings are available for this category."}},"certificates":{"title":"Certificates","description":"Manage crew certificates and documentation","loading":"Loading certificates...","error":"Error Loading Certificates","failed":"Failed to load certificates","tryAgain":"Try Again","search":"Search certificates...","refresh":"Refresh","noFound":"No Certificates Found","noFoundDescription":"No certificates match your current filters.","filters":{"allTypes":"All Types","onboardingTraining":"Onboarding Training","introKapitein":"Intro Kapitein"},"table":{"type":"Type","crewMember":"Crew Member","issueDate":"Issue Date","expiryDate":"Expiry Date","status":"Status","actions":"Actions"},"status":{"noExpiry":"No Expiry","expired":"Expired","expiringSoon":"Expiring Soon","valid":"Valid","unverified":"Unverified","verified":"Verified","notVerified":"Not Verified"},"details":{"title":"Certificate Details","crewInfo":"Crew Member Information","name":"Name","email":"Email","position":"Position","vessel":"Vessel Assignment","editTitle":"Edit Certificate Details","certificateType":"Certificate Type","certificateNumber":"Certificate Number","issueDate":"Issue Date","expiryDate":"Expiry Date","issuingAuthority":"Issuing Authority","verified":"Verified","cancel":"Cancel","saveChanges":"Save Changes","metadata":"Certificate Metadata","generatedBy":"Generated By","generatedAt":"Generated At","lastUpdated":"Last Updated","updatedBy":"Updated By","templateUsed":"Template Used","version":"Version","fileSize":"File Size","downloadCount":"Download Count","editDetails":"Edit Details","download":"Download Certificate","regenerateConfirm":"Confirm regeneration?","regenerateDescription":"This will create a new certificate file. The existing certificate will be replaced.","regenerate":"Regenerate Certificate","deleteConfirm":"Confirm deletion?","deleteDescription":"This action cannot be undone. The certificate and all its data will be permanently removed.","delete":"Delete Certificate"},"messages":{"updated":"Certificate updated successfully","updateFailed":"Failed to update certificate: {{error}}","deleted":"Certificate deleted successfully","deleteFailed":"Failed to delete certificate: {{error}}","regenerated":"Certificate regenerated successfully","regenerateFailed":"Failed to regenerate certificate: {{error}}"},"pagination":{"previous":"Previous","next":"Next","showing":"Showing","to":"to","of":"of","results":"results"}}}'),manager:JSON.parse('{"dashboard":{"title":"Manager Dashboard","sections":{"crew":{"title":"Crew Members","description":"Manage your crew member roster and onboarding status","refresh":"Refresh","add":"Add Crew Member","search":"Search crew members...","selected":"{{count}} selected"},"quizReviews":{"title":"Pending Quiz Reviews","description":"Review and approve quiz submissions from crew members","empty":"No Pending Reviews","emptyDescription":"All quiz submissions have been reviewed."},"onboardingReviews":{"title":"Complete Onboarding Reviews","description":"Review complete training progress and approve final onboarding","empty":"No Pending Reviews","emptyDescription":"No crew members ready for final onboarding approval."},"compliance":{"trainingProgress":"Training Progress by Position","sessionsCompleted":"{{count}} training sessions completed this week","lastUpdated":"Last updated: {{date}}","quizReviewsPending":"{{count}} quiz reviews pending your approval","requiresAttention":"Requires immediate attention","certificatesIssued":"{{count}} certificates issued this month","certificatesDistributed":"All certificates automatically distributed"}},"filters":{"allStatus":"All Status","notStarted":"Not Started","inProgress":"In Progress","formsCompleted":"Forms Completed","trainingCompleted":"Training Completed","fullyCompleted":"Fully Completed","suspended":"Suspended"},"table":{"headers":{"name":"Name","position":"Position","vessel":"Vessel","boardingDate":"Boarding Date","status":"Status","actions":"Actions"}},"status":{"notStarted":"Not Started","inProgress":"In Progress","formsCompleted":"Forms Completed","trainingCompleted":"Training Completed","fullyCompleted":"Fully Completed","suspended":"Suspended"},"actions":{"view":"View crew member details","sendMagicLink":"Send magic link","sendSafetyPdf":"Send Safety Management PDF","sendOnboardingEmail":"Send Onboarding Start Email","edit":"Edit crew member","delete":"Delete crew member","approve":"Approve quiz","reject":"Reject quiz","approveOnboarding":"Approve Complete Onboarding"},"tooltips":{"viewCrewMember":"View detailed crew member information, training progress, and completion status","sendMagicLink":"Send a secure login link to crew member\'s email for training access (3-hour expiration)","sendSafetyPDF":"Send the complete Safety Management System (SMS) PDF document to crew member","sendOnboardingStart":"Send welcome email to officially start the crew member\'s onboarding training process","resendCompletionEmail":"Resend completion certificate and congratulations email to fully trained crew member","editCrewMember":"Edit crew member details, position, vessel assignment, and other profile information","deleteCrewMember":"Permanently remove this crew member from the system (cannot be undone)"},"quiz":{"passed":"Passed","failed":"Failed","requiresReview":"Quiz requires review"},"certificates":{"issued":"Certificates Issued"},"bulk":{"selectFirst":"Please select crew members first"},"messages":{"crewCreated":"Crew member created successfully","crewCreateFailed":"Failed to create crew member","magicLinkSent":"Magic link sent successfully","magicLinkFailed":"Failed to send magic link","crewUpdated":"Crew member updated successfully","crewUpdateFailed":"Failed to update crew member","crewDeleted":"Crew member deleted successfully","crewDeleteFailed":"Failed to delete crew member","quizReviewed":"Quiz review completed successfully","quizReviewFailed":"Failed to review quiz","onboardingApproved":"Onboarding approved and certificate sent","onboardingApproveFailed":"Failed to approve onboarding","safetyPdfSent":"Safety Management PDF sent successfully","safetyPdfFailed":"Failed to send Safety PDF: {{error}}","onboardingEmailSent":"Onboarding Start email sent successfully","onboardingEmailFailed":"Failed to send Onboarding Start email: {{error}}","deleteConfirm":"Are you sure you want to delete {{name}}? This action cannot be undone.","bulkDeleteConfirm":"Are you sure you want to delete {{count}} crew member(s)? This action cannot be undone.","approveOnboardingConfirm":"Are you sure you want to approve this crew member\'s complete onboarding? This will generate and send their completion certificate."},"contentManagement":"Content Management","stats":{"total_crew":"Total Crew","pending_reviews":"Pending Reviews","in_progress":"In Progress","not_started":"Not Started"}}}'),crew:JSON.parse('{"dashboard":{"title":"Crew Dashboard","welcome":"Welcome back, {{name}}!","sections":{"profile":{"title":"Your Profile","description":"View and update your personal information","view":"View Profile"},"trainingProgress":{"title":"Training Progress","description":"Complete your onboarding training phases","phase":"Phase {{number}}","currentPhase":"Current Phase","completedPhase":"Completed Phase","upcomingPhase":"Upcoming Phase","dueDate":"Due: {{date}}","overdue":"Overdue","startTraining":"Start Training","continueTraining":"Continue Training","viewTraining":"View Training","takeQuiz":"Take Quiz","quizPassed":"Quiz Passed","quizFailed":"Quiz Failed - Retake Required","awaitingReview":"Quiz Submitted - Awaiting Review","itemsCompleted":"{{completed}} of {{total}} items completed"},"quizHistory":{"title":"Quiz History","phase":"Phase {{number}} Quiz","score":"Score: {{score}}/{{total}}","passed":"Passed","failed":"Failed","pending":"Under Review","rejected":"Rejected - Please Retake","retake":"Retake Quiz","feedback":"Manager Feedback"},"forms":{"title":"Required Forms","description":"Complete and submit required onboarding forms","notStarted":"Not Started","inProgress":"In Progress","completed":"Completed","complete":"Complete Forms","review":"Review Forms"}},"status":{"notStarted":"Not Started","inProgress":"In Progress","formsCompleted":"Forms Completed","trainingCompleted":"Training Completed","fullyCompleted":"Fully Completed","suspended":"Account Suspended"},"messages":{"noActiveSession":"No active training session found","quizNotAvailable":"Quiz not available yet. Complete all training items first.","trainingCompleted":"Congratulations! You\'ve completed all training phases.","certificateIssued":"Your completion certificate has been issued.","contactManager":"Please contact your manager if you have questions."}},"training":{"phase":"Phase {{number}}: {{title}}","progress":"Progress: {{percentage}}%","item":"Item {{number}}","markComplete":"Mark as Complete","uploadProof":"Upload Proof","proofRequired":"Proof of completion required","proofUploaded":"Proof uploaded","completed":"Completed","nextItem":"Next Item","previousItem":"Previous Item","backToOverview":"Back to Overview","completePhase":"Complete Phase","phaseCompleted":"Phase Completed!","proceedToQuiz":"Proceed to Quiz","messages":{"itemCompleted":"Training item completed successfully","itemCompleteFailed":"Failed to complete training item","proofUploaded":"Proof uploaded successfully","proofUploadFailed":"Failed to upload proof","phaseCompleted":"Phase {{number}} completed successfully!","allItemsRequired":"Please complete all training items before taking the quiz"}},"quiz":{"title":"Phase {{number}} Quiz","instructions":"Please answer all questions carefully. You need to score at least {{passingScore}}% to pass.","question":"Question {{current}} of {{total}}","submit":"Submit Quiz","submitting":"Submitting...","confirmSubmit":"Are you sure you want to submit your quiz? You cannot change your answers after submission.","results":{"title":"Quiz Results","score":"Your Score: {{score}}/{{total}} ({{percentage}}%)","passed":"Congratulations! You passed the quiz.","failed":"Unfortunately, you did not pass. Please review the material and try again.","pending":"Your quiz has been submitted for manual review. You will be notified once it\'s reviewed.","reviewFeedback":"Manager Feedback: {{feedback}}"},"messages":{"submitted":"Quiz submitted successfully","submitFailed":"Failed to submit quiz","loadFailed":"Failed to load quiz questions","answerRequired":"Please answer all questions before submitting"}},"forms":{"title":"Onboarding Forms","personal":{"title":"Personal Information","firstName":"First Name","lastName":"Last Name","email":"Email Address","phone":"Phone Number","address":"Home Address","dateOfBirth":"Date of Birth","nationality":"Nationality","passportNumber":"Passport Number","seamanBookNumber":"Seaman\'s Book Number"},"emergency":{"title":"Emergency Contact","name":"Contact Name","relationship":"Relationship","phone":"Contact Phone","email":"Contact Email","address":"Contact Address"},"medical":{"title":"Medical Information","bloodType":"Blood Type","allergies":"Allergies","medications":"Current Medications","conditions":"Medical Conditions","doctorName":"Doctor Name","doctorPhone":"Doctor Phone"},"banking":{"title":"Banking Information","bankName":"Bank Name","accountNumber":"Account Number","iban":"IBAN","swiftCode":"SWIFT/BIC Code"},"actions":{"save":"Save Progress","submit":"Submit Forms","edit":"Edit Forms","download":"Download Copy"},"messages":{"saved":"Forms saved successfully","submitted":"Forms submitted successfully","saveFailed":"Failed to save forms","submitFailed":"Failed to submit forms","allFieldsRequired":"Please fill in all required fields","confirmSubmit":"Are you sure you want to submit your forms? You cannot edit them after submission."}}}'),forms:JSON.parse('{"selectPosition":"Select position","addManager":{"title":"Add New Manager","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","phone":"Phone Number (optional)","company":"Company","preferredLanguage":"Preferred Language","permissions":"Permissions"},"permissionOptions":{"crew_manage":"Manage crew members","quiz_review":"Review and approve quizzes","onboarding_approve":"Approve final onboarding","certificates_view":"View certificates","certificates_download":"Download certificates","certificates_regenerate":"Regenerate certificates","content_edit":"Edit training content"},"actions":{"create":"Create Manager","cancel":"Cancel"},"messages":{"success":"Manager created successfully","error":"Failed to create manager"}},"editManager":{"title":"Edit Manager","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","phone":"Phone Number","company":"Company","preferredLanguage":"Preferred Language","permissions":"Permissions","isActive":"Active Status"},"activeOptions":{"active":"Active","inactive":"Inactive"},"actions":{"save":"Save Changes","cancel":"Cancel"},"messages":{"success":"Manager updated successfully","error":"Failed to update manager"}},"addCrewMember":{"title":"Add New Crew Member","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","position":"Position","vesselAssignment":"Vessel Assignment","expectedBoardingDate":"Expected Boarding Date","contactPhone":"Contact Phone","emergencyContactName":"Emergency Contact Name","emergencyContactPhone":"Emergency Contact Phone","preferredLanguage":"Preferred Language"},"actions":{"create":"Create Crew Member","cancel":"Cancel"},"messages":{"success":"Crew member created successfully","error":"Failed to create crew member"}},"editCrewMember":{"title":"Edit Crew Member","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","position":"Position","vesselAssignment":"Vessel Assignment","expectedBoardingDate":"Expected Boarding Date","contactPhone":"Contact Phone","emergencyContactName":"Emergency Contact Name","emergencyContactPhone":"Emergency Contact Phone","preferredLanguage":"Preferred Language","isActive":"Active Status"},"actions":{"save":"Save Changes","cancel":"Cancel"},"messages":{"success":"Crew member updated successfully","error":"Failed to update crew member"}},"quizReview":{"title":"Review Quiz Submission","submittedBy":"Submitted by: {{name}}","phase":"Phase {{number}} Quiz","score":"Score: {{score}}/{{total}} ({{percentage}}%)","submittedAt":"Submitted: {{date}}","question":"Question {{number}}","userAnswer":"User Answer","correctAnswer":"Correct Answer","correct":"Correct","incorrect":"Incorrect","feedback":{"title":"Manager Feedback","placeholder":"Provide feedback for the crew member (optional)"},"actions":{"approve":"Approve Quiz","reject":"Reject Quiz","cancel":"Cancel"},"messages":{"approveConfirm":"Are you sure you want to approve this quiz?","rejectConfirm":"Are you sure you want to reject this quiz? The crew member will need to retake it.","approved":"Quiz approved successfully","rejected":"Quiz rejected successfully","error":"Failed to process quiz review"}},"onboardingReview":{"title":"Review Complete Onboarding","crewMember":"Crew Member: {{name}}","position":"Position: {{position}}","vessel":"Vessel: {{vessel}}","summary":{"title":"Training Summary","formsCompleted":"Forms: Completed","phase":"Phase {{number}}","status":"Status: {{status}}","quizScore":"Quiz: {{score}}/{{total}}","completedAt":"Completed: {{date}}"},"actions":{"approve":"Approve & Issue Certificate","reject":"Request Additional Training","cancel":"Cancel"},"messages":{"approveConfirm":"Are you sure you want to approve this crew member\'s onboarding? This will issue their completion certificate.","approved":"Onboarding approved and certificate issued","error":"Failed to process onboarding review"}},"common":{"required":"Required","optional":"Optional","loading":"Loading...","saving":"Saving...","submitting":"Submitting...","error":"An error occurred","tryAgain":"Try Again","close":"Close","confirm":"Confirm","cancel":"Cancel","yes":"Yes","no":"No"}}'),flows:JSON.parse('{"title":"Workflow Management","description":"Create and manage dynamic workflows for training, onboarding, assessments, and more.","create_new":"Create New Flow","create_first":"Create Your First Flow","edit_workflow":"Edit Workflow","create_workflow":"Create Workflow","editor_description":"Design your workflow by configuring phases and content items.","filter_type":"Filter by Type","filter_status":"Filter by Status","all_types":"All Types","all_statuses":"All Statuses","onboarding":"Onboarding","training":"Training","assessment":"Assessment","certification":"Certification","compliance":"Compliance","active":"Active","draft":"Draft","archived":"Archived","workflow_settings":"Workflow Settings","workflow_name":"Workflow Name","workflow_name_placeholder":"Enter a descriptive name for this workflow","workflow_name_set_in_wizard":"This name was set during the wizard and cannot be changed here","workflow_slug":"Workflow Slug","workflow_slug_placeholder":"URL-friendly identifier (auto-generated)","workflow_type":"Workflow Type","workflow_status":"Status","workflow_description":"Description","workflow_description_placeholder":"Describe the purpose and objectives of this workflow","phases":"Phases","phase":"Phase","add_phase":"Add Phase","add_first_phase":"Add Your First Phase","no_phases":"No phases added yet. Add your first phase to get started.","phase_name":"Phase Name","phase_type":"Phase Type","phase_description":"Phase Description","estimated_duration":"Estimated Duration (hours)","required_phase":"Required Phase","delete_phase_confirm":"Are you sure you want to delete this phase? This action cannot be undone.","phase_items":"Phase Content Items","item":"Item","add_item":"Add Item","add_first_item":"Add First Item","no_items":"No content items yet. Add your first item to get started.","untitled_item":"Untitled Item","item_title":"Item Title","item_type":"Item Type","delete_item_confirm":"Are you sure you want to delete this item?","content_text":"Content Text","content_placeholder":"Enter your content text here...","video_url":"Video URL","document_url":"Document URL","video":"Video","document":"Document","form_field":"Form Field","quiz_question":"Quiz Question","content":"Content","form":"Form","quiz":"Quiz","mixed":"Mixed Content","approval":"Approval Required","items":"Items","version":"Version","no_description":"No description provided","edit":"Edit","duplicate":"Duplicate","delete":"Delete","collapse":"Collapse","template":"Template","translate":"Translate","translate_workflow":"Translate Workflow","translating":"Translating...","translation_success":"Workflow translated successfully","translation_failed":"Failed to translate workflow","empty":{"title":"No workflows found","message":"Get started by creating your first workflow using our intuitive editor."},"access_denied":{"title":"Access Denied","message":"You don\'t have permission to access the Flows Editor. Contact your administrator for access."},"validation":{"name_required":"Workflow name is required","slug_required":"Workflow slug is required"},"create_success":"Workflow created successfully","create_failed":"Failed to create workflow","update_success":"Workflow updated successfully","update_failed":"Failed to update workflow","delete_success":"Workflow deleted successfully","delete_failed":"Failed to delete workflow","delete_confirm":"Are you sure you want to delete this workflow? This action cannot be undone.","load_failed":"Failed to load workflows","wizard":{"title":"Create New Workflow","step1":"Basic Info","step2":"Template","step3":"Review","basic_info":"Basic Information","basic_info_description":"Start by providing basic information about your workflow.","choose_template":"Choose Template","template_description":"Select a template to get started quickly, or choose blank to start from scratch.","review":"Review & Create","review_description":"Review your workflow configuration before creating it.","next":"Next","previous":"Previous","create_workflow":"Create Workflow"},"copy_suffix":"(Copy)","templates":{"blank":"Blank Workflow","blank_description":"Start with an empty workflow and build it from scratch.","onboarding":"Onboarding Template","onboarding_description":"Pre-configured workflow for new employee onboarding with welcome, training, and assessment phases.","training":"Training Template","training_description":"Structured training workflow with introduction, materials, exercises, and testing.","assessment":"Assessment Template","assessment_description":"Competency assessment workflow with pre-assessment, testing, and performance review."},"template_phases":{"welcome_introduction":"Welcome & Introduction","safety_training":"Safety Training","company_policies":"Company Policies","skills_assessment":"Skills Assessment","final_review":"Final Review","course_introduction":"Course Introduction","learning_materials":"Learning Materials","practical_exercises":"Practical Exercises","knowledge_test":"Knowledge Test","pre_assessment":"Pre-Assessment","competency_test":"Competency Test","performance_review":"Performance Review"},"pdf_output":{"pdf_output_configuration":"PDF Output Configuration","pdf_output_description":"Configure automatic PDF generation and delivery for this workflow","pdf_output_overview":"Overview","pdf_templates":"Templates","delivery_settings":"Delivery","pdf_output_enable":"Enable PDF Output","pdf_output_enable_description":"Automatically generate PDF documents when users complete quizzes or phases","configured_templates":"Configured Templates","quiz_triggers":"Quiz Triggers","email_delivery":"Email Delivery","enabled":"Enabled","disabled":"Disabled","no_pdf_templates_configured":"No PDF Templates Configured","add_pdf_template_description":"Add PDF templates to automatically generate certificates, reports, or forms when users complete this workflow","add_first_template":"Add Your First Template","pdf_template_associations":"PDF Template Associations","add_template":"Add Template","enable_pdf_output_first":"Enable PDF output in the Overview tab to configure templates","unknown_template":"Unknown Template","configure_mapping":"Configure Mapping","remove":"Remove","trigger_when":"Trigger When","quiz_completed":"Quiz Completed","phase_completed":"Phase Completed","workflow_completed":"Workflow Completed","manual_generation":"Manual Generation","enable_this_template":"Enable this template","data_fields_mapped":"Data fields mapped","fields":"fields","recipients":"Recipients","user":"User","manager":"Manager","hr":"HR Department","custom":"custom recipients","none":"None","email_delivery_description":"Automatically send generated PDFs via email to specified recipients","default_recipients":"Default Recipients","custom_recipients":"Custom Recipients","enter_email_address":"Enter email address...","browse_pdf_templates":"Browse PDF Templates","search_templates":"Search templates...","templates_available":"templates available","no_templates_available":"No Templates Available","no_templates_description":"No PDF templates are available for selection. Create templates first in the PDF Template Editor.","view_full_preview":"View Full Preview","preview_not_available":"Preview not available","loading_preview":"Loading preview...","template_type":"Template Type","page_format":"Page Format","available_fields":"Available Fields","created":"Created","unknown":"Unknown","template_fields":"Template Fields","select_template_to_preview":"Select a template to preview","select_template_description":"Choose a template from the list to see its preview and details.","document":"Document","template_added_successfully":"Template added successfully","failed_to_load_templates":"Failed to load templates","configure_data_mapping":"Configure Data Mapping","visual_mapping":"Visual Mapping","manual_mapping":"Manual Mapping","flow_data_fields":"Flow Data Fields","failed_to_load_template_fields":"Failed to load template fields","loading_template_fields":"Loading template fields...","template_field":"Template Field","flow_data_field":"Flow Data Field","actions":"Actions","select_flow_field":"Select flow field...","clear":"Clear","save_mapping":"Save Mapping","mapping_saved_successfully":"Mapping saved successfully","use_manual_mapping_for_now":"Use manual mapping tab for now","mapped_fields":"Mapped Fields","workflow":"Workflow","phases":"Phases","quiz":"Quiz Results"}}'),api:JSON.parse('{"errors":{"general":{"networkError":"Network error. Please check your connection.","serverError":"Server error. Please try again later.","unauthorized":"You are not authorized to perform this action.","sessionExpired":"Your session has expired. Please log in again.","notFound":"The requested resource was not found.","validationError":"Please check your input and try again.","timeout":"Request timed out. Please try again."},"auth":{"invalidCredentials":"Invalid email or password.","emailNotFound":"No account found with this email address.","passwordIncorrect":"Incorrect password.","accountDisabled":"Your account has been disabled.","magicLinkInvalid":"This login link is invalid or has expired.","magicLinkUsed":"This login link has already been used.","logoutFailed":"Failed to log out. Please try again."},"crew":{"createFailed":"Failed to create crew member.","updateFailed":"Failed to update crew member.","deleteFailed":"Failed to delete crew member.","notFound":"Crew member not found.","emailExists":"A crew member with this email already exists.","invalidData":"Invalid crew member data provided."},"manager":{"createFailed":"Failed to create manager.","updateFailed":"Failed to update manager.","deleteFailed":"Failed to delete manager.","notFound":"Manager not found.","emailExists":"A manager with this email already exists.","noPermission":"You don\'t have permission to manage other managers."},"training":{"sessionNotFound":"Training session not found.","itemNotFound":"Training item not found.","alreadyCompleted":"This training item is already completed.","notStarted":"Please start the training phase first.","completeFailed":"Failed to mark item as complete.","proofRequired":"Proof of completion is required for this item.","uploadFailed":"Failed to upload proof document."},"quiz":{"notAvailable":"Quiz is not available yet.","alreadyPassed":"You have already passed this quiz.","submitFailed":"Failed to submit quiz.","reviewFailed":"Failed to review quiz.","notFound":"Quiz not found.","invalidAnswers":"Invalid quiz answers provided.","incompleteTraining":"Please complete all training items before taking the quiz."},"certificates":{"generateFailed":"Failed to generate certificate.","notFound":"Certificate not found.","notEligible":"User is not eligible for certificate.","sendFailed":"Failed to send certificate email."},"email":{"sendFailed":"Failed to send email.","invalidAddress":"Invalid email address.","templateNotFound":"Email template not found.","attachmentFailed":"Failed to attach document."},"pdf":{"generateFailed":"Failed to generate PDF.","templateNotFound":"PDF template not found.","invalidData":"Invalid data for PDF generation."},"upload":{"failed":"Failed to upload file.","tooLarge":"File is too large. Maximum size is {{maxSize}}.","invalidType":"Invalid file type. Allowed types: {{allowedTypes}}.","noFile":"No file provided."}},"success":{"saved":"Changes saved successfully.","created":"Created successfully.","updated":"Updated successfully.","deleted":"Deleted successfully.","sent":"Sent successfully.","completed":"Completed successfully.","approved":"Approved successfully.","rejected":"Rejected successfully."}}'),errors:JSON.parse('{"network":{"connection_lost":"Connection lost. Please check your internet connection and try again.","slow_connection":"Your connection seems slow. This might take a moment longer than usual.","offline":"You appear to be offline. Please check your internet connection.","timeout":"The request is taking longer than expected. Please try again.","server_unreachable":"Unable to reach our servers. Please check your connection and try again."},"authentication":{"session_expired":"Your session has expired. Please log in again to continue.","session_expiring_soon":"Your session will expire in {{minutes}} minutes. Please save your work.","login_failed":"We couldn\'t log you in. Please check your credentials and try again.","login_link_expired":"This login link has expired. Please request a new one from the login page.","login_link_invalid":"This login link is not valid. Please request a new one from the login page.","access_denied":"You don\'t have permission to access this area. Contact your administrator if you need access.","token_invalid":"Your login session is no longer valid. Please log in again."},"onboarding":{"progress_save_failed":"We couldn\'t save your progress. Your work is safe, but please try again.","step_load_failed":"Unable to load this onboarding step. Please refresh the page and try again.","completion_failed":"We couldn\'t complete your onboarding. Please try again or contact support.","role_selection_failed":"Unable to save your role selection. Please try selecting your role again.","analytics_failed":"Progress tracking is temporarily unavailable, but your onboarding will continue normally."},"training":{"phase_load_failed":"Unable to load Phase {{phase}} training. Please refresh the page and try again.","item_load_failed":"This training item couldn\'t be loaded. Please try again or skip to the next item.","completion_failed":"We couldn\'t mark this training as complete. Please try again.","quiz_load_failed":"The quiz couldn\'t be loaded. Please refresh the page and try again.","quiz_submit_failed":"Your quiz answers couldn\'t be submitted. Please try again.","progress_sync_failed":"Your training progress couldn\'t be synchronized. Your work is saved locally."},"certificates":{"generation_failed":"Your certificate couldn\'t be generated right now. Please try again later.","download_failed":"Certificate download failed. Please try again or contact support.","not_eligible":"You\'re not yet eligible for this certificate. Complete all required training first."},"file_operations":{"upload_failed":"File upload failed. Please check your file and try again.","file_too_large":"This file is too large. Please choose a smaller file (max {{maxSize}}).","invalid_file_type":"This file type is not supported. Please choose a {{allowedTypes}} file.","download_failed":"File download failed. Please try again."},"form_validation":{"required_field":"This field is required.","invalid_email":"Please enter a valid email address.","password_too_short":"Password must be at least {{minLength}} characters long.","passwords_dont_match":"Passwords don\'t match.","invalid_date":"Please enter a valid date.","future_date_required":"Date must be in the future.","past_date_required":"Date must be in the past."},"server":{"internal_error":"Something went wrong on our end. Please try again in a few moments.","maintenance":"The system is temporarily under maintenance. Please try again later.","overloaded":"Our servers are busy right now. Please wait a moment and try again.","database_error":"There\'s a temporary issue with our database. Please try again shortly."},"recovery":{"refresh_page":"Try refreshing the page","check_connection":"Check your internet connection","try_again_later":"Try again in a few minutes","contact_support":"Contact support if the problem continues","save_work":"Save your work before trying again","restart_browser":"Try restarting your browser"},"maritime_specific":{"vessel_data_unavailable":"Vessel information is temporarily unavailable. Your training can continue.","crew_record_sync_failed":"Your crew record couldn\'t be synchronized. Changes are saved locally.","safety_protocol_load_failed":"Safety protocols couldn\'t be loaded. Please contact your safety officer.","compliance_check_failed":"Compliance verification is temporarily unavailable.","boarding_date_invalid":"Please enter a valid boarding date.","position_not_recognized":"This crew position is not recognized. Please contact HR."},"user_friendly":{"something_went_wrong":"Oops! Something didn\'t work as expected.","please_try_again":"Please try again.","working_on_it":"We\'re working on fixing this.","almost_there":"You\'re almost there! Just one more try.","technical_difficulties":"We\'re experiencing some technical difficulties.","back_soon":"Everything should be back to normal soon."},"actions":{"retry":"Try Again","refresh":"Refresh Page","go_back":"Go Back","contact_support":"Contact Support","skip":"Skip This Step","save_and_continue":"Save and Continue","try_later":"Try Later","report_problem":"Report Problem"},"help":{"what_happened":"What happened?","what_to_do":"What should I do?","need_help":"Need help?","common_solutions":"Common solutions:","still_stuck":"Still having trouble?","contact_info":"Contact your system administrator or IT support."}}'),feedback:JSON.parse('{"quick":{"how_was_experience":"How was your experience?","good_experience":"Good experience","okay_experience":"Okay experience","poor_experience":"Poor experience"},"detailed":{"open_detailed":"Detailed feedback","rate_experience":"Rate your experience","additional_comments":"Additional comments (optional)","comment_placeholder":"Tell us about your experience, any issues you encountered, or suggestions for improvement...","characters":"characters","context":"Context","submitting":"Submitting...","submit":"Submit Feedback"},"contexts":{"general":"General Feedback","training_completion":"Training Completion","quiz_completion":"Quiz Completion","offline_mode":"Offline Experience","error_recovery":"Error Recovery"},"validation":{"rating_or_comment_required":"Please provide either a rating or comment"},"errors":{"submission_failed":"Failed to submit feedback. Please try again."}}')},nl:{common:JSON.parse('{"navigation":{"dashboard":"Controlepaneel","profile":"Bemanningsrecord","logout":"Uitloggen","training":"Trainingsprogramma","quiz":"Beoordeling"},"translation":{"translateWorkflow":"Workflow Vertalen","translating":"Aan het vertalen...","multilingualContent":"Meertalige Inhoud","progress":"Vertaalvoortgang","noSourceContent":"Geen broninhoud om te vertalen","workflowTranslated":"Workflow vertaald naar {{count}} talen","failed":"Vertaling mislukt","success":"Vertaling succesvol","batchSuccess":"Batchvertaling voltooid voor {{count}} talen","batchFailed":"Batchvertaling mislukt","error":"Vertaalfout: {{error}}","noSourceText":"Geen brontekst om te vertalen","translatedBy":"Vertaald door {{method}}","maritimeEnhanced":"Maritiem Verbeterd","humanReviewed":"Menselijk Beoordeeld","confidence":"Vertrouwen","improve":"Verbeteren","markReviewed":"Markeren als Beoordeeld","markedReviewed":"Gemarkeerd als beoordeeld","aiTranslate":"AI Vertaling","translateAll":"Alles Vertalen","preview":"Vertaalvoorbeeld","notTranslated":"Niet vertaald","enterContent":"Inhoud invoeren..."},"buttons":{"continue":"Doorgaan","start":"Start","finish":"Voltooien","next":"Volgende","previous":"Vorige","save":"Opslaan","cancel":"Annuleren","submit":"Indienen","upload":"Uploaden","download":"Downloaden","retry":"Opnieuw proberen","review":"Beoordelen","approve":"Goedkeuren","reject":"Afwijzen","edit":"Bewerken","delete":"Verwijderen","view":"Bekijken","close":"Sluiten","confirm":"Bevestigen","back":"Terug","loading":"Laden...","locked":"Vergrendeld","take_quiz":"Neem Quiz","view_results":"Bekijk Resultaten","sync_now":"Nu Synchroniseren","back_to_dashboard":"Terug naar Controlepaneel"},"errors":{"generic":"Er is een fout opgetreden. Probeer opnieuw.","network":"Netwerkfout. Controleer uw verbinding.","unauthorized":"U bent niet geautoriseerd om deze actie uit te voeren.","not_found":"De gevraagde bron werd niet gevonden.","server_error":"Serverfout. Probeer later opnieuw.","connection_restored":"Verbinding hersteld! U bent weer online.","session_expired":"Uw sessie is verlopen. Log opnieuw in.","access_denied":"Toegang geweigerd. Neem contact op met uw beheerder indien nodig."},"mobile_warning":{"title":"Mobiel Apparaat Gedetecteerd","subtitle":"Deze pagina werkt het beste op desktop","desktop_required":"Deze editor vereist een desktopcomputer met een groter scherm voor de beste ervaring. Sommige functies werken mogelijk niet goed op mobiele apparaten.","desktop_recommended":"Hoewel deze pagina werkt op mobiel, raden we aan een desktopcomputer te gebruiken voor de beste ervaring.","limitations_title":"Mobiele Beperkingen:","limitation_1":"Beperkte slepen en neerzetten functionaliteit","limitation_2":"Kleinere werkruimte","limitation_3":"Uitdagingen met aanraaknavigatie","limitation_4":"Sommige functies werken mogelijk niet","proceed":"Toch Doorgaan","dismiss":"Ik Begrijp Het","help_text":"Voor de beste ervaring, gebruik alstublieft een computer met een schermbreedteminimum van 768px."},"profile":{"title":"Bemanningsrecord","my_profile":"Mijn Bemanningsrecord","personal_information":"Persoonlijke informatie en contactgegevens","personal_info":"Persoonlijke Informatie","contact_info":"Contactinformatie","work_info":"Werkinformatie","full_name":"Volledige Naam","email":"E-mailadres","email_address":"E-mailadres","phone":"Telefoonnummer","phone_number":"Telefoonnummer","role":"Rol","position":"Positie","vessel":"Scheepstoewijzing","boarding_date":"Verwachte Inschepingsdatum","emergency_contact":"Noodcontact","contact_name":"Contactnaam","contact_phone":"Contact Telefoon","vessel_assignment":"Scheepstoewijzing","start_date":"Startdatum","loading_profile":"Profiel laden...","preferences":"Voorkeuren","language_preference":"Taalvoorkeur","language_description":"Kies uw voorkeurstaal voor de interface en e-mailcommunicatie","language_updated":"Taalvoorkeur succesvol bijgewerkt","language_update_failed":"Fout bij bijwerken taalvoorkeur","updating_language":"Taalvoorkeur bijwerken"}}'),auth:JSON.parse('{"title":"\ud83d\udea2 Welkom bij Burando Maritime Training","subtitle":"Professioneel Maritiem Training Platform","tagline":"Nieuw op het platform? Voer uw e-mailadres in en we sturen u een veilige inloglink.","copyright":"\xa9 2024 Burando Maritime Services. Alle rechten voorbehouden.","login_methods":{"title":"Bemanning Toegang","subtitle":"Voer uw e-mailadres in om te beginnen met uw trainingsprogramma","magic_link":{"title":"Inloglink","description":"Voor bemanningsleden - veilige e-mail authenticatie","token_label":"Voer Uw Inlogcode In","token_placeholder":"Plak uw code hier...","help_title":"Hulp nodig?","help_text":"Controleer uw e-mail voor een uitnodiging van Burando Maritime. Klik op de veilige inloglink en uw code wordt automatisch ingevuld.","button":"Toegang met Inloglink","loading":"Inloglink Verifi\xebren..."},"request":{"title":"Aan de Slag","description":"Voer uw e-mailadres in en we sturen u een veilige inloglink","email_label":"Uw E-mailadres","email_placeholder":"Voer uw e-mailadres in","help_title":"Wat gebeurt er nu?","help_text":"U ontvangt binnen enkele ogenblikken een veilige inloglink via e-mail. Klik op de link om direct toegang te krijgen tot uw trainingsprogramma.","note":"Gebruik hetzelfde e-mailadres dat door uw manager is geregistreerd.","button":"Aan de Slag","loading":"Inloglink Verzenden...","alternative_text":"Heeft u al een inlogcode?","manual_token_button":"Inlogcode Invoeren","admin_button":"Systeembeheerder"},"token":{"title":"\ud83d\udce7 Heeft u een Inlogcode?","description":"Als uw e-maillink niet werkte, kunt u hieronder uw e-mail en inlogcode invoeren","email_label":"Uw E-mailadres","email_placeholder":"Voer uw e-mailadres in","token_label":"Inlogcode","token_placeholder":"Plak uw inlogcode hier (bijv. ABC123XYZ...)","button":"Doorgaan","loading":"Inlogcode Verifi\xebren...","back_button":"\u2190 Terug naar Aan de Slag"},"admin":{"title":"\u2699\ufe0f Systeembeheerder","description":"Alleen voor systeembeheerders","email_label":"Administrator E-mail","email_placeholder":"admin@shipdocs.app","password_label":"Administrator Wachtwoord","password_placeholder":"Voer beveiligd wachtwoord in","button":"Administrator Inloggen","loading":"Authenticeren...","security_notice":"\ud83d\udd12 Dit is een beveiligd administratief gebied. Alle toegangspogingen worden gelogd.","back_button":"\u2190 Terug naar Bemanning Inloggen"}},"messages":{"welcome_back":"Welkom terug, {{name}}!","welcome":"Welkom aan boord, {{name}}!","magic_link_expired":"Deze inlogcode is verlopen. Vraag een nieuwe aan.","magic_link_sent":"Inloglink verzonden! Controleer uw e-mail voor de veilige inloglink.","login_failed":"We konden u niet inloggen. Controleer uw e-mail voor een nieuwe inloglink.","invalid_credentials":"We konden u niet inloggen. Controleer uw e-mail voor een nieuwe inloglink.","token_required":"Inlogcode is verplicht","email_required":"E-mailadres is verplicht","password_required":"Wachtwoord is verplicht","network_error":"Verbindingsprobleem. Controleer uw internet en probeer opnieuw."},"validation":{"email_invalid":"Voer een geldig e-mailadres in","email_required":"E-mailadres is verplicht","token_required":"Inlogcode is verplicht","token_min_length":"Inlogcode moet minimaal 10 tekens bevatten","admin_email_required":"Administrator e-mail is verplicht","admin_password_required":"Administrator wachtwoord is verplicht","admin_password_min_length":"Wachtwoord moet minimaal 8 tekens bevatten"}}'),dashboard:JSON.parse('{"crew":{"welcome":"Welkom, {{name}}!","subtitle":"Ga verder met uw onboarding training reis","vessel":"Schip","position":"Positie","overall_progress":"Totale Voortgang","stats":{"phases_completed":"Fasen Voltooid","items_completed":"Items Voltooid","quizzes_passed":"Examens Geslaagd","status":"Status"},"training_phases":{"title":"Training Fasen","subtitle":"Voltooi elke fase in volgorde om vooruitgang te boeken","steps_label":"Stappen","quiz_label":"Examen","quiz_required":"Examen Vereist","quiz_passed":"Examen Geslaagd ({{score}}%)","quiz_failed":"Examen Gefaald ({{score}}%) - Herkansing Vereist","quiz_approved":"Examen Goedgekeurd ({{score}}%)","awaiting_review":"Wacht op Beoordeling ({{score}}%)","take_quiz":"Examen Maken","view_results":"Resultaten Bekijken","retake_quiz":"Examen Herkansen"},"next_steps":{"title":"Volgende Stappen","complete_training":"Voltooi uw huidige training fase","take_quiz":"Maak het examen voor Fase {{phase}}","wait_approval":"Wacht op manager goedkeuring van uw examenresultaten","all_complete":"Gefeliciteerd! U heeft alle training fasen voltooid."}},"manager":{"welcome":"Manager Dashboard","subtitle":"Beheer bemanning onboarding en trainingsvoortgang"}}'),training:JSON.parse('{"phase":"Fase","phases":{"phase1":{"title":"Directe Veiligheidstraining","description":"Essenti\xeble veiligheidstraining die binnen 24 uur na het aan boord gaan moet worden voltooid","time_limit":"24 uur"},"phase2":{"title":"Nautische Training","description":"Uitgebreide nautische procedures en scheepsoperaties training","time_limit":"72 uur"},"phase3":{"title":"Geavanceerde Veiligheid & Milieu","description":"Geavanceerde veiligheidsprotocollen en milieunaleving training","time_limit":"1 week"}},"items":{"meet_colleagues":"Collega\'s ontmoeten + dagelijkse zaken aan boord","safety_equipment":"Veiligheidsuitrusting en noodprocedures","fire_safety":"Brandveiligheid en brandbestrijdingsapparatuur","emergency_procedures":"Noodprocedures en verzamelplaatsen","personal_protective":"Persoonlijke beschermingsmiddelen (PBM)","vessel_layout":"Scheepsindeling en verboden gebieden","communication":"Communicatieprocedures en protocollen","environmental":"Milieubeschermingsprocedures","cargo_operations":"Ladingoperaties en veiligheid","navigation":"Navigatie en brugprocedures","engine_room":"Machinekamerveiligheid en procedures","maintenance":"Onderhoud en reparatieprocedures"},"categories":{"orientation":"Ori\xebntatie","safety":"Veiligheid","emergency":"Noodprocedures","equipment":"Uitrusting","procedures":"Procedures","environmental":"Milieu","navigation":"Navigatie","maintenance":"Onderhoud"},"instructions":{"read_carefully":"Lees de volgende informatie zorgvuldig door","complete_all":"Voltooi alle trainingsonderdelen in deze fase","take_photos":"Maak foto\'s als bewijs van voltooiing waar vereist","ask_questions":"Vraag uw supervisor als u vragen heeft","safety_first":"Veiligheid is onze topprioriteit - sla nooit veiligheidsprocedures over"},"completion":{"item_completed":"Trainingsonderdeel voltooid","phase_completed":"Fase succesvol voltooid","all_completed":"Alle trainingsfasen voltooid","certificate_ready":"Certificaat klaar voor download","instructor_signature":"Instructeur handtekening vereist","photo_required":"Fotobewijs vereist"},"navigation":{"previous_item":"Vorig Onderdeel","next_item":"Volgend Onderdeel","back_to_phase":"Terug naar Fase Overzicht","mark_complete":"Markeren als Voltooid","undo_complete":"Voltooiing Ongedaan Maken"},"ui":{"time_spent":"Tijd Besteed","minutes":"minuten","start_training":"Training Starten","continue_training":"Training Voortzetten","phase_complete":"Fase Voltooid","take_quiz_now":"Examen Nu Maken","back_to_dashboard":"Terug naar Dashboard","congratulations":"Gefeliciteerd!","phase_completed_message":"U heeft deze trainingsfase succesvol voltooid.","ready_for_quiz":"U bent nu klaar om het examen voor deze fase te maken."}}'),quiz:JSON.parse('{"title":"Fase {{phase}} Beoordeling","instructions":{"title":"Examen Instructies","read_carefully":"Lees alle vragen zorgvuldig door voordat u antwoordt","time_limit":"Tijdslimiet: {{minutes}} minuten","passing_score":"Slagingspercentage: {{score}}%","single_attempt":"U heeft \xe9\xe9n poging per examensessie","save_progress":"Uw voortgang wordt automatisch opgeslagen","review_answers":"Controleer uw antwoorden voordat u indient","no_going_back":"U kunt antwoorden niet wijzigen na indiening"},"question_types":{"multiple_choice":"Meerkeuzevraag","true_false":"Waar/Onwaar","file_upload":"Bestand Uploaden","short_answer":"Kort Antwoord","drag_drop":"Slepen en Neerzetten","fill_gaps":"Invullen van Gaten"},"navigation":{"question_progress":"Vraag {{current}} van {{total}}","previous_question":"Vorige Vraag","next_question":"Volgende Vraag","submit_quiz":"Examen Indienen","review_quiz":"Examen Controleren","start_quiz":"Examen Starten","retake_quiz":"Examen Herkansen","ready_to_begin":"Klaar om te Beginnen?","time_limit_label":"Tijdslimiet","questions_label":"Vragen","passing_score_label":"Slagingspercentage","questions_count":"{{count}} vragen"},"file_upload":{"instructions":"Upload een duidelijke foto van de vereiste veiligheidsuitrusting","drag_drop":"Sleep uw bestand hierheen, of klik om te bladeren","file_types":"Geaccepteerde bestandstypen: JPG, PNG, PDF","max_size":"Maximale bestandsgrootte: {{size}}MB","upload_success":"Bestand succesvol ge\xfcpload","upload_error":"Upload mislukt. Probeer het opnieuw.","remove_file":"Bestand verwijderen"},"results":{"quiz_completed":"Examen Voltooid","your_score":"Uw Score: {{score}}%","passing_score":"Slagingspercentage: {{required}}%","result_passed":"Gefeliciteerd! U bent geslaagd voor het examen.","result_failed":"U heeft het slagingspercentage niet behaald. Bekijk het trainingsmateriaal en herkans het examen.","pending_review":"Uw examen wacht op manager beoordeling.","approved":"Uw examen is goedgekeurd door het management.","rejected":"Uw examen is niet goedgekeurd. Herkans het examen.","time_taken":"Tijd gebruikt: {{time}}","questions_correct":"{{correct}} van {{total}} vragen correct","view_answers":"Gedetailleerde Resultaten Bekijken","download_certificate":"Certificaat Downloaden"},"validation":{"answer_required":"Geef een antwoord op deze vraag","file_required":"Upload een bestand voor deze vraag","invalid_file_type":"Ongeldig bestandstype. Upload alleen JPG, PNG, of PDF bestanden.","file_too_large":"Bestandsgrootte overschrijdt de maximumlimiet van {{size}}MB","text_too_short":"Antwoord moet minimaal {{min}} tekens lang zijn","text_too_long":"Antwoord mag niet meer dan {{max}} tekens bevatten"},"safety_equipment":{"fire_extinguisher":"Brandblusser","life_jacket":"Reddingsvest","emergency_alarm":"Noodalarm","first_aid_kit":"EHBO-kit","emergency_exit":"Nooduitgang","muster_station":"Verzamelplaats","safety_shower":"Veiligheidsdouche","eye_wash_station":"Oogspoelapparaat"},"common_answers":{"yes":"Ja","no":"Nee","true":"Waar","false":"Onwaar","correct":"Correct","incorrect":"Incorrect","not_answered":"Niet beantwoord"},"offline":{"mode_active":"Offline Modus","pending_sync":"Wordt Gesynchroniseerd","progress_restored":"Quiz voortgang hersteld uit offline opslag","now_offline":"U bent nu offline. Uw voortgang wordt lokaal opgeslagen.","back_online_will_sync":"Weer online! Uw quiz wordt automatisch gesynchroniseerd.","saved_will_sync":"Quiz offline voltooid. Resultaten worden gesynchroniseerd wanneer verbinding is hersteld.","save_failed":"Kon quiz niet offline opslaan. Probeer opnieuw."}}'),admin:JSON.parse('{"dashboard":{"title":"Beheerder Dashboard","tabs":{"overview":"Overzicht","managers":"Manager Beheer","templates":"PDF Sjablonen","content":"Inhoudsbeheer","settings":"Systeeminstellingen","audit":"Auditlog"},"stats":{"managers":"Totaal Managers","crew":"Totaal Bemanningsleden","sessions":"Actieve Sessies","health":"Systeemgezondheid"},"sections":{"managers":{"title":"Manager Accounts","description":"Beheer manager accounts en machtigingen","add":"Manager Toevoegen","active":"Actief","inactive":"Inactief"},"templates":{"title":"PDF Sjablonen","description":"Beheer certificaat en document sjablonen","create":"Sjabloon Maken","empty":"Geen sjablonen","emptyDescription":"Begin met het maken van uw eerste PDF sjabloon."},"content":{"title":"Inhoudsbeheer","description":"Training & Examens Bewerken","redirecting":"Doorverwijzen naar Inhoudsbeheer..."},"audit":{"view":"Activiteit Bekijken","title":"Systeem Audit Log","description":"Volg alle administratieve acties en systeemgebeurtenissen","loading":"Audit logs laden...","failed":"Fout bij laden audit logs","tryAgain":"Probeer Opnieuw","filters":"Filters","refresh":"Vernieuwen","action":"Actie","allActions":"Alle Acties","resourceType":"Bron Type","fromDate":"Van Datum","toDate":"Tot Datum","clearFilters":"Filters Wissen","noLogs":"Geen audit logs gevonden","noLogsDescription":"Geen audit log items voldoen aan uw huidige filters.","viewDetails":"Bekijk Details","previous":"Vorige","next":"Volgende","showing":"Toont","to":"tot","of":"van","results":"resultaten","page":"Pagina {{page}} van {{totalPages}}","actions":{"adminLogin":"Admin Inlog","managerLogin":"Manager Inlog","crewLogin":"Bemanning Inlog","userCreated":"Gebruiker Aangemaakt","userUpdated":"Gebruiker Bijgewerkt","userDeleted":"Gebruiker Verwijderd","emailSent":"E-mail Verzonden","certificateGenerated":"Certificaat Gegenereerd"},"resourceTypes":{"admin":"Admin","manager":"Manager","crew":"Bemanning","template":"Sjabloon","email":"E-mail"}}},"actions":{"deactivate":"Manager deactiveren","activate":"Manager activeren","sendMagicLink":"Magische login link versturen","resendWelcomeEmail":"Welkomst e-mail opnieuw versturen","edit":"Manager bewerken","delete":"Manager verwijderen"},"tooltips":{"deactivateManager":"Dit manager account deactiveren en toegang intrekken","activateManager":"Dit manager account activeren en toegang verlenen","sendMagicLink":"Beveiligde inloglink versturen naar e-mail van deze manager (3 uur geldig)","resendWelcomeEmail":"Welkomst e-mail opnieuw versturen met nieuw wachtwoord en manager handleiding (respecteert huidige taalvoorkeur)","editManager":"Manager account details, rechten en instellingen bewerken","deleteManager":"Dit manager account permanent verwijderen (kan niet ongedaan worden gemaakt)"},"messages":{"loadFailed":"Fout bij laden dashboard gegevens","managerActivated":"Manager {{name}} succesvol geactiveerd","managerDeactivated":"Manager {{name}} succesvol gedeactiveerd","statusUpdateFailed":"Fout bij bijwerken manager status","magicLinkSent":"Magische link verstuurd naar {{name}}","magicLinkFailed":"Fout bij versturen magische link","welcomeEmailResent":"Welkomst e-mail met nieuwe inloggegevens verstuurd naar {{name}}","welcomeEmailFailed":"Fout bij versturen welkomst e-mail","deleteConfirm":"Weet u zeker dat u manager \\"{{name}}\\" wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","managerDeleted":"Manager succesvol verwijderd","deleteFailed":"Fout bij verwijderen manager","templateDeleteConfirm":"Weet u zeker dat u sjabloon \\"{{name}}\\" wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","templateDeleted":"Sjabloon succesvol verwijderd","templateDeleteFailed":"Fout bij verwijderen sjabloon"}},"settings":{"title":"Systeeminstellingen","description":"Configureer globale applicatie instellingen en voorkeuren","categories":{"application":"Applicatie","email":"E-mail","security":"Beveiliging","training":"Training","notifications":"Meldingen"},"descriptions":{"application":"Algemene applicatie instellingen","email":"E-mail configuratie en meldingen","security":"Beveiliging en authenticatie instellingen","training":"Training en certificering instellingen","notifications":"Melding voorkeuren"},"actions":{"save":"Wijzigingen Opslaan","saving":"Opslaan...","refresh":"Vernieuwen","reset":"Herstel naar Standaard","unsaved_changes":"Niet opgeslagen wijzigingen"},"messages":{"loading":"Systeeminstellingen laden...","load_failed":"Fout bij laden systeeminstellingen","try_again":"Probeer Opnieuw","reset_confirm":"Weet u zeker dat u {{category}} instellingen wilt herstellen naar standaard? Dit kan niet ongedaan worden gemaakt.","reset_all_confirm":"Weet u zeker dat u alle instellingen wilt herstellen naar standaard? Dit kan niet ongedaan worden gemaakt."},"email":{"provider_title":"E-mail Service Provider","provider_description":"Kies uw e-mail service provider. Alleen relevante instellingen worden hieronder getoond.","smtp_title":"SMTP","smtp_description":"ProtonMail, Gmail, etc.","mailersend_title":"MailerSend","mailersend_description":"Transactionele E-mail API"},"empty":{"title":"Geen instellingen gevonden","message":"Er zijn geen instellingen beschikbaar voor deze categorie."}},"certificates":{"title":"Certificaten","description":"Beheer bemanning certificaten en documentatie","loading":"Certificaten laden...","error":"Fout bij Laden Certificaten","failed":"Fout bij laden certificaten","tryAgain":"Probeer Opnieuw","search":"Zoek certificaten...","refresh":"Vernieuwen","noFound":"Geen Certificaten Gevonden","noFoundDescription":"Geen certificaten voldoen aan uw huidige filters.","filters":{"allTypes":"Alle Types","onboardingTraining":"Onboarding Training","introKapitein":"Intro Kapitein"},"table":{"type":"Type","crewMember":"Bemanningslid","issueDate":"Uitgiftedatum","expiryDate":"Vervaldatum","status":"Status","actions":"Acties"},"status":{"noExpiry":"Geen Vervaldatum","expired":"Verlopen","expiringSoon":"Verloopt Binnenkort","valid":"Geldig","unverified":"Niet Geverifieerd","verified":"Geverifieerd","notVerified":"Niet Geverifieerd"},"details":{"title":"Certificaat Details","crewInfo":"Bemanningslid Informatie","name":"Naam","email":"E-mail","position":"Positie","vessel":"Schip Toewijzing","editTitle":"Certificaat Details Bewerken","certificateType":"Certificaat Type","certificateNumber":"Certificaatnummer","issueDate":"Uitgiftedatum","expiryDate":"Vervaldatum","issuingAuthority":"Uitgevende Instantie","verified":"Geverifieerd","cancel":"Annuleren","saveChanges":"Wijzigingen Opslaan","metadata":"Certificaat Metadata","generatedBy":"Gegenereerd Door","generatedAt":"Gegenereerd Op","lastUpdated":"Laatst Bijgewerkt","updatedBy":"Bijgewerkt Door","templateUsed":"Gebruikte Sjabloon","version":"Versie","fileSize":"Bestandsgrootte","downloadCount":"Download Aantal","editDetails":"Details Bewerken","download":"Certificaat Downloaden","regenerateConfirm":"Bevestig regeneratie?","regenerateDescription":"Dit zal een nieuw certificaatbestand aanmaken. Het bestaande certificaat wordt vervangen.","regenerate":"Certificaat Regenereren","deleteConfirm":"Bevestig verwijdering?","deleteDescription":"Deze actie kan niet ongedaan worden gemaakt. Het certificaat en alle gegevens worden permanent verwijderd.","delete":"Certificaat Verwijderen"},"messages":{"updated":"Certificaat succesvol bijgewerkt","updateFailed":"Fout bij bijwerken certificaat: {{error}}","deleted":"Certificaat succesvol verwijderd","deleteFailed":"Fout bij verwijderen certificaat: {{error}}","regenerated":"Certificaat succesvol geregenereerd","regenerateFailed":"Fout bij regenereren certificaat: {{error}}"},"pagination":{"previous":"Vorige","next":"Volgende","showing":"Toont","to":"tot","of":"van","results":"resultaten"}}}'),manager:JSON.parse('{"dashboard":{"title":"Manager Dashboard","sections":{"crew":{"title":"Bemanningsleden","description":"Beheer uw bemanningsrooster en onboarding status","refresh":"Vernieuwen","add":"Bemanningslid Toevoegen","search":"Zoek bemanningsleden...","selected":"{{count}} geselecteerd"},"quizReviews":{"title":"Wachtende Examen Beoordelingen","description":"Beoordeel en keur exameninzendingen van bemanningsleden goed","empty":"Geen Wachtende Beoordelingen","emptyDescription":"Alle exameninzendingen zijn beoordeeld."},"onboardingReviews":{"title":"Complete Onboarding Beoordelingen","description":"Beoordeel volledige trainingsvoortgang en keur definitieve onboarding goed","empty":"Geen Wachtende Beoordelingen","emptyDescription":"Geen bemanningsleden klaar voor definitieve onboarding goedkeuring."},"compliance":{"trainingProgress":"Trainingsvoortgang per Positie","sessionsCompleted":"{{count}} trainingssessies voltooid deze week","lastUpdated":"Laatst bijgewerkt: {{date}}","quizReviewsPending":"{{count}} examenbeoordelingen wachten op uw goedkeuring","requiresAttention":"Vereist onmiddellijke aandacht","certificatesIssued":"{{count}} certificaten uitgegeven deze maand","certificatesDistributed":"Alle certificaten automatisch verspreid"}},"filters":{"allStatus":"Alle Status","notStarted":"Niet Gestart","inProgress":"Bezig","formsCompleted":"Formulieren Voltooid","trainingCompleted":"Training Voltooid","fullyCompleted":"Volledig Voltooid","suspended":"Opgeschort"},"table":{"headers":{"name":"Naam","position":"Positie","vessel":"Schip","boardingDate":"Instapdag","status":"Status","actions":"Acties"}},"status":{"notStarted":"Niet Gestart","inProgress":"Bezig","formsCompleted":"Formulieren Voltooid","trainingCompleted":"Training Voltooid","fullyCompleted":"Volledig Voltooid","suspended":"Opgeschort"},"actions":{"view":"Bekijk bemanningslid details","sendMagicLink":"Verstuur magische link","sendSafetyPdf":"Verstuur Veiligheidsmanagement PDF","sendOnboardingEmail":"Verstuur Onboarding Start Email","edit":"Bewerk bemanningslid","delete":"Verwijder bemanningslid","approve":"Keur examen goed","reject":"Wijs examen af","approveOnboarding":"Keur Volledige Onboarding Goed"},"tooltips":{"viewCrewMember":"Bekijk gedetailleerde bemanningslid informatie, trainingsvoortgang en voltooiingsstatus","sendMagicLink":"Verstuur beveiligde inloglink naar e-mail van bemanningslid voor trainingstoegang (3 uur geldig)","sendSafetyPDF":"Verstuur het complete Safety Management System (SMS) PDF document naar bemanningslid","sendOnboardingStart":"Verstuur welkomst e-mail om officieel het onboarding trainingsproces te starten","resendCompletionEmail":"Verstuur voltooiingscertificaat en felicitatie e-mail opnieuw naar volledig getraind bemanningslid","editCrewMember":"Bewerk bemanningslid details, positie, scheepstoewijzing en andere profielinformatie","deleteCrewMember":"Verwijder dit bemanningslid permanent uit het systeem (kan niet ongedaan worden gemaakt)"},"quiz":{"passed":"Geslaagd","failed":"Gefaald","requiresReview":"Examen vereist beoordeling"},"certificates":{"issued":"Certificaten Uitgegeven"},"bulk":{"selectFirst":"Selecteer eerst bemanningsleden"},"messages":{"crewCreated":"Bemanningslid succesvol aangemaakt","crewCreateFailed":"Fout bij aanmaken bemanningslid","magicLinkSent":"Magische link succesvol verstuurd","magicLinkFailed":"Fout bij versturen magische link","crewUpdated":"Bemanningslid succesvol bijgewerkt","crewUpdateFailed":"Fout bij bijwerken bemanningslid","crewDeleted":"Bemanningslid succesvol verwijderd","crewDeleteFailed":"Fout bij verwijderen bemanningslid","quizReviewed":"Examenbeoordeling succesvol voltooid","quizReviewFailed":"Fout bij beoordelen examen","onboardingApproved":"Onboarding goedgekeurd en certificaat verstuurd","onboardingApproveFailed":"Fout bij goedkeuren onboarding","safetyPdfSent":"Veiligheidsmanagement PDF succesvol verstuurd","safetyPdfFailed":"Fout bij versturen Veiligheids PDF: {{error}}","onboardingEmailSent":"Onboarding Start email succesvol verstuurd","onboardingEmailFailed":"Fout bij versturen Onboarding Start email: {{error}}","deleteConfirm":"Weet u zeker dat u {{name}} wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","bulkDeleteConfirm":"Weet u zeker dat u {{count}} bemanningslid(en) wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","approveOnboardingConfirm":"Weet u zeker dat u de volledige onboarding van dit bemanningslid wilt goedkeuren? Dit zal hun voltooiingscertificaat genereren en versturen."},"contentManagement":"Inhoudsbeheer","stats":{"total_crew":"Totaal Bemanning","pending_reviews":"Wachtende Beoordelingen","in_progress":"Bezig","not_started":"Niet Gestart"}}}'),crew:JSON.parse('{"dashboard":{"title":"Bemanning Dashboard","welcome":"Welkom terug, {{name}}!","sections":{"profile":{"title":"Uw Profiel","description":"Bekijk en werk uw persoonlijke informatie bij","view":"Bekijk Profiel"},"trainingProgress":{"title":"Trainingsvoortgang","description":"Voltooi uw onboarding trainingsfases","phase":"Fase {{number}}","currentPhase":"Huidige Fase","completedPhase":"Voltooide Fase","upcomingPhase":"Komende Fase","dueDate":"Deadline: {{date}}","overdue":"Achterstallig","startTraining":"Start Training","continueTraining":"Ga Door met Training","viewTraining":"Bekijk Training","takeQuiz":"Doe Examen","quizPassed":"Examen Geslaagd","quizFailed":"Examen Gefaald - Herkansing Vereist","awaitingReview":"Examen Ingediend - Wacht op Beoordeling","itemsCompleted":"{{completed}} van {{total}} items voltooid"},"quizHistory":{"title":"Examengeschiedenis","phase":"Fase {{number}} Examen","score":"Score: {{score}}/{{total}}","passed":"Geslaagd","failed":"Gefaald","pending":"In Beoordeling","rejected":"Afgekeurd - Doe Opnieuw","retake":"Herkans Examen","feedback":"Manager Feedback"},"forms":{"title":"Vereiste Formulieren","description":"Vul de vereiste onboarding formulieren in en dien ze in","notStarted":"Niet Gestart","inProgress":"Bezig","completed":"Voltooid","complete":"Vul Formulieren In","review":"Bekijk Formulieren"}},"status":{"notStarted":"Niet Gestart","inProgress":"Bezig","formsCompleted":"Formulieren Voltooid","trainingCompleted":"Training Voltooid","fullyCompleted":"Volledig Voltooid","suspended":"Account Opgeschort"},"messages":{"noActiveSession":"Geen actieve trainingssessie gevonden","quizNotAvailable":"Examen nog niet beschikbaar. Voltooi eerst alle trainingsitems.","trainingCompleted":"Gefeliciteerd! U heeft alle trainingsfases voltooid.","certificateIssued":"Uw voltooiingscertificaat is uitgegeven.","contactManager":"Neem contact op met uw manager als u vragen heeft."}},"training":{"phase":"Fase {{number}}: {{title}}","progress":"Voortgang: {{percentage}}%","item":"Item {{number}}","markComplete":"Markeer als Voltooid","uploadProof":"Upload Bewijs","proofRequired":"Bewijs van voltooiing vereist","proofUploaded":"Bewijs ge\xfcpload","completed":"Voltooid","nextItem":"Volgend Item","previousItem":"Vorig Item","backToOverview":"Terug naar Overzicht","completePhase":"Voltooi Fase","phaseCompleted":"Fase Voltooid!","proceedToQuiz":"Ga door naar Examen","messages":{"itemCompleted":"Trainingsitem succesvol voltooid","itemCompleteFailed":"Fout bij voltooien trainingsitem","proofUploaded":"Bewijs succesvol ge\xfcpload","proofUploadFailed":"Fout bij uploaden bewijs","phaseCompleted":"Fase {{number}} succesvol voltooid!","allItemsRequired":"Voltooi alle trainingsitems voordat u het examen doet"}},"quiz":{"title":"Fase {{number}} Examen","instructions":"Beantwoord alle vragen zorgvuldig. U moet minimaal {{passingScore}}% scoren om te slagen.","question":"Vraag {{current}} van {{total}}","submit":"Dien Examen In","submitting":"Indienen...","confirmSubmit":"Weet u zeker dat u uw examen wilt indienen? U kunt uw antwoorden niet meer wijzigen na indiening.","results":{"title":"Examenresultaten","score":"Uw Score: {{score}}/{{total}} ({{percentage}}%)","passed":"Gefeliciteerd! U bent geslaagd voor het examen.","failed":"Helaas bent u niet geslaagd. Bekijk het materiaal en probeer het opnieuw.","pending":"Uw examen is ingediend voor handmatige beoordeling. U wordt ge\xefnformeerd zodra het is beoordeeld.","reviewFeedback":"Manager Feedback: {{feedback}}"},"messages":{"submitted":"Examen succesvol ingediend","submitFailed":"Fout bij indienen examen","loadFailed":"Fout bij laden examenvragen","answerRequired":"Beantwoord alle vragen voordat u indient"}},"forms":{"title":"Onboarding Formulieren","personal":{"title":"Persoonlijke Informatie","firstName":"Voornaam","lastName":"Achternaam","email":"E-mailadres","phone":"Telefoonnummer","address":"Huisadres","dateOfBirth":"Geboortedatum","nationality":"Nationaliteit","passportNumber":"Paspoortnummer","seamanBookNumber":"Monsterboekje Nummer"},"emergency":{"title":"Noodcontact","name":"Naam Contact","relationship":"Relatie","phone":"Telefoon Contact","email":"E-mail Contact","address":"Adres Contact"},"medical":{"title":"Medische Informatie","bloodType":"Bloedgroep","allergies":"Allergie\xebn","medications":"Huidige Medicatie","conditions":"Medische Aandoeningen","doctorName":"Naam Huisarts","doctorPhone":"Telefoon Huisarts"},"banking":{"title":"Bankinformatie","bankName":"Banknaam","accountNumber":"Rekeningnummer","iban":"IBAN","swiftCode":"SWIFT/BIC Code"},"actions":{"save":"Bewaar Voortgang","submit":"Dien Formulieren In","edit":"Bewerk Formulieren","download":"Download Kopie"},"messages":{"saved":"Formulieren succesvol opgeslagen","submitted":"Formulieren succesvol ingediend","saveFailed":"Fout bij opslaan formulieren","submitFailed":"Fout bij indienen formulieren","allFieldsRequired":"Vul alle verplichte velden in","confirmSubmit":"Weet u zeker dat u uw formulieren wilt indienen? U kunt ze niet meer bewerken na indiening."}}}'),forms:JSON.parse('{"selectPosition":"Selecteer positie","addManager":{"title":"Nieuwe Manager Toevoegen","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","phone":"Telefoonnummer (optioneel)","company":"Bedrijf","preferredLanguage":"Voorkeurstaal","permissions":"Machtigingen"},"permissionOptions":{"crew_manage":"Bemanningsleden beheren","quiz_review":"Examens beoordelen en goedkeuren","onboarding_approve":"Definitieve onboarding goedkeuren","certificates_view":"Certificaten bekijken","certificates_download":"Certificaten downloaden","certificates_regenerate":"Certificaten opnieuw genereren","content_edit":"Trainingsinhoud bewerken"},"actions":{"create":"Manager Aanmaken","cancel":"Annuleren"},"messages":{"success":"Manager succesvol aangemaakt","error":"Fout bij aanmaken manager"}},"editManager":{"title":"Manager Bewerken","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","phone":"Telefoonnummer","company":"Bedrijf","preferredLanguage":"Voorkeurstaal","permissions":"Machtigingen","isActive":"Actieve Status"},"activeOptions":{"active":"Actief","inactive":"Inactief"},"actions":{"save":"Wijzigingen Opslaan","cancel":"Annuleren"},"messages":{"success":"Manager succesvol bijgewerkt","error":"Fout bij bijwerken manager"}},"addCrewMember":{"title":"Nieuw Bemanningslid Toevoegen","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","position":"Positie","vesselAssignment":"Schip Toewijzing","expectedBoardingDate":"Verwachte Instapdag","contactPhone":"Contact Telefoon","emergencyContactName":"Naam Noodcontact","emergencyContactPhone":"Telefoon Noodcontact","preferredLanguage":"Voorkeurstaal"},"actions":{"create":"Bemanningslid Aanmaken","cancel":"Annuleren"},"messages":{"success":"Bemanningslid succesvol aangemaakt","error":"Fout bij aanmaken bemanningslid"}},"editCrewMember":{"title":"Bemanningslid Bewerken","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","position":"Positie","vesselAssignment":"Schip Toewijzing","expectedBoardingDate":"Verwachte Instapdag","contactPhone":"Contact Telefoon","emergencyContactName":"Naam Noodcontact","emergencyContactPhone":"Telefoon Noodcontact","preferredLanguage":"Voorkeurstaal","isActive":"Actieve Status"},"actions":{"save":"Wijzigingen Opslaan","cancel":"Annuleren"},"messages":{"success":"Bemanningslid succesvol bijgewerkt","error":"Fout bij bijwerken bemanningslid"}},"quizReview":{"title":"Beoordeel Exameninzending","submittedBy":"Ingediend door: {{name}}","phase":"Fase {{number}} Examen","score":"Score: {{score}}/{{total}} ({{percentage}}%)","submittedAt":"Ingediend: {{date}}","question":"Vraag {{number}}","userAnswer":"Antwoord Gebruiker","correctAnswer":"Correct Antwoord","correct":"Correct","incorrect":"Incorrect","feedback":{"title":"Manager Feedback","placeholder":"Geef feedback voor het bemanningslid (optioneel)"},"actions":{"approve":"Keur Examen Goed","reject":"Wijs Examen Af","cancel":"Annuleren"},"messages":{"approveConfirm":"Weet u zeker dat u dit examen wilt goedkeuren?","rejectConfirm":"Weet u zeker dat u dit examen wilt afwijzen? Het bemanningslid moet het opnieuw doen.","approved":"Examen succesvol goedgekeurd","rejected":"Examen succesvol afgekeurd","error":"Fout bij verwerken examenbeoordeling"}},"onboardingReview":{"title":"Beoordeel Volledige Onboarding","crewMember":"Bemanningslid: {{name}}","position":"Positie: {{position}}","vessel":"Schip: {{vessel}}","summary":{"title":"Trainingssamenvatting","formsCompleted":"Formulieren: Voltooid","phase":"Fase {{number}}","status":"Status: {{status}}","quizScore":"Examen: {{score}}/{{total}}","completedAt":"Voltooid: {{date}}"},"actions":{"approve":"Keur Goed & Geef Certificaat Uit","reject":"Vraag Extra Training Aan","cancel":"Annuleren"},"messages":{"approveConfirm":"Weet u zeker dat u de onboarding van dit bemanningslid wilt goedkeuren? Dit zal hun voltooiingscertificaat uitgeven.","approved":"Onboarding goedgekeurd en certificaat uitgegeven","error":"Fout bij verwerken onboarding beoordeling"}},"common":{"required":"Verplicht","optional":"Optioneel","loading":"Laden...","saving":"Opslaan...","submitting":"Indienen...","error":"Er is een fout opgetreden","tryAgain":"Probeer Opnieuw","close":"Sluiten","confirm":"Bevestigen","cancel":"Annuleren","yes":"Ja","no":"Nee"}}'),flows:JSON.parse('{"title":"Workflow Beheer","description":"Maak en beheer dynamische workflows voor training, onboarding, beoordelingen en meer.","create_new":"Nieuwe Flow Maken","create_first":"Maak Je Eerste Flow","edit_workflow":"Workflow Bewerken","create_workflow":"Workflow Maken","editor_description":"Ontwerp je workflow door fasen en content-items te configureren.","filter_type":"Filter op Type","filter_status":"Filter op Status","all_types":"Alle Types","all_statuses":"Alle Statussen","onboarding":"Onboarding","training":"Training","assessment":"Beoordeling","certification":"Certificering","compliance":"Compliance","active":"Actief","draft":"Concept","archived":"Gearchiveerd","workflow_settings":"Workflow Instellingen","workflow_name":"Workflow Naam","workflow_name_placeholder":"Voer een beschrijvende naam in voor deze workflow","workflow_name_set_in_wizard":"Deze naam is ingesteld tijdens de wizard en kan niet hier worden gewijzigd","workflow_slug":"Workflow Slug","workflow_slug_placeholder":"URL-vriendelijke identifier (automatisch gegenereerd)","workflow_type":"Workflow Type","workflow_status":"Status","workflow_description":"Beschrijving","workflow_description_placeholder":"Beschrijf het doel en de doelstellingen van deze workflow","phases":"Fasen","phase":"Fase","add_phase":"Fase Toevoegen","add_first_phase":"Voeg Je Eerste Fase Toe","no_phases":"Nog geen fasen toegevoegd. Voeg je eerste fase toe om te beginnen.","phase_name":"Fase Naam","phase_type":"Fase Type","phase_description":"Fase Beschrijving","estimated_duration":"Geschatte Duur (uren)","required_phase":"Verplichte Fase","delete_phase_confirm":"Weet je zeker dat je deze fase wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","phase_items":"Fase Inhoud Items","item":"Item","add_item":"Item Toevoegen","add_first_item":"Eerste Item Toevoegen","no_items":"Nog geen inhoud items. Voeg je eerste item toe om te beginnen.","untitled_item":"Naamloos Item","item_title":"Item Titel","item_type":"Item Type","delete_item_confirm":"Weet je zeker dat je dit item wilt verwijderen?","content_text":"Inhoud Tekst","content_placeholder":"Voer hier je inhoud tekst in...","video_url":"Video URL","document_url":"Document URL","video":"Video","document":"Document","form_field":"Formulier Veld","quiz_question":"Quiz Vraag","content":"Inhoud","form":"Formulier","quiz":"Quiz","mixed":"Gemengde Inhoud","approval":"Goedkeuring Vereist","items":"Items","version":"Versie","no_description":"Geen beschrijving opgegeven","edit":"Bewerken","duplicate":"Dupliceren","delete":"Verwijderen","collapse":"Inklappen","template":"Sjabloon","translate":"Vertalen","translate_workflow":"Workflow Vertalen","translating":"Bezig met vertalen...","translation_success":"Workflow succesvol vertaald","translation_failed":"Vertaling van workflow mislukt","empty":{"title":"Geen workflows gevonden","message":"Begin door je eerste workflow te maken met onze intu\xeftieve editor."},"access_denied":{"title":"Toegang Geweigerd","message":"Je hebt geen toestemming om de Flows Editor te gebruiken. Neem contact op met je beheerder voor toegang."},"validation":{"name_required":"Workflow naam is verplicht","slug_required":"Workflow slug is verplicht"},"create_success":"Workflow succesvol aangemaakt","create_failed":"Kan workflow niet aanmaken","update_success":"Workflow succesvol bijgewerkt","update_failed":"Kan workflow niet bijwerken","delete_success":"Workflow succesvol verwijderd","delete_failed":"Kan workflow niet verwijderen","delete_confirm":"Weet je zeker dat je deze workflow wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","load_failed":"Kan workflows niet laden","wizard":{"title":"Nieuwe Workflow Maken","step1":"Basis Info","step2":"Sjabloon","step3":"Beoordeling","basic_info":"Basis Informatie","basic_info_description":"Begin door basis informatie over je workflow te verstrekken.","choose_template":"Kies Sjabloon","template_description":"Selecteer een sjabloon om snel te beginnen, of kies blanco om helemaal opnieuw te beginnen.","review":"Beoordelen & Maken","review_description":"Bekijk je workflow configuratie voordat je deze maakt.","next":"Volgende","previous":"Vorige","create_workflow":"Workflow Maken"},"copy_suffix":"(Kopie)","templates":{"blank":"Lege Workflow","blank_description":"Begin met een lege workflow en bouw deze helemaal opnieuw op.","onboarding":"Onboarding Sjabloon","onboarding_description":"Vooraf geconfigureerde workflow voor nieuwe medewerker onboarding met welkom, training en beoordelings fasen.","training":"Training Sjabloon","training_description":"Gestructureerde training workflow met introductie, materialen, oefeningen en testen.","assessment":"Beoordeling Sjabloon","assessment_description":"Competentie beoordeling workflow met voor-beoordeling, testen en prestatie beoordeling."},"template_phases":{"welcome_introduction":"Welkom & Introductie","safety_training":"Veiligheidstraining","company_policies":"Bedrijfsbeleid","skills_assessment":"Vaardigheden Beoordeling","final_review":"Eindreview","course_introduction":"Cursus Introductie","learning_materials":"Leermateriaal","practical_exercises":"Praktische Oefeningen","knowledge_test":"Kennistest","pre_assessment":"Voor-beoordeling","competency_test":"Competentietest","performance_review":"Prestatie Beoordeling"},"pdf_output":{"pdf_output_configuration":"PDF Output Configuratie","pdf_output_description":"Configureer automatische PDF generatie en levering voor deze workflow","pdf_output_overview":"Overzicht","pdf_templates":"Sjablonen","delivery_settings":"Levering","pdf_output_enable":"PDF Output Inschakelen","pdf_output_enable_description":"Genereer automatisch PDF documenten wanneer gebruikers quizzes of fasen voltooien","configured_templates":"Geconfigureerde Sjablonen","quiz_triggers":"Quiz Triggers","email_delivery":"E-mail Levering","enabled":"Ingeschakeld","disabled":"Uitgeschakeld","no_pdf_templates_configured":"Geen PDF Sjablonen Geconfigureerd","add_pdf_template_description":"Voeg PDF sjablonen toe om automatisch certificaten, rapporten of formulieren te genereren wanneer gebruikers deze workflow voltooien","add_first_template":"Voeg Je Eerste Sjabloon Toe","pdf_template_associations":"PDF Sjabloon Koppelingen","add_template":"Sjabloon Toevoegen","enable_pdf_output_first":"Schakel PDF output in op het Overzicht tabblad om sjablonen te configureren","unknown_template":"Onbekend Sjabloon","configure_mapping":"Mapping Configureren","remove":"Verwijderen","trigger_when":"Activeren Wanneer","quiz_completed":"Quiz Voltooid","phase_completed":"Fase Voltooid","workflow_completed":"Workflow Voltooid","manual_generation":"Handmatige Generatie","enable_this_template":"Dit sjabloon inschakelen","data_fields_mapped":"Data velden gekoppeld","fields":"velden","recipients":"Ontvangers","user":"Gebruiker","manager":"Manager","hr":"HR Afdeling","custom":"aangepaste ontvangers","none":"Geen","email_delivery_description":"Verstuur automatisch gegenereerde PDFs via e-mail naar gespecificeerde ontvangers","default_recipients":"Standaard Ontvangers","custom_recipients":"Aangepaste Ontvangers","enter_email_address":"Voer e-mailadres in...","browse_pdf_templates":"PDF Sjablonen Bladeren","search_templates":"Sjablonen zoeken...","templates_available":"sjablonen beschikbaar","no_templates_available":"Geen Sjablonen Beschikbaar","no_templates_description":"Er zijn geen PDF sjablonen beschikbaar voor selectie. Maak eerst sjablonen aan in de PDF Sjabloon Editor.","view_full_preview":"Volledige Voorvertoning Bekijken","preview_not_available":"Voorvertoning niet beschikbaar","loading_preview":"Voorvertoning laden...","template_type":"Sjabloon Type","page_format":"Pagina Formaat","available_fields":"Beschikbare Velden","created":"Aangemaakt","unknown":"Onbekend","template_fields":"Sjabloon Velden","select_template_to_preview":"Selecteer een sjabloon voor voorvertoning","select_template_description":"Kies een sjabloon uit de lijst om de voorvertoning en details te bekijken.","document":"Document","template_added_successfully":"Sjabloon succesvol toegevoegd","failed_to_load_templates":"Kan sjablonen niet laden","configure_data_mapping":"Data Mapping Configureren","visual_mapping":"Visuele Mapping","manual_mapping":"Handmatige Mapping","flow_data_fields":"Flow Data Velden","failed_to_load_template_fields":"Kan sjabloon velden niet laden","loading_template_fields":"Sjabloon velden laden...","template_field":"Sjabloon Veld","flow_data_field":"Flow Data Veld","actions":"Acties","select_flow_field":"Selecteer flow veld...","clear":"Wissen","save_mapping":"Mapping Opslaan","mapping_saved_successfully":"Mapping succesvol opgeslagen","use_manual_mapping_for_now":"Gebruik handmatige mapping tab voor nu","mapped_fields":"Gekoppelde Velden","workflow":"Workflow","phases":"Fasen","quiz":"Quiz Resultaten"}}'),api:JSON.parse('{"errors":{"general":{"networkError":"Netwerkfout. Controleer uw verbinding.","serverError":"Serverfout. Probeer het later opnieuw.","unauthorized":"U bent niet geautoriseerd om deze actie uit te voeren.","sessionExpired":"Uw sessie is verlopen. Log opnieuw in.","notFound":"De opgevraagde bron is niet gevonden.","validationError":"Controleer uw invoer en probeer opnieuw.","timeout":"Verzoek time-out. Probeer het opnieuw."},"auth":{"invalidCredentials":"Ongeldig e-mailadres of wachtwoord.","emailNotFound":"Geen account gevonden met dit e-mailadres.","passwordIncorrect":"Onjuist wachtwoord.","accountDisabled":"Uw account is uitgeschakeld.","magicLinkInvalid":"Deze inloglink is ongeldig of verlopen.","magicLinkUsed":"Deze inloglink is al gebruikt.","logoutFailed":"Uitloggen mislukt. Probeer het opnieuw."},"crew":{"createFailed":"Aanmaken bemanningslid mislukt.","updateFailed":"Bijwerken bemanningslid mislukt.","deleteFailed":"Verwijderen bemanningslid mislukt.","notFound":"Bemanningslid niet gevonden.","emailExists":"Een bemanningslid met dit e-mailadres bestaat al.","invalidData":"Ongeldige bemanningslid gegevens opgegeven."},"manager":{"createFailed":"Aanmaken manager mislukt.","updateFailed":"Bijwerken manager mislukt.","deleteFailed":"Verwijderen manager mislukt.","notFound":"Manager niet gevonden.","emailExists":"Een manager met dit e-mailadres bestaat al.","noPermission":"U heeft geen toestemming om andere managers te beheren."},"training":{"sessionNotFound":"Trainingssessie niet gevonden.","itemNotFound":"Trainingsitem niet gevonden.","alreadyCompleted":"Dit trainingsitem is al voltooid.","notStarted":"Start eerst de trainingsfase.","completeFailed":"Markeren als voltooid mislukt.","proofRequired":"Bewijs van voltooiing is vereist voor dit item.","uploadFailed":"Uploaden bewijsdocument mislukt."},"quiz":{"notAvailable":"Examen is nog niet beschikbaar.","alreadyPassed":"U bent al geslaagd voor dit examen.","submitFailed":"Indienen examen mislukt.","reviewFailed":"Beoordelen examen mislukt.","notFound":"Examen niet gevonden.","invalidAnswers":"Ongeldige examenantwoorden opgegeven.","incompleteTraining":"Voltooi alle trainingsitems voordat u het examen doet."},"certificates":{"generateFailed":"Genereren certificaat mislukt.","notFound":"Certificaat niet gevonden.","notEligible":"Gebruiker komt niet in aanmerking voor certificaat.","sendFailed":"Versturen certificaat e-mail mislukt."},"email":{"sendFailed":"Versturen e-mail mislukt.","invalidAddress":"Ongeldig e-mailadres.","templateNotFound":"E-mailsjabloon niet gevonden.","attachmentFailed":"Toevoegen document mislukt."},"pdf":{"generateFailed":"Genereren PDF mislukt.","templateNotFound":"PDF sjabloon niet gevonden.","invalidData":"Ongeldige gegevens voor PDF generatie."},"upload":{"failed":"Uploaden bestand mislukt.","tooLarge":"Bestand is te groot. Maximale grootte is {{maxSize}}.","invalidType":"Ongeldig bestandstype. Toegestane types: {{allowedTypes}}.","noFile":"Geen bestand opgegeven."}},"success":{"saved":"Wijzigingen succesvol opgeslagen.","created":"Succesvol aangemaakt.","updated":"Succesvol bijgewerkt.","deleted":"Succesvol verwijderd.","sent":"Succesvol verstuurd.","completed":"Succesvol voltooid.","approved":"Succesvol goedgekeurd.","rejected":"Succesvol afgekeurd."}}'),errors:JSON.parse('{"network":{"connection_lost":"Verbinding verloren. Controleer uw internetverbinding en probeer opnieuw.","slow_connection":"Uw verbinding lijkt traag. Dit kan iets langer duren dan gewoonlijk.","offline":"U lijkt offline te zijn. Controleer uw internetverbinding.","timeout":"Het verzoek duurt langer dan verwacht. Probeer opnieuw.","server_unreachable":"Kan onze servers niet bereiken. Controleer uw verbinding en probeer opnieuw."},"authentication":{"session_expired":"Uw sessie is verlopen. Log opnieuw in om door te gaan.","session_expiring_soon":"Uw sessie verloopt over {{minutes}} minuten. Sla uw werk op.","login_failed":"We konden u niet inloggen. Controleer uw gegevens en probeer opnieuw.","login_link_expired":"Deze inloglink is verlopen. Vraag een nieuwe aan op de inlogpagina.","login_link_invalid":"Deze inloglink is niet geldig. Vraag een nieuwe aan op de inlogpagina.","access_denied":"U heeft geen toegang tot dit gebied. Neem contact op met uw beheerder als u toegang nodig heeft.","token_invalid":"Uw inlogsessie is niet meer geldig. Log opnieuw in."},"onboarding":{"progress_save_failed":"We konden uw voortgang niet opslaan. Uw werk is veilig, maar probeer opnieuw.","step_load_failed":"Kan deze onboarding-stap niet laden. Ververs de pagina en probeer opnieuw.","completion_failed":"We konden uw onboarding niet voltooien. Probeer opnieuw of neem contact op met ondersteuning.","role_selection_failed":"Kan uw rolselectie niet opslaan. Probeer uw rol opnieuw te selecteren.","analytics_failed":"Voortgangsregistratie is tijdelijk niet beschikbaar, maar uw onboarding gaat normaal door."},"training":{"phase_load_failed":"Kan Fase {{phase}} training niet laden. Ververs de pagina en probeer opnieuw.","item_load_failed":"Dit trainingsonderdeel kon niet worden geladen. Probeer opnieuw of ga naar het volgende onderdeel.","completion_failed":"We konden deze training niet als voltooid markeren. Probeer opnieuw.","quiz_load_failed":"De quiz kon niet worden geladen. Ververs de pagina en probeer opnieuw.","quiz_submit_failed":"Uw quiz-antwoorden konden niet worden verzonden. Probeer opnieuw.","progress_sync_failed":"Uw trainingsvoortgang kon niet worden gesynchroniseerd. Uw werk is lokaal opgeslagen."},"certificates":{"generation_failed":"Uw certificaat kon nu niet worden gegenereerd. Probeer later opnieuw.","download_failed":"Certificaat download mislukt. Probeer opnieuw of neem contact op met ondersteuning.","not_eligible":"U komt nog niet in aanmerking voor dit certificaat. Voltooi eerst alle vereiste training."},"file_operations":{"upload_failed":"Bestand uploaden mislukt. Controleer uw bestand en probeer opnieuw.","file_too_large":"Dit bestand is te groot. Kies een kleiner bestand (max {{maxSize}}).","invalid_file_type":"Dit bestandstype wordt niet ondersteund. Kies een {{allowedTypes}} bestand.","download_failed":"Bestand downloaden mislukt. Probeer opnieuw."},"form_validation":{"required_field":"Dit veld is verplicht.","invalid_email":"Voer een geldig e-mailadres in.","password_too_short":"Wachtwoord moet minimaal {{minLength}} tekens lang zijn.","passwords_dont_match":"Wachtwoorden komen niet overeen.","invalid_date":"Voer een geldige datum in.","future_date_required":"Datum moet in de toekomst liggen.","past_date_required":"Datum moet in het verleden liggen."},"server":{"internal_error":"Er ging iets mis aan onze kant. Probeer over een paar momenten opnieuw.","maintenance":"Het systeem is tijdelijk in onderhoud. Probeer later opnieuw.","overloaded":"Onze servers zijn momenteel druk bezet. Wacht even en probeer opnieuw.","database_error":"Er is een tijdelijk probleem met onze database. Probeer binnenkort opnieuw."},"recovery":{"refresh_page":"Probeer de pagina te verversen","check_connection":"Controleer uw internetverbinding","try_again_later":"Probeer over een paar minuten opnieuw","contact_support":"Neem contact op met ondersteuning als het probleem aanhoudt","save_work":"Sla uw werk op voordat u opnieuw probeert","restart_browser":"Probeer uw browser opnieuw te starten"},"maritime_specific":{"vessel_data_unavailable":"Scheepsinformatie is tijdelijk niet beschikbaar. Uw training kan doorgaan.","crew_record_sync_failed":"Uw bemanningsrecord kon niet worden gesynchroniseerd. Wijzigingen zijn lokaal opgeslagen.","safety_protocol_load_failed":"Veiligheidsprotocollen konden niet worden geladen. Neem contact op met uw veiligheidsofficier.","compliance_check_failed":"Compliance verificatie is tijdelijk niet beschikbaar.","boarding_date_invalid":"Voer een geldige inschepingsdatum in.","position_not_recognized":"Deze bemanningspositie wordt niet herkend. Neem contact op met HR."},"user_friendly":{"something_went_wrong":"Oeps! Iets werkte niet zoals verwacht.","please_try_again":"Probeer opnieuw.","working_on_it":"We werken aan het oplossen hiervan.","almost_there":"U bent er bijna! Nog \xe9\xe9n keer proberen.","technical_difficulties":"We ondervinden enkele technische problemen.","back_soon":"Alles zou binnenkort weer normaal moeten werken."},"actions":{"retry":"Opnieuw Proberen","refresh":"Pagina Verversen","go_back":"Ga Terug","contact_support":"Contact Ondersteuning","skip":"Deze Stap Overslaan","save_and_continue":"Opslaan en Doorgaan","try_later":"Later Proberen","report_problem":"Probleem Melden"},"help":{"what_happened":"Wat is er gebeurd?","what_to_do":"Wat moet ik doen?","need_help":"Hulp nodig?","common_solutions":"Veelvoorkomende oplossingen:","still_stuck":"Nog steeds problemen?","contact_info":"Neem contact op met uw systeembeheerder of IT-ondersteuning."}}'),feedback:JSON.parse('{"quick":{"how_was_experience":"Hoe was uw ervaring?","good_experience":"Goede ervaring","okay_experience":"Redelijke ervaring","poor_experience":"Slechte ervaring"},"detailed":{"open_detailed":"Gedetailleerde feedback","rate_experience":"Beoordeel uw ervaring","additional_comments":"Aanvullende opmerkingen (optioneel)","comment_placeholder":"Vertel ons over uw ervaring, eventuele problemen die u tegenkwam, of suggesties voor verbetering...","characters":"karakters","context":"Context","submitting":"Verzenden...","submit":"Feedback Verzenden"},"contexts":{"general":"Algemene Feedback","training_completion":"Training Voltooiing","quiz_completion":"Quiz Voltooiing","offline_mode":"Offline Ervaring","error_recovery":"Foutherstel"},"validation":{"rating_or_comment_required":"Geef alstublieft een beoordeling of opmerking"},"errors":{"submission_failed":"Feedback verzenden mislukt. Probeer het opnieuw."}}')}};va.use(Za).use(Aa).init({resources:es,fallbackLng:"en",defaultNS:"common",nsSeparator:":",keySeparator:".",detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"],lookupLocalStorage:"i18nextLng",checkWhitelist:!0},supportedLngs:["en","nl"],nonExplicitSupportedLngs:!1,interpolation:{escapeValue:!1},react:{useSuspense:!1},debug:!1});const ts=va;const ns=new class{constructor(){this.defaultDuration=5e3,this.networkErrorDuration=7e3,this.criticalErrorDuration=1e4}getCurrentLanguage(){return ts.language||"en"}translateError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return ts.t("errors:".concat(e),t)}catch(n){return console.warn("Translation missing for errors:".concat(e),n),ts.t("common:errors.generic",t)}}categorizeError(e){var t,n,r,i,a;if(!e)return"unknown";if(!e.response&&("NETWORK_ERROR"===e.code||null!==(t=e.message)&&void 0!==t&&t.includes("Network Error")))return"network";if("ECONNABORTED"===e.code||null!==(n=e.message)&&void 0!==n&&n.includes("timeout"))return"timeout";if(null!==(r=e.response)&&void 0!==r&&r.status){const t=e.response.status;if(401===t)return"authentication";if(403===t)return"authorization";if(404===t)return"not_found";if(422===t)return"validation";if(t>=500)return"server"}if(null!==(i=e.response)&&void 0!==i&&null!==(a=i.data)&&void 0!==a&&a.error){const t=e.response.data.error.toLowerCase();if(t.includes("session")||t.includes("token"))return"authentication";if(t.includes("permission")||t.includes("access"))return"authorization";if(t.includes("validation")||t.includes("invalid"))return"validation"}return"generic"}getErrorMessage(e){var t,n,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";const a=this.categorizeError(e),s=null===(t=e.response)||void 0===t?void 0:t.data;switch(a){case"network":return!1===navigator.onLine?this.translateError("network.offline"):this.translateError("network.connection_lost");case"timeout":return this.translateError("network.timeout");case"authentication":return null!==s&&void 0!==s&&null!==(n=s.error)&&void 0!==n&&n.includes("expired")?this.translateError("authentication.session_expired"):null!==s&&void 0!==s&&null!==(r=s.error)&&void 0!==r&&r.includes("login link")?this.translateError("authentication.login_link_expired"):this.translateError("authentication.login_failed");case"authorization":return this.translateError("authentication.access_denied");case"not_found":return this.getContextualNotFoundMessage(i);case"validation":return this.getValidationErrorMessage(s);case"server":return this.translateError("server.internal_error");default:return this.getContextualGenericMessage(i,s)}}getContextualNotFoundMessage(e){switch(e){case"training":return this.translateError("training.item_load_failed");case"quiz":return this.translateError("training.quiz_load_failed");case"certificate":return this.translateError("certificates.not_eligible");default:return this.translateError("common:errors.not_found")}}getValidationErrorMessage(e){if(null!==e&&void 0!==e&&e.details){const t=e.details.toLowerCase();if(t.includes("email"))return this.translateError("form_validation.invalid_email");if(t.includes("password"))return this.translateError("form_validation.password_too_short");if(t.includes("required"))return this.translateError("form_validation.required_field")}return this.translateError("common:errors.validationError")}getContextualGenericMessage(e,t){switch(e){case"onboarding":return this.translateError("onboarding.progress_save_failed");case"training":return this.translateError("training.completion_failed");case"quiz":return this.translateError("training.quiz_submit_failed");case"certificate":return this.translateError("certificates.generation_failed");case"file_upload":return this.translateError("file_operations.upload_failed");default:return this.translateError("user_friendly.something_went_wrong")}}getRecoverySuggestions(e){switch(this.categorizeError(e)){case"network":return[this.translateError("recovery.check_connection"),this.translateError("recovery.refresh_page"),this.translateError("recovery.try_again_later")];case"authentication":return[this.translateError("recovery.refresh_page"),this.translateError("actions.retry")];case"server":return[this.translateError("recovery.try_again_later"),this.translateError("recovery.refresh_page"),this.translateError("recovery.contact_support")];default:return[this.translateError("actions.retry"),this.translateError("recovery.refresh_page")]}}showError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getErrorMessage(e,t),i=this.categorizeError(e);let a=this.defaultDuration;"network"===i&&(a=this.networkErrorDuration),"server"===i&&(a=this.criticalErrorDuration);const s=We({duration:n.duration||a,style:{background:"#dc2626",color:"#fff",fontSize:"14px",fontWeight:"500",borderRadius:"8px",padding:"12px 16px",maxWidth:"400px"},iconTheme:{primary:"#dc2626",secondary:"#fff"}},n.toastOptions);if(n.showRecovery){const n=this.getRecoverySuggestions(e,t),i="".concat(r,"\n\n").concat(this.translateError("help.what_to_do")," ").concat(n[0]);return rn.error(i,s)}return rn.error(r,s)}showSuccess(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.translateError(e,t.params);return rn.success(n,We({duration:3e3,style:{background:"#059669",color:"#fff",fontSize:"14px",fontWeight:"500",borderRadius:"8px",padding:"12px 16px"},iconTheme:{primary:"#059669",secondary:"#fff"}},t.toastOptions))}showWarning(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.translateError(e,t.params);return rn(n,We({duration:4e3,icon:"\u26a0\ufe0f",style:{background:"#d97706",color:"#fff",fontSize:"14px",fontWeight:"500",borderRadius:"8px",padding:"12px 16px"}},t.toastOptions))}handleMaritimeError(e,t){var n,r,i;const a=(null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r||null===(i=r.error)||void 0===i?void 0:i.toLowerCase())||"";return a.includes("vessel")?this.showError(e,"maritime",{customMessage:this.translateError("maritime_specific.vessel_data_unavailable")}):a.includes("crew record")?this.showError(e,"maritime",{customMessage:this.translateError("maritime_specific.crew_record_sync_failed")}):a.includes("safety protocol")?this.showError(e,"maritime",{customMessage:this.translateError("maritime_specific.safety_protocol_load_failed")}):this.showError(e,t)}isOffline(){return!1===navigator.onLine}handleOfflineError(){return this.showWarning("network.offline",{duration:this.networkErrorDuration,showRecovery:!0})}logError(e,t){}},rs=ns,is=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const n=(e=>{if(!e)return null;try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp}catch(t){return null}})(e);if(!n)return!1;const r=n-Date.now();return r<=60*t*1e3&&r>0},as={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"/api";console.log("API baseURL:",as,"Length:",as.length);const ss=Ai.create({baseURL:as.trim(),timeout:3e4});ss.interceptors.request.use((e=>{const t=localStorage.getItem("token");if(t){if((e=>{if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])),n=Date.now()/1e3;return t.exp<n}catch(t){return!0}})(t))return localStorage.removeItem("token"),rn.error("Your session has expired. Please log in again."),window.location.href="/login",Promise.reject(new Error("Token expired"));is(t,5)&&rn.error("Your session will expire soon. Please save your work and log in again.",{duration:8e3,id:"token-expiring-warning"}),e.headers.Authorization="Bearer ".concat(t)}return e}),(e=>Promise.reject(e))),ss.interceptors.response.use((e=>e),(e=>{var t,n;const{response:r}=e;return rs.logError(e,"api_interceptor",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(n=e.config)||void 0===n?void 0:n.method,status:null===r||void 0===r?void 0:r.status}),401===(null===r||void 0===r?void 0:r.status)?(localStorage.removeItem("token"),rs.showError(e,"authentication"),setTimeout((()=>{window.location.href="/login"}),1e3)):403===(null===r||void 0===r?void 0:r.status)?rs.showError(e,"authorization"):(null===r||void 0===r?void 0:r.status)>=500?rs.showError(e,"server"):r?rs.showError(e,"general"):rs.isOffline()?rs.handleOfflineError():rs.showError(e,"network"),Promise.reject(e)}));const os=async e=>(await ss.post("/auth/magic-login",{token:e})).data,ls=async(e,t)=>(await ss.post("/auth/admin-login",{email:e,password:t})).data,cs=async e=>(await ss.post("/auth/dev-login",{email:e})).data,ds=async()=>(await ss.get("/auth/verify")).data,us=async e=>(await ss.post("/auth/request-magic-link",{email:e})).data,hs=async e=>(await ss.post("/manager/crew",e)).data,ps=async()=>(await ss.get("/manager/crew")).data,ms=async(e,t)=>(await ss.put("/manager/crew/".concat(e),t)).data,fs=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await ss.delete("/manager/crew/".concat(e).concat(t?"?forceDelete=true":""))).data},gs=async(e,t)=>(await ss.post("/manager/crew/bulk-action",{action:e,userIds:t})).data,vs=async e=>(await ss.post("/manager/crew/".concat(e,"/send-magic-link"))).data,bs=async e=>(await ss.post("/manager/crew/".concat(e,"/send-safety-pdf"))).data,ys=async e=>(await ss.post("/manager/crew/".concat(e,"/send-onboarding-start"))).data,xs=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(await ss.post("/manager/crew/".concat(e,"/resend-completion-email"),{comments:t})).data},ws=async()=>(await ss.get("/manager/dashboard/stats")).data,_s=async()=>(await ss.get("/manager/quiz-reviews/pending")).data,ks=async(e,t)=>(await ss.post("/manager/quiz-reviews/".concat(e,"/approve"),t)).data,js=async()=>(await ss.get("/manager/onboarding-reviews")).data,Ns=async e=>(await ss.post("/manager/onboarding-reviews/".concat(e,"/approve"))).data,Ss=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:t,limit:n,certificate_type:r,user_id:i,from_date:a,to_date:s,sort_by:o,sort_order:l}=e,c=new URLSearchParams;t&&c.append("page",t),n&&c.append("limit",n),r&&c.append("certificate_type",r),i&&c.append("user_id",i),a&&c.append("from_date",a),s&&c.append("to_date",s),o&&c.append("sort_by",o),l&&c.append("sort_order",l);const d="/manager/certificates".concat(c.toString()?"?".concat(c.toString()):"");return(await ss.get(d)).data},Es=async(e,t)=>(await ss.put("/manager/certificates/".concat(e),t)).data,Cs=async e=>(await ss.delete("/manager/certificates/".concat(e))).data,As=async e=>(await ss.post("/manager/certificates/regenerate",e)).data,Ts=async()=>(await ss.get("/crew/profile")).data,Os=async()=>(await ss.get("/crew/training/progress")).data,Ps=async e=>(await ss.get("/crew/training/phase/".concat(e))).data,Ms=async()=>(await ss.get("/crew/training/phases")).data,Ds=async e=>(await ss.get("/training/phase/".concat(e))).data,Rs=async(e,t)=>(await ss.post("/training/phase/".concat(e,"/item/").concat(t,"/complete"))).data,Ls=async(e,t)=>(await ss.delete("/training/phase/".concat(e,"/item/").concat(t,"/complete"))).data,Is=async e=>(await ss.get("/training/quiz/".concat(e))).data,Fs=async(e,t)=>(await ss.post("/training/quiz/".concat(e,"/submit"),t)).data,zs=async()=>(await ss.get("/training/quiz-history")).data,qs=async()=>(await ss.get("/training/stats")).data,Bs=async()=>(await ss.get("/templates")).data,Us=async e=>(await ss.get("/templates/".concat(e))).data,Ws=async e=>(await ss.post("/templates",e)).data,Hs=async(e,t)=>(await ss.put("/templates/".concat(e),t)).data,Vs=async(e,t)=>(await ss.patch("/templates/".concat(e,"/rename"),{name:t})).data,Gs=async e=>(await ss.delete("/templates/".concat(e))).data,Qs=async e=>(await ss.post("/templates/preview",e,{responseType:"blob"})).data,Ks=async()=>(await ss.get("/admin/stats")).data,Ys=async()=>(await ss.get("/admin/managers")).data,Xs=async e=>(await ss.get("/admin/managers/".concat(e))).data,Js=async e=>(await ss.post("/admin/managers",e)).data,$s=async(e,t)=>(await ss.patch("/admin/managers/".concat(e),t)).data,Zs=async e=>(await ss.delete("/admin/managers/".concat(e))).data,eo=async e=>(await ss.post("/admin/managers/".concat(e,"/send-magic-link"))).data,to=async e=>(await ss.post("/admin/managers/".concat(e,"/resend-welcome-email"))).data,no=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:t,limit:n,user_id:r,action:i,resource_type:a,from_date:s,to_date:o}=e,l=new URLSearchParams;t&&l.append("page",t),n&&l.append("limit",n),r&&l.append("user_id",r),i&&l.append("action",i),a&&l.append("resource_type",a),s&&l.append("from_date",s),o&&l.append("to_date",o);const c="/admin/audit-log".concat(l.toString()?"?".concat(l.toString()):"");return(await ss.get(c)).data},ro=async()=>(await ss.get("/admin/system-settings")).data,io=async e=>(await ss.put("/admin/system-settings",e)).data,ao=async e=>(await ss.post("/admin/system-settings",e)).data,so=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.metric&&t.append("metric",e.metric);const n="/admin/performance/metrics".concat(t.toString()?"?".concat(t.toString()):"");return(await ss.get(n)).data},oo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.location&&t.append("location",e.location);const n="/admin/performance/maritime".concat(t.toString()?"?".concat(t.toString()):"");return(await ss.get(n)).data},lo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.context&&t.append("context",e.context),e.type&&t.append("type",e.type);const n="/admin/feedback/summary".concat(t.toString()?"?".concat(t.toString()):"");return(await ss.get(n)).data},co=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.format&&t.append("format",e.format);const n="/admin/performance/export".concat(t.toString()?"?".concat(t.toString()):"");return await ss.get(n,{responseType:"blob"})},uo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.type&&t.append("type",e.type),e.status&&t.append("status",e.status),e.active_only&&t.append("active_only","true");const n="/workflows".concat(t.toString()?"?".concat(t.toString()):"");return(await ss.get(n)).data},ho=async e=>(await ss.post("/workflows",e)).data,po=async(e,t)=>(await ss.put("/workflows/edit-workflow",We({id:e},t))).data,mo=async e=>(await ss.delete("/workflows/edit-workflow",{data:{id:e}})).data,fo=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["nl","de"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await ss.post("/workflows/".concat(e,"/translate"),{targetLanguages:t,translationMethod:n.translationMethod||"ai",includePhases:!1!==n.includePhases,includeItems:!1!==n.includeItems})).data},go=async e=>(await ss.get("/workflows/translations?workflow_id=".concat(e))).data,vo=async(e,t)=>(await ss.post("/workflows/items/".concat(e,"/training-content"),t)).data,bo=async(e,t,n)=>(await ss.post("/workflows/items/".concat(e,"/link-training"),{training_phase_id:t,training_item_number:n})).data,yo={getQuizTranslations:async e=>(await ss.get("/training/quiz/".concat(e,"/translations"))).data,saveQuizTranslation:async(e,t)=>(await ss.post("/training/quiz/".concat(e,"/translations"),t)).data,deleteQuizTranslation:async(e,t)=>(await ss.delete("/training/quiz/".concat(e,"/translations"),{data:t})).data,translateQuiz:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await ss.post("/training/quiz/".concat(e,"/translate"),{target_languages:t,source_language:n.sourceLang||"en",translation_method:n.method||"ai",overwrite_existing:n.overwriteExisting||!1,include_answers:!1!==n.includeAnswers,include_explanations:!1!==n.includeExplanations})).data},getQuizInLanguage:async function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";const r=await yo.getQuizTranslations(e);return{phase:r.phase,language:n,questions:(null===(t=r.questions)||void 0===t?void 0:t.map((e=>{var t,i;return{question_index:e.question_index,question_text:e.content_languages[n]||e.content_languages[null===(t=r.translation_status)||void 0===t?void 0:t.source_language]||e.content_languages.en,answers:(null===(i=e.answer_options)||void 0===i?void 0:i.map((e=>{var t,i;return{answer_index:e.answer_index,text:e.content_languages[n]||e.content_languages[null===(t=r.translation_status)||void 0===t?void 0:t.source_language]||e.content_languages.en,explanation:e.explanation_languages[n]||e.explanation_languages[null===(i=r.translation_status)||void 0===i?void 0:i.source_language]||e.explanation_languages.en,is_correct:e.is_correct}})))||[],quiz_metadata:e.quiz_metadata||{}}})))||[]}},getQuizTranslationStatus:async e=>(await yo.getQuizTranslations(e)).translation_status||null},xo=ss;var wo=n(4414);const _o=(0,i.createContext)(),ko=()=>{const e=(0,i.useContext)(_o);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},jo=e=>{if(!e)return null;try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp}catch(t){return null}},No=e=>{const t=jo(e);return t?Math.max(0,t-Date.now()):0},So=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[a,s]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),[c]=(0,i.useState)("true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DEV_MODE),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[m,f]=(0,i.useState)(0),g=(0,i.useCallback)((async e=>{if(!e||(e=>{if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])),n=Date.now()/1e3;return t.exp<n}catch(t){return!0}})(e))return y(),!1;try{const t=await Ai.get("/api/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}});return r(t.data.user),s(e),!0}catch(t){return console.error("Token verification failed:",t),y(),!1}}),[]);(0,i.useEffect)((()=>{if(!a)return;const e=()=>{const e=No(a),t=e/6e4;t<=5&&t>0&&!d&&(u(!0),rn.error("Your session will expire in ".concat(Math.ceil(t)," minutes. Please save your work and log in again."),{duration:1e4,id:"session-expiring-warning"})),e<=0&&(rn.error("Your session has expired. Please log in again."),y())};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[a,d]),(0,i.useEffect)((()=>{const e=localStorage.getItem("token");e&&g(e),l(!1)}),[g]);const v=(0,i.useCallback)((e=>{localStorage.getItem("onboarding_completed_".concat(e.id))||"crew"!==e.role?p(!1):(p(!0),f(0))}),[]),b=(0,i.useCallback)(((e,t)=>{r(e),s(t),u(!1),localStorage.setItem("token",t),v(e)}),[v]),y=(0,i.useCallback)((()=>{r(null),s(null),u(!1),p(!1),f(0),localStorage.removeItem("token")}),[]),x=(0,i.useCallback)((()=>{n&&(localStorage.setItem("onboarding_completed_".concat(n.id),"true"),p(!1),f(0))}),[n]),w=(0,i.useCallback)((()=>{f((e=>e+1))}),[]),_=(0,i.useCallback)((()=>{x()}),[x]),k=(0,i.useCallback)((async e=>{if(!c)throw new Error("Dev mode is not enabled");try{const t=await cs(e),{token:n,user:i}=t;return localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("devModeLastUser",e),s(n),r(i),Ai.defaults.headers.common.Authorization="Bearer ".concat(n),v(i),rn.success("Switched to ".concat(i.role,": ").concat(i.firstName," ").concat(i.lastName)),t}catch(t){throw rn.error("Dev login failed"),t}}),[c,v]),j=()=>a?No(a):0,N={user:n,token:a,isLoading:o,login:b,logout:y,devLogin:k,isDevMode:c,isAuthenticated:!!n,isAdmin:"admin"===(null===n||void 0===n?void 0:n.role),isManager:"manager"===(null===n||void 0===n?void 0:n.role),isCrew:"crew"===(null===n||void 0===n?void 0:n.role),isManagerOrAdmin:"manager"===(null===n||void 0===n?void 0:n.role)||"admin"===(null===n||void 0===n?void 0:n.role),hasRoleAccess:e=>{const t={admin:3,manager:2,crew:1};return t[null===n||void 0===n?void 0:n.role]>=t[e]},getTokenTimeRemaining:j,isTokenExpiringSoon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=j();return t>0&&t<=60*e*1e3},tokenExpirationTime:a?jo(a):null,needsOnboarding:h,onboardingStep:m,completeOnboarding:x,nextOnboardingStep:w,skipOnboarding:_};return(0,wo.jsx)(_o.Provider,{value:N,children:t})},Eo=(0,i.createContext)(),Co=()=>{const e=(0,i.useContext)(Eo);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},Ao=e=>{let{children:t}=e;const{i18n:n}=Ma(),{user:r}=ko(),[a,s]=(0,i.useState)(n.language),o=[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}],l=async e=>{try{if(await n.changeLanguage(e),s(e),localStorage.setItem("i18nextLng",e),r&&"crew"===r.role)try{if(!(await fetch("/api/crew/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({preferredLanguage:e})})).ok)throw new Error("Failed to update language preference")}catch(t){console.error("Error updating language preference:",t)}}catch(t){console.error("Error changing language:",t),rn.error("Error changing language")}};(0,i.useEffect)((()=>{(async()=>{let e="en";if(r&&r.preferredLanguage)e=r.preferredLanguage;else{const t=localStorage.getItem("i18nextLng");if(t&&o.some((e=>e.code===t)))e=t;else{const t=navigator.language.split("-")[0];o.some((e=>e.code===t))&&(e=t)}}e!==a&&await l(e)})()}),[r]),(0,i.useEffect)((()=>{const e=e=>{s(e)};return n.on("languageChanged",e),()=>{n.off("languageChanged",e)}}),[n]);const c={currentLanguage:a,languages:o,changeLanguage:l,isRTL:!1};return(0,wo.jsx)(Eo.Provider,{value:c,children:t})},To="/api/crew/onboarding",Oo="".concat(To,"/analytics"),Po="".concat(To,"/progress");const Mo=new class{constructor(){this.sessionId=this.generateSessionId()}generateSessionId(){return"onb_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}async getProgress(e){try{const t=localStorage.getItem("token");if(!t)return console.warn("No authentication token found - using fallback"),null;console.log("\ud83d\udd0d Fetching onboarding progress for user:",e);const n=await fetch(Po,{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!n.ok){const e=await n.text();console.warn("Progress API failed:",n.status,e);const t=new Error(e);return t.response={status:n.status,data:{error:e}},rs.showError(t,"onboarding"),null}const r=await n.json();return console.log("\u2705 Progress fetched:",r.progress),r.progress}catch(t){return console.warn("Error in getProgress (using fallback):",t.message),null}}async initializeProgress(e){try{const t=localStorage.getItem("token");if(!t)return console.error("No authentication token found"),null;const n=await fetch(Po,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({current_step:0,completed_steps:[],custom_preferences:{started:(new Date).toISOString(),session_id:this.sessionId}})});if(!n.ok)return console.error("Error initializing onboarding progress:",n.statusText),null;const r=await n.json();return await this.trackEvent(e,"step_start",0,{session_id:this.sessionId,initialization:!0}),r.progress}catch(t){return console.error("Error in initializeProgress:",t),null}}async updateStep(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r;const i=localStorage.getItem("token");if(!i)return console.error("No authentication token found"),null;const a=await this.getProgress(e);if(!a)return console.error("No progress found for user:",e),null;if(t>3)return console.log("\ud83c\udfaf Reached end of onboarding, completing..."),await this.completeOnboarding(e);const s=(new Date).toISOString(),o=We(We({},(null===(r=a.custom_preferences)||void 0===r?void 0:r.step_timestamps)||{}),{},{["step_".concat(t,"_started")]:s});let l=[...a.completed_steps];t>a.current_step&&!l.includes(a.current_step)&&(l.push(a.current_step),o["step_".concat(a.current_step,"_completed")]=s);const c={current_step:t,completed_steps:l,custom_preferences:We(We({},a.custom_preferences),{},{step_timestamps:o,last_updated:s},n)};console.log("\ud83d\udce4 Updating progress with payload:",c);const d=await fetch(Po,{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){const e=await d.text();return console.error("Error updating onboarding step:",d.status,e),null}const u=await d.json();return await this.trackEvent(e,"step_complete",a.current_step,{session_id:this.sessionId,step_data:n,next_step:t}),await this.trackEvent(e,"step_start",t,{session_id:this.sessionId,previous_step:a.current_step}),u.progress}catch(i){return console.error("Error in updateStep:",i),null}}async saveRoleSelection(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const r=localStorage.getItem("token");if(!r)return console.error("No authentication token found"),null;const i=await this.getProgress(e);if(!i)return console.error("No progress found for user:",e),null;const a=await fetch(Po,{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({selected_role_focus:t,custom_preferences:We(We({},i.custom_preferences),{},{role_focus:t,role_preferences:n,role_selected_at:(new Date).toISOString()})})});if(!a.ok)return console.error("Error saving role selection:",a.statusText),null;const s=await a.json();return await this.trackEvent(e,"role_select",i.current_step,{session_id:this.sessionId,role_focus:t,preferences:n}),s.progress}catch(r){return console.error("Error in saveRoleSelection:",r),null}}async completeOnboarding(e){try{const t=localStorage.getItem("token");if(!t)return console.error("No authentication token found"),null;const n=await this.getProgress(e);if(!n)return console.error("No progress found for user:",e),null;const r=(new Date).toISOString(),i=[...new Set([...n.completed_steps,n.current_step])],a=await fetch(Po,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({is_completed:!0,completed_steps:i,custom_preferences:We(We({},n.custom_preferences),{},{step_timestamps:We(We({},n.custom_preferences.step_timestamps),{},{["step_".concat(n.current_step,"_completed")]:r,flow_completed:r})})})});if(!a.ok)return console.error("Error completing onboarding:",a.statusText),null;const s=await a.json();return await this.trackEvent(e,"flow_complete",n.current_step,{session_id:this.sessionId,total_steps_completed:i.length,selected_role_focus:n.selected_role_focus,completion_time:r}),s.progress}catch(t){return console.error("Error in completeOnboarding:",t),null}}async trackEvent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const i=localStorage.getItem("token");if(!i)return void console.warn("No authentication token found for analytics - skipping tracking");if(!e)return void console.warn("No user ID provided for analytics - skipping tracking");console.log("\ud83d\udcca Analytics tracking:",t,n,r);const a=await fetch(Oo,{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({event_type:t,step_number:n,event_data:r,session_id:this.sessionId})});if(a.ok)console.log("\u2705 Analytics tracked successfully:",t,n);else{const e=await a.text();console.warn("Analytics tracking failed:",a.status,e)}}catch(i){console.warn("Analytics tracking error (non-critical):",i.message)}}async needsOnboarding(e){try{const t=await this.getProgress(e);return!t||!t.is_completed}catch(t){return console.error("Error checking onboarding needs:",t),!0}}resetOnboardingForUser(e){console.log("\ud83d\udd04 Resetting onboarding for user:",e),localStorage.removeItem("onboarding_completed_".concat(e)),localStorage.removeItem("training_focus_".concat(e)),console.log("\u2705 LocalStorage cleared for user:",e)}},Do=Mo,Ro=(0,i.createContext)(),Lo=()=>{const e=(0,i.useContext)(Ro);if(!e)throw new Error("useOnboarding must be used within an OnboardingProvider");return e},Io=e=>{let{children:t}=e;const{user:n,isAuthenticated:r}=ko(),[a,s]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),u=(0,i.useCallback)((async()=>{if(null!==n&&void 0!==n&&n.id){if("crew"!==n.role)return s(null),void l(!1);try{l(!0),d(null);let e=await Do.getProgress(n.id);e||"crew"!==n.role||(e=await Do.initializeProgress(n.id)),s(e)}catch(e){console.error("Error loading onboarding progress:",e),d(e.message)}finally{l(!1)}}else l(!1)}),[null===n||void 0===n?void 0:n.id,null===n||void 0===n?void 0:n.role]);(0,i.useEffect)((()=>{r&&n?u():(s(null),l(!1))}),[r,n,u]);const h=(0,i.useCallback)((()=>!(!n||"crew"!==n.role)&&(!a||!a.is_completed)),[n,a]),p=(0,i.useCallback)((()=>(null===a||void 0===a?void 0:a.current_step)||0),[a]),m=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===n||void 0===n||!n.id)return!1;try{if(a){const t=a.current_step+1,r=await Do.updateStep(n.id,t,e);if(r)return s(r),!0}return console.warn("Enhanced onboarding step failed, using fallback"),!0}catch(t){return console.warn("Error advancing onboarding step (using fallback):",t.message),!0}}),[null===n||void 0===n?void 0:n.id,a]),f=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n||void 0===n||!n.id||!a)return!1;try{const r=await Do.updateStep(n.id,e,t);return!!r&&(s(r),!0)}catch(r){return console.error("Error going to onboarding step:",r),d(r.message),!1}}),[null===n||void 0===n?void 0:n.id,a]),g=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n||void 0===n||!n.id)return!1;try{const r=await Do.saveRoleSelection(n.id,e,t);return!!r&&(s(r),!0)}catch(r){return console.error("Error saving role selection:",r),d(r.message),!1}}),[null===n||void 0===n?void 0:n.id]),v=(0,i.useCallback)((async()=>{if(null===n||void 0===n||!n.id)return!1;try{if(a){const e=await Do.completeOnboarding(n.id);if(e)return s(e),localStorage.setItem("onboarding_completed_".concat(n.id),"true"),!0}return console.warn("Enhanced onboarding completion failed, using fallback"),localStorage.setItem("onboarding_completed_".concat(n.id),"true"),!0}catch(e){return console.warn("Error completing onboarding (using fallback):",e.message),localStorage.setItem("onboarding_completed_".concat(n.id),"true"),!0}}),[null===n||void 0===n?void 0:n.id,a]),b=(0,i.useCallback)((async()=>await v()),[v]),y=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!==n&&void 0!==n&&n.id&&r)try{await Do.trackEvent(n.id,e,null===a||void 0===a?void 0:a.current_step,t)}catch(i){console.warn("Analytics tracking failed (non-critical):",i.message)}else console.warn("Skipping analytics tracking - user not authenticated")}),[null===n||void 0===n?void 0:n.id,r,null===a||void 0===a?void 0:a.current_step]),x=(0,i.useCallback)((()=>{if(null===a||void 0===a||!a.selected_role_focus)return null;const e={schipper:{welcomeMessage:"Welkom aan boord, Schipper! Uw leiderschap en navigatie expertise is cruciaal voor onze binnenvaart operaties.",trainingFocus:"Leiderschap, Navigatie, en Wettelijke Verantwoordelijkheden",estimatedDuration:"8-10 uur",priority:"Leiderschap & Navigatie"},stuurman:{welcomeMessage:"Welkom aan boord, Stuurman! Uw navigatie ondersteuning houdt onze operaties veilig en effici\xebnt.",trainingFocus:"Navigatie Ondersteuning, Communicatie, en Operationele Procedures",estimatedDuration:"6-8 uur",priority:"Navigatie & Operaties"},matroos:{welcomeMessage:"Welkom aan boord, Matroos! Uw ervaring en mentoring vaardigheden zijn waardevol voor ons team.",trainingFocus:"Geavanceerde Dekoperaties, Lading Behandeling, en Mentoring",estimatedDuration:"5-7 uur",priority:"Dekoperaties & Mentoring"},deksman:{welcomeMessage:"Welkom aan boord, Deksman! Uw bijdrage aan ons team is gewaardeerd en belangrijk.",trainingFocus:"Basis Dekoperaties, Veiligheid, en Teamwerk",estimatedDuration:"4-5 uur",priority:"Basis Dekoperaties"}};return e[a.selected_role_focus]||e.deksman}),[null===a||void 0===a?void 0:a.selected_role_focus]),w=(0,i.useCallback)((()=>{if(!a)return 0;if(a.is_completed)return 100;return Math.round(a.completed_steps.length/3*100)}),[a]),_={progress:a,isLoading:o,error:c,needsOnboarding:h(),currentStep:p(),completionPercentage:w(),roleContent:x(),nextStep:m,goToStep:f,saveRoleSelection:g,completeOnboarding:v,skipOnboarding:b,trackEvent:y,refreshProgress:u,clearError:()=>d(null)};return(0,wo.jsx)(Ro.Provider,{value:_,children:t})};function Fo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const zo=["_f"],qo=["name"],Bo=["_f"],Uo=["ref","message","type"];var Wo=e=>"checkbox"===e.type,Ho=e=>e instanceof Date,Vo=e=>null==e;const Go=e=>"object"===typeof e;var Qo=e=>!Vo(e)&&!Array.isArray(e)&&Go(e)&&!Ho(e),Ko=e=>Qo(e)&&e.target?Wo(e.target)?e.target.checked:e.target.value:e,Yo=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Xo="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Jo(e){let t;const n=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Xo&&(e instanceof Blob||r)||!n&&!Qo(e))return e;if(t=n?[]:{},n||(e=>{const t=e.constructor&&e.constructor.prototype;return Qo(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=Jo(e[n]));else t=e}return t}var $o=e=>Array.isArray(e)?e.filter(Boolean):[],Zo=e=>void 0===e,el=(e,t,n)=>{if(!t||!Qo(e))return n;const r=$o(t.split(/[,[\].]+?/)).reduce(((e,t)=>Vo(e)?e:e[t]),e);return Zo(r)||r===e?Zo(e[t])?n:e[t]:r},tl=e=>"boolean"===typeof e,nl=e=>/^\w*$/.test(e),rl=e=>$o(e.replace(/["|']|\]/g,"").split(/\.|\[/)),il=(e,t,n)=>{let r=-1;const i=nl(t)?[t]:rl(t),a=i.length,s=a-1;for(;++r<a;){const t=i[r];let a=n;if(r!==s){const n=e[t];a=Qo(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=a,e=e[t]}};const al="blur",sl="focusout",ol="onBlur",ll="onChange",cl="onSubmit",dl="onTouched",ul="all",hl="max",pl="min",ml="maxLength",fl="minLength",gl="pattern",vl="required",bl="validate";i.createContext(null);var yl=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const i=a;return t._proxyFormState[i]!==ul&&(t._proxyFormState[i]=!r||ul),n&&(n[i]=!0),e[i]}});return i};const xl="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;var wl=e=>"string"===typeof e,_l=(e,t,n,r,i)=>wl(e)?(r&&t.watch.add(e),el(n,e,i)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),el(n,e)))):(r&&(t.watchAll=!0),n);var kl=(e,t,n,r,i)=>t?We(We({},n[e]),{},{types:We(We({},n[e]&&n[e].types?n[e].types:{}),{},{[r]:i||!0})}):{},jl=e=>Array.isArray(e)?e:[e],Nl=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},Sl=e=>Vo(e)||!Go(e);function El(e,t){if(Sl(e)||Sl(t))return e===t;if(Ho(e)&&Ho(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(Ho(n)&&Ho(e)||Qo(n)&&Qo(e)||Array.isArray(n)&&Array.isArray(e)?!El(n,e):n!==e)return!1}}return!0}var Cl=e=>Qo(e)&&!Object.keys(e).length,Al=e=>"file"===e.type,Tl=e=>"function"===typeof e,Ol=e=>{if(!Xo)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Pl=e=>"select-multiple"===e.type,Ml=e=>"radio"===e.type,Dl=e=>Ol(e)&&e.isConnected;function Rl(e,t){const n=Array.isArray(t)?t:nl(t)?[t]:rl(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Zo(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,a=n[i];return r&&delete r[a],0!==i&&(Qo(r)&&Cl(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Zo(e[t]))return!1;return!0}(r))&&Rl(e,n.slice(0,-1)),e}var Ll=e=>{for(const t in e)if(Tl(e[t]))return!0;return!1};function Il(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(Qo(e)||n)for(const r in e)Array.isArray(e[r])||Qo(e[r])&&!Ll(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Il(e[r],t[r])):Vo(e[r])||(t[r]=!0);return t}function Fl(e,t,n){const r=Array.isArray(e);if(Qo(e)||r)for(const i in e)Array.isArray(e[i])||Qo(e[i])&&!Ll(e[i])?Zo(t)||Sl(n[i])?n[i]=Array.isArray(e[i])?Il(e[i],[]):We({},Il(e[i])):Fl(e[i],Vo(t)?{}:t[i],n[i]):n[i]=!El(e[i],t[i]);return n}var zl=(e,t)=>Fl(e,t,Il(t));const ql={value:!1,isValid:!1},Bl={value:!0,isValid:!0};var Ul=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Zo(e[0].attributes.value)?Zo(e[0].value)||""===e[0].value?Bl:{value:e[0].value,isValid:!0}:Bl:ql}return ql},Wl=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:i}=t;return Zo(e)?e:n?""===e?NaN:e?+e:e:r&&wl(e)?new Date(e):i?i(e):e};const Hl={isValid:!1,value:null};var Vl=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Hl):Hl;function Gl(e){const t=e.ref;return Al(t)?t.files:Ml(t)?Vl(e.refs).value:Pl(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):Wo(t)?Ul(e.refs).value:Wl(Zo(t.value)?e.ref.value:t.value,e)}var Ql=e=>e instanceof RegExp,Kl=e=>Zo(e)?e:Ql(e)?e.source:Qo(e)?Ql(e.value)?e.value.source:e.value:e,Yl=e=>({isOnSubmit:!e||e===cl,isOnBlur:e===ol,isOnChange:e===ll,isOnAll:e===ul,isOnTouch:e===dl});const Xl="AsyncFunction";var Jl=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const $l=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=el(e,i);if(n){const{_f:e}=n,a=Fo(n,zo);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if($l(a,t))break}else if(Qo(a)&&$l(a,t))break}}};function Zl(e,t,n){const r=el(e,n);if(r||nl(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),a=el(t,r),s=el(e,r);if(a&&!Array.isArray(a)&&n!==r)return{name:n};if(s&&s.type)return{name:r,error:s};if(s&&s.root&&s.root.type)return{name:"".concat(r,".root"),error:s.root};i.pop()}return{name:n}}var ec=(e,t,n)=>{const r=jl(el(e,n));return il(r,"root",t[n]),il(e,n,r),e},tc=e=>wl(e);function nc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(tc(e)||Array.isArray(e)&&e.every(tc)||tl(e)&&!e)return{type:n,message:tc(e)?e:"",ref:t}}var rc=e=>Qo(e)&&!Ql(e)?e:{value:e,message:""},ic=async(e,t,n,r,i,a)=>{const{ref:s,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:p,validate:m,name:f,valueAsNumber:g,mount:v}=e._f,b=el(n,f);if(!v||t.has(f))return{};const y=o?o[0]:s,x=e=>{i&&y.reportValidity&&(y.setCustomValidity(tl(e)?"":e||""),y.reportValidity())},w={},_=Ml(s),k=Wo(s),j=_||k,N=(g||Al(s))&&Zo(s.value)&&Zo(b)||Ol(s)&&""===s.value||""===b||Array.isArray(b)&&!b.length,S=kl.bind(null,f,r,w),E=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ml,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fl;const a=e?t:n;w[f]=We({type:e?r:i,message:a,ref:s},S(e?r:i,a))};if(a?!Array.isArray(b)||!b.length:l&&(!j&&(N||Vo(b))||tl(b)&&!b||k&&!Ul(o).isValid||_&&!Vl(o).isValid)){const{value:e,message:t}=tc(l)?{value:!!l,message:l}:rc(l);if(e&&(w[f]=We({type:vl,message:t,ref:y},S(vl,t)),!r))return x(t),w}if(!N&&(!Vo(u)||!Vo(h))){let e,t;const n=rc(h),i=rc(u);if(Vo(b)||isNaN(b)){const r=s.valueAsDate||new Date(b),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;wl(n.value)&&b&&(e=o?a(b)>a(n.value):l?b>n.value:r>new Date(n.value)),wl(i.value)&&b&&(t=o?a(b)<a(i.value):l?b<i.value:r<new Date(i.value))}else{const r=s.valueAsNumber||(b?+b:b);Vo(n.value)||(e=r>n.value),Vo(i.value)||(t=r<i.value)}if((e||t)&&(E(!!e,n.message,i.message,hl,pl),!r))return x(w[f].message),w}if((c||d)&&!N&&(wl(b)||a&&Array.isArray(b))){const e=rc(c),t=rc(d),n=!Vo(e.value)&&b.length>+e.value,i=!Vo(t.value)&&b.length<+t.value;if((n||i)&&(E(n,e.message,t.message),!r))return x(w[f].message),w}if(p&&!N&&wl(b)){const{value:e,message:t}=rc(p);if(Ql(e)&&!b.match(e)&&(w[f]=We({type:gl,message:t,ref:s},S(gl,t)),!r))return x(t),w}if(m)if(Tl(m)){const e=nc(await m(b,n),y);if(e&&(w[f]=We(We({},e),S(bl,e.message)),!r))return x(e.message),w}else if(Qo(m)){let e={};for(const t in m){if(!Cl(e)&&!r)break;const i=nc(await m[t](b,n),y,t);i&&(e=We(We({},i),S(t,i.message)),x(i.message),r&&(w[f]=e))}if(!Cl(e)&&(w[f]=We({ref:y},e),!r))return w}return x(!0),w};const ac={mode:cl,reValidateMode:ll,shouldFocusError:!0};function sc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=We(We({},ac),e),n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Tl(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const r={};let i,a=(Qo(t.defaultValues)||Qo(t.values))&&Jo(t.defaultValues||t.values)||{},s=t.shouldUnregister?{}:Jo(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u=We({},d);const h={array:Nl(),state:Nl()},p=t.criteriaMode===ul,m=async e=>{if(!t.disabled&&(d.isValid||u.isValid||e)){const e=t.resolver?Cl((await y()).errors):await x(r,!0);e!==n.isValid&&h.state.next({isValid:e})}},f=(e,r)=>{!t.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach((e=>{e&&(r?il(n.validatingFields,e,r):Rl(n.validatingFields,e))})),h.state.next({validatingFields:n.validatingFields,isValidating:!Cl(n.validatingFields)}))},g=(e,t,n,i)=>{const l=el(r,e);if(l){const r=el(s,e,Zo(n)?el(a,e):n);Zo(r)||i&&i.defaultChecked||t?il(s,e,t?r:Gl(l._f)):k(e,r),o.mount&&m()}},v=(e,r,i,s,o)=>{let l=!1,c=!1;const p={name:e};if(!t.disabled){if(!i||s){(d.isDirty||u.isDirty)&&(c=n.isDirty,n.isDirty=p.isDirty=w(),l=c!==p.isDirty);const t=El(el(a,e),r);c=!!el(n.dirtyFields,e),t?Rl(n.dirtyFields,e):il(n.dirtyFields,e,!0),p.dirtyFields=n.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!t}if(i){const t=el(n.touchedFields,e);t||(il(n.touchedFields,e,i),p.touchedFields=n.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==i)}l&&o&&h.state.next(p)}return l?p:{}},b=(e,r,a,s)=>{const o=el(n.errors,e),l=(d.isValid||u.isValid)&&tl(r)&&n.isValid!==r;var p;if(t.delayError&&a?(p=()=>((e,t)=>{il(n.errors,e,t),h.state.next({errors:n.errors})})(e,a),i=e=>{clearTimeout(c),c=setTimeout(p,e)},i(t.delayError)):(clearTimeout(c),i=null,a?il(n.errors,e,a):Rl(n.errors,e)),(a?!El(o,a):o)||!Cl(s)||l){const t=We(We(We({},s),l&&tl(r)?{isValid:r}:{}),{},{errors:n.errors,name:e});n=We(We({},n),t),h.state.next(t)}},y=async e=>{f(e,!0);const n=await t.resolver(s,t.context,((e,t,n,r)=>{const i={};for(const a of e){const e=el(t,a);e&&il(i,a,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}})(e||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return f(e),n},x=async function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const o in e){const c=e[o];if(c){const{_f:e}=c,u=Fo(c,Bo);if(e){const u=l.array.has(e.name),h=c._f&&(!!(a=c._f)&&!!a.validate&&!!(Tl(a.validate)&&a.validate.constructor.name===Xl||Qo(a.validate)&&Object.values(a.validate).find((e=>e.constructor.name===Xl))));h&&d.validatingFields&&f([o],!0);const m=await ic(c,l.disabled,s,p,t.shouldUseNativeValidation&&!r,u);if(h&&d.validatingFields&&f([o]),m[e.name]&&(i.valid=!1,r))break;!r&&(el(m,e.name)?u?ec(n.errors,m,e.name):il(n.errors,e.name,m[e.name]):Rl(n.errors,e.name))}!Cl(u)&&await x(u,r,i)}}var a;return i.valid},w=(e,n)=>!t.disabled&&(e&&n&&il(s,e,n),!El(A(),a)),_=(e,t,n)=>_l(e,l,We({},o.mount?s:Zo(t)?a:wl(e)?{[e]:t}:t),n,t),k=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=el(r,e);let a=t;if(i){const n=i._f;n&&(!n.disabled&&il(s,e,Wl(t,n)),a=Ol(n.ref)&&Vo(t)?"":t,Pl(n.ref)?[...n.ref.options].forEach((e=>e.selected=a.includes(e.value))):n.refs?Wo(n.ref)?n.refs.forEach((e=>{e.defaultChecked&&e.disabled||(Array.isArray(a)?e.checked=!!a.find((t=>t===e.value)):e.checked=a===e.value||!!a)})):n.refs.forEach((e=>e.checked=e.value===a)):Al(n.ref)?n.ref.value="":(n.ref.value=a,n.ref.type||h.state.next({name:e,values:Jo(s)})))}(n.shouldDirty||n.shouldTouch)&&v(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&C(e)},j=(e,t,n)=>{for(const i in t){if(!t.hasOwnProperty(i))return;const a=t[i],s=e+"."+i,o=el(r,s);(l.array.has(e)||Qo(a)||o&&!o._f)&&!Ho(a)?j(s,a,n):k(s,a,n)}},N=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=el(r,e),p=l.array.has(e),m=Jo(t);il(s,e,m),p?(h.array.next({name:e,values:Jo(s)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&i.shouldDirty&&h.state.next({name:e,dirtyFields:zl(a,s),isDirty:w(e,m)})):!c||c._f||Vo(m)?k(e,m,i):j(e,m,i),Jl(e,l)&&h.state.next(We({},n)),h.state.next({name:o.mount?e:void 0,values:Jo(s)})},S=async e=>{o.mount=!0;const a=e.target;let c=a.name,g=!0;const w=el(r,c),_=e=>{g=Number.isNaN(e)||Ho(e)&&isNaN(e.getTime())||El(e,el(s,c,e))},k=Yl(t.mode),j=Yl(t.reValidateMode);if(w){let o,N;const S=a.type?Gl(w._f):Ko(e),E=e.type===al||e.type===sl,A=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(w._f)&&!t.resolver&&!el(n.errors,c)&&!w._f.deps||((e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e))(E,el(n.touchedFields,c),n.isSubmitted,j,k),T=Jl(c,l,E);il(s,c,S),E?(w._f.onBlur&&w._f.onBlur(e),i&&i(0)):w._f.onChange&&w._f.onChange(e);const O=v(c,S,E),P=!Cl(O)||T;if(!E&&h.state.next({name:c,type:e.type,values:Jo(s)}),A)return(d.isValid||u.isValid)&&("onBlur"===t.mode?E&&m():E||m()),P&&h.state.next(We({name:c},T?{}:O));if(!E&&T&&h.state.next(We({},n)),t.resolver){const{errors:e}=await y([c]);if(_(S),g){const t=Zl(n.errors,r,c),i=Zl(e,r,t.name||c);o=i.error,c=i.name,N=Cl(e)}}else f([c],!0),o=(await ic(w,l.disabled,s,p,t.shouldUseNativeValidation))[c],f([c]),_(S),g&&(o?N=!1:(d.isValid||u.isValid)&&(N=await x(r,!0)));g&&(w._f.deps&&C(w._f.deps),b(c,N,o,O))}},E=(e,t)=>{if(el(n.errors,t)&&e.focus)return e.focus(),1},C=async function(e){let i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=jl(e);if(t.resolver){const t=await(async e=>{const{errors:t}=await y(e);if(e)for(const r of e){const e=el(t,r);e?il(n.errors,r,e):Rl(n.errors,r)}else n.errors=t;return t})(Zo(e)?e:o);i=Cl(t),a=e?!o.some((e=>el(t,e))):i}else e?(a=(await Promise.all(o.map((async e=>{const t=el(r,e);return await x(t&&t._f?{[e]:t}:t)})))).every(Boolean),(a||n.isValid)&&m()):a=i=await x(r);return h.state.next(We(We(We({},!wl(e)||(d.isValid||u.isValid)&&i!==n.isValid?{}:{name:e}),t.resolver||!e?{isValid:i}:{}),{},{errors:n.errors})),s.shouldFocus&&!a&&$l(r,E,e?o:l.mount),a},A=e=>{const t=We({},o.mount?s:a);return Zo(e)?t:wl(e)?el(t,e):e.map((e=>el(t,e)))},T=(e,t)=>({invalid:!!el((t||n).errors,e),isDirty:!!el((t||n).dirtyFields,e),error:el((t||n).errors,e),isValidating:!!el(n.validatingFields,e),isTouched:!!el((t||n).touchedFields,e)}),O=(e,t,i)=>{const a=(el(r,e,{_f:{}})._f||{}).ref,s=el(n.errors,e)||{},{ref:o,message:l,type:c}=s,d=Fo(s,Uo);il(n.errors,e,We(We(We({},d),t),{},{ref:a})),h.state.next({name:e,errors:n.errors,isValid:!1}),i&&i.shouldFocus&&a&&a.focus&&a.focus()},P=e=>h.state.subscribe({next:t=>{var r,i,a;r=e.name,i=t.name,a=e.exact,r&&i&&r!==i&&!jl(r).some((e=>e&&(a?e===i:e.startsWith(i)||i.startsWith(e))))||!((e,t,n,r)=>{n(e);const{name:i}=e,a=Fo(e,qo);return Cl(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find((e=>t[e]===(!r||ul)))})(t,e.formState||d,q,e.reRenderRoot)||e.callback(We(We({values:We({},s)},n),t))}}).unsubscribe,M=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const o of e?jl(e):l.mount)l.mount.delete(o),l.array.delete(o),i.keepValue||(Rl(r,o),Rl(s,o)),!i.keepError&&Rl(n.errors,o),!i.keepDirty&&Rl(n.dirtyFields,o),!i.keepTouched&&Rl(n.touchedFields,o),!i.keepIsValidating&&Rl(n.validatingFields,o),!t.shouldUnregister&&!i.keepDefaultValue&&Rl(a,o);h.state.next({values:Jo(s)}),h.state.next(We(We({},n),i.keepDirty?{isDirty:w()}:{})),!i.keepIsValid&&m()},D=e=>{let{disabled:t,name:n}=e;(tl(t)&&o.mount||t||l.disabled.has(n))&&(t?l.disabled.add(n):l.disabled.delete(n))},R=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=el(r,e);const s=tl(n.disabled)||tl(t.disabled);return il(r,e,We(We({},i||{}),{},{_f:We(We({},i&&i._f?i._f:{ref:{name:e}}),{},{name:e,mount:!0},n)})),l.mount.add(e),i?D({disabled:tl(n.disabled)?n.disabled:t.disabled,name:e}):g(e,!0,n.value),We(We(We({},s?{disabled:n.disabled||t.disabled}:{}),t.progressive?{required:!!n.required,min:Kl(n.min),max:Kl(n.max),minLength:Kl(n.minLength),maxLength:Kl(n.maxLength),pattern:Kl(n.pattern)}:{}),{},{name:e,onChange:S,onBlur:S,ref:s=>{if(s){R(e,n),i=el(r,e);const t=Zo(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,o=(e=>Ml(e)||Wo(e))(t),l=i._f.refs||[];if(o?l.find((e=>e===t)):t===i._f.ref)return;il(r,e,{_f:We(We({},i._f),o?{refs:[...l.filter(Dl),t,...Array.isArray(el(a,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t})}),g(e,!1,void 0,t)}else i=el(r,e,{}),i._f&&(i._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&(!Yo(l.array,e)||!o.action)&&l.unMount.add(e)}})},L=()=>t.shouldFocusError&&$l(r,E,l.mount),I=(e,i)=>async a=>{let o;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=Jo(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:e,values:t}=await y();n.errors=e,c=t}else await x(r);if(l.disabled.size)for(const e of l.disabled)il(c,e,void 0);if(Rl(n.errors,"root"),Cl(n.errors)){h.state.next({errors:{}});try{await e(c,a)}catch(d){o=d}}else i&&await i(We({},n.errors),a),L(),setTimeout(L);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cl(n.errors)&&!o,submitCount:n.submitCount+1,errors:n.errors}),o)throw o},F=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=e?Jo(e):a,u=Jo(c),p=Cl(e),m=p?a:u;if(i.keepDefaultValues||(a=c),!i.keepValues){if(i.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(zl(a,s))]);for(const t of Array.from(e))el(n.dirtyFields,t)?il(m,t,el(s,t)):N(t,el(m,t))}else{if(Xo&&Zo(e))for(const e of l.mount){const t=el(r,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Ol(e)){const t=e.closest("form");if(t){t.reset();break}}}}for(const e of l.mount)N(e,el(m,e))}s=Jo(m),h.array.next({values:We({},m)}),h.state.next({values:We({},m)})}l={mount:i.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!i.keepIsValid||!!i.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:i.keepSubmitCount?n.submitCount:0,isDirty:!p&&(i.keepDirty?n.isDirty:!(!i.keepDefaultValues||El(e,a))),isSubmitted:!!i.keepIsSubmitted&&n.isSubmitted,dirtyFields:p?{}:i.keepDirtyValues?i.keepDefaultValues&&s?zl(a,s):n.dirtyFields:i.keepDefaultValues&&e?zl(a,e):i.keepDirty?n.dirtyFields:{},touchedFields:i.keepTouched?n.touchedFields:{},errors:i.keepErrors?n.errors:{},isSubmitSuccessful:!!i.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1})},z=(e,t)=>F(Tl(e)?e(s):e,t),q=e=>{n=We(We({},n),e)},B={control:{register:R,unregister:M,getFieldState:T,handleSubmit:I,setError:O,_subscribe:P,_runSchema:y,_focusError:L,_getWatch:_,_getDirty:w,_setValid:m,_setFieldArray:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&l&&!t.disabled){if(o.action=!0,m&&Array.isArray(el(r,e))){const t=l(el(r,e),c.argA,c.argB);p&&il(r,e,t)}if(m&&Array.isArray(el(n.errors,e))){const t=l(el(n.errors,e),c.argA,c.argB);p&&il(n.errors,e,t),((e,t)=>{!$o(el(e,t)).length&&Rl(e,t)})(n.errors,e)}if((d.touchedFields||u.touchedFields)&&m&&Array.isArray(el(n.touchedFields,e))){const t=l(el(n.touchedFields,e),c.argA,c.argB);p&&il(n.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(n.dirtyFields=zl(a,s)),h.state.next({name:e,isDirty:w(e,i),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else il(s,e,i)},_setDisabledField:D,_setErrors:e=>{n.errors=e,h.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>$o(el(o.mount?s:a,e,t.shouldUnregister?el(a,e,[]):[])),_reset:F,_resetDefaultValues:()=>Tl(t.defaultValues)&&t.defaultValues().then((e=>{z(e,t.resetOptions),h.state.next({isLoading:!1})})),_removeUnmounted:()=>{for(const e of l.unMount){const t=el(r,e);t&&(t._f.refs?t._f.refs.every((e=>!Dl(e))):!Dl(t._f.ref))&&M(e)}l.unMount=new Set},_disableForm:e=>{tl(e)&&(h.state.next({disabled:e}),$l(r,((t,n)=>{const i=el(r,n);i&&(t.disabled=i._f.disabled||e,Array.isArray(i._f.refs)&&i._f.refs.forEach((t=>{t.disabled=i._f.disabled||e})))}),0,!1))},_subjects:h,_proxyFormState:d,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(e){o=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return n},get _options(){return t},set _options(e){t=We(We({},t),e)}},subscribe:e=>(o.mount=!0,u=We(We({},u),e.formState),P(We(We({},e),{},{formState:u}))),trigger:C,register:R,handleSubmit:I,watch:(e,t)=>Tl(e)?h.state.subscribe({next:n=>e(_(void 0,t),n)}):_(e,t,!0),setValue:N,getValues:A,reset:z,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};el(r,e)&&(Zo(t.defaultValue)?N(e,Jo(el(a,e))):(N(e,t.defaultValue),il(a,e,Jo(t.defaultValue))),t.keepTouched||Rl(n.touchedFields,e),t.keepDirty||(Rl(n.dirtyFields,e),n.isDirty=t.defaultValue?w(e,Jo(el(a,e))):w()),t.keepError||(Rl(n.errors,e),d.isValid&&m()),h.state.next(We({},n)))},clearErrors:e=>{e&&jl(e).forEach((e=>Rl(n.errors,e))),h.state.next({errors:e?n.errors:{}})},unregister:M,setError:O,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=el(r,e),i=n&&n._f;if(i){const e=i.refs?i.refs[0]:i.ref;e.focus&&(e.focus(),t.shouldSelect&&Tl(e.select)&&e.select())}},getFieldState:T};return We(We({},B),{},{formControl:B})}function oc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.useRef(void 0),n=i.useRef(void 0),[r,a]=i.useState({isDirty:!1,isValidating:!1,isLoading:Tl(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Tl(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=We(We({},e.formControl?e.formControl:sc(e)),{},{formState:r}),e.formControl&&e.defaultValues&&!Tl(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const s=t.current.control;return s._options=e,xl((()=>{const e=s._subscribe({formState:s._proxyFormState,callback:()=>a(We({},s._formState)),reRenderRoot:!0});return a((e=>We(We({},e),{},{isReady:!0}))),s._formState.isReady=!0,e}),[s]),i.useEffect((()=>s._disableForm(e.disabled)),[s,e.disabled]),i.useEffect((()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)}),[s,e.mode,e.reValidateMode]),i.useEffect((()=>{e.errors&&(s._setErrors(e.errors),s._focusError())}),[s,e.errors]),i.useEffect((()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})}),[s,e.shouldUnregister]),i.useEffect((()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==r.isDirty&&s._subjects.state.next({isDirty:e})}}),[s,r.isDirty]),i.useEffect((()=>{e.values&&!El(e.values,n.current)?(s._reset(e.values,s._options.resetOptions),n.current=e.values,a((e=>We({},e)))):s._resetDefaultValues()}),[s,e.values]),i.useEffect((()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next(We({},s._formState))),s._removeUnmounted()})),t.current.formState=yl(r,s),t.current}var lc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cc=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],dc=(e,t)=>{const n=(0,i.forwardRef)(((n,r)=>{let{color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d}=n,u=Fo(n,cc);return(0,i.createElement)("svg",We(We({ref:r},lc),{},{width:s,height:s,stroke:a,strokeWidth:l?24*Number(o)/Number(s):o,className:["lucide","lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},u),[...t.map((e=>{let[t,n]=e;return(0,i.createElement)(t,n)})),...Array.isArray(d)?d:[d]]);var h}));return n.displayName="".concat(e),n},uc=dc("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),hc=dc("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),pc=dc("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),mc=dc("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),fc=dc("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),gc=dc("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]),vc=e=>{let{size:t="default",message:n}=e;const{t:r}=Ma("common"),i={small:"h-4 w-4",default:"h-8 w-8",large:"h-12 w-12"};return(0,wo.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat({small:"p-2",default:"p-8",large:"p-12"}[t]),children:[(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsx)(gc,{className:"".concat(i[t]," text-blue-600 animate-pulse")}),(0,wo.jsx)("div",{className:"absolute inset-0 ".concat(i[t]," border-2 border-blue-200 border-t-blue-600 rounded-full animate-spin")})]}),(n||!n)&&(0,wo.jsx)("p",{className:"mt-4 text-sm text-gray-600 animate-pulse",children:n||r("loading.default")})]})},bc=dc("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),yc=e=>{let{className:t=""}=e;const{currentLanguage:n,languages:r,changeLanguage:a}=Co(),[s,o]=(0,i.useState)(!1),l=(0,i.useRef)(null);(0,i.useEffect)((()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const c=r.find((e=>e.code===n))||r[0];return(0,wo.jsxs)("div",{className:"relative ".concat(t),ref:l,children:[(0,wo.jsxs)("button",{onClick:()=>o(!s),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(t.includes("text-white")?"text-white hover:text-blue-100 hover:bg-white hover:bg-opacity-20":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"),"aria-expanded":s,"aria-haspopup":"true","aria-label":"Select language",children:[(0,wo.jsx)(bc,{className:"h-4 w-4"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:c.flag}),(0,wo.jsx)("span",{className:"hidden md:inline",children:c.name}),(0,wo.jsx)("svg",{className:"h-4 w-4 transition-transform duration-200 ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,wo.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&(0,wo.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:r.map((e=>(0,wo.jsxs)("button",{onClick:()=>(async e=>{await a(e),o(!1)})(e.code),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-3 ".concat(n===e.code?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"),children:[(0,wo.jsx)("span",{className:"text-lg",children:e.flag}),(0,wo.jsx)("span",{children:e.name}),n===e.code&&(0,wo.jsx)("svg",{className:"h-4 w-4 ml-auto text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,wo.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.code)))})]})},xc=()=>{const[e]=Le(),{login:t}=ko(),[n,r]=(0,i.useState)("request"),[a,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),{t:c}=Ma("auth"),{register:d,handleSubmit:u,formState:{errors:h},setValue:p,reset:m}=oc();(0,i.useEffect)((()=>{const t=e.get("token");t&&(p("token",t),f.mutate({token:t}))}),[e]);const f=(0,Ie.useMutation)((e=>{let{token:t}=e;return os(t)}),{onSuccess:e=>{t(e.user,e.token),rn.success(c("messages.welcome_back",{name:e.user.firstName}),{duration:4e3,icon:"\ud83d\udea2"})},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||c("messages.login_failed");r.includes("expired")||r.includes("Invalid or expired login link")?rn.error(c("messages.magic_link_expired"),{duration:8e3,icon:"\u26a0\ufe0f"}):"NETWORK_ERROR"!==e.code&&navigator.onLine?rn.error(c("messages.login_failed"),{duration:6e3,icon:"\u274c"}):rn.error(c("messages.network_error"),{duration:6e3,icon:"\ud83d\udce1"})}}),g=(0,Ie.useMutation)((e=>{let{email:t,password:n}=e;return ls(t,n)}),{onSuccess:e=>{t(e.user,e.token),rn.success("Welcome, Administrator ".concat(e.user.firstName,"!"),{duration:4e3,icon:"\u2699\ufe0f"})},onError:e=>{var t,n;(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||c("messages.login_failed");"NETWORK_ERROR"!==e.code&&navigator.onLine?rn.error(c("messages.invalid_credentials"),{duration:6e3,icon:"\ud83d\udd12"}):rn.error(c("messages.network_error"),{duration:6e3,icon:"\ud83d\udce1"})}}),v=(0,Ie.useMutation)((e=>{let{email:t}=e;return us(t)}),{onSuccess:()=>{rn.success(c("messages.magic_link_sent"),{duration:6e3,icon:"\ud83d\udce7"}),r("token")},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||c("messages.login_failed");"NETWORK_ERROR"!==e.code&&navigator.onLine?rn.error(r,{duration:6e3,icon:"\u274c"}):rn.error(c("messages.network_error"),{duration:6e3,icon:"\ud83d\udce1"})}}),b=e=>{"token"===n?f.mutate({token:e.token,email:e.tokenEmail}):"admin"===n?g.mutate({email:e.email,password:e.password}):"request"===n&&v.mutate({email:e.requestEmail})},y=f.isLoading||g.isLoading||v.isLoading;return(0,wo.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[(0,wo.jsxs)("div",{className:"fixed inset-0 overflow-hidden z-0",children:[(0,wo.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 min-w-full min-h-full object-cover",style:{filter:"brightness(0.5)",width:"100vw",height:"56.25vw",minHeight:"100vh",minWidth:"177.78vh",imageRendering:"crisp-edges"},children:(0,wo.jsx)("source",{src:"https://23g-sharedhosting-burando-dev.s3.eu-west-1.amazonaws.com/app/uploads/2024/01/15102006/burando-korter.mp4",type:"video/mp4"})}),(0,wo.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-burando-navy/40 via-burando-teal/25 to-burando-bright-teal/35"}),(0,wo.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white/10 rounded-full blur-3xl animate-pulse"}),(0,wo.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-burando-bright-teal/20 rounded-full blur-3xl animate-pulse delay-1000"}),(0,wo.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-burando-teal/10 rounded-full blur-3xl animate-pulse delay-500"})]}),(0,wo.jsxs)("div",{className:"max-w-lg w-full relative z-20",children:[(0,wo.jsxs)("div",{className:"text-center mb-12",children:[(0,wo.jsx)("div",{className:"flex justify-end mb-4",children:(0,wo.jsx)(yc,{className:"text-white"})}),(0,wo.jsx)("div",{className:"flex justify-center mb-8",children:(0,wo.jsxs)("div",{className:"relative group",children:[(0,wo.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-burando-teal to-burando-bright-teal rounded-2xl blur-lg opacity-75 animate-pulse group-hover:opacity-90 transition-opacity duration-300"}),(0,wo.jsx)("div",{className:"relative glass-card-elevated p-6 hover-lift",children:(0,wo.jsx)("img",{src:"/burando-logo-white.svg",alt:"Burando Maritime Services",className:"h-16 w-auto mx-auto filter drop-shadow-lg"})})]})}),(0,wo.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4 tracking-tight drop-shadow-2xl",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:c("title")}),(0,wo.jsx)("p",{className:"text-white text-lg sm:text-xl font-medium drop-shadow-xl mb-4",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.7)"},children:c("tagline")}),(0,wo.jsx)("div",{className:"mt-6 h-1 w-32 bg-gradient-to-r from-burando-teal to-burando-bright-teal rounded-full mx-auto"})]}),(0,wo.jsxs)("div",{className:"glass-card-elevated p-6 sm:p-8 lg:p-10 hover-lift fade-in",children:[(0,wo.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,wo.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-burando-bright-teal to-burando-teal rounded-full mb-4 sm:mb-6 shadow-2xl",children:(0,wo.jsx)("span",{className:"text-2xl sm:text-3xl",children:"\ud83d\udea2"})}),(0,wo.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3 drop-shadow-xl",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.8)"},children:c("login_methods.title")}),(0,wo.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,wo.jsx)("p",{className:"text-white/90 text-base sm:text-lg mb-2",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.6)"},children:"New to the platform?"}),(0,wo.jsx)("p",{className:"text-white/80 text-sm sm:text-base leading-relaxed",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.6)"},children:"Enter your email address and we'll send you a secure login link."}),(0,wo.jsx)("div",{className:"mt-4 text-white/70 text-xs sm:text-sm",children:"Already have a login link? Enter the code from your email below."})]})]}),"request"===n&&(0,wo.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,wo.jsxs)("div",{className:"text-center mb-6",children:[(0,wo.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-burando-bright-teal to-burando-teal rounded-full mb-4 sm:mb-6 shadow-2xl animate-pulse",children:(0,wo.jsx)(uc,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white"})}),(0,wo.jsx)("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-3 sm:mb-4",children:c("login_methods.request.title")}),(0,wo.jsx)("p",{className:"text-white/90 text-base sm:text-lg leading-relaxed font-medium px-2",children:c("login_methods.request.description")})]}),(0,wo.jsxs)("form",{onSubmit:u(b),className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label text-white text-lg font-semibold mb-3 block",htmlFor:"primary-email",children:c("login_methods.request.email_label")}),(0,wo.jsx)("input",We({id:"primary-email",type:"email",className:"glass-input w-full text-lg sm:text-xl py-5 sm:py-6 px-5 sm:px-6 text-white placeholder-white/50 rounded-xl border-2 ".concat(h.requestEmail?"border-red-400":"border-white/20 focus:border-burando-bright-teal"," transition-all duration-300 min-h-[56px] touch-manipulation text-center sm:text-left"),placeholder:c("login_methods.request.email_placeholder"),autoComplete:"email",autoFocus:!0},d("requestEmail",{required:c("validation.email_required"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:c("validation.email_invalid")}}))),h.requestEmail&&(0,wo.jsxs)("p",{className:"text-red-300 text-base mt-3 flex items-center",role:"alert",children:[(0,wo.jsx)(hc,{className:"h-4 w-4 mr-2"}),h.requestEmail.message]})]}),(0,wo.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-burando-bright-teal to-burando-teal text-white font-bold py-7 sm:py-8 px-6 sm:px-8 rounded-2xl text-xl sm:text-2xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl disabled:opacity-50 disabled:transform-none disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-burando-bright-teal/50 focus:ring-offset-2 shadow-2xl animate-pulse hover:animate-none min-h-[64px] touch-manipulation",children:y?(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),(0,wo.jsx)("span",{className:"text-lg sm:text-xl",children:c("login_methods.request.loading")})]}):(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)(uc,{className:"h-7 w-7 sm:h-8 sm:w-8 mr-3 sm:mr-4"}),(0,wo.jsx)("span",{children:c("login_methods.request.button")})]})})]}),(0,wo.jsx)("div",{className:"mt-8 glass-card p-6 border-l-4 border-burando-bright-teal",children:(0,wo.jsxs)("div",{className:"flex items-start",children:[(0,wo.jsx)("div",{className:"bg-burando-bright-teal/20 p-2 rounded-full mr-4 mt-1",children:(0,wo.jsx)(hc,{className:"h-5 w-5 text-burando-bright-teal"})}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"font-semibold text-white mb-2",children:c("login_methods.request.help_title")}),(0,wo.jsx)("p",{className:"text-gray-200 text-sm leading-relaxed",children:c("login_methods.request.help_text")})]})]})}),(0,wo.jsx)("div",{className:"mt-8 sm:mt-12",children:a?(0,wo.jsx)("div",{className:"pt-6 border-t border-white/10",children:(0,wo.jsxs)("div",{className:"text-center space-y-4",children:[(0,wo.jsx)("p",{className:"text-white/50 text-sm mb-4",children:c("login_methods.request.alternative_text")}),(0,wo.jsx)("div",{className:"max-w-sm mx-auto",children:(0,wo.jsxs)("button",{type:"button",onClick:()=>r("token"),className:"w-full flex items-center justify-center px-5 py-4 text-base font-medium text-white/70 hover:text-white bg-white/5 hover:bg-white/10 rounded-lg transition-all duration-200 border border-white/10 hover:border-white/20 min-h-[48px] touch-manipulation",children:[(0,wo.jsx)(pc,{className:"h-5 w-5 mr-3"}),c("login_methods.request.manual_token_button")]})}),(0,wo.jsx)("div",{className:"pt-4 border-t border-white/5",children:(0,wo.jsx)("button",{type:"button",onClick:()=>r("admin"),className:"text-sm text-white/40 hover:text-white/60 transition-colors duration-300 underline min-h-[44px] py-3 px-2 touch-manipulation",children:c("login_methods.request.admin_button")})}),(0,wo.jsx)("div",{className:"pt-2",children:(0,wo.jsx)("button",{type:"button",onClick:()=>s(!1),className:"text-white/40 hover:text-white/60 text-xs transition-colors duration-300",children:"\u2190 Hide options"})})]})}):(0,wo.jsx)("div",{className:"text-center",children:(0,wo.jsx)("button",{type:"button",onClick:()=>s(!0),className:"text-white/60 hover:text-white/80 text-base font-medium transition-colors duration-300 underline decoration-dotted underline-offset-4 py-3 px-4 min-h-[44px] touch-manipulation",children:"Need help logging in?"})})})]}),"request"!==n&&"admin"!==n&&(0,wo.jsx)("div",{className:"mb-8",children:(0,wo.jsxs)("button",{type:"button",onClick:()=>r("request"),className:"text-burando-bright-teal hover:text-white text-sm font-medium transition-colors duration-200 flex items-center mb-6",children:[(0,wo.jsx)(mc,{className:"h-4 w-4 mr-2 rotate-90"}),c("login_methods.token.back_button")]})}),"token"===n&&(0,wo.jsx)("form",{onSubmit:u(b),className:"space-y-6 sm:space-y-8",children:(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,wo.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,wo.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-18 sm:h-18 bg-gradient-to-br from-burando-teal to-burando-navy rounded-full mb-4 sm:mb-6 shadow-lg",children:(0,wo.jsx)(pc,{className:"h-7 w-7 sm:h-8 sm:w-8 text-white"})}),(0,wo.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:c("login_methods.token.title")}),(0,wo.jsx)("p",{className:"text-white/70 text-sm leading-relaxed max-w-md mx-auto px-2",children:c("login_methods.token.description")})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label text-white text-base font-medium mb-2 block",htmlFor:"token-email",children:c("login_methods.token.email_label")}),(0,wo.jsx)("input",We({id:"token-email",type:"email",className:"glass-input w-full text-base sm:text-lg py-4 px-5 text-white placeholder-white/50 rounded-lg border ".concat(h.tokenEmail?"border-red-400":"border-white/20 focus:border-burando-teal"," transition-all duration-300 min-h-[52px] touch-manipulation"),placeholder:c("login_methods.token.email_placeholder"),autoComplete:"email"},d("tokenEmail",{required:c("validation.email_required"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:c("validation.email_invalid")}}))),h.tokenEmail&&(0,wo.jsxs)("p",{className:"text-red-300 text-sm mt-2 flex items-center",role:"alert",children:[(0,wo.jsx)(hc,{className:"h-4 w-4 mr-1"}),h.tokenEmail.message]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label text-white text-base font-medium mb-2 block",htmlFor:"token-input",children:c("login_methods.token.token_label")}),(0,wo.jsx)("input",We({id:"token-input",type:"text",className:"glass-input w-full text-base sm:text-lg py-4 px-5 text-white placeholder-white/50 font-mono rounded-lg border ".concat(h.token?"border-red-400":"border-white/20 focus:border-burando-teal"," transition-all duration-300 min-h-[52px] touch-manipulation"),placeholder:c("login_methods.token.token_placeholder"),autoComplete:"off"},d("token",{required:c("validation.token_required"),minLength:{value:10,message:c("validation.token_min_length")}}))),h.token&&(0,wo.jsxs)("p",{className:"text-red-300 text-sm mt-2 flex items-center",role:"alert",children:[(0,wo.jsx)(hc,{className:"h-4 w-4 mr-1"}),h.token.message]})]})]}),(0,wo.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-burando-teal to-burando-navy text-white font-semibold py-5 sm:py-5 px-6 rounded-lg text-base sm:text-lg transition-all duration-300 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-burando-teal/50 min-h-[52px] touch-manipulation",children:y?(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)(vc,{size:"small",message:""}),(0,wo.jsx)("span",{className:"ml-3",children:c("login_methods.token.loading")})]}):(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)(pc,{className:"h-5 w-5 mr-3"}),(0,wo.jsx)("span",{children:c("login_methods.token.button")})]})})]})})}),"admin"===n&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("div",{className:"mb-8",children:(0,wo.jsxs)("button",{type:"button",onClick:()=>{r("request"),m()},className:"text-burando-bright-teal hover:text-white text-sm font-medium transition-colors duration-200 flex items-center mb-6",children:[(0,wo.jsx)(mc,{className:"h-4 w-4 mr-2 rotate-90"}),c("login_methods.admin.back_button")]})}),(0,wo.jsx)("form",{onSubmit:u(b),className:"space-y-8",children:(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"text-center mb-6",children:[(0,wo.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full mb-4 shadow-lg",children:(0,wo.jsx)(fc,{className:"h-6 w-6 text-white"})}),(0,wo.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:c("login_methods.admin.title")}),(0,wo.jsx)("p",{className:"text-white/60 text-xs",children:c("login_methods.admin.description")})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label text-white text-sm font-medium mb-2 block",htmlFor:"admin-email",children:c("login_methods.admin.email_label")}),(0,wo.jsx)("input",We({id:"admin-email",type:"email",className:"glass-input text-sm py-3 px-4 text-white placeholder-white/40 rounded-lg border ".concat(h.email?"border-red-400":"border-white/20 focus:border-red-400"," transition-all duration-300"),placeholder:c("login_methods.admin.email_placeholder"),autoComplete:"email"},d("email",{required:c("validation.admin_email_required"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:c("validation.email_invalid")}}))),h.email&&(0,wo.jsxs)("p",{className:"text-red-300 text-xs mt-1 flex items-center",role:"alert",children:[(0,wo.jsx)(hc,{className:"h-3 w-3 mr-1"}),h.email.message]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label text-white text-sm font-medium mb-2 block",htmlFor:"admin-password",children:c("login_methods.admin.password_label")}),(0,wo.jsx)("input",We({id:"admin-password",type:"password",className:"glass-input text-sm py-3 px-4 text-white placeholder-white/40 rounded-lg border ".concat(h.password?"border-red-400":"border-white/20 focus:border-red-400"," transition-all duration-300"),placeholder:c("login_methods.admin.password_placeholder"),autoComplete:"current-password"},d("password",{required:c("validation.admin_password_required"),minLength:{value:8,message:c("validation.admin_password_min_length")}}))),h.password&&(0,wo.jsxs)("p",{className:"text-red-300 text-xs mt-1 flex items-center",role:"alert",children:[(0,wo.jsx)(hc,{className:"h-3 w-3 mr-1"}),h.password.message]})]})]}),(0,wo.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white font-medium py-3 px-4 rounded-lg text-sm transition-all duration-300 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-red-500/50",children:y?(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)(vc,{size:"small",message:""}),(0,wo.jsx)("span",{className:"ml-2",children:c("login_methods.admin.loading")})]}):(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)(fc,{className:"h-4 w-4 mr-2"}),(0,wo.jsx)("span",{children:c("login_methods.admin.button")})]})}),(0,wo.jsx)("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,wo.jsx)("p",{className:"text-red-200 text-xs text-center",children:c("login_methods.admin.security_notice")})})]})})})]})]}),(0,wo.jsxs)("div",{className:"text-center mt-8",children:[(0,wo.jsxs)("div",{className:"inline-flex items-center space-x-2 text-white text-sm glass-card px-6 py-3 hover-lift",children:[(0,wo.jsx)("div",{className:"w-2 h-2 bg-burando-light-green rounded-full animate-pulse"}),(0,wo.jsx)("span",{className:"font-medium",children:c("tagline")})]}),(0,wo.jsx)("p",{className:"text-white/70 text-xs mt-4",children:c("copyright")})]}),(0,wo.jsx)("div",{className:"mt-8 text-center",children:(0,wo.jsxs)("div",{className:"glass-card p-4 border border-white/10",children:[(0,wo.jsx)("p",{className:"text-white/60 text-sm mb-3",children:"How was your login experience?"}),(0,wo.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,wo.jsx)("button",{onClick:()=>rn.success("Thank you for your feedback! \ud83d\ude0a",{icon:"\ud83d\udc4d"}),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:"Good experience",children:"\ud83d\ude0a"}),(0,wo.jsx)("button",{onClick:()=>rn.success("Thank you for your feedback! We'll improve this.",{icon:"\ud83d\udc4e"}),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:"Needs improvement",children:"\ud83d\ude10"}),(0,wo.jsx)("button",{onClick:()=>rn.success("Thank you for your feedback! We're sorry for the trouble.",{icon:"\ud83d\ude1e"}),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:"Poor experience",children:"\ud83d\ude1e"})]})]})})]})]})},wc=dc("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),_c=dc("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),kc=dc("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),jc=dc("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Nc=dc("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Sc=dc("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ec=dc("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Cc=dc("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Ac=dc("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Tc=dc("MailPlus",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M16 19h6",key:"xwg31i"}]]),Oc=dc("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Pc=dc("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Mc=dc("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Dc=dc("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Rc=dc("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Lc=dc("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Ic=dc("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Fc=e=>{let{isOpen:t,onClose:n,onSuccess:r}=e;const{t:a}=Ma(["common","forms"]),[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)([]),d=(0,Ie.useQueryClient)(),{register:u,handleSubmit:h,formState:{errors:p},reset:m}=oc(),f=[{key:"view_crew_list",label:a("manager.permission_labels.view_crew_list"),description:a("manager.permission_descriptions.view_crew_list")},{key:"manage_crew_members",label:a("manager.permission_labels.manage_crew_members"),description:a("manager.permission_descriptions.manage_crew_members")},{key:"review_quiz_results",label:a("manager.permission_labels.review_quiz_results"),description:a("manager.permission_descriptions.review_quiz_results")},{key:"approve_training_completion",label:a("manager.permission_labels.approve_training_completion"),description:a("manager.permission_descriptions.approve_training_completion")},{key:"view_certificates",label:a("manager.permission_labels.view_certificates"),description:a("manager.permission_descriptions.view_certificates")},{key:"regenerate_certificates",label:a("manager.permission_labels.regenerate_certificates"),description:a("manager.permission_descriptions.regenerate_certificates")},{key:"view_compliance_reports",label:a("manager.permission_labels.view_compliance_reports"),description:a("manager.permission_descriptions.view_compliance_reports")},{key:"export_training_data",label:a("manager.permission_labels.export_training_data"),description:a("manager.permission_descriptions.export_training_data")},{key:"content_edit",label:a("manager.permission_labels.content_edit"),description:a("manager.permission_descriptions.content_edit")}],g=(0,Ie.useMutation)(Js,{onSuccess:()=>{d.invalidateQueries("managers"),d.invalidateQueries("admin-stats"),rn.success(a("manager.manager_created")),m(),c([]),n(),r&&r()},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||a("manager.failed_create");rn.error(r)}}),v=()=>{m(),c([]),o(!1),n()};return t?(0,wo.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,wo.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl",children:[(0,wo.jsxs)("div",{className:"sticky top-0 bg-white z-10 flex items-center justify-between p-4 sm:p-5 border-b",children:[(0,wo.jsx)("h3",{className:"text-lg sm:text-xl font-medium text-gray-900",children:a("manager.add_manager")}),(0,wo.jsx)("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 -mr-2 rounded-lg min-touch-target",children:(0,wo.jsx)(Mc,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,wo.jsxs)("form",{onSubmit:h((e=>{const t={email:e.email,firstName:e.firstName,lastName:e.lastName,position:e.position,password:e.password,preferredLanguage:e.preferredLanguage||"en",permissions:l};g.mutate(t)})),className:"p-4 sm:p-5 space-y-4 sm:space-y-6",children:[(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Dc,{size:16,className:"inline mr-1"}),a("manager.first_name")]}),(0,wo.jsx)("input",We({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.firstName?"border-red-300":"border-gray-300")},u("firstName",{required:a("forms:required"),minLength:{value:2,message:a("forms:min_length",{field:a("manager.first_name"),min:2})}}))),p.firstName&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.firstName.message})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Dc,{size:16,className:"inline mr-1"}),a("manager.last_name")]}),(0,wo.jsx)("input",We({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.lastName?"border-red-300":"border-gray-300")},u("lastName",{required:a("forms:required"),minLength:{value:2,message:a("forms:min_length",{field:a("manager.last_name"),min:2})}}))),p.lastName&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.lastName.message})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(uc,{size:16,className:"inline mr-1"}),a("profile.email_address")]}),(0,wo.jsx)("input",We({type:"email",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.email?"border-red-300":"border-gray-300")},u("email",{required:a("forms:required"),pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:a("forms:email_invalid")}}))),p.email&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.email.message})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Rc,{size:16,className:"inline mr-1"}),a("profile.position")]}),(0,wo.jsx)("input",We({type:"text",placeholder:"e.g., Fleet Manager, Training Coordinator",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.position?"border-red-300":"border-gray-300")},u("position")))]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(bc,{size:16,className:"inline mr-1"}),a("profile.language_preference")]}),(0,wo.jsx)("select",We(We({className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.preferredLanguage?"border-red-300":"border-gray-300")},u("preferredLanguage",{required:a("forms:required")})),{},{defaultValue:"en",children:[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}].map((e=>(0,wo.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),p.preferredLanguage&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.preferredLanguage.message}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a("profile.language_description")})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Lc,{size:16,className:"inline mr-1"}),a("manager.password")]}),(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsx)("input",We({type:s?"text":"password",className:"w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.password?"border-red-300":"border-gray-300")},u("password",{required:a("forms:required"),minLength:{value:8,message:a("forms:password_min_length",{min:8})},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:a("manager.password_requirements")}}))),(0,wo.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!s),children:s?(0,wo.jsx)(Ic,{size:16}):(0,wo.jsx)(Pc,{size:16})})]}),p.password&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.password.message}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a("manager.password_requirements")})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("manager.manager_permissions")}),(0,wo.jsx)("button",{type:"button",onClick:()=>{l.length===f.length?c([]):c(f.map((e=>e.key)))},className:"text-sm text-blue-600 hover:text-blue-800",children:l.length===f.length?a("manager.deselect_all"):a("manager.select_all")})]}),(0,wo.jsx)("div",{className:"max-h-40 sm:max-h-48 overflow-y-auto border border-gray-200 rounded-md p-3",children:(0,wo.jsx)("div",{className:"space-y-3",children:f.map((e=>(0,wo.jsxs)("div",{className:"flex items-start",children:[(0,wo.jsx)("input",{type:"checkbox",id:e.key,checked:l.includes(e.key),onChange:()=>{return t=e.key,void c((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,wo.jsxs)("div",{className:"ml-3",children:[(0,wo.jsx)("label",{htmlFor:e.key,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e.label}),(0,wo.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.key)))})}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:0===l.length?a("manager.permissions_default"):a("manager.permissions_selected",{count:l.length})})]}),(0,wo.jsx)("div",{className:"sticky bottom-0 bg-white border-t -mx-4 sm:-mx-5 px-4 sm:px-5 py-3 sm:py-4",children:(0,wo.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3",children:[(0,wo.jsx)("button",{type:"button",onClick:v,className:"w-full sm:w-auto px-4 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-touch-target",children:a("buttons.cancel")}),(0,wo.jsx)("button",{type:"submit",disabled:g.isLoading,className:"w-full sm:w-auto px-4 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-touch-target",children:g.isLoading?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),a("manager.creating")]}):a("manager.create_manager")})]})})]})]})}):null},zc=e=>{let{isOpen:t,onClose:n,onSuccess:r,managerId:a}=e;const{t:s}=Ma(["common","forms"]),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),u=(0,Ie.useQueryClient)(),{register:h,handleSubmit:p,formState:{errors:m},reset:f,setValue:g}=oc(),v=[{key:"view_crew_list",label:s("manager.permission_labels.view_crew_list"),description:s("manager.permission_descriptions.view_crew_list")},{key:"manage_crew_members",label:s("manager.permission_labels.manage_crew_members"),description:s("manager.permission_descriptions.manage_crew_members")},{key:"review_quiz_results",label:s("manager.permission_labels.review_quiz_results"),description:s("manager.permission_descriptions.review_quiz_results")},{key:"approve_training_completion",label:s("manager.permission_labels.approve_training_completion"),description:s("manager.permission_descriptions.approve_training_completion")},{key:"view_certificates",label:s("manager.permission_labels.view_certificates"),description:s("manager.permission_descriptions.view_certificates")},{key:"regenerate_certificates",label:s("manager.permission_labels.regenerate_certificates"),description:s("manager.permission_descriptions.regenerate_certificates")},{key:"view_compliance_reports",label:s("manager.permission_labels.view_compliance_reports"),description:s("manager.permission_descriptions.view_compliance_reports")},{key:"export_training_data",label:s("manager.permission_labels.export_training_data"),description:s("manager.permission_descriptions.export_training_data")},{key:"content_edit",label:s("manager.permission_labels.content_edit"),description:s("manager.permission_descriptions.content_edit")}],{data:b,isLoading:y}=(0,Ie.useQuery)(["manager",a],(()=>Xs(a)),{enabled:t&&!!a,onSuccess:e=>{if(e.manager){const t=e.manager;g("firstName",t.first_name),g("lastName",t.last_name),g("position",t.position),g("email",t.email),g("preferredLanguage",t.preferred_language||"en"),d(e.permissions||[])}}}),x=(0,Ie.useMutation)((e=>{let{id:t,data:n}=e;return $s(t,n)}),{onSuccess:()=>{u.invalidateQueries("managers"),u.invalidateQueries(["manager",a]),u.invalidateQueries("admin-stats"),rn.success(s("manager.manager_updated")),f(),d([]),n(),r&&r()},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager.failed_update");rn.error(r)}});return(0,i.useEffect)((()=>{t||(f(),d([]),l(!1))}),[t,f]),t?(0,wo.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,wo.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl",children:[(0,wo.jsxs)("div",{className:"sticky top-0 bg-white z-10 flex items-center justify-between p-4 sm:p-5 border-b",children:[(0,wo.jsx)("h3",{className:"text-lg sm:text-xl font-medium text-gray-900",children:s("manager.edit_manager")}),(0,wo.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 -mr-2 rounded-lg min-touch-target",children:(0,wo.jsx)(Mc,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),y?(0,wo.jsxs)("div",{className:"p-6 text-center",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,wo.jsx)("p",{className:"mt-2 text-gray-600",children:s("manager.loading_manager")})]}):(0,wo.jsxs)("form",{onSubmit:p((e=>{const t={firstName:e.firstName,lastName:e.lastName,position:e.position,preferredLanguage:e.preferredLanguage,permissions:c};e.password&&e.password.trim()&&(t.password=e.password),x.mutate({id:a,data:t})})),className:"p-4 sm:p-5 space-y-4 sm:space-y-6",children:[(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Dc,{size:16,className:"inline mr-1"}),s("manager.first_name")]}),(0,wo.jsx)("input",We({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(m.firstName?"border-red-300":"border-gray-300")},h("firstName",{required:s("forms:required"),minLength:{value:2,message:s("forms:min_length",{field:s("manager.first_name"),min:2})}}))),m.firstName&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.firstName.message})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Dc,{size:16,className:"inline mr-1"}),s("manager.last_name")]}),(0,wo.jsx)("input",We({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(m.lastName?"border-red-300":"border-gray-300")},h("lastName",{required:s("forms:required"),minLength:{value:2,message:s("forms:min_length",{field:s("manager.last_name"),min:2})}}))),m.lastName&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.lastName.message})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(uc,{size:16,className:"inline mr-1"}),s("profile.email_address")]}),(0,wo.jsx)("input",We(We({type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500"},h("email")),{},{disabled:!0})),(0,wo.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:s("manager.email_cannot_change")})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Rc,{size:16,className:"inline mr-1"}),s("profile.position")]}),(0,wo.jsx)("input",We({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(m.position?"border-red-300":"border-gray-300")},h("position",{required:s("forms:required"),minLength:{value:2,message:s("forms:min_length",{field:s("profile.position"),min:2})}}))),m.position&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.position.message})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(bc,{size:16,className:"inline mr-1"}),s("profile.language_preference")]}),(0,wo.jsx)("select",We(We({className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(m.preferredLanguage?"border-red-300":"border-gray-300")},h("preferredLanguage",{required:s("forms:required")})),{},{children:[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}].map((e=>(0,wo.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),m.preferredLanguage&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.preferredLanguage.message}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s("profile.language_description")})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,wo.jsx)(Lc,{size:16,className:"inline mr-1"}),s("manager.new_password")]}),(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsx)("input",We({type:o?"text":"password",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 pr-10 ".concat(m.password?"border-red-300":"border-gray-300")},h("password",{minLength:{value:8,message:s("forms:password_min_length",{min:8})}}))),(0,wo.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?(0,wo.jsx)(Ic,{className:"h-4 w-4 text-gray-400"}):(0,wo.jsx)(Pc,{className:"h-4 w-4 text-gray-400"})})]}),m.password&&(0,wo.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.password.message}),(0,wo.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:s("manager.password_leave_blank")})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s("manager.permissions")}),(0,wo.jsx)("button",{type:"button",onClick:()=>{c.length===v.length?d([]):d(v.map((e=>e.key)))},className:"text-sm text-blue-600 hover:text-blue-800",children:c.length===v.length?s("manager.deselect_all"):s("manager.select_all")})]}),(0,wo.jsx)("div",{className:"space-y-2 max-h-40 sm:max-h-48 overflow-y-auto border border-gray-200 rounded-md p-3",children:v.map((e=>(0,wo.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[(0,wo.jsx)("input",{type:"checkbox",checked:c.includes(e.key),onChange:()=>{return t=e.key,void d((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,wo.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.key)))})]}),(0,wo.jsx)("div",{className:"sticky bottom-0 bg-white border-t -mx-4 sm:-mx-5 px-4 sm:px-5 py-3 sm:py-4",children:(0,wo.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3",children:[(0,wo.jsx)("button",{type:"button",onClick:n,className:"w-full sm:w-auto px-4 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-touch-target",children:s("buttons.cancel")}),(0,wo.jsx)("button",{type:"submit",disabled:x.isLoading,className:"w-full sm:w-auto px-4 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-touch-target",children:x.isLoading?s("manager.updating"):s("manager.update_manager")})]})})]})]})}):null},qc=dc("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Bc=dc("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Uc=dc("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Wc=dc("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Hc=dc("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vc=()=>{const{t:e}=Ma(["admin","common"]),[t,n]=(0,i.useState)({page:1,limit:25,user_id:"",action:"",resource_type:"",from_date:"",to_date:""}),[r,a]=(0,i.useState)(!1),{data:s,isLoading:o,error:l,refetch:c}=(0,Ie.useQuery)(["audit-logs",t],(()=>no(t)),{keepPreviousData:!0,onError:t=>{rn.error(e("admin:dashboard.audit.failed")),console.error("Audit log error:",t)}}),d=(null===s||void 0===s?void 0:s.auditLogs)||[],u=(null===s||void 0===s?void 0:s.pagination)||{},h=e=>{switch(e){case"admin_login":case"manager_login":return(0,wo.jsx)(Lc,{className:"w-4 h-4"});case"view_managers":case"create_manager":case"update_manager":return(0,wo.jsx)(_c,{className:"w-4 h-4"});case"view_system_stats":case"view_audit_log":return(0,wo.jsx)(Pc,{className:"w-4 h-4"});case"create_template":case"update_template":return(0,wo.jsx)(kc,{className:"w-4 h-4"});default:return(0,wo.jsx)(Nc,{className:"w-4 h-4"})}},p=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),m=(e,t)=>{n((n=>We(We({},n),{},{[e]:t,page:1})))},f=e=>{n((t=>We(We({},t),{},{page:e})))};return o?(0,wo.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,wo.jsx)("span",{className:"ml-2 text-gray-600",children:e("admin:dashboard.audit.loading")})]}):l?(0,wo.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,wo.jsxs)("div",{className:"flex",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)(fc,{className:"h-5 w-5 text-red-400"})}),(0,wo.jsxs)("div",{className:"ml-3",children:[(0,wo.jsx)("h3",{className:"text-sm font-medium text-red-800",children:e("admin:dashboard.audit.failed")}),(0,wo.jsx)("div",{className:"mt-2",children:(0,wo.jsx)("button",{onClick:()=>c(),className:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200",children:e("admin:dashboard.audit.tryAgain")})})]})]})}):(0,wo.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,wo.jsxs)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:e("admin:dashboard.audit.title")}),(0,wo.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:e("admin:dashboard.audit.description")})]}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsxs)("button",{onClick:()=>a(!r),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target ".concat(r?"bg-gray-100":""),children:[(0,wo.jsx)(qc,{className:"w-4 h-4 mr-2"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:e("admin:dashboard.audit.filters")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Filter"})]}),(0,wo.jsxs)("button",{onClick:()=>c(),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,wo.jsx)(Bc,{className:"w-4 h-4 mr-2"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:e("admin:dashboard.audit.refresh")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Refresh"})]})]})]}),r&&(0,wo.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.action")}),(0,wo.jsxs)("select",{value:t.action,onChange:e=>m("action",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,wo.jsx)("option",{value:"",children:e("admin:dashboard.audit.allActions")}),(0,wo.jsx)("option",{value:"admin_login",children:e("admin:dashboard.audit.actions.adminLogin")}),(0,wo.jsx)("option",{value:"manager_login",children:e("admin:dashboard.audit.actions.managerLogin")}),(0,wo.jsx)("option",{value:"create_manager",children:e("admin:dashboard.audit.actions.userCreated")}),(0,wo.jsx)("option",{value:"update_manager",children:e("admin:dashboard.audit.actions.userUpdated")}),(0,wo.jsx)("option",{value:"view_managers",children:e("admin:dashboard.audit.actions.managerLogin")}),(0,wo.jsx)("option",{value:"view_system_stats",children:"View Stats"}),(0,wo.jsx)("option",{value:"create_template",children:e("admin:dashboard.audit.actions.certificateGenerated")})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.resourceType")}),(0,wo.jsxs)("select",{value:t.resource_type,onChange:e=>m("resource_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,wo.jsx)("option",{value:"",children:e("admin:dashboard.audit.allActions")}),(0,wo.jsx)("option",{value:"authentication",children:"Authentication"}),(0,wo.jsx)("option",{value:"manager_management",children:"Manager Management"}),(0,wo.jsx)("option",{value:"system_administration",children:"System Administration"}),(0,wo.jsx)("option",{value:"template_management",children:"Template Management"})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.fromDate")}),(0,wo.jsx)("input",{type:"date",value:t.from_date,onChange:e=>m("from_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.toDate")}),(0,wo.jsx)("input",{type:"date",value:t.to_date,onChange:e=>m("to_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,wo.jsx)("div",{className:"flex items-end sm:col-span-2 md:col-span-1",children:(0,wo.jsxs)("button",{onClick:()=>{n({page:1,limit:25,user_id:"",action:"",resource_type:"",from_date:"",to_date:""})},className:"w-full px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,wo.jsx)("span",{className:"hidden sm:inline",children:e("admin:dashboard.audit.clearFilters")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Clear"})]})})]})]}),(0,wo.jsx)("div",{className:"divide-y divide-gray-200",children:0===d.length?(0,wo.jsxs)("div",{className:"px-4 py-12 text-center",children:[(0,wo.jsx)(fc,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,wo.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:e("admin:dashboard.audit.noLogs")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e("admin:dashboard.audit.noLogsDescription")})]}):d.map((t=>{return(0,wo.jsxs)("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,wo.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,wo.jsx)("div",{className:"flex-shrink-0 p-2 rounded-full ".concat((r=t.action,r.includes("login")?"text-green-600 bg-green-100":r.includes("create")?"text-blue-600 bg-blue-100":r.includes("update")?"text-yellow-600 bg-yellow-100":r.includes("delete")?"text-red-600 bg-red-100":r.includes("view")?"text-gray-600 bg-gray-100":"text-purple-600 bg-purple-100")),children:h(t.action)}),(0,wo.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 space-y-1 sm:space-y-0",children:[(0,wo.jsx)("span",{className:"text-sm font-medium text-gray-900",children:p(t.action)}),(0,wo.jsx)("span",{className:"hidden sm:inline text-sm text-gray-500",children:"\u2022"}),(0,wo.jsx)("span",{className:"text-sm text-gray-500",children:(n=t.resourceType,n.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))}),t.resourceId&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("span",{className:"hidden sm:inline text-sm text-gray-500",children:"\u2022"}),(0,wo.jsxs)("span",{className:"text-sm text-gray-500",children:["ID: ",t.resourceId]})]})]}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 mt-1 space-y-1 sm:space-y-0",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(Dc,{className:"w-3 h-3 text-gray-400"}),(0,wo.jsx)("span",{className:"text-sm text-gray-500 truncate",children:t.user?"".concat(t.user.firstName," ").concat(t.user.lastName," (").concat(t.user.email,")"):"Unknown User"})]}),t.ipAddress&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("span",{className:"hidden sm:inline text-sm text-gray-500",children:"\u2022"}),(0,wo.jsx)("span",{className:"text-sm text-gray-500",children:t.ipAddress})]})]})]})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 ml-11 sm:ml-0",children:[(0,wo.jsx)(Uc,{className:"w-4 h-4"}),(0,wo.jsx)("span",{className:"text-xs sm:text-sm",children:new Date(t.createdAt).toLocaleString()})]})]}),t.details&&Object.keys(t.details).length>0&&(0,wo.jsx)("div",{className:"mt-2 ml-11",children:(0,wo.jsxs)("details",{className:"text-sm text-gray-600",children:[(0,wo.jsx)("summary",{className:"cursor-pointer hover:text-gray-800 p-2 rounded bg-gray-50 hover:bg-gray-100 min-touch-target",children:e("admin:dashboard.audit.viewDetails")}),(0,wo.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-x-auto max-h-40 scrollbar-thin",children:JSON.stringify(t.details,null,2)})]})})]},t.id);var n,r}))}),u.totalPages>1&&(0,wo.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,wo.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,wo.jsx)("button",{onClick:()=>f(u.page-1),disabled:u.page<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e("admin:dashboard.audit.previous")}),(0,wo.jsx)("button",{onClick:()=>f(u.page+1),disabled:u.page>=u.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e("admin:dashboard.audit.next")})]}),(0,wo.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,wo.jsx)("div",{children:(0,wo.jsxs)("p",{className:"text-sm text-gray-700",children:[e("admin:dashboard.audit.showing")," ",(0,wo.jsx)("span",{className:"font-medium",children:(u.page-1)*u.limit+1})," ",e("admin:dashboard.audit.to")," ",(0,wo.jsx)("span",{className:"font-medium",children:Math.min(u.page*u.limit,u.total)})," ",e("admin:dashboard.audit.of")," ",(0,wo.jsx)("span",{className:"font-medium",children:u.total})," ",e("admin:dashboard.audit.results")]})}),(0,wo.jsx)("div",{children:(0,wo.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,wo.jsx)("button",{onClick:()=>f(u.page-1),disabled:u.page<=1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,wo.jsx)(Wc,{className:"h-5 w-5"})}),(0,wo.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:e("admin:dashboard.audit.page",{page:u.page,totalPages:u.totalPages})}),(0,wo.jsx)("button",{onClick:()=>f(u.page+1),disabled:u.page>=u.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,wo.jsx)(Hc,{className:"h-5 w-5"})})]})})]})]})]})},Gc=dc("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Qc=dc("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),Kc=dc("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Yc=dc("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Xc=dc("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Jc=dc("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),$c=dc("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Zc=()=>{const{t:e}=Ma(["admin","common"]),[t,n]=(0,i.useState)({}),[r,a]=(0,i.useState)(!1),[s,o]=(0,i.useState)("application"),[l,c]=(0,i.useState)("smtp"),[d,u]=(0,i.useState)("claude"),h=(0,Ie.useQueryClient)(),{data:p,isLoading:m,error:f,refetch:g}=(0,Ie.useQuery)("system-settings",ro,{onSuccess:e=>{var t,r,i;n(e.settings||{}),a(!1);const s=(null===(t=e.settings)||void 0===t?void 0:t.email)||{},o=(null===(r=s.email_service_provider)||void 0===r?void 0:r.value)||(null===(i=s.email_provider)||void 0===i?void 0:i.value)||"smtp";c(o)},onError:t=>{rn.error(e("admin:dashboard.messages.loadFailed")),console.error("System settings error:",t)}}),v=(0,Ie.useMutation)(io,{onSuccess:()=>{h.invalidateQueries("system-settings"),rn.success(e("api:success.updated")),a(!1)},onError:t=>{var n,r;const i=(null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||e("api:errors.general.serverError");rn.error(i)}}),b=(0,Ie.useMutation)(ao,{onSuccess:()=>{h.invalidateQueries("system-settings"),rn.success(e("common:success.updated")),a(!1)},onError:t=>{var n,r;const i=(null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||e("api:errors.general.serverError");rn.error(i)}}),y=[{key:"application",label:e("admin:settings.categories.application"),icon:Gc,description:e("admin:settings.descriptions.application")},{key:"translation",label:"Translation Services",icon:Qc,description:"Configure AI translation providers and API keys"},{key:"email",label:e("admin:settings.categories.email"),icon:uc,description:e("admin:settings.descriptions.email")},{key:"security",label:e("admin:settings.categories.security"),icon:fc,description:e("admin:settings.descriptions.security")},{key:"training",label:e("admin:settings.categories.training"),icon:Kc,description:e("admin:settings.descriptions.training")},{key:"notifications",label:e("admin:settings.categories.notifications"),icon:Yc,description:e("admin:settings.descriptions.notifications")}],x=(e,t,r)=>{n((n=>{var i;return We(We({},n),{},{[e]:We(We({},n[e]),{},{[t]:We(We({},null===(i=n[e])||void 0===i?void 0:i[t]),{},{value:r})})})})),a(!0)},w=e=>{c(e),x("email","email_service_provider",e),x("email","email_provider",e)},_=e=>{u(e),x("translation","translation_provider",e)},k=(e,t,n)=>{const{value:r,type:i,description:a,options:s}=n;switch(i){case"boolean":return(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("input",{type:"checkbox",checked:"true"===r,onChange:n=>x(e,t,n.target.checked?"true":"false"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,wo.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:a})]});case"number":return(0,wo.jsxs)("div",{children:[(0,wo.jsx)("input",{type:"number",value:r,onChange:n=>x(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a})]});case"email":return(0,wo.jsxs)("div",{children:[(0,wo.jsx)("input",{type:"email",value:r,onChange:n=>x(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a})]});case"password":return(0,wo.jsxs)("div",{children:[(0,wo.jsx)("input",{type:"password",value:r,onChange:n=>x(e,t,n.target.value),placeholder:"Enter password/token",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a}),t.includes("smtp")&&(0,wo.jsx)("p",{className:"mt-1 text-xs text-amber-600",children:"\ud83d\udd12 This credential is stored securely in the database"}),t.includes("mailersend")&&(0,wo.jsx)("p",{className:"mt-1 text-xs text-green-600",children:"\ud83d\udd11 MailerSend API credentials are encrypted and secure"})]});case"select":return(0,wo.jsxs)("div",{children:[(0,wo.jsx)("select",{value:r,onChange:n=>x(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:s&&Array.isArray(s)&&s.map((e=>(0,wo.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a}),s&&!Array.isArray(s)&&(0,wo.jsx)("p",{className:"mt-1 text-xs text-red-500",children:"Warning: Invalid options format for this setting"})]});default:return(0,wo.jsxs)("div",{children:[(0,wo.jsx)("input",{type:"text",value:r,onChange:n=>x(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a})]})}},j=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");if(m)return(0,wo.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,wo.jsx)("span",{className:"ml-2 text-gray-600",children:e("admin:settings.messages.loading")})]});if(f)return(0,wo.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,wo.jsxs)("div",{className:"flex",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)(Xc,{className:"h-5 w-5 text-red-400"})}),(0,wo.jsxs)("div",{className:"ml-3",children:[(0,wo.jsx)("h3",{className:"text-sm font-medium text-red-800",children:e("admin:settings.messages.load_failed")}),(0,wo.jsx)("div",{className:"mt-2",children:(0,wo.jsx)("button",{onClick:()=>g(),className:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200",children:e("admin:settings.messages.try_again")})})]})]})});const N=y.find((e=>e.key===s)),S=(()=>{const e=t[s]||{};return"email"===s?(e=>{if(!e)return{};const t={};return Object.entries(e).forEach((e=>{let[n,r]=e;(["from_email","from_name","admin_notifications"].includes(n)||n.startsWith("smtp_")&&"smtp"===l||n.startsWith("mailersend_")&&"mailersend"===l)&&(t[n]=r)})),t})(e):"translation"===s?(e=>{if(!e)return{};const t={};return Object.entries(e).forEach((e=>{let[n,r]=e;(["translation_provider","default_source_language","enabled_languages"].includes(n)||n.startsWith("anthropic_")&&"claude"===d||n.startsWith("openai_")&&"openai"===d||n.startsWith("microsoft_")&&"microsoft"===d||n.startsWith("google_")&&"google"===d)&&(t[n]=r)})),t})(e):e})();return(0,wo.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,wo.jsx)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:e("admin:settings.title")}),(0,wo.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:e("admin:settings.description")})]}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:[r&&(0,wo.jsxs)("div",{className:"flex items-center justify-center text-amber-600 text-sm py-2 sm:py-0",children:[(0,wo.jsx)(Xc,{className:"w-4 h-4 mr-1"}),e("admin:settings.actions.unsaved_changes")]}),(0,wo.jsxs)("div",{className:"flex gap-2",children:[(0,wo.jsxs)("button",{onClick:()=>g(),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,wo.jsx)(Bc,{className:"w-4 h-4 mr-2"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:e("admin:settings.actions.refresh")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Refresh"})]}),(0,wo.jsx)("button",{onClick:()=>{v.mutate({settings:t})},disabled:!r||v.isLoading,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-touch-target",children:v.isLoading?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:e("admin:settings.actions.saving")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Saving"})]}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(Jc,{className:"w-4 h-4 mr-2"}),e("admin:settings.actions.save")]})})]})]})]})}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,wo.jsxs)("div",{className:"sm:hidden border-b border-gray-200 p-4",children:[(0,wo.jsx)("label",{htmlFor:"category-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Settings Category"}),(0,wo.jsx)("select",{id:"category-select",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:y.map((e=>(0,wo.jsx)("option",{value:e.key,children:e.label},e.key)))})]}),(0,wo.jsx)("div",{className:"hidden sm:block w-64 bg-gray-50 border-r border-gray-200",children:(0,wo.jsx)("nav",{className:"p-4 space-y-2",children:y.map((e=>{const t=e.icon;return(0,wo.jsx)("button",{onClick:()=>o(e.key),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(s===e.key?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(t,{className:"w-4 h-4 mr-3"}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("div",{className:"font-medium",children:e.label}),(0,wo.jsx)("div",{className:"text-xs text-gray-500 hidden lg:block",children:e.description})]})]})},e.key)}))})}),(0,wo.jsxs)("div",{className:"flex-1 p-4 sm:p-6",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-6",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[N&&(0,wo.jsx)(N.icon,{className:"w-5 h-5 mr-2"}),(0,wo.jsxs)("span",{className:"hidden sm:inline",children:[null===N||void 0===N?void 0:N.label," Settings"]}),(0,wo.jsx)("span",{className:"sm:hidden",children:null===N||void 0===N?void 0:N.label})]}),(0,wo.jsx)("p",{className:"text-sm text-gray-500 mt-1 hidden sm:block",children:null===N||void 0===N?void 0:N.description})]}),(0,wo.jsxs)("button",{onClick:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.confirm(t?e("admin:settings.messages.reset_confirm",{category:t}):e("admin:settings.messages.reset_all_confirm"))&&b.mutate({category:t})}(s),disabled:b.isLoading,className:"inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,wo.jsx)($c,{className:"w-4 h-4 mr-2"}),e("admin:settings.actions.reset")]})]}),"email"===s&&(0,wo.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border",children:[(0,wo.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:e("admin:settings.email.provider_title")}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,wo.jsx)("button",{onClick:()=>w("smtp"),className:"flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("smtp"===l?"bg-blue-600 text-white border-2 border-blue-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-300"),children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"font-semibold",children:e("admin:settings.email.smtp_title")}),(0,wo.jsx)("div",{className:"text-xs opacity-75",children:e("admin:settings.email.smtp_description")})]})}),(0,wo.jsx)("button",{onClick:()=>w("mailersend"),className:"flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("mailersend"===l?"bg-blue-600 text-white border-2 border-blue-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-300"),children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"font-semibold",children:e("admin:settings.email.mailersend_title")}),(0,wo.jsx)("div",{className:"text-xs opacity-75",children:e("admin:settings.email.mailersend_description")})]})})]}),(0,wo.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:e("admin:settings.email.provider_description")})]}),"translation"===s&&(0,wo.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border",children:[(0,wo.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Translation Provider"}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,wo.jsx)("button",{onClick:()=>_("claude"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("claude"===d?"bg-orange-600 text-white border-2 border-orange-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-300"),children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"font-semibold",children:"\ud83e\udd16 Claude"}),(0,wo.jsx)("div",{className:"text-xs opacity-75",children:"Best for maritime content"})]})}),(0,wo.jsx)("button",{onClick:()=>_("openai"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("openai"===d?"bg-green-600 text-white border-2 border-green-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-green-300"),children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"font-semibold",children:"\ud83e\udde0 OpenAI"}),(0,wo.jsx)("div",{className:"text-xs opacity-75",children:"GPT-3.5 translations"})]})}),(0,wo.jsx)("button",{onClick:()=>_("microsoft"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("microsoft"===d?"bg-blue-600 text-white border-2 border-blue-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-300"),children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"font-semibold",children:"\ud83d\udd37 Microsoft"}),(0,wo.jsx)("div",{className:"text-xs opacity-75",children:"2M chars/month free"})]})}),(0,wo.jsx)("button",{onClick:()=>_("google"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("google"===d?"bg-red-600 text-white border-2 border-red-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-red-300"),children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"font-semibold",children:"\ud83c\udf10 Google"}),(0,wo.jsx)("div",{className:"text-xs opacity-75",children:"500K chars/month free"})]})})]}),(0,wo.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-md",children:(0,wo.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,wo.jsx)("strong",{children:"\ud83d\udcdd Setup Guide:"})," Choose your preferred provider and enter the API key below. Claude offers the best maritime terminology understanding, while Microsoft and Google provide generous free tiers."]})})]}),(0,wo.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[Object.entries(S).map((e=>{let[t,n]=e;return(0,wo.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j(t)}),k(s,t,n)]},"".concat(s,"-").concat(t))})),0===Object.keys("email"===s?(e=>{if(!e)return{};const n=(()=>{var e,n,r,i;return(null===t||void 0===t||null===(e=t.email)||void 0===e||null===(n=e.email_provider)||void 0===n?void 0:n.value)||(null===t||void 0===t||null===(r=t.email)||void 0===r||null===(i=r.email_service_provider)||void 0===i?void 0:i.value)||"smtp"})(),r={};return Object.entries(e).forEach((e=>{let[t,i]=e;(["from_email","from_name","admin_notifications"].includes(t)||t.startsWith("smtp_")&&"smtp"===n||t.startsWith("mailersend_")&&"mailersend"===n)&&(r[t]=i)})),r})(S):S).length&&(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)(Nc,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,wo.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:e("admin:settings.empty.title")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e("admin:settings.empty.message")})]})]},"".concat(s,"-").concat(l))]},s)]})]})},ed=dc("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),td=dc("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),nd=dc("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),rd=dc("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),id=dc("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ad=dc("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),sd=dc("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),od=dc("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),ld=dc("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),cd=dc("Anchor",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["line",{x1:"12",x2:"12",y1:"22",y2:"8",key:"abakz7"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}]]),dd=()=>{const{t:e}=Ma(["admin","common"]),[t,n]=(0,i.useState)("24h"),[r,a]=(0,i.useState)("overview"),[s,o]=(0,i.useState)(!0),{data:l,isLoading:c,error:d,refetch:u}=(0,Ie.useQuery)(["performance-metrics",t],(()=>so({timeRange:t})),{refetchInterval:!!s&&3e4,onError:t=>{rn.error(e("admin:performance.fetch_error")),console.error("Performance metrics error:",t)}}),{data:h,isLoading:p}=(0,Ie.useQuery)(["maritime-metrics",t],(()=>oo({timeRange:t})),{refetchInterval:!!s&&3e4}),{data:m,isLoading:f}=(0,Ie.useQuery)(["feedback-summary",t],(()=>lo({timeRange:t})),{refetchInterval:!!s&&6e4});if(c||p||f)return(0,wo.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(Bc,{className:"w-5 h-5 animate-spin text-blue-600"}),(0,wo.jsx)("span",{className:"text-gray-600",children:e("admin:performance.loading")})]})});if(d)return(0,wo.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(Xc,{className:"w-5 h-5 text-red-600"}),(0,wo.jsx)("span",{className:"text-red-800",children:e("admin:performance.error_loading")})]})});const g=(null===l||void 0===l?void 0:l.metrics)||{},v=(null===h||void 0===h?void 0:h.metrics)||{},b=(null===m||void 0===m?void 0:m.summary)||{};return(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[(0,wo.jsx)(ed,{className:"w-6 h-6 text-blue-600"}),(0,wo.jsx)("span",{children:e("admin:performance.title")})]}),(0,wo.jsx)("p",{className:"text-gray-600 mt-1",children:e("admin:performance.subtitle")})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[(0,wo.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,wo.jsx)("option",{value:"1h",children:e("admin:performance.time_ranges.1h")}),(0,wo.jsx)("option",{value:"24h",children:e("admin:performance.time_ranges.24h")}),(0,wo.jsx)("option",{value:"7d",children:e("admin:performance.time_ranges.7d")}),(0,wo.jsx)("option",{value:"30d",children:e("admin:performance.time_ranges.30d")})]}),(0,wo.jsx)("button",{onClick:()=>o(!s),className:"px-3 py-2 rounded-lg border transition-colors ".concat(s?"bg-green-50 border-green-200 text-green-700":"bg-gray-50 border-gray-200 text-gray-700"),children:(0,wo.jsx)(Bc,{className:"w-4 h-4 ".concat(s?"animate-spin":"")})}),(0,wo.jsxs)("button",{onClick:async()=>{try{const n=await co({timeRange:t}),r=new Blob([n.data],{type:"text/csv"}),i=window.URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download="performance-data-".concat(t,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i),document.body.removeChild(a),rn.success(e("admin:performance.export_success"))}catch(d){rn.error(e("admin:performance.export_error"))}},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,wo.jsx)(td,{className:"w-4 h-4"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:e("admin:performance.export")})]})]})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,wo.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,wo.jsx)(nd,{className:"w-6 h-6 text-blue-600"})}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.overall_score")}),(0,wo.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[v.performanceScore||85,"/100"]}),(0,wo.jsxs)("p",{className:"text-xs text-green-600 flex items-center",children:[(0,wo.jsx)(rd,{className:"w-3 h-3 mr-1"}),"+5% from last period"]})]})]})}),(0,wo.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,wo.jsx)(_c,{className:"w-6 h-6 text-green-600"})}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.active_users")}),(0,wo.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.activeUsers||0}),(0,wo.jsxs)("p",{className:"text-xs text-gray-500",children:[v.usersAtSea||0," at sea, ",v.usersInPort||0," in port"]})]})]})}),(0,wo.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,wo.jsx)(id,{className:"w-6 h-6 text-yellow-600"})}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.avg_response_time")}),(0,wo.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[g.avgResponseTime||0,"ms"]}),(0,wo.jsxs)("p",{className:"text-xs text-green-600 flex items-center",children:[(0,wo.jsx)(ad,{className:"w-3 h-3 mr-1"}),"-12ms from last period"]})]})]})}),(0,wo.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,wo.jsx)(sd,{className:"w-6 h-6 text-purple-600"})}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.user_satisfaction")}),(0,wo.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[b.averageRating||0,"/5.0"]}),(0,wo.jsxs)("p",{className:"text-xs text-gray-500",children:[b.totalResponses||0," responses"]})]})]})})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,wo.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(od,{className:"w-5 h-5 text-blue-600 mr-2"}),e("admin:performance.maritime.connection_quality")]}),(0,wo.jsx)("div",{className:"space-y-3",children:v.connectionQuality&&Object.entries(v.connectionQuality).map((e=>{let[t,n]=e;return(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:["offline"===t?(0,wo.jsx)(ld,{className:"w-4 h-4 text-red-500"}):(0,wo.jsx)(od,{className:"w-4 h-4 text-green-500"}),(0,wo.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:t})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,wo.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(n/(v.totalUsers||1)*100,"%")}})}),(0,wo.jsx)("span",{className:"text-sm font-medium text-gray-900",children:n})]})]},t)}))})]}),(0,wo.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(gc,{className:"w-5 h-5 text-blue-600 mr-2"}),e("admin:performance.maritime.location_distribution")]}),(0,wo.jsx)("div",{className:"space-y-3",children:v.locationDistribution&&Object.entries(v.locationDistribution).map((e=>{let[t,n]=e;return(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(cd,{className:"w-4 h-4 text-blue-500"}),(0,wo.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:t.replace("_"," ")})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,wo.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(n/(v.totalUsers||1)*100,"%")}})}),(0,wo.jsx)("span",{className:"text-sm font-medium text-gray-900",children:n})]})]},t)}))})]})]}),g.alerts&&g.alerts.length>0&&(0,wo.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(Xc,{className:"w-5 h-5 text-red-600 mr-2"}),e("admin:performance.alerts.title")]}),(0,wo.jsx)("div",{className:"space-y-3",children:g.alerts.map(((e,t)=>(0,wo.jsx)("div",{className:"p-3 rounded-lg border-l-4 ".concat("critical"===e.severity?"bg-red-50 border-red-500":"high"===e.severity?"bg-orange-50 border-orange-500":"medium"===e.severity?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"),children:(0,wo.jsxs)("div",{className:"flex items-start justify-between",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),(0,wo.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,wo.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]}),(0,wo.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("critical"===e.severity?"bg-red-100 text-red-800":"high"===e.severity?"bg-orange-100 text-orange-800":"medium"===e.severity?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.severity})]})},t)))})]}),b.recentFeedback&&b.recentFeedback.length>0&&(0,wo.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e("admin:performance.feedback.recent_title")}),(0,wo.jsx)("div",{className:"space-y-3",children:b.recentFeedback.slice(0,5).map(((e,t)=>(0,wo.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,wo.jsx)("div",{className:"text-2xl",children:"positive"===e.type?"\ud83d\ude0a":"negative"===e.type?"\ud83d\ude1e":"\ud83d\ude10"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("span",{className:"font-medium text-gray-900",children:e.context}),e.rating&&(0,wo.jsxs)("span",{className:"text-sm text-yellow-600",children:["\u2605".repeat(e.rating),"\u2606".repeat(5-e.rating)]})]}),e.comment&&(0,wo.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.comment}),(0,wo.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.submitted_at).toLocaleString()})]})]},t)))})]})]})},ud=()=>{const{user:e}=ko(),{t:t}=Ma(["admin","common"]),n=ne(),r=(0,Ie.useQueryClient)(),[a,s]=(0,i.useState)("overview"),[o,l]=(0,i.useState)([]),[c,d]=(0,i.useState)([]),[u,h]=(0,i.useState)({}),[p,m]=(0,i.useState)(!0),[f,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),[y,x]=(0,i.useState)(null),[w,_]=(0,i.useState)({}),k=(e,t)=>{_((n=>We(We({},n),{},{[e]:t})))};(0,i.useEffect)((()=>{"admin"===(null===e||void 0===e?void 0:e.role)&&j()}),[e]);const j=async()=>{try{m(!0);const[e,t,n]=await Promise.all([Ys(),Ks(),Bs()]);l(e.managers||[]),h(t||{}),d(n.templates||[])}catch(e){console.error("Failed to load dashboard data:",e),rn.error(t("admin:dashboard.messages.loadFailed"))}finally{m(!1)}},N=[{id:"overview",name:t("admin:dashboard.tabs.overview"),icon:wc},{id:"managers",name:t("admin:dashboard.tabs.managers"),icon:_c},{id:"templates",name:t("admin:dashboard.tabs.templates"),icon:kc},{id:"performance",name:"Performance",icon:wc},{id:"content",name:t("admin:dashboard.tabs.content"),icon:jc},{id:"settings",name:t("admin:dashboard.tabs.settings"),icon:Nc},{id:"audit",name:t("admin:dashboard.tabs.audit"),icon:fc}];return p?(0,wo.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,wo.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,wo.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,wo.jsx)("div",{className:"bg-white shadow",children:(0,wo.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,wo.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t("admin:dashboard.title")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t("common:welcome_back",{name:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)})})]}),(0,wo.jsx)("div",{className:"flex items-center space-x-4",children:(0,wo.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,wo.jsx)(fc,{className:"w-3 h-3 mr-1"}),t("common:roles.admin")]})})]})})}),(0,wo.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,wo.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,wo.jsx)("nav",{className:"-mb-px flex overflow-x-auto scrollbar-hide",children:N.map((e=>{const t=e.icon;return(0,wo.jsxs)("button",{onClick:()=>s(e.id),className:"".concat(a===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-2 px-3 sm:px-1 border-b-2 font-medium text-sm flex items-center flex-shrink-0"),children:[(0,wo.jsx)(t,{className:"w-4 h-4 mr-1 sm:mr-2"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:e.name}),(0,wo.jsx)("span",{className:"sm:hidden",children:e.name.split(" ")[0]})]},e.id)}))})}),"overview"===a&&(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[(0,wo.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg cursor-pointer hover:shadow-lg transition-shadow duration-200 hover:bg-gray-50",onClick:()=>s("managers"),children:(0,wo.jsx)("div",{className:"p-5",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)(_c,{className:"h-6 w-6 text-gray-400"})}),(0,wo.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,wo.jsxs)("dl",{children:[(0,wo.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("admin:dashboard.stats.managers")}),(0,wo.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:u.totalManagers||0})]})})]})})}),(0,wo.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,wo.jsx)("div",{className:"p-5",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)(_c,{className:"h-6 w-6 text-gray-400"})}),(0,wo.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,wo.jsxs)("dl",{children:[(0,wo.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("admin:dashboard.stats.crew")}),(0,wo.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:u.totalCrew||0})]})})]})})}),(0,wo.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg cursor-pointer hover:shadow-lg transition-shadow duration-200 hover:bg-gray-50",onClick:()=>s("templates"),children:(0,wo.jsx)("div",{className:"p-5",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)(kc,{className:"h-6 w-6 text-gray-400"})}),(0,wo.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,wo.jsxs)("dl",{children:[(0,wo.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("admin:dashboard.tabs.templates")}),(0,wo.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:c.length})]})})]})})})]}),"managers"===a&&(0,wo.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,wo.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t("admin:dashboard.sections.managers.title")}),(0,wo.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:t("admin:dashboard.sections.managers.description")})]}),(0,wo.jsxs)("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 w-full sm:w-auto justify-center",children:[(0,wo.jsx)(Sc,{className:"w-4 h-4 mr-2"}),t("admin:dashboard.sections.managers.add")]})]})}),(0,wo.jsx)("ul",{className:"divide-y divide-gray-200",children:o.map((e=>(0,wo.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:(0,wo.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,wo.jsx)(_c,{className:"h-5 w-5 text-gray-600"})})}),(0,wo.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,wo.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,wo.jsxs)("div",{className:"text-sm text-gray-500 truncate",children:[(0,wo.jsx)("span",{className:"block sm:inline",children:e.email}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:" \u2022 "}),(0,wo.jsx)("span",{className:"block sm:inline",children:e.position})]})]})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-2 ml-14 sm:ml-0",children:[(0,wo.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?t("admin:dashboard.sections.managers.active"):t("admin:dashboard.sections.managers.inactive")}),(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("button",{onClick:()=>(async(e,n,r)=>{const i="toggle-".concat(e);try{k(i,!0),await $s(e,{is_active:!n});const a=n?"managerDeactivated":"managerActivated";rn.success(t("admin:dashboard.messages.".concat(a),{name:r})),j()}catch(a){console.error("Failed to toggle manager status:",a),rn.error(t("admin:dashboard.messages.statusUpdateFailed"))}finally{k(i,!1)}})(e.id,e.is_active,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full ".concat(e.is_active?"text-red-600 hover:bg-red-100":"text-green-600 hover:bg-green-100"," disabled:opacity-50 disabled:cursor-not-allowed"),title:e.is_active?t("admin:dashboard.tooltips.deactivateManager"):t("admin:dashboard.tooltips.activateManager"),disabled:w["toggle-".concat(e.id)],children:w["toggle-".concat(e.id)]?(0,wo.jsx)(Ec,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):e.is_active?(0,wo.jsx)(Cc,{className:"w-5 h-5 sm:w-4 sm:h-4"}):(0,wo.jsx)(Ac,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,wo.jsx)("button",{onClick:()=>(async(e,n)=>{const r="magic-".concat(e);try{k(r,!0),await eo(e),rn.success(t("admin:dashboard.messages.magicLinkSent",{name:n}))}catch(s){var i,a;console.error("Failed to send magic link:",s);const e=(null===(i=s.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.error)||t("admin:dashboard.messages.magicLinkFailed");rn.error(e)}finally{k(r,!1)}})(e.id,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full text-purple-600 hover:bg-purple-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("admin:dashboard.tooltips.sendMagicLink"),disabled:!e.is_active||w["magic-".concat(e.id)],children:w["magic-".concat(e.id)]?(0,wo.jsx)(Ec,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,wo.jsx)(uc,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,wo.jsx)("button",{onClick:()=>(async(e,n)=>{const i="welcome-".concat(e);try{k(i,!0),await to(e),rn.success(t("admin:dashboard.messages.welcomeEmailResent",{name:n})),r.invalidateQueries(["manager",e]),j()}catch(o){var a,s;console.error("Failed to resend welcome email:",o);const e=(null===(a=o.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error)||t("admin:dashboard.messages.welcomeEmailFailed");rn.error(e)}finally{k(i,!1)}})(e.id,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full text-green-600 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("admin:dashboard.tooltips.resendWelcomeEmail"),disabled:!e.is_active||w["welcome-".concat(e.id)],children:w["welcome-".concat(e.id)]?(0,wo.jsx)(Ec,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,wo.jsx)(Tc,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,wo.jsx)("button",{onClick:()=>{return t=e.id,x(t),void b(!0);var t},className:"p-2 sm:p-1 rounded-full text-blue-600 hover:bg-blue-100",title:t("admin:dashboard.tooltips.editManager"),children:(0,wo.jsx)(jc,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,wo.jsx)("button",{onClick:()=>(async(e,n)=>{if(window.confirm(t("admin:dashboard.messages.deleteConfirm",{name:n}))){const n="delete-".concat(e);try{k(n,!0),await Zs(e),rn.success(t("admin:dashboard.messages.managerDeleted")),j()}catch(r){console.error("Failed to delete manager:",r),rn.error(t("admin:dashboard.messages.deleteFailed"))}finally{k(n,!1)}}})(e.id,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full text-red-600 hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("admin:dashboard.tooltips.deleteManager"),disabled:w["delete-".concat(e.id)],children:w["delete-".concat(e.id)]?(0,wo.jsx)(Ec,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,wo.jsx)(Oc,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]})]})},e.id)))})]}),"templates"===a&&(0,wo.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,wo.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t("admin:dashboard.sections.templates.title")}),(0,wo.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:t("admin:dashboard.sections.templates.description")})]}),(0,wo.jsxs)("button",{onClick:()=>window.location.href="/templates/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 w-full sm:w-auto justify-center",children:[(0,wo.jsx)(Sc,{className:"w-4 h-4 mr-2"}),t("admin:dashboard.sections.templates.create")]})]})}),c.length>0?(0,wo.jsx)("ul",{className:"divide-y divide-gray-200",children:c.map((e=>(0,wo.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,wo.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,wo.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,wo.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,wo.jsx)("span",{className:"block sm:inline truncate",children:e.description}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:" \u2022 "}),(0,wo.jsxs)("span",{className:"block sm:inline",children:["Created ",new Date(e.createdAt||e.created_at).toLocaleDateString()]})]})]}),(0,wo.jsxs)("div",{className:"flex items-center gap-2 ml-0 sm:ml-4",children:[(0,wo.jsx)("button",{onClick:()=>window.location.href="/templates/preview/".concat(e.id),className:"p-2 sm:p-1 rounded-full text-blue-600 hover:bg-blue-100",title:t("common:actions.preview"),children:(0,wo.jsx)(Pc,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,wo.jsx)("button",{onClick:()=>window.location.href="/templates/edit/".concat(e.id),className:"p-2 sm:p-1 rounded-full text-blue-600 hover:bg-blue-100",title:t("common:actions.edit"),children:(0,wo.jsx)(jc,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,wo.jsx)("button",{onClick:()=>(async(e,n)=>{if(window.confirm(t("admin:dashboard.messages.templateDeleteConfirm",{name:n}))){const n="template-delete-".concat(e);try{k(n,!0),await Gs(e),rn.success(t("admin:dashboard.messages.templateDeleted")),j()}catch(r){console.error("Failed to delete template:",r),rn.error(t("admin:dashboard.messages.templateDeleteFailed"))}finally{k(n,!1)}}})(e.id,e.name),className:"p-2 sm:p-1 rounded-full text-red-600 hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("common:actions.delete"),disabled:w["template-delete-".concat(e.id)],children:w["template-delete-".concat(e.id)]?(0,wo.jsx)(Ec,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,wo.jsx)(Oc,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]})},e.id)))}):(0,wo.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,wo.jsx)(kc,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,wo.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t("admin:dashboard.sections.templates.empty")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t("admin:dashboard.sections.templates.emptyDescription")}),(0,wo.jsx)("div",{className:"mt-6",children:(0,wo.jsxs)("button",{onClick:()=>window.location.href="/templates/new",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,wo.jsx)(Sc,{className:"w-4 h-4 mr-2"}),t("admin:dashboard.sections.templates.create")]})})]})]}),"performance"===a&&(0,wo.jsx)(dd,{}),"audit"===a&&(0,wo.jsx)(Vc,{}),"settings"===a&&(0,wo.jsx)(Zc,{}),"content"===a&&(0,wo.jsxs)("div",{className:"text-center py-8",children:[(0,wo.jsx)("p",{className:"text-gray-500",children:t("admin:dashboard.sections.content.redirecting")}),(n("/flows"),null)]})]}),(0,wo.jsx)(Fc,{isOpen:f,onClose:()=>g(!1),onSuccess:j}),(0,wo.jsx)(zc,{isOpen:v,onClose:()=>{b(!1),x(null)},onSuccess:j,managerId:y})]})},hd=dc("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),pd=dc("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),md=dc("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);function fd(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function gd(e){fd(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===ze(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function vd(e){if(fd(1,arguments),!function(e){return fd(1,arguments),e instanceof Date||"object"===ze(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=gd(e);return!isNaN(Number(t))}function bd(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function yd(e,t){return fd(2,arguments),function(e,t){fd(2,arguments);var n=gd(e).getTime(),r=bd(t);return new Date(n+r)}(e,-bd(t))}function xd(e){fd(1,arguments);var t=gd(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function wd(e){fd(1,arguments);var t=gd(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=xd(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var s=xd(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function _d(e){fd(1,arguments);var t=gd(e),n=xd(t).getTime()-function(e){fd(1,arguments);var t=wd(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),xd(n)}(t).getTime();return Math.round(n/6048e5)+1}var kd={};function jd(){return kd}function Nd(e,t){var n,r,i,a,s,o,l,c;fd(1,arguments);var d=jd(),u=bd(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=gd(e),p=h.getUTCDay(),m=(p<u?7:0)+p-u;return h.setUTCDate(h.getUTCDate()-m),h.setUTCHours(0,0,0,0),h}function Sd(e,t){var n,r,i,a,s,o,l,c;fd(1,arguments);var d=gd(e),u=d.getUTCFullYear(),h=jd(),p=bd(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setUTCFullYear(u+1,0,p),m.setUTCHours(0,0,0,0);var f=Nd(m,t),g=new Date(0);g.setUTCFullYear(u,0,p),g.setUTCHours(0,0,0,0);var v=Nd(g,t);return d.getTime()>=f.getTime()?u+1:d.getTime()>=v.getTime()?u:u-1}function Ed(e,t){fd(1,arguments);var n=gd(e),r=Nd(n,t).getTime()-function(e,t){var n,r,i,a,s,o,l,c;fd(1,arguments);var d=jd(),u=bd(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==i?i:d.firstWeekContainsDate)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=Sd(e,t),p=new Date(0);return p.setUTCFullYear(h,0,u),p.setUTCHours(0,0,0,0),Nd(p,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function Cd(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Ad={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Cd("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Cd(n+1,2)},d:function(e,t){return Cd(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return Cd(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Cd(e.getUTCHours(),t.length)},m:function(e,t){return Cd(e.getUTCMinutes(),t.length)},s:function(e,t){return Cd(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return Cd(Math.floor(r*Math.pow(10,n-3)),t.length)}};const Td=Ad;var Od="midnight",Pd="noon",Md="morning",Dd="afternoon",Rd="evening",Ld="night",Id={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Td.y(e,t)},Y:function(e,t,n,r){var i=Sd(e,r),a=i>0?i:1-i;return"YY"===t?Cd(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):Cd(a,t.length)},R:function(e,t){return Cd(wd(e),t.length)},u:function(e,t){return Cd(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Cd(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Cd(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Td.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Cd(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=Ed(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Cd(i,t.length)},I:function(e,t,n){var r=_d(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Cd(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Td.d(e,t)},D:function(e,t,n){var r=function(e){fd(1,arguments);var t=gd(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Cd(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Cd(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Cd(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Cd(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?Pd:0===i?Od:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?Rd:i>=12?Dd:i>=4?Md:Ld,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Td.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Td.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Cd(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Cd(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Td.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Td.s(e,t)},S:function(e,t){return Td.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return zd(i);case"XXXX":case"XX":return qd(i);default:return qd(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return zd(i);case"xxxx":case"xx":return qd(i);default:return qd(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Fd(i,":");default:return"GMT"+qd(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Fd(i,":");default:return"GMT"+qd(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return Cd(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return Cd((r._originalDate||e).getTime(),t.length)}};function Fd(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(0===a)return n+String(i);var s=t||"";return n+String(i)+s+Cd(a,2)}function zd(e,t){return e%60===0?(e>0?"-":"+")+Cd(Math.abs(e)/60,2):qd(e,t)}function qd(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+Cd(Math.floor(i/60),2)+n+Cd(i%60,2)}const Bd=Id;var Ud=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Wd=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Hd={p:Wd,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return Ud(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ud(i,t)).replace("{{time}}",Wd(a,t))}};const Vd=Hd;var Gd=["D","DD"],Qd=["YY","YYYY"];function Kd(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Yd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Xd=function(e,t,n){var r,i=Yd[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Jd(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const $d={date:Jd({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Jd({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Jd({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Zd={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const eu=function(e,t,n,r){return Zd[e]};function tu(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var s=e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var nu={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:tu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:tu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:tu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:tu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:tu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function ru(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;var s,o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(o)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(o)}));return s=e.valueCallback?e.valueCallback(c):c,{value:s=n.valueCallback?n.valueCallback(s):s,rest:t.slice(o.length)}}}var iu;const au={code:"en-US",formatDistance:Xd,formatLong:$d,formatRelative:eu,localize:nu,match:{ordinalNumber:(iu={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(iu.matchPattern);if(!n)return null;var r=n[0],i=e.match(iu.parsePattern);if(!i)return null;var a=iu.valueCallback?iu.valueCallback(i[0]):i[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(r.length)}}),era:ru({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ru({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ru({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ru({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ru({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var su=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ou=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lu=/^'([^]*?)'?$/,cu=/''/g,du=/[a-zA-Z]/;function uu(e,t,n){var r,i,a,s,o,l,c,d,u,h,p,m,f,g,v,b,y,x;fd(2,arguments);var w=String(t),_=jd(),k=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:_.locale)&&void 0!==r?r:au,j=bd(null!==(a=null!==(s=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:_.firstWeekContainsDate)&&void 0!==s?s:null===(u=_.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==a?a:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=bd(null!==(p=null!==(m=null!==(f=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(b=v.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==f?f:_.weekStartsOn)&&void 0!==m?m:null===(y=_.locale)||void 0===y||null===(x=y.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==p?p:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw new RangeError("locale must contain localize property");if(!k.formatLong)throw new RangeError("locale must contain formatLong property");var S=gd(e);if(!vd(S))throw new RangeError("Invalid time value");var E=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(S),C=yd(S,E),A={firstWeekContainsDate:j,weekStartsOn:N,locale:k,_originalDate:S};return w.match(ou).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Vd[t])(e,k.formatLong):e})).join("").match(su).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(lu);if(!t)return e;return t[1].replace(cu,"'")}(r);var a,s=Bd[i];if(s)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||(a=r,-1===Qd.indexOf(a))||Kd(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==Gd.indexOf(e)}(r)||Kd(r,t,String(e)),s(C,r,k.localize,A);if(i.match(du))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}const hu=e=>{var t;let{onViewCertificate:n,onRegenerateCertificate:r,onDeleteCertificate:a}=e;const{t:s}=Ma(["admin","common"]),[o,l]=(0,i.useState)(""),[c,d]=(0,i.useState)("all"),[u,h]=(0,i.useState)(1),[p,m]=(0,i.useState)(10),[f,g]=(0,i.useState)("created_at"),[v,b]=(0,i.useState)("desc"),{data:y,isLoading:x,isError:w,error:_,refetch:k}=(0,Ie.useQuery)(["certificates",u,p,c,f,v],(()=>Ss({page:u,limit:p,certificate_type:"all"!==c?c:void 0,sort_by:f,sort_order:v})),{keepPreviousData:!0}),j=(null===y||void 0===y||null===(t=y.certificates)||void 0===t?void 0:t.filter((e=>{if(!o)return!0;const t=o.toLowerCase();return"".concat(e.users.first_name," ").concat(e.users.last_name).toLowerCase().includes(t)||(e.certificate_number||"").toLowerCase().includes(t)||(e.certificate_type||"").toLowerCase().includes(t)||(e.users.email||"").toLowerCase().includes(t)||(e.users.position||"").toLowerCase().includes(t)||(e.users.vessel_assignment||"").toLowerCase().includes(t)})))||[],N=e=>{f===e?b("asc"===v?"desc":"asc"):(g(e),b("desc"))},S=e=>{if(!e)return s("common:common.not_set");try{return uu(new Date(e),"dd MMM yyyy")}catch(He){return e}},E=e=>{if(!e.expiry_date)return"badge badge-secondary";const t=new Date,n=new Date(e.expiry_date);if(n<t)return"badge badge-danger";const r=new Date;return r.setDate(t.getDate()+30),n<r?"badge badge-warning":e.verified?"badge badge-success":"badge badge-info"},C=e=>{if(!e.expiry_date)return s("admin:certificates.status.noExpiry");const t=new Date,n=new Date(e.expiry_date);if(n<t)return s("admin:certificates.status.expired");const r=new Date;return r.setDate(t.getDate()+30),n<r?s("admin:certificates.status.expiringSoon"):e.verified?s("admin:certificates.status.valid"):s("admin:certificates.status.unverified")};return x?(0,wo.jsx)(vc,{message:s("admin:certificates.loading")}):w?(0,wo.jsxs)("div",{className:"glass-card p-6 text-center",children:[(0,wo.jsx)(hd,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("admin:certificates.error")}),(0,wo.jsx)("p",{className:"text-gray-600 mb-4",children:(null===_||void 0===_?void 0:_.message)||s("admin:certificates.failed")}),(0,wo.jsxs)("button",{onClick:k,className:"btn btn-primary",children:[(0,wo.jsx)(Bc,{className:"h-4 w-4 mr-2"}),s("admin:certificates.tryAgain")]})]}):(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsx)("div",{className:"glass-card p-6",children:(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,wo.jsx)("div",{className:"flex-1 max-w-md",children:(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsx)(pd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,wo.jsx)("input",{type:"text",placeholder:s("admin:certificates.search"),value:o,onChange:e=>l(e.target.value),className:"glass-input pl-10 pr-4 py-3 w-full"})]})}),(0,wo.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(qc,{className:"h-4 w-4 text-gray-500"}),(0,wo.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"glass-input px-4 py-3",children:[(0,wo.jsx)("option",{value:"all",children:s("admin:certificates.filters.allTypes")}),(0,wo.jsx)("option",{value:"Maritime Onboarding Training",children:s("admin:certificates.filters.onboardingTraining")}),(0,wo.jsx)("option",{value:"Intro Kapitein",children:s("admin:certificates.filters.introKapitein")})]})]}),(0,wo.jsxs)("button",{onClick:k,className:"glass-input px-4 py-2 text-slate-700 hover:text-slate-900 transition-all duration-300 flex items-center gap-2 rounded-xl",children:[(0,wo.jsx)(Bc,{className:"h-4 w-4"}),s("admin:certificates.refresh")]})]})]})}),(0,wo.jsxs)("div",{className:"glass-card hover-lift",children:[(0,wo.jsxs)("div",{className:"p-8 border-b border-white/20",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("admin:certificates.title")}),(0,wo.jsx)("p",{className:"text-slate-600 mt-2",children:s("admin:certificates.description")})]}),(0,wo.jsxs)("div",{className:"p-6",children:[(0,wo.jsx)("div",{className:"overflow-x-auto",children:0===j.length?(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)(kc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("admin:certificates.noFound")}),(0,wo.jsx)("p",{className:"text-gray-600",children:s("admin:certificates.noFoundDescription")})]}):(0,wo.jsxs)("table",{className:"w-full",children:[(0,wo.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-t-xl",children:(0,wo.jsxs)("tr",{children:[(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tl-xl cursor-pointer",onClick:()=>N("certificate_type"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.type"),"certificate_type"===f&&(0,wo.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer",onClick:()=>N("users.last_name"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.crewMember"),"users.last_name"===f&&(0,wo.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer",onClick:()=>N("issue_date"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.issueDate"),"issue_date"===f&&(0,wo.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer",onClick:()=>N("expiry_date"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.expiryDate"),"expiry_date"===f&&(0,wo.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("admin:certificates.table.status")}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tr-xl",children:s("admin:certificates.table.actions")})]})}),(0,wo.jsx)("tbody",{className:"bg-white/50 divide-y divide-slate-200",children:j.map((e=>(0,wo.jsxs)("tr",{className:"hover:bg-white/80 transition-colors duration-200",children:[(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(kc,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,wo.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.certificate_type})]})}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[(0,wo.jsx)(Dc,{className:"h-4 w-4 text-gray-400 mr-2"}),e.users.first_name," ",e.users.last_name]}),(0,wo.jsx)("div",{className:"text-sm text-gray-500",children:e.users.position})]})}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wo.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,wo.jsx)(Uc,{className:"h-4 w-4 text-gray-400 mr-2"}),S(e.issue_date)]})}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wo.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,wo.jsx)(Uc,{className:"h-4 w-4 text-gray-400 mr-2"}),S(e.expiry_date)]})}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wo.jsx)("span",{className:E(e),children:C(e)})}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("button",{onClick:()=>n(e),className:"btn btn-sm btn-info",title:s("common:buttons.view"),children:(0,wo.jsx)(Pc,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>window.open(e.file_url,"_blank"),className:"btn btn-sm btn-outline",title:s("common:buttons.download"),disabled:!e.file_url,children:(0,wo.jsx)(td,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>r(e),className:"btn btn-sm btn-secondary",title:s("admin:certificates.details.regenerate"),children:(0,wo.jsx)(md,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>a(e),className:"btn btn-sm btn-danger",title:s("common:buttons.delete"),children:(0,wo.jsx)(Oc,{className:"h-3 w-3"})})]})})]},e.id)))})]})}),(null===y||void 0===y?void 0:y.pagination)&&(0,wo.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,wo.jsxs)("div",{className:"text-sm text-gray-600",children:[s("admin:certificates.pagination.showing")," ",(u-1)*p+1," ",s("admin:certificates.pagination.to")," ",Math.min(u*p,y.pagination.total)," ",s("admin:certificates.pagination.of")," ",y.pagination.total," ",s("admin:certificates.pagination.results")]}),(0,wo.jsxs)("div",{className:"flex space-x-2",children:[(0,wo.jsx)("button",{onClick:()=>{h((e=>Math.max(e-1,1)))},disabled:1===u,className:"btn btn-sm ".concat(1===u?"btn-disabled":"btn-outline"),children:s("admin:certificates.pagination.previous")}),(0,wo.jsx)("button",{onClick:()=>{null!==y&&void 0!==y&&y.pagination&&h((e=>e<y.pagination.pages?e+1:e))},disabled:u>=y.pagination.pages,className:"btn btn-sm ".concat(u>=y.pagination.pages?"btn-disabled":"btn-outline"),children:s("admin:certificates.pagination.next")})]})]})]})]})]})},pu=dc("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),mu=e=>{let{certificate:t,onClose:n,onRegenerateSuccess:r}=e;const{t:a}=Ma(["admin","common"]),[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)({certificate_type:t.certificate_type,certificate_number:t.certificate_number,issue_date:t.issue_date,expiry_date:t.expiry_date,issuing_authority:t.issuing_authority,verified:t.verified}),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),m=(0,Ie.useQueryClient)(),f=e=>{if(!e)return a("common:common.not_set");try{return uu(new Date(e),"dd MMM yyyy")}catch(He){return e}},g=(0,Ie.useMutation)((e=>Es(t.id,e)),{onSuccess:()=>{m.invalidateQueries("certificates"),rn.success(a("admin:certificates.messages.updated")),o(!1)},onError:e=>{rn.error(a("admin:certificates.messages.updateFailed",{error:e.message}))}}),v=(0,Ie.useMutation)((()=>Cs(t.id)),{onSuccess:()=>{m.invalidateQueries("certificates"),rn.success(a("admin:certificates.messages.deleted")),n()},onError:e=>{rn.error(a("admin:certificates.messages.deleteFailed",{error:e.message}))}}),b=(0,Ie.useMutation)((()=>As({userId:t.user_id,certificateType:"Intro Kapitein"===t.certificate_type?"intro_kapitein":"standard",certificateId:t.id})),{onSuccess:e=>{m.invalidateQueries("certificates"),rn.success(a("admin:certificates.messages.regenerated")),r&&r(e.certificate),p(!1)},onError:e=>{rn.error(a("admin:certificates.messages.regenerateFailed",{error:e.message}))}}),y=e=>{const{name:t,value:n,type:r,checked:i}=e.target;c((e=>We(We({},e),{},{[t]:"checkbox"===r?i:n})))};return(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wo.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,wo.jsx)(kc,{className:"h-5 w-5 text-blue-600 mr-2"}),a("admin:certificates.details.title")]}),(0,wo.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,wo.jsx)(Mc,{className:"h-6 w-6"})})]}),(0,wo.jsxs)("div",{className:"p-6 space-y-6",children:[(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t.certificate_type}),(0,wo.jsxs)("p",{className:"text-gray-600 flex items-center mt-1",children:[(0,wo.jsx)(pu,{className:"h-4 w-4 mr-2"}),"Certificate #",t.certificate_number]})]}),(0,wo.jsxs)("div",{className:"flex flex-col items-end",children:[(0,wo.jsx)("span",{className:(()=>{if(!t.expiry_date)return"badge badge-secondary";const e=new Date,n=new Date(t.expiry_date);if(n<e)return"badge badge-danger";const r=new Date;return r.setDate(e.getDate()+30),n<r?"badge badge-warning":t.verified?"badge badge-success":"badge badge-info"})(),children:(()=>{if(!t.expiry_date)return a("admin:certificates.status.noExpiry");const e=new Date,n=new Date(t.expiry_date);if(n<e)return a("admin:certificates.status.expired");const r=new Date;return r.setDate(e.getDate()+30),n<r?a("admin:certificates.status.expiringSoon"):t.verified?a("admin:certificates.status.valid"):a("admin:certificates.status.unverified")})()}),(0,wo.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:t.verified?a("admin:certificates.status.verified"):a("admin:certificates.status.notVerified")})]})]}),(0,wo.jsxs)("div",{className:"glass-card p-4",children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:a("admin:certificates.details.crewInfo")}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.name")}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,wo.jsx)(Dc,{className:"h-4 w-4 text-gray-400 mr-2"}),t.users.first_name," ",t.users.last_name]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.email")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.users.email})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.position")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.users.position})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.vessel")}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,wo.jsx)(gc,{className:"h-4 w-4 text-gray-400 mr-2"}),t.users.vessel_assignment]})]})]})]}),s?(0,wo.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g.mutate(l)},className:"glass-card p-4",children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:a("admin:certificates.details.editTitle")}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:a("admin:certificates.details.certificateType")}),(0,wo.jsx)("input",{type:"text",name:"certificate_type",value:l.certificate_type,onChange:y,className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:a("admin:certificates.details.certificateNumber")}),(0,wo.jsx)("input",{type:"text",name:"certificate_number",value:l.certificate_number,onChange:y,className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:a("admin:certificates.details.issueDate")}),(0,wo.jsx)("input",{type:"date",name:"issue_date",value:l.issue_date,onChange:y,className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:a("admin:certificates.details.expiryDate")}),(0,wo.jsx)("input",{type:"date",name:"expiry_date",value:l.expiry_date,onChange:y,className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:a("admin:certificates.details.issuingAuthority")}),(0,wo.jsx)("input",{type:"text",name:"issuing_authority",value:l.issuing_authority,onChange:y,className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group flex items-center",children:[(0,wo.jsx)("label",{className:"form-label mr-2",children:a("admin:certificates.details.verified")}),(0,wo.jsx)("input",{type:"checkbox",name:"verified",checked:l.verified,onChange:y,className:"form-checkbox h-5 w-5"})]})]}),(0,wo.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,wo.jsx)("button",{type:"button",onClick:()=>o(!1),className:"btn btn-secondary",children:a("admin:certificates.details.cancel")}),(0,wo.jsx)("button",{type:"submit",disabled:g.isLoading,className:"btn btn-primary",children:g.isLoading?(0,wo.jsx)(vc,{size:"small",message:""}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(Jc,{className:"h-4 w-4 mr-2"}),a("admin:certificates.details.saveChanges")]})})]})]}):(0,wo.jsxs)("div",{className:"glass-card p-4",children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:a("admin:certificates.details.title")}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.certificateType")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.certificate_type})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.certificateNumber")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.certificate_number})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.issueDate")}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,wo.jsx)(Uc,{className:"h-4 w-4 text-gray-400 mr-2"}),f(t.issue_date)]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.expiryDate")}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,wo.jsx)(Uc,{className:"h-4 w-4 text-gray-400 mr-2"}),f(t.expiry_date)]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("admin:certificates.details.issuingAuthority")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.issuing_authority})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a("common:general.created_at")}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:f(t.created_at)})]})]})]}),t.metadata&&(0,wo.jsxs)("div",{className:"glass-card p-4",children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:a("admin:certificates.details.metadata")}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.metadata.phase1_completed&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 1 Completed"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase1_completed})]}),t.metadata.phase1_score&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 1 Score"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase1_score})]}),t.metadata.phase2_completed&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 2 Completed"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase2_completed})]}),t.metadata.phase2_score&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 2 Score"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase2_score})]}),t.metadata.phase3_completed&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 3 Completed"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase3_completed})]}),t.metadata.phase3_score&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 3 Score"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase3_score})]}),t.metadata.overall_score&&(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Overall Score"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.overall_score})]}),t.metadata.replaced_by&&(0,wo.jsxs)("div",{className:"col-span-2",children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Replaced By"}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900",children:["Certificate #",t.metadata.replaced_by]})]})]})]}),(0,wo.jsxs)("div",{className:"flex flex-wrap justify-end space-x-3 pt-4 border-t",children:[!s&&(0,wo.jsxs)("button",{onClick:()=>o(!0),className:"btn btn-secondary",children:[(0,wo.jsx)(jc,{className:"h-4 w-4 mr-2"}),a("admin:certificates.details.editDetails")]}),(0,wo.jsxs)("button",{onClick:()=>window.open(t.file_url,"_blank"),className:"btn btn-outline",disabled:!t.file_url,children:[(0,wo.jsx)(td,{className:"h-4 w-4 mr-2"}),a("admin:certificates.details.download")]}),h?(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsxs)("span",{className:"text-sm text-red-600 flex items-center",children:[(0,wo.jsx)(Xc,{className:"h-4 w-4 mr-1"}),a("admin:certificates.details.regenerateConfirm")]}),(0,wo.jsx)("button",{onClick:()=>b.mutate(),disabled:b.isLoading,className:"btn btn-danger",children:b.isLoading?(0,wo.jsx)(vc,{size:"small",message:""}):(0,wo.jsx)(sd,{className:"h-4 w-4"})}),(0,wo.jsx)("button",{onClick:()=>p(!1),className:"btn btn-secondary",children:(0,wo.jsx)(hd,{className:"h-4 w-4"})})]}):(0,wo.jsxs)("button",{onClick:()=>p(!0),className:"btn btn-primary",children:[(0,wo.jsx)(md,{className:"h-4 w-4 mr-2"}),a("admin:certificates.details.regenerate")]}),d?(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsxs)("span",{className:"text-sm text-red-600 flex items-center",children:[(0,wo.jsx)(Xc,{className:"h-4 w-4 mr-1"}),a("admin:certificates.details.deleteConfirm")]}),(0,wo.jsx)("button",{onClick:()=>v.mutate(),disabled:v.isLoading,className:"btn btn-danger",children:v.isLoading?(0,wo.jsx)(vc,{size:"small",message:""}):(0,wo.jsx)(sd,{className:"h-4 w-4"})}),(0,wo.jsx)("button",{onClick:()=>u(!1),className:"btn btn-secondary",children:(0,wo.jsx)(hd,{className:"h-4 w-4"})})]}):(0,wo.jsxs)("button",{onClick:()=>u(!0),className:"btn btn-danger",children:[(0,wo.jsx)(Oc,{className:"h-4 w-4 mr-2"}),a("admin:certificates.details.delete")]})]})]})]})})},fu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{invalidMessage:n="Not Set",formatOptions:r={}}=t;if(null===e||void 0===e)return n;const i=new Date(e);return isNaN(i.getTime())?n:i.toLocaleDateString(void 0,r)},gu=()=>{var e,t,n;const{user:r}=ko(),a=ne(),{t:s,i18n:o}=Ma(["manager","dashboard","common","forms","api"]);i.useEffect((()=>{console.log("Translation Debug:",{currentLanguage:o.language,isInitialized:o.isInitialized,hasResources:o.hasResourceBundle(o.language,"manager"),testTranslation:s("dashboard.title"),testCommonTranslation:s("common:manager.crew_management")})}),[o,s]);const[l,c]=(0,i.useState)("crew"),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(!1),[m,f]=(0,i.useState)(""),[g,v]=(0,i.useState)("all"),[b,y]=(0,i.useState)([]),[x,w]=(0,i.useState)(!1),[_,k]=(0,i.useState)(null),[j,N]=(0,i.useState)(null),S=(0,Ie.useQueryClient)(),E=[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}],{register:C,handleSubmit:A,formState:{errors:T},reset:O}=oc(),{register:P,handleSubmit:M,formState:{errors:D},reset:R,setValue:L}=oc(),{data:I,isLoading:F}=(0,Ie.useQuery)("dashboard-stats",ws),{data:z,isLoading:q}=(0,Ie.useQuery)("crew-members",ps),{data:B,isLoading:U}=(0,Ie.useQuery)("pending-quiz-reviews",_s,{enabled:"quiz-reviews"===l}),{data:W,isLoading:H}=(0,Ie.useQuery)("onboarding-reviews",js,{enabled:"onboarding-reviews"===l}),{data:V,isLoading:G}=(0,Ie.useQuery)("certificates",Ss,{enabled:"certificates"===l}),Q=(0,Ie.useMutation)(hs,{onSuccess:()=>{S.invalidateQueries("crew-members"),S.invalidateQueries("dashboard-stats"),rn.success(s("manager:dashboard.messages.crewCreated")),p(!1),O()},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.crewCreateFailed");rn.error(r)}}),K=(0,Ie.useMutation)(vs,{onSuccess:()=>{rn.success(s("manager:dashboard.messages.magicLinkSent"))},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.magicLinkFailed");rn.error(r)}}),Y=(0,Ie.useMutation)((e=>{let{id:t,data:n}=e;return ms(t,n)}),{onSuccess:()=>{S.invalidateQueries("crew-members"),S.invalidateQueries("dashboard-stats"),rn.success(s("manager:dashboard.messages.crewUpdated")),k(null)},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.crewUpdateFailed");rn.error(r)}}),X=(0,Ie.useMutation)((e=>{let{id:t,forceDelete:n}=e;return fs(t,n)}),{onSuccess:e=>{S.invalidateQueries("crew-members"),S.invalidateQueries("dashboard-stats"),rn.success(e.message)},onError:e=>{var t,n;const r=null===(t=e.response)||void 0===t?void 0:t.data;if(409===(null===(n=e.response)||void 0===n?void 0:n.status)&&null!==r&&void 0!==r&&r.requiresConfirmation){const{crewMember:t}=r,n="".concat(t.name," has training records.\n\n").concat(r.message,"\n\nDo you want to proceed?");if(window.confirm(n)){var i;const t=null===(i=e.config.url.match(/\/crew\/(\d+)/))||void 0===i?void 0:i[1];t&&X.mutate({id:t,forceDelete:!0})}}else{const e=(null===r||void 0===r?void 0:r.error)||s("manager:dashboard.messages.crewDeleteFailed");rn.error(e)}}}),J=(0,Ie.useMutation)((e=>{let{action:t,userIds:n}=e;return gs(t,n)}),{onSuccess:e=>{S.invalidateQueries("crew-members"),S.invalidateQueries("dashboard-stats"),rn.success(e.message),y([]),w(!1)},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("api:errors.general.serverError");rn.error(r)}}),$=(0,Ie.useMutation)((e=>{let{quizId:t,reviewData:n}=e;return ks(t,n)}),{onSuccess:()=>{S.invalidateQueries("pending-quiz-reviews"),S.invalidateQueries("onboarding-reviews"),rn.success(s("manager:dashboard.messages.quizReviewed"))},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.quizReviewFailed");rn.error(r)}}),Z=(0,Ie.useMutation)(Ns,{onSuccess:()=>{S.invalidateQueries("onboarding-reviews"),S.invalidateQueries("crew-members"),S.invalidateQueries("dashboard-stats"),rn.success(s("manager:dashboard.messages.onboardingApproved"))},onError:e=>{var t,n;const r=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.onboardingApproveFailed");rn.error(r)}});i.useEffect((()=>{_&&(L("firstName",_.firstName),L("lastName",_.lastName),L("email",_.email),L("position",_.position),L("vesselAssignment",_.vesselAssignment),L("expectedBoardingDate",_.expectedBoardingDate),L("contactPhone",_.contactPhone||""),L("emergencyContactName",_.emergencyContactName||""),L("emergencyContactPhone",_.emergencyContactPhone||""),L("status",_.status),L("preferredLanguage",_.preferredLanguage||"en"))}),[_,L]);const ee=e=>{K.mutate(e)},te=async e=>{try{await bs(e),rn.success(s("manager:dashboard.messages.safetyPdfSent"))}catch(t){rn.error(s("manager:dashboard.messages.safetyPdfFailed",{error:t.message}))}},re=async e=>{try{await ys(e),rn.success(s("manager:dashboard.messages.onboardingEmailSent"))}catch(t){rn.error(s("manager:dashboard.messages.onboardingEmailFailed",{error:t.message}))}},ie=async(e,t)=>{const n=prompt("Resend completion email to ".concat(t,"?\n\nOptional comments for the email:"),"Email resent by manager");if(null!==n)try{await xs(e,n),rn.success("Completion email resent successfully to ".concat(t))}catch(r){rn.error("Failed to resend completion email: ".concat(r.message))}},ae=e=>{window.confirm(s("manager:dashboard.messages.deleteConfirm",{name:"".concat(e.firstName," ").concat(e.lastName)}))&&X.mutate({id:e.id,forceDelete:!1})},se=e=>{y((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},oe=e=>{0!==b.length?"delete"===e?window.confirm(s("manager:dashboard.messages.bulkDeleteConfirm",{count:b.length}))&&J.mutate({action:e,userIds:b}):J.mutate({action:e,userIds:b}):rn.error(s("manager:dashboard.bulk.selectFirst"))},le=function(e,t){const n={action:t?"approve":"reject",comments:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""};$.mutate({quizId:e,reviewData:n})},ce=(null===z||void 0===z?void 0:z.filter((e=>{const t=m.toLowerCase(),n=(e.firstName||"").toLowerCase().includes(t)||(e.lastName||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t)||(e.position||"").toLowerCase().includes(t)||(e.vesselAssignment||"").toLowerCase().includes(t),r="all"===g||e.status===g;return n&&r})))||[],de=e=>({not_started:"badge badge-warning",in_progress:"badge badge-info",forms_completed:"badge badge-primary",training_completed:"badge badge-accent",fully_completed:"badge badge-success",suspended:"badge badge-secondary"}[e]||"badge badge-secondary"),ue=e=>({not_started:s("manager:dashboard.status.notStarted"),in_progress:s("manager:dashboard.status.inProgress"),forms_completed:s("manager:dashboard.status.formsCompleted"),training_completed:s("manager:dashboard.status.trainingCompleted"),fully_completed:s("manager:dashboard.status.fullyCompleted"),suspended:s("manager:dashboard.status.suspended")}[e]||e);return F||q?(0,wo.jsx)(vc,{message:s("common:loading.default")}):(0,wo.jsxs)("div",{className:"space-y-8 max-w-none",children:[(0,wo.jsx)("div",{className:"glass-card-elevated p-4 sm:p-8 hover-lift",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h1",{className:"text-2xl sm:text-4xl font-bold text-gradient-navy mb-2",children:s("dashboard.title")}),(0,wo.jsx)("p",{className:"text-slate-600 text-base sm:text-lg",children:s("dashboard.sections.crew.description")})]}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[(0,wo.jsxs)("button",{onClick:()=>{S.invalidateQueries("crew-members"),S.invalidateQueries("dashboard-stats"),S.invalidateQueries("pending-quiz-reviews"),S.invalidateQueries("onboarding-reviews"),S.invalidateQueries("certificates")},className:"glass-input px-4 py-2 text-slate-700 hover:text-slate-900 transition-all duration-300 flex items-center justify-center gap-2 rounded-xl min-touch-target",children:[(0,wo.jsx)(Bc,{className:"h-4 w-4"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:s("common:general.refresh")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Refresh"})]}),"crew"===l&&(0,wo.jsxs)("button",{onClick:()=>p(!0),className:"glass-button text-white px-6 py-2 flex items-center justify-center gap-2 rounded-xl min-touch-target",children:[(0,wo.jsx)(Sc,{className:"h-4 w-4"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:s("manager:dashboard.sections.crew.add")}),(0,wo.jsx)("span",{className:"sm:hidden",children:s("manager:dashboard.sections.crew.add")})]})]})]})}),(0,wo.jsx)("div",{className:"glass-card p-2",children:(0,wo.jsxs)("nav",{className:"flex flex-wrap sm:space-x-2 gap-2",children:[(0,wo.jsxs)("button",{onClick:()=>c("crew"),className:"py-2 sm:py-3 px-3 sm:px-6 rounded-xl font-medium text-xs sm:text-sm transition-all duration-300 flex items-center justify-center gap-2 min-touch-target flex-1 sm:flex-none ".concat("crew"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,wo.jsx)(_c,{className:"h-4 w-4"}),s("common:manager.crew_management")]}),(0,wo.jsxs)("button",{onClick:()=>c("quiz-reviews"),className:"py-2 sm:py-3 px-3 sm:px-6 rounded-xl font-medium text-xs sm:text-sm transition-all duration-300 flex items-center justify-center gap-2 min-touch-target flex-1 sm:flex-none ".concat("quiz-reviews"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,wo.jsx)(sd,{className:"h-4 w-4"}),s("common:manager.quiz_reviews"),(null===B||void 0===B?void 0:B.length)>0&&(0,wo.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:B.length})]}),(0,wo.jsxs)("button",{onClick:()=>c("onboarding-reviews"),className:"py-2 sm:py-3 px-3 sm:px-6 rounded-xl font-medium text-xs sm:text-sm transition-all duration-300 flex items-center justify-center gap-2 min-touch-target flex-1 sm:flex-none ".concat("onboarding-reviews"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,wo.jsx)(hc,{className:"h-4 w-4"}),s("common:manager.onboarding_reviews")]}),(0,wo.jsxs)("button",{onClick:()=>c("compliance"),className:"py-3 px-6 rounded-xl font-medium text-sm transition-all duration-300 flex items-center gap-2 ".concat("compliance"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,wo.jsx)(kc,{className:"h-4 w-4"}),s("common:general.compliance_metrics")]}),(0,wo.jsxs)("button",{onClick:()=>c("certificates"),className:"py-3 px-6 rounded-xl font-medium text-sm transition-all duration-300 flex items-center gap-2 ".concat("certificates"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,wo.jsx)(pu,{className:"h-4 w-4"}),s("common:manager.certificates")]}),(null===r||void 0===r||null===(e=r.permissions)||void 0===e?void 0:e.includes("content_edit"))&&(0,wo.jsxs)("button",{onClick:()=>a("/flows"),className:"py-3 px-6 rounded-xl font-medium text-sm transition-all duration-300 flex items-center gap-2 text-slate-600 hover:text-slate-800 hover:bg-white/30",children:[(0,wo.jsx)(jc,{className:"h-4 w-4"}),s("dashboard.contentManagement")]})]})}),"crew"===l&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"glass-card p-4 sm:p-6",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,wo.jsx)("div",{className:"flex-1 sm:max-w-md",children:(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsx)(pd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,wo.jsx)("input",{type:"text",placeholder:s("manager:dashboard.sections.crew.search"),value:m,onChange:e=>f(e.target.value),className:"glass-input pl-10 pr-4 py-3 w-full"})]})}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)(qc,{className:"h-4 w-4 text-gray-500"}),(0,wo.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"glass-input px-4 py-3 flex-1 sm:flex-none",children:[(0,wo.jsx)("option",{value:"all",children:s("manager:dashboard.filters.allStatus")}),(0,wo.jsx)("option",{value:"not_started",children:s("manager:dashboard.filters.notStarted")}),(0,wo.jsx)("option",{value:"in_progress",children:s("manager:dashboard.filters.inProgress")}),(0,wo.jsx)("option",{value:"forms_completed",children:s("manager:dashboard.filters.formsCompleted")}),(0,wo.jsx)("option",{value:"training_completed",children:s("manager:dashboard.filters.trainingCompleted")}),(0,wo.jsx)("option",{value:"fully_completed",children:s("manager:dashboard.filters.fullyCompleted")}),(0,wo.jsx)("option",{value:"suspended",children:s("manager:dashboard.filters.suspended")})]})]}),b.length>0&&(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[(0,wo.jsxs)("span",{className:"text-sm text-gray-600 text-center sm:text-left",children:[b.length," selected"]}),(0,wo.jsxs)("div",{className:"flex gap-1",children:[(0,wo.jsx)("button",{onClick:()=>oe("activate"),className:"btn btn-sm btn-success",title:"Activate selected",children:(0,wo.jsx)(Ac,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>oe("deactivate"),className:"btn btn-sm btn-secondary",title:"Deactivate selected",children:(0,wo.jsx)(Cc,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>oe("send-magic-links"),className:"btn btn-sm btn-outline",title:"Send magic links",children:(0,wo.jsx)(uc,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>oe("delete"),className:"btn btn-sm btn-danger",title:"Delete selected",children:(0,wo.jsx)(Oc,{className:"h-3 w-3"})})]})]})]})]})}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,wo.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("crew"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-teal-500 to-teal-600 text-white",children:(0,wo.jsx)(_c,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,wo.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,wo.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("manager:dashboard.stats.total_crew")}),(0,wo.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:(null===I||void 0===I?void 0:I.totalCrew)||0})]})]})}),(0,wo.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("quiz-reviews"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 text-white",children:(0,wo.jsx)(id,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,wo.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,wo.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("common:general.pending_reviews")}),(0,wo.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:((null===B||void 0===B?void 0:B.length)||0)+((null===W||void 0===W?void 0:W.length)||0)})]})]})}),(0,wo.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("crew"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,wo.jsx)(hc,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,wo.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,wo.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("dashboard.status.inProgress")}),(0,wo.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:(null===I||void 0===I?void 0:I.activeTraining)||0})]})]})}),(0,wo.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("crew"),children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-yellow-500 to-orange-600 text-white",children:(0,wo.jsx)(id,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,wo.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,wo.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("dashboard.status.notStarted")}),(0,wo.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:(null===I||void 0===I?void 0:I.notStarted)||0})]})]})})]}),(0,wo.jsxs)("div",{className:"glass-card hover-lift",children:[(0,wo.jsxs)("div",{className:"p-6 border-b border-white/20",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("common:manager.crew_management")}),(0,wo.jsx)("p",{className:"text-slate-600 mt-2",children:s("manager:dashboard.sections.crew.description")})]}),(0,wo.jsxs)("div",{className:"p-4",children:[(0,wo.jsx)("div",{className:"block md:hidden",children:(0,wo.jsx)("div",{className:"space-y-4",children:null===ce||void 0===ce?void 0:ce.map((e=>(0,wo.jsxs)("div",{className:"bg-white/70 rounded-lg p-4 border border-gray-200",children:[(0,wo.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,wo.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),(0,wo.jsx)("div",{className:"flex items-center",children:(0,wo.jsx)("input",{type:"checkbox",checked:b.includes(e.id),onChange:()=>se(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.position"),":"]}),(0,wo.jsx)("div",{className:"font-medium",children:e.position})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.vessel"),":"]}),(0,wo.jsxs)("div",{className:"font-medium flex items-center",children:[(0,wo.jsx)(gc,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,wo.jsx)("span",{className:"truncate",children:e.vesselAssignment})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.boardingDate"),":"]}),(0,wo.jsxs)("div",{className:"font-medium flex items-center",children:[(0,wo.jsx)(Uc,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,wo.jsx)("span",{children:fu(e.expectedBoardingDate)})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.status"),":"]}),(0,wo.jsx)("div",{children:(0,wo.jsx)("span",{className:de(e.status),children:ue(e.status)})})]})]}),(0,wo.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("button",{onClick:()=>N(e),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors touch-target",title:"View crew member details",children:(0,wo.jsx)(Pc,{className:"h-4 w-4"})}),(0,wo.jsx)("button",{onClick:()=>ee(e.id),disabled:K.isLoading,className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors touch-target",title:"Send magic link",children:(0,wo.jsx)(uc,{className:"h-4 w-4"})}),(0,wo.jsx)("button",{onClick:()=>k(e),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors touch-target",title:"Edit crew member",children:(0,wo.jsx)(jc,{className:"h-4 w-4"})})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("button",{onClick:()=>te(e.id),className:"p-2 text-orange-600 hover:text-orange-900 hover:bg-orange-50 rounded-lg transition-colors touch-target",title:"Send Safety Management PDF",children:"\ud83d\udee1\ufe0f"}),(0,wo.jsx)("button",{onClick:()=>re(e.id),className:"p-2 text-emerald-600 hover:text-emerald-900 hover:bg-emerald-50 rounded-lg transition-colors touch-target",title:"Send Onboarding Start Email",children:"\ud83d\udea2"}),"fully_completed"===e.status&&(0,wo.jsx)("button",{onClick:()=>ie(e.id,"".concat(e.firstName," ").concat(e.lastName)),className:"p-2 text-purple-600 hover:text-purple-900 hover:bg-purple-50 rounded-lg transition-colors touch-target",title:"Resend Completion Email",children:"\ud83d\udce7"}),(0,wo.jsx)("button",{onClick:()=>ae(e),disabled:X.isLoading,className:"p-2 text-red-600 hover:text-red-900 hover:bg-red-50 rounded-lg transition-colors touch-target",title:"Delete crew member",children:(0,wo.jsx)(Oc,{className:"h-4 w-4"})})]})]})]},e.id)))})}),(0,wo.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,wo.jsxs)("table",{className:"w-full min-w-full",children:[(0,wo.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-t-xl",children:(0,wo.jsxs)("tr",{children:[(0,wo.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tl-xl",children:(0,wo.jsx)("input",{type:"checkbox",checked:b.length===ce.length&&ce.length>0,onChange:()=>{b.length===ce.length?y([]):y(ce.map((e=>e.id)))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,wo.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.name")}),(0,wo.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.position")}),(0,wo.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.vessel")}),(0,wo.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.boardingDate")}),(0,wo.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.status")}),(0,wo.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tr-xl",children:s("manager:dashboard.table.headers.actions")})]})}),(0,wo.jsx)("tbody",{className:"bg-white/50 divide-y divide-slate-200",children:null===ce||void 0===ce?void 0:ce.map((e=>(0,wo.jsxs)("tr",{className:"hover:bg-white/80 transition-colors duration-200",children:[(0,wo.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,wo.jsx)("input",{type:"checkbox",checked:b.includes(e.id),onChange:()=>se(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,wo.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,wo.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-32",children:e.email})]})}),(0,wo.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:e.position}),(0,wo.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(gc,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,wo.jsx)("span",{className:"truncate",children:e.vesselAssignment})]})}),(0,wo.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(Uc,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,wo.jsx)("span",{className:"text-xs",children:fu(e.expectedBoardingDate)})]})}),(0,wo.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,wo.jsx)("span",{className:de(e.status),children:ue(e.status)})}),(0,wo.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,wo.jsx)("button",{onClick:()=>N(e),className:"p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded transition-colors",title:s("manager:dashboard.tooltips.viewCrewMember"),children:(0,wo.jsx)(Pc,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>ee(e.id),disabled:K.isLoading,className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-50 rounded transition-colors",title:s("manager:dashboard.tooltips.sendMagicLink"),children:(0,wo.jsx)(uc,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>te(e.id),className:"p-1 text-orange-600 hover:text-orange-900 hover:bg-orange-50 rounded transition-colors",title:s("manager:dashboard.tooltips.sendSafetyPDF"),children:"\ud83d\udee1\ufe0f"}),(0,wo.jsx)("button",{onClick:()=>re(e.id),className:"p-1 text-emerald-600 hover:text-emerald-900 hover:bg-emerald-50 rounded transition-colors",title:s("manager:dashboard.tooltips.sendOnboardingStart"),children:"\ud83d\udea2"}),"fully_completed"===e.status&&(0,wo.jsx)("button",{onClick:()=>ie(e.id,"".concat(e.firstName," ").concat(e.lastName)),className:"p-1 text-purple-600 hover:text-purple-900 hover:bg-purple-50 rounded transition-colors",title:s("manager:dashboard.tooltips.resendCompletionEmail"),children:"\ud83d\udce7"}),(0,wo.jsx)("button",{onClick:()=>k(e),className:"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded transition-colors",title:s("manager:dashboard.tooltips.editCrewMember"),children:(0,wo.jsx)(jc,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>ae(e),disabled:X.isLoading,className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded transition-colors",title:s("manager:dashboard.tooltips.deleteCrewMember"),children:(0,wo.jsx)(Oc,{className:"h-3 w-3"})})]})})]},e.id)))})]})})]})]})]}),"quiz-reviews"===l&&(0,wo.jsx)("div",{className:"space-y-6",children:U?(0,wo.jsx)(vc,{message:s("common:loading.quiz")}):(0,wo.jsxs)("div",{className:"glass-card hover-lift",children:[(0,wo.jsxs)("div",{className:"p-8 border-b border-white/20",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("dashboard.sections.quizReviews.title")}),(0,wo.jsx)("p",{className:"text-slate-600 mt-2",children:s("dashboard.sections.quizReviews.description")})]}),(0,wo.jsx)("div",{className:"p-6",children:0===(null===B||void 0===B?void 0:B.length)?(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)(sd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("dashboard.sections.quizReviews.empty")}),(0,wo.jsx)("p",{className:"text-gray-600",children:s("dashboard.sections.quizReviews.emptyDescription")})]}):(0,wo.jsx)("div",{className:"overflow-x-auto",children:(0,wo.jsxs)("table",{className:"w-full",children:[(0,wo.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-t-xl",children:(0,wo.jsxs)("tr",{children:[(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tl-xl",children:"Crew Member"}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Phase"}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Score"}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Submitted"}),(0,wo.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tr-xl",children:"Actions"})]})}),(0,wo.jsx)("tbody",{className:"bg-white/50 divide-y divide-slate-200",children:null===B||void 0===B?void 0:B.map((e=>(0,wo.jsxs)("tr",{className:"hover:bg-white/80 transition-colors duration-200",children:[(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,wo.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wo.jsxs)("span",{className:"badge badge-info",children:[s("training.phase")," ",e.phase]})}),(0,wo.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,wo.jsxs)("div",{className:"text-sm text-gray-900",children:[e.score,"/",e.total_questions," (",Math.round(e.score/e.total_questions*100),"%)"]}),(0,wo.jsx)("div",{className:"text-sm ".concat(e.passed?"text-green-600":"text-red-600"),children:e.passed?"Passed":"Failed"})]}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.completed_at).toLocaleString()}),(0,wo.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("button",{onClick:()=>le(e.id,!0),disabled:$.isLoading,className:"btn btn-sm btn-success",title:"Approve quiz",children:(0,wo.jsx)(sd,{className:"h-3 w-3"})}),(0,wo.jsx)("button",{onClick:()=>le(e.id,!1,"Quiz requires review"),disabled:$.isLoading,className:"btn btn-sm btn-danger",title:"Reject quiz",children:(0,wo.jsx)(Mc,{className:"h-3 w-3"})})]})})]},e.id)))})]})})})]})}),"onboarding-reviews"===l&&(0,wo.jsx)("div",{className:"space-y-6",children:H?(0,wo.jsx)(vc,{message:s("common:loading.content")}):(0,wo.jsxs)("div",{className:"glass-card hover-lift",children:[(0,wo.jsxs)("div",{className:"p-8 border-b border-white/20",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("dashboard.sections.onboardingReviews.title")}),(0,wo.jsx)("p",{className:"text-slate-600 mt-2",children:s("dashboard.sections.onboardingReviews.description")})]}),(0,wo.jsx)("div",{className:"p-6",children:0===(null===W||void 0===W?void 0:W.length)?(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)(hc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("dashboard.sections.quizReviews.empty")}),(0,wo.jsx)("p",{className:"text-gray-600",children:s("dashboard.sections.onboardingReviews.emptyDescription")})]}):(0,wo.jsx)("div",{className:"space-y-6",children:(Array.isArray(W)?W:[]).map((e=>(0,wo.jsxs)("div",{className:"glass-card p-8 hover-lift",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.user.firstName," ",e.user.lastName]}),(0,wo.jsxs)("p",{className:"text-gray-600",children:[e.user.email," \u2022 ",e.user.position]}),(0,wo.jsxs)("p",{className:"text-sm text-gray-500",children:[s("profile.vessel"),": ",e.user.vesselAssignment]})]}),(0,wo.jsx)("span",{className:"badge ".concat(de(e.user.status)),children:e.user.status})]}),(0,wo.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:(Array.isArray(e.phases)?e.phases:[]).map((e=>{var t,n;return(0,wo.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,wo.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:[s("training.phase")," ",e.phase]}),(0,wo.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{children:"Training Items:"}),(0,wo.jsxs)("span",{className:e.completedItems===e.totalItems?"text-green-600":"text-yellow-600",children:[e.completedItems,"/",e.totalItems]})]}),(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{children:"Quiz:"}),(0,wo.jsx)("span",{className:"approved"===(null===(t=e.quiz)||void 0===t?void 0:t.reviewStatus)?"text-green-600":"rejected"===(null===(n=e.quiz)||void 0===n?void 0:n.reviewStatus)?"text-red-600":"text-yellow-600",children:e.quiz?e.quiz.reviewStatus:"Not taken"})]}),(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsxs)("span",{children:[s("common.status"),":"]}),(0,wo.jsx)("span",{className:"completed"===e.status?"text-green-600":"text-yellow-600",children:e.status})]})]})]},e.phase)}))}),(0,wo.jsx)("div",{className:"flex justify-end",children:(0,wo.jsxs)("button",{onClick:()=>{return t=e.user.id,void(window.confirm(s("manager:dashboard.messages.approveOnboardingConfirm"))&&Z.mutate(t));var t},disabled:Z.isLoading,className:"btn btn-success",children:[(0,wo.jsx)(sd,{className:"h-4 w-4 mr-2"}),"Approve Complete Onboarding"]})})]},e.user.id)))})})]})}),"compliance"===l&&(0,wo.jsx)("div",{className:"space-y-6",children:(0,wo.jsxs)("div",{className:"glass-card p-6",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy mb-6",children:s("general.compliance_metrics")}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,wo.jsx)("div",{className:"glass-card p-4",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("p",{className:"text-sm text-slate-600",children:s("general.overall_completion_rate")}),(0,wo.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[(null===I||void 0===I||null===(t=I.completionRates)||void 0===t?void 0:t.overall)||0,"%"]})]}),(0,wo.jsx)(sd,{className:"h-8 w-8 text-green-500"})]})}),(0,wo.jsx)("div",{className:"glass-card p-4",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("p",{className:"text-sm text-slate-600",children:s("general.pending_reviews")}),(0,wo.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:((null===B||void 0===B?void 0:B.length)||0)+((null===W||void 0===W?void 0:W.length)||0)})]}),(0,wo.jsx)(id,{className:"h-8 w-8 text-orange-500"})]})}),(0,wo.jsx)("div",{className:"glass-card p-4",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("p",{className:"text-sm text-slate-600",children:s("dashboard.certificates.issued")}),(0,wo.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===V||void 0===V?void 0:V.length)||0})]}),(0,wo.jsx)(pu,{className:"h-8 w-8 text-blue-500"})]})})]}),(0,wo.jsxs)("div",{className:"mb-8",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:s("dashboard.sections.compliance.trainingProgress")}),(0,wo.jsx)("div",{className:"space-y-3",children:["Deksman","Lichtmatroos","Matroos","Volmatroos","Stuurman","Kapitein"].map((e=>{const t=ce.filter((t=>t.position===e)),n=t.filter((e=>"fully_completed"===e.status)),r=t.length>0?Math.round(n.length/t.length*100):0;return(0,wo.jsxs)("div",{className:"flex items-center justify-between p-3 glass-card",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("span",{className:"font-medium text-slate-700",children:e}),(0,wo.jsxs)("span",{className:"text-sm text-slate-500",children:["(",n.length,"/",t.length,")"]})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,wo.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(r,"%")}})}),(0,wo.jsxs)("span",{className:"text-sm font-medium text-slate-700 w-12 text-right",children:[r,"%"]})]})]},e)}))})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:s("general.recent_activity")}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsx)("div",{className:"glass-card p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(sd,{className:"h-5 w-5 text-green-500"}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[(null===I||void 0===I||null===(n=I.recentActivity)||void 0===n?void 0:n.completedSessions)||0," training sessions completed this week"]}),(0,wo.jsx)("p",{className:"text-xs text-slate-500",children:s("dashboard.sections.compliance.lastUpdated",{date:(new Date).toLocaleDateString()})})]})]})}),(0,wo.jsx)("div",{className:"glass-card p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(id,{className:"h-5 w-5 text-orange-500"}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[(null===B||void 0===B?void 0:B.length)||0," quiz reviews pending your approval"]}),(0,wo.jsx)("p",{className:"text-xs text-slate-500",children:s("dashboard.sections.compliance.requiresAttention")})]})]})}),(0,wo.jsx)("div",{className:"glass-card p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(pu,{className:"h-5 w-5 text-blue-500"}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[(null===V||void 0===V?void 0:V.length)||0," certificates issued this month"]}),(0,wo.jsx)("p",{className:"text-xs text-slate-500",children:s("dashboard.sections.compliance.certificatesDistributed")})]})]})})]})]})]})}),"certificates"===l&&(0,wo.jsx)("div",{className:"space-y-6",children:G?(0,wo.jsx)(vc,{message:s("common:loading.content")}):(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsx)(hu,{onViewCertificate:e=>u(e),onRegenerateCertificate:e=>u(e),onDeleteCertificate:e=>{window.confirm("Are you sure you want to delete this certificate? This action cannot be undone.")&&Cs(e.id).then((()=>{S.invalidateQueries("certificates"),rn.success("Certificate deleted successfully")})).catch((e=>{rn.error("Failed to delete certificate: ".concat(e.message))}))}})})}),h&&(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wo.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto modal-mobile",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center p-4 md:p-6 border-b",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold",children:s("forms:addCrewMember.title")}),(0,wo.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 p-2 touch-target",children:(0,wo.jsx)(Mc,{className:"h-6 w-6"})})]}),(0,wo.jsxs)("form",{onSubmit:A((e=>{const t=We(We({},e),{},{preferredLanguage:e.preferredLanguage||"en"});Q.mutate(t)})),className:"p-4 md:p-6 space-y-4",children:[(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.firstName")}),(0,wo.jsx)("input",We({type:"text",className:"form-input ".concat(T.firstName?"error":"")},C("firstName",{required:"First name is required"}))),T.firstName&&(0,wo.jsx)("p",{className:"form-error",children:T.firstName.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.lastName")}),(0,wo.jsx)("input",We({type:"text",className:"form-input ".concat(T.lastName?"error":"")},C("lastName",{required:"Last name is required"}))),T.lastName&&(0,wo.jsx)("p",{className:"form-error",children:T.lastName.message})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.email")}),(0,wo.jsx)("input",We({type:"email",className:"form-input ".concat(T.email?"error":"")},C("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}))),T.email&&(0,wo.jsx)("p",{className:"form-error",children:T.email.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.position")}),(0,wo.jsxs)("select",We(We({className:"form-input form-select ".concat(T.position?"error":"")},C("position",{required:"Position is required"})),{},{children:[(0,wo.jsx)("option",{value:"",children:s("forms:selectPosition")}),(0,wo.jsx)("option",{value:"Deksman",children:"Deksman"}),(0,wo.jsx)("option",{value:"Lichtmatroos",children:"Lichtmatroos"}),(0,wo.jsx)("option",{value:"Matroos",children:"Matroos"}),(0,wo.jsx)("option",{value:"Volmatroos",children:"Volmatroos"}),(0,wo.jsx)("option",{value:"Stuurman",children:"Stuurman"}),(0,wo.jsx)("option",{value:"Kapitein",children:"Kapitein"})]})),T.position&&(0,wo.jsx)("p",{className:"form-error",children:T.position.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsxs)("label",{className:"form-label",children:[(0,wo.jsx)(bc,{className:"h-4 w-4 inline mr-1"}),s("forms:addCrewMember.fields.preferredLanguage")]}),(0,wo.jsx)("select",We(We({className:"form-input form-select ".concat(T.preferredLanguage?"error":"")},C("preferredLanguage",{required:s("forms:required")})),{},{defaultValue:"en",children:E.map((e=>(0,wo.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),T.preferredLanguage&&(0,wo.jsx)("p",{className:"form-error",children:T.preferredLanguage.message}),(0,wo.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s("profile.language_description")})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.vesselAssignment")}),(0,wo.jsx)("input",We({type:"text",className:"form-input ".concat(T.vesselAssignment?"error":""),placeholder:"e.g., MS Burando Atlantic"},C("vesselAssignment",{required:"Vessel assignment is required"}))),T.vesselAssignment&&(0,wo.jsx)("p",{className:"form-error",children:T.vesselAssignment.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.expectedBoardingDate")}),(0,wo.jsx)("input",We({type:"date",className:"form-input ".concat(T.expectedBoardingDate?"error":"")},C("expectedBoardingDate",{required:"Boarding date is required"}))),T.expectedBoardingDate&&(0,wo.jsx)("p",{className:"form-error",children:T.expectedBoardingDate.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.contactPhone")}),(0,wo.jsx)("input",We({type:"tel",className:"form-input"},C("contactPhone")))]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.emergencyContactName")}),(0,wo.jsx)("input",We({type:"text",className:"form-input"},C("emergencyContactName")))]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.emergencyContactPhone")}),(0,wo.jsx)("input",We({type:"tel",className:"form-input"},C("emergencyContactPhone")))]}),(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row justify-end space-y-3 md:space-y-0 md:space-x-3 pt-4",children:[(0,wo.jsx)("button",{type:"button",onClick:()=>p(!1),className:"btn btn-secondary touch-target",children:s("forms:addCrewMember.actions.cancel")}),(0,wo.jsx)("button",{type:"submit",disabled:Q.isLoading,className:"btn btn-primary touch-target",children:Q.isLoading?(0,wo.jsx)(vc,{size:"small",message:""}):s("forms:addCrewMember.actions.create")})]})]})]})}),_&&(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wo.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto modal-mobile",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center p-4 md:p-6 border-b",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold",children:s("forms:editCrewMember.title")}),(0,wo.jsx)("button",{onClick:()=>{k(null),R()},className:"text-gray-400 hover:text-gray-600 p-2 touch-target",children:(0,wo.jsx)(Mc,{className:"h-6 w-6"})})]}),(0,wo.jsxs)("form",{onSubmit:M((e=>{Y.mutate({id:_.id,data:e})})),className:"p-4 md:p-6 space-y-4",children:[(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:editCrewMember.fields.firstName")}),(0,wo.jsx)("input",We({type:"text",className:"form-input ".concat(D.firstName?"error":"")},P("firstName",{required:"First name is required"}))),D.firstName&&(0,wo.jsx)("p",{className:"form-error",children:D.firstName.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("forms:editCrewMember.fields.lastName")}),(0,wo.jsx)("input",We({type:"text",className:"form-input ".concat(D.lastName?"error":"")},P("lastName",{required:"Last name is required"}))),D.lastName&&(0,wo.jsx)("p",{className:"form-error",children:D.lastName.message})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("profile.email")}),(0,wo.jsx)("input",We({type:"email",className:"form-input ".concat(D.email?"error":"")},P("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}))),D.email&&(0,wo.jsx)("p",{className:"form-error",children:D.email.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("profile.position")}),(0,wo.jsxs)("select",We(We({className:"form-input form-select ".concat(D.position?"error":"")},P("position",{required:"Position is required"})),{},{children:[(0,wo.jsx)("option",{value:"",children:s("forms.selectPosition")}),(0,wo.jsx)("option",{value:"Deksman",children:"Deksman"}),(0,wo.jsx)("option",{value:"Lichtmatroos",children:"Lichtmatroos"}),(0,wo.jsx)("option",{value:"Matroos",children:"Matroos"}),(0,wo.jsx)("option",{value:"Volmatroos",children:"Volmatroos"}),(0,wo.jsx)("option",{value:"Stuurman",children:"Stuurman"}),(0,wo.jsx)("option",{value:"Kapitein",children:"Kapitein"})]})),D.position&&(0,wo.jsx)("p",{className:"form-error",children:D.position.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsxs)("label",{className:"form-label",children:[(0,wo.jsx)(bc,{className:"h-4 w-4 inline mr-1"}),s("profile.language_preference")]}),(0,wo.jsx)("select",We(We({className:"form-input form-select ".concat(D.preferredLanguage?"error":"")},P("preferredLanguage")),{},{children:E.map((e=>(0,wo.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),D.preferredLanguage&&(0,wo.jsx)("p",{className:"form-error",children:D.preferredLanguage.message}),(0,wo.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s("profile.language_description")})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("profile.vessel_assignment")}),(0,wo.jsx)("input",We({type:"text",className:"form-input ".concat(D.vesselAssignment?"error":""),placeholder:"e.g., MS Burando Atlantic"},P("vesselAssignment",{required:"Vessel assignment is required"}))),D.vesselAssignment&&(0,wo.jsx)("p",{className:"form-error",children:D.vesselAssignment.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:s("profile.boarding_date")}),(0,wo.jsx)("input",We({type:"date",className:"form-input ".concat(D.expectedBoardingDate?"error":"")},P("expectedBoardingDate",{required:"Boarding date is required"}))),D.expectedBoardingDate&&(0,wo.jsx)("p",{className:"form-error",children:D.expectedBoardingDate.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{className:"form-label",children:"Status"}),(0,wo.jsxs)("select",We(We({className:"form-input form-select ".concat(D.status?"error":"")},P("status",{required:"Status is required"})),{},{children:[(0,wo.jsx)("option",{value:"pending",children:"Pending"}),(0,wo.jsx)("option",{value:"active",children:"Active"}),(0,wo.jsx)("option",{value:"completed",children:"Completed"}),(0,wo.jsx)("option",{value:"inactive",children:"Inactive"})]})),D.status&&(0,wo.jsx)("p",{className:"form-error",children:D.status.message})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsxs)("label",{className:"form-label",children:[s("profile.contact_phone")," (",s("forms.optional"),")"]}),(0,wo.jsx)("input",We({type:"tel",className:"form-input"},P("contactPhone")))]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsxs)("label",{className:"form-label",children:[s("profile.contact_name")," (",s("forms.optional"),")"]}),(0,wo.jsx)("input",We({type:"text",className:"form-input"},P("emergencyContactName")))]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsxs)("label",{className:"form-label",children:[s("profile.contact_phone")," (",s("forms.optional"),")"]}),(0,wo.jsx)("input",We({type:"tel",className:"form-input"},P("emergencyContactPhone")))]}),(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row justify-end space-y-3 md:space-y-0 md:space-x-3 pt-4",children:[(0,wo.jsx)("button",{type:"button",onClick:()=>{k(null),R()},className:"btn btn-secondary touch-target",children:"Cancel"}),(0,wo.jsx)("button",{type:"submit",disabled:Y.isLoading,className:"btn btn-primary touch-target",children:Y.isLoading?(0,wo.jsx)(vc,{size:"small",message:""}):"Update Crew Member"})]})]})]})}),j&&(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wo.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,wo.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold",children:s("general.details")}),(0,wo.jsx)("button",{onClick:()=>N(null),className:"text-gray-400 hover:text-gray-600",children:(0,wo.jsx)(Mc,{className:"h-6 w-6"})})]}),(0,wo.jsxs)("div",{className:"p-6 space-y-6",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Personal Information"}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.firstName})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.lastName})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.email})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Phone"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.contactPhone||"Not provided"})]})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Work Information"}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Position"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.position})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Vessel Assignment"}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,wo.jsx)(gc,{className:"h-4 w-4 text-gray-400 mr-2"}),j.vesselAssignment]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Expected Boarding Date"}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,wo.jsx)(Uc,{className:"h-4 w-4 text-gray-400 mr-2"}),fu(j.expectedBoardingDate)]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,wo.jsx)("span",{className:"mt-1 inline-flex ".concat(de(j.status)),children:ue(j.status)})]})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Emergency Contact"}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Name"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.emergencyContactName||"Not provided"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Phone"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.emergencyContactPhone||"Not provided"})]})]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Created At"}),(0,wo.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.createdAt?new Date(j.createdAt).toLocaleString():"Unknown"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Member ID"}),(0,wo.jsxs)("p",{className:"mt-1 text-sm text-gray-900",children:["#",j.id]})]})]})]}),(0,wo.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,wo.jsxs)("button",{onClick:()=>{N(null),k(j)},className:"btn btn-secondary",children:[(0,wo.jsx)(jc,{className:"h-4 w-4 mr-2"}),"Edit Member"]}),(0,wo.jsxs)("button",{onClick:()=>{ee(j.id),N(null)},disabled:K.isLoading,className:"btn btn-outline",children:[(0,wo.jsx)(uc,{className:"h-4 w-4 mr-2"}),"Send Magic Link"]}),(0,wo.jsx)("button",{onClick:()=>N(null),className:"btn btn-primary",children:"Close"})]})]})]})}),d&&(0,wo.jsx)(mu,{certificate:d,onClose:()=>u(null),onRegenerateSuccess:e=>{u(null),rn.success("Certificate regenerated successfully. Certificate #".concat(e.certificateNumber))}})]})},vu=dc("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),bu=dc("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),yu=dc("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),xu=()=>{var e;const{user:t}=ko(),{t:n}=Ma("dashboard"),r=ne(),{data:i,isLoading:a}=(0,Ie.useQuery)("training-progress",Os),{data:s,isLoading:o}=(0,Ie.useQuery)("training-stats",qs),{data:l,isLoading:c}=(0,Ie.useQuery)("crew-profile",Ts),{data:d}=(0,Ie.useQuery)("quiz-history",(()=>zs()),{enabled:!!t,staleTime:3e5});if(a||o||c)return(0,wo.jsx)(vc,{message:"Loading your dashboard..."});const u=e=>{switch(e){case"completed":return(0,wo.jsx)(sd,{className:"h-5 w-5 text-green-600"});case"in_progress":return(0,wo.jsx)(id,{className:"h-5 w-5 text-blue-600"});default:return(0,wo.jsx)(vu,{className:"h-5 w-5 text-gray-400"})}},h=e=>{switch(e){case"completed":return"badge badge-success";case"in_progress":return"badge badge-info";default:return"badge badge-secondary"}},p=e=>{if(!d)return null;const t=d.filter((t=>t.phase===e));if(0===t.length)return null;const n=t.sort(((e,t)=>new Date(t.completedAt)-new Date(e.completedAt)));return n[0]},m=(e,t)=>{if("completed"!==t)return null;const n=p(e.phase_number);return n?"pending_review"===n.review_status?(0,wo.jsxs)("span",{className:"burando-badge burando-badge-info",children:[(0,wo.jsx)(Pc,{className:"h-3 w-3 mr-1"}),"Awaiting Review (",n.score,"%)"]}):"approved"===n.review_status&&n.passed?(0,wo.jsxs)("span",{className:"burando-badge burando-badge-success",children:[(0,wo.jsx)(sd,{className:"h-3 w-3 mr-1"}),"Quiz Approved (",n.score,"%)"]}):"rejected"!==n.review_status&&n.passed&&n.passed?(0,wo.jsxs)("span",{className:"burando-badge burando-badge-success",children:[(0,wo.jsx)(sd,{className:"h-3 w-3 mr-1"}),"Quiz Passed (",n.score,"%)"]}):(0,wo.jsxs)("span",{className:"burando-badge burando-badge-error",children:[(0,wo.jsx)(Xc,{className:"h-3 w-3 mr-1"}),"Quiz Failed (",n.score,"%) - Retake Required"]}):(0,wo.jsxs)("span",{className:"burando-badge burando-badge-warning",children:[(0,wo.jsx)(Xc,{className:"h-3 w-3 mr-1"}),"Quiz Required"]})};return(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"bg-gradient-to-r from-burando-navy to-burando-teal rounded-lg text-white p-4 sm:p-6 shadow-burando-lg",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2",children:n("crew.welcome",{name:null===t||void 0===t?void 0:t.firstName})}),(0,wo.jsx)("p",{className:"text-burando-light-green mb-4",children:n("crew.subtitle")}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-sm",children:[(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(gc,{className:"h-4 w-4 mr-2"}),n("crew.vessel"),": ",null===l||void 0===l?void 0:l.vesselAssignment]}),(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(Uc,{className:"h-4 w-4 mr-2"}),n("crew.position"),": ",null===l||void 0===l?void 0:l.position]})]})]}),(0,wo.jsxs)("div",{className:"text-center sm:text-right",children:[(0,wo.jsxs)("div",{className:"text-3xl font-bold",children:[(null===s||void 0===s?void 0:s.overallProgress)||0,"%"]}),(0,wo.jsx)("div",{className:"text-burando-light-green",children:n("crew.overall_progress")})]})]}),(0,wo.jsx)("div",{className:"mt-4",children:(0,wo.jsx)("div",{className:"burando-progress",children:(0,wo.jsx)("div",{className:"burando-progress-bar",style:{width:"".concat((null===s||void 0===s?void 0:s.overallProgress)||0,"%")}})})})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,wo.jsx)("div",{className:"burando-card cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:()=>{const e=(null===i||void 0===i?void 0:i.phases)||[],t=e.find((e=>"in_progress"===e.status))||e.find((e=>"not_started"===e.status));t&&r("/crew/training/".concat(t.phase_number))},children:(0,wo.jsx)("div",{className:"burando-card-body",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(bu,{className:"h-8 w-8 text-burando-teal"}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Training"}),(0,wo.jsx)("p",{className:"text-2xl font-bold text-burando-navy",children:(()=>{if(null!==s&&void 0!==s&&s.isCompleted||3===(null===s||void 0===s?void 0:s.completedPhases))return"Completed";const e=(null===i||void 0===i?void 0:i.phases)||[],t=e.find((e=>"in_progress"===e.status))||e.find((e=>"not_started"===e.status));return"Phase ".concat((null===t||void 0===t?void 0:t.phase_number)||1)})()})]})]})})}),(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsx)("div",{className:"burando-card-body",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(sd,{className:"h-8 w-8 text-burando-light-green"}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Items Completed"}),(0,wo.jsxs)("p",{className:"text-2xl font-bold text-burando-navy",children:[(null===s||void 0===s?void 0:s.completedItems)||0,"/",(null===s||void 0===s?void 0:s.totalItems)||0]})]})]})})}),(0,wo.jsx)("div",{className:"burando-card cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:()=>{const e=((null===i||void 0===i?void 0:i.phases)||[]).find((e=>"completed"===e.status&&!p(e.phase_number)));r(e?"/crew/quiz/".concat(e.phase_number):"/crew/profile")},children:(0,wo.jsx)("div",{className:"burando-card-body",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(yu,{className:"h-8 w-8 text-burando-bright-teal"}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Quiz Results"}),(0,wo.jsxs)("p",{className:"text-2xl font-bold text-burando-navy",children:[(null===s||void 0===s||null===(e=s.quizStats)||void 0===e?void 0:e.completed)||0,"/3"]})]})]})})}),(0,wo.jsx)("div",{className:"burando-card cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:()=>r("/crew/profile"),children:(0,wo.jsx)("div",{className:"burando-card-body",children:(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)(id,{className:"h-8 w-8 text-burando-teal-light"}),(0,wo.jsxs)("div",{className:"ml-4",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"My Profile"}),(0,wo.jsx)("p",{className:"text-lg font-bold text-burando-navy capitalize",children:(null===l||void 0===l?void 0:l.status)||"Active"})]})]})})})]}),(0,wo.jsxs)("div",{className:"burando-card",children:[(0,wo.jsxs)("div",{className:"burando-card-header",children:[(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy",children:n("crew.training_phases.title")}),(0,wo.jsx)("p",{className:"burando-text-muted",children:n("crew.training_phases.subtitle")})]}),(0,wo.jsx)("div",{className:"burando-card-body",children:(0,wo.jsx)("div",{className:"space-y-4",children:((null===i||void 0===i?void 0:i.phases)||[]).map((e=>{const t=(e=>{const t=new Date(e)-new Date;return Math.ceil(t/864e5)})(new Date(Date.now()+2592e6)),r=t<0,a=((e,t)=>{if(1===e)return!0;const n=((null===t||void 0===t?void 0:t.phases)||[]).find((t=>t.phase_number===e-1));return"completed"===(null===n||void 0===n?void 0:n.status)})(e.phase_number,i);return(0,wo.jsx)("div",{className:"border rounded-lg p-4 transition-colors ".concat(a?"border-gray-200 hover:border-blue-300":"border-gray-100 bg-gray-50"),children:(0,wo.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,wo.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,wo.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[u(e.status),(0,wo.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,wo.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.title||"Phase ".concat(e.phase_number)}),(0,wo.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.description||"Training phase description"})]})]}),(0,wo.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3 lg:mb-0",children:[(0,wo.jsx)("span",{className:h(e.status),children:n("common:status.".concat(e.status.replace("_","_")))}),(0,wo.jsx)("span",{className:"text-sm text-gray-500",children:"Items: 0/0 completed"}),m(e,e.status),r&&"completed"!==e.status&&(0,wo.jsxs)("span",{className:"flex items-center text-sm text-red-600",children:[(0,wo.jsx)(Xc,{className:"h-4 w-4 mr-1"}),n("crew.completion.overdue_by_days",{days:Math.abs(t)})]}),!r&&"completed"!==e.status&&(0,wo.jsx)("span",{className:"text-sm text-gray-500",children:n("crew.completion.due_in_days",{days:t})})]})]}),(0,wo.jsxs)("div",{className:"flex items-center justify-between lg:justify-end gap-3 lg:gap-3",children:[(0,wo.jsxs)("div",{className:"text-center flex-shrink-0",children:[(0,wo.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Steps"}),(0,wo.jsxs)("div",{className:"relative w-12 h-12 sm:w-16 sm:h-16",children:[(0,wo.jsxs)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 transform -rotate-90",viewBox:"0 0 36 36",children:[(0,wo.jsx)("path",{className:"text-gray-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,wo.jsx)("path",{className:"completed"===e.status?"text-burando-light-green":"text-burando-teal",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"".concat(e.progressPercentage||0,", 100"),d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),(0,wo.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,wo.jsxs)("span",{className:"text-xs sm:text-sm font-semibold",children:[e.progressPercentage||0,"%"]})})]})]}),"completed"===e.status&&(0,wo.jsxs)("div",{className:"text-center flex-shrink-0",children:[(0,wo.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Quiz"}),(0,wo.jsx)("div",{className:"relative w-12 h-12 sm:w-16 sm:h-16",children:(()=>{const t=p(e.phase_number);if(!t)return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16",viewBox:"0 0 36 36",children:(0,wo.jsx)("circle",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"currentColor",fillOpacity:"0.1",cx:"18",cy:"18",r:"15.9155"})}),(0,wo.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,wo.jsx)("span",{className:"text-lg sm:text-xl font-bold text-gray-400",children:"?"})})]});let n,r;return"pending_review"===t.review_status?(n="text-blue-500",r="\u23f3"):"approved"===t.review_status&&t.passed?(n="text-burando-light-green",r="\u2713"):"rejected"!==t.review_status&&t.passed?(n=t.passed?"text-burando-light-green":"text-orange-600",r=t.passed?"\u2713":"\u2717"):(n="text-orange-600",r="\u2717"),(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16",viewBox:"0 0 36 36",children:(0,wo.jsx)("circle",{className:n,stroke:"currentColor",strokeWidth:"3",fill:"currentColor",fillOpacity:"0.1",cx:"18",cy:"18",r:"15.9155"})}),(0,wo.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,wo.jsx)("span",{className:"text-lg sm:text-xl font-bold ".concat(n),children:r})})]})})()})]}),a&&(()=>{const t=p(e.phase_number);return"completed"===e.status?t?(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(e.phase_number),className:"burando-btn text-sm px-3 py-2 touch-target ".concat(t.passed?"burando-btn-success":"burando-btn-outline"),children:[(0,wo.jsx)("span",{className:"hidden sm:inline",children:"View Results"}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Results"})]}):(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(e.phase_number),className:"burando-btn burando-btn-primary text-sm px-3 py-2 touch-target",children:[(0,wo.jsx)("span",{className:"hidden sm:inline",children:"Take Quiz"}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Quiz"})]}):"in_progress"===e.status?(0,wo.jsxs)(Me,{to:"/crew/training/".concat(e.phase_number),className:"burando-btn burando-btn-primary text-sm px-3 py-2 touch-target",children:[(0,wo.jsx)("span",{className:"hidden sm:inline",children:n("common:buttons.continue")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Continue"})]}):(0,wo.jsxs)(Me,{to:"/crew/training/".concat(e.phase_number),className:"burando-btn burando-btn-outline text-sm px-3 py-2 touch-target",children:[(0,wo.jsx)("span",{className:"hidden sm:inline",children:n("common:buttons.start")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Start"})]})})(),!a&&(0,wo.jsxs)("button",{disabled:!0,className:"burando-btn burando-btn-secondary opacity-50 text-sm px-3 py-2 touch-target",children:[(0,wo.jsx)("span",{className:"hidden sm:inline",children:n("common:buttons.locked")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Locked"})]})]})]})},e.phase_number)}))})})]}),(null===s||void 0===s?void 0:s.completedPhases)<3&&(0,wo.jsxs)("div",{className:"burando-card",children:[(0,wo.jsx)("div",{className:"burando-card-header",children:(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy",children:"Next Steps"})}),(0,wo.jsx)("div",{className:"burando-card-body",children:(0,wo.jsx)("div",{className:"bg-gradient-to-r from-burando-bright-teal/10 to-burando-light-green/10 border border-burando-bright-teal/20 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-start",children:[(0,wo.jsx)(bu,{className:"h-5 w-5 text-burando-teal mt-0.5 mr-3 flex-shrink-0"}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h3",{className:"font-medium text-burando-navy mb-1",children:n("crew.next_steps.continue_training")}),(0,wo.jsx)("p",{className:"text-burando-teal text-sm",children:0===(null===s||void 0===s?void 0:s.completedPhases)?n("crew.next_steps.phase1_next"):1===(null===s||void 0===s?void 0:s.completedPhases)?n("crew.next_steps.phase2_next"):n("crew.next_steps.phase3_next")})]})]})})})]}),3===(null===s||void 0===s?void 0:s.completedPhases)&&(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsx)("div",{className:"burando-card-body",children:(0,wo.jsxs)("div",{className:"bg-gradient-to-r from-burando-light-green/20 to-burando-bright-teal/20 border border-burando-light-green/30 rounded-lg p-6 text-center",children:[(0,wo.jsx)(yu,{className:"h-12 w-12 text-burando-light-green mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"burando-heading-2 text-burando-navy mb-2",children:"Congratulations! \ud83c\udf89"}),(0,wo.jsx)("p",{className:"text-burando-teal",children:"You have successfully completed all phases of the onboarding training program. Your completion certificate has been generated and sent to HR."})]})})})]})},wu=dc("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),_u=dc("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),ku=dc("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ju=dc("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Nu=dc("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Su=dc("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Eu=e=>{let{mediaFiles:t=[],title:n="Resources"}=e;const[r,a]=(0,i.useState)(null),[s,o]=(0,i.useState)(0);if(!t||0===t.length)return null;const l=e=>{switch(e){case"image":return(0,wo.jsx)(Su,{className:"h-5 w-5"});case"video":return(0,wo.jsx)(vu,{className:"h-5 w-5"});default:return(0,wo.jsx)(kc,{className:"h-5 w-5"})}},c=e=>{if(!e)return"";if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},d=(e,t)=>{a(e),o(t)},u=e=>{const n="next"===e?(s+1)%t.length:(s-1+t.length)%t.length;o(n),a(t[n])};return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"mt-8",children:[(0,wo.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(kc,{className:"h-5 w-5 mr-2 text-blue-600"}),n]}),(0,wo.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(((e,t)=>(0,wo.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow duration-200",children:[(0,wo.jsx)("div",{className:"relative",children:"image"===e.file_type?(0,wo.jsxs)("div",{className:"aspect-video bg-gray-100 relative overflow-hidden",children:[(0,wo.jsx)("img",{src:e.file_path,alt:e.alt_text||e.file_name,className:"w-full h-full object-cover",loading:"lazy"}),(0,wo.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:(0,wo.jsx)("button",{onClick:()=>d(e,t),className:"opacity-0 hover:opacity-100 bg-white bg-opacity-90 p-2 rounded-full transition-opacity duration-200",children:(0,wo.jsx)(Pc,{className:"h-5 w-5 text-gray-700"})})})]}):"video"===e.file_type?(0,wo.jsxs)("div",{className:"aspect-video bg-gray-900 relative flex items-center justify-center",children:[(0,wo.jsx)(vu,{className:"h-12 w-12 text-white opacity-80"}),(0,wo.jsx)("button",{onClick:()=>d(e,t),className:"absolute inset-0 flex items-center justify-center hover:bg-black hover:bg-opacity-20 transition-all duration-200",children:(0,wo.jsx)("div",{className:"bg-white bg-opacity-90 p-2 rounded-full",children:(0,wo.jsx)(Pc,{className:"h-5 w-5 text-gray-700"})})})]}):(0,wo.jsx)("div",{className:"aspect-video bg-gray-50 flex items-center justify-center",children:l(e.file_type)})}),(0,wo.jsxs)("div",{className:"p-4",children:[(0,wo.jsx)("h4",{className:"font-medium text-gray-900 text-sm mb-1 truncate",title:e.file_name,children:e.file_name}),e.description&&(0,wo.jsx)("p",{className:"text-gray-600 text-xs mb-2 line-clamp-2",children:e.description}),(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("span",{className:"text-xs text-gray-500 capitalize",children:[e.file_type,e.file_size&&" \u2022 ".concat(c(e.file_size))]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("button",{onClick:()=>d(e,t),className:"text-blue-600 hover:text-blue-700 p-1",title:"Preview",children:(0,wo.jsx)(Pc,{className:"h-4 w-4"})}),(0,wo.jsx)("a",{href:e.file_path,download:e.file_name,className:"text-gray-600 hover:text-gray-700 p-1",title:"Download",children:(0,wo.jsx)(td,{className:"h-4 w-4"})})]})]})]})]},e.id||t)))})]}),r&&(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,wo.jsxs)("div",{className:"relative max-w-4xl max-h-full w-full",children:[(0,wo.jsx)("button",{onClick:()=>{a(null),o(0)},className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200",children:(0,wo.jsx)(Mc,{className:"h-6 w-6"})}),t.length>1&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("button",{onClick:()=>u("prev"),className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200",children:(0,wo.jsx)(Wc,{className:"h-6 w-6"})}),(0,wo.jsx)("button",{onClick:()=>u("next"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200",children:(0,wo.jsx)(Hc,{className:"h-6 w-6"})})]}),(0,wo.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden",children:["image"===r.file_type?(0,wo.jsx)("img",{src:r.file_path,alt:r.alt_text||r.file_name,className:"w-full h-auto max-h-[70vh] object-contain"}):"video"===r.file_type?(0,wo.jsx)("video",{src:r.file_path,controls:!0,className:"w-full h-auto max-h-[70vh]",autoPlay:!0,children:"Your browser does not support the video tag."}):(0,wo.jsxs)("div",{className:"p-8 text-center",children:[(0,wo.jsx)("div",{className:"mb-4",children:l(r.file_type)}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r.file_name}),(0,wo.jsx)("p",{className:"text-gray-600 mb-4",children:"Preview not available for this file type"}),(0,wo.jsxs)("a",{href:r.file_path,download:r.file_name,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[(0,wo.jsx)(td,{className:"h-4 w-4 mr-2"}),"Download File"]})]}),(0,wo.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,wo.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:r.file_name}),r.description&&(0,wo.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:r.description}),(0,wo.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,wo.jsxs)("span",{className:"capitalize",children:[r.file_type,r.file_size&&" \u2022 ".concat(c(r.file_size))]}),t.length>1&&(0,wo.jsxs)("span",{children:[s+1," of ",t.length]})]})]})]})]})})]})};var Cu=n(3340);const Au=Cu.default||Cu,{entries:Tu,setPrototypeOf:Ou,isFrozen:Pu,getPrototypeOf:Mu,getOwnPropertyDescriptor:Du}=Object;let{freeze:Ru,seal:Lu,create:Iu}=Object,{apply:Fu,construct:zu}="undefined"!==typeof Reflect&&Reflect;Ru||(Ru=function(e){return e}),Lu||(Lu=function(e){return e}),Fu||(Fu=function(e,t,n){return e.apply(t,n)}),zu||(zu=function(e,t){return new e(...t)});const qu=th(Array.prototype.forEach),Bu=th(Array.prototype.lastIndexOf),Uu=th(Array.prototype.pop),Wu=th(Array.prototype.push),Hu=th(Array.prototype.splice),Vu=th(String.prototype.toLowerCase),Gu=th(String.prototype.toString),Qu=th(String.prototype.match),Ku=th(String.prototype.replace),Yu=th(String.prototype.indexOf),Xu=th(String.prototype.trim),Ju=th(Object.prototype.hasOwnProperty),$u=th(RegExp.prototype.test),Zu=(eh=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zu(eh,t)});var eh;function th(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Fu(e,t,r)}}function nh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vu;Ou&&Ou(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"===typeof i){const e=n(i);e!==i&&(Pu(t)||(t[r]=e),i=e)}e[i]=!0}return e}function rh(e){for(let t=0;t<e.length;t++){Ju(e,t)||(e[t]=null)}return e}function ih(e){const t=Iu(null);for(const[n,r]of Tu(e)){Ju(e,n)&&(Array.isArray(r)?t[n]=rh(r):r&&"object"===typeof r&&r.constructor===Object?t[n]=ih(r):t[n]=r)}return t}function ah(e,t){for(;null!==e;){const n=Du(e,t);if(n){if(n.get)return th(n.get);if("function"===typeof n.value)return th(n.value)}e=Mu(e)}return function(){return null}}const sh=Ru(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),oh=Ru(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lh=Ru(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ch=Ru(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),dh=Ru(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),uh=Ru(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hh=Ru(["#text"]),ph=Ru(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),mh=Ru(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fh=Ru(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gh=Ru(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vh=Lu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bh=Lu(/<%[\w\W]*|[\w\W]*%>/gm),yh=Lu(/\$\{[\w\W]*/gm),xh=Lu(/^data-[\-\w.\u00B7-\uFFFF]+$/),wh=Lu(/^aria-[\-\w]+$/),_h=Lu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kh=Lu(/^(?:\w+script|data):/i),jh=Lu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Nh=Lu(/^html$/i),Sh=Lu(/^[a-z][.\w]*(-[.\w]+)+$/i);var Eh=Object.freeze({__proto__:null,ARIA_ATTR:wh,ATTR_WHITESPACE:jh,CUSTOM_ELEMENT:Sh,DATA_ATTR:xh,DOCTYPE_NAME:Nh,ERB_EXPR:bh,IS_ALLOWED_URI:_h,IS_SCRIPT_OR_DATA:kh,MUSTACHE_EXPR:vh,TMPLIT_EXPR:yh});const Ch=1,Ah=3,Th=7,Oh=8,Ph=9,Mh=function(){return"undefined"===typeof window?null:window};var Dh=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mh();const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==Ph||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const i=r,a=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:m}=t,f=c.prototype,g=ah(f,"cloneNode"),v=ah(f,"remove"),b=ah(f,"nextSibling"),y=ah(f,"childNodes"),x=ah(f,"parentNode");if("function"===typeof o){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let w,_="";const{implementation:k,createNodeIterator:j,createDocumentFragment:N,getElementsByTagName:S}=r,{importNode:E}=i;let C={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"===typeof Tu&&"function"===typeof x&&k&&void 0!==k.createHTMLDocument;const{MUSTACHE_EXPR:A,ERB_EXPR:T,TMPLIT_EXPR:O,DATA_ATTR:P,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:R,CUSTOM_ELEMENT:L}=Eh;let{IS_ALLOWED_URI:I}=Eh,F=null;const z=nh({},[...sh,...oh,...lh,...dh,...hh]);let q=null;const B=nh({},[...ph,...mh,...fh,...gh]);let U=Object.seal(Iu(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,H=null,V=!0,G=!0,Q=!1,K=!0,Y=!1,X=!0,J=!1,$=!1,Z=!1,ee=!1,te=!1,ne=!1,re=!0,ie=!1,ae=!0,se=!1,oe={},le=null;const ce=nh({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const ue=nh({},["audio","video","img","source","image","track"]);let he=null;const pe=nh({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let ve=ge,be=!1,ye=null;const xe=nh({},[me,fe,ge],Gu);let we=nh({},["mi","mo","mn","ms","mtext"]),_e=nh({},["annotation-xml"]);const ke=nh({},["title","style","font","a","script"]);let je=null;const Ne=["application/xhtml+xml","text/html"];let Se=null,Ee=null;const Ce=r.createElement("form"),Ae=function(e){return e instanceof RegExp||e instanceof Function},Te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ee||Ee!==e){if(e&&"object"===typeof e||(e={}),e=ih(e),je=-1===Ne.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Se="application/xhtml+xml"===je?Gu:Vu,F=Ju(e,"ALLOWED_TAGS")?nh({},e.ALLOWED_TAGS,Se):z,q=Ju(e,"ALLOWED_ATTR")?nh({},e.ALLOWED_ATTR,Se):B,ye=Ju(e,"ALLOWED_NAMESPACES")?nh({},e.ALLOWED_NAMESPACES,Gu):xe,he=Ju(e,"ADD_URI_SAFE_ATTR")?nh(ih(pe),e.ADD_URI_SAFE_ATTR,Se):pe,de=Ju(e,"ADD_DATA_URI_TAGS")?nh(ih(ue),e.ADD_DATA_URI_TAGS,Se):ue,le=Ju(e,"FORBID_CONTENTS")?nh({},e.FORBID_CONTENTS,Se):ce,W=Ju(e,"FORBID_TAGS")?nh({},e.FORBID_TAGS,Se):ih({}),H=Ju(e,"FORBID_ATTR")?nh({},e.FORBID_ATTR,Se):ih({}),oe=!!Ju(e,"USE_PROFILES")&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,Q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,K=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Y=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,J=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Z=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,I=e.ALLOWED_URI_REGEXP||_h,ve=e.NAMESPACE||ge,we=e.MATHML_TEXT_INTEGRATION_POINTS||we,_e=e.HTML_INTEGRATION_POINTS||_e,U=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ae(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ae(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Y&&(G=!1),te&&(ee=!0),oe&&(F=nh({},hh),q=[],!0===oe.html&&(nh(F,sh),nh(q,ph)),!0===oe.svg&&(nh(F,oh),nh(q,mh),nh(q,gh)),!0===oe.svgFilters&&(nh(F,lh),nh(q,mh),nh(q,gh)),!0===oe.mathMl&&(nh(F,dh),nh(q,fh),nh(q,gh))),e.ADD_TAGS&&(F===z&&(F=ih(F)),nh(F,e.ADD_TAGS,Se)),e.ADD_ATTR&&(q===B&&(q=ih(q)),nh(q,e.ADD_ATTR,Se)),e.ADD_URI_SAFE_ATTR&&nh(he,e.ADD_URI_SAFE_ATTR,Se),e.FORBID_CONTENTS&&(le===ce&&(le=ih(le)),nh(le,e.FORBID_CONTENTS,Se)),ae&&(F["#text"]=!0),J&&nh(F,["html","head","body"]),F.table&&(nh(F,["tbody"]),delete W.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Zu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Zu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,_=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(Wt){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(m,a)),null!==w&&"string"===typeof _&&(_=w.createHTML(""));Ru&&Ru(e),Ee=e}},Oe=nh({},[...oh,...lh,...ch]),Pe=nh({},[...dh,...uh]),Me=function(e){Wu(n.removed,{element:e});try{x(e).removeChild(e)}catch(Wt){v(e)}},De=function(e,t){try{Wu(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(Wt){Wu(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Me(t)}catch(Wt){}else try{t.setAttribute(e,"")}catch(Wt){}},Re=function(e){let t=null,n=null;if(Z)e="<remove></remove>"+e;else{const t=Qu(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===je&&ve===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=w?w.createHTML(e):e;if(ve===ge)try{t=(new p).parseFromString(i,je)}catch(Wt){}if(!t||!t.documentElement){t=k.createDocument(ve,"template",null);try{t.documentElement.innerHTML=be?_:i}catch(Wt){}}const a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),ve===ge?S.call(t,J?"html":"body")[0]:J?t.documentElement:a},Le=function(e){return j.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Ie=function(e){return e instanceof h&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof u)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)},Fe=function(e){return"function"===typeof l&&e instanceof l};function ze(e,t,r){qu(e,(e=>{e.call(n,t,r,Ee)}))}const qe=function(e){let t=null;if(ze(C.beforeSanitizeElements,e,null),Ie(e))return Me(e),!0;const r=Se(e.nodeName);if(ze(C.uponSanitizeElement,e,{tagName:r,allowedTags:F}),X&&e.hasChildNodes()&&!Fe(e.firstElementChild)&&$u(/<[/\w!]/g,e.innerHTML)&&$u(/<[/\w!]/g,e.textContent))return Me(e),!0;if(e.nodeType===Th)return Me(e),!0;if(X&&e.nodeType===Oh&&$u(/<[/\w]/g,e.data))return Me(e),!0;if(!F[r]||W[r]){if(!W[r]&&Ue(r)){if(U.tagNameCheck instanceof RegExp&&$u(U.tagNameCheck,r))return!1;if(U.tagNameCheck instanceof Function&&U.tagNameCheck(r))return!1}if(ae&&!le[r]){const t=x(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=g(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,b(e))}}}return Me(e),!0}return e instanceof c&&!function(e){let t=x(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const n=Vu(e.tagName),r=Vu(t.tagName);return!!ye[e.namespaceURI]&&(e.namespaceURI===fe?t.namespaceURI===ge?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===r||we[r]):Boolean(Oe[n]):e.namespaceURI===me?t.namespaceURI===ge?"math"===n:t.namespaceURI===fe?"math"===n&&_e[r]:Boolean(Pe[n]):e.namespaceURI===ge?!(t.namespaceURI===fe&&!_e[r])&&!(t.namespaceURI===me&&!we[r])&&!Pe[n]&&(ke[n]||!Oe[n]):!("application/xhtml+xml"!==je||!ye[e.namespaceURI]))}(e)?(Me(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!$u(/<\/no(script|embed|frames)/i,e.innerHTML)?(Y&&e.nodeType===Ah&&(t=e.textContent,qu([A,T,O],(e=>{t=Ku(t,e," ")})),e.textContent!==t&&(Wu(n.removed,{element:e.cloneNode()}),e.textContent=t)),ze(C.afterSanitizeElements,e,null),!1):(Me(e),!0)},Be=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in Ce))return!1;if(G&&!H[t]&&$u(P,t));else if(V&&$u(M,t));else if(!q[t]||H[t]){if(!(Ue(e)&&(U.tagNameCheck instanceof RegExp&&$u(U.tagNameCheck,e)||U.tagNameCheck instanceof Function&&U.tagNameCheck(e))&&(U.attributeNameCheck instanceof RegExp&&$u(U.attributeNameCheck,t)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(t))||"is"===t&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&$u(U.tagNameCheck,n)||U.tagNameCheck instanceof Function&&U.tagNameCheck(n))))return!1}else if(he[t]);else if($u(I,Ku(n,R,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Yu(n,"data:")||!de[e]){if(Q&&!$u(D,Ku(n,R,"")));else if(n)return!1}else;return!0},Ue=function(e){return"annotation-xml"!==e&&Qu(e,L)},We=function(e){ze(C.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Ie(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let i=t.length;for(;i--;){const a=t[i],{name:s,namespaceURI:o,value:l}=a,c=Se(s),d=l;let u="value"===s?d:Xu(d);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,ze(C.uponSanitizeAttribute,e,r),u=r.attrValue,!ie||"id"!==c&&"name"!==c||(De(s,e),u="user-content-"+u),X&&$u(/((--!?|])>)|<\/(style|title)/i,u)){De(s,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){De(s,e);continue}if(!K&&$u(/\/>/i,u)){De(s,e);continue}Y&&qu([A,T,O],(e=>{u=Ku(u,e," ")}));const h=Se(e.nodeName);if(Be(h,c,u)){if(w&&"object"===typeof m&&"function"===typeof m.getAttributeType)if(o);else switch(m.getAttributeType(h,c)){case"TrustedHTML":u=w.createHTML(u);break;case"TrustedScriptURL":u=w.createScriptURL(u)}if(u!==d)try{o?e.setAttributeNS(o,s,u):e.setAttribute(s,u),Ie(e)?Me(e):Uu(n.removed)}catch(Wt){De(s,e)}}else De(s,e)}ze(C.afterSanitizeAttributes,e,null)},He=function e(t){let n=null;const r=Le(t);for(ze(C.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)ze(C.uponSanitizeShadowNode,n,null),qe(n),We(n),n.content instanceof s&&e(n.content);ze(C.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null,o=null,c=null;if(be=!e,be&&(e="\x3c!--\x3e"),"string"!==typeof e&&!Fe(e)){if("function"!==typeof e.toString)throw Zu("toString is not a function");if("string"!==typeof(e=e.toString()))throw Zu("dirty is not a string, aborting")}if(!n.isSupported)return e;if($||Te(t),n.removed=[],"string"===typeof e&&(se=!1),se){if(e.nodeName){const t=Se(e.nodeName);if(!F[t]||W[t])throw Zu("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=Re("\x3c!----\x3e"),a=r.ownerDocument.importNode(e,!0),a.nodeType===Ch&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!ee&&!Y&&!J&&-1===e.indexOf("<"))return w&&ne?w.createHTML(e):e;if(r=Re(e),!r)return ee?null:ne?_:""}r&&Z&&Me(r.firstChild);const d=Le(se?e:r);for(;o=d.nextNode();)qe(o),We(o),o.content instanceof s&&He(o.content);if(se)return e;if(ee){if(te)for(c=N.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(q.shadowroot||q.shadowrootmode)&&(c=E.call(i,c,!0)),c}let u=J?r.outerHTML:r.innerHTML;return J&&F["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&$u(Nh,r.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+u),Y&&qu([A,T,O],(e=>{u=Ku(u,e," ")})),w&&ne?w.createHTML(u):u},n.setConfig=function(){Te(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),$=!0},n.clearConfig=function(){Ee=null,$=!1},n.isValidAttribute=function(e,t,n){Ee||Te({});const r=Se(e),i=Se(t);return Be(r,i,n)},n.addHook=function(e,t){"function"===typeof t&&Wu(C[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=Bu(C[e],t);return-1===n?void 0:Hu(C[e],n,1)[0]}return Uu(C[e])},n.removeHooks=function(e){C[e]=[]},n.removeAllHooks=function(){C={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const Rh={ALLOWED_TAGS:["p","br","strong","em","u","b","i","s","sub","sup","h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","div","span","a","img","table","thead","tbody","tr","th","td","code","pre"],ALLOWED_ATTR:["href","title","target","alt","src","width","height","class","id","colspan","rowspan"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,FORBID_TAGS:["script","object","embed","form","input","button","textarea","select","option","iframe","frame","frameset","noframes","meta","link","style","base","head","html","body"],FORBID_ATTR:["onerror","onload","onclick","onmouseover","onfocus","onblur","onchange","onsubmit","onreset","onselect","onunload","onabort","onkeydown","onkeypress","onkeyup","onmousedown","onmouseup","onmousemove","onmouseout","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll","onwheel","ontouchstart","ontouchend","ontouchmove","ontouchcancel","style"],KEEP_CONTENT:!0,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_DOM_IMPORT:!1};We(We({},Rh),{},{ALLOWED_TAGS:[...Rh.ALLOWED_TAGS,"hr","small","mark","del","ins","abbr","cite","q"],ALLOWED_ATTR:[...Rh.ALLOWED_ATTR,"style"]});function Lh(e){if(!e||"string"!==typeof e)return"";const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||Rh;try{return Dh.sanitize(e,t)}catch(n){return console.error("HTML sanitization failed:",n),""}}function Ih(e){return Lh(e,We(We({},Rh),{},{ALLOWED_TAGS:[...Rh.ALLOWED_TAGS,"hr","small","mark","del","ins","abbr","cite","q","details","summary"],ALLOWED_ATTR:[...Rh.ALLOWED_ATTR,"data-*"]}))}function Fh(e){if(!e||"string"!==typeof e)return"";try{return Dh.sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[],KEEP_CONTENT:!0})}catch(t){return console.error("HTML stripping failed:",t),e.replace(/<[^>]*>/g,"")}}function zh(e){if(!e||"string"!==typeof e)return!0;try{const t=[/<script[^>]*>.*?<\/script>/gi,/javascript:/gi,/on\w+\s*=\s*["'][^"']*["']/gi,/<iframe[^>]*>/gi,/<object[^>]*>/gi,/<embed[^>]*>/gi,/<form[^>]*>/gi,/<input[^>]*>/gi,/<button[^>]*>/gi,/data:text\/html/gi,/vbscript:/gi,/expression\s*\(/gi,/@import/gi,/url\s*\(\s*["']?javascript:/gi];for(const i of t)if(i.test(e))return console.warn("Dangerous HTML pattern detected:",i),!1;const n=Lh(e),r=Math.abs(e.length-n.length);return!(r>.1*e.length)||(console.warn("Significant content removed during sanitization, content may be unsafe"),!1)}catch(t){return console.error("HTML safety validation failed:",t),!1}}const qh=["html","fallback","className","style","allowImages","allowLinks","strictMode"],Bh=["content"],Uh=e=>{let{html:t,fallback:n="Content not available",className:r="",style:a={},allowImages:s=!0,allowLinks:o=!0,strictMode:l=!1}=e,c=Fo(e,qh);if(!t||"string"!==typeof t||""===t.trim())return(0,wo.jsx)("div",We(We({className:r,style:a},c),{},{children:n}));try{if(!zh(t))return console.warn("Unsafe HTML detected, falling back to plain text"),(0,wo.jsx)("div",We(We({className:r,style:a},c),{},{children:Fh(t)||n}));const e=Ih(t);if(!e)return console.warn("HTML sanitization failed, using plain text"),(0,wo.jsx)("div",We(We({className:r,style:a},c),{},{children:Fh(t)||n}));if(!zh(e))return console.warn("Content still unsafe after sanitization, using plain text"),(0,wo.jsx)("div",We(We({className:r,style:a},c),{},{children:Fh(t)||n}));const l={replace:e=>{if("tag"===e.type){const{name:r,attribs:a={}}=e;if(["script","iframe","object","embed","form","input","button"].includes(r.toLowerCase()))return(0,wo.jsx)("span",{children:"Blocked content"});if("img"===r){if(!s)return(0,wo.jsx)("span",{children:"[Image removed for security]"});const e=a.src||"";return e.startsWith("javascript:")||e.startsWith("data:text/html")?(0,wo.jsx)("span",{children:"[Unsafe image blocked]"}):(0,wo.jsx)("img",We(We({},a),{},{src:e,alt:a.alt||"Training content image",onError:t=>{t.target.style.display="none",console.warn("Image failed to load:",e)},style:{maxWidth:"100%",height:"auto"}}))}if("a"===r){var t,n;if(!o)return(0,wo.jsx)("span",{children:(null===(t=e.children)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.data)||"Link removed for security"});const r=a.href||"";return r.startsWith("javascript:")||r.startsWith("vbscript:")||r.startsWith("data:")?(0,wo.jsx)("span",{children:"[Unsafe link blocked]"}):(0,wo.jsx)("a",We(We({},a),{},{href:r,target:"_blank",rel:"noopener noreferrer",onClick:e=>{(r.includes("javascript:")||r.includes("vbscript:"))&&(e.preventDefault(),console.warn("Blocked unsafe link click:",r))}}))}const l={};return Object.keys(a).forEach((e=>{e.toLowerCase().startsWith("on")||(l[e]=a[e])})),i.createElement(r,l)}return e}},d=Au(e,l);return(0,wo.jsx)("div",We(We({className:r,style:a},c),{},{children:d}))}catch(d){return console.error("Error rendering HTML content:",d),(0,wo.jsx)("div",We(We({className:r,style:a},c),{},{children:Fh(t)||n}))}},Wh=e=>{let{content:t}=e,n=Fo(e,Bh);return(0,wo.jsx)(Uh,We({html:t,fallback:"Training content not available",allowImages:!0,allowLinks:!0,strictMode:!1,className:"text-gray-700 leading-relaxed text-lg prose prose-lg max-w-none"},n))},Hh=()=>{var e,t,n;const{t:r}=Ma(["training","common"]),{phase:a}=ie(),s=ne(),{user:o}=ko(),l=(0,Ie.useQueryClient)(),[c,d]=(0,i.useState)(0),[u,h]=(0,i.useState)(new Set),[p,m]=(0,i.useState)(0),[f,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),[y,x]=(0,i.useState)(null),w=e=>{if(!e)return!1;const t=String(e);if(!/^\d+$/.test(t))return!1;const n=parseInt(t,10);return Number.isInteger(n)&&n>=1&&n<=3},_=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.itemNumber)&&void 0!==t?t:null===e||void 0===e?void 0:e.number},k=()=>{var e,t,n,r;return null!==(e=null!==(t=null===j||void 0===j||null===(n=j.progress)||void 0===n?void 0:n.totalItems)&&void 0!==t?t:null===j||void 0===j||null===(r=j.items)||void 0===r?void 0:r.length)&&void 0!==e?e:0},{data:j,isLoading:N,error:S}=(0,Ie.useQuery)(["crew-training-phase",a],(async()=>{if(!w(a))throw new Error("Invalid phase parameter: ".concat(a,". Must be 1, 2, or 3."));try{return await Ps(a)}catch(S){console.warn("Crew API failed, falling back to training API:",S);const t=await Ds(a);return We(We({},t),{},{items:Array.isArray(null===t||void 0===t?void 0:t.items)?t.items.map((e=>We(We({},e),{},{itemNumber:e.number,content:null}))):[]})}}),{enabled:w(a)}),{data:E}=(0,Ie.useQuery)("quiz-history",(()=>zs()),{enabled:!!o,staleTime:3e5});(0,i.useEffect)((()=>{E&&console.log("Quiz History Debug:",{allResults:E,currentPhase:parseInt(a,10),hasResultForCurrentPhase:E.some((e=>e.phase===parseInt(a,10))),resultForCurrentPhase:E.find((e=>e.phase===parseInt(a,10)))})}),[E,a]);const C=(0,Ie.useMutation)((e=>{let{phase:t,itemNumber:n}=e;return Rs(t,n)}),{onSuccess:()=>{l.invalidateQueries(["training-phase",a]),l.invalidateQueries("training-progress")},onError:e=>{var t,n;rn.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to complete item")}}),A=(0,Ie.useMutation)((e=>{let{phase:t,itemNumber:n}=e;return Ls(t,n)}),{onSuccess:()=>{l.invalidateQueries(["training-phase",a]),l.invalidateQueries("training-progress"),rn.success("Training item marked as incomplete")},onError:e=>{var t,n;rn.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to uncomplete item")}});(0,i.useEffect)((()=>{let e=null;return f?e=setInterval((()=>{m((e=>e+1))}),1e3):f||0===p||clearInterval(e),()=>clearInterval(e)}),[f,p]),(0,i.useEffect)((()=>(g(!0),()=>g(!1))),[]);const T=(0,i.useCallback)((e=>{try{const t=Array.isArray(e)?e:[];return t.filter((e=>e&&"object"===typeof e&&(e.number||e.itemNumber))).map((e=>{var t;return null!==(t=e.number)&&void 0!==t?t:e.itemNumber}))}catch(S){return console.error("Error validating completed items:",S),console.error("Data structure:",{completedItems:e,type:typeof e,isArray:Array.isArray(e)}),[]}}),[]);if((0,i.useEffect)((()=>{try{if(null!==j&&void 0!==j&&j.completedItems&&null!==j&&void 0!==j&&j.items){const e=T(j.completedItems),t=new Set(e),n=u.size,r=t.size,i=k(),s=n===i,o=r===i,l=!s&&o&&n>0;h(t);const c=null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(a,10)));l&&(b(!0),g(!1),rn.success("\ud83c\udf89 Congratulations! All training items completed!"),c||x(10)),console.log("Training Progress Debug:",{previouslyCompletedCount:n,newCompletedCount:r,totalItems:i,wasComplete:s,isNowComplete:o,justCompleted:l,hasQuizResult:c})}}catch(S){var e;console.error("Error processing completed items:",S),console.error("Phase data structure:",{completedItems:null===j||void 0===j?void 0:j.completedItems,completedItemsType:typeof(null===j||void 0===j?void 0:j.completedItems),isArray:Array.isArray(null===j||void 0===j?void 0:j.completedItems),items:(null===j||void 0===j||null===(e=j.items)||void 0===e?void 0:e.length)||0}),h(new Set)}}),[null===j||void 0===j?void 0:j.completedItems,null===j||void 0===j?void 0:j.items,E,a]),(0,i.useEffect)((()=>{try{if(null!==j&&void 0!==j&&j.items&&null!==j&&void 0!==j&&j.completedItems){const e=T(j.completedItems),t=new Set(e),n=j.items.findIndex((e=>!t.has(_(e))));if(n>0)console.log("\ud83d\udcda Resuming training at item ".concat(n+1," (first incomplete)")),d(n),rn("Resuming at Step ".concat(n+1),{duration:3e3});else if(-1===n&&k()>0){const e=k()-1;console.log("\u2705 All items completed, showing last item"),d(e)}}}catch(S){var e;console.error("Error in auto-advance logic:",S),console.error("Phase data structure:",{completedItems:null===j||void 0===j?void 0:j.completedItems,completedItemsType:typeof(null===j||void 0===j?void 0:j.completedItems),isArray:Array.isArray(null===j||void 0===j?void 0:j.completedItems),items:(null===j||void 0===j||null===(e=j.items)||void 0===e?void 0:e.length)||0}),d(0)}}),[j]),(0,i.useEffect)((()=>{let e=null;return null!==y&&y>0?e=setInterval((()=>{x((e=>e-1))}),1e3):0===y&&s("/crew/quiz/".concat(a)),()=>clearInterval(e)}),[y,s,a]),!w(a))return(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)(hc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,wo.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:r("training:ui.invalid_phase_title","Invalid Training Phase")}),(0,wo.jsx)("p",{className:"text-gray-600 mb-4",children:r("training:ui.invalid_phase_message","The training phase must be 1, 2, or 3.")}),(0,wo.jsx)(Me,{to:"/crew/dashboard",className:"btn btn-primary",children:r("training:ui.return_to_dashboard")})]});if(N)return(0,wo.jsx)(vc,{message:r("training:ui.loading_content")});if(S||!j)return(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)(hc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,wo.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:S?r("training:ui.failed_to_load_title","Failed to Load Training Data"):r("training:ui.not_found_title")}),(0,wo.jsx)("p",{className:"text-gray-600 mb-4",children:S?r("training:ui.failed_to_load_message","There was an error loading the training content. Please try again."):r("training:ui.not_found_message")}),(0,wo.jsx)(Me,{to:"/crew/dashboard",className:"btn btn-primary",children:r("training:ui.return_to_dashboard")})]});const O=null===j||void 0===j||null===(e=j.items)||void 0===e?void 0:e[c],P=_(O),M=u.has(P);k();return(0,wo.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 sm:space-y-8 px-4 sm:px-6 lg:px-8",children:[v&&(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,wo.jsxs)("div",{className:"bg-white rounded-2xl p-6 sm:p-8 max-w-md w-full text-center shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,wo.jsxs)("div",{className:"flex justify-center space-x-3 mb-6",children:[(0,wo.jsx)(yu,{className:"h-12 w-12 text-yellow-500 animate-bounce"}),(0,wo.jsx)(wu,{className:"h-10 w-10 text-yellow-400 animate-pulse"}),(0,wo.jsx)(_u,{className:"h-12 w-12 text-green-600 animate-bounce",style:{animationDelay:"0.3s"}})]}),(0,wo.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["\ud83c\udf89 ",r("training:ui.outstanding_achievement")," \ud83c\udf89"]}),(0,wo.jsxs)("p",{className:"text-gray-700 mb-6",children:[r("training:ui.phase_completion_message",{count:null===j||void 0===j||null===(t=j.items)||void 0===t?void 0:t.length,title:null===j||void 0===j?void 0:j.title}),(0,wo.jsx)("br",{}),(0,wo.jsx)("br",{}),r("training:ui.dedication_message"),(()=>{const e=E&&E.some((e=>e.phase===parseInt(a,10)));return" ".concat(r(e?"training:ui.view_quiz_results_message":"training:ui.test_knowledge"))})()]}),(0,wo.jsxs)("div",{className:"space-y-3",children:[E&&E.some((e=>e.phase===parseInt(a,10)))?(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"w-full btn btn-outline text-lg py-3 flex items-center justify-center space-x-2",onClick:()=>b(!1),children:[(0,wo.jsx)(pu,{className:"h-5 w-5"}),(0,wo.jsx)("span",{children:"View Quiz Results"})]}):(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"w-full btn btn-success text-lg py-3 flex items-center justify-center space-x-2",onClick:()=>b(!1),children:[(0,wo.jsx)(pu,{className:"h-5 w-5"}),(0,wo.jsx)("span",{children:"Take Quiz Now"})]}),(0,wo.jsx)("button",{onClick:()=>b(!1),className:"w-full btn btn-outline",children:"Continue Reviewing"})]})]})}),(0,wo.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[(0,wo.jsxs)("button",{onClick:()=>s("/crew/dashboard"),className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors self-start",children:[(0,wo.jsx)(ku,{className:"h-5 w-5 mr-2"}),r("training:ui.back_to_dashboard")]}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:j.title}),(0,wo.jsx)("p",{className:"text-base sm:text-lg text-gray-600 mt-1",children:j.description})]})]}),(0,wo.jsx)("div",{className:"bg-white rounded-xl px-4 sm:px-6 py-3 shadow-lg border self-start sm:self-auto",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(id,{className:"h-5 w-5 text-gray-500"}),(0,wo.jsx)("span",{className:"font-mono text-lg font-semibold",children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(p)}),(0,wo.jsx)("button",{onClick:()=>g(!f),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors touch-target",children:f?(0,wo.jsx)(ju,{className:"h-4 w-4"}):(0,wo.jsx)(vu,{className:"h-4 w-4"})}),(0,wo.jsx)("button",{onClick:()=>m(0),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors touch-target",children:(0,wo.jsx)($c,{className:"h-4 w-4"})})]})})]}),(0,wo.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(Nu,{className:"h-6 w-6 text-blue-600"}),(0,wo.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:r("training:ui.training_progress")})]}),(0,wo.jsx)("span",{className:"text-sm text-gray-500",children:r("common:progress.completed_items",{completed:u.size,total:k()})})]}),(0,wo.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,wo.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:"".concat(u.size/k()*100,"%")}})}),(0,wo.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,wo.jsxs)("span",{children:[r("common:general.item")," ",c+1," of ",k()]}),(0,wo.jsxs)("span",{children:[Math.round(u.size/k()*100),"% ",r("common:status.completed")]})]})]}),(0,wo.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-4 lg:gap-8 gap-4 sm:gap-6",children:[(0,wo.jsx)("div",{className:"order-1 lg:col-span-3",children:(0,wo.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,wo.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wo.jsx)("div",{className:"p-3 rounded-lg bg-white bg-opacity-20",children:(e=>{switch(e){case"orientation":return(0,wo.jsx)(_c,{className:"h-5 w-5"});case"emergency":return(0,wo.jsx)(hc,{className:"h-5 w-5"});case"safety":return(0,wo.jsx)(fc,{className:"h-5 w-5"});case"documentation":return(0,wo.jsx)(kc,{className:"h-5 w-5"});default:return(0,wo.jsx)(bu,{className:"h-5 w-5"})}})(null===O||void 0===O?void 0:O.category)}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h2",{className:"text-2xl font-bold",children:[null!=P?P:"N/A",". ",null===O||void 0===O?void 0:O.title]}),(0,wo.jsx)("p",{className:"text-blue-100 mt-1",children:null===O||void 0===O?void 0:O.description})]})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"orientation":return"bg-blue-100 text-blue-800";case"emergency":return"bg-red-100 text-red-800";case"safety":return"bg-green-100 text-green-800";case"documentation":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(null===O||void 0===O?void 0:O.category)),children:null===O||void 0===O?void 0:O.category}),M&&(0,wo.jsx)("div",{className:"bg-green-500 p-2 rounded-full",children:(0,wo.jsx)(sd,{className:"h-5 w-5 text-white"})})]})]})}),(0,wo.jsxs)("div",{className:"p-8",children:[null!==O&&void 0!==O&&O.content?(0,wo.jsxs)("div",{className:"space-y-8",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(bu,{className:"h-5 w-5 mr-2 text-blue-600"}),r("training:ui.overview")]}),(0,wo.jsx)(Wh,{content:O.content.overview,fallback:"Training content overview not available"})]}),O.content.objectives&&(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(Nu,{className:"h-5 w-5 mr-2 text-green-600"}),r("training:ui.learning_objectives")]}),(0,wo.jsx)("ul",{className:"space-y-3",children:O.content.objectives.map(((e,t)=>(0,wo.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,wo.jsx)("div",{className:"bg-green-100 p-1 rounded-full mt-1",children:(0,wo.jsx)(sd,{className:"h-4 w-4 text-green-600"})}),(0,wo.jsx)("span",{className:"text-gray-700",children:e})]},t)))})]}),O.content.keyPoints&&(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(hc,{className:"h-5 w-5 mr-2 text-orange-600"}),r("training:ui.key_points")]}),(0,wo.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:(0,wo.jsx)("ul",{className:"space-y-3",children:O.content.keyPoints.map(((e,t)=>(0,wo.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,wo.jsx)("div",{className:"bg-orange-500 w-2 h-2 rounded-full mt-2 flex-shrink-0"}),(0,wo.jsx)("span",{className:"text-gray-800",children:e})]},t)))})})]}),O.content.procedures&&(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(kc,{className:"h-5 w-5 mr-2 text-purple-600"}),r("training:ui.procedures")]}),(0,wo.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:(0,wo.jsx)("ol",{className:"space-y-4",children:O.content.procedures.map(((e,t)=>(0,wo.jsxs)("li",{className:"flex items-start space-x-4",children:[(0,wo.jsx)("div",{className:"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold flex-shrink-0",children:t+1}),(0,wo.jsx)("span",{className:"text-gray-800 pt-1",children:e})]},t)))})})]}),O.content.emergencyTypes&&(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,wo.jsx)(fc,{className:"h-5 w-5 mr-2 text-red-600"}),r("training:ui.emergency_response_types")]}),(0,wo.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.content.emergencyTypes.map(((e,t)=>(0,wo.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,wo.jsx)(hc,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,wo.jsx)("span",{className:"text-gray-800 text-sm",children:e})]})},t)))})]})]}):(0,wo.jsxs)("div",{className:"text-center py-12",children:[(0,wo.jsx)(bu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r("training:ui.training_content")}),(0,wo.jsx)("p",{className:"text-gray-600",children:r("training:ui.training_content_placeholder",{title:null===O||void 0===O?void 0:O.title})})]}),Array.isArray(null===j||void 0===j?void 0:j.mediaFiles)&&j.mediaFiles.length>0&&(0,wo.jsx)(Eu,{mediaFiles:j.mediaFiles,title:r("training:ui.resources")}),(0,wo.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[!M&&(0,wo.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,wo.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,wo.jsx)("div",{className:"bg-blue-100 p-1 rounded-full mt-0.5",children:(0,wo.jsx)(sd,{className:"h-4 w-4 text-blue-600"})}),(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h4",{className:"font-semibold text-blue-900 mb-1",children:["\u2728 ",r("training:ui.streamlined_flow_title")]}),(0,wo.jsx)("p",{className:"text-blue-800 text-sm",children:r("training:ui.auto_complete_message")})]})]})}),(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("div",{className:"flex items-center space-x-4",children:M?(0,wo.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,wo.jsx)(sd,{className:"h-6 w-6"}),(0,wo.jsx)("span",{className:"font-semibold",children:r("common:status.completed")})]}),(0,wo.jsxs)("button",{onClick:()=>{O&&M&&null!=P&&(A.mutate({phase:parseInt(a,10),itemNumber:P}),h((e=>{const t=new Set(e);return t.delete(P),t})))},disabled:A.isLoading,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 text-sm",children:[A.isLoading?(0,wo.jsx)(vc,{size:"small"}):(0,wo.jsx)($c,{className:"h-4 w-4"}),(0,wo.jsx)("span",{children:r("training:ui.mark_incomplete")})]})]}):(0,wo.jsxs)("button",{onClick:()=>{O&&!M&&null!=P&&(C.mutate({phase:parseInt(a,10),itemNumber:P}),h((e=>new Set([...e,P]))))},disabled:C.isLoading,className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center space-x-2",children:[C.isLoading?(0,wo.jsx)(vc,{size:"small"}):(0,wo.jsx)(sd,{className:"h-5 w-5"}),(0,wo.jsx)("span",{children:r("training:ui.mark_complete_now")})]})}),(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsxs)("button",{onClick:()=>{c>0&&d((e=>e-1))},disabled:0===c,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,wo.jsx)(Wc,{className:"h-5 w-5 mr-1"}),r("common:buttons.previous")]}),c===k()-1?(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:r("training:ui.last_training_item")}),(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(a,10))))?(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"flex items-center px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 font-semibold transition-all duration-200",children:[(0,wo.jsx)(pu,{className:"h-5 w-5 mr-2"}),r("common:buttons.view_results")]}):(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 font-semibold transition-all duration-200",children:[(0,wo.jsx)(pu,{className:"h-5 w-5 mr-2"}),r("common:buttons.take_quiz")]})]}):(0,wo.jsxs)("button",{onClick:()=>{O&&!M&&null!=P&&(C.mutate({phase:parseInt(a,10),itemNumber:P}),h((e=>new Set([...e,P]))),rn.success('\u2705 "'.concat(O.title,'" marked as complete!'),{duration:2e3,position:"bottom-right"})),c<k()-1&&d((e=>e+1))},className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 font-semibold",children:[!M&&(0,wo.jsx)("span",{className:"text-xs bg-blue-500 px-2 py-1 rounded-full mr-2",children:"\u2713 Complete &"}),r("common:buttons.next"),(0,wo.jsx)(Hc,{className:"h-5 w-5 ml-1"})]})]})]})]})]})]})}),(0,wo.jsx)("div",{className:"order-2 lg:col-span-1",children:(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r("training:ui.phase_overview")}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"text-sm text-gray-600",children:r("training:ui.time_limit")}),(0,wo.jsxs)("span",{className:"font-semibold",children:[j.timeLimit,"h"]})]}),(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"text-sm text-gray-600",children:r("training:ui.total_items")}),(0,wo.jsx)("span",{className:"font-semibold",children:k()})]}),(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"text-sm text-gray-600",children:r("training:ui.completed")}),(0,wo.jsx)("span",{className:"font-semibold text-green-600",children:u.size})]}),(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"text-sm text-gray-600",children:r("training:ui.remaining")}),(0,wo.jsx)("span",{className:"font-semibold text-orange-600",children:k()-u.size})]})]})]}),(0,wo.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r("crew.training_items")}),(0,wo.jsx)("div",{className:"space-y-2 max-h-64 sm:max-h-96 overflow-y-auto scrollbar-thin",children:null===j||void 0===j||null===(n=j.items)||void 0===n?void 0:n.map(((e,t)=>{var n;const r=null!==(n=_(e))&&void 0!==n?n:"item-".concat(t);return(0,wo.jsx)("button",{onClick:()=>d(t),className:"w-full text-left p-3 rounded-lg transition-colors ".concat(t===c?"bg-blue-100 border-2 border-blue-300":"hover:bg-gray-50 border-2 border-transparent"),children:(0,wo.jsx)("div",{className:"flex items-center justify-between",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat(u.has(r)?"bg-green-500 text-white":t===c?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"),children:u.has(r)?(0,wo.jsx)(sd,{className:"h-4 w-4"}):(null===r||void 0===r?void 0:r.toString().replace("item-",""))||t+1}),(0,wo.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,wo.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:e.category})]})]})})},r)}))})]}),(0,wo.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r("training:ui.quick_actions")}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(a,10))))?(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"w-full btn btn-outline flex items-center justify-center",children:[(0,wo.jsx)(pu,{className:"h-4 w-4 mr-2"}),r("common:buttons.view_results")]}):(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"w-full btn btn-outline flex items-center justify-center",children:[(0,wo.jsx)(pu,{className:"h-4 w-4 mr-2"}),r("common:buttons.take_quiz")]}),(0,wo.jsxs)(Me,{to:"/crew/dashboard",className:"w-full btn btn-secondary flex items-center justify-center",children:[(0,wo.jsx)(ku,{className:"h-4 w-4 mr-2"}),r("training:ui.back_to_dashboard")]})]})]}),u.size===k()&&(0,wo.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-300 rounded-xl p-6 shadow-lg",children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsxs)("div",{className:"flex justify-center space-x-2 mb-4",children:[(0,wo.jsx)(yu,{className:"h-8 w-8 text-yellow-500 animate-bounce"}),(0,wo.jsx)(wu,{className:"h-6 w-6 text-yellow-400 animate-pulse"}),(0,wo.jsx)(_u,{className:"h-8 w-8 text-green-600 animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,wo.jsxs)("h3",{className:"text-xl font-bold text-green-900 mb-2",children:["\ud83c\udf89 ",r("training:ui.excellent_work")," \ud83c\udf89"]}),(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(a,10))))?(0,wo.jsxs)("p",{className:"text-green-800 mb-4",children:["You've successfully completed all ",(0,wo.jsx)("strong",{children:k()})," training items in this phase.",(0,wo.jsx)("br",{}),"You can review your quiz results or continue studying the materials."]}):(0,wo.jsxs)("p",{className:"text-green-800 mb-4",children:["You've successfully completed all ",(0,wo.jsx)("strong",{children:k()})," training items in this phase.",(0,wo.jsx)("br",{}),"Time to test your knowledge with the final quiz!"]}),null!==y&&(0,wo.jsxs)("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4 mb-4",children:[(0,wo.jsxs)("p",{className:"text-blue-800 text-sm mb-2",children:["\ud83d\ude80 ",r("training:ui.auto_navigate_message")]}),(0,wo.jsxs)("div",{className:"text-2xl font-bold text-blue-900 mb-2",children:[y," seconds"]}),(0,wo.jsx)("button",{onClick:()=>x(null),className:"text-blue-600 hover:text-blue-800 text-sm underline",children:r("training:ui.cancel_auto_nav")})]}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(a,10))))?(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"btn btn-outline w-full text-lg py-3 flex items-center justify-center space-x-2",children:[(0,wo.jsx)(pu,{className:"h-5 w-5"}),(0,wo.jsx)("span",{children:r("common:buttons.view_results")})]}):(0,wo.jsxs)(Me,{to:"/crew/quiz/".concat(a),className:"btn btn-success w-full text-lg py-3 flex items-center justify-center space-x-2",children:[(0,wo.jsx)(pu,{className:"h-5 w-5"}),(0,wo.jsx)("span",{children:r("training:ui.take_final_quiz")})]}),null===y&&!(null!==E&&void 0!==E&&E.some((e=>e.phase===parseInt(a,10))))&&(0,wo.jsx)("button",{onClick:()=>x(10),className:"w-full text-green-600 hover:text-green-800 text-sm underline",children:"Auto-navigate to quiz in 10 seconds"})]})]})})]})})]})]})},Vh=dc("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Gh=dc("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Qh=dc("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Kh=dc("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Yh=dc("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Xh=dc("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Jh=dc("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),$h=dc("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Zh=dc("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ep=e=>{let{context:t="general",trigger:n="manual",onFeedbackSubmitted:r,className:a=""}=e;const{t:s}=Ma(["feedback","common"]),{user:o}=ko(),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(0),[m,f]=(0,i.useState)(""),[g,v]=(0,i.useState)(!1),[b,y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if("auto"===n){x()&&setTimeout((()=>c(!0)),2e3)}}),[n,t]);const x=()=>{const e=Date.now()-(window.sessionStartTime||Date.now());switch(t){case"training_completion":return e>3e5;case"quiz_completion":return!0;case"error_recovery":return e>6e4;case"offline_mode":return e>18e4;default:return e>6e5}},w=async(e,n)=>{u(e);const i={type:e,value:n,context:t,timestamp:(new Date).toISOString(),userId:null===o||void 0===o?void 0:o.id,sessionId:k(),userAgent:navigator.userAgent,connectionStatus:navigator.onLine?"online":"offline"};await _(i);const a={positive:"\u2693 Thank you! Your feedback helps us navigate better!",negative:"\ud83d\udea2 Thanks for the feedback. We'll chart a better course!",rating:"\u2b50 ".concat(n," stars received! Fair winds and following seas!")};rn.success(a[e]||"Feedback received!"),y(!0),r&&r(i)},_=async e=>{try{const t=await fetch("/api/feedback/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to submit feedback");return await t.json()}catch(t){console.error("Feedback submission error:",t);const n=JSON.parse(localStorage.getItem("offlineFeedback")||"[]");throw n.push(e),localStorage.setItem("offlineFeedback",JSON.stringify(n)),t}},k=()=>{let e=sessionStorage.getItem("feedbackSessionId");return e||(e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionStorage.setItem("feedbackSessionId",e)),e};return b&&"auto"===n?null:(0,wo.jsxs)("div",{className:"feedback-widget ".concat(a),children:[!l&&!b&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white/10 backdrop-blur-sm rounded-lg border border-white/20",children:[(0,wo.jsx)("span",{className:"text-white/80 text-sm hidden sm:inline",children:s("feedback:quick.how_was_experience")}),(0,wo.jsx)("button",{onClick:()=>w("positive","good"),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:quick.good_experience"),children:"\ud83d\ude0a"}),(0,wo.jsx)("button",{onClick:()=>w("neutral","okay"),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:quick.okay_experience"),children:"\ud83d\ude10"}),(0,wo.jsx)("button",{onClick:()=>w("negative","poor"),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:quick.poor_experience"),children:"\ud83d\ude1e"}),(0,wo.jsx)("button",{onClick:()=>c(!0),className:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:detailed.open_detailed"),children:(0,wo.jsx)(Zh,{className:"w-5 h-5"})})]}),l&&(0,wo.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,wo.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(()=>{switch(t){case"training_completion":return(0,wo.jsx)(cd,{className:"w-4 h-4"});case"offline_mode":return(0,wo.jsx)(ld,{className:"w-4 h-4"});case"quiz_completion":return(0,wo.jsx)(id,{className:"w-4 h-4"});default:return(0,wo.jsx)(Zh,{className:"w-4 h-4"})}})(),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(()=>{switch(t){case"training_completion":return s("feedback:contexts.training_completion");case"quiz_completion":return s("feedback:contexts.quiz_completion");case"offline_mode":return s("feedback:contexts.offline_mode");case"error_recovery":return s("feedback:contexts.error_recovery");default:return s("feedback:contexts.general")}})()})]}),(0,wo.jsx)("button",{onClick:()=>c(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:(0,wo.jsx)(Mc,{className:"w-5 h-5"})})]}),(0,wo.jsxs)("div",{className:"p-4 space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("feedback:detailed.rate_experience")}),(0,wo.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map((e=>(0,wo.jsx)("button",{onClick:()=>p(e),className:"p-1 rounded transition-colors ".concat(e<=h?"text-yellow-400":"text-gray-300 hover:text-yellow-300"),children:(0,wo.jsx)(wu,{className:"w-6 h-6 fill-current"})},e)))})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("feedback:detailed.additional_comments")}),(0,wo.jsx)("textarea",{value:m,onChange:e=>f(e.target.value),placeholder:s("feedback:detailed.comment_placeholder"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4,maxLength:500}),(0,wo.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[m.length,"/500 ",s("feedback:detailed.characters")]})]}),(0,wo.jsx)("div",{className:"text-xs text-gray-500 bg-gray-50 p-2 rounded",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wo.jsxs)("span",{className:"flex items-center space-x-1",children:[navigator.onLine?(0,wo.jsx)(od,{className:"w-3 h-3"}):(0,wo.jsx)(ld,{className:"w-3 h-3"}),(0,wo.jsx)("span",{children:navigator.onLine?"Online":"Offline"})]}),(0,wo.jsxs)("span",{children:[s("feedback:detailed.context"),": ",t]})]})})]}),(0,wo.jsxs)("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200",children:[(0,wo.jsx)("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:g,children:s("common:cancel")}),(0,wo.jsx)("button",{onClick:async()=>{if(!h&&!m.trim())return void rn.error(s("feedback:validation.rating_or_comment_required"));v(!0);const e={type:"detailed",rating:h,comment:m.trim(),context:t,timestamp:(new Date).toISOString(),userId:null===o||void 0===o?void 0:o.id,sessionId:k(),userAgent:navigator.userAgent,connectionStatus:navigator.onLine?"online":"offline",pageUrl:window.location.href,referrer:document.referrer};try{await _(e),rn.success("\u2693 Detailed feedback submitted! Thank you for helping us improve!"),c(!1),y(!0),r&&r(e)}catch(n){rn.error(s("feedback:errors.submission_failed"))}finally{v(!1)}},disabled:g||!h&&!m.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:g?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,wo.jsx)("span",{children:s("feedback:detailed.submitting")})]}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(Vh,{className:"w-4 h-4"}),(0,wo.jsx)("span",{children:s("feedback:detailed.submit")})]})})]})]})})]})};const tp=new class{constructor(){this.storagePrefix="burando_maritime_",this.maxStorageSize=52428800,this.compressionEnabled=!0}getStorageKey(e){return"".concat(this.storagePrefix).concat(e)}isOffline(){return!navigator.onLine}getStorageInfo(){let e=0;const t=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith(this.storagePrefix)){const n=localStorage.getItem(r);e+=r.length+(n?n.length:0),t.push(r)}}return{totalSize:e,totalSizeMB:(e/1048576).toFixed(2),keyCount:t.length,keys:t,percentUsed:(e/this.maxStorageSize*100).toFixed(1)}}setItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const i=this.getStorageKey(e),a={data:t,timestamp:Date.now(),expires:n.expires||null,version:n.version||"1.0.0",compressed:!1,offline:this.isOffline(),needsSync:n.needsSync||!1};if(this.compressionEnabled&&JSON.stringify(t).length>1e4)try{a.data=this.compressData(t),a.compressed=!0}catch(r){console.warn("Compression failed, storing uncompressed:",r)}const s=JSON.stringify(a);if(s.length>.1*this.maxStorageSize)throw new Error("Data too large for storage");return localStorage.setItem(i,s),console.log("\ud83d\udcf1 Stored offline data: ".concat(e," (").concat((s.length/1024).toFixed(1),"KB)")),!0}catch(r){return console.error("Failed to store offline data:",r),rs.showError(r,"offline_storage"),!1}}getItem(e){try{const n=this.getStorageKey(e),r=localStorage.getItem(n);if(!r)return null;const i=JSON.parse(r);if(i.expires&&Date.now()>i.expires)return this.removeItem(e),null;let a=i.data;if(i.compressed)try{a=this.decompressData(a)}catch(t){return console.error("Decompression failed:",t),null}return{data:a,metadata:{timestamp:i.timestamp,version:i.version,offline:i.offline,needsSync:i.needsSync}}}catch(t){return console.error("Failed to retrieve offline data:",t),null}}removeItem(e){try{const t=this.getStorageKey(e);return localStorage.removeItem(t),!0}catch(t){return console.error("Failed to remove offline data:",t),!1}}clearAll(){try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.storagePrefix)&&e.push(n)}return e.forEach((e=>localStorage.removeItem(e))),console.log("\ud83d\uddd1\ufe0f Cleared ".concat(e.length," offline storage items")),!0}catch(e){return console.error("Failed to clear offline storage:",e),!1}}saveQuizProgress(e,t,n,r){const i="quiz_progress_".concat(e),a={phase:e,answers:t,currentQuestion:n,sessionId:r,status:"in_progress",lastUpdated:Date.now()};return this.setItem(i,a,{needsSync:!1})}getQuizProgress(e){const t="quiz_progress_".concat(e),n=this.getItem(t);return n?n.data:null}markQuizCompleted(e,t,n,r){const i="quiz_completed_".concat(e),a="quiz_progress_".concat(e),s={phase:e,answers:t,score:n,sessionId:r,completedAt:Date.now(),status:"completed"},o=this.setItem(i,s,{needsSync:!0});return o&&this.removeItem(a),o}saveTrainingProgress(e,t,n){const r="training_progress_".concat(e,"_").concat(t),i=We(We({phase:e,itemNumber:t},n),{},{completedAt:Date.now()});return this.setItem(r,i,{needsSync:!0})}getTrainingProgress(e,t){const n="training_progress_".concat(e,"_").concat(t),r=this.getItem(n);return r?r.data:null}getItemsNeedingSync(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n&&n.startsWith(this.storagePrefix)){const t=this.getItem(n.replace(this.storagePrefix,""));t&&t.metadata.needsSync&&e.push({key:n.replace(this.storagePrefix,""),data:t.data,metadata:t.metadata})}}return e}markAsSynced(e){const t=this.getItem(e);return!!t&&(t.metadata.needsSync=!1,this.setItem(e,t.data,We(We({},t.metadata),{},{needsSync:!1})))}compressData(e){return JSON.stringify(e).replace(/(.)\1{2,}/g,((e,t)=>"".concat(t,"*").concat(e.length)))}decompressData(e){const t=e.replace(/(.)\*(\d+)/g,((e,t,n)=>t.repeat(parseInt(n))));return JSON.parse(t)}cacheTrainingContent(e,t){const n="training_content_".concat(e),r=Date.now()+6048e5;return this.setItem(n,t,{expires:r,version:t.version||"1.0.0"})}getCachedTrainingContent(e){const t="training_content_".concat(e),n=this.getItem(t);return n?n.data:null}addToRequestQueue(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i="request_queue",a=this.getItem(i),s=a?a.data:[],o={id:Date.now()+Math.random(),type:e,endpoint:t,data:n,timestamp:Date.now(),retries:0,maxRetries:r.maxRetries||3,priority:r.priority||"normal"};return s.push(o),s.sort(((e,t)=>{const n={high:3,normal:2,low:1};return n[t.priority]-n[e.priority]})),this.setItem(i,s)}getRequestQueue(){const e=this.getItem("request_queue");return e?e.data:[]}removeFromRequestQueue(e){const t="request_queue",n=this.getItem(t);if(!n)return!1;const r=n.data.filter((t=>t.id!==e));return this.setItem(t,r)}clearRequestQueue(){return this.removeItem("request_queue")}cleanupExpiredItems(){let e=0;const t=Date.now();for(let r=0;r<localStorage.length;r++){const i=localStorage.key(r);if(i&&i.startsWith(this.storagePrefix))try{const n=localStorage.getItem(i),r=JSON.parse(n);r.expires&&t>r.expires&&(localStorage.removeItem(i),e++)}catch(n){localStorage.removeItem(i),e++}}return e>0&&console.log("\ud83e\uddf9 Cleaned up ".concat(e," expired offline items")),e}},np=tp;const rp=new class{constructor(){this.registration=null,this.isUpdateAvailable=!1,this.isOffline=!navigator.onLine,this.updateCallbacks=[],this.offlineCallbacks=[],this.onlineCallbacks=[]}async init(){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported in this browser"),!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("\u2705 Service Worker registered successfully"),this.setupEventListeners(),this.checkForUpdates(),this.setupNetworkMonitoring(),!0}catch(e){return console.error("\u274c Service Worker registration failed:",e),rs.logError(e,"service_worker_registration"),!1}}setupEventListeners(){this.registration&&(this.registration.addEventListener("updatefound",(()=>{const e=this.registration.installing;e.addEventListener("statechange",(()=>{"installed"===e.state&&navigator.serviceWorker.controller&&(console.log("\ud83d\udd04 New service worker available"),this.isUpdateAvailable=!0,this.notifyUpdateCallbacks())}))})),navigator.serviceWorker.addEventListener("message",(e=>{this.handleServiceWorkerMessage(e)})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{console.log("\ud83d\udd04 Service worker controller changed"),window.location.reload()})))}handleServiceWorkerMessage(e){const{type:t,data:n}=e.data;switch(t){case"CACHE_UPDATED":console.log("\ud83d\udce6 Cache updated:",n);break;case"OFFLINE_READY":console.log("\ud83d\udcf1 App ready for offline use");break;case"SYNC_COMPLETE":console.log("\ud83d\udd04 Background sync completed:",n),this.handleSyncComplete(n);break;default:console.log("Unknown service worker message:",t,n)}}async checkForUpdates(){if(this.registration)try{await this.registration.update()}catch(e){console.error("Failed to check for updates:",e)}}async applyUpdate(){if(!this.isUpdateAvailable||!this.registration)return!1;try{const e=this.registration.waiting;if(e)return e.postMessage({type:"SKIP_WAITING"}),!0}catch(e){return console.error("Failed to apply update:",e),!1}return!1}setupNetworkMonitoring(){window.addEventListener("online",(()=>{console.log("\ud83c\udf10 Back online - triggering sync"),this.isOffline=!1,this.triggerBackgroundSync(),this.notifyOnlineCallbacks()})),window.addEventListener("offline",(()=>{console.log("\ud83d\udcf1 Gone offline - enabling offline mode"),this.isOffline=!0,this.notifyOfflineCallbacks()})),navigator.onLine?this.isOffline=!1:this.isOffline=!0}async triggerBackgroundSync(){if(!this.registration||!this.registration.sync)return console.log("Background sync not supported, using manual sync"),void await this.manualSync();try{await this.registration.sync.register("offline-data"),console.log("\ud83d\udd04 Background sync registered")}catch(e){console.error("Background sync registration failed:",e),await this.manualSync()}}async manualSync(){try{const e=np.getItemsNeedingSync();for(const t of e)await this.syncItem(t);console.log("\u2705 Manual sync completed: ".concat(e.length," items"))}catch(e){console.error("Manual sync failed:",e),rs.showError(e,"offline_sync")}}async syncItem(e){try{let t="",n="POST";if(e.key.startsWith("quiz_completed_"))t="/api/training/submit-quiz",n="POST";else{if(!e.key.startsWith("training_progress_"))return void console.warn("Unknown sync item type:",e.key);t="/api/training/update-progress",n="POST"}const r=await fetch(t,{method:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e.data)});if(!r.ok)throw new Error("Sync failed: ".concat(r.status," ").concat(r.statusText));np.markAsSynced(e.key),console.log("\u2705 Synced item:",e.key)}catch(t){throw console.error("Failed to sync item:",e.key,t),t}}handleSyncComplete(e){e.success?rs.showSuccess("offline_sync_complete",{params:{count:e.itemCount}}):rs.showError(new Error("Sync failed"),"offline_sync")}async cacheTrainingContent(e,t){try{return np.cacheTrainingContent(e,t),this.registration&&this.registration.active&&this.registration.active.postMessage({type:"CACHE_TRAINING_CONTENT",data:{phase:e,content:t}}),console.log("\ud83d\udce6 Training content cached for phase ".concat(e)),!0}catch(n){return console.error("Failed to cache training content:",n),!1}}async preloadCriticalContent(){try{const t=localStorage.getItem("token");if(!t)return!1;try{const e=await fetch("/api/crew/profile",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){const t=await e.json();np.setItem("user_profile",t)}}catch(e){console.warn("Failed to preload profile:",e)}try{const e=await fetch("/api/content/training/phases",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){const t=await e.json();np.setItem("training_phases",t)}}catch(e){console.warn("Failed to preload training phases:",e)}return console.log("\ud83d\udce6 Critical content preloaded for offline use"),!0}catch(e){return console.error("Failed to preload critical content:",e),!1}}getStatus(){return{isSupported:"serviceWorker"in navigator,isRegistered:!!this.registration,isUpdateAvailable:this.isUpdateAvailable,isOffline:this.isOffline,controller:navigator.serviceWorker.controller?"active":"none"}}onUpdate(e){this.updateCallbacks.push(e)}onOffline(e){this.offlineCallbacks.push(e)}onOnline(e){this.onlineCallbacks.push(e)}notifyUpdateCallbacks(){this.updateCallbacks.forEach((e=>{try{e()}catch(t){console.error("Update callback error:",t)}}))}notifyOfflineCallbacks(){this.offlineCallbacks.forEach((e=>{try{e()}catch(t){console.error("Offline callback error:",t)}}))}notifyOnlineCallbacks(){this.onlineCallbacks.forEach((e=>{try{e()}catch(t){console.error("Online callback error:",t)}}))}async cleanup(){try{if(np.cleanupExpiredItems(),"caches"in window){const e=(await caches.keys()).filter((e=>e.startsWith("burando-maritime-")&&"burando-maritime-v1.0.0"!==e));await Promise.all(e.map((e=>caches.delete(e)))),e.length>0&&console.log("\ud83d\uddd1\ufe0f Cleaned up ".concat(e.length," old caches"))}}catch(e){console.error("Cleanup failed:",e)}}},ip=rp;const ap=e=>{var t,n;let{question:r,answer:a,uploadedFile:s,onAnswerChange:o,onFileUpload:l,onClearFile:c,t:d}=e;const[u,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),f=i.useRef(null);(0,i.useEffect)((()=>{if(m(null),h(!1),f.current&&(f.current.value=""),s){const e=new FileReader;e.onload=e=>m(e.target.result),e.readAsDataURL(s)}}),[r.id]),(0,i.useEffect)((()=>{if(s){const e=new FileReader;e.onload=e=>m(e.target.result),e.readAsDataURL(s)}else m(null)}),[s]);const g=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)},v=e=>{if(!(r.acceptedFileTypes||["image/jpeg","image/png","image/webp"]).includes(e.type))return void rn.error("Invalid file type. Please upload JPG, PNG, or WebP images.");const t=r.maxFileSize||5;e.size>1024*t*1024?rn.error("File too large. Maximum size is ".concat(t,"MB.")):(l(e),o(e.name),rn.success(d("common:success.uploaded")))};return(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"bg-gradient-to-r from-burando-bright-teal/10 to-burando-light-green/10 border border-burando-bright-teal/20 rounded-lg p-4",children:[(0,wo.jsx)("h4",{className:"font-semibold text-burando-navy mb-2",children:"\ud83d\udcf8 Photo Requirements:"}),(0,wo.jsx)("div",{className:"text-burando-teal text-sm whitespace-pre-line",children:r.instructions})]}),(0,wo.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-4 sm:p-8 text-center transition-colors ".concat(u?"border-burando-bright-teal bg-burando-bright-teal/10":s?"border-burando-light-green bg-burando-light-green/10":"border-gray-300 hover:border-burando-teal"),onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&v(e.dataTransfer.files[0])},children:[(0,wo.jsx)("input",{ref:f,type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:(null===(t=r.acceptedFileTypes)||void 0===t?void 0:t.join(","))||"image/*",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&v(e.target.files[0])}}),s?(0,wo.jsxs)("div",{children:[(0,wo.jsx)(sd,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"Photo Uploaded Successfully"}),(0,wo.jsxs)("p",{className:"text-green-700 mb-4",children:[s.name," (",(s.size/1024/1024).toFixed(2)," MB)"]}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 sm:justify-center",children:[(0,wo.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"btn btn-outline min-touch-target",children:[(0,wo.jsx)($c,{className:"h-4 w-4 mr-2"}),"Replace Photo"]}),(0,wo.jsxs)("button",{type:"button",onClick:()=>{c(),rn(d("quiz:file_upload.file_removed"))},className:"btn btn-outline text-red-600 border-red-300 hover:bg-red-50",children:[(0,wo.jsx)(Mc,{className:"h-4 w-4 mr-2"}),"Remove Photo"]})]})]}):(0,wo.jsxs)("div",{children:[(0,wo.jsx)(Qh,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,wo.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Photo"}),(0,wo.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop your photo here, or click to browse"}),(0,wo.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"btn btn-outline",children:[(0,wo.jsx)(Kh,{className:"h-4 w-4 mr-2"}),"Choose Photo"]})]})]}),p&&(0,wo.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,wo.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Preview:"}),(0,wo.jsx)("img",{src:p,alt:"Upload preview",className:"max-w-full h-auto max-h-64 mx-auto rounded-lg shadow-sm"})]}),(null===(n=r.validation)||void 0===n?void 0:n.checklistItems)&&(0,wo.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,wo.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"\u2705 Verification Checklist:"}),(0,wo.jsx)("div",{className:"space-y-1",children:r.validation.checklistItems.map(((e,t)=>(0,wo.jsxs)("div",{className:"flex items-center text-yellow-800 text-sm",children:[(0,wo.jsx)("div",{className:"w-4 h-4 border border-yellow-400 rounded mr-2"}),e]},t)))}),(0,wo.jsx)("p",{className:"text-yellow-700 text-xs mt-2",children:"Your photo will be manually reviewed to ensure all items are visible."})]})]})},sp=e=>{let{question:t,answer:n,onAnswerChange:r}=e;const i=t.options||[];return(0,wo.jsx)("div",{className:"space-y-3",children:i.map(((e,i)=>(0,wo.jsxs)("label",{className:"flex items-start p-4 sm:p-4 border rounded-lg cursor-pointer transition-all duration-200 touch-target mobile-quiz-button ".concat(n===i?"border-burando-teal bg-burando-teal/10 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,wo.jsx)("input",{type:"radio",name:t.id,value:i,checked:n===i,onChange:()=>r(i),className:"sr-only"}),(0,wo.jsx)("div",{className:"w-6 h-6 sm:w-5 sm:h-5 rounded-full border-2 mr-3 mt-0.5 flex items-center justify-center transition-all duration-200 flex-shrink-0 ".concat(n===i?"border-burando-teal bg-burando-teal":"border-gray-300"),children:n===i&&(0,wo.jsx)(sd,{className:"w-3 h-3 text-white"})}),(0,wo.jsx)("span",{className:"flex-1 text-base sm:text-sm leading-relaxed ".concat(n===i?"text-burando-navy font-medium":"text-gray-900"),children:e}),n===i&&(0,wo.jsx)("div",{className:"ml-2 text-burando-teal",children:(0,wo.jsx)(sd,{className:"h-5 w-5"})})]},i)))})},op=e=>{let{question:t,answer:n,onAnswerChange:r}=e;return(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:space-x-4",children:[(0,wo.jsxs)("label",{className:"flex-1 flex items-center justify-center p-6 border-2 rounded-lg cursor-pointer transition-all duration-200 touch-target mobile-quiz-button ".concat(!0===n?"border-green-500 bg-green-50 shadow-md sm:transform sm:scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,wo.jsx)("input",{type:"radio",name:t.id,checked:!0===n,onChange:()=>r(!0),className:"sr-only"}),(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsxs)("div",{className:"relative ".concat(!0===n?"animate-pulse":""),children:[(0,wo.jsx)(Yh,{className:"h-8 w-8 mx-auto mb-2 transition-all duration-200 ".concat(!0===n?"text-green-600":"text-gray-400")}),!0===n&&(0,wo.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,wo.jsx)(sd,{className:"h-4 w-4 text-green-600 bg-white rounded-full"})})]}),(0,wo.jsx)("span",{className:"text-lg font-semibold transition-all duration-200 ".concat(!0===n?"text-green-900":"text-gray-600"),children:"Yes"})]})]}),(0,wo.jsxs)("label",{className:"flex-1 flex items-center justify-center p-6 border-2 rounded-lg cursor-pointer transition-all duration-200 touch-target mobile-quiz-button ".concat(!1===n?"border-red-500 bg-red-50 shadow-md sm:transform sm:scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,wo.jsx)("input",{type:"radio",name:t.id,checked:!1===n,onChange:()=>r(!1),className:"sr-only"}),(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsxs)("div",{className:"relative ".concat(!1===n?"animate-pulse":""),children:[(0,wo.jsx)(Mc,{className:"h-8 w-8 mx-auto mb-2 transition-all duration-200 ".concat(!1===n?"text-red-600":"text-gray-400")}),!1===n&&(0,wo.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,wo.jsx)(sd,{className:"h-4 w-4 text-red-600 bg-white rounded-full"})})]}),(0,wo.jsx)("span",{className:"text-lg font-semibold transition-all duration-200 ".concat(!1===n?"text-red-900":"text-gray-600"),children:"No"})]})]})]})},lp=e=>{let{question:t,answer:n,onAnswerChange:r}=e;const[a,s]=(0,i.useState)(n||[]);(0,i.useEffect)((()=>{const e=t.template||t.question||"Please fill in the [BLANK].";let i=0;if(i=e.includes("[BLANK]")?(e.match(/\[BLANK\]/g)||[]).length:(e.match(/_{5,}/g)||[]).length,n&&n.length===i)s(n);else{const e=new Array(i).fill("");s(e),r(e)}}),[t.id,t.template,t.question,n,r]);const o=t.template||t.question||"Please fill in the [BLANK].";let l,c;o.includes("[BLANK]")?(l=o.split("[BLANK]"),c=l.length-1):(l=o.split(/_{5,}/),c=l.length-1);const d=a.filter((e=>e&&""!==e.trim())).length;return(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,wo.jsx)("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"\ud83d\udcdd Instructions:"}),(0,wo.jsx)("p",{className:"text-blue-700 text-sm",children:"Fill in the blanks with the correct answers. Spelling and capitalization don't need to be exact."})]}),(0,wo.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,wo.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Progress: ",d," of ",c," blanks filled"]}),d===c&&c>0&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,wo.jsx)(sd,{className:"h-4 w-4"}),(0,wo.jsx)("span",{className:"text-sm font-medium",children:"All blanks filled!"})]})]}),(0,wo.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,wo.jsx)("div",{className:"text-lg leading-relaxed",children:l.map(((e,t)=>(0,wo.jsxs)("span",{children:[e,t<l.length-1&&(0,wo.jsx)("input",{type:"text",value:a[t]||"",onChange:e=>((e,t)=>{const n=[...a];n[e]=t,s(n),r(n)})(t,e.target.value),className:"inline-block mx-2 px-3 py-2 border-2 border-gray-300 rounded-md min-w-[120px] text-base focus:border-burando-teal focus:ring-2 focus:ring-burando-teal/20 focus:outline-none transition-colors",placeholder:"Enter answer ".concat(t+1),autoComplete:"off"})]},t)))})}),t.hints&&t.hints.length>0&&(0,wo.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,wo.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"\ud83d\udca1 Hints:"}),(0,wo.jsx)("ul",{className:"text-yellow-800 text-sm space-y-1",children:t.hints.map(((e,t)=>(0,wo.jsxs)("li",{children:["\u2022 ",e]},t)))})]}),d===c&&c>0?(0,wo.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(sd,{className:"h-5 w-5 text-green-600"}),(0,wo.jsx)("p",{className:"text-green-800 text-sm font-medium",children:"\u2705 Perfect! All blanks have been filled. You can continue or review your answers."})]})}):(0,wo.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,wo.jsxs)("p",{className:"text-yellow-800 text-sm",children:["Fill in ",c-d," more blank",c-d!==1?"s":""," to complete this question."]})]})})]})},cp=e=>{let{question:t,answer:n,onAnswerChange:r}=e;return(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsx)("textarea",{value:n||"",onChange:e=>r(e.target.value),className:"w-full h-32 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-vertical",placeholder:"Type your answer here...",maxLength:t.maxLength}),(0,wo.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[(0,wo.jsxs)("span",{children:[(n||"").length," / ",t.maxLength," characters"]}),(0,wo.jsx)("span",{children:"Be specific and include key terms related to the policy."})]}),t.sampleAnswer&&(0,wo.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,wo.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udca1 Hint:"}),(0,wo.jsx)("p",{className:"text-blue-800 text-sm",children:"Your answer should cover the main policy points and use relevant terminology."})]})]})},dp=e=>{let{question:t,answer:n,onAnswerChange:r}=e;const i=t.scenario||"No scenario provided.",a=t.options||[];return(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,wo.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"\ud83d\udccb Scenario:"}),(0,wo.jsx)("p",{className:"text-yellow-800 leading-relaxed",children:i})]}),(0,wo.jsx)("div",{className:"space-y-3",children:a.map(((e,i)=>(0,wo.jsxs)("label",{className:"flex items-start p-4 border rounded-lg cursor-pointer transition-colors ".concat(n===i?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,wo.jsx)("input",{type:"radio",name:t.id,value:i,checked:n===i,onChange:()=>r(i),className:"sr-only"}),(0,wo.jsx)("div",{className:"w-4 h-4 rounded-full border-2 mr-3 mt-1 flex items-center justify-center flex-shrink-0 ".concat(n===i?"border-blue-500":"border-gray-300"),children:n===i&&(0,wo.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})}),(0,wo.jsx)("span",{className:"text-gray-900 leading-relaxed",children:e})]},i)))})]})},up=e=>{let{question:t,answer:n,onAnswerChange:r}=e;const a=t.items||[],[s,o]=(0,i.useState)(n||a),[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(null);(0,i.useEffect)((()=>{!n&&a.length>0&&(r(a),o(a))}),[n,a,r]);const h=e=>{e.target.style.opacity="1",c(null),u(null)},p=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},m=e=>{e.currentTarget.contains(e.relatedTarget)||u(null)},f=(e,t)=>{const n=[...s],i="up"===t?e-1:e+1;i<0||i>=n.length||([n[e],n[i]]=[n[i],n[e]],o(n),r(n))};return(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,wo.jsx)("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"\ud83d\udccb Instructions:"}),(0,wo.jsx)("p",{className:"text-blue-700 text-sm",children:"Drag and drop the items below to arrange them in the correct order, or use the arrow buttons to move items up/down."})]}),(0,wo.jsx)("div",{className:"space-y-2",children:s.map(((e,t)=>(0,wo.jsxs)("div",{draggable:!0,onDragStart:e=>((e,t)=>{c(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.outerHTML),e.target.style.opacity="0.5"})(e,t),onDragEnd:h,onDragOver:p,onDragEnter:e=>((e,t)=>{e.preventDefault(),u(t)})(e,t),onDragLeave:m,onDrop:e=>((e,t)=>{if(e.preventDefault(),null===l||l===t)return;const n=[...s],i=n[l];n.splice(l,1),n.splice(t,0,i),o(n),r(n),c(null),u(null)})(e,t),className:"flex items-center p-4 border rounded-lg transition-all duration-200 ".concat(l===t?"opacity-50 transform rotate-2":d===t?"border-burando-teal bg-burando-teal/10 transform scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"," cursor-move"),children:[(0,wo.jsx)(Xh,{className:"h-5 w-5 text-gray-400 mr-3 flex-shrink-0"}),(0,wo.jsx)("span",{className:"flex-1 font-medium text-gray-900",children:e}),(0,wo.jsx)("div",{className:"flex items-center space-x-2 mr-3",children:(0,wo.jsxs)("span",{className:"text-sm font-semibold text-burando-teal bg-burando-teal/10 px-2 py-1 rounded",children:["#",t+1]})}),(0,wo.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,wo.jsx)("button",{type:"button",onClick:()=>f(t,"up"),disabled:0===t,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:(0,wo.jsx)(Jh,{className:"h-4 w-4"})}),(0,wo.jsx)("button",{type:"button",onClick:()=>f(t,"down"),disabled:t===s.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:(0,wo.jsx)($h,{className:"h-4 w-4"})})]})]},"".concat(e,"-").concat(t))))}),(0,wo.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(sd,{className:"h-5 w-5 text-green-600"}),(0,wo.jsx)("p",{className:"text-green-800 text-sm font-medium",children:"\u2705 Order set! You can continue or adjust the order as needed."})]})})]})},hp=e=>{let{question:t,answer:n,onAnswerChange:r}=e;const a=t.leftColumn||[],s=t.rightColumn||[],[o,l]=(0,i.useState)(n||new Array(a.length).fill(null)),[c,d]=(0,i.useState)(null),[u,h]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!n&&a.length>0){const e=new Array(a.length).fill(null);r(e),l(e)}}),[n,a.length,r]);const p=e=>{e.target.style.opacity="1",d(null),h(null)},m=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},f=(e,t,n)=>{e.preventDefault(),h({type:t,index:n})},g=e=>{e.currentTarget.contains(e.relatedTarget)||h(null)},v=o.every((e=>null!==e)),b=o.filter((e=>null!==e)).length;return(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,wo.jsx)("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"\ud83d\udccb Instructions:"}),(0,wo.jsx)("p",{className:"text-blue-700 text-sm",children:"Drag items from the left column to the right column to create matches, or click items to match them automatically. Drag matched items back to the left to remove matches."})]}),(0,wo.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,wo.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Progress: ",b," of ",a.length," matched"]}),v&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,wo.jsx)(sd,{className:"h-4 w-4"}),(0,wo.jsx)("span",{className:"text-sm font-medium",children:"All items matched!"})]})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsx)("h4",{className:"font-semibold text-burando-navy text-lg border-b border-gray-200 pb-2",children:"Equipment & Items"}),a.map(((e,t)=>{const n=null!==o[t],i=o[t];return(0,wo.jsx)("div",{draggable:!0,onDragStart:e=>((e,t)=>{d({type:"left",index:t,item:a[t]}),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.outerHTML),e.target.style.opacity="0.5"})(e,t),onDragEnd:p,onDragOver:m,onDragEnter:e=>f(e,"left",t),onDragLeave:g,onDrop:e=>(e=>{if(e.preventDefault(),!c)return;const t=[...o];if("right"===c.type){const e=t.findIndex((e=>e===c.index));-1!==e&&(t[e]=null)}else"left"===c.type&&(t[c.index]=null);l(t),r(t),d(null),h(null)})(e),onClick:()=>(e=>{if(null!==o[e]){const t=[...o];t[e]=null,l(t),r(t)}})(t),className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(n?"bg-green-50 border-green-300 text-green-800":"left"===(null===u||void 0===u?void 0:u.type)&&(null===u||void 0===u?void 0:u.index)===t?"border-red-400 bg-red-50":"bg-blue-50 border-blue-200 hover:border-blue-300 hover:bg-blue-100"),children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"font-medium",children:e}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[n&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(sd,{className:"h-4 w-4 text-green-600"}),(0,wo.jsxs)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:["\u2192 ",s[i]]})]}),(0,wo.jsx)(Xh,{className:"h-4 w-4 text-gray-400"})]})]})},t)}))]}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsx)("h4",{className:"font-semibold text-burando-navy text-lg border-b border-gray-200 pb-2",children:"Uses & Functions"}),s.map(((e,t)=>{const n=o.includes(t),i=o.findIndex((e=>e===t));return(0,wo.jsx)("div",{draggable:n,onDragStart:e=>n&&((e,t)=>{d({type:"right",index:t,item:s[t]}),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.outerHTML),e.target.style.opacity="0.5"})(e,t),onDragEnd:p,onDragOver:m,onDragEnter:e=>f(e,"right",t),onDragLeave:g,onDrop:e=>((e,t)=>{if(e.preventDefault(),!c||"left"!==c.type)return;const n=[...o];n[c.index]=t,l(n),r(n),d(null),h(null)})(e,t),onClick:()=>!n&&(e=>{const t=o.findIndex((e=>null===e));if(-1!==t){const n=[...o];n[t]=e,l(n),r(n)}})(t),className:"p-4 border-2 rounded-lg transition-all duration-200 ".concat(n?"bg-green-50 border-green-300 text-green-800 cursor-move":"right"===(null===u||void 0===u?void 0:u.type)&&(null===u||void 0===u?void 0:u.index)===t?"border-burando-teal bg-burando-teal/10 transform scale-105":"bg-orange-50 border-orange-200 hover:border-orange-300 hover:bg-orange-100 cursor-pointer"),children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("span",{className:"font-medium",children:e}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[n&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:["\u2190 ",a[i]]}),(0,wo.jsx)(sd,{className:"h-4 w-4 text-green-600"})]}),(0,wo.jsx)(Xh,{className:"h-4 w-4 text-gray-400"})]})]})},t)}))]})]}),v?(0,wo.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(sd,{className:"h-5 w-5 text-green-600"}),(0,wo.jsx)("p",{className:"text-green-800 text-sm font-medium",children:"\u2705 Perfect! All items have been matched. You can continue or adjust matches as needed."})]})}):(0,wo.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,wo.jsxs)("p",{className:"text-yellow-800 text-sm",children:["Match ",a.length-b," more item",a.length-b!==1?"s":""," to complete this question."]})]})})]})},pp=()=>{var e,t,n;const{t:r}=Ma(["quiz","common"]),{currentLanguage:a,languages:s,changeLanguage:o}=Co(),{phase:l}=ie(),c=ne(),d=(0,Ie.useQueryClient)(),{isOnline:u}=function(){const[e,t]=(0,i.useState)(navigator.onLine),[n,r]=(0,i.useState)("good");return(0,i.useEffect)((()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}),[]),{isOnline:e,connectionQuality:n,checkConnection:async()=>{if(!navigator.onLine)return!1;try{return(await fetch("/api/health",{method:"HEAD",cache:"no-cache",headers:{"x-health-check-type":"monitoring"},timeout:5e3})).ok}catch(e){return!1}}}}(),[h,p]=(0,i.useState)(0),[m,f]=(0,i.useState)({}),[g,v]=(0,i.useState)(null),[b,y]=(0,i.useState)(!1),[x,w]=(0,i.useState)(!1),[_,k]=(0,i.useState)(!1),[j,N]=(0,i.useState)({}),[S,E]=(0,i.useState)({}),[C,A]=(0,i.useState)((()=>sessionStorage.getItem("quiz-session-".concat(l))||null)),[T,O]=(0,i.useState)(null),[P,M]=(0,i.useState)(!1),[D,R]=(0,i.useState)(null),[L,I]=(0,i.useState)(!1),[F,z]=(0,i.useState)(!navigator.onLine),[q,B]=(0,i.useState)(!1);(0,i.useEffect)((()=>{l&&(()=>{const e=np.getQuizProgress(l);e&&(console.log("\ud83d\udd04 Restoring offline quiz progress for phase",l),f(e.answers||{}),p(e.currentQuestion||0),y(!0),rn.success(r("quiz:offline.progress_restored"),{duration:4e3}))})()}),[l,r]),(0,i.useEffect)((()=>{const e=()=>{z(!1),q&&rn.success(r("quiz:offline.back_online_will_sync"))},t=()=>{z(!0),rn.warning(r("quiz:offline.now_offline"),{duration:6e3})};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[q,r]),(0,i.useEffect)((()=>{const e=e=>{P&&!e.target.closest(".language-dropdown")&&M(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[P]);const{data:U,isLoading:W,error:H}=(0,Ie.useQuery)(["quiz",l],(()=>Is(l)),{enabled:!!l,staleTime:0,cacheTime:0,onSuccess:e=>{e.quizSessionId&&(A(e.quizSessionId),sessionStorage.setItem("quiz-session-".concat(l),e.quizSessionId))},onError:e=>{console.error("Failed to load quiz:",e),sessionStorage.removeItem("quiz-session-".concat(l)),A(null)}}),{data:V,isLoading:G}=(0,Ie.useQuery)(["quiz-history"],(()=>zs()),{staleTime:12e4}),Q=null===V||void 0===V?void 0:V.some((e=>e.phase===parseInt(l)&&e.passed));(0,i.useEffect)((()=>{(async()=>{if(l)try{I(!0);const e=await yo.getQuizInLanguage(l,a);R(e)}catch(e){console.warn("Failed to fetch translated quiz:",e),R(null)}finally{I(!1)}})()}),[l,a]);const K=D&&D.questions&&D.questions.length>0?{title:"Phase ".concat(l," Safety Quiz"),description:"Complete this quiz to finish Phase ".concat(l," training"),timeLimit:(null===U||void 0===U?void 0:U.timeLimit)||30,passingScore:(null===U||void 0===U?void 0:U.passingScore)||70,questions:D.questions.map((e=>{var t,n,r,i,a;return{id:e.question_index,question:e.question_text,type:(null===(t=e.quiz_metadata)||void 0===t?void 0:t.type)||"multiple_choice",options:e.answers.map((e=>e.text)),correctAnswer:(null===(n=e.answers.find((e=>e.is_correct)))||void 0===n?void 0:n.answer_index)||0,explanation:(null===(r=e.answers.find((e=>e.is_correct)))||void 0===r?void 0:r.explanation)||"",timeLimit:(null===(i=e.quiz_metadata)||void 0===i?void 0:i.time_limit)||null,points:(null===(a=e.quiz_metadata)||void 0===a?void 0:a.points)||10}}))}:U?We(We({},U),{},{title:U.title||"Phase ".concat(l," Safety Quiz"),description:U.description||"Complete this quiz to finish Phase ".concat(l," training"),timeLimit:U.timeLimit||30,passingScore:U.passingScore||70}):null,Y=null===K||void 0===K||null===(e=K.questions)||void 0===e?void 0:e[h],X=(null===K||void 0===K||null===(t=K.questions)||void 0===t?void 0:t.length)||0;(0,i.useEffect)((()=>{Q&&!_&&(k(!0),w(!0),y(!0))}),[Q,_]);const J=(0,Ie.useMutation)((e=>Fs(l,e)),{onSuccess:e=>{w(!0),k(!0),v(0),rn.success(r("quiz:results.submitted_successfully")),d.invalidateQueries("training-progress"),d.invalidateQueries("training-stats"),d.invalidateQueries("quiz-history"),d.invalidateQueries("crew-profile"),sessionStorage.removeItem("quiz-session-".concat(l))},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||e.message;i.includes("session")&&(i.includes("expired")||i.includes("not found"))?(sessionStorage.removeItem("quiz-session-".concat(l)),A(null),rn.error(r("quiz:errors.session_expired"))):rn.error(r("quiz:errors.submission_failed",{error:i}))}});(0,i.useEffect)((()=>{b&&null===g&&null!==K&&void 0!==K&&K.timeLimit&&v(60*K.timeLimit)}),[b,null===K||void 0===K?void 0:K.timeLimit,g]),(0,i.useEffect)((()=>{if(b&&g>0&&!_&&!x){const e=setInterval((()=>{v((e=>e<=1?(re(),0):e-1))}),1e3);return()=>clearInterval(e)}}),[b,g,_,x]),(0,i.useEffect)((()=>()=>{T&&clearTimeout(T)}),[T,h]);const $=e=>["multiple_choice","yes_no","scenario"].includes(e),Z=()=>{const e=m[null===Y||void 0===Y?void 0:Y.id];return"file_upload"===(null===Y||void 0===Y?void 0:Y.type)?j[Y.id]&&e:"drag_order"===(null===Y||void 0===Y?void 0:Y.type)?Array.isArray(e)&&e.length>0:"matching"===(null===Y||void 0===Y?void 0:Y.type)?Array.isArray(e)&&e.length>0&&e.every((e=>null!==e)):"fill_in_gaps"===(null===Y||void 0===Y?void 0:Y.type)?Array.isArray(e)&&e.length>0&&e.every((e=>e&&""!==e.trim())):void 0!==e&&null!==e&&""!==e},ee=(e,t)=>{const n=We(We({},m),{},{[e]:t});if(f(n),C&&np.saveQuizProgress(l,n,h,C),T&&(clearTimeout(T),O(null)),Y&&$(Y.type)&&h<X-1){const e=setTimeout((()=>{te(),O(null)}),1500);O(e)}},te=()=>{h<X-1&&p((e=>e+1))},re=()=>{if(!C)return void rn.error(r("quiz:errors.session_not_found"));const e=Object.entries(m).map((e=>{let[t,n]=e;return{questionId:t,answer:n}})),t={answers:e,quizSessionId:C,phase:parseInt(l),completedAt:Date.now()};if(!F&&navigator.onLine)J.mutate(t);else{np.markQuizCompleted(l,e,null,C)?(B(!0),w(!0),k(!0),v(0),np.removeItem("quiz_progress_".concat(l)),rn.success(r("quiz:offline.saved_will_sync"),{duration:6e3})):rn.error(r("quiz:offline.save_failed"))}};return W||G?(0,wo.jsx)("div",{className:"space-y-6",children:(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-burando-teal mx-auto mb-4"}),(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-2",children:r("common:loading.quiz")}),(0,wo.jsx)("p",{className:"burando-text-muted",children:r("quiz:loading.preparing_quiz",{phase:l})})]})})}):H?(0,wo.jsx)("div",{className:"space-y-6",children:(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,wo.jsx)(hc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-2",children:r("common:quiz_errors.loading_failed")}),(0,wo.jsxs)("p",{className:"burando-text-muted",children:[r("common:quiz_errors.failed_message",{phase:l}),(null===H||void 0===H||null===(ae=H.response)||void 0===ae||null===(se=ae.data)||void 0===se?void 0:se.error)||(null===H||void 0===H?void 0:H.message)||r("common:quiz_errors.unknown_error")]}),(0,wo.jsx)("button",{onClick:()=>window.location.reload(),className:"burando-btn burando-btn-primary mt-4",children:r("common:quiz_errors.try_again")})]})})}):K?(0,wo.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4 sm:space-y-6 px-4 sm:px-6 lg:px-8",children:[(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsx)("div",{className:"burando-card-header",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("div",{className:"flex-1",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h1",{className:"burando-heading-1 text-burando-navy",children:K.title}),(0,wo.jsx)("p",{className:"burando-text-muted",children:K.description})]}),(0,wo.jsxs)("div",{className:"relative language-dropdown",children:[(0,wo.jsx)("button",{onClick:()=>M(!P),className:"flex items-center space-x-2 px-3 py-2 bg-burando-teal/10 hover:bg-burando-teal/20 border border-burando-teal/30 rounded-lg transition-colors",disabled:L,children:L?(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-burando-teal border-t-transparent rounded-full"}),(0,wo.jsx)("span",{className:"text-sm text-burando-teal",children:"Loading..."})]}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(bc,{className:"h-4 w-4 text-burando-teal"}),(0,wo.jsx)("span",{className:"text-sm text-burando-teal font-medium",children:(null===(n=s.find((e=>e.code===a)))||void 0===n?void 0:n.flag)||"EN"}),(0,wo.jsx)(mc,{className:"h-4 w-4 text-burando-teal"})]})}),P&&(0,wo.jsx)("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:s.map((e=>(0,wo.jsx)("button",{onClick:()=>{o(e.code),M(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-burando-teal/10 first:rounded-t-lg last:rounded-b-lg transition-colors ".concat(a===e.code?"bg-burando-teal/10 text-burando-teal font-medium":"text-gray-700"),children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsx)("span",{children:e.name}),(0,wo.jsx)("span",{className:"text-xs font-mono bg-gray-100 px-1.5 py-0.5 rounded",children:e.flag})]})},e.code)))})]})]})}),(0,wo.jsxs)("div",{className:"flex items-center space-x-3 ml-4",children:[F&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 bg-orange-50 border border-orange-200 px-3 py-2 rounded-lg",children:[(0,wo.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),(0,wo.jsx)("span",{className:"text-sm font-medium text-orange-700",children:r("quiz:offline.mode_active")})]}),q&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-50 border border-blue-200 px-3 py-2 rounded-lg",children:[(0,wo.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,wo.jsx)("span",{className:"text-sm font-medium text-blue-700",children:r("quiz:offline.pending_sync")})]}),b&&null!==g&&!_&&!x&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-burando-teal/10 to-burando-bright-teal/10 border border-burando-teal/20 px-4 py-2 rounded-lg",children:[(0,wo.jsx)(id,{className:"h-5 w-5 text-burando-teal"}),(0,wo.jsx)("span",{className:"font-mono text-lg font-semibold ".concat(g<300?"text-red-600":"text-burando-navy"),children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(g)})]})]})]})})}),!b&&(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,wo.jsx)(Nu,{className:"h-16 w-16 text-burando-teal mx-auto mb-6"}),(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-4",children:r("navigation.ready_to_begin")}),(0,wo.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4 mb-8",children:[(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[(0,wo.jsxs)("div",{className:"bg-gradient-to-br from-burando-teal/10 to-burando-teal/5 border border-burando-teal/20 p-4 rounded-lg",children:[(0,wo.jsx)(id,{className:"h-6 w-6 text-burando-teal mx-auto mb-2"}),(0,wo.jsx)("div",{className:"font-semibold text-burando-navy",children:r("navigation.time_limit_label")}),(0,wo.jsxs)("div",{className:"text-burando-teal",children:[K.timeLimit," minutes"]})]}),(0,wo.jsxs)("div",{className:"bg-gradient-to-br from-burando-bright-teal/10 to-burando-bright-teal/5 border border-burando-bright-teal/20 p-4 rounded-lg",children:[(0,wo.jsx)(kc,{className:"h-6 w-6 text-burando-bright-teal mx-auto mb-2"}),(0,wo.jsx)("div",{className:"font-semibold text-burando-navy",children:r("navigation.questions_label")}),(0,wo.jsx)("div",{className:"text-burando-bright-teal",children:r("navigation.questions_count",{count:X})})]}),(0,wo.jsxs)("div",{className:"bg-gradient-to-br from-burando-light-green/10 to-burando-light-green/5 border border-burando-light-green/20 p-4 rounded-lg",children:[(0,wo.jsx)(pu,{className:"h-6 w-6 text-burando-light-green mx-auto mb-2"}),(0,wo.jsx)("div",{className:"font-semibold text-burando-navy",children:r("navigation.passing_score_label")}),(0,wo.jsxs)("div",{className:"text-burando-light-green",children:[K.passingScore,"%"]})]})]}),(0,wo.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-left",children:[(0,wo.jsx)("h3",{className:"font-semibold text-orange-900 mb-2",children:r("quiz:ui.important_instructions")}),(0,wo.jsxs)("ul",{className:"text-orange-800 text-sm space-y-1",children:[(0,wo.jsxs)("li",{children:["\u2022 ",r("quiz:ui.instruction_photos")]}),(0,wo.jsxs)("li",{children:["\u2022 ",r("quiz:ui.instruction_navigation")]}),(0,wo.jsxs)("li",{children:["\u2022 ",r("quiz:ui.instruction_files")]}),(0,wo.jsxs)("li",{children:["\u2022 ",r("quiz:ui.instruction_all_questions")]}),(0,wo.jsxs)("li",{children:["\u2022 ",r("quiz:ui.instruction_auto_save")]})]})]})]}),(0,wo.jsxs)("button",{onClick:()=>{y(!0),rn.success(r("quiz:ui.quiz_started"))},className:"burando-btn burando-btn-primary burando-btn-lg text-lg px-8 py-3",children:[(0,wo.jsx)(vu,{className:"h-5 w-5 mr-2"}),r("navigation.start_quiz")]})]})}),b&&!_&&Y&&(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsxs)("div",{className:"burando-card-body py-4",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,wo.jsxs)("span",{className:"text-sm font-medium text-burando-navy",children:[r("navigation.question_progress")," ",h+1," ",r("common:general.of")," ",X]}),(0,wo.jsxs)("span",{className:"text-sm text-burando-teal",children:[Y.points||1," points"]})]}),(0,wo.jsx)("div",{className:"burando-progress",children:(0,wo.jsx)("div",{className:"burando-progress-bar transition-all duration-300",style:{width:"".concat((h+1)/X*100,"%")}})})]})}),(0,wo.jsxs)("div",{className:"burando-card",children:[(0,wo.jsx)("div",{className:"burando-card-header",children:(0,wo.jsx)("div",{className:"flex items-start justify-between",children:(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,wo.jsx)("span",{className:"burando-badge burando-badge-info",children:Y.category?String(Y.category).replace("_"," ").toUpperCase():"GENERAL"}),Y.required&&(0,wo.jsx)("span",{className:"burando-badge burando-badge-error",children:"REQUIRED"})]}),(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy",children:Y.question})]})})}),(0,wo.jsxs)("div",{className:"burando-card-body",children:["file_upload"===Y.type&&(0,wo.jsx)(ap,{question:Y,answer:m[Y.id],uploadedFile:j[Y.id],onAnswerChange:e=>ee(Y.id,e),onFileUpload:e=>((e,t)=>{N((n=>We(We({},n),{},{[e]:t}))),ee(e,t.name)})(Y.id,e),onClearFile:()=>{return e=Y.id,N((t=>{const n=We({},t);return delete n[e],n})),void ee(e,null);var e},t:r}),"multiple_choice"===Y.type&&(0,wo.jsx)(sp,{question:Y,answer:m[Y.id],onAnswerChange:e=>ee(Y.id,e)}),"yes_no"===Y.type&&(0,wo.jsx)(op,{question:Y,answer:m[Y.id],onAnswerChange:e=>ee(Y.id,e)}),"fill_in_gaps"===Y.type&&(0,wo.jsx)(lp,{question:Y,answer:m[Y.id],onAnswerChange:e=>ee(Y.id,e)}),"drag_order"===Y.type&&(0,wo.jsx)(up,{question:Y,answer:m[Y.id],onAnswerChange:e=>ee(Y.id,e)}),"matching"===Y.type&&(0,wo.jsx)(hp,{question:Y,answer:m[Y.id],onAnswerChange:e=>ee(Y.id,e)}),"short_answer"===Y.type&&(0,wo.jsx)(cp,{question:Y,answer:m[Y.id],onAnswerChange:e=>ee(Y.id,e)}),"scenario"===Y.type&&(0,wo.jsx)(dp,{question:Y,answer:m[Y.id],onAnswerChange:e=>ee(Y.id,e)})]})]}),(0,wo.jsx)("div",{className:"burando-card border-t-4 border-t-burando-teal",children:(0,wo.jsxs)("div",{className:"burando-card-body py-6",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-center mb-6 space-x-4",children:[$(null===Y||void 0===Y?void 0:Y.type)&&T&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-burando-teal bg-burando-teal/10 px-4 py-2 rounded-full border border-burando-teal/20",children:[(0,wo.jsx)("div",{className:"w-2 h-2 bg-burando-teal rounded-full animate-pulse"}),(0,wo.jsx)("span",{className:"font-medium",children:r("quiz:ui.auto_advance")})]}),Z()&&!T&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-600 bg-green-50 px-4 py-2 rounded-full border border-green-200",children:[(0,wo.jsx)(sd,{className:"h-4 w-4"}),(0,wo.jsx)("span",{className:"font-medium",children:r("quiz:ui.question_answered")})]}),!Z()&&(0,wo.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 bg-gray-50 px-4 py-2 rounded-full border border-gray-200",children:[(0,wo.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),(0,wo.jsx)("span",{children:r("quiz:ui.provide_answer")})]})]}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,wo.jsx)("div",{className:"flex items-center justify-center sm:hidden",children:(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:r("quiz:ui.question_progress")}),(0,wo.jsxs)("div",{className:"text-lg font-semibold text-burando-navy",children:[h+1," ",r("common:general.of")," ",X]})]})}),(0,wo.jsxs)("div",{className:"flex items-center justify-between flex-1",children:[(0,wo.jsxs)("button",{onClick:()=>{h>0&&p((e=>e-1))},disabled:0===h,className:"burando-btn burando-btn-outline disabled:opacity-50 disabled:cursor-not-allowed touch-target",children:[(0,wo.jsx)(ku,{className:"h-4 w-4 mr-2"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:r("common:buttons.previous")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Prev"})]}),(0,wo.jsxs)("div",{className:"hidden sm:flex items-center space-x-6",children:[(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:r("quiz:ui.question_progress")}),(0,wo.jsxs)("div",{className:"text-lg font-semibold text-burando-navy",children:[h+1," ",r("common:general.of")," ",X]})]}),(0,wo.jsxs)("button",{onClick:()=>{rn.success(r("common:success.saved"))},className:"burando-btn burando-btn-outline burando-btn-sm touch-target",title:r("quiz:ui.save_progress"),children:[(0,wo.jsx)(Jc,{className:"h-4 w-4 mr-2"}),r("common:buttons.save")]})]}),h===X-1?(0,wo.jsxs)("button",{onClick:re,disabled:!Z(),className:"burando-btn burando-btn-success burando-btn-lg disabled:opacity-50 disabled:cursor-not-allowed touch-target",children:[(0,wo.jsx)(Vh,{className:"h-5 w-5 mr-2"}),(0,wo.jsx)("span",{className:"hidden sm:inline",children:r("navigation.submit_quiz")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Submit"})]}):(0,wo.jsxs)("button",{onClick:()=>{T&&(clearTimeout(T),O(null)),te()},disabled:!Z(),className:"burando-btn burando-btn-primary burando-btn-lg disabled:opacity-50 disabled:cursor-not-allowed touch-target",children:[(0,wo.jsx)("span",{className:"hidden sm:inline",children:r("common:buttons.continue")}),(0,wo.jsx)("span",{className:"sm:hidden",children:"Next"}),(0,wo.jsx)(Gh,{className:"h-5 w-5 ml-2"})]})]}),(0,wo.jsx)("div",{className:"flex sm:hidden justify-center",children:(0,wo.jsxs)("button",{onClick:()=>{rn.success(r("common:success.saved"))},className:"burando-btn burando-btn-outline burando-btn-sm touch-target",title:r("quiz:ui.save_progress"),children:[(0,wo.jsx)(Jc,{className:"h-4 w-4 mr-2"}),r("common:buttons.save")]})})]})]})})]}),_&&(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,wo.jsx)(sd,{className:"h-16 w-16 text-burando-light-green mx-auto mb-6"}),(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-4",children:r("quiz:ui.quiz_completed_title")}),(0,wo.jsx)("p",{className:"burando-text-muted mb-8",children:r("quiz:ui.quiz_completed_message")}),(0,wo.jsxs)("div",{className:"space-x-4",children:[(0,wo.jsx)("button",{onClick:()=>c("/crew/training/".concat(l)),className:"burando-btn burando-btn-primary",children:r("quiz:ui.return_to_training")}),(0,wo.jsx)("button",{onClick:()=>c("/crew/dashboard"),className:"burando-btn burando-btn-outline",children:r("quiz:ui.go_to_dashboard")})]}),(0,wo.jsx)("div",{className:"mt-8 flex justify-center",children:(0,wo.jsx)(ep,{context:"quiz_completion",trigger:"auto",onFeedbackSubmitted:e=>{console.log("Quiz feedback submitted:",e)},className:"max-w-md"})})]})})]}):(0,wo.jsx)("div",{className:"space-y-6",children:(0,wo.jsx)("div",{className:"burando-card",children:(0,wo.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,wo.jsx)(hc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,wo.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-2",children:r("quiz:errors.not_found")}),(0,wo.jsx)("p",{className:"burando-text-muted",children:r("quiz:errors.not_available",{phase:l})})]})})});var ae,se},mp=dc("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),fp=dc("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),gp=()=>{const{user:e}=ko(),{t:t}=Ma("common"),{currentLanguage:n,languages:r,changeLanguage:a}=Co(),s=(0,Ie.useQueryClient)(),[o,l]=(0,i.useState)(n),{data:c,isLoading:d}=(0,Ie.useQuery)("crew-profile",Ts,{enabled:"crew"===(null===e||void 0===e?void 0:e.role),onSuccess:e=>{var t;null!==e&&void 0!==e&&null!==(t=e.user)&&void 0!==t&&t.preferredLanguage&&l(e.user.preferredLanguage)}}),u=null===c||void 0===c?void 0:c.user,h=(0,Ie.useMutation)((async e=>{const t=await fetch("/api/crew/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({preferredLanguage:e})});if(!t.ok)throw new Error("Failed to update language preference");return t.json()}),{onSuccess:async(e,n)=>{await a(n),s.invalidateQueries("crew-profile"),rn.success(t("profile.language_updated"))},onError:()=>{rn.error(t("profile.language_update_failed"))}});return d?(0,wo.jsx)(vc,{message:t("profile.loading_profile")}):"manager"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role)?(0,wo.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:(0,wo.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,wo.jsx)("div",{className:"mb-8",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,wo.jsx)("div",{className:"p-2 bg-blue-600 rounded-lg",children:(0,wo.jsx)(fc,{className:"h-6 w-6 text-white"})}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t("profile.title")}),(0,wo.jsx)("p",{className:"text-gray-600",children:"Management Profile & Preferences"})]})]})}),(0,wo.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,wo.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wo.jsx)("div",{className:"h-16 w-16 bg-white/20 rounded-full flex items-center justify-center",children:(0,wo.jsx)(Dc,{className:"h-8 w-8 text-white"})}),(0,wo.jsxs)("div",{className:"text-white",children:[(0,wo.jsxs)("h2",{className:"text-2xl font-bold",children:[e.firstName," ",e.lastName]}),(0,wo.jsxs)("p",{className:"text-blue-100 capitalize flex items-center",children:[(0,wo.jsx)(fc,{className:"h-4 w-4 mr-1"}),e.role]})]})]})}),(0,wo.jsx)("div",{className:"p-8",children:(0,wo.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,wo.jsx)(Dc,{className:"h-5 w-5 text-blue-600"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.personal_info")})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(Dc,{className:"h-5 w-5 text-gray-500"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.full_name")}),(0,wo.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[e.firstName," ",e.lastName]})]})]})}),(0,wo.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(uc,{className:"h-5 w-5 text-gray-500"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.email")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.email})]})]})}),(0,wo.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)(fc,{className:"h-5 w-5 text-gray-500"}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.role")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:e.role})]})]})})]})]}),(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,wo.jsx)(bc,{className:"h-5 w-5 text-blue-600"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.preferences")})]}),(0,wo.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,wo.jsx)(bc,{className:"inline h-4 w-4 mr-2 text-blue-600"}),t("profile.language_preference")]}),(0,wo.jsx)("select",{value:o,onChange:e=>{const t=e.target.value;l(t),a(t)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm",children:r.map((e=>(0,wo.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:t("profile.language_description")})]})]})]})})]})]})}):(0,wo.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:(0,wo.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,wo.jsx)("div",{className:"mb-8",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,wo.jsx)("div",{className:"p-2 bg-blue-600 rounded-lg",children:(0,wo.jsx)(cd,{className:"h-6 w-6 text-white"})}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t("profile.my_profile")}),(0,wo.jsx)("p",{className:"text-gray-600",children:t("profile.personal_information")})]})]})}),(0,wo.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,wo.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-8",children:(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsx)("div",{className:"h-24 w-24 bg-white/20 rounded-full flex items-center justify-center border-4 border-white/30",children:(0,wo.jsx)(Dc,{className:"h-12 w-12 text-white"})}),(0,wo.jsx)("button",{className:"absolute -bottom-1 -right-1 p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow",children:(0,wo.jsx)(Kh,{className:"h-4 w-4 text-gray-600"})})]}),(0,wo.jsxs)("div",{className:"text-white text-center sm:text-left",children:[(0,wo.jsxs)("h2",{className:"text-3xl font-bold",children:[null===u||void 0===u?void 0:u.firstName," ",null===u||void 0===u?void 0:u.lastName]}),(0,wo.jsxs)("p",{className:"text-blue-100 text-lg flex items-center justify-center sm:justify-start mt-1",children:[(0,wo.jsx)(gc,{className:"h-5 w-5 mr-2"}),null===u||void 0===u?void 0:u.position]}),(0,wo.jsx)("div",{className:"flex items-center justify-center sm:justify-start mt-2",children:(0,wo.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-500/20 text-green-100 border border-green-400/30":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-500/20 text-blue-100 border border-blue-400/30":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-500/20 text-yellow-100 border border-yellow-400/30":"bg-gray-500/20 text-gray-100 border border-gray-400/30"),children:[(0,wo.jsx)("div",{className:"h-2 w-2 rounded-full mr-2 ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-400":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-400":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-400":"bg-gray-400")}),null===u||void 0===u?void 0:u.status]})})]})]})}),(0,wo.jsxs)("div",{className:"p-8",children:[(0,wo.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(Dc,{className:"h-5 w-5 text-blue-600"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.personal_info")})]}),(0,wo.jsx)("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,wo.jsx)(mp,{className:"h-4 w-4"})})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,wo.jsx)(Dc,{className:"h-5 w-5 text-blue-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.full_name")}),(0,wo.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[null===u||void 0===u?void 0:u.firstName," ",null===u||void 0===u?void 0:u.lastName]})]})]})}),(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,wo.jsx)(uc,{className:"h-5 w-5 text-green-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.email")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===u||void 0===u?void 0:u.email})]})]})}),(null===u||void 0===u?void 0:u.contactPhone)&&(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,wo.jsx)(fp,{className:"h-5 w-5 text-purple-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.phone")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:u.contactPhone})]})]})})]})]}),(0,wo.jsxs)("div",{className:"space-y-6",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)(gc,{className:"h-5 w-5 text-blue-600"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.work_info")})]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,wo.jsx)(pu,{className:"h-4 w-4 text-yellow-500"}),(0,wo.jsx)("span",{className:"text-sm text-gray-600",children:"Maritime Professional"})]})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,wo.jsx)(Dc,{className:"h-5 w-5 text-blue-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.position")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===u||void 0===u?void 0:u.position})]})]})}),(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,wo.jsx)(gc,{className:"h-5 w-5 text-blue-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.vessel")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===u||void 0===u?void 0:u.vesselAssignment})]})]})}),(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,wo.jsx)(Uc,{className:"h-5 w-5 text-orange-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.boarding_date")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null!==u&&void 0!==u&&u.expectedBoardingDate?new Date(u.expectedBoardingDate).toLocaleDateString():t("common.not_set")})]})]})}),(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 rounded-lg ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-100":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-100":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-100":"bg-gray-100"),children:(0,wo.jsx)("div",{className:"h-5 w-5 rounded-full flex items-center justify-center ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-500":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-500":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-500":"bg-gray-500"),children:(0,wo.jsx)("div",{className:"h-2 w-2 bg-white rounded-full"})})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("common.status")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:null===u||void 0===u?void 0:u.status})]})]})})]})]})]}),(0,wo.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,wo.jsx)(bc,{className:"h-5 w-5 text-blue-600"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.preferences")})]}),(0,wo.jsx)("div",{className:"max-w-md",children:(0,wo.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[(0,wo.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,wo.jsx)(bc,{className:"inline h-4 w-4 mr-2 text-blue-600"}),t("profile.language_preference")]}),(0,wo.jsx)("select",{value:o,onChange:async e=>{const t=e.target.value;l(t),h.mutate(t)},disabled:h.isLoading,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:r.map((e=>(0,wo.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))}),(0,wo.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:t("profile.language_description")}),h.isLoading&&(0,wo.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,wo.jsxs)("p",{className:"text-sm text-blue-600",children:[t("profile.updating_language"),"..."]})]})]})})]}),((null===u||void 0===u?void 0:u.emergencyContactName)||(null===u||void 0===u?void 0:u.emergencyContactPhone))&&(0,wo.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,wo.jsx)(fc,{className:"h-5 w-5 text-red-600"}),(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.emergency_contact")})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(null===u||void 0===u?void 0:u.emergencyContactName)&&(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-lg border border-red-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,wo.jsx)(Dc,{className:"h-5 w-5 text-red-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.contact_name")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:u.emergencyContactName})]})]})}),(null===u||void 0===u?void 0:u.emergencyContactPhone)&&(0,wo.jsx)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-lg border border-red-200 hover:shadow-md transition-shadow",children:(0,wo.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wo.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,wo.jsx)(fp,{className:"h-5 w-5 text-red-600"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.contact_phone")}),(0,wo.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:u.emergencyContactPhone})]})]})})]})]})]})]})]})})};function vp(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var bp="function"===typeof Symbol&&Symbol.observable||"@@observable",yp=function(){return Math.random().toString(36).substring(7).split("").join(".")},xp={INIT:"@@redux/INIT"+yp(),REPLACE:"@@redux/REPLACE"+yp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yp()}};function wp(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _p(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(vp(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(vp(1));return n(_p)(e,t)}if("function"!==typeof e)throw new Error(vp(2));var i=e,a=t,s=[],o=s,l=!1;function c(){o===s&&(o=s.slice())}function d(){if(l)throw new Error(vp(3));return a}function u(e){if("function"!==typeof e)throw new Error(vp(4));if(l)throw new Error(vp(5));var t=!0;return c(),o.push(e),function(){if(t){if(l)throw new Error(vp(6));t=!1,c();var n=o.indexOf(e);o.splice(n,1),s=null}}}function h(e){if(!wp(e))throw new Error(vp(7));if("undefined"===typeof e.type)throw new Error(vp(8));if(l)throw new Error(vp(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=s=o,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:xp.INIT}),(r={dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(vp(10));i=e,h({type:xp.REPLACE})}})[bp]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(vp(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[bp]=function(){return this},e},r}function kp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if("undefined"!==typeof process&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;e=new Error(t.replace(/%s/g,(function(){return r[n++]}))),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function jp(e,t,n){return t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:n||null),e)}function Np(e){return"object"===typeof e}const Sp="dnd-core/INIT_COORDS",Ep="dnd-core/BEGIN_DRAG",Cp="dnd-core/PUBLISH_DRAG_SOURCE",Ap="dnd-core/HOVER",Tp="dnd-core/DROP",Op="dnd-core/END_DRAG";function Pp(e,t){return{type:Sp,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const Mp={type:Sp,payload:{clientOffset:null,sourceClientOffset:null}};function Dp(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0};const{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,s=e.getMonitor(),o=e.getRegistry();e.dispatch(Pp(i)),function(e,t,n){kp(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){kp(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,s,o);const l=function(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,s);if(null==l)return void e.dispatch(Mp);let c=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");!function(e){kp("function"===typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(a),c=a(l)}e.dispatch(Pp(i,c));const d=o.getSource(l).beginDrag(s,l);if(null==d)return;!function(e){kp(Np(e),"Item must be an object.")}(d),o.pinSource(l);const u=o.getSourceType(l);return{type:Ep,payload:{itemType:u,item:d,sourceId:l,clientOffset:i||null,sourceClientOffset:c||null,isSourcePublic:!!r}}}}function Rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Rp(e,t,n[t])}))}return e}function Ip(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.getMonitor(),r=e.getRegistry();!function(e){kp(e.isDragging(),"Cannot call drop while not dragging."),kp(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);const i=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);i.forEach(((i,a)=>{const s=function(e,t,n,r){const i=n.getTarget(e);let a=i?i.drop(r,e):void 0;(function(e){kp("undefined"===typeof e||Np(e),"Drop result must either be an object or undefined.")})(a),"undefined"===typeof a&&(a=0===t?{}:r.getDropResult());return a}(i,a,r,n),o={type:Tp,payload:{dropResult:Lp({},t,s)}};e.dispatch(o)}))}}function Fp(e){return function(){const t=e.getMonitor(),n=e.getRegistry();!function(e){kp(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const r=t.getSourceId();if(null!=r){n.getSource(r,!0).endDrag(t,r),n.unpinSource()}return{type:Op}}}function zp(e,t){return null===t?null===e:Array.isArray(e)?e.some((e=>e===t)):e===t}function qp(e){return function(t){let{clientOffset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e){kp(Array.isArray(e),"Expected targetIds to be an array.")}(t);const r=t.slice(0),i=e.getMonitor(),a=e.getRegistry();return function(e,t,n){for(let r=e.length-1;r>=0;r--){const i=e[r];zp(t.getTargetType(i),n)||e.splice(r,1)}}(r,a,i.getItemType()),function(e,t,n){kp(t.isDragging(),"Cannot call hover while not dragging."),kp(!t.didDrop(),"Cannot call hover after drop.");for(let r=0;r<e.length;r++){const t=e[r];kp(e.lastIndexOf(t)===r,"Expected targetIds to be unique in the passed array.");kp(n.getTarget(t),"Expected targetIds to be registered.")}}(r,i,a),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(r,i,a),{type:Ap,payload:{targetIds:r,clientOffset:n||null}}}}function Bp(e){return function(){if(e.getMonitor().isDragging())return{type:Cp}}}class Up{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const n=function(e){return{beginDrag:Dp(e),publishDragSource:Bp(e),hover:qp(e),drop:Ip(e),endDrag:Fp(e)}}(this);return Object.keys(n).reduce(((r,i)=>{const a=n[i];var s;return r[i]=(s=a,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const a=s.apply(e,r);"undefined"!==typeof a&&t(a)}),r}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function Wp(e,t){return{x:e.x-t.x,y:e.y-t.y}}const Hp=[],Vp=[];Hp.__IS_NONE__=!0,Vp.__IS_ALL__=!0;class Gp{subscribeToStateChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{handlerIds:n}=t;kp("function"===typeof e,"listener must be a function."),kp("undefined"===typeof n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;return this.store.subscribe((()=>{const t=this.store.getState(),i=t.stateId;try{const a=i===r||i===r+1&&!function(e,t){if(e===Hp)return!1;if(e===Vp||"undefined"===typeof t)return!0;const n=(r=e,t.filter((e=>r.indexOf(e)>-1)));var r;return n.length>0}(t.dirtyHandlerIds,n);a||e()}finally{r=i}}))}subscribeToOffsetChange(e){kp("function"===typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe((()=>{const n=this.store.getState().dragOffset;n!==t&&(t=n,e())}))}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return kp(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(kp(t,"Expected to find a valid target. targetId=".concat(e)),!this.isDragging()||this.didDrop())return!1;return zp(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(kp(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();if(i&&!zp(r,i))return!1;const a=this.getTargetIds();if(!a.length)return!1;const s=a.indexOf(e);return n?s===a.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return t&&n&&r?Wp(function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(t,r),n):null}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:n}=e;return t&&n?Wp(t,n):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const Qp="undefined"!==typeof global?global:self,Kp=Qp.MutationObserver||Qp.WebKitMutationObserver;function Yp(e){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}const Xp="function"===typeof Kp?function(e){let t=1;const n=new Kp(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:Yp;class Jp{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const $p=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Xp(this.flush),this.requestErrorThrow=Yp((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},Zp=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new Jp(this.onError,(e=>t[t.length]=e));return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}($p.registerPendingError);const em="dnd-core/ADD_SOURCE",tm="dnd-core/ADD_TARGET",nm="dnd-core/REMOVE_SOURCE",rm="dnd-core/REMOVE_TARGET";function im(e,t){t&&Array.isArray(e)?e.forEach((e=>im(e,!1))):kp("string"===typeof e||"symbol"===typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var am;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(am||(am={}));let sm=0;function om(e){const t=(sm++).toString();switch(e){case am.SOURCE:return"S".concat(t);case am.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function lm(e){switch(e[0]){case"S":return am.SOURCE;case"T":return am.TARGET;default:throw new Error("Cannot parse handler ID: ".concat(e))}}function cm(e,t){const n=e.entries();let r=!1;do{const{done:e,value:[,i]}=n.next();if(i===t)return!0;r=!!e}while(!r);return!1}class dm{addSource(e,t){im(e),function(e){kp("function"===typeof e.canDrag,"Expected canDrag to be a function."),kp("function"===typeof e.beginDrag,"Expected beginDrag to be a function."),kp("function"===typeof e.endDrag,"Expected endDrag to be a function.")}(t);const n=this.addHandler(am.SOURCE,e,t);return this.store.dispatch(function(e){return{type:em,payload:{sourceId:e}}}(n)),n}addTarget(e,t){im(e,!0),function(e){kp("function"===typeof e.canDrop,"Expected canDrop to be a function."),kp("function"===typeof e.hover,"Expected hover to be a function."),kp("function"===typeof e.drop,"Expected beginDrag to be a function.")}(t);const n=this.addHandler(am.TARGET,e,t);return this.store.dispatch(function(e){return{type:tm,payload:{targetId:e}}}(n)),n}containsHandler(e){return cm(this.dragSources,e)||cm(this.dropTargets,e)}getSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];kp(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return kp(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return kp(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return kp(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return lm(e)===am.SOURCE}isTargetId(e){return lm(e)===am.TARGET}removeSource(e){var t;kp(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:nm,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},$p.enqueueTask(Zp.create(t))}removeTarget(e){kp(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:rm,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);kp(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){kp(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=om(e);return this.types.set(r,t),e===am.SOURCE?this.dragSources.set(r,n):e===am.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const um=(e,t)=>e===t;function hm(){let e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Ap:break;case em:case tm:case rm:case nm:return Hp;default:return Vp}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,r=function(e,t){const n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);const i=[];return n.forEach(((e,t)=>{1===e&&i.push(t)})),i}(t,n),i=r.length>0||!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:um;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(t,n);if(!i)return Hp;const a=n[n.length-1],s=t[t.length-1];return a!==s&&(a&&r.push(a),s&&r.push(s)),r}function pm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mm={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function fm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mm,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case Sp:case Ep:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Ap:return r=e.clientOffset,i=n.clientOffset,!r&&!i||r&&i&&r.x===i.x&&r.y===i.y?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pm(e,t,n[t])}))}return e}({},e,{clientOffset:n.clientOffset});case Op:case Tp:return mm;default:return e}var r,i}function gm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gm(e,t,n[t])}))}return e}const bm={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function ym(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bm,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case Ep:return vm({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Cp:return vm({},e,{isSourcePublic:!0});case Ap:return vm({},e,{targetIds:n.targetIds});case rm:return-1===e.targetIds.indexOf(n.targetId)?e:vm({},e,{targetIds:(r=e.targetIds,i=n.targetId,r.filter((e=>e!==i)))});case Tp:return vm({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Op:return vm({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var r,i}function xm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case em:case tm:return e+1;case nm:case rm:return e-1;default:return e}}function wm(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function _m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function km(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_m(e,t,n[t])}))}return e}function jm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:hm(e.dirtyHandlerIds,{type:t.type,payload:km({},t.payload,{prevTargetIds:jp(e,"dragOperation.targetIds",[])})}),dragOffset:fm(e.dragOffset,t),refCount:xm(e.refCount,t),dragOperation:ym(e.dragOperation,t),stateId:wm(e.stateId)}}function Nm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e){const t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return _p(jm,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),i=new Gp(r,new dm(r)),a=new Up(r,i),s=e(a,t,n);return a.receiveBackend(s),a}const Sm=(0,i.createContext)({dragDropManager:void 0});function Em(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}let Cm=0;const Am=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Tm=(0,i.memo)((function(e){var{children:t}=e,n=Em(e,["children"]);const[r,a]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Om(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=t;i[Am]||(i[Am]={dragDropManager:Nm(e,t,n,r)});return i[Am]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(n);return(0,i.useEffect)((()=>{if(a){const e=Om();return++Cm,()=>{0===--Cm&&(e[Am]=null)}}}),[]),(0,wo.jsx)(Sm.Provider,{value:r,children:t})}));function Om(){return"undefined"!==typeof global?global:window}function Pm(e){let t=null;return()=>(null==t&&(t=e()),t)}class Mm{enter(e){const t=this.entered.length;return this.entered=function(e,t){const n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);const i=[];return n.forEach((e=>i.push(e))),i}(this.entered.filter((t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e)))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;var n,r;return this.entered=(n=this.entered.filter(this.isNodeInDocument),r=e,n.filter((e=>e!==r))),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Dm{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn("Browser doesn't allow reading \"".concat(e,'" until the drop event.')),null)})}))}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach((n=>{const r=this.config.exposeProperties[n];null!=r&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Rm="__NATIVE_FILE__",Lm="__NATIVE_URL__",Im="__NATIVE_TEXT__",Fm="__NATIVE_HTML__";function zm(e,t,n){const r=t.reduce(((t,n)=>t||e.getData(n)),"");return null!=r?r:n}const qm={[Rm]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Fm]:{exposeProperties:{html:(e,t)=>zm(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Lm]:{exposeProperties:{urls:(e,t)=>zm(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Im]:{exposeProperties:{text:(e,t)=>zm(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Bm(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(qm).filter((e=>{const n=qm[e];return!!(null===n||void 0===n?void 0:n.matchesTypes)&&n.matchesTypes.some((e=>t.indexOf(e)>-1))}))[0]||null}const Um=Pm((()=>/firefox/i.test(navigator.userAgent))),Wm=Pm((()=>Boolean(window.safari)));class Hm{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:i,c3s:a}=this;let s=t.length-1;if(e===t[s])return n[s];let o,l=0,c=a.length-1;for(;l<=c;){o=Math.floor(.5*(l+c));const r=t[o];if(r<e)l=o+1;else{if(!(r>e))return n[o];c=o-1}}s=Math.max(0,c);const d=e-t[s],u=d*d;return n[s]+r[s]*d+i[s]*u+a[s]*d*u}constructor(e,t){const{length:n}=e,r=[];for(let p=0;p<n;p++)r.push(p);r.sort(((t,n)=>e[t]<e[n]?-1:1));const i=[],a=[],s=[];let o,l;for(let p=0;p<n-1;p++)o=e[p+1]-e[p],l=t[p+1]-t[p],a.push(o),i.push(l),s.push(l/o);const c=[s[0]];for(let p=0;p<a.length-1;p++){const e=s[p],t=s[p+1];if(e*t<=0)c.push(0);else{o=a[p];const n=a[p+1],r=o+n;c.push(3*r/((r+n)/e+(r+o)/t))}}c.push(s[s.length-1]);const d=[],u=[];let h;for(let p=0;p<c.length-1;p++){h=s[p];const e=c[p],t=1/a[p],n=e+c[p+1]-h-h;d.push((h-e-n)*t),u.push(n*t*t)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=d,this.c3s=u}}function Vm(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return null;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function Gm(e){return{x:e.clientX,y:e.clientY}}function Qm(e,t,n,r,i){const a=function(e){var t;return"IMG"===e.nodeName&&(Um()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),s=Vm(a?e:t),o={x:n.x-s.x,y:n.y-s.y},{offsetWidth:l,offsetHeight:c}=e,{anchorX:d,anchorY:u}=r,{dragPreviewWidth:h,dragPreviewHeight:p}=function(e,t,n,r){let i=e?t.width:n,a=e?t.height:r;return Wm()&&e&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}(a,t,l,c),{offsetX:m,offsetY:f}=i,g=0===f||f;return{x:0===m||m?m:new Hm([0,.5,1],[o.x,o.x/l*h,o.x+h-l]).interpolate(d),y:g?f:(()=>{let e=new Hm([0,.5,1],[o.y,o.y/c*p,o.y+p-c]).interpolate(u);return Wm()&&a&&(e+=(window.devicePixelRatio-1)*p),e})()}}class Km{get window(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Ym(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ym(e,t,n[t])}))}return e}class Jm{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",i),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Xm({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return Xm({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(t).some((n=>t[n]===e))}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const n=qm[e];if(!n)throw new Error("native type ".concat(e," has no configuration"));const r=new Dm(n);return r.loadDataTransfer(t),r}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&Vm(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!==typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!==typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const n=Gm(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});const{dataTransfer:r}=e,i=Bm(r);if(this.monitor.isDragging()){if(r&&"function"===typeof r.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){const{anchorX:e,anchorY:a,offsetX:s,offsetY:o}=this.getCurrentSourcePreviewNodeOptions(),l=Qm(t,i,n,{anchorX:e,anchorY:a},{offsetX:s,offsetY:o});r.setDragImage(i,l.x,l.y)}}try{null===r||void 0===r||r.setData("application/json",{})}catch(a){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(i)this.beginDragNativeItem(i);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:n}=e,r=Bm(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:Gm(e)});t.some((e=>this.monitor.canDropOnTarget(e)))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=Gm(e),this.scheduleHover(t);(t||[]).some((e=>this.monitor.canDropOnTarget(e)))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):Bm(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:Gm(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Km(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Mm(this.isNodeInDocument)}}const $m=function(e,t,n){return new Jm(e,t,n)};var Zm=n(5355);const ef="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;function tf(e,t,n){const[r,a]=function(e,t,n){const[r,a]=(0,i.useState)((()=>t(e))),s=(0,i.useCallback)((()=>{const i=t(e);Zm(r,i)||(a(i),n&&n())}),[r,e,n]);return ef(s),[r,s]}(e,t,n);return ef((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(a,{handlerIds:[t]})}),[e,a]),r}function nf(e,t,n){return tf(t,e||(()=>({})),(()=>n.reconnect()))}function rf(e,t){const n=[...t||[]];return null==t&&"function"!==typeof e&&n.push(e),(0,i.useMemo)((()=>"function"===typeof e?e():e),n)}function af(e){return(0,i.useMemo)((()=>e.hooks.dropTarget()),[e])}function sf(e,t,n,r){let i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;const o=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<a.length;l++){const s=a[l];if(!o(s))return!1;const c=e[s],d=t[s];if(i=n?n.call(r,c,d,s):void 0,!1===i||void 0===i&&c!==d)return!1}return!0}function of(e){return null!==e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function lf(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,i.isValidElement)(t)){const r=t;return e(r,n),r}const r=t;!function(e){if("string"===typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}(r);return function(e,t){const n=e.ref;return kp("string"!==typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,i.cloneElement)(e,{ref:e=>{df(n,e),df(t,e)}}):(0,i.cloneElement)(e,{ref:t})}(r,n?t=>e(t,n):e)}}function cf(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const e=lf(r);t[n]=()=>e}})),t}function df(e,t){"function"===typeof e?e(t):e.current=t}class uf{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!sf(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=cf({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,of(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function hf(){const{dragDropManager:e}=(0,i.useContext)(Sm);return kp(null!=e,"Expected drag drop context"),e}let pf=!1;class mf{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;kp(!pf,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return pf=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{pf=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class ff{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function gf(e,t,n){const r=hf(),a=function(e,t){const n=(0,i.useMemo)((()=>new ff(e,t)),[t]);return(0,i.useEffect)((()=>{n.spec=e}),[e]),n}(e,t),s=function(e){const{accept:t}=e;return(0,i.useMemo)((()=>(kp(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);ef((function(){const[e,i]=function(e,t,n){const r=n.getRegistry(),i=r.addTarget(e,t);return[i,()=>r.removeTarget(i)]}(s,a,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),i}),[r,t,a,n,s.map((e=>e.toString())).join("|")])}function vf(e,t){const n=rf(e,t),r=function(){const e=hf();return(0,i.useMemo)((()=>new mf(e)),[e])}(),a=function(e){const t=hf(),n=(0,i.useMemo)((()=>new uf(t.getBackend())),[t]);return ef((()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget())),[e]),n}(n.options);return gf(n,r,a),[nf(n.collect,r,a),af(a)]}const bf={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let yf;const xf=new Uint8Array(16);const wf=[];for(let n=0;n<256;++n)wf.push((n+256).toString(16).slice(1));function _f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(wf[e[t+0]]+wf[e[t+1]]+wf[e[t+2]]+wf[e[t+3]]+"-"+wf[e[t+4]]+wf[e[t+5]]+"-"+wf[e[t+6]]+wf[e[t+7]]+"-"+wf[e[t+8]]+wf[e[t+9]]+"-"+wf[e[t+10]]+wf[e[t+11]]+wf[e[t+12]]+wf[e[t+13]]+wf[e[t+14]]+wf[e[t+15]]).toLowerCase()}const kf=function(e,t,n){var r,i,a,s;if(bf.randomUUID&&!t&&!e)return bf.randomUUID();const o=null!==(r=null!==(i=(e=e||{}).random)&&void 0!==i?i:null===(a=(s=e).rng)||void 0===a?void 0:a.call(s))&&void 0!==r?r:function(){if(!yf){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yf=crypto.getRandomValues.bind(crypto)}return yf(xf)}();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)t[n+e]=o[e];return t}return _f(o)},jf=(0,i.createContext)(),Nf="text",Sf="number",Ef="date",Cf="checkbox",Af="signature",Tf="image",Of="table",Pf="barcode",Mf="qr_code",Df={[Nf]:{fontSize:12,fontFamily:"Arial",color:"#000000",backgroundColor:"transparent",border:"none",textAlign:"left",placeholder:"Enter text..."},[Sf]:{fontSize:12,fontFamily:"Arial",color:"#000000",backgroundColor:"transparent",border:"1px solid #ccc",textAlign:"right",placeholder:"0"},[Ef]:{fontSize:12,fontFamily:"Arial",color:"#000000",backgroundColor:"transparent",border:"1px solid #ccc",format:"MM/DD/YYYY"},[Cf]:{size:16,color:"#000000",backgroundColor:"transparent",border:"1px solid #000"},[Af]:{width:200,height:60,border:"1px solid #000",backgroundColor:"transparent"}},Rf={template:{id:null,name:"Untitled Template",description:"",pageSize:"A4",orientation:"portrait",backgroundImage:null,fields:[],metadata:{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:1}},history:[],historyIndex:-1,isDirty:!1};function Lf(e,t){var n,r;switch(t.type){case"LOAD_TEMPLATE":return We(We({},e),{},{template:t.payload,history:[t.payload],historyIndex:0,isDirty:!1});case"IMPORT_TEMPLATE":const i=We(We({},t.payload),{},{id:e.template.id,metadata:We(We({},t.payload.metadata),{},{importedAt:(new Date).toISOString(),originalVersion:(null===(n=t.payload.metadata)||void 0===n?void 0:n.version)||1,version:((null===(r=e.template.metadata)||void 0===r?void 0:r.version)||0)+1})});return We(We({},e),{},{template:i,history:[...e.history.slice(0,e.historyIndex+1),i],historyIndex:e.historyIndex+1,isDirty:!0});case"ADD_FIELD":const a={id:kf(),type:t.payload.type,x:t.payload.x||50,y:t.payload.y||50,width:t.payload.width||100,height:t.payload.height||30,properties:We(We({},Df[t.payload.type]),t.payload.properties),dataBinding:t.payload.dataBinding||null},s=We(We({},e.template),{},{fields:[...e.template.fields,a],metadata:We(We({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return We(We({},e),{},{template:s,history:[...e.history.slice(0,e.historyIndex+1),s],historyIndex:e.historyIndex+1,isDirty:!0});case"UPDATE_FIELD":const o=We(We({},e.template),{},{fields:e.template.fields.map((e=>e.id===t.payload.id?We(We({},e),t.payload.updates):e)),metadata:We(We({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return We(We({},e),{},{template:o,history:[...e.history.slice(0,e.historyIndex+1),o],historyIndex:e.historyIndex+1,isDirty:!0});case"DELETE_FIELD":const l=We(We({},e.template),{},{fields:e.template.fields.filter((e=>e.id!==t.payload.id)),metadata:We(We({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return We(We({},e),{},{template:l,history:[...e.history.slice(0,e.historyIndex+1),l],historyIndex:e.historyIndex+1,isDirty:!0});case"DUPLICATE_FIELD":const c=e.template.fields.find((e=>e.id===t.payload.id));if(!c)return e;const d=We(We({},c),{},{id:kf(),x:c.x+20,y:c.y+20,properties:We({},c.properties)}),u=We(We({},e.template),{},{fields:[...e.template.fields,d],metadata:We(We({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return We(We({},e),{},{template:u,history:[...e.history.slice(0,e.historyIndex+1),u],historyIndex:e.historyIndex+1,isDirty:!0});case"SET_BACKGROUND_IMAGE":const h=We(We({},e.template),{},{backgroundImage:t.payload,metadata:We(We({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return We(We({},e),{},{template:h,history:[...e.history.slice(0,e.historyIndex+1),h],historyIndex:e.historyIndex+1,isDirty:!0});case"UPDATE_TEMPLATE_NAME":const p=We(We({},e.template),{},{name:t.payload,metadata:We(We({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return We(We({},e),{},{template:p,history:[...e.history.slice(0,e.historyIndex+1),p],historyIndex:e.historyIndex+1,isDirty:!0});case"UNDO":return e.historyIndex>0?We(We({},e),{},{template:e.history[e.historyIndex-1],historyIndex:e.historyIndex-1,isDirty:!0}):e;case"REDO":return e.historyIndex<e.history.length-1?We(We({},e),{},{template:e.history[e.historyIndex+1],historyIndex:e.historyIndex+1,isDirty:!0}):e;case"SAVE_TEMPLATE":return We(We({},e),{},{isDirty:!1,template:We(We({},e.template),{},{metadata:We(We({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})})});default:return e}}const If=e=>{let{children:t}=e;const[n,r]=(0,i.useReducer)(Lf,Rf),a=(0,i.useCallback)((e=>{r({type:"ADD_FIELD",payload:e})}),[]),s=(0,i.useCallback)(((e,t)=>{r({type:"UPDATE_FIELD",payload:{id:e,updates:t}})}),[]),o=(0,i.useCallback)((e=>{r({type:"DELETE_FIELD",payload:{id:e}})}),[]),l=(0,i.useCallback)((e=>{r({type:"DUPLICATE_FIELD",payload:{id:e}})}),[]),c=(0,i.useCallback)((e=>{e&&"string"===typeof e&&(e.startsWith("data:")||e.startsWith("http://")||e.startsWith("https://")||(e="data:application/pdf;base64,".concat(e))),r({type:"SET_BACKGROUND_IMAGE",payload:e})}),[]),d=(0,i.useCallback)((e=>{"string"===typeof e&&e.trim().length>0&&r({type:"UPDATE_TEMPLATE_NAME",payload:e.trim()})}),[]),u=(0,i.useCallback)((()=>{r({type:"UNDO"})}),[]),h=(0,i.useCallback)((()=>{r({type:"REDO"})}),[]),p=(0,i.useCallback)((e=>{const t=We(We({},n.template),{},{metadata:We(We({},n.template.metadata),{},{updatedAt:(new Date).toISOString()})});return t.backgroundImage&&"string"===typeof t.backgroundImage&&(t.backgroundImage.startsWith("data:")||t.backgroundImage.startsWith("http://")||t.backgroundImage.startsWith("https://")||(t.backgroundImage="data:application/pdf;base64,".concat(t.backgroundImage))),Array.isArray(t.fields)||(t.fields=[]),e&&(console.log("Saving template with background image:",!!t.backgroundImage),console.log("Number of fields:",t.fields.length),e(t)),r({type:"SAVE_TEMPLATE"}),t}),[n.template]),m=(0,i.useCallback)((e=>{e&&(e.backgroundImage&&"string"===typeof e.backgroundImage&&(e.backgroundImage.startsWith("data:")||e.backgroundImage.startsWith("http://")||e.backgroundImage.startsWith("https://")||(e.backgroundImage="data:application/pdf;base64,".concat(e.backgroundImage))),Array.isArray(e.fields)||(e.fields=[])),r({type:"LOAD_TEMPLATE",payload:e})}),[]),f=(0,i.useCallback)((e=>{r({type:"IMPORT_TEMPLATE",payload:e})}),[]),g={template:n.template,isDirty:n.isDirty,canUndo:n.historyIndex>0,canRedo:n.historyIndex<n.history.length-1,addField:a,updateField:s,deleteField:o,duplicateField:l,setBackgroundImage:c,updateTemplateName:d,undo:u,redo:h,saveTemplate:p,loadTemplate:m,importTemplate:f};return(0,wo.jsx)(jf.Provider,{value:g,children:t})},Ff=()=>{const e=(0,i.useContext)(jf);if(!e)throw new Error("useTemplate must be used within a TemplateProvider");return e};function zf(e){return(0,i.useMemo)((()=>e.hooks.dragSource()),[e])}function qf(e){return(0,i.useMemo)((()=>e.hooks.dragPreview()),[e])}class Bf{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(t?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!sf(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!sf(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=cf({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,of(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,of(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}let Uf=!1,Wf=!1;class Hf{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){kp(!Uf,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Uf=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Uf=!1}}isDragging(){if(!this.sourceId)return!1;kp(!Wf,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Wf=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Wf=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class Vf{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return n="object"===typeof e.item?e.item:"function"===typeof e.item?e.item(t):{},null!==n&&void 0!==n?n:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"===typeof e.canDrag?e.canDrag:"function"!==typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function Gf(e,t,n){const r=hf(),a=function(e,t,n){const r=(0,i.useMemo)((()=>new Vf(e,t,n)),[t,n]);return(0,i.useEffect)((()=>{r.spec=e}),[e]),r}(e,t,n),s=function(e){return(0,i.useMemo)((()=>{const t=e.type;return kp(null!=t,"spec.type must be defined"),t}),[e])}(e);ef((function(){if(null!=s){const[e,i]=function(e,t,n){const r=n.getRegistry(),i=r.addSource(e,t);return[i,()=>r.removeSource(i)]}(s,a,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),i}}),[r,t,n,a,s])}function Qf(e,t){const n=rf(e,t);kp(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=function(){const e=hf();return(0,i.useMemo)((()=>new Hf(e)),[e])}(),a=function(e,t){const n=hf(),r=(0,i.useMemo)((()=>new Bf(n.getBackend())),[n]);return ef((()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource())),[r,e]),ef((()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview())),[r,t]),r}(n.options,n.previewOptions);return Gf(n,r,a),[nf(n.collect,r,a),zf(a),qf(a)]}const Kf=e=>{let{field:t,isSelected:n,onSelect:r,onMove:a,onResize:s,onDragStart:o,onDragEnd:l}=e;const c=(0,i.useRef)(null),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[{isDragging:m},f]=Qf({type:"FIELD_MOVE",item:()=>({id:t.id,type:"field"}),collect:e=>({isDragging:e.isDragging()}),end:()=>{null===l||void 0===l||l()}});i.useEffect((()=>{m&&(null===o||void 0===o||o())}),[m,o]);const g=(0,i.useCallback)((e=>{if(e.target.classList.contains("resize-handle"))return;e.preventDefault(),e.stopPropagation(),r();const n=e.clientX,i=e.clientY,s=t.x,o=t.y;let c=!1;const d=e=>{const r=e.clientX-n,l=e.clientY-i;if(Math.abs(r)>1||Math.abs(l)>1){c=!0;const e=s+r,n=o+l;a(t.id,e,n,!0)}},u=()=>{c&&(null===l||void 0===l||l()),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)}),[t.id,t.x,t.y,r,a,l]),v=(0,i.useCallback)(((e,n)=>{e.preventDefault(),e.stopPropagation(),u(!0),p(n);const r=e.clientX,i=e.clientY,a=t.width,o=t.height,l=t.x,c=t.y,d=e=>{const d=e.clientX-r,u=e.clientY-i;let h=a,p=o,m=l,f=c;switch(n){case"se":h=a+d,p=o+u;break;case"sw":h=a-d,p=o+u,m=l+d;break;case"ne":h=a+d,p=o-u,f=c+u;break;case"nw":h=a-d,p=o-u,m=l+d,f=c+u;break;case"e":h=a+d;break;case"w":h=a-d,m=l+d;break;case"n":p=o-u,f=c+u;break;case"s":p=o+u}s(t.id,Math.max(20,h),Math.max(20,p),m,f)},h=()=>{u(!1),p(null),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",h)}),[t.id,t.width,t.height,t.x,t.y,s]);return f(c),(0,wo.jsxs)("div",{ref:c,className:"field-component ".concat(n?"selected":""," ").concat(m?"dragging":""),style:{position:"absolute",left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),cursor:d?"nw-resize":"move"},onMouseDown:g,onClick:e=>{e.stopPropagation(),d||r()},children:[(0,wo.jsx)("div",{className:"field-content",children:(()=>{const{properties:e}=t;switch(t.type){case Nf:return(0,wo.jsx)("input",{type:"text",placeholder:e.placeholder||"Text field",style:{fontSize:"".concat(e.fontSize,"px"),fontFamily:e.fontFamily,color:e.color,backgroundColor:e.backgroundColor,border:e.border,textAlign:e.textAlign,width:"100%",height:"100%",padding:"2px 4px",outline:"none"},readOnly:!0});case Sf:return(0,wo.jsx)("input",{type:"number",placeholder:e.placeholder||"0",style:{fontSize:"".concat(e.fontSize,"px"),fontFamily:e.fontFamily,color:e.color,backgroundColor:e.backgroundColor,border:e.border,textAlign:e.textAlign,width:"100%",height:"100%",padding:"2px 4px",outline:"none"},readOnly:!0});case Ef:return(0,wo.jsx)("input",{type:"date",style:{fontSize:"".concat(e.fontSize,"px"),fontFamily:e.fontFamily,color:e.color,backgroundColor:e.backgroundColor,border:e.border,width:"100%",height:"100%",padding:"2px 4px",outline:"none"},readOnly:!0});case Cf:return(0,wo.jsx)("input",{type:"checkbox",style:{width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),margin:"auto"},readOnly:!0});case Af:return(0,wo.jsx)("div",{style:{width:"100%",height:"100%",border:e.border,backgroundColor:e.backgroundColor,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:"Signature"});case Tf:return(0,wo.jsx)("div",{style:{width:"100%",height:"100%",border:"1px dashed #ccc",backgroundColor:"#f9f9f9",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:"Image"});default:return(0,wo.jsx)("div",{style:{width:"100%",height:"100%",border:"1px solid #ccc",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:t.type})}})()}),t.dataBinding&&(0,wo.jsx)("div",{className:"data-binding-indicator",title:"Bound to: ".concat(t.dataBinding),children:t.dataBinding}),n&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"resize-handle nw",onMouseDown:e=>v(e,"nw")}),(0,wo.jsx)("div",{className:"resize-handle ne",onMouseDown:e=>v(e,"ne")}),(0,wo.jsx)("div",{className:"resize-handle sw",onMouseDown:e=>v(e,"sw")}),(0,wo.jsx)("div",{className:"resize-handle se",onMouseDown:e=>v(e,"se")}),(0,wo.jsx)("div",{className:"resize-handle n",onMouseDown:e=>v(e,"n")}),(0,wo.jsx)("div",{className:"resize-handle s",onMouseDown:e=>v(e,"s")}),(0,wo.jsx)("div",{className:"resize-handle w",onMouseDown:e=>v(e,"w")}),(0,wo.jsx)("div",{className:"resize-handle e",onMouseDown:e=>v(e,"e")})]})]})},Yf=e=>{let{guides:t}=e;return t&&0!==t.length?(0,wo.jsx)("div",{className:"alignment-guides",children:t.map(((e,t)=>(0,wo.jsx)("div",{className:"alignment-guide ".concat(e.type),style:{["vertical"===e.type?"left":"top"]:"".concat(e.position,"px"),["vertical"===e.type?"top":"left"]:"".concat(e.start,"px"),["vertical"===e.type?"height":"width"]:"".concat(e.end-e.start,"px")}},t)))}):null},Xf=(0,i.forwardRef)(((e,t)=>{let{width:n,height:r,zoom:a,showGrid:s,snapToGrid:o,selectedField:l,onFieldSelect:c,onClick:d}=e;const{template:u,addField:h,updateField:p}=Ff(),[m,f]=(0,i.useState)(null),[g,v]=(0,i.useState)([]),b=(0,i.useRef)(null),y=(0,i.useCallback)((e=>o?10*Math.round(e/10):e),[o]),x=(0,i.useCallback)(((e,t)=>{const n=[];return t.forEach((t=>{t.id!==e.id&&(Math.abs(t.x-e.x)<5&&n.push({type:"vertical",position:t.x,start:Math.min(t.y,e.y),end:Math.max(t.y+t.height,e.y+e.height)}),Math.abs(t.x+t.width-(e.x+e.width))<5&&n.push({type:"vertical",position:t.x+t.width,start:Math.min(t.y,e.y),end:Math.max(t.y+t.height,e.y+e.height)}),Math.abs(t.y-e.y)<5&&n.push({type:"horizontal",position:t.y,start:Math.min(t.x,e.x),end:Math.max(t.x+t.width,e.x+e.width)}),Math.abs(t.y+t.height-(e.y+e.height))<5&&n.push({type:"horizontal",position:t.y+t.height,start:Math.min(t.x,e.x),end:Math.max(t.x+t.width,e.x+e.width)}))})),n}),[]),[{isOver:w},_]=vf((()=>({accept:"FIELD_TYPE",drop:(e,t)=>{const i=t.getClientOffset(),s=b.current.getBoundingClientRect(),o=y((i.x-s.left)/a),l=y((i.y-s.top)/a);h({type:e.fieldType,x:Math.max(0,Math.min(o,n-100)),y:Math.max(0,Math.min(l,r-30)),width:e.defaultWidth||100,height:e.defaultHeight||30,properties:e.defaultProperties||{}})},collect:e=>({isOver:e.isOver()})})),[y,a,n,r,h]),k=(0,i.useCallback)((function(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=u.fields.find((t=>t.id===e));if(!s)return;let o,l;a?(o=y(Math.max(0,Math.min(t,n-s.width))),l=y(Math.max(0,Math.min(i,r-s.height)))):(o=y(Math.max(0,Math.min(s.x+t,n-s.width))),l=y(Math.max(0,Math.min(s.y+i,r-s.height))));const c=We(We({},s),{},{x:o,y:l}),d=x(c,u.fields);v(d),p(e,{x:o,y:l})}),[u.fields,n,r,y,x,p]),j=(0,i.useCallback)(((e,t,i,a,s)=>{const o=u.fields.find((t=>t.id===e));if(!o)return;const l={};void 0!==a&&void 0!==s&&(l.x=y(Math.max(0,Math.min(a,n-t))),l.y=y(Math.max(0,Math.min(s,r-i)))),l.width=y(Math.max(20,Math.min(t,n-(l.x||o.x)))),l.height=y(Math.max(20,Math.min(i,r-(l.y||o.y)))),p(e,l)}),[n,r,y,p,u.fields]);return(0,i.useEffect)((()=>{m||v([])}),[m]),(0,i.useEffect)((()=>{console.log("\ud83d\uddbc\ufe0f TemplateCanvas: Background image debug:",{hasBackgroundImage:!!u.backgroundImage,backgroundImageUrl:u.backgroundImage,canvasWidth:n,canvasHeight:r})}),[u.backgroundImage,n,r]),(0,i.useEffect)((()=>{t&&(t.current=b.current)}),[t]),_(b),(0,wo.jsx)("div",{className:"template-canvas-container",style:{transform:"scale(".concat(a,")"),transformOrigin:"top left"},children:(0,wo.jsxs)("div",{ref:b,className:"template-canvas ".concat(w?"drop-target":""),style:{width:"".concat(n,"px"),height:"".concat(r,"px"),backgroundImage:u.backgroundImage?"url(".concat(u.backgroundImage,")"):"none",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:u.backgroundImage?"transparent":"white"},onClick:d,children:[s&&(0,wo.jsx)("div",{className:"grid-overlay",style:{backgroundImage:"\n                linear-gradient(to right, #e0e0e0 1px, transparent 1px),\n                linear-gradient(to bottom, #e0e0e0 1px, transparent 1px)\n              ",backgroundSize:"".concat(10,"px ").concat(10,"px")}}),(0,wo.jsx)(Yf,{guides:g}),(u.fields||[]).map((e=>(0,wo.jsx)(Kf,{field:e,isSelected:(null===l||void 0===l?void 0:l.id)===e.id,onSelect:()=>c(e),onMove:k,onResize:j,onDragStart:()=>f(e),onDragEnd:()=>f(null)},e.id))),w&&(0,wo.jsx)("div",{className:"drop-indicator",children:"Drop field here"})]})})}));Xf.displayName="TemplateCanvas";const Jf=Xf,$f=dc("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),Zf=dc("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),eg=dc("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),tg=dc("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),ng=dc("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),rg=dc("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),ig=dc("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ag={[Nf]:{label:"Text Field",icon:$f,description:"Single or multi-line text input",defaultWidth:150,defaultHeight:30,category:"basic"},[Sf]:{label:"Number Field",icon:Zf,description:"Numeric input with validation",defaultWidth:100,defaultHeight:30,category:"basic"},[Ef]:{label:"Date Field",icon:Uc,description:"Date picker with formatting",defaultWidth:120,defaultHeight:30,category:"basic"},[Cf]:{label:"Checkbox",icon:eg,description:"Boolean checkbox input",defaultWidth:20,defaultHeight:20,category:"basic"},[Af]:{label:"Signature",icon:tg,description:"Digital signature capture",defaultWidth:200,defaultHeight:60,category:"advanced"},[Tf]:{label:"Image",icon:Su,description:"Image placeholder or upload",defaultWidth:100,defaultHeight:100,category:"advanced"},[Of]:{label:"Table",icon:ng,description:"Dynamic data table",defaultWidth:300,defaultHeight:150,category:"advanced"},[Mf]:{label:"QR Code",icon:rg,description:"QR code generator",defaultWidth:80,defaultHeight:80,category:"advanced"},[Pf]:{label:"Barcode",icon:wc,description:"Barcode generator",defaultWidth:150,defaultHeight:40,category:"advanced"}},sg=e=>{let{fieldType:t,definition:n}=e;const[{isDragging:r},i]=Qf({type:"FIELD_TYPE",item:()=>({fieldType:t,defaultWidth:n.defaultWidth,defaultHeight:n.defaultHeight,defaultProperties:n.defaultProperties||{}}),collect:e=>({isDragging:e.isDragging()})}),a=n.icon;return(0,wo.jsxs)("div",{ref:i,className:"field-item ".concat(r?"dragging":""),title:n.description,children:[(0,wo.jsx)("div",{className:"field-icon",children:(0,wo.jsx)(a,{size:18})}),(0,wo.jsxs)("div",{className:"field-info",children:[(0,wo.jsx)("div",{className:"field-label",children:n.label}),(0,wo.jsx)("div",{className:"field-description",children:n.description})]})]})},og=e=>{let{dataSource:t}=e;const[n,r]=(0,i.useState)(!1);return t&&t.fields?(0,wo.jsxs)("div",{className:"toolbox-section",children:[(0,wo.jsxs)("div",{className:"section-header clickable",onClick:()=>r(!n),children:[n?(0,wo.jsx)(mc,{size:16}):(0,wo.jsx)(Hc,{size:16}),(0,wo.jsx)(ig,{size:16}),(0,wo.jsx)("span",{children:"Data Fields"})]}),n&&(0,wo.jsxs)("div",{className:"section-content",children:[(0,wo.jsx)("div",{className:"data-fields-hint",children:"Drag these fields to automatically bind to your data source"}),t.fields.map((e=>(0,wo.jsx)(sg,{fieldType:e.type||Nf,definition:{label:e.label||e.name,icon:lg(e.type),description:"Auto-bind to ".concat(e.name),defaultWidth:cg(e.type),defaultHeight:dg(e.type),defaultProperties:{dataBinding:e.name,placeholder:e.placeholder||e.label}}},"data-".concat(e.name))))]})]}):null},lg=e=>{switch(e){case"number":return Zf;case"date":return Uc;case"boolean":return eg;case"image":return Su;default:return $f}},cg=e=>{switch(e){case"number":case"image":return 100;case"date":return 120;case"boolean":return 20;default:return 150}},dg=e=>{switch(e){case"boolean":return 20;case"image":return 100;default:return 30}},ug=e=>{let{dataSource:t}=e;const[n,r]=(0,i.useState)({basic:!0,advanced:!1}),a=e=>{r((t=>We(We({},t),{},{[e]:!t[e]})))},s=Object.entries(ag).filter((e=>{let[t,n]=e;return"basic"===n.category})),o=Object.entries(ag).filter((e=>{let[t,n]=e;return"advanced"===n.category}));return(0,wo.jsxs)("div",{className:"field-toolbox",children:[(0,wo.jsxs)("div",{className:"toolbox-header",children:[(0,wo.jsx)("h3",{children:"Field Toolbox"}),(0,wo.jsx)("p",{children:"Drag fields onto the canvas"})]}),(0,wo.jsx)(og,{dataSource:t}),(0,wo.jsxs)("div",{className:"toolbox-section",children:[(0,wo.jsxs)("div",{className:"section-header clickable",onClick:()=>a("basic"),children:[n.basic?(0,wo.jsx)(mc,{size:16}):(0,wo.jsx)(Hc,{size:16}),(0,wo.jsx)("span",{children:"Basic Fields"})]}),n.basic&&(0,wo.jsx)("div",{className:"section-content",children:s.map((e=>{let[t,n]=e;return(0,wo.jsx)(sg,{fieldType:t,definition:n},t)}))})]}),(0,wo.jsxs)("div",{className:"toolbox-section",children:[(0,wo.jsxs)("div",{className:"section-header clickable",onClick:()=>a("advanced"),children:[n.advanced?(0,wo.jsx)(mc,{size:16}):(0,wo.jsx)(Hc,{size:16}),(0,wo.jsx)("span",{children:"Advanced Fields"})]}),n.advanced&&(0,wo.jsx)("div",{className:"section-content",children:o.map((e=>{let[t,n]=e;return(0,wo.jsx)(sg,{fieldType:t,definition:n},t)}))})]}),(0,wo.jsxs)("div",{className:"toolbox-tips",children:[(0,wo.jsx)("h4",{children:"Tips:"}),(0,wo.jsxs)("ul",{children:[(0,wo.jsx)("li",{children:"Drag fields from here to the canvas"}),(0,wo.jsx)("li",{children:"Use grid snap for perfect alignment"}),(0,wo.jsx)("li",{children:"Select fields to edit properties"}),(0,wo.jsx)("li",{children:"Import PDF as background template"})]})]})]})},hg=dc("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),pg=e=>{let{selectedField:t,onFieldUpdate:n}=e;const{updateField:r,deleteField:i,duplicateField:a}=Ff();if(!t)return(0,wo.jsxs)("div",{className:"property-panel",children:[(0,wo.jsx)("div",{className:"panel-header",children:(0,wo.jsx)("h3",{children:"Properties"})}),(0,wo.jsx)("div",{className:"no-selection",children:(0,wo.jsx)("p",{children:"Select a field to edit its properties"})})]});const s=(e,n)=>{r(t.id,{properties:We(We({},t.properties),{},{[e]:n})})},o=(e,n)=>{r(t.id,{[e]:parseFloat(n)||0})};return(0,wo.jsxs)("div",{className:"property-panel",children:[(0,wo.jsxs)("div",{className:"panel-header",children:[(0,wo.jsx)("h3",{children:"Properties"}),(0,wo.jsxs)("div",{className:"field-actions",children:[(0,wo.jsx)("button",{className:"action-btn",onClick:()=>{a(t.id)},title:"Duplicate Field",children:(0,wo.jsx)(hg,{size:14})}),(0,wo.jsx)("button",{className:"action-btn delete",onClick:()=>{window.confirm("Are you sure you want to delete this field?")&&(i(t.id),n&&n(null))},title:"Delete Field",children:(0,wo.jsx)(Oc,{size:14})})]})]}),(0,wo.jsxs)("div",{className:"panel-content",children:[(0,wo.jsxs)("div",{className:"property-section",children:[(0,wo.jsx)("h4",{children:"Field Info"}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Field Type"}),(0,wo.jsx)("input",{type:"text",value:t.type,readOnly:!0,className:"readonly"})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Field ID"}),(0,wo.jsx)("input",{type:"text",value:t.id,readOnly:!0,className:"readonly"})]})]}),(0,wo.jsxs)("div",{className:"property-section",children:[(0,wo.jsx)("h4",{children:"Position & Size"}),(0,wo.jsxs)("div",{className:"property-row",children:[(0,wo.jsxs)("div",{className:"property-group half",children:[(0,wo.jsx)("label",{children:"X Position"}),(0,wo.jsx)("input",{type:"number",value:t.x,onChange:e=>o("x",e.target.value),step:"1"})]}),(0,wo.jsxs)("div",{className:"property-group half",children:[(0,wo.jsx)("label",{children:"Y Position"}),(0,wo.jsx)("input",{type:"number",value:t.y,onChange:e=>o("y",e.target.value),step:"1"})]})]}),(0,wo.jsxs)("div",{className:"property-row",children:[(0,wo.jsxs)("div",{className:"property-group half",children:[(0,wo.jsx)("label",{children:"Width"}),(0,wo.jsx)("input",{type:"number",value:t.width,onChange:e=>o("width",e.target.value),min:"10",step:"1"})]}),(0,wo.jsxs)("div",{className:"property-group half",children:[(0,wo.jsx)("label",{children:"Height"}),(0,wo.jsx)("input",{type:"number",value:t.height,onChange:e=>o("height",e.target.value),min:"10",step:"1"})]})]})]}),(0,wo.jsxs)("div",{className:"property-section",children:[(0,wo.jsx)("h4",{children:"Appearance"}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Background Color"}),(0,wo.jsxs)("div",{className:"color-input",children:[(0,wo.jsx)("input",{type:"color",value:"transparent"!==t.properties.backgroundColor&&t.properties.backgroundColor?t.properties.backgroundColor:"#ffffff",onChange:e=>s("backgroundColor",e.target.value)}),(0,wo.jsx)("input",{type:"text",value:t.properties.backgroundColor||"transparent",onChange:e=>s("backgroundColor",e.target.value),placeholder:"transparent"})]})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Text Color"}),(0,wo.jsxs)("div",{className:"color-input",children:[(0,wo.jsx)("input",{type:"color",value:t.properties.color||"#000000",onChange:e=>s("color",e.target.value)}),(0,wo.jsx)("input",{type:"text",value:t.properties.color||"#000000",onChange:e=>s("color",e.target.value)})]})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Border"}),(0,wo.jsx)("input",{type:"text",value:t.properties.border||"none",onChange:e=>s("border",e.target.value),placeholder:"1px solid #000"})]})]}),(0,wo.jsxs)("div",{className:"property-section",children:[(0,wo.jsx)("h4",{children:"Data Binding"}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Data Source"}),(0,wo.jsx)("input",{type:"text",value:t.dataBinding||"",onChange:e=>r(t.id,{dataBinding:e.target.value}),placeholder:"e.g., user.firstName"})]})]}),(0,wo.jsxs)("div",{className:"property-section",children:[(0,wo.jsx)("h4",{children:"Field Properties"}),(()=>{const{properties:e}=t;switch(t.type){case Nf:return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Font Size"}),(0,wo.jsx)("input",{type:"number",value:e.fontSize||12,onChange:e=>s("fontSize",parseInt(e.target.value)),min:"8",max:"72"})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Font Family"}),(0,wo.jsxs)("select",{value:e.fontFamily||"Arial",onChange:e=>s("fontFamily",e.target.value),children:[(0,wo.jsx)("option",{value:"Arial",children:"Arial"}),(0,wo.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,wo.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,wo.jsx)("option",{value:"Courier New",children:"Courier New"})]})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Text Align"}),(0,wo.jsxs)("select",{value:e.textAlign||"left",onChange:e=>s("textAlign",e.target.value),children:[(0,wo.jsx)("option",{value:"left",children:"Left"}),(0,wo.jsx)("option",{value:"center",children:"Center"}),(0,wo.jsx)("option",{value:"right",children:"Right"})]})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Placeholder"}),(0,wo.jsx)("input",{type:"text",value:e.placeholder||"",onChange:e=>s("placeholder",e.target.value),placeholder:"Enter placeholder text"})]})]});case Sf:return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Font Size"}),(0,wo.jsx)("input",{type:"number",value:e.fontSize||12,onChange:e=>s("fontSize",parseInt(e.target.value)),min:"8",max:"72"})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Decimal Places"}),(0,wo.jsx)("input",{type:"number",value:e.decimalPlaces||0,onChange:e=>s("decimalPlaces",parseInt(e.target.value)),min:"0",max:"10"})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Min Value"}),(0,wo.jsx)("input",{type:"number",value:e.min||"",onChange:e=>s("min",e.target.value),placeholder:"No minimum"})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Max Value"}),(0,wo.jsx)("input",{type:"number",value:e.max||"",onChange:e=>s("max",e.target.value),placeholder:"No maximum"})]})]});case Ef:return(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Date Format"}),(0,wo.jsxs)("select",{value:e.format||"MM/DD/YYYY",onChange:e=>s("format",e.target.value),children:[(0,wo.jsx)("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),(0,wo.jsx)("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),(0,wo.jsx)("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"}),(0,wo.jsx)("option",{value:"DD MMM YYYY",children:"DD MMM YYYY"})]})]})});case Cf:return(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Size"}),(0,wo.jsx)("input",{type:"number",value:e.size||16,onChange:e=>s("size",parseInt(e.target.value)),min:"10",max:"50"})]}),(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Default Checked"}),(0,wo.jsx)("input",{type:"checkbox",checked:e.defaultChecked||!1,onChange:e=>s("defaultChecked",e.target.checked)})]})]});case Af:return(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsxs)("div",{className:"property-group",children:[(0,wo.jsx)("label",{children:"Signature Type"}),(0,wo.jsxs)("select",{value:e.signatureType||"draw",onChange:e=>s("signatureType",e.target.value),children:[(0,wo.jsx)("option",{value:"draw",children:"Draw"}),(0,wo.jsx)("option",{value:"type",children:"Type"}),(0,wo.jsx)("option",{value:"upload",children:"Upload"})]})]})});default:return null}})()]})]})]})},mg=dc("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),fg=dc("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),gg=dc("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),vg=dc("Magnet",[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]]),bg=dc("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),yg=dc("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),xg=dc("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),wg=dc("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),_g=e=>{let{onSave:t,autoSave:n=!1}=e;const{template:r,updateTemplateName:a,isDirty:s,saveTemplate:o}=Ff(),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(r.name),[h,p]=(0,i.useState)(""),[m,f]=(0,i.useState)(!1),[g,v]=(0,i.useState)(r.name),b=(0,i.useRef)(null),y=(0,Ie.useQueryClient)();(0,i.useEffect)((()=>{l||u(r.name)}),[r.name,l]),(0,i.useEffect)((()=>{l&&b.current&&(b.current.focus(),b.current.select())}),[l]);const x=async()=>{const e=d.trim();if(e)if(e.length>100)p("Template name must be less than 100 characters");else if(e!==r.name){v(r.name),f(!0);try{console.log("Renaming template from",r.name,"to",e),r.id&&(await Vs(r.id,e),console.log("Template renamed successfully via API")),a(e),c(!1),p(""),y.setQueryData("templates",(t=>t?t.map((t=>t.id===r.id?We(We({},t),{},{name:e,updated_at:(new Date).toISOString()}):t)):t)),y.invalidateQueries("templates"),rn.success("Template name updated successfully!")}catch(h){var t,n;console.error("Failed to rename template:",h),a(g),y.setQueryData("templates",(e=>e?e.map((e=>e.id===r.id?We(We({},e),{},{name:g}):e)):e));const i=(null===(t=h.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to update template name";rn.error(i),p(i),c(!0)}finally{f(!1)}}else c(!1);else p("Template name cannot be empty")},w=()=>{u(r.name),c(!1),p("")},_=e=>{"Enter"===e.key?(e.preventDefault(),x()):"Escape"===e.key&&(e.preventDefault(),w())},k=e=>{u(e.target.value),h&&p("")};return l?(0,wo.jsxs)("div",{className:"editable-template-name editing",children:[(0,wo.jsxs)("div",{className:"edit-container",children:[(0,wo.jsx)("input",{ref:b,type:"text",value:d,onChange:k,onKeyDown:_,className:"name-input ".concat(h?"error":""),placeholder:"Enter template name...",maxLength:100}),(0,wo.jsxs)("div",{className:"edit-actions",children:[(0,wo.jsx)("button",{className:"edit-btn save-btn",onClick:x,title:"Save name",disabled:!d.trim(),children:(0,wo.jsx)(Yh,{size:14})}),(0,wo.jsx)("button",{className:"edit-btn cancel-btn",onClick:w,title:"Cancel editing",children:(0,wo.jsx)(Mc,{size:14})})]})]}),h&&(0,wo.jsx)("div",{className:"error-message",children:h}),(0,wo.jsx)("div",{className:"edit-hint",children:"Press Enter to save, Escape to cancel"})]}):(0,wo.jsxs)("div",{className:"editable-template-name",children:[(0,wo.jsxs)("h2",{className:"template-name",onClick:()=>{c(!0),u(r.name),p("")},title:"Click to edit template name",children:[r.name,s&&(0,wo.jsx)("span",{className:"dirty-indicator",title:"Template has unsaved changes",children:"*"}),m?(0,wo.jsx)(Ec,{size:14,className:"edit-icon saving-icon"}):(0,wo.jsx)(wg,{size:14,className:"edit-icon"})]}),m&&(0,wo.jsxs)("div",{className:"saving-notice",children:[(0,wo.jsx)(Ec,{size:12,className:"saving-spinner"}),(0,wo.jsx)("span",{children:"Saving template name..."})]}),s&&!m&&(0,wo.jsxs)("div",{className:"unsaved-notice",children:[(0,wo.jsx)("span",{children:"Unsaved changes"}),t&&(0,wo.jsxs)("button",{className:"quick-save-btn",onClick:()=>t(o()),title:"Save template now",disabled:m,children:[(0,wo.jsx)(Jc,{size:12}),"Save now"]})]})]})};function kg(e,t,n){t||(t=[]);var r=t.length++;return Object.defineProperty({},"_",{set:function(i){t[r]=i,e.apply(n,t)}})}function jg(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ng(e,t){jg(e,t),t.add(e)}function Sg(e,t,n){jg(e,t),t.set(e,n)}function Eg(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Cg(e,t,n){return n(Eg(e,t))}function Ag(e,t){return e.get(Eg(e,t))}function Tg(e,t,n){return e.set(Eg(e,t),n),n}var Og,Pg,Mg,Dg,Rg,Lg,Ig,Fg,zg,qg,Bg,Ug,Wg={d:(e,t)=>{for(var n in t)Wg.o(t,n)&&!Wg.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},Hg=globalThis.pdfjsLib={};Wg.d(Hg,{AbortException:()=>nb,AnnotationEditorLayer:()=>bO,AnnotationEditorParamsType:()=>av,AnnotationEditorType:()=>iv,AnnotationEditorUIManager:()=>yx,AnnotationLayer:()=>EE,AnnotationMode:()=>rv,ColorPicker:()=>rA,DOMSVGFactory:()=>$N,DrawLayer:()=>TO,FeatureTest:()=>sb,GlobalWorkerOptions:()=>hk,ImageKind:()=>pv,InvalidPDFException:()=>$v,MissingPDFException:()=>Zv,OPS:()=>Fv,OutputScale:()=>Hb,PDFDataRangeTransport:()=>dN,PDFDateString:()=>Ib,PDFWorker:()=>_N,PasswordResponses:()=>zv,PermissionFlag:()=>sv,PixelsPerInch:()=>Nb,RenderingCancelledException:()=>Cb,TextLayer:()=>Bj,UnexpectedResponseException:()=>eb,Util:()=>lb,VerbosityLevel:()=>Iv,XfaLayer:()=>ZN,build:()=>QN,createValidAbsoluteUrl:()=>Qv,fetchData:()=>Sb,getDocument:()=>sN,getFilenameFromUrl:()=>Ob,getPdfFilenameFromUrl:()=>Pb,getXfaPageViewport:()=>zb,isDataScheme:()=>Ab,isPdfFile:()=>Tb,noContextMenu:()=>Rb,normalizeUnicode:()=>pb,setLayerDimensions:()=>Wb,shadow:()=>Kv,version:()=>GN});const Vg="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Gg=[1,0,0,1,0,0],Qg=[.001,0,0,.001,0,0],Kg=1.35,Yg=1,Xg=2,Jg=4,$g=16,Zg=32,ev=64,tv=128,nv=256,rv={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},iv={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},av={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},sv={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ov=0,lv=1,cv=2,dv=3,uv=3,hv=4,pv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},mv=1,fv=2,gv=3,vv=4,bv=5,yv=6,xv=7,wv=8,_v=9,kv=10,jv=11,Nv=12,Sv=13,Ev=14,Cv=15,Av=16,Tv=17,Ov=20,Pv=1,Mv=2,Dv=3,Rv=4,Lv=5,Iv={ERRORS:0,WARNINGS:1,INFOS:5},Fv={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},zv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let qv=Iv.WARNINGS;function Bv(e){Number.isInteger(e)&&(qv=e)}function Uv(){return qv}function Wv(e){qv>=Iv.INFOS&&console.log("Info: ".concat(e))}function Hv(e){qv>=Iv.WARNINGS&&console.log("Warning: ".concat(e))}function Vv(e){throw new Error(e)}function Gv(e,t){e||Vv(t)}function Qv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(r){}}const i=t?new URL(e,t):new URL(e);if(function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch(i){}return null}function Kv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const Yv=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class Xv extends Yv{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Jv extends Yv{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class $v extends Yv{constructor(e){super(e,"InvalidPDFException")}}class Zv extends Yv{constructor(e){super(e,"MissingPDFException")}}class eb extends Yv{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class tb extends Yv{constructor(e){super(e,"FormatError")}}class nb extends Yv{constructor(e){super(e,"AbortException")}}function rb(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||Vv("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let i=0;i<t;i+=n){const a=Math.min(i+n,t),s=e.subarray(i,a);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function ib(e){"string"!==typeof e&&Vv("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}function ab(e){const t=Object.create(null);for(const[n,r]of e)t[n]=r;return t}class sb{static get isLittleEndian(){return Kv(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return Kv(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return Kv(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){var e,t;return"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.platform)?Kv(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"===typeof(null===(t=navigator)||void 0===t?void 0:t.userAgent)&&navigator.userAgent.includes("Firefox")}):Kv(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Kv(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ob=Array.from(Array(256).keys(),(e=>e.toString(16).padStart(2,"0")));class lb{static makeHexColor(e,t,n){return"#".concat(ob[e]).concat(ob[t]).concat(ob[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],s=(n+a)/2,o=Math.sqrt((n+a)**2-4*(n*a-i*r))/2,l=s+o||1,c=s-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static bezierBoundingBox(e,t,n,r,i,a,s,o,l){return l?(l[0]=Math.min(l[0],e,s),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,s),l[3]=Math.max(l[3],t,o)):l=[Math.min(e,s),Math.min(t,o),Math.max(e,s),Math.max(t,o)],Eg(lb,this,db).call(this,e,n,i,s,t,r,a,o,3*(3*(n-i)-e+s),6*(e-2*n+i),3*(n-e),l),Eg(lb,this,db).call(this,e,n,i,s,t,r,a,o,3*(3*(r-a)-t+o),6*(t-2*r+a),3*(r-t),l),l}}function cb(e,t,n,r,i,a,s,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,p=d*(d*(d*e+3*l*t)+3*u*n)+h*r,m=d*(d*(d*i+3*l*a)+3*u*s)+h*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)}function db(e,t,n,r,i,a,s,o,l,c,d,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&Eg(Og,this,cb).call(this,e,t,n,r,i,a,s,o,-d/c,u));const h=c**2-4*d*l;if(h<0)return;const p=Math.sqrt(h),m=2*l;Eg(Og,this,cb).call(this,e,t,n,r,i,a,s,o,(-c+p)/m,u),Eg(Og,this,cb).call(this,e,t,n,r,i,a,s,o,(-c-p)/m,u)}Og=lb;let ub=null,hb=null;function pb(e){return ub||(ub=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,hb=new Map([["\ufb05","\u017ft"]])),e.replaceAll(ub,((e,t,n)=>t?t.normalize("NFKC"):hb.get(n)))}const mb="pdfjs_internal_id_",fb=0,gb=1,vb=2,bb=3,yb=4,xb=5,wb=6,_b=7,kb=8;const jb="http://www.w3.org/2000/svg";class Nb{}async function Sb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Db(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise(((n,r)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE)if(200!==i.status&&0!==i.status)r(new Error(i.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(i.response)}n(i.responseText)}},i.send(null)}))}Pg=Nb,Be(Nb,"CSS",96),Be(Nb,"PDF",72),Be(Nb,"PDF_TO_CSS_UNITS",Pg.CSS/Pg.PDF);class Eb{constructor(e){let{viewBox:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:s=!1}=e;this.viewBox=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,d,u,h,p,m,f,g;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,d=0,u=0,h=1;break;case 90:c=0,d=1,u=1,h=0;break;case 270:c=0,d=-1,u=-1,h=0;break;case 0:c=1,d=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(u=-u,h=-h),0===c?(p=Math.abs(l-t[1])*n+i,m=Math.abs(o-t[0])*n+a,f=(t[3]-t[1])*n,g=(t[2]-t[0])*n):(p=Math.abs(o-t[0])*n+i,m=Math.abs(l-t[1])*n+a,f=(t[2]-t[0])*n,g=(t[3]-t[1])*n),this.transform=[c*n,d*n,u*n,h*n,p-c*n*o-u*n*l,m-d*n*o-h*n*l],this.width=f,this.height=g}get rawDims(){const{viewBox:e}=this;return Kv(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Eb({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return lb.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=lb.applyTransform([e[0],e[1]],this.transform),n=lb.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return lb.applyInverseTransform([e,t],this.transform)}}class Cb extends Yv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Ab(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function Tb(e){return"string"===typeof e&&/\.pdf$/i.test(e)}function Ob(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function Pb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Ab(e))return Hv('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let i=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch(a){}return i||t}class Mb{constructor(){Be(this,"started",Object.create(null)),Be(this,"times",[])}time(e){e in this.started&&Hv("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||Hv("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push("".concat(n.padEnd(t)," ").concat(i-r,"ms\n"));return e.join("")}}function Db(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch(n){return!1}}function Rb(e){e.preventDefault()}function Lb(e){console.log("Deprecated API usage: "+e)}class Ib{static toDateObject(e){if(!e||"string"!==typeof e)return null;Eg(Ib,this,Fb)._||(Fb._=Eg(Ib,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=Eg(Ib,this,Fb)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(a+=c,s+=d):"+"===l&&(a-=c,s-=d),new Date(Date.UTC(n,r,i,a,s,o))}}var Fb={_:void 0};function zb(e,t){let{scale:n=1,rotation:r=0}=t;const{width:i,height:a}=e.attributes.style,s=[0,0,parseInt(i),parseInt(a)];return new Eb({viewBox:s,scale:n,rotation:r})}function qb(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):(Hv('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Bb(e){const{a:t,b:n,c:r,d:i,e:a,f:s}=e.getTransform();return[t,n,r,i,a,s]}function Ub(e){const{a:t,b:n,c:r,d:i,e:a,f:s}=e.getTransform().invertSelf();return[t,n,r,i,a,s]}function Wb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Eb){const{pageWidth:r,pageHeight:i}=t.rawDims,{style:a}=e,s=sb.isCSSRoundSupported,o="var(--scale-factor) * ".concat(r,"px"),l="var(--scale-factor) * ".concat(i,"px"),c=s?"round(down, ".concat(o,", var(--scale-round-x, 1px))"):"calc(".concat(o,")"),d=s?"round(down, ".concat(l,", var(--scale-round-y, 1px))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(a.width=d,a.height=c):(a.width=c,a.height=d)}r&&e.setAttribute("data-main-rotation",t.rotation)}class Hb{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}var Vb=new WeakMap,Gb=new WeakMap,Qb=new WeakMap,Kb=new WeakMap,Yb=new WeakMap,Xb=new WeakSet;class Jb{constructor(e){Ng(this,Xb),Sg(this,Vb,null),Sg(this,Gb,null),Sg(this,Qb,void 0),Sg(this,Kb,null),Sg(this,Yb,null),Tg(Qb,this,e),iy._||(iy._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=Tg(Vb,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=Ag(Qb,this)._uiManager._signal;e.addEventListener("contextmenu",Rb,{signal:t}),e.addEventListener("pointerdown",$b,{signal:t});const n=Tg(Kb,this,document.createElement("div"));n.className="buttons",e.append(n);const r=Ag(Qb,this).toolbarPosition;if(r){const{style:t}=e,n="ltr"===Ag(Qb,this)._uiManager.direction?1-r[0]:r[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*r[1],"% + var(--editor-toolbar-vert-offset))")}return Eg(Xb,this,ny).call(this),e}get div(){return Ag(Vb,this)}hide(){var e;Ag(Vb,this).classList.add("hidden"),null===(e=Ag(Gb,this))||void 0===e||e.hideDropdown()}show(){var e;Ag(Vb,this).classList.remove("hidden"),null===(e=Ag(Yb,this))||void 0===e||e.shown()}async addAltText(e){const t=await e.render();Eg(Xb,this,ty).call(this,t),Ag(Kb,this).prepend(t,Cg(Xb,this,ry)),Tg(Yb,this,e)}addColorPicker(e){Tg(Gb,this,e);const t=e.renderButton();Eg(Xb,this,ty).call(this,t),Ag(Kb,this).prepend(t,Cg(Xb,this,ry))}remove(){var e;Ag(Vb,this).remove(),null===(e=Ag(Gb,this))||void 0===e||e.destroy(),Tg(Gb,this,null)}}function $b(e){e.stopPropagation()}function Zb(e){Ag(Qb,this)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}function ey(e){Ag(Qb,this)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}function ty(e){const t=Ag(Qb,this)._uiManager._signal;e.addEventListener("focusin",Eg(Xb,this,Zb).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",Eg(Xb,this,ey).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Rb,{signal:t})}function ny(){const{editorType:e,_uiManager:t}=Ag(Qb,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",iy._[e]),Eg(Xb,this,ty).call(this,n),n.addEventListener("click",(e=>{t.delete()}),{signal:t._signal}),Ag(Kb,this).append(n)}function ry(e){const t=document.createElement("div");return t.className="divider",t}var iy={_:null},ay=new WeakMap,sy=new WeakMap,oy=new WeakMap,ly=new WeakSet;class cy{constructor(e){Ng(this,ly),Sg(this,ay,null),Sg(this,sy,null),Sg(this,oy,void 0),Tg(oy,this,e)}show(e,t,n){const[r,i]=Eg(ly,this,uy).call(this,t,n),{style:a}=Ag(sy,this)||Tg(sy,this,Eg(ly,this,dy).call(this));e.append(Ag(sy,this)),a.insetInlineEnd="".concat(100*r,"%"),a.top="calc(".concat(100*i,"% + var(--editor-toolbar-vert-offset))")}hide(){Ag(sy,this).remove()}}function dy(){const e=Tg(sy,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Rb,{signal:Ag(oy,this)._signal});const t=Tg(ay,this,document.createElement("div"));return t.className="buttons",e.append(t),Eg(ly,this,hy).call(this),e}function uy(e,t){let n=0,r=0;for(const i of e){const e=i.y+i.height;if(e<n)continue;const a=i.x+(t?i.width:0);e>n?(r=a,n=e):t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]}function hy(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=Ag(oy,this)._signal;e.addEventListener("contextmenu",Rb,{signal:n}),e.addEventListener("click",(()=>{Ag(oy,this).highlightSelection("floating_button")}),{signal:n}),Ag(ay,this).append(e)}function py(e,t,n){for(const r of n)t.addEventListener(r,e[r].bind(e))}var my=new WeakMap;class fy{constructor(){Sg(this,my,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((Tg(my,this,(e=Ag(my,this),t=e++,e)),t))}}var gy=new WeakMap,vy=new WeakMap,by=new WeakMap,yy=new WeakSet;class xy{constructor(){Ng(this,yy),Sg(this,gy,function(){var e,t;if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.randomUUID))return crypto.randomUUID();const n=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.getRandomValues))crypto.getRandomValues(n);else for(let r=0;r<32;r++)n[r]=Math.floor(255*Math.random());return rb(n)}()),Sg(this,vy,0),Sg(this,by,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Kv(this,"_isSVGFittingCanvas",t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]))))}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return Eg(yy,this,wy).call(this,"".concat(t,"_").concat(n,"_").concat(r,"_").concat(i),e)}async getFromUrl(e){return Eg(yy,this,wy).call(this,e,e)}async getFromBlob(e,t){const n=await t;return Eg(yy,this,wy).call(this,e,n)}async getFromId(e){Ag(by,this)||Tg(by,this,new Map);const t=Ag(by,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,r,i;Ag(by,this)||Tg(by,this,new Map);let a=Ag(by,this).get(e);if(null!==(i=a)&&void 0!==i&&i.bitmap)return a.refCounter+=1,a;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),a={bitmap:s.transferToImageBitmap(),id:"image_".concat(Ag(gy,this),"_").concat((Tg(vy,this,(n=Ag(vy,this),r=n++,n)),r)),refCounter:1,isSvg:!1},Ag(by,this).set(e,a),Ag(by,this).set(a.id,a),a}getSvgUrl(e){const t=Ag(by,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;Ag(by,this)||Tg(by,this,new Map);const n=Ag(by,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:r}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(r.width,r.height);e.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=e.convertToBlob()}null===(t=r.close)||void 0===t||t.call(r),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(Ag(gy,this),"_"))}}async function wy(e,t){var n;Ag(by,this)||Tg(by,this,new Map);let r=Ag(by,this).get(e);if(null===r)return null;if(null!==(n=r)&&void 0!==n&&n.bitmap)return r.refCounter+=1,r;try{var i,a;let e;if(r||(r={bitmap:null,id:"image_".concat(Ag(gy,this),"_").concat((Tg(vy,this,(i=Ag(vy,this),a=i++,i)),a)),refCounter:0,isSvg:!1}),"string"===typeof t?(r.url=t,e=await Sb(t,"blob")):t instanceof File?e=r.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=Mg._isSVGFittingCanvas,n=new FileReader,i=new Image,a=new Promise(((e,a)=>{i.onload=()=>{r.bitmap=i,r.isSvg=!0,e()},n.onload=async()=>{const e=r.svgUrl=n.result;i.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},i.onerror=n.onerror=a}));n.readAsDataURL(e),await a}else r.bitmap=await createImageBitmap(e);r.refCounter=1}catch(He){console.error(He),r=null}return Ag(by,this).set(e,r),r&&Ag(by,this).set(r.id,r),r}Mg=xy;var _y=new WeakMap,ky=new WeakMap,jy=new WeakMap,Ny=new WeakMap;class Sy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;Sg(this,_y,[]),Sg(this,ky,!1),Sg(this,jy,void 0),Sg(this,Ny,-1),Tg(jy,this,e)}add(e){let{cmd:t,undo:n,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}=e;if(i&&t(),Ag(ky,this))return;const l={cmd:t,undo:n,post:r,type:a};if(-1===Ag(Ny,this))return Ag(_y,this).length>0&&(Ag(_y,this).length=0),Tg(Ny,this,0),void Ag(_y,this).push(l);if(s&&Ag(_y,this)[Ag(Ny,this)].type===a)return o&&(l.undo=Ag(_y,this)[Ag(Ny,this)].undo),void(Ag(_y,this)[Ag(Ny,this)]=l);const c=Ag(Ny,this)+1;c===Ag(jy,this)?Ag(_y,this).splice(0,1):(Tg(Ny,this,c),c<Ag(_y,this).length&&Ag(_y,this).splice(c)),Ag(_y,this).push(l)}undo(){if(-1===Ag(Ny,this))return;Tg(ky,this,!0);const{undo:e,post:t}=Ag(_y,this)[Ag(Ny,this)];e(),null===t||void 0===t||t(),Tg(ky,this,!1),Tg(Ny,this,Ag(Ny,this)-1)}redo(){if(Ag(Ny,this)<Ag(_y,this).length-1){Tg(Ny,this,Ag(Ny,this)+1),Tg(ky,this,!0);const{cmd:e,post:t}=Ag(_y,this)[Ag(Ny,this)];e(),null===t||void 0===t||t(),Tg(ky,this,!1)}}hasSomethingToUndo(){return-1!==Ag(Ny,this)}hasSomethingToRedo(){return Ag(Ny,this)<Ag(_y,this).length-1}destroy(){Tg(_y,this,null)}}var Ey=new WeakSet;class Cy{constructor(e){Ng(this,Ey),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=sb.platform;for(const[n,r,i={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(Eg(Ey,this,Ay).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:s=null}}=n;s&&!s(e,t)||(r.bind(e,...a,t)(),i||(t.stopPropagation(),t.preventDefault()))}}function Ay(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class Ty{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const r=window.getComputedStyle(t).color;e.set(n,qb(r))}t.remove()}(e),Kv(this,"_colors",e)}convert(e){const t=qb(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every(((e,n)=>e===t[n])))return Ty._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?lb.makeHexColor(...t):e}}Be(Ty,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Oy=new WeakMap,Py=new WeakMap,My=new WeakMap,Dy=new WeakMap,Ry=new WeakMap,Ly=new WeakMap,Iy=new WeakMap,Fy=new WeakMap,zy=new WeakMap,qy=new WeakMap,By=new WeakMap,Uy=new WeakMap,Wy=new WeakMap,Hy=new WeakMap,Vy=new WeakMap,Gy=new WeakMap,Qy=new WeakMap,Ky=new WeakMap,Yy=new WeakMap,Xy=new WeakMap,Jy=new WeakMap,$y=new WeakMap,Zy=new WeakMap,ex=new WeakMap,tx=new WeakMap,nx=new WeakMap,rx=new WeakMap,ix=new WeakMap,ax=new WeakMap,sx=new WeakMap,ox=new WeakMap,lx=new WeakMap,cx=new WeakMap,dx=new WeakMap,ux=new WeakMap,hx=new WeakMap,px=new WeakMap,mx=new WeakMap,fx=new WeakMap,gx=new WeakMap,vx=new WeakMap,bx=new WeakSet;class yx{static get _keyboardManager(){const e=yx.prototype,t=e=>Ag(fx,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Kv(this,"_keyboardManager",new Cy([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Ag(fx,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Ag(fx,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}constructor(e,t,n,r,i,a,s,o,l,c,d){Ng(this,bx),Sg(this,Oy,new AbortController),Sg(this,Py,null),Sg(this,My,new Map),Sg(this,Dy,new Map),Sg(this,Ry,null),Sg(this,Ly,null),Sg(this,Iy,null),Sg(this,Fy,new Sy),Sg(this,zy,null),Sg(this,qy,0),Sg(this,By,new Set),Sg(this,Uy,null),Sg(this,Wy,null),Sg(this,Hy,new Set),Sg(this,Vy,!1),Sg(this,Gy,!1),Sg(this,Qy,!1),Sg(this,Ky,null),Sg(this,Yy,null),Sg(this,Xy,null),Sg(this,Jy,null),Sg(this,$y,!1),Sg(this,Zy,null),Sg(this,ex,new fy),Sg(this,tx,!1),Sg(this,nx,!1),Sg(this,rx,null),Sg(this,ix,null),Sg(this,ax,null),Sg(this,sx,null),Sg(this,ox,iv.NONE),Sg(this,lx,new Set),Sg(this,cx,null),Sg(this,dx,null),Sg(this,ux,null),Sg(this,hx,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Sg(this,px,[0,0]),Sg(this,mx,null),Sg(this,fx,null),Sg(this,gx,null),Sg(this,vx,null);const u=this._signal=Ag(Oy,this).signal;Tg(fx,this,e),Tg(gx,this,t),Tg(Ry,this,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:u}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:u}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:u}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:u}),r._on("setpreference",this.onSetPreference.bind(this),{signal:u}),r._on("switchannotationeditorparams",(e=>this.updateParams(e.type,e.value)),{signal:u}),Eg(bx,this,Nx).call(this),Eg(bx,this,Px).call(this),Eg(bx,this,Cx).call(this),Tg(Ly,this,i.annotationStorage),Tg(Ky,this,i.filterFactory),Tg(dx,this,a),Tg(Jy,this,s||null),Tg(Vy,this,o),Tg(Gy,this,l),Tg(Qy,this,c),Tg(sx,this,d||null),this.viewParameters={realScale:Nb.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){var e,t,n,r;null===(e=Ag(vx,this))||void 0===e||e.resolve(),Tg(vx,this,null),null===(t=Ag(Oy,this))||void 0===t||t.abort(),Tg(Oy,this,null),this._signal=null;for(const i of Ag(Dy,this).values())i.destroy();Ag(Dy,this).clear(),Ag(My,this).clear(),Ag(Hy,this).clear(),Tg(Py,this,null),Ag(lx,this).clear(),Ag(Fy,this).destroy(),null===(n=Ag(Ry,this))||void 0===n||n.destroy(),null===(r=Ag(Zy,this))||void 0===r||r.hide(),Tg(Zy,this,null),Ag(Yy,this)&&(clearTimeout(Ag(Yy,this)),Tg(Yy,this,null)),Ag(mx,this)&&(clearTimeout(Ag(mx,this)),Tg(mx,this,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return Ag(sx,this)}get useNewAltTextFlow(){return Ag(Gy,this)}get useNewAltTextWhenAddingImage(){return Ag(Qy,this)}get hcmFilter(){return Kv(this,"hcmFilter",Ag(dx,this)?Ag(Ky,this).addHCMFilter(Ag(dx,this).foreground,Ag(dx,this).background):"none")}get direction(){return Kv(this,"direction",getComputedStyle(Ag(fx,this)).direction)}get highlightColors(){return Kv(this,"highlightColors",Ag(Jy,this)?new Map(Ag(Jy,this).split(",").map((e=>e.split("=").map((e=>e.trim()))))):null)}get highlightColorNames(){return Kv(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(e=>e.reverse()))):null)}setMainHighlightColorPicker(e){Tg(ax,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=Ag(Ry,this))||void 0===t||t.editAltText(this,e,n)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)Tg(Qy,this,n)}onPageChanging(e){let{pageNumber:t}=e;Tg(qy,this,t-1)}focusMainContainer(){Ag(fx,this).focus()}findParent(e,t){for(const n of Ag(Dy,this).values()){const{x:r,y:i,width:a,height:s}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+s)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ag(gx,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){Ag(Hy,this).add(e)}removeShouldRescale(e){Ag(Hy,this).delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*Nb.PDF_TO_CSS_UNITS;for(const n of Ag(Hy,this))n.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}=t,s=t.toString(),o=Eg(bx,this,xx).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;t.empty();const c=Eg(bx,this,wx).call(this,o),d=Ag(ox,this)===iv.NONE,u=()=>{null===c||void 0===c||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a,text:s}),d&&this.showAllEditors("highlight",!0,!0)};d?this.switchToMode(iv.HIGHLIGHT,u):u()}addToAnnotationStorage(e){e.isEmpty()||!Ag(Ly,this)||Ag(Ly,this).has(e.id)||Ag(Ly,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,Ag($y,this)&&(Tg($y,this,!1),Eg(bx,this,jx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of Ag(lx,this))if(t.div.contains(e)){Tg(ix,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!Ag(ix,this))return;const[e,t]=Ag(ix,this);Tg(ix,this,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),t.focus()}addEditListeners(){Eg(bx,this,Cx).call(this),Eg(bx,this,Tx).call(this)}removeEditListeners(){Eg(bx,this,Ax).call(this),Eg(bx,this,Ox).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of Ag(Wy,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of Ag(Wy,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=Ag(Py,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of Ag(lx,this)){const e=r.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const e of Ag(Wy,this))if(e.isHandlingMimeForPasting(a.type))return void e.paste(a,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){return void Hv('paste: "'.concat(i.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const e=[];for(const a of n){const t=await r.deserialize(a);if(!t)return;e.push(t)}const t=()=>{for(const t of e)Eg(bx,this,Ix).call(this,t);Eg(bx,this,qx).call(this,e)},i=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:i,mustExec:!0})}catch(i){Hv('paste: "'.concat(i.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),Ag(ox,this)===iv.NONE||this.isEditorHandlingKeyboard||yx._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,Ag($y,this)&&(Tg($y,this,!1),Eg(bx,this,jx).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(Eg(bx,this,Sx).call(this),Eg(bx,this,Tx).call(this),Eg(bx,this,Mx).call(this,{isEditing:Ag(ox,this)!==iv.NONE,isEmpty:Eg(bx,this,zx).call(this),hasSomethingToUndo:Ag(Fy,this).hasSomethingToUndo(),hasSomethingToRedo:Ag(Fy,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(Eg(bx,this,Ex).call(this),Eg(bx,this,Ox).call(this),Eg(bx,this,Mx).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!Ag(Wy,this)){Tg(Wy,this,e);for(const e of Ag(Wy,this))Eg(bx,this,Dx).call(this,e.defaultPropertiesToUpdate)}}getId(){return Ag(ex,this).id}get currentLayer(){return Ag(Dy,this).get(Ag(qy,this))}getLayer(e){return Ag(Dy,this).get(e)}get currentPageIndex(){return Ag(qy,this)}addLayer(e){Ag(Dy,this).set(e.pageIndex,e),Ag(tx,this)?e.enable():e.disable()}removeLayer(e){Ag(Dy,this).delete(e.pageIndex)}async updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ag(ox,this)!==e&&(!Ag(vx,this)||(await Ag(vx,this).promise,Ag(vx,this)))){if(Tg(vx,this,Promise.withResolvers()),Tg(ox,this,e),e===iv.NONE)return this.setEditingState(!1),Eg(bx,this,Lx).call(this),void Ag(vx,this).resolve();this.setEditingState(!0),await Eg(bx,this,Rx).call(this),this.unselectAll();for(const t of Ag(Dy,this).values())t.updateMode(e);if(!t)return n&&this.addNewEditorFromKeyboard(),void Ag(vx,this).resolve();for(const e of Ag(My,this).values())e.annotationElementId===t?(this.setSelected(e),e.enterInEditMode()):e.unselect();Ag(vx,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==Ag(ox,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(Ag(Wy,this)){switch(e){case av.CREATE:return void this.currentLayer.addNewEditor();case av.HIGHLIGHT_DEFAULT_COLOR:null===(n=Ag(ax,this))||void 0===n||n.updateColor(t);break;case av.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Ag(ux,this)||Tg(ux,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of Ag(lx,this))n.updateParams(e,t);for(const n of Ag(Wy,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,r;for(const i of Ag(My,this).values())i.editorType===e&&i.show(t);(null===(n=null===(r=Ag(ux,this))||void 0===r?void 0:r.get(av.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&Eg(bx,this,Dx).call(this,[[av.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ag(nx,this)!==e){Tg(nx,this,e);for(const t of Ag(Dy,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of Ag(My,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return Ag(My,this).get(e)}addEditor(e){Ag(My,this).set(e.id,e)}removeEditor(e){var t;(e.div.contains(document.activeElement)&&(Ag(Yy,this)&&clearTimeout(Ag(Yy,this)),Tg(Yy,this,setTimeout((()=>{this.focusMainContainer(),Tg(Yy,this,null)}),0))),Ag(My,this).delete(e.id),this.unselect(e),e.annotationElementId&&Ag(By,this).has(e.annotationElementId))||(null===(t=Ag(Ly,this))||void 0===t||t.remove(e.id))}addDeletedAnnotationElement(e){Ag(By,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return Ag(By,this).has(e)}removeDeletedAnnotationElement(e){Ag(By,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){Ag(Py,this)!==e&&(Tg(Py,this,e),e&&Eg(bx,this,Dx).call(this,e.propertiesToUpdate))}updateUI(e){Cg(bx,this,Fx)===e&&Eg(bx,this,Dx).call(this,e.propertiesToUpdate)}toggleSelected(e){if(Ag(lx,this).has(e))return Ag(lx,this).delete(e),e.unselect(),void Eg(bx,this,Mx).call(this,{hasSelectedEditor:this.hasSelection});Ag(lx,this).add(e),e.select(),Eg(bx,this,Dx).call(this,e.propertiesToUpdate),Eg(bx,this,Mx).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of Ag(lx,this))t!==e&&t.unselect();Ag(lx,this).clear(),Ag(lx,this).add(e),e.select(),Eg(bx,this,Dx).call(this,e.propertiesToUpdate),Eg(bx,this,Mx).call(this,{hasSelectedEditor:!0})}isSelected(e){return Ag(lx,this).has(e)}get firstSelectedEditor(){return Ag(lx,this).values().next().value}unselect(e){e.unselect(),Ag(lx,this).delete(e),Eg(bx,this,Mx).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Ag(lx,this).size}get isEnterHandled(){return 1===Ag(lx,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){Ag(Fy,this).undo(),Eg(bx,this,Mx).call(this,{hasSomethingToUndo:Ag(Fy,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Eg(bx,this,zx).call(this)})}redo(){Ag(Fy,this).redo(),Eg(bx,this,Mx).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Ag(Fy,this).hasSomethingToRedo(),isEmpty:Eg(bx,this,zx).call(this)})}addCommands(e){Ag(Fy,this).add(e),Eg(bx,this,Mx).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Eg(bx,this,zx).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...Ag(lx,this)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)Eg(bx,this,Ix).call(this,t)},mustExec:!0})}commitOrRemove(){var e;null===(e=Ag(Py,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return Ag(Py,this)||this.hasSelection}selectAll(){for(const e of Ag(lx,this))e.commit();Eg(bx,this,qx).call(this,Ag(My,this).values())}unselectAll(){if((!Ag(Py,this)||(Ag(Py,this).commitOrRemove(),Ag(ox,this)===iv.NONE))&&this.hasSelection){for(const e of Ag(lx,this))e.unselect();Ag(lx,this).clear(),Eg(bx,this,Mx).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;Ag(px,this)[0]+=e,Ag(px,this)[1]+=t;const[n,r]=Ag(px,this),i=[...Ag(lx,this)];Ag(mx,this)&&clearTimeout(Ag(mx,this)),Tg(mx,this,setTimeout((()=>{Tg(mx,this,null),Ag(px,this)[0]=Ag(px,this)[1]=0,this.addCommands({cmd:()=>{for(const e of i)Ag(My,this).has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(const e of i)Ag(My,this).has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})}),1e3));for(const a of i)a.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Tg(Uy,this,new Map);for(const e of Ag(lx,this))Ag(Uy,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Ag(Uy,this))return!1;this.disableUserSelect(!1);const e=Ag(Uy,this);Tg(Uy,this,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},s]of e)s.newX=r,s.newY=i,s.newPageIndex=a,t||(t=r!==s.savedX||i!==s.savedY||a!==s.savedPageIndex);if(!t)return!1;const n=(e,t,n,r)=>{if(Ag(My,this).has(e.id)){const i=Ag(Dy,this).get(r);i?e._setParentAndPosition(i,t,n):(e.pageIndex=r,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:r,newY:i,newPageIndex:a}]of e)n(t,r,i,a)},undo:()=>{for(const[t,{savedX:r,savedY:i,savedPageIndex:a}]of e)n(t,r,i,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(Ag(Uy,this))for(const n of Ag(Uy,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===Ag(lx,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return Ag(Py,this)===e}getActive(){return Ag(Py,this)}getMode(){return Ag(ox,this)}get imageManager(){return Kv(this,"imageManager",new xy)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();let s;switch(e.getAttribute("data-main-rotation")){case"90":s=(e,t,s,o)=>({x:(t-r)/a,y:1-(e+s-n)/i,width:o/a,height:s/i});break;case"180":s=(e,t,s,o)=>({x:1-(e+s-n)/i,y:1-(t+o-r)/a,width:s/i,height:o/a});break;case"270":s=(e,t,s,o)=>({x:1-(t+o-r)/a,y:(e-n)/i,width:o/a,height:s/i});break;default:s=(e,t,s,o)=>({x:(e-n)/i,y:(t-r)/a,width:s/i,height:o/a})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:r,height:i}of e.getClientRects())0!==r&&0!==i&&o.push(s(t,n,r,i))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(Ag(Iy,this)||Tg(Iy,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=Ag(Iy,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=Ag(Iy,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const r=Ag(Ly,this).getRawValue(n);r&&(Ag(ox,this)!==iv.NONE||r.hasBeenModified)&&r.renderAnnotationElement(e)}}function xx(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function wx(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of Ag(Dy,this).values())if(n.hasTextLayer(e))return n;return null}function _x(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=Eg(bx,this,xx).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(Ag(Zy,this)||Tg(Zy,this,new cy(this)),Ag(Zy,this).show(t,n,"ltr"===this.direction))}function kx(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(Ag(cx,this))null===(n=Ag(Zy,this))||void 0===n||n.hide(),Tg(cx,this,null),Eg(bx,this,Mx).call(this,{hasSelectedText:!1});return}const{anchorNode:r}=t;if(r===Ag(cx,this))return;const i=Eg(bx,this,xx).call(this,t).closest(".textLayer");var a;if(i){if(null===(e=Ag(Zy,this))||void 0===e||e.hide(),Tg(cx,this,r),Eg(bx,this,Mx).call(this,{hasSelectedText:!0}),(Ag(ox,this)===iv.HIGHLIGHT||Ag(ox,this)===iv.NONE)&&(Ag(ox,this)===iv.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Tg($y,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=Ag(ox,this)===iv.HIGHLIGHT?Eg(bx,this,wx).call(this,i):null;null===e||void 0===e||e.toggleDrawing();const t=new AbortController,n=this.combinedSignal(t),r=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&Eg(bx,this,jx).call(this,"main_toolbar"))};window.addEventListener("pointerup",r,{signal:n}),window.addEventListener("blur",r,{signal:n})}}else Ag(cx,this)&&(null===(a=Ag(Zy,this))||void 0===a||a.hide(),Tg(cx,this,null),Eg(bx,this,Mx).call(this,{hasSelectedText:!1}))}function jx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Ag(ox,this)===iv.HIGHLIGHT?this.highlightSelection(e):Ag(Vy,this)&&Eg(bx,this,_x).call(this)}function Nx(){document.addEventListener("selectionchange",Eg(bx,this,kx).bind(this),{signal:this._signal})}function Sx(){if(Ag(Xy,this))return;Tg(Xy,this,new AbortController);const e=this.combinedSignal(Ag(Xy,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Ex(){var e;null===(e=Ag(Xy,this))||void 0===e||e.abort(),Tg(Xy,this,null)}function Cx(){if(Ag(rx,this))return;Tg(rx,this,new AbortController);const e=this.combinedSignal(Ag(rx,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function Ax(){var e;null===(e=Ag(rx,this))||void 0===e||e.abort(),Tg(rx,this,null)}function Tx(){if(Ag(zy,this))return;Tg(zy,this,new AbortController);const e=this.combinedSignal(Ag(zy,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Ox(){var e;null===(e=Ag(zy,this))||void 0===e||e.abort(),Tg(zy,this,null)}function Px(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function Mx(e){const t=Object.entries(e).some((e=>{let[t,n]=e;return Ag(hx,this)[t]!==n}));t&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Ag(hx,this),e)}),Ag(ox,this)===iv.HIGHLIGHT&&!1===e.hasSelectedEditor&&Eg(bx,this,Dx).call(this,[[av.HIGHLIGHT_FREE,!0]]))}function Dx(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function Rx(){if(!Ag(tx,this)){Tg(tx,this,!0);const e=[];for(const t of Ag(Dy,this).values())e.push(t.enable());await Promise.all(e);for(const t of Ag(My,this).values())t.enable()}}function Lx(){if(this.unselectAll(),Ag(tx,this)){Tg(tx,this,!1);for(const e of Ag(Dy,this).values())e.disable();for(const e of Ag(My,this).values())e.disable()}}function Ix(e){const t=Ag(Dy,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function Fx(e){let t=null;for(t of Ag(lx,e));return t}function zx(){if(0===Ag(My,this).size)return!0;if(1===Ag(My,this).size)for(const e of Ag(My,this).values())return e.isEmpty();return!1}function qx(e){for(const t of Ag(lx,this))t.unselect();Ag(lx,this).clear();for(const t of e)t.isEmpty()||(Ag(lx,this).add(t),t.select());Eg(bx,this,Mx).call(this,{hasSelectedEditor:this.hasSelection})}Be(yx,"TRANSLATE_SMALL",1),Be(yx,"TRANSLATE_BIG",10);var Bx=new WeakMap,Ux=new WeakMap,Wx=new WeakMap,Hx=new WeakMap,Vx=new WeakMap,Gx=new WeakMap,Qx=new WeakMap,Kx=new WeakMap,Yx=new WeakMap,Xx=new WeakMap,Jx=new WeakMap,$x=new WeakMap,Zx=new WeakSet;class ew{constructor(e){Ng(this,Zx),Sg(this,Bx,null),Sg(this,Ux,!1),Sg(this,Wx,null),Sg(this,Hx,null),Sg(this,Vx,null),Sg(this,Gx,null),Sg(this,Qx,!1),Sg(this,Kx,null),Sg(this,Yx,null),Sg(this,Xx,null),Sg(this,Jx,null),Sg(this,$x,!1),Tg(Yx,this,e),Tg($x,this,e._uiManager.useNewAltTextFlow),rw._||(rw._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=ew._l10n)&&void 0!==t||(ew._l10n=e)}async render(){const e=Tg(Wx,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=Tg(Hx,this,document.createElement("span"));e.append(t),Ag($x,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",rw._.missing),t.setAttribute("data-l10n-id",rw._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=Ag(Yx,this)._uiManager._signal;e.addEventListener("contextmenu",Rb,{signal:n}),e.addEventListener("pointerdown",(e=>e.stopPropagation()),{signal:n});const r=e=>{e.preventDefault(),Ag(Yx,this)._uiManager.editAltText(Ag(Yx,this)),Ag($x,this)&&Ag(Yx,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Cg(Zx,this,tw)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(Tg(Qx,this,!0),r(t))}),{signal:n}),await Eg(Zx,this,nw).call(this),e}finish(){Ag(Wx,this)&&(Ag(Wx,this).focus({focusVisible:Ag(Qx,this)}),Tg(Qx,this,!1))}isEmpty(){return Ag($x,this)?null===Ag(Bx,this):!Ag(Bx,this)&&!Ag(Ux,this)}hasData(){return Ag($x,this)?null!==Ag(Bx,this)||!!Ag(Xx,this):this.isEmpty()}get guessedText(){return Ag(Xx,this)}async setGuessedText(e){null===Ag(Bx,this)&&(Tg(Xx,this,e),Tg(Jx,this,await ew._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),Eg(Zx,this,nw).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!Ag($x,this)||Ag(Bx,this))return null===(t=Ag(Kx,this))||void 0===t||t.remove(),void Tg(Kx,this,null);if(!Ag(Kx,this)){const e=Tg(Kx,this,document.createElement("div"));e.className="noAltTextBadge",Ag(Yx,this).div.append(e)}Ag(Kx,this).classList.toggle("hidden",!e)}serialize(e){let t=Ag(Bx,this);return e||Ag(Xx,this)!==t||(t=Ag(Jx,this)),{altText:t,decorative:Ag(Ux,this),guessedText:Ag(Xx,this),textWithDisclaimer:Ag(Jx,this)}}get data(){return{altText:Ag(Bx,this),decorative:Ag(Ux,this)}}set data(e){let{altText:t,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:a=!1}=e;r&&(Tg(Xx,this,r),Tg(Jx,this,i)),Ag(Bx,this)===t&&Ag(Ux,this)===n||(a||(Tg(Bx,this,t),Tg(Ux,this,n)),Eg(Zx,this,nw).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ag(Wx,this)&&(!e&&Ag(Gx,this)&&(clearTimeout(Ag(Gx,this)),Tg(Gx,this,null)),Ag(Wx,this).disabled=!e)}shown(){Ag(Yx,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Cg(Zx,this,tw)}})}destroy(){var e,t;null===(e=Ag(Wx,this))||void 0===e||e.remove(),Tg(Wx,this,null),Tg(Hx,this,null),Tg(Vx,this,null),null===(t=Ag(Kx,this))||void 0===t||t.remove(),Tg(Kx,this,null)}}function tw(e){return(Ag(Bx,e)?"added":null===Ag(Bx,e)&&e.guessedText&&"review")||"missing"}async function nw(){const e=Ag(Wx,this);if(!e)return;if(Ag($x,this)){var t,n;if(e.classList.toggle("done",!!Ag(Bx,this)),e.setAttribute("data-l10n-id",rw._[Cg(Zx,this,tw)]),null===(t=Ag(Hx,this))||void 0===t||t.setAttribute("data-l10n-id",rw._["".concat(Cg(Zx,this,tw),"-label")]),!Ag(Bx,this))return void(null===(n=Ag(Vx,this))||void 0===n||n.remove())}else{var r;if(!Ag(Bx,this)&&!Ag(Ux,this))return e.classList.remove("done"),void(null===(r=Ag(Vx,this))||void 0===r||r.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=Ag(Vx,this);if(!i){Tg(Vx,this,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip"),i.id="alt-text-tooltip-".concat(Ag(Yx,this).id);const t=100,n=Ag(Yx,this)._uiManager._signal;n.addEventListener("abort",(()=>{clearTimeout(Ag(Gx,this)),Tg(Gx,this,null)}),{once:!0}),e.addEventListener("mouseenter",(()=>{Tg(Gx,this,setTimeout((()=>{Tg(Gx,this,null),Ag(Vx,this).classList.add("show"),Ag(Yx,this)._reportTelemetry({action:"alt_text_tooltip"})}),t))}),{signal:n}),e.addEventListener("mouseleave",(()=>{var e;Ag(Gx,this)&&(clearTimeout(Ag(Gx,this)),Tg(Gx,this,null)),null===(e=Ag(Vx,this))||void 0===e||e.classList.remove("show")}),{signal:n})}Ag(Ux,this)?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=Ag(Bx,this)),i.parentNode||e.append(i);const a=Ag(Yx,this).getImageForAltText();null===a||void 0===a||a.setAttribute("aria-describedby",i.id)}var rw={_:null};Be(ew,"_l10n",null);var iw=new WeakMap,aw=new WeakMap,sw=new WeakMap,ow=new WeakMap,lw=new WeakMap,cw=new WeakMap,dw=new WeakMap,uw=new WeakMap,hw=new WeakMap,pw=new WeakMap,mw=new WeakMap,fw=new WeakMap,gw=new WeakMap,vw=new WeakMap,bw=new WeakMap,yw=new WeakMap,xw=new WeakMap,ww=new WeakMap,_w=new WeakMap,kw=new WeakMap,jw=new WeakSet;class Nw{static get _resizerKeyboardManager(){const e=Nw.prototype._resizeWithKeyboard,t=yx.TRANSLATE_SMALL,n=yx.TRANSLATE_BIG;return Kv(this,"_resizerKeyboardManager",new Cy([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Nw.prototype._stopResizingWithKeyboard]]))}constructor(e){Ng(this,jw),Sg(this,iw,null),Sg(this,aw,null),Sg(this,sw,null),Sg(this,ow,!1),Sg(this,lw,!1),Sg(this,cw,null),Sg(this,dw,null),Sg(this,uw,null),Sg(this,hw,""),Sg(this,pw,!1),Sg(this,mw,null),Sg(this,fw,!1),Sg(this,gw,!1),Sg(this,vw,!1),Sg(this,bw,null),Sg(this,yw,0),Sg(this,xw,0),Sg(this,ww,null),Be(this,"_editToolbar",null),Be(this,"_initialOptions",Object.create(null)),Be(this,"_initialData",null),Be(this,"_isVisible",!0),Be(this,"_uiManager",null),Be(this,"_focusEventsAllowed",!0),Sg(this,_w,!1),Sg(this,kw,Nw._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,a];const[s,o]=this.parentDimensions;this.x=e.x/s,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Kv(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Bw({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=Nw._l10n)&&void 0!==n||(Nw._l10n=e),Nw._l10nResizer||(Nw._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==Nw._borderLineWidth)return;const r=getComputedStyle(document.documentElement);Nw._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Vv("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Ag(_w,this)}set _isDraggable(e){var t;Tg(_w,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Ag(kw,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):Eg(jw,this,qw).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(Ag(pw,this)?Tg(pw,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){Eg(jw,this,Sw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){Ag(mw,this)||Tg(mw,this,[this.x,this.y]),Eg(jw,this,Sw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){Ag(mw,this)||Tg(mw,this,[this.x,this.y]);const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[s,o]=this.getBaseTranslation();i+=s,a+=o,this.div.style.left="".concat((100*i).toFixed(2),"%"),this.div.style.top="".concat((100*a).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!Ag(mw,this)&&(Ag(mw,this)[0]!==this.x||Ag(mw,this)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Nw,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[t,n]=this.pageDimensions;let{x:r,y:i,width:a,height:s}=this;if(a*=t,s*=n,r*=t,i*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-a,r)),i=Math.max(0,Math.min(n-s,i));break;case 90:r=Math.max(0,Math.min(t-s,r)),i=Math.min(n,Math.max(a,i));break;case 180:r=Math.min(t,Math.max(a,r)),i=Math.min(n,Math.max(s,i));break;case 270:r=Math.min(t,Math.max(s,r)),i=Math.max(0,Math.min(n-a,i))}this.x=r/=t,this.y=i/=n;const[o,l]=this.getBaseTranslation();r+=o,i+=l;const{style:c}=this.div;c.left="".concat((100*r).toFixed(2),"%"),c.top="".concat((100*i).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return Ew.call(Nw,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Ew.call(Nw,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions;this.div.style.width="".concat((100*e/n).toFixed(2),"%"),Ag(lw,this)||(this.div.style.height="".concat((100*t/r).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=!Ag(lw,this)&&t.endsWith("%");if(r&&i)return;const[a,s]=this.parentDimensions;r||(e.width="".concat((100*parseFloat(n)/a).toFixed(2),"%")),Ag(lw,this)||i||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}altTextFinish(){var e;null===(e=Ag(sw,this))||void 0===e||e.finish()}async addEditToolbar(){return this._editToolbar||Ag(gw,this)||(this._editToolbar=new Jb(this),this.div.append(this._editToolbar.render()),Ag(sw,this)&&await this._editToolbar.addAltText(Ag(sw,this))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=Ag(sw,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){Ag(sw,this)||(ew.initialize(Nw._l10n),Tg(sw,this,new ew(this)),Ag(iw,this)&&(Ag(sw,this).data=Ag(iw,this),Tg(iw,this,null)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=Ag(sw,this))||void 0===e?void 0:e.data}set altTextData(e){Ag(sw,this)&&(Ag(sw,this).data=e)}get guessedAltText(){var e;return null===(e=Ag(sw,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=Ag(sw,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=Ag(sw,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!Ag(sw,this)&&!Ag(sw,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=Ag(sw,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=Ag(ow,this)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),Eg(jw,this,Rw).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*t/e).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*e/t).toFixed(2),"%"));const[n,r]=this.getInitialTranslation();return this.translate(n,r),py(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=sb.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(Tg(pw,this,!0),this._isDraggable?Eg(jw,this,Dw).call(this,e):Eg(jw,this,Mw).call(this,e))}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){Ag(bw,this)&&clearTimeout(Ag(bw,this)),Tg(bw,this,setTimeout((()=>{var e;Tg(bw,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)}),0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const r=this.parentScale,[i,a]=this.pageDimensions,[s,o]=this.pageTranslation,l=e/r,c=t/r,d=this.x*i,u=this.y*a,h=this.width*i,p=this.height*a;switch(n){case 0:return[d+l+s,a-u-c-p+o,d+l+h+s,a-u-c+o];case 90:return[d+c+s,a-u+l+o,d+c+p+s,a-u+l+h+o];case 180:return[d-l-h+s,a-u+c+o,d-l+s,a-u+c+p+o];case 270:return[d-c-p+s,a-u-l-h+o,d-c+s,a-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,a]=e,s=i-n,o=a-r;switch(this.rotation){case 0:return[n,t-a,s,o];case 90:return[n,t-r,o,s];case 180:return[i,t-r,s,o];case 270:return[i,t-a,o,s];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Tg(gw,this,!0)}disableEditMode(){Tg(gw,this,!1)}isInEditMode(){return Ag(gw,this)}shouldGetKeyboardEvents(){return Ag(vw,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){Eg(jw,this,Rw).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){Vv("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,Tg(iw,r,e.accessibilityData);const[i,a]=r.pageDimensions,[s,o,l,c]=r.getRectInCurrentCoords(e.rect,a);return r.x=s/i,r.y=o/a,r.width=l/i,r.height=c/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e;if(null===(e=Ag(uw,this))||void 0===e||e.abort(),Tg(uw,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Ag(bw,this)&&(clearTimeout(Ag(bw,this)),Tg(bw,this,null)),Eg(jw,this,qw).call(this),this.removeEditToolbar(),Ag(ww,this)){for(const e of Ag(ww,this).values())clearTimeout(e);Tg(ww,this,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(Eg(jw,this,Aw).call(this),Ag(cw,this).classList.remove("hidden"),py(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),Tg(dw,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=Ag(cw,this).children;if(!Ag(aw,this)){Tg(aw,this,Array.from(t));const e=Eg(jw,this,Lw).bind(this),n=Eg(jw,this,Iw).bind(this),r=this._uiManager._signal;for(const t of Ag(aw,this)){const i=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:r}),t.addEventListener("blur",n,{signal:r}),t.addEventListener("focus",Eg(jw,this,Fw).bind(this,i),{signal:r}),t.setAttribute("data-l10n-id",Nw._l10nResizer[i])}}const n=Ag(aw,this)[0];let r=0;for(const a of t){if(a===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(Ag(aw,this).length/4);if(i!==r){if(i<r)for(let t=0;t<r-i;t++)Ag(cw,this).append(Ag(cw,this).firstChild);else if(i>r)for(let t=0;t<i-r;t++)Ag(cw,this).firstChild.before(Ag(cw,this).lastChild);let e=0;for(const n of t){const t=Ag(aw,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",Nw._l10nResizer[t])}}Eg(jw,this,zw).call(this,0),Tg(vw,this,!0),Ag(cw,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){Ag(vw,this)&&Eg(jw,this,Pw).call(this,Ag(hw,this),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){Eg(jw,this,qw).call(this),this.div.focus()}select(){var e,t,n;this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=Ag(sw,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then((()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}unselect(){var e,t,n,r,i;null===(e=Ag(cw,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(r=this._editToolbar)||void 0===r||r.hide(),null===(i=Ag(sw,this))||void 0===i||i.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return Ag(fw,this)}set isEditing(e){Tg(fw,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){Tg(lw,this,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){Ag(ww,this)||Tg(ww,this,new Map);const{action:t}=e;let n=Ag(ww,this).get(t);return n&&clearTimeout(n),n=setTimeout((()=>{this._reportTelemetry(e),Ag(ww,this).delete(t),0===Ag(ww,this).size&&Tg(ww,this,null)}),Nw._telemetryTimeout),void Ag(ww,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Tg(ow,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),Tg(ow,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function Sw(e,t,n){let[r,i]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/r,this.y+=n/i,this.fixAndSetPosition()}function Ew(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function Cw(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function Aw(){if(Ag(cw,this))return;Tg(cw,this,document.createElement("div")),Ag(cw,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");Ag(cw,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",Eg(jw,this,Tw).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Rb,{signal:t}),e.tabIndex=-1}this.div.prepend(Ag(cw,this))}function Tw(e,t){var n;t.preventDefault();const{isMac:r}=sb.platform;if(0!==t.button||t.ctrlKey&&r)return;null===(n=Ag(sw,this))||void 0===n||n.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Eg(jw,this,Pw).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("contextmenu",Rb,{signal:s});const o=this.x,l=this.y,c=this.width,d=this.height,u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var e;a.abort(),this.parent.togglePointerEvents(!0),null===(e=Ag(sw,this))||void 0===e||e.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=h,Eg(jw,this,Ow).call(this,o,l,c,d)};window.addEventListener("pointerup",p,{signal:s}),window.addEventListener("blur",p,{signal:s})}function Ow(e,t,n,r){const i=this.x,a=this.y,s=this.width,o=this.height;i===e&&a===t&&s===n&&o===r||this.addCommands({cmd:()=>{this.width=s,this.height=o,this.x=i,this.y=a;const[e,t]=this.parentDimensions;this.setDims(e*s,t*o),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=r,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*n,a*r),this.fixAndSetPosition()},mustExec:!0})}function Pw(e,t){const[n,r]=this.parentDimensions,i=this.x,a=this.y,s=this.width,o=this.height,l=Dg.MIN_SIZE/n,c=Dg.MIN_SIZE/r,d=e=>Math.round(1e4*e)/1e4,u=Eg(jw,this,Cw).call(this,this.rotation),h=(e,t)=>[u[0]*e+u[2]*t,u[1]*e+u[3]*t],p=Eg(jw,this,Cw).call(this,360-this.rotation);let m,f,g=!1,v=!1;switch(e){case"topLeft":g=!0,m=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":m=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":g=!0,m=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":v=!0,m=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":g=!0,m=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":m=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":g=!0,m=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":v=!0,m=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const b=m(s,o),y=f(s,o);let x=h(...y);const w=d(i+x[0]),_=d(a+x[1]);let k=1,j=1,[N,S]=this.screenToPageTranslation(t.movementX,t.movementY);if([N,S]=((e,t)=>[p[0]*e+p[2]*t,p[1]*e+p[3]*t])(N/n,S/r),g){const e=Math.hypot(s,o);k=j=Math.max(Math.min(Math.hypot(y[0]-b[0]-N,y[1]-b[1]-S)/e,1/s,1/o),l/s,c/o)}else v?k=Math.max(l,Math.min(1,Math.abs(y[0]-b[0]-N)))/s:j=Math.max(c,Math.min(1,Math.abs(y[1]-b[1]-S)))/o;const E=d(s*k),C=d(o*j);x=h(...f(E,C));const A=w-x[0],T=_-x[1];this.width=E,this.height=C,this.x=A,this.y=T,this.setDims(n*E,r*C),this.fixAndSetPosition()}function Mw(e){const{isMac:t}=sb.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Dw(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,r=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),Tg(yw,this,e.clientX),Tg(xw,this,e.clientY);const t=e=>{const{clientX:t,clientY:n}=e,[r,i]=this.screenToPageTranslation(t-Ag(yw,this),n-Ag(xw,this));Tg(yw,this,t),Tg(xw,this,n),this._uiManager.dragSelectedEditors(r,i)};window.addEventListener("pointermove",t,{passive:!0,capture:!0,signal:r})}const i=()=>{n.abort(),t&&this.div.classList.remove("moving"),Tg(pw,this,!1),this._uiManager.endDragSession()||Eg(jw,this,Mw).call(this,e)};window.addEventListener("pointerup",i,{signal:r}),window.addEventListener("blur",i,{signal:r})}function Rw(){if(Ag(uw,this)||!this.div)return;Tg(uw,this,new AbortController);const e=this._uiManager.combinedSignal(Ag(uw,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function Lw(e){Dg._resizerKeyboardManager.exec(this,e)}function Iw(e){var t;Ag(vw,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==Ag(cw,this)&&Eg(jw,this,qw).call(this)}function Fw(e){Tg(hw,this,Ag(vw,this)?e:"")}function zw(e){if(Ag(aw,this))for(const t of Ag(aw,this))t.tabIndex=e}function qw(){if(Tg(vw,this,!1),Eg(jw,this,zw).call(this,-1),Ag(dw,this)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=Ag(dw,this);Eg(jw,this,Ow).call(this,e,t,n,r),Tg(dw,this,null)}}Dg=Nw,Be(Nw,"_l10n",null),Be(Nw,"_l10nResizer",null),Be(Nw,"_borderLineWidth",-1),Be(Nw,"_colorManager",new Ty),Be(Nw,"_zIndex",1),Be(Nw,"_telemetryTimeout",1e3);class Bw extends Nw{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Uw=3285377520,Ww=4294901760,Hw=65535;class Vw{constructor(e){this.h1=e?4294967295&e:Uw,this.h2=e?4294967295&e:Uw}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const r=n>>2,i=n-4*r,a=new Uint32Array(t.buffer,0,r);let s=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,p=13715;for(let m=0;m<r;m++)1&m?(s=a[m],s=s*d&Ww|s*h&Hw,s=s<<15|s>>>17,s=s*u&Ww|s*p&Hw,l^=s,l=l<<13|l>>>19,l=5*l+3864292196):(o=a[m],o=o*d&Ww|o*h&Hw,o=o<<15|o>>>17,o=o*u&Ww|o*p&Hw,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(s=0,i){case 3:s^=t[4*r+2]<<16;case 2:s^=t[4*r+1]<<8;case 1:s^=t[4*r],s=s*d&Ww|s*h&Hw,s=s<<15|s>>>17,s=s*u&Ww|s*p&Hw,1&r?l^=s:c^=s}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Ww|36045*e&Hw,t=4283543511*t&Ww|(2950163797*(t<<16|e>>>16)&Ww)>>>16,e^=t>>>1,e=444984403*e&Ww|60499*e&Hw,t=3301882366*t&Ww|(3120437893*(t<<16|e>>>16)&Ww)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Gw=Object.freeze({map:null,hash:"",transfer:void 0});var Qw=new WeakMap,Kw=new WeakMap,Yw=new WeakMap,Xw=new WeakSet;class Jw{constructor(){Ng(this,Xw),Sg(this,Qw,!1),Sg(this,Kw,null),Sg(this,Yw,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=Ag(Yw,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return Ag(Yw,this).get(e)}remove(e){if(Ag(Yw,this).delete(e),0===Ag(Yw,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of Ag(Yw,this).values())if(e instanceof Nw)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=Ag(Yw,this).get(e);let r=!1;if(void 0!==n)for(const[i,a]of Object.entries(t))n[i]!==a&&(r=!0,n[i]=a);else r=!0,Ag(Yw,this).set(e,t);r&&Eg(Xw,this,$w).call(this),t instanceof Nw&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return Ag(Yw,this).has(e)}getAll(){return Ag(Yw,this).size>0?ab(Ag(Yw,this)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return Ag(Yw,this).size}resetModified(){Ag(Qw,this)&&(Tg(Qw,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new e_(this)}get serializable(){if(0===Ag(Yw,this).size)return Gw;const e=new Map,t=new Vw,n=[],r=Object.create(null);let i=!1;for(const[a,s]of Ag(Yw,this)){const n=s instanceof Nw?s.serialize(!1,r):s;n&&(e.set(a,n),t.update("".concat(a,":").concat(JSON.stringify(n))),i||(i=!!n.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Gw}get editorStats(){let e=null;const t=new Map;for(const i of Ag(Yw,this).values()){var n;if(!(i instanceof Nw))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:s}=a;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=(n=e)[s]||(n[s]=new Map);for(const[e,t]of Object.entries(a)){var r;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const i=null!==(r=n.get(t))&&void 0!==r?r:0;n.set(t,i+1)}}for(const[i,a]of t)e[i]=a.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){Tg(Kw,this,null)}get modifiedIds(){if(Ag(Kw,this))return Ag(Kw,this);const e=[];for(const t of Ag(Yw,this).values())t instanceof Nw&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return Tg(Kw,this,{ids:new Set(e),hash:e.join(",")})}}function $w(){Ag(Qw,this)||(Tg(Qw,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Zw=new WeakMap;class e_ extends Jw{constructor(e){super(),Sg(this,Zw,void 0);const{map:t,hash:n,transfer:r}=e.serializable,i=structuredClone(t,r?{transfer:r}:null);Tg(Zw,this,{map:i,hash:n,transfer:r})}get print(){Vv("Should not call PrintAnnotationStorage.print")}get serializable(){return Ag(Zw,this)}get modifiedIds(){return Kv(this,"modifiedIds",{ids:new Set,hash:""})}}var t_=new WeakMap;class n_{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;Sg(this,t_,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),Ag(t_,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:n}=e;if(t&&!Ag(t_,this).has(t.loadedName))if(Gv(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:i,style:a}=t,s=new FontFace(e,i,a);this.addNativeFontFace(s);try{await s.load(),Ag(t_,this).add(e),null===n||void 0===n||n(t)}catch(r){Hv("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(s)}}else Vv("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw Hv("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){var e;return Kv(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return(Vg||"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Kv(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(Gv(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return Kv(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function r(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let i,a;const s=this._document.createElement("canvas");s.width=1,s.height=1;const o=s.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=r(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(i=0,a=c.length-3;i<a;i+=4)h=h-u+n(c,i)|0;var p;i<c.length&&(h=h-u+n(c+"XXX",i)|0),d=r(d,16,4,(p=h,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const m="url(data:font/opentype;base64,".concat(btoa(d),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(m,"}");this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,g.append(e)}this._document.body.append(g),function e(t,n){if(++l>30)return Hv("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,(()=>{g.remove(),t.complete()}))}}class r_{constructor(e,t){let{disableFontFace:n=!1,inspectFont:r=null}=t;this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=!0===n,this._inspectFont=r}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat((n=this.data,Uint8Array.prototype.toBase64?n.toBase64():btoa(rb(n))),");");var n;let r;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),r='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else r='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),r}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(i){Hv('getPathGenerator - ignoring character: "'.concat(i,'".'))}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[t]=function(e,t){};const r=[];for(let a=0,s=n.length;a<s;)switch(n[a++]){case fb:{const[e,t,i,s,o,l]=n.slice(a,a+6);r.push((n=>n.bezierCurveTo(e,t,i,s,o,l))),a+=6}break;case gb:{const[e,t]=n.slice(a,a+2);r.push((n=>n.moveTo(e,t))),a+=2}break;case vb:{const[e,t]=n.slice(a,a+2);r.push((n=>n.lineTo(e,t))),a+=2}break;case bb:{const[e,t,i,s]=n.slice(a,a+4);r.push((n=>n.quadraticCurveTo(e,t,i,s))),a+=4}break;case yb:r.push((e=>e.restore()));break;case xb:r.push((e=>e.save()));break;case wb:Gv(2===r.length,"Scale command is only valid at the third position.");break;case _b:{const[e,t,i,s,o,l]=n.slice(a,a+6);r.push((n=>n.transform(e,t,i,s,o,l))),a+=6}break;case kb:{const[e,t]=n.slice(a,a+2);r.push((n=>n.translate(e,t))),a+=2}}return this.compiledGlyphs[t]=function(e,t){r[0](e),r[1](e),e.scale(t,-t);for(let n=2,i=r.length;n<i;n++)r[n](e)}}}var i_=new WeakMap;class a_{constructor(e){let{enableHWA:t=!1}=e;Sg(this,i_,!1),Tg(i_,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Ag(i_,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Vv("Abstract method `_createCanvas` called.")}}class s_{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then((e=>({cMapData:e,isCompressed:this.isCompressed}))).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}async _fetch(e){Vv("Abstract method `_fetch` called.")}}class o_ extends s_{async _fetch(e){const t=await Sb(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ib(t)}}class l_{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(){}}var c_=new WeakMap,d_=new WeakMap,u_=new WeakMap,h_=new WeakMap,p_=new WeakMap,m_=new WeakMap,f_=new WeakMap,g_=new WeakSet;function v_(e){return Ag(d_,e)||Tg(d_,e,new Map)}function b_(e){return Ag(m_,e)||Tg(m_,e,new Map)}function y_(e){if(!Ag(u_,e)){const t=Ag(p_,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=Ag(p_,e).createElementNS(jb,"svg");r.setAttribute("width",0),r.setAttribute("height",0),Tg(u_,e,Ag(p_,e).createElementNS(jb,"defs")),t.append(r),r.append(Ag(u_,e)),Ag(p_,e).body.append(t)}return Ag(u_,e)}function x_(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const r=n.join(",");return[r,r,r]}const[t,n,r]=e,i=new Array(256),a=new Array(256),s=new Array(256);for(let o=0;o<256;o++)i[o]=t[o]/255,a[o]=n[o]/255,s[o]=r[o]/255;return[i.join(","),a.join(","),s.join(",")]}function w_(e){if(void 0===Ag(c_,this)){Tg(c_,this,"");const e=Ag(p_,this).URL;e!==Ag(p_,this).baseURI&&(Ab(e)?Hv('#createUrl: ignore "data:"-URL for performance reasons.'):Tg(c_,this,e.split("#",1)[0]))}return"url(".concat(Ag(c_,this),"#").concat(e,")")}function __(e){const t=Ag(p_,this).createElementNS(jb,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function k_(e){const t=Ag(p_,this).createElementNS(jb,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function j_(e){const t=Ag(p_,this).createElementNS(jb,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),Cg(g_,this,y_).append(t),t}function N_(e,t,n){const r=Ag(p_,this).createElementNS(jb,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}function S_(e,t,n,r){const i=Ag(p_,this).createElementNS(jb,"feComponentTransfer");r.append(i),Eg(g_,this,N_).call(this,i,"feFuncR",e),Eg(g_,this,N_).call(this,i,"feFuncG",t),Eg(g_,this,N_).call(this,i,"feFuncB",n)}function E_(e,t){const n=Ag(p_,this).createElementNS(jb,"feComponentTransfer");t.append(n),Eg(g_,this,N_).call(this,n,"feFuncA",e)}function C_(e){return Cg(g_,this,y_).style.color=e,qb(getComputedStyle(Cg(g_,this,y_)).getPropertyValue("color"))}class A_{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch((e=>{throw new Error("Unable to load font data at: ".concat(n))}))}async _fetch(e){Vv("Abstract method `_fetch` called.")}}class T_ extends A_{async _fetch(e){const t=await Sb(e,"arraybuffer");return new Uint8Array(t)}}if(Vg){var O_=Promise.withResolvers(),P_=null;(async()=>{const e=await import("fs"),t=await import("http"),n=await import("https"),r=await import("url");return new Map(Object.entries({fs:e,http:t,https:n,url:r,canvas:undefined,path2d:undefined}))})().then((e=>{P_=e,O_.resolve()}),(e=>{Hv("loadPackages: ".concat(e)),P_=new Map,O_.resolve()}))}class M_{static get promise(){return O_.promise}static get(e){var t;return null===(t=P_)||void 0===t?void 0:t.get(e)}}async function D_(e){const t=M_.get("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}const R_="Fill",L_="Stroke",I_="Shading";function F_(e,t){if(!t)return;const n=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,r),e.clip(i)}class z_{getPattern(){Vv("Abstract method `getPattern` called.")}}class q_ extends z_{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===L_||r===R_){const a=t.current.getClippedPathBoundingBox(r,Bb(e))||[0,0,0,0],s=Math.ceil(a[2]-a[0])||1,o=Math.ceil(a[3]-a[1])||1,l=t.cachedCanvases.getCanvas("pattern",s,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=lb.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),F_(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),i=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);i.setTransform(d)}else F_(e,this._bbox),i=this._createGradient(e);return i}}function B_(e,t,n,r,i,a,s,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=s,s=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=s,s=o,o=h),l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=s,s=h);const p=(l[n]+t.offsetX)*t.scaleX,m=(l[n+1]+t.offsetY)*t.scaleY,f=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,b=(l[i+1]+t.offsetY)*t.scaleY;if(m>=b)return;const y=c[a],x=c[a+1],w=c[a+2],_=c[s],k=c[s+1],j=c[s+2],N=c[o],S=c[o+1],E=c[o+2],C=Math.round(m),A=Math.round(b);let T,O,P,M,D,R,L,I;for(let F=C;F<=A;F++){if(F<g){const e=F<m?0:(m-F)/(m-g);T=p-(p-f)*e,O=y-(y-_)*e,P=x-(x-k)*e,M=w-(w-j)*e}else{let e;e=F>b?1:g===b?0:(g-F)/(g-b),T=f-(f-v)*e,O=_-(_-N)*e,P=k-(k-S)*e,M=j-(j-E)*e}let e;e=F<m?0:F>b?1:(m-F)/(m-b),D=p-(p-v)*e,R=y-(y-N)*e,L=x-(x-S)*e,I=w-(w-E)*e;const t=Math.round(Math.min(T,D)),n=Math.round(Math.max(T,D));let r=u*F+4*t;for(let i=t;i<=n;i++)e=(T-i)/(T-D),e<0?e=0:e>1&&(e=1),d[r++]=O-(O-R)*e|0,d[r++]=P-(P-L)*e|0,d[r++]=M-(M-I)*e|0,d[r++]=255}}function U_(e,t,n){const r=t.coords,i=t.colors;let a,s;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(a=0;a<l;a++){let t=a*o;for(let a=0;a<c;a++,t++)B_(e,n,r[t],r[t+1],r[t+o],i[t],i[t+1],i[t+o]),B_(e,n,r[t+o+1],r[t+1],r[t+o],i[t+o+1],i[t+1],i[t+o])}break;case"triangles":for(a=0,s=r.length;a<s;a+=3)B_(e,n,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class W_ extends z_{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const r=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-r,s=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),c=a/o,d=s/l,u={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-i,scaleX:1/c,scaleY:1/d},h=o+4,p=l+4,m=n.getCanvas("mesh",h,p),f=m.context,g=f.createImageData(o,l);if(t){const e=g.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)U_(g,v,u);f.putImageData(g,2,2);return{canvas:m.canvas,offsetX:r-2*c,offsetY:i-2*d,scaleX:c,scaleY:d}}getPattern(e,t,n,r){let i;if(F_(e,this._bbox),r===I_)i=lb.singularValueDecompose2dScale(Bb(e));else if(i=lb.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=lb.singularValueDecompose2dScale(this.matrix);i=[i[0]*e[0],i[1]*e[1]]}const a=this._createMeshCanvas(i,r===I_?null:this._background,t.cachedCanvases);return r!==I_&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class H_ extends z_{getPattern(){return"hotpink"}}const V_=1,G_=2;class Q_{constructor(e,t,n,r,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:i,color:a,canvasGraphicsFactory:s}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),Wv("TilingType: "+i);const c=t[0],d=t[1],u=t[2],h=t[3],p=u-c,m=h-d,f=lb.singularValueDecompose2dScale(this.matrix),g=lb.singularValueDecompose2dScale(this.baseTransform),v=f[0]*g[0],b=f[1]*g[1];let y=p,x=m,w=!1,_=!1;const k=Math.ceil(o*v),j=Math.ceil(l*b);k>=Math.ceil(p*v)?y=o:w=!0,j>=Math.ceil(m*b)?x=l:_=!0;const N=this.getSizeAndScale(y,this.ctx.canvas.width,v),S=this.getSizeAndScale(x,this.ctx.canvas.height,b),E=e.cachedCanvases.getCanvas("pattern",N.size,S.size),C=E.context,A=s.createCanvasGraphics(C);if(A.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(A,r,a),C.translate(-N.scale*c,-S.scale*d),A.transform(N.scale,0,0,S.scale,0,0),C.save(),this.clipBbox(A,c,d,u,h),A.baseTransform=Bb(A.ctx),A.executeOperatorList(n),A.endDrawing(),C.restore(),w||_){const t=E.canvas;w&&(y=o),_&&(x=l);const n=this.getSizeAndScale(y,this.ctx.canvas.width,v),r=this.getSizeAndScale(x,this.ctx.canvas.height,b),i=n.size,a=r.size,s=e.cachedCanvases.getCanvas("pattern-workaround",i,a),u=s.context,h=w?Math.floor(p/o):0,f=_?Math.floor(m/l):0;for(let e=0;e<=h;e++)for(let n=0;n<=f;n++)u.drawImage(t,i*e,a*n,i,a,0,0,i,a);return{canvas:s.canvas,scaleX:n.scale,scaleY:r.scale,offsetX:c,offsetY:d}}return{canvas:E.canvas,scaleX:N.scale,scaleY:S.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,t,n){const r=Math.max(Q_.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const a=r-t,s=i-n;e.ctx.rect(t,n,a,s),e.current.updateRectMinMax(Bb(e.ctx),[t,n,r,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case V_:const e=this.ctx;r.fillStyle=e.fillStyle,r.strokeStyle=e.strokeStyle,i.fillColor=e.fillStyle,i.strokeColor=e.strokeStyle;break;case G_:const a=lb.makeHexColor(n[0],n[1],n[2]);r.fillStyle=a,r.strokeStyle=a,i.fillColor=a,i.strokeColor=a;break;default:throw new tb("Unsupported paint type: ".concat(t))}}getPattern(e,t,n,r){let i=n;r!==I_&&(i=lb.transform(i,t.baseTransform),this.matrix&&(i=lb.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let s=new DOMMatrix(i);s=s.translate(a.offsetX,a.offsetY),s=s.scale(1/a.scaleX,1/a.scaleY);const o=e.createPattern(a.canvas,"repeat");return o.setTransform(s),o}}function K_(e){let{src:t,srcPos:n=0,dest:r,width:i,height:a,nonBlackColor:s=4294967295,inverseDecode:o=!1}=e;const l=sb.isLittleEndian?4278190080:255,[c,d]=o?[s,l]:[l,s],u=i>>3,h=7&i,p=t.length;r=new Uint32Array(r.buffer);let m=0;for(let f=0;f<a;f++){for(const i=n+u;n<i;n++){const e=n<p?t[n]:255;r[m++]=128&e?d:c,r[m++]=64&e?d:c,r[m++]=32&e?d:c,r[m++]=16&e?d:c,r[m++]=8&e?d:c,r[m++]=4&e?d:c,r[m++]=2&e?d:c,r[m++]=1&e?d:c}if(0===h)continue;const e=n<p?t[n++]:255;for(let t=0;t<h;t++)r[m++]=e&1<<7-t?d:c}return{srcPos:n,destPos:m}}Be(Q_,"MAX_PATTERN_SIZE",3e3);const Y_=16;class X_{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function J_(e,t,n,r,i,a,s,o,l,c){const[d,u,h,p,m,f]=Bb(e);if(0===u&&0===h){const g=s*d+m,v=Math.round(g),b=o*p+f,y=Math.round(b),x=(s+l)*d+m,w=Math.abs(Math.round(x)-v)||1,_=(o+c)*p+f,k=Math.abs(Math.round(_)-y)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(p),v,y),e.drawImage(t,n,r,i,a,0,0,w,k),e.setTransform(d,u,h,p,m,f),[w,k]}if(0===d&&0===p){const g=o*h+m,v=Math.round(g),b=s*u+f,y=Math.round(b),x=(o+c)*h+m,w=Math.abs(Math.round(x)-v)||1,_=(s+l)*u+f,k=Math.abs(Math.round(_)-y)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,y),e.drawImage(t,n,r,i,a,0,0,k,w),e.setTransform(d,u,h,p,m,f),[k,w]}e.drawImage(t,n,r,i,a,s,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,p)*c]}class $_{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Gg,this.textMatrixScale=1,this.fontMatrix=Qg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ov,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=lb.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=lb.applyTransform(t,e),r=lb.applyTransform(t.slice(2),e),i=lb.applyTransform([t[0],t[3]],e),a=lb.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],i[0],a[0]),this.minY=Math.min(this.minY,n[1],r[1],i[1],a[1]),this.maxX=Math.max(this.maxX,n[0],r[0],i[0],a[0]),this.maxY=Math.max(this.maxY,n[1],r[1],i[1],a[1])}updateScalingPathMinMax(e,t){lb.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,i,a,s,o,l,c){const d=lb.bezierBoundingBox(t,n,r,i,a,s,o,l,c);c||this.updateRectMinMax(e,d)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===L_){t||Vv("Stroke bounding box must include transform.");const e=lb.singularValueDecompose2dScale(t),r=e[0]*this.lineWidth/2,i=e[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=lb.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return lb.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Z_(e,t){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,r=t.width,i=n%Y_,a=(n-i)/Y_,s=0===i?a:a+1,o=e.createImageData(r,Y_);let l,c=0;const d=t.data,u=o.data;let h,p,m,f;if(t.kind===pv.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),f=n.length,g=r+7>>3,v=4294967295,b=sb.isLittleEndian?4278190080:255;for(h=0;h<s;h++){for(m=h<a?Y_:i,l=0,p=0;p<m;p++){const e=t-c;let i=0;const a=e>g?r:8*e-7,s=-8&a;let o=0,u=0;for(;i<s;i+=8)u=d[c++],n[l++]=128&u?v:b,n[l++]=64&u?v:b,n[l++]=32&u?v:b,n[l++]=16&u?v:b,n[l++]=8&u?v:b,n[l++]=4&u?v:b,n[l++]=2&u?v:b,n[l++]=1&u?v:b;for(;i<a;i++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:b,o>>=1}for(;l<f;)n[l++]=0;e.putImageData(o,0,h*Y_)}}else if(t.kind===pv.RGBA_32BPP){for(p=0,f=r*Y_*4,h=0;h<a;h++)u.set(d.subarray(c,c+f)),c+=f,e.putImageData(o,0,p),p+=Y_;h<s&&(f=r*i*4,u.set(d.subarray(c,c+f)),e.putImageData(o,0,p))}else{if(t.kind!==pv.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(m=Y_,f=r*m,h=0;h<s;h++){for(h>=a&&(m=i,f=r*m),l=0,p=f;p--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*Y_)}}}function ek(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,r=t.width,i=n%Y_,a=(n-i)/Y_,s=0===i?a:a+1,o=e.createImageData(r,Y_);let l=0;const c=t.data,d=o.data;for(let u=0;u<s;u++){const t=u<a?Y_:i;({srcPos:l}=K_({src:c,srcPos:l,dest:d,width:r,height:t,nonBlackColor:0})),e.putImageData(o,0,u*Y_)}}function tk(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function nk(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!Vg){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function rk(e,t){if(t)return!0;const n=lb.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Nb.PDF_TO_CSS_UNITS);return n[0]<=r&&n[1]<=r}const ik=["butt","round","square"],ak=["miter","round","bevel"],sk={},ok={};var lk=new WeakSet;class ck{constructor(e,t,n,r,i,a,s,o){let{optionalContentConfig:l,markedContentStack:c=null}=a;Ng(this,lk),this.ctx=e,this.current=new $_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new X_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:r=!1,background:i=null}=e;const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,r){const e=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Bb(this.compositeCtx))}this.ctx.save(),nk(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Bb(this.ctx)}executeOperatorList(e,t,n,r){const i=e.argsArray,a=e.fnArray;let s=t||0;const o=i.length;if(o===s)return s;const l=o-s>10&&"function"===typeof n,c=l?Date.now()+15:0;let d=0;const u=this.commonObjs,h=this.objs;let p;for(;;){if(void 0!==r&&s===r.nextBreakPoint)return r.breakIt(s,n),s;if(p=a[s],p!==Fv.dependency)this[p].apply(this,i[s]);else for(const e of i[s]){const t=e.startsWith("g_")?u:h;if(!t.has(e))return t.get(e,n),s}if(s++,s===o)return s;if(l&&++d>10){if(Date.now()>c)return n(),s;d=0}}}endDrawing(){Eg(lk,this,dk).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),Eg(lk,this,uk).call(this)}_scaleImage(e,t){var n,r;const i=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,a=null!==(r=e.height)&&void 0!==r?r:e.displayHeight;let s,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=i,u=a,h="prescale1";for(;l>2&&d>1||c>2&&u>1;){let t=d,n=u;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),s=this.cachedCanvases.getCanvas(h,t,n),o=s.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,u,0,0,t,n),e=s.canvas,d=t,u=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,i=this.current.fillColor,a=this.current.patternFill,s=Bb(t);let o,l,c,d;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(a?s:[s.slice(0,4),i]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!a){return{canvas:n,offsetX:Math.round(Math.min(s[0],s[2])+s[4]),offsetY:Math.round(Math.min(s[1],s[3])+s[5])}}c=n}c||(d=this.cachedCanvases.getCanvas("maskCanvas",n,r),ek(d.context,e));let u=lb.transform(s,[1/n,0,0,-1/r,0,0]);u=lb.transform(u,[1,0,0,1,0,-r]);const[h,p,m,f]=lb.getAxialAlignedBoundingBox([0,0,n,r],u),g=Math.round(m-h)||1,v=Math.round(f-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",g,v),y=b.context,x=h,w=p;y.translate(-x,-w),y.transform(...u),c||(c=this._scaleImage(d.canvas,Ub(y)),c=c.img,o&&a&&o.set(l,c)),y.imageSmoothingEnabled=rk(Bb(y),e.interpolate),J_(y,c,0,0,c.width,c.height,0,0,n,r),y.globalCompositeOperation="source-in";const _=lb.transform(Ub(y),[1,0,0,1,-x,-w]);return y.fillStyle=a?i.getPattern(t,this,_,R_):i,y.fillRect(0,0,n,r),o&&!a&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(x),offsetY:Math.round(w)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=ik[e]}setLineJoin(e){this.ctx.lineJoin=ak[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const i=this.ctx;i.setTransform(...Bb(this.suspendedCtx)),tk(this.suspendedCtx,i),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,i,a,s){t.transform(e,n,r,i,a,s),this.__originalTransform(e,n,r,i,a,s)},e.setTransform=function(e,n,r,i,a,s){t.setTransform(e,n,r,i,a,s),this.__originalSetTransform(e,n,r,i,a,s)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,i,a,s){t.bezierCurveTo(e,n,r,i,a,s),this.__originalBezierCurveTo(e,n,r,i,a,s)},e.rect=function(e,n,r,i){t.rect(e,n,r,i),this.__originalRect(e,n,r,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),tk(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],a=r[1],s=r[2]-i,o=r[3]-a;0!==s&&0!==o&&(this.genericComposeSMask(t.context,n,s,o,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,a,s,o,l,c,d){let u=e.canvas,h=o-c,p=l-d;if(a){const t=lb.makeHexColor(...a);if(h<0||p<0||h+n>u.width||p+r>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,r),i=e.context;i.drawImage(u,-h,-p),i.globalCompositeOperation="destination-atop",i.fillStyle=t,i.fillRect(0,0,n,r),i.globalCompositeOperation="source-over",u=e.canvas,h=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const i=new Path2D;i.rect(h,p,n,r),e.clip(i),e.globalCompositeOperation="destination-atop",e.fillStyle=t,e.fillRect(h,p,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===i&&s?t.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===i&&(t.filter=this.filterFactory.addLuminosityFilter(s));const m=new Path2D;m.rect(o,l,n,r),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(u,h,p,n,r,o,l,n,r),t.restore()}save(){this.inSMaskMode?(tk(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),tk(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,i,a){this.ctx.transform(e,t,n,r,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,i=this.current;let a,s,o=i.x,l=i.y;const c=Bb(r),d=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],u=d?n.slice(0):null;for(let h=0,p=0,m=e.length;h<m;h++)switch(0|e[h]){case Fv.rectangle:o=t[p++],l=t[p++];const e=t[p++],n=t[p++],h=o+e,m=l+n;r.moveTo(o,l),0===e||0===n?r.lineTo(h,m):(r.lineTo(h,l),r.lineTo(h,m),r.lineTo(o,m)),d||i.updateRectMinMax(c,[o,l,h,m]),r.closePath();break;case Fv.moveTo:o=t[p++],l=t[p++],r.moveTo(o,l),d||i.updatePathMinMax(c,o,l);break;case Fv.lineTo:o=t[p++],l=t[p++],r.lineTo(o,l),d||i.updatePathMinMax(c,o,l);break;case Fv.curveTo:a=o,s=l,o=t[p+4],l=t[p+5],r.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],o,l),i.updateCurvePathMinMax(c,a,s,t[p],t[p+1],t[p+2],t[p+3],o,l,u),p+=6;break;case Fv.curveTo2:a=o,s=l,r.bezierCurveTo(o,l,t[p],t[p+1],t[p+2],t[p+3]),i.updateCurvePathMinMax(c,a,s,o,l,t[p],t[p+1],t[p+2],t[p+3],u),o=t[p+2],l=t[p+3],p+=4;break;case Fv.curveTo3:a=o,s=l,o=t[p+2],l=t[p+3],r.bezierCurveTo(t[p],t[p+1],o,l,o,l),i.updateCurvePathMinMax(c,a,s,t[p],t[p+1],o,l,o,l,u),p+=4;break;case Fv.closePath:r.closePath()}d&&i.updateScalingPathMinMax(c,u),i.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&null!==n&&void 0!==n&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,Ub(t),L_),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let r=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,Ub(t),R_),r=!0);const i=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==i&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(i)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=sk}eoClip(){this.pendingClip=ok}beginText(){this.current.textMatrix=Gg,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error("Can't find font for ".concat(e));if(i.fontMatrix=r.fontMatrix||Qg,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||Hv("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const a=r.loadedName||"sans-serif",s=(null===(n=r.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(a,'", ').concat(r.fallbackName);let o="normal";r.black?o="900":r.bold&&(o="bold");const l=r.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(s)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,i,a){this.current.textMatrix=[e,t,n,r,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r){const i=this.ctx,a=this.current,s=a.font,o=a.textRenderingMode,l=a.fontSize/a.fontSizeScale,c=o&uv,d=!!(o&hv),u=a.patternFill&&!s.missingFile;let h;if((s.disableFontFace||d||u)&&(h=s.getPathGenerator(this.commonObjs,e)),s.disableFontFace||u?(i.save(),i.translate(t,n),i.beginPath(),h(i,l),r&&i.setTransform(...r),c!==ov&&c!==cv||i.fill(),c!==lv&&c!==cv||i.stroke(),i.restore()):(c!==ov&&c!==cv||i.fillText(e,t,n),c!==lv&&c!==cv||i.strokeText(e,t,n)),d){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Bb(i),x:t,y:n,fontSize:l,addToPath:h})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Kv(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(0===r)return;const i=this.ctx,a=t.fontSizeScale,s=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,d=e.length,u=n.vertical,h=u?1:-1,p=n.defaultVMetrics,m=r*t.fontMatrix[0],f=t.textRenderingMode===ov&&!n.disableFontFace&&!t.patternFill;let g;if(i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),l>0?i.scale(c,-1):i.scale(c,1),t.patternFill){i.save();const e=t.fillColor.getPattern(i,this,Ub(i),R_);g=Bb(i),i.restore(),i.fillStyle=e}let v=t.lineWidth;const b=t.textMatrixScale;if(0===b||0===v){const e=t.textRenderingMode&uv;e!==lv&&e!==cv||(v=this.getSinglePixelWidth())}else v/=b;if(1!==a&&(i.scale(a,a),v/=a),i.lineWidth=v,n.isInvalidPDFjsFont){const n=[];let r=0;for(const t of e)n.push(t.unicode),r+=t.width;return i.fillText(n.join(""),0,0),t.x+=r*m*c,i.restore(),void this.compose()}let y,x=0;for(y=0;y<d;++y){const t=e[y];if("number"===typeof t){x+=h*t*r/1e3;continue}let c=!1;const d=(t.isSpace?o:0)+s,v=t.fontChar,b=t.accent;let w,_,k=t.width;if(u){const e=t.vmetric||p,n=-(t.vmetric?e[1]:.5*k)*m,r=e[2]*m;k=e?-e[0]:k,w=n/a,_=(x+r)/a}else w=x/a,_=0;if(n.remeasure&&k>0){const e=1e3*i.measureText(v).width/r*a;if(k<e&&this.isFontSubpixelAAEnabled){const t=k/e;c=!0,i.save(),i.scale(t,1),w/=t}else k!==e&&(w+=(k-e)/2e3*r/a)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(f&&!b)i.fillText(v,w,_);else if(this.paintChar(v,w,_,g),b){const e=w+r*b.offset.x/a,t=_-r*b.offset.y/a;this.paintChar(b.fontChar,e,t,g)}x+=u?k*m-d*l:k*m+d*l,c&&i.restore()}u?t.y-=x:t.x+=x*c,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,i=n.fontSize,a=n.fontDirection,s=r.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*a,d=n.fontMatrix||Qg,u=e.length;let h,p,m,f;if(!(n.textRenderingMode===dv)&&0!==i){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,a),h=0;h<u;++h){if(p=e[h],"number"===typeof p){f=s*p*i/1e3,this.ctx.translate(f,0),n.x+=f*c;continue}const a=(p.isSpace?l:0)+o,u=r.charProcOperatorList[p.operatorListId];if(!u){Hv('Type3 character "'.concat(p.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=p,this.save(),t.scale(i,i),t.transform(...d),this.executeOperatorList(u),this.restore());m=lb.applyTransform([p.width,0],d)[0]*i+a,t.translate(m,0),n.x+=m*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,a){this.ctx.rect(n,r,i-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],r=this.baseTransform||Bb(this.ctx),i={createCanvasGraphics:e=>new ck(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Q_(e,n,this.ctx,i,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=lb.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=lb.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new q_(e);case"Mesh":return new W_(e);case"Dummy":return new H_}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Ub(t),I_);const r=Ub(t);if(r){const{width:e,height:n}=t.canvas,[i,a,s,o]=lb.getAxialAlignedBoundingBox([0,0,e,n],r);this.ctx.fillRect(i,a,s-i,o-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Vv("Should not call beginInlineImage")}beginImageData(){Vv("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Bb(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax(Bb(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Wv("TODO: Support non-isolated groups."),e.knockout&&Hv("Knockout groups not supported.");const n=Bb(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=lb.getAxialAlignedBoundingBox(e.bbox,Bb(t));const i=[0,0,t.canvas.width,t.canvas.height];r=lb.intersect(r,i)||[0,0,0,0];const a=Math.floor(r[0]),s=Math.floor(r[1]),o=Math.max(Math.ceil(r[2])-a,1),l=Math.max(Math.ceil(r[3])-s,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,o,l),u=d.context;u.translate(-a,-s),u.transform(...n),e.smask?this.smaskStack.push({canvas:d.canvas,context:u,offsetX:a,offsetY:s,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,s),t.save()),tk(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=Bb(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=lb.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,r,i){if(Eg(lk,this,dk).call(this),nk(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const r=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=r,t[3]=a;const[i,s]=lb.singularValueDecompose2dScale(Bb(this.ctx)),{viewportScale:o}=this,l=Math.ceil(r*this.outputScaleX*o),c=Math.ceil(a*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,c);const{canvas:d,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(i,0,0,-s,0,a*s),nk(this.ctx)}else nk(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],r,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new $_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Eg(lk,this,uk).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=t+1;let a,s,o,l=new Uint8Array(i*(n+1));const c=t+7&-8;let d=new Uint8Array(c*n),u=0;for(const f of e.data){let e=128;for(;e>0;)d[u++]=f&e?0:255,e>>=1}let h=0;for(u=0,0!==d[u]&&(l[0]=1,++h),s=1;s<t;s++)d[u]!==d[u+1]&&(l[s]=d[u]?2:1,++h),u++;for(0!==d[u]&&(l[s]=2,++h),a=1;a<n;a++){u=a*c,o=a*i,d[u-c]!==d[u]&&(l[o]=d[u]?1:8,++h);let e=(d[u]?4:0)+(d[u-c]?8:0);for(s=1;s<t;s++)e=(e>>2)+(d[u+1]?4:0)+(d[u-c+1]?8:0),r[e]&&(l[o+s]=r[e],++h),u++;if(d[u-c]!==d[u]&&(l[o+s]=d[u]?2:4,++h),h>1e3)return null}for(u=c*(n-1),o=a*i,0!==d[u]&&(l[o]=8,++h),s=1;s<t;s++)d[u]!==d[u+1]&&(l[o+s]=d[u]?4:8,++h),u++;if(0!==d[u]&&(l[o+s]=4,++h),h>1e3)return null;const p=new Int32Array([0,i,-1,0,-i,0,0,0,1]),m=new Path2D;for(a=0;h&&a<=n;a++){let e=a*i;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;m.moveTo(e%i,a);const r=e;let s=l[e];do{const t=p[s];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(s=n,l[e]=0):(s=n&51*s>>4,l[e]&=s>>2|s<<2),m.lineTo(e%i,e/i|0),l[e]||--h}while(r!==e);--a}return d=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(m),e.beginPath(),e.restore()}}(e)),r.compiled))return void r.compiled(n);const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const s=this.ctx;s.save();const o=Bb(s);s.transform(t,n,r,i,0,0);const l=this._createMaskCanvas(e);s.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,d=a.length;c<d;c+=2){const e=lb.transform(o,[t,n,r,i,a[c],a[c+1]]),[d,u]=lb.applyTransform([0,0],e);s.drawImage(l.canvas,d,u)}s.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:e,width:a,height:s,transform:o}=i,l=this.cachedCanvases.getCanvas("maskCanvas",a,s),c=l.context;c.save();ek(c,this.getObject(e,i)),c.globalCompositeOperation="source-in",c.fillStyle=r?n.getPattern(c,this,Ub(t),R_):n,c.fillRect(0,0,a,s),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),J_(t,l.canvas,0,0,a,s,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):Hv("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i)return void Hv("Dependent image isn't ready yet");const a=i.width,s=i.height,o=[];for(let l=0,c=r.length;l<c;l+=2)o.push({transform:[t,0,0,n,r[l],r[l+1]],x:0,y:0,w:a,h:s});this.paintInlineImageXObjectGroup(i,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!Vg){const{filter:e}=r;"none"!==e&&""!==e&&(r.filter="none")}let i;if(r.scale(1/t,-1/n),e.bitmap)i=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)i=e;else{const r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Z_(r,e),i=this.applyTransferMapsToCanvas(r)}const a=this._scaleImage(i,Ub(r));r.imageSmoothingEnabled=rk(Bb(r),e.interpolate),J_(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Z_(i,e),r=this.applyTransferMapsToCanvas(i)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),J_(n,r,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===ok?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Bb(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let a,s;if(0===n&&0===r){const n=Math.abs(t),r=Math.abs(i);if(n===r)if(0===e)a=s=1/n;else{const t=n*e;a=s=t<1?1/t:1}else if(0===e)a=1/n,s=1/r;else{const t=n*e,i=r*e;a=t<1?1/t:1,s=i<1?1/i:1}}else{const o=Math.abs(t*i-n*r),l=Math.hypot(t,n),c=Math.hypot(r,i);if(0===e)a=c/o,s=l/o;else{const t=e*o;a=c>t?c/t:1,s=l>t?l/t:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=s}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,i]=this.getScaleForStroking();if(t.lineWidth=n||1,1===r&&1===i)return void t.stroke();const a=t.getLineDash();if(e&&t.save(),t.scale(r,i),a.length>0){const e=Math.max(r,i);t.setLineDash(a.map((t=>t/e))),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function dk(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function uk(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}for(const n in Fv)void 0!==ck.prototype[n]&&(ck.prototype[Fv[n]]=ck.prototype[n]);class hk{static get workerPort(){return Eg(hk,this,pk)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");pk._=Eg(hk,this,e)}static get workerSrc(){return Eg(hk,this,mk)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");mk._=Eg(hk,this,e)}}var pk={_:null},mk={_:""};const fk=1,gk=2,vk=1,bk=2,yk=3,xk=4,wk=5,_k=6,kk=7,jk=8;function Nk(e){switch(e instanceof Error||"object"===typeof e&&null!==e||Vv('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new nb(e.message);case"MissingPDFException":return new Zv(e.message);case"PasswordException":return new Xv(e.message,e.code);case"UnexpectedResponseException":return new eb(e.message,e.status);case"UnknownErrorException":return new Jv(e.message,e.details);default:return new Jv(e.message,e.toString())}}var Sk=new WeakMap,Ek=new WeakSet;class Ck{constructor(e,t,n){Ng(this,Ek),Sg(this,Sk,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Eg(Ek,this,Ak).bind(this),{signal:Ag(Sk,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,a=this.sourceName,s=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[i]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:a,targetName:s,action:e,streamId:i,data:t,desiredSize:n.desiredSize},r),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[i].pullCall=t,o.postMessage({sourceName:a,targetName:s,stream:_k,streamId:i,desiredSize:e.desiredSize}),t.promise},cancel:e=>{Gv(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[i].cancelCall=t,this.streamControllers[i].isClosed=!0,o.postMessage({sourceName:a,targetName:s,stream:vk,streamId:i,reason:Nk(e)}),t.promise}},n)}destroy(){var e;null===(e=Ag(Sk,this))||void 0===e||e.abort(),Tg(Sk,this,null)}}function Ak(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void Eg(Ek,this,Ok).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===fk)n.resolve(t.data);else{if(t.callback!==gk)throw new Error("Unexpected callback case");n.reject(Nk(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,r=t.sourceName,i=this.comObj;new Promise((function(e){e(n(t.data))})).then((function(n){i.postMessage({sourceName:e,targetName:r,callback:fk,callbackId:t.callbackId,data:n})}),(function(n){i.postMessage({sourceName:e,targetName:r,callback:gk,callbackId:t.callbackId,reason:Nk(n)})}))}else t.streamId?Eg(Ek,this,Tk).call(this,t):n(t.data)}function Tk(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this,s=this.actionHandler[e.action],o={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=a,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:xk,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:yk,streamId:t}),delete a.streamSinks[t])},error(e){Gv(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:wk,streamId:t,reason:Nk(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,new Promise((function(t){t(s(e.data,o))})).then((function(){i.postMessage({sourceName:n,targetName:r,stream:jk,streamId:t,success:!0})}),(function(e){i.postMessage({sourceName:n,targetName:r,stream:jk,streamId:t,reason:Nk(e)})}))}function Ok(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case jk:e.success?a.startCall.resolve():a.startCall.reject(Nk(e.reason));break;case kk:e.success?a.pullCall.resolve():a.pullCall.reject(Nk(e.reason));break;case _k:if(!s){i.postMessage({sourceName:n,targetName:r,stream:kk,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,new Promise((function(e){var t;e(null===(t=s.onPull)||void 0===t?void 0:t.call(s))})).then((function(){i.postMessage({sourceName:n,targetName:r,stream:kk,streamId:t,success:!0})}),(function(e){i.postMessage({sourceName:n,targetName:r,stream:kk,streamId:t,reason:Nk(e)})}));break;case xk:if(Gv(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case yk:if(Gv(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),Eg(Ek,this,Pk).call(this,a,t);break;case wk:Gv(a,"error should have stream controller"),a.controller.error(Nk(e.reason)),Eg(Ek,this,Pk).call(this,a,t);break;case bk:e.success?a.cancelCall.resolve():a.cancelCall.reject(Nk(e.reason)),Eg(Ek,this,Pk).call(this,a,t);break;case vk:if(!s)break;new Promise((function(t){var n;t(null===(n=s.onCancel)||void 0===n?void 0:n.call(s,Nk(e.reason)))})).then((function(){i.postMessage({sourceName:n,targetName:r,stream:bk,streamId:t,success:!0})}),(function(e){i.postMessage({sourceName:n,targetName:r,stream:bk,streamId:t,reason:Nk(e)})})),s.sinkCapability.reject(Nk(e.reason)),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function Pk(e,t){var n,r,i;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(r=e.pullCall)||void 0===r?void 0:r.promise,null===(i=e.cancelCall)||void 0===i?void 0:i.promise]),delete this.streamControllers[t]}var Mk=new WeakMap,Dk=new WeakMap;class Rk{constructor(e){let{parsedData:t,rawData:n}=e;Sg(this,Mk,void 0),Sg(this,Dk,void 0),Tg(Mk,this,t),Tg(Dk,this,n)}getRaw(){return Ag(Dk,this)}get(e){var t;return null!==(t=Ag(Mk,this).get(e))&&void 0!==t?t:null}getAll(){return ab(Ag(Mk,this))}has(e){return Ag(Mk,this).has(e)}}const Lk=Symbol("INTERNAL");var Ik=new WeakMap,Fk=new WeakMap,zk=new WeakMap,qk=new WeakMap;class Bk{constructor(e,t){let{name:n,intent:r,usage:i,rbGroups:a}=t;Sg(this,Ik,!1),Sg(this,Fk,!1),Sg(this,zk,!1),Sg(this,qk,!0),Tg(Ik,this,!!(e&Xg)),Tg(Fk,this,!!(e&Jg)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(Ag(zk,this))return Ag(qk,this);if(!Ag(qk,this))return!1;const{print:e,view:t}=this.usage;return Ag(Ik,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!Ag(Fk,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Lk&&Vv("Internal method `_setVisible` called."),Tg(zk,this,n),Tg(qk,this,t)}}var Uk=new WeakMap,Wk=new WeakMap,Hk=new WeakMap,Vk=new WeakMap,Gk=new WeakSet;class Qk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xg;if(Ng(this,Gk),Sg(this,Uk,null),Sg(this,Wk,new Map),Sg(this,Hk,null),Sg(this,Vk,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,Tg(Vk,this,e.order);for(const n of e.groups)Ag(Wk,this).set(n.id,new Bk(t,n));if("OFF"===e.baseState)for(const e of Ag(Wk,this).values())e._setVisible(Lk,!1);for(const t of e.on)Ag(Wk,this).get(t)._setVisible(Lk,!0);for(const t of e.off)Ag(Wk,this).get(t)._setVisible(Lk,!1);Tg(Hk,this,this.getHash())}}isVisible(e){if(0===Ag(Wk,this).size)return!0;if(!e)return Wv("Optional content group not defined."),!0;if("OCG"===e.type)return Ag(Wk,this).has(e.id)?Ag(Wk,this).get(e.id).visible:(Hv("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return Eg(Gk,this,Kk).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!Ag(Wk,this).has(t))return Hv("Optional content group not found: ".concat(t)),!0;if(Ag(Wk,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!Ag(Wk,this).has(t))return Hv("Optional content group not found: ".concat(t)),!0;if(!Ag(Wk,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!Ag(Wk,this).has(t))return Hv("Optional content group not found: ".concat(t)),!0;if(!Ag(Wk,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!Ag(Wk,this).has(t))return Hv("Optional content group not found: ".concat(t)),!0;if(Ag(Wk,this).get(t).visible)return!1}return!0}return Hv("Unknown optional content policy ".concat(e.policy,".")),!0}return Hv("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ag(Wk,this).get(e);if(r){if(n&&t&&r.rbGroups.length)for(const t of r.rbGroups)for(const n of t){var i;if(n!==e)null===(i=Ag(Wk,this).get(n))||void 0===i||i._setVisible(Lk,!1,!0)}r._setVisible(Lk,!!t,!0),Tg(Uk,this,null)}else Hv("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:r}=e;for(const i of n){switch(i){case"ON":case"OFF":case"Toggle":t=i;continue}const e=Ag(Wk,this).get(i);if(e)switch(t){case"ON":this.setVisibility(i,!0,r);break;case"OFF":this.setVisibility(i,!1,r);break;case"Toggle":this.setVisibility(i,!e.visible,r)}}Tg(Uk,this,null)}get hasInitialVisibility(){return null===Ag(Hk,this)||this.getHash()===Ag(Hk,this)}getOrder(){return Ag(Wk,this).size?Ag(Vk,this)?Ag(Vk,this).slice():[...Ag(Wk,this).keys()]:null}getGroups(){return Ag(Wk,this).size>0?ab(Ag(Wk,this)):null}getGroup(e){return Ag(Wk,this).get(e)||null}getHash(){if(null!==Ag(Uk,this))return Ag(Uk,this);const e=new Vw;for(const[t,n]of Ag(Wk,this))e.update("".concat(t,":").concat(n.visible));return Tg(Uk,this,e.hexdigest())}}function Kk(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const t=e[r];let i;if(Array.isArray(t))i=Eg(Gk,this,Kk).call(this,t);else{if(!Ag(Wk,this).has(t))return Hv("Optional content group not found: ".concat(t)),!0;i=Ag(Wk,this).get(t).visible}switch(n){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return"And"===n}class Yk{constructor(e,t){let{disableRange:n=!1,disableStream:r=!1}=t;Gv(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,(null===a||void 0===a?void 0:a.length)>0){const e=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),e.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),e.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),e.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{Gv(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(r),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,r,i;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(r=this._fullRequestReader)||void 0===r||null===(i=r.onProgress)||void 0===i||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Gv(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Xk(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Jk(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class Xk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=Tb(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Jk{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function $k(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const r in t){const e=t[r];void 0!==e&&n.append(r,e)}return n}function Zk(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:r,disableRange:i}=e;const a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(s))return a;if(a.suggestedLength=s,s<=2*r)return a;if(i||!n)return a;if("bytes"!==t.get("Accept-Ranges"))return a;return"identity"!==(t.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a}function ej(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=r("filename\\*","i").exec(e);if(n){n=n[1];let e=s(n);return e=unescape(e),e=o(e),e=l(e),a(e)}if(n=function(e){const t=[];let n;const i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=i.exec(e));){let[,e,r,i]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,i]}const a=[];for(let r=0;r<t.length&&r in t;++r){let[e,n]=t[r];n=s(n),e&&(n=unescape(n),0===r&&(n=o(n))),a.push(n)}return a.join("")}(e),n)return a(l(n));if(n=r("filename","i").exec(e),n){n=n[1];let e=s(n);return e=l(e),a(e)}function r(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function i(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const r=new TextDecoder(e,{fatal:!0}),i=ib(n);n=r.decode(i),t=!1}catch(r){}}return n}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=i("utf-8",e),t&&(e=i("iso-8859-1",e))),e}function s(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:i(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return i(t,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch(a){}return i(t,r)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(Tb(e))return e}return null}function tj(e,t){return 404===e||0===e&&t.startsWith("file:")?new Zv('Missing PDF "'+t+'".'):new eb("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function nj(e){return 200===e||206===e}function rj(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function ij(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Hv("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class aj{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=$k(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Gv(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new sj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new oj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class sj{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,rj(n,this._withCredentials,this._abortController)).then((t=>{if(!nj(t.status))throw tj(t.status,r);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:i,suggestedLength:a}=Zk({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=a||this._contentLength,this._filename=ej(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nb("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ij(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class oj{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range","bytes=".concat(t,"-").concat(n-1));const a=r.url;fetch(a,rj(i,this._withCredentials,this._abortController)).then((e=>{if(!nj(e.status))throw tj(e.status,a);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:ij(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class lj{constructor(e){let{url:t,httpHeaders:n,withCredentials:r}=e;this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=$k(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const i in n)r[i]=n[i];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const r=this.pendingRequests[e];r&&(null===(n=r.onProgress)||void 0===n||n.call(r,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==r.readyState)return;if(!(e in this.pendingRequests))return;var i;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void(null===(i=n.onError)||void 0===i||i.call(n,r.status));const a=r.status||200;var s;if(!(200===a&&206===n.expectedStatus)&&a!==n.expectedStatus)return void(null===(s=n.onError)||void 0===s||s.call(n,r.status));const o=function(e){const t=e.response;return"string"!==typeof t?t:ib(t).buffer}(r);if(206===a){const e=r.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:o})}else if(o)n.onDone({begin:0,chunk:o});else{var l;null===(l=n.onError)||void 0===l||l.call(n,r.status)}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class cj{constructor(e){this._source=e,this._manager=new lj(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Gv(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new dj(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new uj(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class dj{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map((e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}))),{allowRangeRequests:r,suggestedLength:i}=Zk({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=ej(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=tj(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class uj{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=tj(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const hj=/^[a-z][a-z0-9\-+.]+:/i;function pj(e,t,n){if("http:"===e.protocol){return M_.get("http").request(e,{headers:t},n)}return M_.get("https").request(e,{headers:t},n)}class mj{constructor(e){this.source=e,this.url=function(e){if(hj.test(e))return new URL(e);const t=M_.get("url");return new URL(t.pathToFileURL(e))}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.headers=$k(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Gv(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new yj(this):new vj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new xj(this,e,t):new bj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class fj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nb("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class gj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}class vj extends fj{constructor(e){super(e);const t=Object.fromEntries(e.headers);this._request=pj(this._url,t,(t=>{if(404===t.statusCode){const e=new Zv('Missing PDF "'.concat(this._url,'".'));return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=new Headers(this._readableStream.headers),{allowRangeRequests:r,suggestedLength:i}=Zk({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=i||this._contentLength,this._filename=ej(n)})),this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class bj extends gj{constructor(e,t,n){super(e);const r=Object.fromEntries(e.headers);r.Range="bytes=".concat(t,"-").concat(n-1);this._request=pj(this._url,r,(e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new Zv('Missing PDF "'.concat(this._url,'".'));this._storedError=e}})),this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class yj extends fj{constructor(e){super(e);const t=M_.get("fs");t.promises.lstat(this._url).then((e=>{this._contentLength=e.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()}),(e=>{"ENOENT"===e.code&&(e=new Zv('Missing PDF "'.concat(this._url,'".'))),this._storedError=e,this._headersCapability.reject(e)}))}}class xj extends gj{constructor(e,t,n){super(e);const r=M_.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}}const wj=30;var _j=new WeakMap,kj=new WeakMap,jj=new WeakMap,Nj=new WeakMap,Sj=new WeakMap,Ej=new WeakMap,Cj=new WeakMap,Aj=new WeakMap,Tj=new WeakMap,Oj=new WeakMap,Pj=new WeakMap,Mj=new WeakMap,Dj=new WeakMap,Rj=new WeakMap,Lj=new WeakMap,Ij=new WeakMap,Fj=new WeakMap,zj=new WeakMap,qj=new WeakSet;class Bj{constructor(e){var t;let{textContentSource:n,container:r,viewport:i}=e;if(Ng(this,qj),Sg(this,_j,Promise.withResolvers()),Sg(this,kj,null),Sg(this,jj,!1),Sg(this,Nj,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),Sg(this,Sj,null),Sg(this,Ej,null),Sg(this,Cj,0),Sg(this,Aj,0),Sg(this,Tj,null),Sg(this,Oj,null),Sg(this,Pj,0),Sg(this,Mj,0),Sg(this,Dj,Object.create(null)),Sg(this,Rj,[]),Sg(this,Lj,null),Sg(this,Ij,[]),Sg(this,Fj,new WeakMap),Sg(this,zj,null),n instanceof ReadableStream)Tg(Lj,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');Tg(Lj,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}Tg(kj,this,Tg(Oj,this,r)),Tg(Mj,this,i.scale*(globalThis.devicePixelRatio||1)),Tg(Pj,this,i.rotation),Tg(Ej,this,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:s,pageX:o,pageY:l}=i.rawDims;Tg(zj,this,[1,0,0,-1,-o,l+s]),Tg(Aj,this,a),Tg(Cj,this,s),Qj.call(Bj),Wb(r,i),Ag(_j,this).promise.finally((()=>{Zj._.delete(this),Tg(Ej,this,null),Tg(Dj,this,null)})).catch((()=>{}))}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=sb.platform;return Kv(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{Ag(Tj,this).read().then((t=>{var n;let{value:r,done:i}=t;i?Ag(_j,this).resolve():(null!==(n=Ag(Sj,this))&&void 0!==n||Tg(Sj,this,r.lang),Object.assign(Ag(Dj,this),r.styles),Eg(qj,this,Uj).call(this,r.items),e())}),Ag(_j,this).reject)};return Tg(Tj,this,Ag(Lj,this).getReader()),Zj._.add(this),e(),Ag(_j,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const r=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==Ag(Pj,this)&&(null===n||void 0===n||n(),Tg(Pj,this,i),Wb(Ag(Oj,this),{rotation:i})),r!==Ag(Mj,this)){null===n||void 0===n||n(),Tg(Mj,this,r);const e={div:null,properties:null,ctx:Vj.call(Bj,Ag(Sj,this))};for(const t of Ag(Ij,this))e.properties=Ag(Fj,this).get(t),e.div=t,Eg(qj,this,Hj).call(this,e)}}cancel(){var e;const t=new nb("TextLayer task cancelled.");null===(e=Ag(Tj,this))||void 0===e||e.cancel(t).catch((()=>{})),Tg(Tj,this,null),Ag(_j,this).reject(t)}get textDivs(){return Ag(Ij,this)}get textContentItemsStr(){return Ag(Rj,this)}static cleanup(){if(!(Eg(Bj,this,Zj)._.size>0)){Eg(Bj,this,Yj)._.clear();for(const{canvas:e}of Eg(Bj,this,Xj)._.values())e.remove();Eg(Bj,this,Xj)._.clear()}}}function Uj(e){var t,n;if(Ag(jj,this))return;null!==(n=(t=Ag(Ej,this)).ctx)&&void 0!==n||(t.ctx=Vj.call(Rg,Ag(Sj,this)));const r=Ag(Ij,this),i=Ag(Rj,this);for(const a of e){if(r.length>1e5)return Hv("Ignoring additional textDivs for performance reasons."),void Tg(jj,this,!0);if(void 0!==a.str)i.push(a.str),Eg(qj,this,Wj).call(this,a);else if("beginMarkedContentProps"===a.type||"beginMarkedContent"===a.type){const e=Ag(kj,this);Tg(kj,this,document.createElement("span")),Ag(kj,this).classList.add("markedContent"),null!==a.id&&Ag(kj,this).setAttribute("id","".concat(a.id)),e.append(Ag(kj,this))}else"endMarkedContent"===a.type&&Tg(kj,this,Ag(kj,this).parentNode)}}function Wj(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};Ag(Ij,this).push(t);const r=lb.transform(Ag(zj,this),e.transform);let i=Math.atan2(r[1],r[0]);const a=Ag(Dj,this)[e.fontName];a.vertical&&(i+=Math.PI/2);let s=Ag(Nj,this)&&a.fontSubstitution||a.fontFamily;s=Rg.fontFamilyMap.get(s)||s;const o=Math.hypot(r[2],r[3]),l=o*Kj.call(Rg,s,Ag(Sj,this));let c,d;0===i?(c=r[4],d=r[5]-l):(c=r[4]+l*Math.sin(i),d=r[5]-l*Math.cos(i));const u="calc(var(--scale-factor)*",h=t.style;Ag(kj,this)===Ag(Oj,this)?(h.left="".concat((100*c/Ag(Aj,this)).toFixed(2),"%"),h.top="".concat((100*d/Ag(Cj,this)).toFixed(2),"%")):(h.left="".concat(u).concat(c.toFixed(2),"px)"),h.top="".concat(u).concat(d.toFixed(2),"px)")),h.fontSize="".concat(u).concat(($j._*o).toFixed(2),"px)"),h.fontFamily=s,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,Ag(Nj,this)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),0!==i&&(n.angle=i*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=a.vertical?e.height:e.width),Ag(Fj,this).set(t,n),Ag(Ej,this).div=t,Ag(Ej,this).properties=n,Eg(qj,this,Hj).call(this,Ag(Ej,this)),n.hasText&&Ag(kj,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),Ag(kj,this).append(e)}}function Hj(e){const{div:t,properties:n,ctx:r}=e,{style:i}=t;let a="";if($j._>1&&(a="scale(".concat(1/$j._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=i,{canvasWidth:s,fontSize:o}=n;Gj.call(Rg,r,o*Ag(Mj,this),e);const{width:l}=r.measureText(t.textContent);l>0&&(a="scaleX(".concat(s*Ag(Mj,this)/l,") ").concat(a))}0!==n.angle&&(a="rotate(".concat(n.angle,"deg) ").concat(a)),a.length>0&&(i.transform=a)}function Vj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Eg(Rg,this,Xj)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),Eg(Rg,this,Xj)._.set(e,t),Eg(Rg,this,Jj)._.set(t,{size:0,family:""})}return t}function Gj(e,t,n){const r=Eg(Rg,this,Jj)._.get(e);t===r.size&&n===r.family||(e.font="".concat(t,"px ").concat(n),r.size=t,r.family=n)}function Qj(){if(null!==Eg(Rg,this,$j)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),$j._=Eg(Rg,this,e.getBoundingClientRect().height),e.remove()}function Kj(e,t){const n=Eg(Rg,this,Yj)._.get(e);if(n)return n;const r=Eg(Rg,this,Vj).call(this,t);r.canvas.width=r.canvas.height=wj,Eg(Rg,this,Gj).call(this,r,wj,e);const i=r.measureText("");let a=i.fontBoundingBoxAscent,s=Math.abs(i.fontBoundingBoxDescent);if(a){const t=a/(a+s);return Eg(Rg,this,Yj)._.set(e,t),r.canvas.width=r.canvas.height=0,t}r.strokeStyle="red",r.clearRect(0,0,wj,wj),r.strokeText("g",0,0);let o=r.getImageData(0,0,wj,wj).data;s=0;for(let c=o.length-1-3;c>=0;c-=4)if(o[c]>0){s=Math.ceil(c/4/wj);break}r.clearRect(0,0,wj,wj),r.strokeText("A",0,wj),o=r.getImageData(0,0,wj,wj).data,a=0;for(let c=0,d=o.length;c<d;c+=4)if(o[c]>0){a=wj-Math.floor(c/4/wj);break}r.canvas.width=r.canvas.height=0;const l=a?a/(a+s):.8;return Eg(Rg,this,Yj)._.set(e,l),l}Rg=Bj;var Yj={_:new Map},Xj={_:new Map},Jj={_:new WeakMap},$j={_:null},Zj={_:new Set};class eN{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var r;if(!n)return;let i=null;const a=n.name;if("#text"===a)i=n.value;else{if(!eN.shouldBuildText(a))return;null!==n&&void 0!==n&&null!==(r=n.attributes)&&void 0!==r&&r.textContent?i=n.attributes.textContent:n.value&&(i=n.value)}if(null!==i&&t.push({str:i}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const tN=65536,nN=Vg?class extends a_{_createCanvas(e,t){return M_.get("canvas").createCanvas(e,t)}}:class extends a_{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},rN=Vg?class extends s_{async _fetch(e){return D_(e)}}:o_,iN=Vg?class extends l_{}:class extends l_{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),Ng(this,g_),Sg(this,c_,void 0),Sg(this,d_,void 0),Sg(this,u_,void 0),Sg(this,h_,void 0),Sg(this,p_,void 0),Sg(this,m_,void 0),Sg(this,f_,0),Tg(h_,this,t),Tg(p_,this,n)}addFilter(e){var t,n;if(!e)return"none";let r=Cg(g_,this,v_).get(e);if(r)return r;const[i,a,s]=Eg(g_,this,x_).call(this,e),o=1===e.length?i:"".concat(i).concat(a).concat(s);if(r=Cg(g_,this,v_).get(o),r)return Cg(g_,this,v_).set(e,r),r;const l="g_".concat(Ag(h_,this),"_transfer_map_").concat((Tg(f_,this,(t=Ag(f_,this),n=t++,t)),n)),c=Eg(g_,this,w_).call(this,l);Cg(g_,this,v_).set(e,c),Cg(g_,this,v_).set(o,c);const d=Eg(g_,this,j_).call(this,l);return Eg(g_,this,S_).call(this,i,a,s,d),c}addHCMFilter(e,t){var n;const r="".concat(e,"-").concat(t),i="base";let a=Cg(g_,this,b_).get(i);if((null===(n=a)||void 0===n?void 0:n.key)===r)return a.url;var s;a?(null===(s=a.filter)||void 0===s||s.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},Cg(g_,this,b_).set(i,a));if(!e||!t)return a.url;const o=Eg(g_,this,C_).call(this,e);e=lb.makeHexColor(...o);const l=Eg(g_,this,C_).call(this,t);if(t=lb.makeHexColor(...l),Cg(g_,this,y_).style.color="","#000000"===e&&"#ffffff"===t||e===t)return a.url;const c=new Array(256);for(let m=0;m<=255;m++){const e=m/255;c[m]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),u="g_".concat(Ag(h_,this),"_hcm_filter"),h=a.filter=Eg(g_,this,j_).call(this,u);Eg(g_,this,S_).call(this,d,d,d,h),Eg(g_,this,k_).call(this,h);const p=(e,t)=>{const n=o[e]/255,r=l[e]/255,i=new Array(t+1);for(let a=0;a<=t;a++)i[a]=n+a/t*(r-n);return i.join(",")};return Eg(g_,this,S_).call(this,p(0,5),p(1,5),p(2,5),h),a.url=Eg(g_,this,w_).call(this,u),a.url}addAlphaFilter(e){var t,n;let r=Cg(g_,this,v_).get(e);if(r)return r;const[i]=Eg(g_,this,x_).call(this,[e]),a="alpha_".concat(i);if(r=Cg(g_,this,v_).get(a),r)return Cg(g_,this,v_).set(e,r),r;const s="g_".concat(Ag(h_,this),"_alpha_map_").concat((Tg(f_,this,(t=Ag(f_,this),n=t++,t)),n)),o=Eg(g_,this,w_).call(this,s);Cg(g_,this,v_).set(e,o),Cg(g_,this,v_).set(a,o);const l=Eg(g_,this,j_).call(this,s);return Eg(g_,this,E_).call(this,i,l),o}addLuminosityFilter(e){var t,n;let r,i,a=Cg(g_,this,v_).get(e||"luminosity");if(a)return a;if(e?([r]=Eg(g_,this,x_).call(this,[e]),i="luminosity_".concat(r)):i="luminosity",a=Cg(g_,this,v_).get(i),a)return Cg(g_,this,v_).set(e,a),a;const s="g_".concat(Ag(h_,this),"_luminosity_map_").concat((Tg(f_,this,(t=Ag(f_,this),n=t++,t)),n)),o=Eg(g_,this,w_).call(this,s);Cg(g_,this,v_).set(e,o),Cg(g_,this,v_).set(i,o);const l=Eg(g_,this,j_).call(this,s);return Eg(g_,this,__).call(this,l),e&&Eg(g_,this,E_).call(this,r,l),o}addHighlightHCMFilter(e,t,n,r,i){var a;const s="".concat(t,"-").concat(n,"-").concat(r,"-").concat(i);let o=Cg(g_,this,b_).get(e);if((null===(a=o)||void 0===a?void 0:a.key)===s)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},Cg(g_,this,b_).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(Eg(g_,this,C_).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,m]=[r,i].map(Eg(g_,this,C_).bind(this));h<u&&([u,h,p,m]=[h,u,m,p]),Cg(g_,this,y_).style.color="";const f=(e,t,n)=>{const r=new Array(256),i=(h-u)/n,a=e/255,s=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*i),t=a+l*s;for(let n=o;n<=e;n++)r[n]=t;o=e+1}for(let l=o;l<256;l++)r[l]=r[o-1];return r.join(",")},g="g_".concat(Ag(h_,this),"_hcm_").concat(e,"_filter"),v=o.filter=Eg(g_,this,j_).call(this,g);return Eg(g_,this,k_).call(this,v),Eg(g_,this,S_).call(this,f(p[0],m[0],5),f(p[1],m[1],5),f(p[2],m[2],5),v),o.url=Eg(g_,this,w_).call(this,g),o.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==Cg(g_,this,b_).size||(Ag(u_,this)&&(Ag(u_,this).parentNode.parentNode.remove(),Tg(u_,this,null)),Ag(d_,this)&&(Ag(d_,this).clear(),Tg(d_,this,null)),Tg(f_,this,0))}},aN=Vg?class extends A_{async _fetch(e){return D_(e)}}:T_;function sN(){var e,t,n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof r||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const i=new lN,{docId:a}=i,s=r.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(Vg&&"string"===typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(r.url):null,o=r.data?function(e){if(Vg&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return ib(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(r.data):null,l=r.httpHeaders||null,c=!0===r.withCredentials,d=null!==(e=r.password)&&void 0!==e?e:null,u=r.range instanceof dN?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:tN;let p=r.worker instanceof _N?r.worker:null;const m=r.verbosity,f="string"!==typeof r.docBaseUrl||Ab(r.docBaseUrl)?null:r.docBaseUrl,g="string"===typeof r.cMapUrl?r.cMapUrl:null,v=!1!==r.cMapPacked,b=r.CMapReaderFactory||rN,y="string"===typeof r.standardFontDataUrl?r.standardFontDataUrl:null,x=r.StandardFontDataFactory||aN,w=!0!==r.stopAtErrors,_=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,k=!1!==r.isEvalSupported,j="boolean"===typeof r.isOffscreenCanvasSupported?r.isOffscreenCanvasSupported:!Vg,N="boolean"===typeof r.isChrome?r.isChrome:!sb.platform.isFirefox&&"undefined"!==typeof window&&!(null===(t=window)||void 0===t||!t.chrome),S=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,E="boolean"===typeof r.disableFontFace?r.disableFontFace:Vg,C=!0===r.fontExtraProperties,A=!0===r.enableXfa,T=r.ownerDocument||globalThis.document,O=!0===r.disableRange,P=!0===r.disableStream,M=!0===r.disableAutoFetch,D=!0===r.pdfBug,R=r.CanvasFactory||nN,L=r.FilterFactory||iN,I=!0===r.enableHWA,F=u?u.length:null!==(n=r.length)&&void 0!==n?n:NaN,z="boolean"===typeof r.useSystemFonts?r.useSystemFonts:!Vg&&!E,q="boolean"===typeof r.useWorkerFetch?r.useWorkerFetch:b===o_&&x===T_&&g&&y&&Db(g,document.baseURI)&&Db(y,document.baseURI);r.canvasFactory&&Lb("`canvasFactory`-instance option, please use `CanvasFactory` instead."),r.filterFactory&&Lb("`filterFactory`-instance option, please use `FilterFactory` instead.");Bv(m);const B={canvasFactory:new R({ownerDocument:T,enableHWA:I}),filterFactory:new L({docId:a,ownerDocument:T}),cMapReaderFactory:q?null:new b({baseUrl:g,isCompressed:v}),standardFontDataFactory:q?null:new x({baseUrl:y})};if(!p){const e={verbosity:m,port:hk.workerPort};p=e.port?_N.fromPort(e):new _N(e),i._worker=p}const U={docId:a,apiVersion:"4.8.69",data:o,password:d,disableAutoFetch:M,rangeChunkSize:h,length:F,docBaseUrl:f,enableXfa:A,evaluatorOptions:{maxImageSize:_,disableFontFace:E,ignoreErrors:w,isEvalSupported:k,isOffscreenCanvasSupported:j,isChrome:N,canvasMaxAreaInBytes:S,fontExtraProperties:C,useSystemFonts:z,cMapUrl:q?g:null,standardFontDataUrl:q?y:null}},W={disableFontFace:E,fontExtraProperties:C,ownerDocument:T,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:M,enableXfa:A}};return p.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const e=p.messageHandler.sendWithPromise("GetDocRequest",U,o?[o.buffer]:null);let t;if(u)t=new Yk(u,{disableRange:O,disableStream:P});else if(!o){if(!s)throw new Error("getDocument - no `url` parameter provided.");let e;if(Vg){e="undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype&&Db(s)?aj:mj}else e=Db(s)?aj:cj;t=new e({url:s,length:F,httpHeaders:l,withCredentials:c,rangeChunkSize:h,disableRange:O,disableStream:P})}return e.then((e=>{if(i.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const n=new Ck(a,e,p.port),r=new DN(n,i,t,W,B);i._transport=r,n.send("Ready",null)}))})).catch(i._capability.reject),i}function oN(e){return"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0}class lN{constructor(){var e,t;this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((cN._=(e=cN._,t=e++,e),t)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var e,t;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(t=this._transport)||void 0===t?void 0:t.destroy())}catch(r){var n;throw null!==(n=this._worker)&&void 0!==n&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}var cN={_:0};class dN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Vv("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class uN{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Kv(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var hN=new WeakMap,pN=new WeakMap,mN=new WeakSet;class fN{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ng(this,mN),Sg(this,hN,null),Sg(this,pN,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Mb:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new zN,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Eb({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Kv(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:r,viewport:i,intent:a="display",annotationMode:s=rv.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:p=!1}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const m=this._transport.getRenderingIntent(a,s,h,p),{renderingIntent:f,cacheKey:g}=m;Tg(pN,this,!1),Eg(mN,this,vN).call(this),c||(c=this._transport.getOptionalContentConfig(f));let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const b=!!(f&Jg);var y;v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(y=this._stats)||void 0===y||y.time("Page Request"),this._pumpOperatorList(m));const x=e=>{var t;(v.renderTasks.delete(w),(this._maybeCleanupAfterRender||b)&&Tg(pN,this,!0),Eg(mN,this,gN).call(this,!b),e?(w.capability.reject(e),this._abortOperatorList({intentState:v,reason:e instanceof Error?e:new Error(e)})):w.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new HN({callback:x,params:{canvasContext:r,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:u});((n=v).renderTasks||(n.renderTasks=new Set)).add(w);const _=w.task;return Promise.all([v.displayReadyCapability.promise,c]).then((e=>{var t;let[n,r]=e;if(this.destroyed)x();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(r.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:n,optionalContentConfig:r}),w.operatorListChanged()}})).catch(x),_}getOperatorList(){let{intent:e="display",annotationMode:t=rv.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this._transport.getRenderingIntent(e,t,n,r,!0);let a,s=this._intentStates.get(i.cacheKey);var o,l;(s||(s=Object.create(null),this._intentStates.set(i.cacheKey,s)),s.opListReadCapability)||(a=Object.create(null),a.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(a))},s.opListReadCapability=Promise.withResolvers(),((o=s).renderTasks||(o.renderTasks=new Set)).add(a),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(i));return s.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>eN.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const r=t.getReader(),i={items:[],styles:Object.create(null),lang:null};!function t(){r.read().then((function(n){var r;let{value:a,done:s}=n;s?e(i):(null!==(r=i.lang)&&void 0!==r||(i.lang=a.lang),Object.assign(i.styles,a.styles),i.items.push(...a.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),Tg(pN,this,!1),Eg(mN,this,vN).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Tg(pN,this,!0);const t=Eg(mN,this,gN).call(this,!1);return e&&t&&this._stats&&(this._stats=new Mb),t}_startRenderPage(e,t){var n,r;const i=this._intentStates.get(t);i&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(r=i.displayReadyCapability)||void 0===r||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&Eg(mN,this,gN).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}=e;const{map:a,transfer:s}=r,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:a,modifiedIds:i},s).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then((e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())}),(e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();Eg(mN,this,gN).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}}))};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:r=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof Cb){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new nb(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function gN(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Eg(mN,this,vN).call(this),!Ag(pN,this)||this.destroyed)return!1;if(e)return Tg(hN,this,setTimeout((()=>{Tg(hN,this,null),Eg(mN,this,gN).call(this,!1)}),5e3)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Tg(pN,this,!1),!0}function vN(){Ag(hN,this)&&(clearTimeout(Ag(hN,this)),Tg(hN,this,null))}var bN=new WeakMap,yN=new WeakMap;class xN{constructor(){Sg(this,bN,new Map),Sg(this,yN,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};Ag(yN,this).then((()=>{for(const[e]of Ag(bN,this))e.call(this,n)}))}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted)return void Hv("LoopbackPort - cannot use an `aborted` signal.");const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}Ag(bN,this).set(t,r)}removeEventListener(e,t){const n=Ag(bN,this).get(t);null===n||void 0===n||n(),Ag(bN,this).delete(t)}terminate(){for(const[,e]of Ag(bN,this))null===e||void 0===e||e();Ag(bN,this).clear()}}var wN=new WeakSet;class _N{constructor(){let{name:e=null,port:t=null,verbosity:n=Uv()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ng(this,wN),this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var r;if(null!==(r=EN._)&&void 0!==r&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(EN._||(EN._=new WeakMap)).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return Vg?Promise.all([M_.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ck("main","worker",e),this._messageHandler.on("ready",(function(){})),Eg(wN,this,kN).call(this)}_initialize(){if(SN._||jN(_N))return void this._setupFakeWorker();let{workerSrc:e}=_N;try{_N._isSameOrigin(window.location.href,e)||(e=_N._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Ck("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",(()=>{this._webWorker||r()}),{signal:i.signal}),n.on("test",(e=>{i.abort(),!this.destroyed&&e?(this._messageHandler=n,this._port=t,this._webWorker=t,Eg(wN,this,kN).call(this)):r()})),n.on("ready",(e=>{if(i.abort(),this.destroyed)r();else try{a()}catch(t){this._setupFakeWorker()}}));const a=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void a()}catch(t){Wv("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){SN._||(Hv("Setting up fake worker."),SN._=!0),_N._setupFakeWorkerGlobal.then((e=>{var t,n;if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const r=new xN;this._port=r;const i="fake".concat((NN._=(t=NN._,n=t++,t),n)),a=new Ck(i+"_worker",i,r);e.setup(a,r),this._messageHandler=new Ck(i,i+"_worker",r),Eg(wN,this,kN).call(this)})).catch((e=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(e=EN._)||void 0===e||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=null===(t=Eg(_N,this,EN)._)||void 0===t?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new _N(e)}static get workerSrc(){if(hk.workerSrc)return hk.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Kv(this,"_setupFakeWorkerGlobal",(async()=>{if(Cg(_N,this,jN))return Cg(_N,this,jN);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function kN(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}function jN(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}Lg=_N;var NN={_:0},SN={_:!1},EN={_:void 0};Vg&&(SN._=Eg(Lg,Lg,!0),hk.workerSrc||(hk.workerSrc="./pdf.worker.mjs")),Lg._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(i){return!1}const r=new URL(t,n);return n.origin===r.origin},Lg._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var CN=new WeakMap,AN=new WeakMap,TN=new WeakMap,ON=new WeakMap,PN=new WeakMap,MN=new WeakSet;class DN{constructor(e,t,n,r,i){Ng(this,MN),Sg(this,CN,new Map),Sg(this,AN,new Map),Sg(this,TN,new Map),Sg(this,ON,new Map),Sg(this,PN,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new zN,this.fontLoader=new n_({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Kv(this,"annotationStorage",new Jw)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rv.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=Xg,s=Gw;switch(e){case"any":a=Yg;break;case"display":break;case"print":a=Jg;break;default:Hv("getRenderingIntent - invalid intent: ".concat(e))}const o=a&Jg&&n instanceof e_?n:this.annotationStorage;switch(t){case rv.DISABLE:a+=ev;break;case rv.ENABLE:break;case rv.ENABLE_FORMS:a+=$g;break;case rv.ENABLE_STORAGE:a+=Zg,s=o.serializable;break;default:Hv("getRenderingIntent - invalid annotationMode: ".concat(t))}r&&(a+=tv),i&&(a+=nv);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:a,cacheKey:[a,s.hash,c].join("_"),annotationStorageSerializable:s,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=Ag(PN,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of Ag(AN,this).values())t.push(r._destroy());Ag(AN,this).clear(),Ag(TN,this).clear(),Ag(ON,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),Ag(CN,this).clear(),this.filterFactory.destroy(),Bj.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new nb("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{Gv(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:r}=e;r?t.close():(Gv(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:i}=this._fullReader;if(!n||!r){var a;if(this._lastProgress)null===(a=t.onProgress)||void 0===a||a.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:r,contentLength:i}})),e.on("GetRangeReader",((e,t)=>{Gv(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:r}=e;r?t.close():(Gv(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new uN(n,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new Xv(e.message,e.code);break;case"InvalidPDFException":n=new $v(e.message);break;case"MissingPDFException":n=new Zv(e.message);break;case"UnexpectedResponseException":n=new eb(e.message,e.status);break;case"UnknownErrorException":n=new Jv(e.message,e.details);break;default:Vv("DocException - expected a valid Error.")}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(Tg(PN,this,Promise.withResolvers()),t.onPassword){const r=e=>{e instanceof Error?Ag(PN,this).reject(e):Ag(PN,this).resolve({password:e})};try{t.onPassword(r,e.code)}catch(n){Ag(PN,this).reject(n)}}else Ag(PN,this).reject(new Xv(e.message,e.code));return Ag(PN,this).promise})),e.on("DataLoaded",(e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{if(this.destroyed)return;Ag(AN,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{var n;let[r,i,a]=t;if(this.destroyed)return null;if(this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:t,fontExtraProperties:s,pdfBug:o}=this._params;if("error"in a){const e=a.error;Hv("Error during font loading: ".concat(e)),this.commonObjs.resolve(r,e);break}const l=o&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,c=new r_(a,{disableFontFace:t,inspectFont:l});this.fontLoader.bind(c).catch((()=>e.sendWithPromise("FontFallback",{id:r}))).finally((()=>{!s&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)}));break;case"CopyLocalImage":const{imageRef:d}=a;Gv(d,"The imageRef must be defined.");for(const e of Ag(AN,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===d)return t.dataLen?(this.commonObjs.resolve(r,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error("Got unknown common object type ".concat(i))}return null})),e.on("obj",(e=>{let[t,n,r,i]=e;if(this.destroyed)return;const a=Ag(AN,this).get(n);var s;if(!a.objs.has(t))if(0!==a._intentStates.size)switch(r){case"Image":a.objs.resolve(t,i),(null===i||void 0===i?void 0:i.dataLen)>1e7&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(t,i);break;default:throw new Error("Got unknown object type ".concat(r))}else null===i||void 0===i||null===(s=i.bitmap)||void 0===s||s.close()})),e.on("DocProgress",(e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(e)})),e.on("FetchStandardFontData",(async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(e)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&Hv("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},r).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=Ag(TN,this).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&Ag(ON,this).set(n.refStr,e);const r=new fN(t,n,this,this._params.pdfBug);return Ag(AN,this).set(t,r),r}));return Ag(TN,this).set(t,r),r}getPageIndex(e){return oN(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return Eg(MN,this,RN).call(this,"GetFieldObjects")}hasJSActions(){return Eg(MN,this,RN).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Eg(MN,this,RN).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return Eg(MN,this,RN).call(this,"GetOptionalContentConfig").then((t=>new Qk(t,e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=Ag(CN,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,n,r,i;return{info:e[0],metadata:e[1]?new Rk(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(r=null===(i=this._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==r?r:null}}));return Ag(CN,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of Ag(AN,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),Ag(CN,this).clear(),this.filterFactory.destroy(!0),Bj.cleanup()}}cachedPageNumber(e){var t;if(!oN(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=Ag(ON,this).get(n))&&void 0!==t?t:null}}function RN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Ag(CN,this).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return Ag(CN,this).set(e,r),r}const LN=Symbol("INITIAL_DATA");var IN=new WeakMap,FN=new WeakSet;class zN{constructor(){Ng(this,FN),Sg(this,IN,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=Eg(FN,this,qN).call(this,e);return n.promise.then((()=>t(n.data))),null}const n=Ag(IN,this)[e];if(!n||n.data===LN)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=Ag(IN,this)[e];return!!t&&t.data!==LN}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Eg(FN,this,qN).call(this,e);n.data=t,n.resolve()}clear(){for(const t in Ag(IN,this)){var e;const{data:n}=Ag(IN,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}Tg(IN,this,Object.create(null))}*[Symbol.iterator](){for(const e in Ag(IN,this)){const{data:t}=Ag(IN,this)[e];t!==LN&&(yield[e,t])}}}function qN(e){var t;return(t=Ag(IN,this))[e]||(t[e]=We(We({},Promise.withResolvers()),{},{data:LN}))}var BN=new WeakMap;class UN{constructor(e){Sg(this,BN,null),Tg(BN,this,e),this.onContinue=null}get promise(){return Ag(BN,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Ag(BN,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=Ag(BN,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=Ag(BN,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var WN=new WeakMap;class HN{constructor(e){let{callback:t,params:n,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null}=e;Sg(this,WN,null),this.callback=t,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new UN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t,n;let{transparency:r=!1,optionalContentConfig:i}=e;if(this.cancelled)return;if(this._canvas){if(VN._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");VN._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:s,transform:o,background:l}=this.params;this.gfx=new ck(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:r,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),Ag(WN,this)&&(window.cancelAnimationFrame(Ag(WN,this)),Tg(WN,this,null)),VN._.delete(this._canvas),this.callback(t||new Cb("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Tg(WN,this,window.requestAnimationFrame((()=>{Tg(WN,this,null),this._nextBound().catch(this._cancelBound)}))):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),VN._.delete(this._canvas),this.callback())))}}var VN={_:new WeakSet};const GN="4.8.69",QN="3634dab10";function KN(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function YN(e){return Math.max(0,Math.min(255,255*e))}class XN{static CMYK_G(e){let[t,n,r,i]=e;return["G",1-Math.min(1,.3*t+.59*r+.11*n+i)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=YN(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=KN(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,r]=e;return["G",.3*t+.59*n+.11*r]}static RGB_rgb(e){return e.map(YN)}static RGB_HTML(e){return"#".concat(e.map(KN).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,r,i]=e;return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb(e){let[t,n,r,i]=e;return[YN(1-Math.min(1,t+i)),YN(1-Math.min(1,r+i)),YN(1-Math.min(1,n+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,r]=e;const i=1-t,a=1-n,s=1-r;return["CMYK",i,a,s,Math.min(i,a,s)]}}class JN{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px"))),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),r}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Vv("Abstract method `_createSVG` called.")}}class $N extends JN{_createSVG(e){return document.createElementNS(jb,e)}}class ZN{static setupStorage(e,t,n,r,i){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",(e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==a.value){e.setAttribute("value",a.value);for(const e of n.children)e.attributes.value===a.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:i})}))}}static setAttributes(e){let{html:t,element:n,storage:r=null,intent:i,linkService:a}=e;const{attributes:s}=n,o=t instanceof HTMLAnchorElement;"radio"===s.type&&(s.name="".concat(s.name,"-").concat(i));for(const[l,c]of Object.entries(s))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&a.addLinkAttributes(t,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(t,s.dataId,n,r)}static render(e){const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:n});const s="richText"!==i,o=e.div;if(o.append(a),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}s&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===r.children.length){if(r.value){const e=document.createTextNode(r.value);a.append(e),s&&eN.shouldBuildText(r.name)&&l.push(e)}return{textDivs:l}}const c=[[r,-1,a]];for(;c.length>0;){var d,u;const[e,r,a]=c.at(-1);if(r+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),a.append(e);continue}const p=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(a.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:i,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);s&&eN.shouldBuildText(h)&&l.push(e),p.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const eS=1e3,tS=new WeakSet;function nS(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class rS{static create(e){switch(e.data.annotationType){case fv:return new uS(e);case mv:return new fS(e);case Ov:switch(e.data.fieldType){case"Tx":return new vS(e);case"Btn":return e.data.radioButton?new xS(e):e.data.checkBox?new yS(e):new wS(e);case"Ch":return new _S(e);case"Sig":return new bS(e)}return new gS(e);case Av:return new kS(e);case gv:return new eE(e);case vv:return new nE(e);case bv:return new iE(e);case yv:return new sE(e);case wv:return new lE(e);case Ev:return new dE(e);case Cv:return new hE(e);case xv:return new cE(e);case _v:return new pE(e);case kv:return new mE(e);case jv:return new fE(e);case Nv:return new gE(e);case Sv:return new vE(e);case Tv:return new xE(e);default:return new lS(e)}}}var iS=new WeakMap,aS=new WeakMap,sS=new WeakMap,oS=new WeakSet;class lS{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ng(this,oS),Sg(this,iS,null),Sg(this,aS,!1),Sg(this,sS,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:r}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==r&&void 0!==r&&r.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return lS._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;Ag(iS,this)||Tg(iS,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&Eg(oS,this,cS).call(this,n),null===(t=Ag(sS,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;Ag(iS,this)&&(Eg(oS,this,cS).call(this,Ag(iS,this).rect),null===(e=Ag(sS,this))||void 0===e||e.popup.resetEdited(),Tg(iS,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof gS||(i.tabIndex=eS);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof kS){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,i),i}const{width:s,height:o}=nS(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))");a.borderRadius=t}else if(this instanceof xS){const e="calc(".concat(s,"px * var(--scale-factor)) / calc(").concat(o,"px * var(--scale-factor))");a.borderRadius=e}switch(t.borderStyle.style){case Pv:a.borderStyle="solid";break;case Mv:a.borderStyle="dashed";break;case Dv:Hv("Unimplemented border style: beveled");break;case Rv:Hv("Unimplemented border style: inset");break;case Lv:a.borderBottomStyle="solid"}const r=t.borderColor||null;r?(Tg(aS,this,!0),a.borderColor=lb.makeHexColor(0|r[0],0|r[1],0|r[2])):a.borderWidth=0}const l=lb.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=r.rawDims;a.left="".concat(100*(l[0]-u)/c,"%"),a.top="".concat(100*(l[1]-h)/d,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(a.width="".concat(100*s/c,"%"),a.height="".concat(100*o/d,"%")):this.setRotation(p,i),i}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:i,height:a}=nS(this.data.rect);let s,o;e%180===0?(s=100*i/n,o=100*a/r):(s=100*a/n,o=100*i/r),t.style.width="".concat(s,"%"),t.style.height="".concat(o,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const r=n.detail[e],i=r[0],a=r.slice(1);n.target.style[t]=XN["".concat(i,"_HTML")](a),this.annotationStorage.setValue(this.data.id,{[t]:XN["".concat(i,"_rgb")](a)})};return Kv(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];null===i||void 0===i||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const a=n[r];if(a){a({detail:{[r]:i},target:e}),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map((e=>Math.fround(e)));if(8===e.length){const[a,s,o,l]=e.subarray(2,6);if(r===a&&i===s&&t===o&&n===l)return}const{style:a}=this.container;let s;if(Ag(aS,this)){const{borderColor:e,borderWidth:t}=a;a.borderWidth=0,s=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=r-t,l=i-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),p="clippath_".concat(this.data.id);h.setAttribute("id",p),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let f=2,g=e.length;f<g;f+=8){var m;const n=e[f],r=e[f+1],a=e[f+2],d=e[f+3],u=c.createElement("rect"),p=(a-t)/o,g=(i-r)/l,v=(n-a)/o,b=(r-d)/l;u.setAttribute("x",p),u.setAttribute("y",g),u.setAttribute("width",v),u.setAttribute("height",b),h.append(u),null===(m=s)||void 0===m||m.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(g,'" width="').concat(v,'" height="').concat(b,'"/>'))}Ag(aS,this)&&(s.push("</g></svg>')"),a.backgroundImage=s.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){const{data:e}=this,t=Tg(sS,this,new kS({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Vv("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:e,id:i,exportValues:a}of r){if(-1===e)continue;if(i===t)continue;const r="string"===typeof a?a:null,s=document.querySelector('[data-element-id="'.concat(i,'"]'));!s||tS.has(s)?n.push({id:i,exportValue:r,domElement:s}):Hv("_getElementsByName - element not allowed: ".concat(i))}return n}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,i=r.getAttribute("data-element-id");i!==t&&(tS.has(r)&&n.push({id:i,exportValue:e,domElement:r}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}}function cS(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:s,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e);const{width:l,height:c}=nS(e);t.left="".concat(100*(e[0]-s)/i,"%"),t.top="".concat(100*(a-e[3]+o)/a,"%"),0===r?(t.width="".concat(100*l/i,"%"),t.height="".concat(100*c/a,"%")):this.setRotation(r)}var dS=new WeakSet;class uS extends lS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),Ng(this,dS),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(Eg(dS,this,pS).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(Eg(dS,this,mS).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&Eg(dS,this,hS).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),Eg(dS,this,hS).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const i=n.get(r);i&&(e[i]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),Eg(dS,this,hS).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),Eg(dS,this,hS).call(this),!this._fieldObjects)return Hv('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:r,include:i}=t,a=[];if(0!==e.length||0!==r.length){const t=new Set(r);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===i&&a.push(n)}else for(const t of Object.values(this._fieldObjects))a.push(...t);const s=this.annotationStorage,o=[];for(const t of a){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";s.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;s.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";s.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(tS.has(n)?n.dispatchEvent(new Event("resetform")):Hv("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function hS(){this.container.setAttribute("data-internal-link","")}function pS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},Eg(dS,this,hS).call(this)}function mS(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),Eg(dS,this,hS).call(this)}class fS extends lS{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class gS extends lS{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return sb.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{var a;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}i&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e)}}))}))}_setEventListeners(e,t,n,r){for(const[o,l]of n){var i,a,s;if("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,r),"Focus"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Blur?"Blur"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":lb.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,i=e.style;let a;const s=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(Kg*r))||1);a=Math.min(r,s(t/Kg))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);a=Math.min(r,s(e/Kg))}i.fontSize="calc(".concat(a,"px * var(--scale-factor))"),i.color=lb.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class vS extends gS{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var r;const a=e.getValue(t,{value:this.data.fieldValue});let s=a.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let l=a.formattedValue||(null===(r=this.data.textContent)||void 0===r?void 0:r.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",null!==l&&void 0!==l?l:s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),tS.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=eS,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",(r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value"),c.formattedValue=null})),n.addEventListener("resetform",(e=>{var t;const r=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=r,c.formattedValue=null}));let d=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var i;n.addEventListener("focus",(e=>{var t;if(c.focused)return;const{target:n}=e;c.userValue&&(n.value=c.userValue),c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const r={value(n){var r;c.userValue=null!==(r=n.detail.value)&&void 0!==r?r:"",e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:r}=n.detail;c.formattedValue=r,null!==r&&void 0!==r&&n.target!==document.activeElement&&(n.target.value=r),e.setValue(t,{formattedValue:r})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var r;const{charLimit:i}=n.detail,{target:a}=n;if(0===i)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",i);let s=c.userValue;!s||s.length<=i||(s=s.slice(0,i),a.value=c.userValue=s,e.setValue(t,{value:s}),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}};this._dispatchEventFromSandbox(r,n)})),n.addEventListener("keydown",(e=>{var n;c.commitKey=1;let r=-1;if("Escape"===e.key?r=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):r=2,-1===r)return;const{value:i}=e.target;c.lastCommittedValue!==i&&(c.lastCommittedValue=i,c.userValue=i,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:r,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const r=d;d=null,n.addEventListener("blur",(e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{value:i}=e.target;var a;(c.userValue=i,c.lastCommittedValue!==i)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));r(e)})),null!==(i=this.data.actions)&&void 0!==i&&i.Keystroke&&n.addEventListener("beforeinput",(e=>{var n;c.lastCommittedValue=null;const{data:r,target:i}=e,{value:a,selectionStart:s,selectionEnd:o}=i;let l=s,d=o;switch(e.inputType){case"deleteWordBackward":{const e=a.substring(0,s).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=a.substring(s).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":s===o&&(l-=1);break;case"deleteContentForward":s===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:r||"",willCommit:!1,selStart:l,selEnd:d}})})),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(d&&n.addEventListener("blur",d),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class bS extends gS{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class yS extends gS{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return tS.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=eS,i.addEventListener("change",(r=>{const{name:i,checked:a}=r.target;for(const s of this._getElementsByName(i,n)){const n=a&&s.exportValue===t.exportValue;s.domElement&&(s.domElement.checked=n),e.setValue(s.id,{value:n})}e.setValue(n,{value:a})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)})),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class xS extends gS{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(tS.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=eS,i.addEventListener("change",(t=>{const{name:r,checked:i}=t.target;for(const a of this._getElementsByName(r,n))e.setValue(a.id,{value:!1});e.setValue(n,{value:i})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;i.addEventListener("updatefromsandbox",(t=>{const i={value:t=>{const i=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=i&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class wS extends uS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class _S extends gS{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");tS.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=eS;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of r.options)n.selected=n.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),i=!1),r.append(e)}let a=null;if(i){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),a=()=>{e.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const s=e=>{const t=e?"value":"textContent",{options:n,multiple:i}=r;return i?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=s(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",(n=>{const i={value(n){var i;null===(i=a)||void 0===i||i();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of r.options)e.selected=c.has(e.value);e.setValue(t,{value:s(!0)}),o=s(!1)},multipleSelection(e){r.multiple=!0},remove(n){const i=r.options,a=n.detail.remove;if(i[a].selected=!1,r.remove(a),i.length>0){-1===Array.prototype.findIndex.call(i,(e=>e.selected))&&(i[0].selected=!0)}e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),o=s(!1)},insert(n){const{index:i,displayValue:a,exportValue:c}=n.detail.insert,d=r.children[i],u=document.createElement("option");u.textContent=a,u.value=c,d?d.before(u):r.append(u),e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},items(n){const{items:i}=n.detail;for(;0!==r.length;)r.remove(0);for(const e of i){const{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},indices(n){const r=new Set(n.detail.indices);for(const e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:s(!0)}),o=s(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(i,n)})),r.addEventListener("input",(n=>{var r;const i=s(!0),a=s(!1);e.setValue(t,{value:i}),n.preventDefault(),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:a,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):r.addEventListener("input",(function(n){e.setValue(t,{value:s(!0)})})),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class kS extends lS{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:lS._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new HS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(mb).concat(e))).join(",")),this.container}}var jS=new WeakMap,NS=new WeakMap,SS=new WeakMap,ES=new WeakMap,CS=new WeakMap,AS=new WeakMap,TS=new WeakMap,OS=new WeakMap,PS=new WeakMap,MS=new WeakMap,DS=new WeakMap,RS=new WeakMap,LS=new WeakMap,IS=new WeakMap,FS=new WeakMap,zS=new WeakMap,qS=new WeakMap,BS=new WeakMap,US=new WeakMap,WS=new WeakSet;class HS{constructor(e){let{container:t,color:n,elements:r,titleObj:i,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:c,parentRect:d,open:u}=e;Ng(this,WS),Sg(this,jS,Eg(WS,this,YS).bind(this)),Sg(this,NS,Eg(WS,this,ZS).bind(this)),Sg(this,SS,Eg(WS,this,$S).bind(this)),Sg(this,ES,Eg(WS,this,JS).bind(this)),Sg(this,CS,null),Sg(this,AS,null),Sg(this,TS,null),Sg(this,OS,null),Sg(this,PS,null),Sg(this,MS,null),Sg(this,DS,null),Sg(this,RS,!1),Sg(this,LS,null),Sg(this,IS,null),Sg(this,FS,null),Sg(this,zS,null),Sg(this,qS,null),Sg(this,BS,null),Sg(this,US,!1),Tg(AS,this,t),Tg(qS,this,i),Tg(TS,this,s),Tg(zS,this,o),Tg(MS,this,l),Tg(CS,this,n),Tg(FS,this,c),Tg(DS,this,d),Tg(PS,this,r),Tg(OS,this,Ib.toDateObject(a)),this.trigger=r.flatMap((e=>e.getElementsToTriggerPopup()));for(const p of this.trigger)p.addEventListener("click",Ag(ES,this)),p.addEventListener("mouseenter",Ag(SS,this)),p.addEventListener("mouseleave",Ag(NS,this)),p.classList.add("popupTriggerArea");for(const p of r){var h;null===(h=p.container)||void 0===h||h.addEventListener("keydown",Ag(jS,this))}Ag(AS,this).hidden=!0,u&&Eg(WS,this,JS).call(this)}render(){if(Ag(LS,this))return;const e=Tg(LS,this,document.createElement("div"));if(e.className="popup",Ag(CS,this)){const t=e.style.outlineColor=lb.makeHexColor(...Ag(CS,this));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)");else{const t=.7;e.style.backgroundColor=lb.makeHexColor(...Ag(CS,this).map((e=>Math.floor(t*(255-e)+e))))}}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=Ag(qS,this)),e.append(t),Ag(OS,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:Ag(OS,this).valueOf()})),t.append(e)}const r=Cg(WS,this,VS);if(r)ZN.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(Ag(TS,this));e.append(t)}Ag(AS,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const r=document.createElement("p");r.classList.add("popupContent"),r.dir=n;const i=t.split(/(?:\r\n?|\n)/);for(let a=0,s=i.length;a<s;++a){const e=i[a];r.append(document.createTextNode(e)),a<s-1&&r.append(document.createElement("br"))}return r}updateEdited(e){var t;let{rect:n,popupContent:r}=e;Ag(BS,this)||Tg(BS,this,{contentsObj:Ag(TS,this),richText:Ag(zS,this)}),n&&Tg(IS,this,null),r&&(Tg(zS,this,Eg(WS,this,KS).call(this,r)),Tg(TS,this,null)),null===(t=Ag(LS,this))||void 0===t||t.remove(),Tg(LS,this,null)}resetEdited(){var e;Ag(BS,this)&&(({contentsObj:kg(Tg,[TS,this])._,richText:kg(Tg,[zS,this])._}=Ag(BS,this)),Tg(BS,this,null),null===(e=Ag(LS,this))||void 0===e||e.remove(),Tg(LS,this,null),Tg(IS,this,null))}forceHide(){Tg(US,this,this.isVisible),Ag(US,this)&&(Ag(AS,this).hidden=!0)}maybeShow(){Ag(US,this)&&(Ag(LS,this)||Eg(WS,this,$S).call(this),Tg(US,this,!1),Ag(AS,this).hidden=!1)}get isVisible(){return!1===Ag(AS,this).hidden}}function VS(e){const t=Ag(zS,e),n=Ag(TS,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:Ag(zS,e).html||null}function GS(e){var t;return(null===(t=Cg(WS,e,VS))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function QS(e){var t;return(null===(t=Cg(WS,e,VS))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function KS(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:Cg(WS,this,QS),fontSize:Cg(WS,this,GS)?"calc(".concat(Cg(WS,this,GS),"px * var(--scale-factor))"):""}};for(const i of e.split("\n"))t.push({name:"span",value:i,attributes:r});return n}function YS(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&Ag(RS,this))&&Eg(WS,this,JS).call(this)}function XS(){if(null!==Ag(IS,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=Ag(MS,this);let a=!!Ag(DS,this),s=Ag(a?DS:FS,this);for(const h of Ag(PS,this))if(!s||null!==lb.intersect(h.data.rect,s)){s=h.data.rect,a=!0;break}const o=lb.normalizeRect([s[0],e[3]-s[1]+e[1],s[2],e[3]-s[3]+e[1]]),l=a?s[2]-s[0]+5:0,c=o[0]+l,d=o[1];Tg(IS,this,[100*(c-r)/t,100*(d-i)/n]);const{style:u}=Ag(AS,this);u.left="".concat(Ag(IS,this)[0],"%"),u.top="".concat(Ag(IS,this)[1],"%")}function JS(){Tg(RS,this,!Ag(RS,this)),Ag(RS,this)?(Eg(WS,this,$S).call(this),Ag(AS,this).addEventListener("click",Ag(ES,this)),Ag(AS,this).addEventListener("keydown",Ag(jS,this))):(Eg(WS,this,ZS).call(this),Ag(AS,this).removeEventListener("click",Ag(ES,this)),Ag(AS,this).removeEventListener("keydown",Ag(jS,this)))}function $S(){Ag(LS,this)||this.render(),this.isVisible?Ag(RS,this)&&Ag(AS,this).classList.add("focused"):(Eg(WS,this,XS).call(this),Ag(AS,this).hidden=!1,Ag(AS,this).style.zIndex=parseInt(Ag(AS,this).style.zIndex)+1e3)}function ZS(){Ag(AS,this).classList.remove("focused"),!Ag(RS,this)&&this.isVisible&&(Ag(AS,this).hidden=!0,Ag(AS,this).style.zIndex=parseInt(Ag(AS,this).style.zIndex)-1e3)}class eE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=iv.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var tE=new WeakMap;class nE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sg(this,tE,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=nS(e.rect),r=this.svgFactory.create(t,n,!0),i=Tg(tE,this,this.svgFactory.createElement("svg:line"));return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ag(tE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var rE=new WeakMap;class iE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sg(this,rE,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=nS(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=Tg(rE,this,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",t-i),a.setAttribute("height",n-i),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ag(rE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var aE=new WeakMap;class sE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sg(this,aE,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=nS(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=Tg(aE,this,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-i/2),a.setAttribute("ry",n/2-i/2),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ag(aE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var oE=new WeakMap;class lE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sg(this,oE,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:r}}=this;if(!t)return this.container;const{width:i,height:a}=nS(e),s=this.svgFactory.create(i,a,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],r=e[3]-t[c+1];o.push("".concat(n,",").concat(r))}o=o.join(" ");const l=Tg(oE,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ag(oE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class cE extends lE{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class dE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var uE=new WeakMap;class hE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sg(this,uE,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?iv.HIGHLIGHT:iv.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:n,popupRef:r}}=this,{width:i,height:a}=nS(e),s=this.svgFactory.create(i,a,!0);for(const o of t){let t=[];for(let n=0,i=o.length;n<i;n+=2){const r=o[n]-e[0],i=e[3]-o[n+1];t.push("".concat(r,",").concat(i))}t=t.join(" ");const r=this.svgFactory.createElement(this.svgElementName);Ag(uE,this).push(r),r.setAttribute("points",t),r.setAttribute("stroke-width",n.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(s),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return Ag(uE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class pE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=iv.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class mE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class fE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class gE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class vE extends lS{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=iv.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bE=new WeakMap,yE=new WeakSet;class xE extends lS{constructor(e){var t;super(e,{isRenderable:!0}),Ng(this,yE),Sg(this,bE,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",We({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",Eg(yE,this,wE).bind(this)),Tg(bE,this,n);const{isMac:r}=sb.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(r?e.metaKey:e.ctrlKey)&&Eg(yE,this,wE).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return Ag(bE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function wE(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var _E=new WeakMap,kE=new WeakMap,jE=new WeakMap,NE=new WeakMap,SE=new WeakSet;class EE{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:o}=e;Ng(this,SE),Sg(this,_E,null),Sg(this,kE,null),Sg(this,jE,new Map),Sg(this,NE,null),this.div=t,Tg(_E,this,n),Tg(kE,this,r),Tg(NE,this,o||null),this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return Ag(jE,this).size>0}async render(e){const{annotations:t}=e,n=this.div;Wb(n,this.viewport);const r=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new $N,annotationStorage:e.annotationStorage||new Jw,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const s of t){if(s.noHTML)continue;const e=s.annotationType===Av;if(e){const e=r.get(s.id);if(!e)continue;i.elements=e}else{const{width:e,height:t}=nS(s.rect);if(e<=0||t<=0)continue}i.data=s;const t=rS.create(i);if(!t.isRenderable)continue;if(!e&&s.popupRef){const e=r.get(s.popupRef);e?e.push(t):r.set(s.popupRef,[t])}const n=t.render();var a;if(s.hidden&&(n.style.visibility="hidden"),await Eg(SE,this,CE).call(this,n,s.id),t._isEditable)Ag(jE,this).set(t.data.id,t),null===(a=this._annotationEditorUIManager)||void 0===a||a.renderAnnotationElement(t)}Eg(SE,this,AE).call(this)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Wb(n,{rotation:t.rotation}),Eg(SE,this,AE).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(Ag(jE,this).values())}getEditableAnnotation(e){return Ag(jE,this).get(e)}}async function CE(e,t){var n,r;const i=e.firstChild||e,a=i.id="".concat(mb).concat(t),s=await(null===(n=Ag(NE,this))||void 0===n?void 0:n.getAriaAttributes(a));if(s)for(const[o,l]of s)i.setAttribute(o,l);this.div.append(e),null===(r=Ag(_E,this))||void 0===r||r.moveElementInDOM(this.div,e,i,!1)}function AE(){if(!Ag(kE,this))return;const e=this.div;for(const[t,n]of Ag(kE,this)){const r=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!r)continue;n.className="annotationContent";const{firstChild:i}=r;i?"CANVAS"===i.nodeName?i.replaceWith(n):i.classList.contains("annotationContent")?i.after(n):i.before(n):r.append(n)}Ag(kE,this).clear()}const TE=/\r\n?|\n/g;var OE=new WeakMap,PE=new WeakMap,ME=new WeakMap,DE=new WeakMap,RE=new WeakMap,LE=new WeakSet;class IE extends Nw{static get _keyboardManager(){const e=IE.prototype,t=e=>e.isEmpty(),n=yx.TRANSLATE_SMALL,r=yx.TRANSLATE_BIG;return Kv(this,"_keyboardManager",new Cy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}constructor(e){super(We(We({},e),{},{name:"freeTextEditor"})),Ng(this,LE),Sg(this,OE,void 0),Sg(this,PE,""),Sg(this,ME,"".concat(this.id,"-editor")),Sg(this,DE,null),Sg(this,RE,void 0),Tg(OE,this,e.color||IE._defaultColor||Nw._defaultLineColor),Tg(RE,this,e.fontSize||IE._defaultFontSize)}static initialize(e,t){Nw.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case av.FREETEXT_SIZE:IE._defaultFontSize=t;break;case av.FREETEXT_COLOR:IE._defaultColor=t}}updateParams(e,t){switch(e){case av.FREETEXT_SIZE:Eg(LE,this,FE).call(this,t);break;case av.FREETEXT_COLOR:Eg(LE,this,zE).call(this,t)}}static get defaultPropertiesToUpdate(){return[[av.FREETEXT_SIZE,IE._defaultFontSize],[av.FREETEXT_COLOR,IE._defaultColor||Nw._defaultLineColor]]}get propertiesToUpdate(){return[[av.FREETEXT_SIZE,Ag(RE,this)],[av.FREETEXT_COLOR,Ag(OE,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-IE._internalPadding*e,-(IE._internalPadding+Ag(RE,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(iv.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Tg(DE,this,new AbortController);const e=this._uiManager.combinedSignal(Ag(DE,this));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Ag(ME,this)),this._isDraggable=!0,null===(e=Ag(DE,this))||void 0===e||e.abort(),Tg(DE,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=Ag(PE,this),t=Tg(PE,this,Eg(LE,this,qE).call(this).trimEnd());if(e===t)return;const n=e=>{Tg(PE,this,e),e?(Eg(LE,this,WE).call(this),this._uiManager.rebuild(this),Eg(LE,this,BE).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),Eg(LE,this,BE).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){IE._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Ag(ME,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(Ag(RE,this),"px * var(--scale-factor))"),n.color=Ag(OE,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),py(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:i}=this._initialData;let[a,s]=this.getInitialTranslation();[a,s]=this.pageTranslationToScreen(a,s);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(i[0]-c)/o,h=t+this.height-(i[1]-d)/l;break;case 90:u=e+(i[0]-c)/o,h=t-(i[1]-d)/l,[a,s]=[s,-a];break;case 180:u=e-this.width+(i[0]-c)/o,h=t-(i[1]-d)/l,[a,s]=[-a,-s];break;case 270:u=e+(i[0]-c-this.height*l)/o,h=t+(i[1]-d-this.width*o)/l,[a,s]=[-s,a]}this.setAt(u*n,h*r,a,s)}else this.setAt(e*n,t*r,this.width*n,this.height*r);Eg(LE,this,WE).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const r=VE.call(IE,t.getData("text")||"").replaceAll(TE,"\n");if(!r)return;const i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();const a=i.getRangeAt(0);if(!r.includes("\n"))return a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),void i.collapseToStart();const{startContainer:s,startOffset:o}=a,l=[],c=[];if(s.nodeType===Node.TEXT_NODE){const e=s.parentElement;if(c.push(s.nodeValue.slice(o).replaceAll(TE,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(UE.call(IE,n)):t=c}l.push(s.nodeValue.slice(0,o).replaceAll(TE,""))}else if(s===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(UE.call(IE,n))}Tg(PE,this,"".concat(l.join("\n")).concat(r).concat(c.join("\n"))),Eg(LE,this,WE).call(this);const d=new Range;let u=l.reduce(((e,t)=>e+t.length),0);for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(u<=e){d.setStart(h,u),d.setEnd(h,u);break}u-=e}i.removeAllRanges(),i.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let r=null;if(e instanceof eE){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:i,rotation:a,id:s,popupRef:o},textContent:l,textPosition:c,parent:{page:{pageNumber:d}}}=e;if(!l||0===l.length)return null;r=e={annotationType:iv.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:d-1,rect:i.slice(0),rotation:a,id:s,deleted:!1,popupRef:o}}const i=await super.deserialize(e,t,n);return Tg(RE,i,e.fontSize),Tg(OE,i,lb.makeHexColor(...e.color)),Tg(PE,i,VE.call(IE,e.value)),i.annotationElementId=e.id||null,i._initialData=r,i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=IE._internalPadding*this.parentScale,n=this.getRect(t,t),r=Nw._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Ag(OE,this)),i={annotationType:iv.FREETEXT,color:r,fontSize:Ag(RE,this),value:Eg(LE,this,HE).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?i:this.annotationElementId&&!Eg(LE,this,GE).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(Ag(RE,this),"px * var(--scale-factor))"),n.color=Ag(OE,this),t.replaceChildren();for(const i of Ag(PE,this).split("\n")){const e=document.createElement("div");e.append(i?document.createTextNode(i):document.createElement("br")),t.append(e)}const r=IE._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:Ag(PE,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function FE(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-Ag(RE,this))*this.parentScale),Tg(RE,this,e),Eg(LE,this,BE).call(this)},n=Ag(RE,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:av.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function zE(e){const t=e=>{Tg(OE,this,this.editorDiv.style.color=e)},n=Ag(OE,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:av.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function qE(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===r.nodeName||(e.push(UE.call(Ig,r)),t=r)}return e.join("\n")}function BE(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display,i=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r,t.classList.toggle("hidden",i)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function UE(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(TE,"")}function WE(){if(this.editorDiv.replaceChildren(),Ag(PE,this))for(const e of Ag(PE,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function HE(){return Ag(PE,this).replaceAll("\xa0"," ")}function VE(e){return e.replaceAll(" ","\xa0")}function GE(e){const{value:t,fontSize:n,color:r,pageIndex:i}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some(((e,t)=>e!==r[t]))||e.pageIndex!==i}Ig=IE,Be(IE,"_freeTextDefaultContent",""),Be(IE,"_internalPadding",0),Be(IE,"_defaultColor",null),Be(IE,"_defaultFontSize",10),Be(IE,"_type","freetext"),Be(IE,"_editorType",iv.FREETEXT);class QE{toSVGPath(){Vv("Abstract method `toSVGPath` must be implemented.")}get box(){Vv("Abstract getter `box` must be implemented.")}serialize(e,t){Vv("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Vv("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Vv("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var KE=new WeakMap,YE=new WeakMap,XE=new WeakMap,JE=new WeakMap,$E=new WeakMap,ZE=new WeakMap,eC=new WeakMap,tC=new WeakMap,nC=new WeakMap,rC=new WeakMap,iC=new WeakMap,aC=new WeakMap,sC=new WeakMap,oC=new WeakSet;class lC{constructor(e,t,n,r,i){let{x:a,y:s}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Ng(this,oC),Sg(this,KE,void 0),Sg(this,YE,[]),Sg(this,XE,void 0),Sg(this,JE,void 0),Sg(this,$E,[]),Sg(this,ZE,new Float64Array(18)),Sg(this,eC,void 0),Sg(this,tC,void 0),Sg(this,nC,void 0),Sg(this,rC,void 0),Sg(this,iC,void 0),Sg(this,aC,void 0),Sg(this,sC,[]),Tg(KE,this,t),Tg(aC,this,r*n),Tg(JE,this,i),Ag(ZE,this).set([NaN,NaN,NaN,NaN,a,s],6),Tg(XE,this,o),Tg(rC,this,gC._*n),Tg(nC,this,vC._*n),Tg(iC,this,n),Ag(sC,this).push(a,s)}isEmpty(){return isNaN(Ag(ZE,this)[8])}add(e){var t;let{x:n,y:r}=e;Tg(eC,this,n),Tg(tC,this,r);const[i,a,s,o]=Ag(KE,this);let[l,c,d,u]=Ag(ZE,this).subarray(8,12);const h=n-d,p=r-u,m=Math.hypot(h,p);if(m<Ag(nC,this))return!1;const f=m-Ag(rC,this),g=f/m,v=g*h,b=g*p;let y=l,x=c;l=d,c=u,d+=v,u+=b,null===(t=Ag(sC,this))||void 0===t||t.push(n,r);const w=v/f,_=-b/f*Ag(aC,this),k=w*Ag(aC,this);if(Ag(ZE,this).set(Ag(ZE,this).subarray(2,8),0),Ag(ZE,this).set([d+_,u+k],4),Ag(ZE,this).set(Ag(ZE,this).subarray(14,18),12),Ag(ZE,this).set([d-_,u-k],16),isNaN(Ag(ZE,this)[6]))return 0===Ag($E,this).length&&(Ag(ZE,this).set([l+_,c+k],2),Ag($E,this).push(NaN,NaN,NaN,NaN,(l+_-i)/s,(c+k-a)/o),Ag(ZE,this).set([l-_,c-k],14),Ag(YE,this).push(NaN,NaN,NaN,NaN,(l-_-i)/s,(c-k-a)/o)),Ag(ZE,this).set([y,x,l,c,d,u],6),!this.isEmpty();Ag(ZE,this).set([y,x,l,c,d,u],6);return Math.abs(Math.atan2(x-c,y-l)-Math.atan2(b,v))<Math.PI/2?([l,c,d,u]=Ag(ZE,this).subarray(2,6),Ag($E,this).push(NaN,NaN,NaN,NaN,((l+d)/2-i)/s,((c+u)/2-a)/o),[l,c,y,x]=Ag(ZE,this).subarray(14,18),Ag(YE,this).push(NaN,NaN,NaN,NaN,((y+l)/2-i)/s,((x+c)/2-a)/o),!0):([y,x,l,c,d,u]=Ag(ZE,this).subarray(0,6),Ag($E,this).push(((y+5*l)/6-i)/s,((x+5*c)/6-a)/o,((5*l+d)/6-i)/s,((5*c+u)/6-a)/o,((l+d)/2-i)/s,((c+u)/2-a)/o),[d,u,l,c,y,x]=Ag(ZE,this).subarray(12,18),Ag(YE,this).push(((y+5*l)/6-i)/s,((x+5*c)/6-a)/o,((5*l+d)/6-i)/s,((5*c+u)/6-a)/o,((l+d)/2-i)/s,((c+u)/2-a)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=Ag($E,this),t=Ag(YE,this);if(isNaN(Ag(ZE,this)[6])&&!this.isEmpty())return Eg(oC,this,dC).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push("L".concat(e[r+4]," ").concat(e[r+5])):n.push("C".concat(e[r]," ").concat(e[r+1]," ").concat(e[r+2]," ").concat(e[r+3]," ").concat(e[r+4]," ").concat(e[r+5]));Eg(oC,this,hC).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push("L".concat(t[r+4]," ").concat(t[r+5])):n.push("C".concat(t[r]," ").concat(t[r+1]," ").concat(t[r+2]," ").concat(t[r+3]," ").concat(t[r+4]," ").concat(t[r+5]));return Eg(oC,this,uC).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,a){return new SC(e,t,n,r,i,a)}getOutlines(){var e,t;const n=Ag($E,this),r=Ag(YE,this),i=Ag(ZE,this),[a,s,o,l]=Ag(KE,this),c=new Float64Array((null!==(e=null===(t=Ag(sC,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let h=0,p=c.length-2;h<p;h+=2)c[h]=(Ag(sC,this)[h]-a)/o,c[h+1]=(Ag(sC,this)[h+1]-s)/l;if(c[c.length-2]=(Ag(eC,this)-a)/o,c[c.length-1]=(Ag(tC,this)-s)/l,isNaN(i[6])&&!this.isEmpty())return Eg(oC,this,pC).call(this,c);const d=new Float64Array(Ag($E,this).length+24+Ag(YE,this).length);let u=n.length;for(let h=0;h<u;h+=2)isNaN(n[h])?d[h]=d[h+1]=NaN:(d[h]=n[h],d[h+1]=n[h+1]);u=Eg(oC,this,fC).call(this,d,u);for(let h=r.length-6;h>=6;h-=6)for(let e=0;e<6;e+=2)isNaN(r[h+e])?(d[u]=d[u+1]=NaN,u+=2):(d[u]=r[h+e],d[u+1]=r[h+e+1],u+=2);return Eg(oC,this,mC).call(this,d,u),this.newFreeDrawOutline(d,c,Ag(KE,this),Ag(iC,this),Ag(XE,this),Ag(JE,this))}}function cC(){const e=Ag(ZE,this).subarray(4,6),t=Ag(ZE,this).subarray(16,18),[n,r,i,a]=Ag(KE,this);return[(Ag(eC,this)+(e[0]-t[0])/2-n)/i,(Ag(tC,this)+(e[1]-t[1])/2-r)/a,(Ag(eC,this)+(t[0]-e[0])/2-n)/i,(Ag(tC,this)+(t[1]-e[1])/2-r)/a]}function dC(){const[e,t,n,r]=Ag(KE,this),[i,a,s,o]=Eg(oC,this,cC).call(this);return"M".concat((Ag(ZE,this)[2]-e)/n," ").concat((Ag(ZE,this)[3]-t)/r," L").concat((Ag(ZE,this)[4]-e)/n," ").concat((Ag(ZE,this)[5]-t)/r," L").concat(i," ").concat(a," L").concat(s," ").concat(o," L").concat((Ag(ZE,this)[16]-e)/n," ").concat((Ag(ZE,this)[17]-t)/r," L").concat((Ag(ZE,this)[14]-e)/n," ").concat((Ag(ZE,this)[15]-t)/r," Z")}function uC(e){const t=Ag(YE,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function hC(e){const[t,n,r,i]=Ag(KE,this),a=Ag(ZE,this).subarray(4,6),s=Ag(ZE,this).subarray(16,18),[o,l,c,d]=Eg(oC,this,cC).call(this);e.push("L".concat((a[0]-t)/r," ").concat((a[1]-n)/i," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((s[0]-t)/r," ").concat((s[1]-n)/i))}function pC(e){const t=Ag(ZE,this),[n,r,i,a]=Ag(KE,this),[s,o,l,c]=Eg(oC,this,cC).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,s,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(d,e,Ag(KE,this),Ag(iC,this),Ag(XE,this),Ag(JE,this))}function mC(e,t){const n=Ag(YE,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function fC(e,t){const n=Ag(ZE,this).subarray(4,6),r=Ag(ZE,this).subarray(16,18),[i,a,s,o]=Ag(KE,this),[l,c,d,u]=Eg(oC,this,cC).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/s,(n[1]-a)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(r[0]-i)/s,(r[1]-a)/o],t),t+24}var gC={_:8},vC={_:gC._+2},bC=new WeakMap,yC=new WeakMap,xC=new WeakMap,wC=new WeakMap,_C=new WeakMap,kC=new WeakMap,jC=new WeakMap,NC=new WeakSet;class SC extends QE{constructor(e,t,n,r,i,a){super(),Ng(this,NC),Sg(this,bC,void 0),Sg(this,yC,null),Sg(this,xC,void 0),Sg(this,wC,void 0),Sg(this,_C,void 0),Sg(this,kC,void 0),Sg(this,jC,void 0),Tg(jC,this,e),Tg(_C,this,t),Tg(bC,this,n),Tg(kC,this,r),Tg(xC,this,i),Tg(wC,this,a),Eg(NC,this,AC).call(this,a);const{x:s,y:o,width:l,height:c}=Ag(yC,this);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-s)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-s)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(Ag(jC,this)[4]," ").concat(Ag(jC,this)[5])];for(let t=6,n=Ag(jC,this).length;t<n;t+=6)isNaN(Ag(jC,this)[t])?e.push("L".concat(Ag(jC,this)[t+4]," ").concat(Ag(jC,this)[t+5])):e.push("C".concat(Ag(jC,this)[t]," ").concat(Ag(jC,this)[t+1]," ").concat(Ag(jC,this)[t+2]," ").concat(Ag(jC,this)[t+3]," ").concat(Ag(jC,this)[t+4]," ").concat(Ag(jC,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,r,i,a]=e;const s=i-n,o=a-r;let l,c;switch(t){case 0:l=Eg(NC,this,EC).call(this,Ag(jC,this),n,a,s,-o),c=Eg(NC,this,EC).call(this,Ag(_C,this),n,a,s,-o);break;case 90:l=Eg(NC,this,CC).call(this,Ag(jC,this),n,r,s,o),c=Eg(NC,this,CC).call(this,Ag(_C,this),n,r,s,o);break;case 180:l=Eg(NC,this,EC).call(this,Ag(jC,this),i,r,-s,o),c=Eg(NC,this,EC).call(this,Ag(_C,this),i,r,-s,o);break;case 270:l=Eg(NC,this,CC).call(this,Ag(jC,this),i,a,-s,-o),c=Eg(NC,this,CC).call(this,Ag(_C,this),i,a,-s,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return Ag(yC,this)}newOutliner(e,t,n,r,i){return new lC(e,t,n,r,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const{x:n,y:r,width:i,height:a}=Ag(yC,this),[s,o,l,c]=Ag(bC,this),d=i*l,u=a*c,h=n*l+s,p=r*c+o,m=this.newOutliner({x:Ag(_C,this)[0]*d+h,y:Ag(_C,this)[1]*u+p},Ag(bC,this),Ag(kC,this),e,Ag(wC,this),null!==t&&void 0!==t?t:Ag(xC,this));for(let f=2;f<Ag(_C,this).length;f+=2)m.add({x:Ag(_C,this)[f]*d+h,y:Ag(_C,this)[f+1]*u+p});return m.getOutlines()}get mustRemoveSelfIntersections(){return!0}}function EC(e,t,n,r,i){const a=new Float64Array(e.length);for(let s=0,o=e.length;s<o;s+=2)a[s]=t+e[s]*r,a[s+1]=n+e[s+1]*i;return a}function CC(e,t,n,r,i){const a=new Float64Array(e.length);for(let s=0,o=e.length;s<o;s+=2)a[s]=t+e[s+1]*r,a[s+1]=n+e[s]*i;return a}function AC(e){const t=Ag(jC,this);let n=t[4],r=t[5],i=n,a=r,s=n,o=r,l=n,c=r;const d=e?Math.max:Math.min;for(let f=6,g=t.length;f<g;f+=6){if(isNaN(t[f]))i=Math.min(i,t[f+4]),a=Math.min(a,t[f+5]),s=Math.max(s,t[f+4]),o=Math.max(o,t[f+5]),c<t[f+5]?(l=t[f+4],c=t[f+5]):c===t[f+5]&&(l=d(l,t[f+4]));else{const e=lb.bezierBoundingBox(n,r,...t.slice(f,f+6));i=Math.min(i,e[0]),a=Math.min(a,e[1]),s=Math.max(s,e[2]),o=Math.max(o,e[3]),c<e[3]?(l=e[2],c=e[3]):c===e[3]&&(l=d(l,e[2]))}n=t[f+4],r=t[f+5]}const u=i-Ag(xC,this),h=a-Ag(xC,this),p=s-i+2*Ag(xC,this),m=o-a+2*Ag(xC,this);Tg(yC,this,{x:u,y:h,width:p,height:m,lastPoint:[l,c]})}var TC=new WeakMap,OC=new WeakMap,PC=new WeakMap,MC=new WeakSet;class DC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Ng(this,MC),Sg(this,TC,void 0),Sg(this,OC,[]),Sg(this,PC,[]);let i=1/0,a=-1/0,s=1/0,o=-1/0;const l=10**-4;for(const{x:f,y:g,width:v,height:b}of e){const e=Math.floor((f-t)/l)*l,n=Math.ceil((f+v+t)/l)*l,r=Math.floor((g-t)/l)*l,c=Math.ceil((g+b+t)/l)*l,d=[e,r,c,!0],u=[n,r,c,!1];Ag(OC,this).push(d,u),i=Math.min(i,e),a=Math.max(a,n),s=Math.min(s,r),o=Math.max(o,c)}const c=a-i+2*n,d=o-s+2*n,u=i-n,h=s-n,p=Ag(OC,this).at(r?-1:-2),m=[p[0],p[2]];for(const f of Ag(OC,this)){const[e,t,n]=f;f[0]=(e-u)/c,f[1]=(t-h)/d,f[2]=(n-h)/d}Tg(TC,this,{x:u,y:h,width:c,height:d,lastPoint:m})}getOutlines(){Ag(OC,this).sort(((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]));const e=[];for(const t of Ag(OC,this))t[3]?(e.push(...Eg(MC,this,zC).call(this,t)),Eg(MC,this,IC).call(this,t)):(Eg(MC,this,FC).call(this,t),e.push(...Eg(MC,this,zC).call(this,t)));return Eg(MC,this,RC).call(this,e)}}function RC(e){const t=[],n=new Set;for(const a of e){const[e,n,r]=a;t.push([e,n,a],[e,r,a])}t.sort(((e,t)=>e[1]-t[1]||e[0]-t[0]));for(let a=0,s=t.length;a<s;a+=2){const e=t[a][2],r=t[a+1][2];e.push(r),r.push(e),n.add(e),n.add(r)}const r=[];let i;for(;n.size>0;){const e=n.values().next().value;let[t,a,s,o,l]=e;n.delete(e);let c=t,d=a;for(i=[t,s],r.push(i);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,a,s,o,l]=e,c!==t&&(i.push(c,d,t,d===a?a:s),c=t),d=d===a?s:a}i.push(c,d)}return new UC(r,Ag(TC,this))}function LC(e){const t=Ag(PC,this);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:r=i-1}return r+1}function IC(e){let[,t,n]=e;const r=Eg(MC,this,LC).call(this,t);Ag(PC,this).splice(r,0,[t,n])}function FC(e){let[,t,n]=e;const r=Eg(MC,this,LC).call(this,t);for(let i=r;i<Ag(PC,this).length;i++){const[e,r]=Ag(PC,this)[i];if(e!==t)break;if(e===t&&r===n)return void Ag(PC,this).splice(i,1)}for(let i=r-1;i>=0;i--){const[e,r]=Ag(PC,this)[i];if(e!==t)break;if(e===t&&r===n)return void Ag(PC,this).splice(i,1)}}function zC(e){const[t,n,r]=e,i=[[t,n,r]],a=Eg(MC,this,LC).call(this,r);for(let s=0;s<a;s++){const[e,n]=Ag(PC,this)[s];for(let r=0,a=i.length;r<a;r++){const[,s,o]=i[r];if(!(n<=s||o<=e))if(s>=e)if(o>n)i[r][1]=n;else{if(1===a)return[];i.splice(r,1),r--,a--}else i[r][2]=e,o>n&&i.push([t,n,o])}}return i}var qC=new WeakMap,BC=new WeakMap;class UC extends QE{constructor(e,t){super(),Sg(this,qC,void 0),Sg(this,BC,void 0),Tg(BC,this,e),Tg(qC,this,t)}toSVGPath(){const e=[];for(const t of Ag(BC,this)){let[n,r]=t;e.push("M".concat(n," ").concat(r));for(let i=2;i<t.length;i+=2){const a=t[i],s=t[i+1];a===n?(e.push("V".concat(s)),r=s):s===r&&(e.push("H".concat(a)),n=a)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,r,i,a]=e;const s=[],o=i-n,l=a-r;for(const c of Ag(BC,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=a-c[t+1]*l;s.push(e)}return s}get box(){return Ag(qC,this)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class WC extends lC{newFreeDrawOutline(e,t,n,r,i,a){return new HC(e,t,n,r,i,a)}get classNamesForDrawing(){return["highlight","free"]}}class HC extends SC{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,r,i){return new WC(e,t,n,r,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var VC=new WeakMap,GC=new WeakMap,QC=new WeakMap,KC=new WeakMap,YC=new WeakMap,XC=new WeakMap,JC=new WeakMap,$C=new WeakMap,ZC=new WeakMap,eA=new WeakMap,tA=new WeakMap,nA=new WeakSet;class rA{static get _keyboardManager(){return Kv(this,"_keyboardManager",new Cy([[["Escape","mac+Escape"],rA.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],rA.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],rA.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],rA.prototype._moveToPrevious],[["Home","mac+Home"],rA.prototype._moveToBeginning],[["End","mac+End"],rA.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:r=null}=e;Ng(this,nA),Sg(this,VC,null),Sg(this,GC,null),Sg(this,QC,void 0),Sg(this,KC,null),Sg(this,YC,!1),Sg(this,XC,!1),Sg(this,JC,null),Sg(this,$C,void 0),Sg(this,ZC,null),Sg(this,eA,null),Sg(this,tA,void 0),n?(Tg(XC,this,!1),Tg(tA,this,av.HIGHLIGHT_COLOR),Tg(JC,this,n)):(Tg(XC,this,!0),Tg(tA,this,av.HIGHLIGHT_DEFAULT_COLOR)),Tg(eA,this,(null===n||void 0===n?void 0:n._uiManager)||r),Tg($C,this,Ag(eA,this)._eventBus),Tg(QC,this,(null===n||void 0===n?void 0:n.color)||(null===(t=Ag(eA,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98"),dA._||(dA._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=Tg(VC,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=Ag(eA,this)._signal;e.addEventListener("click",Eg(nA,this,oA).bind(this),{signal:t}),e.addEventListener("keydown",Eg(nA,this,sA).bind(this),{signal:t});const n=Tg(GC,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=Ag(QC,this),e.append(n),e}renderMainDropdown(){const e=Tg(KC,this,Eg(nA,this,iA).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===Ag(VC,this))return void Eg(nA,this,oA).call(this,e);const t=e.target.getAttribute("data-color");t&&Eg(nA,this,aA).call(this,t,e)}_moveToNext(e){var t,n;Cg(nA,this,cA)?e.target!==Ag(VC,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=Ag(KC,this).firstChild)||void 0===n||n.focus():Eg(nA,this,oA).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=Ag(KC,this))||void 0===t?void 0:t.firstChild)&&e.target!==Ag(VC,this)?(Cg(nA,this,cA)||Eg(nA,this,oA).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):Cg(nA,this,cA)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;Cg(nA,this,cA)?null===(t=Ag(KC,this).firstChild)||void 0===t||t.focus():Eg(nA,this,oA).call(this,e)}_moveToEnd(e){var t;Cg(nA,this,cA)?null===(t=Ag(KC,this).lastChild)||void 0===t||t.focus():Eg(nA,this,oA).call(this,e)}hideDropdown(){var e,t;null===(e=Ag(KC,this))||void 0===e||e.classList.add("hidden"),null===(t=Ag(ZC,this))||void 0===t||t.abort(),Tg(ZC,this,null)}_hideDropdownFromKeyboard(){var e;Ag(XC,this)||(Cg(nA,this,cA)?(this.hideDropdown(),Ag(VC,this).focus({preventScroll:!0,focusVisible:Ag(YC,this)})):null===(e=Ag(JC,this))||void 0===e||e.unselect())}updateColor(e){if(Ag(GC,this)&&(Ag(GC,this).style.backgroundColor=e),!Ag(KC,this))return;const t=Ag(eA,this).highlightColors.values();for(const n of Ag(KC,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=Ag(VC,this))||void 0===e||e.remove(),Tg(VC,this,null),Tg(GC,this,null),null===(t=Ag(KC,this))||void 0===t||t.remove(),Tg(KC,this,null)}}function iA(){const e=document.createElement("div"),t=Ag(eA,this)._signal;e.addEventListener("contextmenu",Rb,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of Ag(eA,this).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",dA._[n]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.setAttribute("aria-selected",r===Ag(QC,this)),i.addEventListener("click",Eg(nA,this,aA).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",Eg(nA,this,sA).bind(this),{signal:t}),e}function aA(e,t){t.stopPropagation(),Ag($C,this).dispatch("switchannotationeditorparams",{source:this,type:Ag(tA,this),value:e})}function sA(e){Fg._keyboardManager.exec(this,e)}function oA(e){if(Cg(nA,this,cA))return void this.hideDropdown();if(Tg(YC,this,0===e.detail),Ag(ZC,this)||(Tg(ZC,this,new AbortController),window.addEventListener("pointerdown",Eg(nA,this,lA).bind(this),{signal:Ag(eA,this).combinedSignal(Ag(ZC,this))})),Ag(KC,this))return void Ag(KC,this).classList.remove("hidden");const t=Tg(KC,this,Eg(nA,this,iA).call(this));Ag(VC,this).append(t)}function lA(e){var t;null!==(t=Ag(KC,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function cA(e){return Ag(KC,e)&&!Ag(KC,e).classList.contains("hidden")}Fg=rA;var dA={_:null},uA=new WeakMap,hA=new WeakMap,pA=new WeakMap,mA=new WeakMap,fA=new WeakMap,gA=new WeakMap,vA=new WeakMap,bA=new WeakMap,yA=new WeakMap,xA=new WeakMap,wA=new WeakMap,_A=new WeakMap,kA=new WeakMap,jA=new WeakMap,NA=new WeakMap,SA=new WeakMap,EA=new WeakMap,CA=new WeakMap,AA=new WeakSet;class TA extends Nw{static get _keyboardManager(){const e=TA.prototype;return Kv(this,"_keyboardManager",new Cy([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(We(We({},e),{},{name:"highlightEditor"})),Ng(this,AA),Sg(this,uA,null),Sg(this,hA,0),Sg(this,pA,void 0),Sg(this,mA,null),Sg(this,fA,null),Sg(this,gA,null),Sg(this,vA,null),Sg(this,bA,0),Sg(this,yA,null),Sg(this,xA,null),Sg(this,wA,null),Sg(this,_A,!1),Sg(this,kA,null),Sg(this,jA,void 0),Sg(this,NA,null),Sg(this,SA,""),Sg(this,EA,void 0),Sg(this,CA,""),this.color=e.color||TA._defaultColor,Tg(EA,this,e.thickness||TA._defaultThickness),Tg(jA,this,e.opacity||TA._defaultOpacity),Tg(pA,this,e.boxes||null),Tg(CA,this,e.methodOfCreation||""),Tg(SA,this,e.text||""),this._isDraggable=!1,e.highlightId>-1?(Tg(_A,this,!0),Eg(AA,this,PA).call(this,e),Eg(AA,this,IA).call(this)):Ag(pA,this)&&(Tg(uA,this,e.anchorNode),Tg(hA,this,e.anchorOffset),Tg(vA,this,e.focusNode),Tg(bA,this,e.focusOffset),Eg(AA,this,OA).call(this),Eg(AA,this,IA).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:Ag(_A,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:Ag(EA,this),methodOfCreation:Ag(CA,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;Nw.initialize(e,t),TA._defaultColor||(TA._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case av.HIGHLIGHT_DEFAULT_COLOR:TA._defaultColor=t;break;case av.HIGHLIGHT_THICKNESS:TA._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return Ag(kA,this)}updateParams(e,t){switch(e){case av.HIGHLIGHT_COLOR:Eg(AA,this,MA).call(this,t);break;case av.HIGHLIGHT_THICKNESS:Eg(AA,this,DA).call(this,t)}}static get defaultPropertiesToUpdate(){return[[av.HIGHLIGHT_DEFAULT_COLOR,TA._defaultColor],[av.HIGHLIGHT_THICKNESS,TA._defaultThickness]]}get propertiesToUpdate(){return[[av.HIGHLIGHT_COLOR,this.color||TA._defaultColor],[av.HIGHLIGHT_THICKNESS,Ag(EA,this)||TA._defaultThickness],[av.HIGHLIGHT_FREE,Ag(_A,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(Tg(fA,this,new rA({editor:this})),e.addColorPicker(Ag(fA,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Eg(AA,this,BA).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,Eg(AA,this,BA).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){Eg(AA,this,LA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Eg(AA,this,IA).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)Eg(AA,this,LA).call(this);else if(e){var n;Eg(AA,this,IA).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;Ag(_A,this)?(e=(e-this.rotation+360)%360,n=FA.call(TA,Ag(xA,this).box,e)):n=FA.call(TA,this,e),t.rotate(Ag(wA,this),e),t.rotate(Ag(NA,this),e),t.updateBox(Ag(wA,this),n),t.updateBox(Ag(NA,this),FA.call(TA,Ag(gA,this).box,e))}render(){if(this.div)return this.div;const e=super.render();Ag(SA,this)&&(e.setAttribute("aria-label",Ag(SA,this)),e.setAttribute("role","mark")),Ag(_A,this)?e.classList.add("free"):this.div.addEventListener("keydown",Eg(AA,this,zA).bind(this),{signal:this._uiManager._signal});const t=Tg(yA,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=Ag(mA,this);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),py(this,Ag(yA,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(Ag(NA,this),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(Ag(NA,this),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:Eg(AA,this,qA).call(this,!0);break;case 1:case 3:Eg(AA,this,qA).call(this,!1)}}select(){var e,t;super.select(),Ag(NA,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(Ag(NA,this),"hovered"),null===(t=this.parent)||void 0===t||t.drawLayer.addClass(Ag(NA,this),"selected"))}unselect(){var e;super.unselect(),Ag(NA,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(Ag(NA,this),"selected"),Ag(_A,this)||Eg(AA,this,qA).call(this,!1))}get _mustFixPosition(){return!Ag(_A,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.show(Ag(wA,this),e),this.parent.drawLayer.show(Ag(NA,this),e))}static startHighlighting(e,t,n){let{target:r,x:i,y:a}=n;const{x:s,y:o,width:l,height:c}=r.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=t=>{d.abort(),Eg(TA,this,VA).call(this,e,t)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Rb,{signal:u}),r.addEventListener("pointermove",Eg(TA,this,HA).bind(this,e),{signal:u}),this._freeHighlight=new WC({x:i,y:a},[s,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static async deserialize(e,t,n){let r=null;if(e instanceof pE){const{data:{quadPoints:t,rect:n,rotation:i,id:a,color:s,opacity:o,popupRef:l},parent:{page:{pageNumber:c}}}=e;r=e={annotationType:iv.HIGHLIGHT,color:Array.from(s),opacity:o,quadPoints:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:i,id:a,deleted:!1,popupRef:l}}else if(e instanceof hE){const{data:{inkLists:t,rect:n,rotation:i,id:a,color:s,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:c}}}=e;r=e={annotationType:iv.HIGHLIGHT,color:Array.from(s),thickness:o,inkLists:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:i,id:a,deleted:!1,popupRef:l}}const{color:i,quadPoints:a,inkLists:s,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=lb.makeHexColor(...i),Tg(jA,l,o||1),s&&Tg(EA,l,e.thickness),l.annotationElementId=e.id||null,l._initialData=r;const[c,d]=l.pageDimensions,[u,h]=l.pageTranslation;if(a){const e=Tg(pA,l,[]);for(let t=0;t<a.length;t+=8)e.push({x:(a[t]-u)/c,y:1-(a[t+1]-h)/d,width:(a[t+2]-a[t])/c,height:(a[t+1]-a[t+5])/d});Eg(AA,l,OA).call(l),Eg(AA,l,IA).call(l),l.rotate(l.rotation)}else if(s){Tg(_A,l,!0);const e=s[0],n={x:e[0]-u,y:d-(e[1]-h)},r=new WC(n,[0,0,c,d],1,Ag(EA,l)/2,!0,.001);for(let t=0,s=e.length;t<s;t+=2)n.x=e[t]-u,n.y=d-(e[t+1]-h),r.add(n);const{id:i,clipPathId:a}=t.drawLayer.draw(r,l.color,l._defaultOpacity,!0);Eg(AA,l,PA).call(l,{highlightOutlines:r.getOutlines(),highlightId:i,clipPathId:a}),Eg(AA,l,IA).call(l)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=Nw._colorManager.convert(this.color),r={annotationType:iv.HIGHLIGHT,color:n,opacity:Ag(jA,this),thickness:Ag(EA,this),quadPoints:Eg(AA,this,UA).call(this),outlines:Eg(AA,this,WA).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:Eg(AA,this,BA).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!Eg(AA,this,GA).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function OA(){const e=new DC(Ag(pA,this),.001);Tg(xA,this,e.getOutlines()),({x:this.x,y:this.y,width:this.width,height:this.height}=Ag(xA,this).box);const t=new DC(Ag(pA,this),.0025,.001,"ltr"===this._uiManager.direction);Tg(gA,this,t.getOutlines());const{lastPoint:n}=Ag(gA,this).box;Tg(kA,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function PA(e){let{highlightOutlines:t,highlightId:n,clipPathId:r}=e;Tg(xA,this,t);if(Tg(gA,this,t.getNewOutline(Ag(EA,this)/2+1.5,.0025)),n>=0)Tg(wA,this,n),Tg(mA,this,r),this.parent.drawLayer.finalizeLine(n,t),Tg(NA,this,this.parent.drawLayer.drawOutline(Ag(gA,this)));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(Ag(wA,this),t),this.parent.drawLayer.updateBox(Ag(wA,this),FA.call(zg,Ag(xA,this).box,(e-this.rotation+360)%360)),this.parent.drawLayer.updateLine(Ag(NA,this),Ag(gA,this)),this.parent.drawLayer.updateBox(Ag(NA,this),FA.call(zg,Ag(gA,this).box,e))}const{x:i,y:a,width:s,height:o}=t.box;switch(this.rotation){case 0:this.x=i,this.y=a,this.width=s,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=a,this.y=1-i,this.width=s*t/e,this.height=o*e/t;break}case 180:this.x=1-i,this.y=1-a,this.width=s,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-a,this.y=i,this.width=s*t/e,this.height=o*e/t;break}}const{lastPoint:l}=Ag(gA,this).box;Tg(kA,this,[(l[0]-i)/s,(l[1]-a)/o])}function MA(e){const t=(e,t)=>{var n,r,i;this.color=e,null===(n=this.parent)||void 0===n||n.drawLayer.changeColor(Ag(wA,this),e),null===(r=Ag(fA,this))||void 0===r||r.updateColor(e),Tg(jA,this,t),null===(i=this.parent)||void 0===i||i.drawLayer.changeOpacity(Ag(wA,this),t)},n=this.color,r=Ag(jA,this);this.addCommands({cmd:t.bind(this,e,zg._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:av.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function DA(e){const t=Ag(EA,this),n=e=>{Tg(EA,this,e),Eg(AA,this,RA).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:av.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function RA(e){if(!Ag(_A,this))return;Eg(AA,this,PA).call(this,{highlightOutlines:Ag(xA,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function LA(){null!==Ag(wA,this)&&this.parent&&(this.parent.drawLayer.remove(Ag(wA,this)),Tg(wA,this,null),this.parent.drawLayer.remove(Ag(NA,this)),Tg(NA,this,null))}function IA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===Ag(wA,this)&&(({id:kg(Tg,[wA,this])._,clipPathId:kg(Tg,[mA,this])._}=e.drawLayer.draw(Ag(xA,this),this.color,Ag(jA,this))),Tg(NA,this,e.drawLayer.drawOutline(Ag(gA,this))),Ag(yA,this)&&(Ag(yA,this).style.clipPath=Ag(mA,this)))}function FA(e,t){let{x:n,y:r,width:i,height:a}=e;switch(t){case 90:return{x:1-r-a,y:n,width:a,height:i};case 180:return{x:1-n-i,y:1-r-a,width:i,height:a};case 270:return{x:r,y:1-n-i,width:a,height:i}}return{x:n,y:r,width:i,height:a}}function zA(e){zg._keyboardManager.exec(this,e)}function qA(e){if(!Ag(uA,this))return;const t=window.getSelection();e?t.setPosition(Ag(uA,this),Ag(hA,this)):t.setPosition(Ag(vA,this),Ag(bA,this))}function BA(){return Ag(_A,this)?this.rotation:0}function UA(){if(Ag(_A,this))return null;const[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,i=Ag(pA,this),a=new Float32Array(8*i.length);let s=0;for(const{x:o,y:l,width:c,height:d}of i){const i=o*e+n,u=(1-l-d)*t+r;a[s]=a[s+4]=i,a[s+1]=a[s+3]=u,a[s+2]=a[s+6]=i+c*e,a[s+5]=a[s+7]=u+d*t,s+=8}return a}function WA(e){return Ag(xA,this).serialize(e,Eg(AA,this,BA).call(this))}function HA(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}function VA(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function GA(e){const{color:t}=this._initialData;return e.color.some(((e,n)=>e!==t[n]))}zg=TA,Be(TA,"_defaultColor",null),Be(TA,"_defaultOpacity",1),Be(TA,"_defaultThickness",12),Be(TA,"_type","highlight"),Be(TA,"_editorType",iv.HIGHLIGHT),Be(TA,"_freeHighlightId",-1),Be(TA,"_freeHighlight",null),Be(TA,"_freeHighlightClipId","");var QA=new WeakMap,KA=new WeakMap,YA=new WeakMap,XA=new WeakMap,JA=new WeakMap,$A=new WeakMap,ZA=new WeakMap,eT=new WeakMap,tT=new WeakMap,nT=new WeakMap,rT=new WeakMap,iT=new WeakMap,aT=new WeakMap,sT=new WeakSet;class oT extends Nw{constructor(e){super(We(We({},e),{},{name:"inkEditor"})),Ng(this,sT),Sg(this,QA,0),Sg(this,KA,0),Sg(this,YA,null),Sg(this,XA,new Path2D),Sg(this,JA,!1),Sg(this,$A,null),Sg(this,ZA,!1),Sg(this,eT,!1),Sg(this,tT,null),Sg(this,nT,null),Sg(this,rT,0),Sg(this,iT,0),Sg(this,aT,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){Nw.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case av.INK_THICKNESS:oT._defaultThickness=t;break;case av.INK_COLOR:oT._defaultColor=t;break;case av.INK_OPACITY:oT._defaultOpacity=t/100}}updateParams(e,t){switch(e){case av.INK_THICKNESS:Eg(sT,this,lT).call(this,t);break;case av.INK_COLOR:Eg(sT,this,cT).call(this,t);break;case av.INK_OPACITY:Eg(sT,this,dT).call(this,t)}}static get defaultPropertiesToUpdate(){return[[av.INK_THICKNESS,oT._defaultThickness],[av.INK_COLOR,oT._defaultColor||Nw._defaultLineColor],[av.INK_OPACITY,Math.round(100*oT._defaultOpacity)]]}get propertiesToUpdate(){var e;return[[av.INK_THICKNESS,this.thickness||oT._defaultThickness],[av.INK_COLOR,this.color||oT._defaultColor||Nw._defaultLineColor],[av.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:oT._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(Eg(sT,this,jT).call(this),Eg(sT,this,NT).call(this)),this.isAttachedToDOM||(this.parent.add(this),Eg(sT,this,ST).call(this)),Eg(sT,this,RT).call(this)))}remove(){var e;null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Ag(YA,this)&&(clearTimeout(Ag(YA,this)),Tg(YA,this,null)),null===(e=Ag(tT,this))||void 0===e||e.disconnect(),Tg(tT,this,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,r=this.height*t;this.setDimensions(n,r)}enableEditMode(){Ag(JA,this)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,Eg(sT,this,wT).call(this))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),Eg(sT,this,_T).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){Ag(JA,this)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Tg(JA,this,!0),this.div.classList.add("disabled"),Eg(sT,this,RT).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!Ag(JA,this)&&(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),Eg(sT,this,pT).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),Eg(sT,this,mT).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),Eg(sT,this,kT).call(this,e)}canvasPointerleave(e){Eg(sT,this,kT).call(this,e)}get isResizable(){return!this.isEmpty()&&Ag(JA,this)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,r,i,a]=Eg(sT,this,uT).call(this);if(this.setAt(n,r,0,0),this.setDims(i,a),Eg(sT,this,jT).call(this),this.width){const[n,r]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*r),this.setAt(e*n,t*r,this.width*n,this.height*r),Tg(eT,this,!0),Eg(sT,this,ST).call(this),this.setDims(this.width*n,this.height*r),Eg(sT,this,xT).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Eg(sT,this,NT).call(this),this.div}setDimensions(e,t){const n=Math.round(e),r=Math.round(t);if(Ag(rT,this)===n&&Ag(iT,this)===r)return;Tg(rT,this,n),Tg(iT,this,r),this.canvas.style.visibility="hidden";const[i,a]=this.parentDimensions;this.width=e/i,this.height=t/a,this.fixAndSetPosition(),Ag(JA,this)&&Eg(sT,this,ET).call(this,e,t),Eg(sT,this,ST).call(this),Eg(sT,this,xT).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,t,n){if(e instanceof hE)return null;const r=await super.deserialize(e,t,n);r.thickness=e.thickness,r.color=lb.makeHexColor(...e.color),r.opacity=e.opacity;const[i,a]=r.pageDimensions,s=r.width*i,o=r.height*a,l=r.parentScale,c=e.thickness/2;Tg(JA,r,!0),Tg(rT,r,Math.round(s)),Tg(iT,r,Math.round(o));const{paths:d,rect:u,rotation:h}=e;for(let{bezier:m}of d){m=OT.call(oT,m,u,h);const e=[];r.paths.push(e);let t=l*(m[0]-c),n=l*(m[1]-c);for(let r=2,a=m.length;r<a;r+=6){const i=l*(m[r]-c),a=l*(m[r+1]-c),s=l*(m[r+2]-c),o=l*(m[r+3]-c),d=l*(m[r+4]-c),u=l*(m[r+5]-c);e.push([[t,n],[i,a],[s,o],[d,u]]),t=d,n=u}const i=Eg(oT,this,AT).call(this,e);r.bezierPath2D.push(i)}const p=Eg(sT,r,MT).call(r);return Tg(KA,r,Math.max(Nw.MIN_SIZE,p[2]-p[0])),Tg(QA,r,Math.max(Nw.MIN_SIZE,p[3]-p[1])),Eg(sT,r,ET).call(r,s,o),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=Nw._colorManager.convert(this.ctx.strokeStyle);return{annotationType:iv.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:Eg(sT,this,PT).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}function lT(e){const t=e=>{this.thickness=e,Eg(sT,this,RT).call(this)},n=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:av.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function cT(e){const t=e=>{this.color=e,Eg(sT,this,xT).call(this)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:av.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function dT(e){const t=e=>{this.opacity=e,Eg(sT,this,xT).call(this)};e/=100;const n=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:av.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function uT(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}function hT(){const{ctx:e,color:t,opacity:n,thickness:r,parentScale:i,scaleFactor:a}=this;e.lineWidth=r*i/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(t).concat(function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}(n))}function pT(e,t){this.canvas.addEventListener("contextmenu",Rb,{signal:this._uiManager._signal}),Eg(sT,this,_T).call(this),Tg($A,this,new AbortController);const n=this._uiManager.combinedSignal(Ag($A,this));var r;(this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:n}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:n}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:n}),this.isEditing=!0,Ag(eT,this))||(Tg(eT,this,!0),Eg(sT,this,ST).call(this),this.thickness||(this.thickness=qg._defaultThickness),this.color||(this.color=qg._defaultColor||Nw._defaultLineColor),null!==(r=this.opacity)&&void 0!==r||(this.opacity=qg._defaultOpacity));this.currentPath.push([e,t]),Tg(ZA,this,!1),Eg(sT,this,hT).call(this),Tg(aT,this,(()=>{Eg(sT,this,vT).call(this),Ag(aT,this)&&window.requestAnimationFrame(Ag(aT,this))})),window.requestAnimationFrame(Ag(aT,this))}function mT(e,t){const[n,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===r)return;const i=this.currentPath;let a=Ag(XA,this);if(i.push([e,t]),Tg(ZA,this,!0),i.length<=2)return a.moveTo(...i[0]),void a.lineTo(e,t);3===i.length&&(Tg(XA,this,a=new Path2D),a.moveTo(...i[0])),Eg(sT,this,bT).call(this,a,...i.at(-3),...i.at(-2),e,t)}function fT(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);Ag(XA,this).lineTo(...e)}function gT(e,t){let n;if(Tg(aT,this,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),Eg(sT,this,mT).call(this,e,t),Eg(sT,this,fT).call(this),1!==this.currentPath.length)n=Eg(sT,this,yT).call(this);else{const r=[e,t];n=[[r,r.slice(),r.slice(),r]]}const r=Ag(XA,this),i=this.currentPath;this.currentPath=[],Tg(XA,this,new Path2D);this.addCommands({cmd:()=>{this.allRawPaths.push(i),this.paths.push(n),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(Eg(sT,this,jT).call(this),Eg(sT,this,NT).call(this)),Eg(sT,this,RT).call(this))},mustExec:!0})}function vT(){if(!Ag(ZA,this))return;Tg(ZA,this,!1);const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),n=t.map((e=>e[0])),r=t.map((e=>e[1])),{ctx:i}=(Math.min(...n),Math.max(...n),Math.min(...r),Math.max(...r),this);i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)i.stroke(a);i.stroke(Ag(XA,this)),i.restore()}function bT(e,t,n,r,i,a,s){const o=(t+r)/2,l=(n+i)/2,c=(r+a)/2,d=(i+s)/2;e.bezierCurveTo(o+2*(r-o)/3,l+2*(i-l)/3,c+2*(r-c)/3,d+2*(i-d)/3,c,d)}function yT(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[r,i]=e[0];for(n=1;n<e.length-2;n++){const[a,s]=e[n],[o,l]=e[n+1],c=(a+o)/2,d=(s+l)/2,u=[r+2*(a-r)/3,i+2*(s-i)/3],h=[c+2*(a-c)/3,d+2*(s-d)/3];t.push([[r,i],u,h,[c,d]]),[r,i]=[c,d]}const[a,s]=e[n],[o,l]=e[n+1],c=[r+2*(a-r)/3,i+2*(s-i)/3],d=[o+2*(a-o)/3,l+2*(s-l)/3];return t.push([[r,i],c,d,[o,l]]),t}function xT(){if(this.isEmpty())return void Eg(sT,this,CT).call(this);Eg(sT,this,hT).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),Eg(sT,this,CT).call(this);for(const n of this.bezierPath2D)t.stroke(n)}function wT(){if(Ag(nT,this))return;Tg(nT,this,new AbortController);const e=this._uiManager.combinedSignal(Ag(nT,this));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}function _T(){var e;null===(e=this.pointerdownAC)||void 0===e||e.abort(),this.pointerdownAC=null}function kT(e){var t;null===(t=Ag($A,this))||void 0===t||t.abort(),Tg($A,this,null),Eg(sT,this,wT).call(this),Ag(YA,this)&&clearTimeout(Ag(YA,this)),Tg(YA,this,setTimeout((()=>{Tg(YA,this,null),this.canvas.removeEventListener("contextmenu",Rb)}),10)),Eg(sT,this,gT).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function jT(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function NT(){Tg(tT,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}))),Ag(tT,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var e;null===(e=Ag(tT,this))||void 0===e||e.disconnect(),Tg(tT,this,null)}),{once:!0})}function ST(){if(!Ag(eT,this))return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),Eg(sT,this,CT).call(this)}function ET(e,t){const n=Eg(sT,this,DT).call(this),r=(e-n)/Ag(KA,this),i=(t-n)/Ag(QA,this);this.scaleFactor=Math.min(r,i)}function CT(){const e=Eg(sT,this,DT).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function AT(e){const t=new Path2D;for(let n=0,r=e.length;n<r;n++){const[r,i,a,s]=e[n];0===n&&t.moveTo(...r),t.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}return t}function TT(e,t,n){const[r,i,a,s]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=r,e[t+1]=s-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+r,e[t+1]=n+i}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=a-e[t],e[t+1]+=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=a-e[t+1],e[t+1]=s-n}break;default:throw new Error("Invalid rotation")}return e}function OT(e,t,n){const[r,i,a,s]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=r,e[t+1]=s-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-i,e[t+1]=n-r}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=a-e[t],e[t+1]-=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=s-e[t+1],e[t+1]=a-n}break;default:throw new Error("Invalid rotation")}return e}function PT(e,t,n,r){const i=[],a=this.thickness/2,s=e*t+a,o=e*n+a;for(const l of this.paths){const t=[],n=[];for(let r=0,i=l.length;r<i;r++){const[a,c,d,u]=l[r];if(a[0]===u[0]&&a[1]===u[1]&&1===i){const r=e*a[0]+s,i=e*a[1]+o;t.push(r,i),n.push(r,i);break}const h=e*a[0]+s,p=e*a[1]+o,m=e*c[0]+s,f=e*c[1]+o,g=e*d[0]+s,v=e*d[1]+o,b=e*u[0]+s,y=e*u[1]+o;0===r&&(t.push(h,p),n.push(h,p)),t.push(m,f,g,v,b,y),n.push(m,f),r===i-1&&n.push(b,y)}i.push({bezier:TT.call(qg,t,r,this.rotation),points:TT.call(qg,n,r,this.rotation)})}return i}function MT(){let e=1/0,t=-1/0,n=1/0,r=-1/0;for(const i of this.paths)for(const[a,s,o,l]of i){const i=lb.bezierBoundingBox(...a,...s,...o,...l);e=Math.min(e,i[0]),n=Math.min(n,i[1]),t=Math.max(t,i[2]),r=Math.max(r,i[3])}return[e,n,t,r]}function DT(){return Ag(JA,this)?Math.ceil(this.thickness*this.parentScale):0}function RT(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!Ag(JA,this))return void Eg(sT,this,xT).call(this);const t=Eg(sT,this,MT).call(this),n=Eg(sT,this,DT).call(this);Tg(KA,this,Math.max(Nw.MIN_SIZE,t[2]-t[0])),Tg(QA,this,Math.max(Nw.MIN_SIZE,t[3]-t[1]));const r=Math.ceil(n+Ag(KA,this)*this.scaleFactor),i=Math.ceil(n+Ag(QA,this)*this.scaleFactor),[a,s]=this.parentDimensions;this.width=r/a,this.height=i/s,this.setAspectRatio(r,i);const o=this.translationX,l=this.translationY;this.translationX=-t[0],this.translationY=-t[1],Eg(sT,this,ST).call(this),Eg(sT,this,xT).call(this),Tg(rT,this,r),Tg(iT,this,i),this.setDims(r,i);const c=e?n/this.scaleFactor/2:0;this.translate(o-this.translationX-c,l-this.translationY-c)}qg=oT,Be(oT,"_defaultColor",null),Be(oT,"_defaultOpacity",1),Be(oT,"_defaultThickness",1),Be(oT,"_type","ink"),Be(oT,"_editorType",iv.INK);var LT=new WeakMap,IT=new WeakMap,FT=new WeakMap,zT=new WeakMap,qT=new WeakMap,BT=new WeakMap,UT=new WeakMap,WT=new WeakMap,HT=new WeakMap,VT=new WeakMap,GT=new WeakMap,QT=new WeakSet;class KT extends Nw{constructor(e){super(We(We({},e),{},{name:"stampEditor"})),Ng(this,QT),Sg(this,LT,null),Sg(this,IT,null),Sg(this,FT,null),Sg(this,zT,null),Sg(this,qT,null),Sg(this,BT,""),Sg(this,UT,null),Sg(this,WT,null),Sg(this,HT,null),Sg(this,VT,!1),Sg(this,GT,!1),Tg(zT,this,e.bitmapUrl),Tg(qT,this,e.bitmapFile)}static initialize(e,t){Nw.initialize(e,t)}static get supportedTypes(){return Kv(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((e=>"image/".concat(e))))}static get supportedTypesStr(){return Kv(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(iv.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const r=e.get("hasAltText");return{hasAltText:null!==(t=r.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=r.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:i,height:a}=e||this.copyCanvas(null,null,!0).imageData,s=await n.guess({name:"altText",request:{data:r,width:i,height:a,channels:r.length/(i*a)}});if(!s)throw new Error("No response from the AI service.");if(s.error)throw new Error("Error from the AI service.");if(s.cancel)return null;if(!s.output)throw new Error("No valid response from the AI service.");const o=s.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e,t;Ag(IT,this)&&(Tg(LT,this,null),this._uiManager.imageManager.deleteId(Ag(IT,this)),null===(e=Ag(UT,this))||void 0===e||e.remove(),Tg(UT,this,null),null===(t=Ag(WT,this))||void 0===t||t.disconnect(),Tg(WT,this,null),Ag(HT,this)&&(clearTimeout(Ag(HT,this)),Tg(HT,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Ag(IT,this)&&null===Ag(UT,this)&&Eg(QT,this,JT).call(this),this.isAttachedToDOM||this.parent.add(this))):Ag(IT,this)&&Eg(QT,this,JT).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(Ag(FT,this)||Ag(LT,this)||Ag(zT,this)||Ag(qT,this)||Ag(IT,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),Ag(LT,this)?Eg(QT,this,$T).call(this):Eg(QT,this,JT).call(this),this.width&&!this.annotationElementId){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r)}return this.div}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:r,height:i}=Ag(LT,this),a=new Hb;let s=Ag(LT,this),o=r,l=i,c=null;if(t){var d,u;if(r>t||i>t){const e=Math.min(t/r,t/i);o=Math.floor(r*e),l=Math.floor(i*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*a.sx),n=c.height=Math.ceil(l*a.sy);Ag(VT,this)||(s=Eg(QT,this,eO).call(this,e,n));const h=c.getContext("2d");h.filter=this._uiManager.hcmFilter;let p="white",m="#cfcfd8";"none"!==this._uiManager.hcmFilter?m="black":null!==(d=(u=window).matchMedia)&&void 0!==d&&d.call(u,"(prefers-color-scheme: dark)").matches&&(p="#8f8f9d",m="#42414d");const f=15,g=f*a.sx,v=f*a.sy,b=new OffscreenCanvas(2*g,2*v),y=b.getContext("2d");y.fillStyle=p,y.fillRect(0,0,2*g,2*v),y.fillStyle=m,y.fillRect(0,0,g,v),y.fillRect(g,v,g,v),h.fillStyle=h.createPattern(b,"repeat"),h.fillRect(0,0,e,n),h.drawImage(s,0,0,s.width,s.height,0,0,e,n)}let h=null;if(n){let t,n;if(a.symmetric&&s.width<e&&s.height<e)t=s.width,n=s.height;else if(s=Ag(LT,this),r>e||i>e){const a=Math.min(e/r,e/i);t=Math.floor(r*a),n=Math.floor(i*a),Ag(VT,this)||(s=Eg(QT,this,eO).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(s,0,0,s.width,s.height,0,0,t,n),h={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:h}}getImageForAltText(){return Ag(UT,this)}static async deserialize(e,t,n){let r=null;if(e instanceof vE){var i;const{data:{rect:a,rotation:s,id:o,structParent:l,popupRef:c},container:d,parent:{page:{pageNumber:u}}}=e,h=d.querySelector("canvas"),p=n.imageManager.getFromCanvas(d.id,h);h.remove();const m=(null===(i=await t._structTree.getAriaAttributes("".concat(mb).concat(o)))||void 0===i?void 0:i.get("aria-label"))||"";r=e={annotationType:iv.STAMP,bitmapId:p.id,bitmap:p.bitmap,pageIndex:u-1,rect:a.slice(0),rotation:s,id:o,deleted:!1,accessibilityData:{decorative:!1,altText:m},isSvg:!1,structParent:l,popupRef:c}}const a=await super.deserialize(e,t,n),{rect:s,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:d,accessibilityData:u}=e;c&&n.imageManager.isValidId(c)?(Tg(IT,a,c),o&&Tg(LT,a,o)):Tg(zT,a,l),Tg(VT,a,d);const[h,p]=a.pageDimensions;return a.width=(s[2]-s[0])/h,a.height=(s[3]-s[1])/p,a.annotationElementId=e.id||null,u&&(a.altTextData=u),a._initialData=r,Tg(GT,a,!!r),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:iv.STAMP,bitmapId:Ag(IT,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Ag(VT,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=Eg(QT,this,nO).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:r,altText:i}=this.serializeAltText(!1);if(!r&&i&&(n.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){const e=Eg(QT,this,iO).call(this,n);if(e.isSame)return null;var a;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(a=this._initialData.structParent)&&void 0!==a?a:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const s=Ag(VT,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(Ag(IT,this))){if(Ag(VT,this)){const e=t.stamps.get(Ag(IT,this));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=Eg(QT,this,nO).call(this,!1))}}else t.stamps.set(Ag(IT,this),{area:s,serialized:n}),n.bitmap=Eg(QT,this,nO).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}function YT(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(Tg(LT,this,e.bitmap),t||(Tg(IT,this,e.id),Tg(VT,this,e.isSvg)),e.file&&Tg(BT,this,e.file.name),Eg(QT,this,$T).call(this)):this.remove()}function XT(){if(Tg(FT,this,null),this._uiManager.enableWaiting(!1),Ag(UT,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ag(LT,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ag(LT,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function JT(){if(Ag(IT,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Ag(IT,this)).then((e=>Eg(QT,this,YT).call(this,e,!0))).finally((()=>Eg(QT,this,XT).call(this)));if(Ag(zT,this)){const e=Ag(zT,this);return Tg(zT,this,null),this._uiManager.enableWaiting(!0),void Tg(FT,this,this._uiManager.imageManager.getFromUrl(e).then((e=>Eg(QT,this,YT).call(this,e))).finally((()=>Eg(QT,this,XT).call(this))))}if(Ag(qT,this)){const e=Ag(qT,this);return Tg(qT,this,null),this._uiManager.enableWaiting(!0),void Tg(FT,this,this._uiManager.imageManager.getFromFile(e).then((e=>Eg(QT,this,YT).call(this,e))).finally((()=>Eg(QT,this,XT).call(this))))}const e=document.createElement("input");e.type="file",e.accept=Bg.supportedTypesStr;const t=this._uiManager._signal;Tg(FT,this,new Promise((n=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Eg(QT,this,YT).call(this,t)}else this.remove();n()}),{signal:t}),e.addEventListener("cancel",(()=>{this.remove(),n()}),{signal:t})})).finally((()=>Eg(QT,this,XT).call(this)))),e.click()}function $T(){const{div:e}=this;let{width:t,height:n}=Ag(LT,this);const[r,i]=this.pageDimensions,a=.75;if(this.width)t=this.width*r,n=this.height*i;else if(t>a*r||n>a*i){const e=Math.min(a*r/t,a*i/n);t*=e,n*=e}const[s,o]=this.parentDimensions;this.setDims(t*s/r,n*o/i),this._uiManager.enableWaiting(!1);const l=Tg(UT,this,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),Eg(QT,this,tO).call(this,t,n),Eg(QT,this,rO).call(this),Ag(GT,this)||(this.parent.addUndoableEditor(this),Tg(GT,this,!0)),this._reportTelemetry({action:"inserted_image"}),Ag(BT,this)&&l.setAttribute("aria-label",Ag(BT,this))}function ZT(e,t){var n;const[r,i]=this.parentDimensions;this.width=e/r,this.height=t/i,null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==Ag(HT,this)&&clearTimeout(Ag(HT,this));Tg(HT,this,setTimeout((()=>{Tg(HT,this,null),Eg(QT,this,tO).call(this,e,t)}),200))}function eO(e,t){const{width:n,height:r}=Ag(LT,this);let i=n,a=r,s=Ag(LT,this);for(;i>2*e||a>2*t;){const n=i,r=a;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const o=new OffscreenCanvas(i,a);o.getContext("2d").drawImage(s,0,0,n,r,0,0,i,a),s=o.transferToImageBitmap()}return s}function tO(e,t){const n=new Hb,r=Math.ceil(e*n.sx),i=Math.ceil(t*n.sy),a=Ag(UT,this);if(!a||a.width===r&&a.height===i)return;a.width=r,a.height=i;const s=Ag(VT,this)?Ag(LT,this):Eg(QT,this,eO).call(this,r,i),o=a.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(s,0,0,s.width,s.height,0,0,r,i)}function nO(e){if(e){if(Ag(VT,this)){const e=this._uiManager.imageManager.getSvgUrl(Ag(IT,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=Ag(LT,this));return e.getContext("2d").drawImage(Ag(LT,this),0,0),e.toDataURL()}if(Ag(VT,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Nb.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*Nb.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(n,r);return i.getContext("2d").drawImage(Ag(LT,this),0,0,Ag(LT,this).width,Ag(LT,this).height,0,0,n,r),i.transferToImageBitmap()}return structuredClone(Ag(LT,this))}function rO(){this._uiManager._signal&&(Tg(WT,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&Eg(QT,this,ZT).call(this,t.width,t.height)}))),Ag(WT,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var e;null===(e=Ag(WT,this))||void 0===e||e.disconnect(),Tg(WT,this,null)}),{once:!0}))}function iO(e){var t;const{rect:n,pageIndex:r,accessibilityData:{altText:i}}=this._initialData,a=e.rect.every(((e,t)=>Math.abs(e-n[t])<1)),s=e.pageIndex===r,o=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:a&&s&&o,isSameAltText:o}}Bg=KT,Be(KT,"_type","stamp"),Be(KT,"_editorType",iv.STAMP);var aO=new WeakMap,sO=new WeakMap,oO=new WeakMap,lO=new WeakMap,cO=new WeakMap,dO=new WeakMap,uO=new WeakMap,hO=new WeakMap,pO=new WeakMap,mO=new WeakMap,fO=new WeakMap,gO=new WeakMap,vO=new WeakSet;class bO{constructor(e){let{uiManager:t,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;Ng(this,vO),Sg(this,aO,void 0),Sg(this,sO,!1),Sg(this,oO,null),Sg(this,lO,null),Sg(this,cO,null),Sg(this,dO,new Map),Sg(this,uO,!1),Sg(this,hO,!1),Sg(this,pO,!1),Sg(this,mO,null),Sg(this,fO,null),Sg(this,gO,void 0);const u=[...jO._.values()];if(!bO._initialized){bO._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),Tg(gO,this,t),this.pageIndex=n,this.div=r,Tg(aO,this,a),Tg(oO,this,s),this.viewport=c,Tg(mO,this,l),this.drawLayer=o,this._structTree=i,Ag(gO,this).addLayer(this)}get isEmpty(){return 0===Ag(dO,this).size}get isInvisible(){return this.isEmpty&&Ag(gO,this).getMode()===iv.NONE}updateToolbar(e){Ag(gO,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ag(gO,this).getMode();switch(Eg(vO,this,kO).call(this),e){case iv.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case iv.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case iv.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of jO._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=Ag(mO,this))||void 0===t?void 0:t.div)}addInkEditorIfNeeded(e){if(Ag(gO,this).getMode()!==iv.INK)return;if(!e)for(const t of Ag(dO,this).values())if(t.isEmpty())return void t.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){Ag(gO,this).setEditingState(e)}addCommands(e){Ag(gO,this).addCommands(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=Ag(oO,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of Ag(dO,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(Ag(gO,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!Ag(oO,this))return;const t=Ag(oO,this).getEditableAnnotations();for(const n of t){if(n.hide(),Ag(gO,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){Tg(pO,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of Ag(dO,this).values()){var n;i.disableEditing(),i.annotationElementId&&(null===i.serialize()?(t.set(i.annotationElementId,i),null===(n=this.getEditableAnnotation(i.annotationElementId))||void 0===n||n.show(),i.remove()):e.set(i.annotationElementId,i))}if(Ag(oO,this)){const n=Ag(oO,this).getEditableAnnotations();for(const r of n){const{id:n}=r.data;if(Ag(gO,this).isDeletedAnnotationElement(n))continue;let i=t.get(n);i?(i.resetAnnotationElement(r),i.show(!1),r.show()):(i=e.get(n),i&&(Ag(gO,this).addChangedExistingAnnotation(i),i.renderAnnotationElement(r)&&i.show(!1)),r.show())}}Eg(vO,this,kO).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of jO._.values())r.remove("".concat(i._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Tg(pO,this,!1)}getEditableAnnotation(e){var t;return(null===(t=Ag(oO,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){Ag(gO,this).getActive()!==e&&Ag(gO,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=Ag(mO,this))&&void 0!==e&&e.div&&!Ag(fO,this)){Tg(fO,this,new AbortController);const e=Ag(gO,this).combinedSignal(Ag(fO,this));Ag(mO,this).div.addEventListener("pointerdown",Eg(vO,this,yO).bind(this),{signal:e}),Ag(mO,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=Ag(mO,this))&&void 0!==e&&e.div&&Ag(fO,this)&&(Ag(fO,this).abort(),Tg(fO,this,null),Ag(mO,this).div.classList.remove("highlighting"))}enableClick(){if(Ag(lO,this))return;Tg(lO,this,new AbortController);const e=Ag(gO,this).combinedSignal(Ag(lO,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;null===(e=Ag(lO,this))||void 0===e||e.abort(),Tg(lO,this,null)}attach(e){Ag(dO,this).set(e.id,e);const{annotationElementId:t}=e;t&&Ag(gO,this).isDeletedAnnotationElement(t)&&Ag(gO,this).removeDeletedAnnotationElement(e)}detach(e){var t;Ag(dO,this).delete(e.id),null===(t=Ag(aO,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!Ag(pO,this)&&e.annotationElementId&&Ag(gO,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),Ag(gO,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,Ag(hO,this)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(Ag(gO,this).addDeletedAnnotationElement(e.annotationElementId),Nw.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),Ag(gO,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),Ag(gO,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!Ag(cO,this)&&(e._focusEventsAllowed=!1,Tg(cO,this,setTimeout((()=>{Tg(cO,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:Ag(gO,this)._signal}),n.focus())}),0))),e._structTreeParentId=null===(t=Ag(aO,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return Ag(gO,this).getId()}combinedSignal(e){return Ag(gO,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=Cg(vO,this,xO))||void 0===e?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){Ag(gO,this).updateToolbar(e),Ag(gO,this).updateMode(e);const{offsetX:n,offsetY:r}=Eg(vO,this,_O).call(this),i=this.getNextId(),a=Eg(vO,this,wO).call(this,We({parent:this,id:i,x:n,y:r,uiManager:Ag(gO,this),isCentered:!0},t));a&&this.add(a)}async deserialize(e){var t,n;return await(null===(t=jO._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,Ag(gO,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getNextId(),i=Eg(vO,this,wO).call(this,We({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:Ag(gO,this),isCentered:t},n));return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(Eg(vO,this,_O).call(this),!0)}setSelected(e){Ag(gO,this).setSelected(e)}toggleSelected(e){Ag(gO,this).toggleSelected(e)}unselect(e){Ag(gO,this).unselect(e)}pointerup(e){const{isMac:t}=sb.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&Ag(uO,this)&&(Tg(uO,this,!1),Ag(sO,this)?Ag(gO,this).getMode()!==iv.STAMP?this.createAndAddNewEditor(e,!1):Ag(gO,this).unselectAll():Tg(sO,this,!0))}pointerdown(e){if(Ag(gO,this).getMode()===iv.HIGHLIGHT&&this.enableTextSelection(),Ag(uO,this))return void Tg(uO,this,!1);const{isMac:t}=sb.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;Tg(uO,this,!0);const n=Ag(gO,this).getActive();Tg(sO,this,!n||n.isEmpty())}findNewParent(e,t,n){const r=Ag(gO,this).findParent(t,n);return null!==r&&r!==this&&(r.changeParent(e),!0)}destroy(){var e;(null===(e=Ag(gO,this).getActive())||void 0===e?void 0:e.parent)===this&&(Ag(gO,this).commitOrRemove(),Ag(gO,this).setActiveEditor(null)),Ag(cO,this)&&(clearTimeout(Ag(cO,this)),Tg(cO,this,null));for(const n of Ag(dO,this).values()){var t;null===(t=Ag(aO,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,Ag(dO,this).clear(),Ag(gO,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Wb(this.div,t);for(const n of Ag(gO,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;Ag(gO,this).commitOrRemove(),Eg(vO,this,kO).call(this);const n=this.viewport.rotation,r=t.rotation;if(this.viewport=t,Wb(this.div,{rotation:r}),n!==r)for(const i of Ag(dO,this).values())i.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return Ag(gO,this).viewParameters.realScale}}function yO(e){Ag(gO,this).unselectAll();const{target:t}=e;if(t===Ag(mO,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&Ag(mO,this).div.contains(t)){const{isMac:t}=sb.platform;if(0!==e.button||e.ctrlKey&&t)return;Ag(gO,this).showAllEditors("highlight",!0,!0),Ag(mO,this).div.classList.add("free"),this.toggleDrawing(),TA.startHighlighting(this,"ltr"===Ag(gO,this).direction,{target:Ag(mO,this).div,x:e.x,y:e.y}),Ag(mO,this).div.addEventListener("pointerup",(()=>{Ag(mO,this).div.classList.remove("free"),this.toggleDrawing(!0)}),{once:!0,signal:Ag(gO,this)._signal}),e.preventDefault()}}function xO(e){return jO._.get(Ag(gO,e).getMode())}function wO(e){const t=Cg(vO,this,xO);return t?new t.prototype.constructor(e):null}function _O(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),s=(i+Math.min(window.innerWidth,e+n))/2-e,o=(a+Math.min(window.innerHeight,t+r))/2-t,[l,c]=this.viewport.rotation%180===0?[s,o]:[o,s];return{offsetX:l,offsetY:c}}function kO(){Tg(hO,this,!0);for(const e of Ag(dO,this).values())e.isEmpty()&&e.remove();Tg(hO,this,!1)}Be(bO,"_initialized",!1);var jO={_:new Map([IE,oT,KT,TA].map((e=>[e._editorType,e])))},NO=new WeakMap,SO=new WeakMap,EO=new WeakMap,CO=new WeakMap,AO=new WeakSet;class TO{constructor(e){let{pageIndex:t}=e;Ng(this,AO),Sg(this,NO,null),Sg(this,SO,0),Sg(this,EO,new Map),Sg(this,CO,new Map),this.pageIndex=t}setParent(e){if(Ag(NO,this)){if(Ag(NO,this)!==e){if(Ag(EO,this).size>0)for(const t of Ag(EO,this).values())t.remove(),e.append(t);Tg(NO,this,e)}}else Tg(NO,this,e)}static get _svgFactory(){return Kv(this,"_svgFactory",new $N)}draw(e,t,n){var r,i;let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=(Tg(SO,this,(r=Ag(SO,this),i=r++,r)),i),o=Eg(AO,this,PO).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const l=TO._svgFactory.createElement("defs");o.append(l);const c=TO._svgFactory.createElement("path");l.append(c);const d="path_p".concat(this.pageIndex,"_").concat(s);c.setAttribute("id",d),c.setAttribute("d",e.toSVGPath()),a&&Ag(CO,this).set(s,c);const u=Eg(AO,this,MO).call(this,l,d),h=TO._svgFactory.createElement("use");return o.append(h),o.setAttribute("fill",t),o.setAttribute("fill-opacity",n),h.setAttribute("href","#".concat(d)),Ag(EO,this).set(s,o),{id:s,clipPathId:"url(#".concat(u,")")}}drawOutline(e){var t,n;const r=(Tg(SO,this,(t=Ag(SO,this),n=t++,t)),n),i=Eg(AO,this,PO).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const a=TO._svgFactory.createElement("defs");i.append(a);const s=TO._svgFactory.createElement("path");a.append(s);const o="path_p".concat(this.pageIndex,"_").concat(r);let l;if(s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke"),e.mustRemoveSelfIntersections){const e=TO._svgFactory.createElement("mask");a.append(e),l="mask_p".concat(this.pageIndex,"_").concat(r),e.setAttribute("id",l),e.setAttribute("maskUnits","objectBoundingBox");const t=TO._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=TO._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(o)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const c=TO._svgFactory.createElement("use");i.append(c),c.setAttribute("href","#".concat(o)),l&&c.setAttribute("mask","url(#".concat(l,")"));const d=c.cloneNode();return i.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),Ag(EO,this).set(r,i),r}finalizeLine(e,t){const n=Ag(CO,this).get(e);Ag(CO,this).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){Ag(EO,this).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){Ag(CO,this).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){OO.call(TO,Ag(EO,this).get(e),t)}show(e,t){Ag(EO,this).get(e).classList.toggle("hidden",!t)}rotate(e,t){Ag(EO,this).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){Ag(EO,this).get(e).setAttribute("fill",t)}changeOpacity(e,t){Ag(EO,this).get(e).setAttribute("fill-opacity",t)}addClass(e,t){Ag(EO,this).get(e).classList.add(t)}removeClass(e,t){Ag(EO,this).get(e).classList.remove(t)}getSVGRoot(e){return Ag(EO,this).get(e)}remove(e){Ag(CO,this).delete(e),null!==Ag(NO,this)&&(Ag(EO,this).get(e).remove(),Ag(EO,this).delete(e))}destroy(){Tg(NO,this,null);for(const e of Ag(EO,this).values())e.remove();Ag(EO,this).clear(),Ag(CO,this).clear()}}function OO(e){let{x:t=0,y:n=0,width:r=1,height:i=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:a}=e;a.top="".concat(100*n,"%"),a.left="".concat(100*t,"%"),a.width="".concat(100*r,"%"),a.height="".concat(100*i,"%")}function PO(e){const t=Ug._svgFactory.create(1,1,!0);return Ag(NO,this).append(t),t.setAttribute("aria-hidden",!0),OO.call(Ug,t,e),t}function MO(e,t){const n=Ug._svgFactory.createElement("clipPath");e.append(n);const r="clip_".concat(t);n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=Ug._svgFactory.createElement("use");return n.append(i),i.setAttribute("href","#".concat(t)),i.classList.add("clip"),r}Ug=TO;var DO=Hg.GlobalWorkerOptions,RO=Hg.getDocument,LO=Hg.version;if("undefined"!==typeof window){const e="".concat(window.location.origin,"/pdf.worker.min.js"),t="https://unpkg.com/pdfjs-dist@".concat(LO,"/build/pdf.worker.min.mjs");DO.workerSrc=e,console.log("PDF.js worker configured:",{version:LO,workerSrc:DO.workerSrc,fallback:t,origin:window.location.origin}),fetch(e).then((t=>{if(t.ok)return console.log("PDF worker file is accessible at:",e),t.text();throw console.error("PDF worker file not accessible:",t.status),new Error("Worker not accessible: ".concat(t.status))})).then((e=>{e.includes("<!DOCTYPE")||e.includes("<html")?(console.error("Worker URL returns HTML instead of JavaScript!"),console.error("First 200 chars:",e.substring(0,200)),console.log("Falling back to CDN worker..."),DO.workerSrc=t):console.log("Worker file contains JavaScript (first 100 chars):",e.substring(0,100))})).catch((e=>{console.error("Error checking PDF worker file:",e),console.log("Falling back to CDN worker..."),DO.workerSrc=t}))}const IO=e=>{let{zoom:t,onZoomChange:n,showGrid:r,onToggleGrid:a,snapToGrid:s,onToggleSnap:o,onSave:l,onPreview:c,onClose:d,isSaving:u=!1,isPreviewing:h=!1}=e;const{template:p,isDirty:m,canUndo:f,canRedo:g,undo:v,redo:b,setBackgroundImage:y,importTemplate:x,saveTemplate:w}=Ff(),[_,k]=(0,i.useState)(!1),[j,N]=(0,i.useState)(!1),S=(0,i.useRef)(null),E=async e=>{console.log("Starting PDF import for file:",e.name,"Size:",e.size);const t=new FileReader;return new Promise(((n,r)=>{t.onload=async e=>{try{console.log("File read successfully, processing PDF...");const r=new Uint8Array(e.target.result);console.log("Loading PDF document..."),console.log("Worker config:",{workerSrc:DO.workerSrc,version:LO});try{const e=await fetch(DO.workerSrc);console.log("Worker accessible:",e.ok,e.status)}catch(t){console.error("Worker test failed:",t)}let i;try{i=RO({data:r,verbosity:1,disableAutoFetch:!0,disableStream:!0})}catch(t){console.warn("Worker failed, trying without worker:",t);const e=DO.workerSrc;DO.workerSrc=null,i=RO({data:r,verbosity:1,disableAutoFetch:!0,disableStream:!0,disableWorker:!0}),DO.workerSrc=e}console.log("Loading task created, awaiting PDF...");const a=await i.promise;console.log("PDF loaded successfully, pages:",a.numPages);const s=await a.getPage(1),o=s.getViewport({scale:2});console.log("Page viewport:",o.width,"x",o.height);const l=document.createElement("canvas"),c=l.getContext("2d");l.height=o.height,l.width=o.width,console.log("Rendering PDF page to canvas..."),await s.render({canvasContext:c,viewport:o}).promise;const d=l.toDataURL("image/png",.9);console.log("PDF converted to image successfully"),y(d),n()}catch(i){console.error("PDF import error:",i),console.error("Error details:",{name:i.name,message:i.message,stack:i.stack,toString:i.toString()}),r(i)}},t.onerror=e=>{console.error("File reader error:",e),r(e)},t.readAsArrayBuffer(e)})).catch((e=>{throw console.error("File import error caught:",e),console.error("Caught error details:",{name:null===e||void 0===e?void 0:e.name,message:null===e||void 0===e?void 0:e.message,stack:null===e||void 0===e?void 0:e.stack,toString:null===e||void 0===e?void 0:e.toString()}),e}))},C=async e=>{const t=new FileReader;return new Promise(((n,r)=>{t.onload=e=>{y(e.target.result),n()},t.onerror=r,t.readAsDataURL(e)}))};return(0,wo.jsxs)("div",{className:"template-header",children:[(0,wo.jsx)("div",{className:"header-left",children:(0,wo.jsxs)("div",{className:"template-info",children:[(0,wo.jsx)(_g,{onSave:l,autoSave:!0}),(0,wo.jsxs)("span",{className:"template-meta",children:[p.fields.length," fields \u2022 Last saved: ",new Date(p.metadata.updatedAt).toLocaleTimeString()]})]})}),(0,wo.jsxs)("div",{className:"header-center",children:[(0,wo.jsxs)("div",{className:"control-group",children:[(0,wo.jsx)("button",{className:"header-btn",onClick:()=>{n(Math.max(t-.1,.5))},disabled:t<=.5,title:"Zoom Out",children:(0,wo.jsx)(mg,{size:16})}),(0,wo.jsxs)("button",{className:"zoom-display",onClick:()=>{n(1)},title:"Reset Zoom",children:[Math.round(100*t),"%"]}),(0,wo.jsx)("button",{className:"header-btn",onClick:()=>{n(Math.min(t+.1,2))},disabled:t>=2,title:"Zoom In",children:(0,wo.jsx)(fg,{size:16})})]}),(0,wo.jsxs)("div",{className:"control-group",children:[(0,wo.jsx)("button",{className:"header-btn ".concat(r?"active":""),onClick:a,title:"Toggle Grid",children:(0,wo.jsx)(gg,{size:16})}),(0,wo.jsx)("button",{className:"header-btn ".concat(s?"active":""),onClick:o,title:"Snap to Grid",children:(0,wo.jsx)(vg,{size:16})})]}),(0,wo.jsxs)("div",{className:"control-group",children:[(0,wo.jsx)("button",{className:"header-btn",onClick:v,disabled:!f,title:"Undo",children:(0,wo.jsx)(bg,{size:16})}),(0,wo.jsx)("button",{className:"header-btn",onClick:b,disabled:!g,title:"Redo",children:(0,wo.jsx)(yg,{size:16})})]}),(0,wo.jsxs)("div",{className:"control-group",children:[(0,wo.jsxs)("label",{className:"header-btn file-upload ".concat(j?"loading":""),title:"Import PDF/Image as Background",children:[j?(0,wo.jsx)("div",{className:"spinner"}):(0,wo.jsx)(xg,{size:16}),(0,wo.jsx)("input",{ref:S,type:"file",accept:".pdf,image/*",onChange:async e=>{const t=e.target.files[0];if(t){N(!0);try{"application/pdf"===t.type?await E(t):t.type.startsWith("image/")?await C(t):alert("Please select a PDF or image file")}catch(n){console.error("File import error:",n),alert("Failed to import file. Please try again.")}finally{N(!1),S.current&&(S.current.value="")}}},style:{display:"none"},disabled:j})]}),(0,wo.jsx)("button",{className:"header-btn",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{try{const t=JSON.parse(e.target.result);if(!t.name||!Array.isArray(t.fields))throw new Error("Invalid template format");window.confirm('Import template "'.concat(t.name,'"? This will replace the current template.'))&&(x(t),alert('Template "'.concat(t.name,'" imported successfully!')))}catch(t){console.error("Import error:",t),alert("Failed to import template. Please check the file format.")}},n.readAsText(t)},e.click()},title:"Import Template JSON",children:(0,wo.jsx)(kc,{size:16})}),(0,wo.jsx)("button",{className:"header-btn",onClick:()=>{try{var e;const t={name:p.name,description:p.description,pageSize:p.pageSize,orientation:p.orientation,fields:p.fields,metadata:We(We({},p.metadata),{},{exportedAt:(new Date).toISOString(),version:(null===(e=p.metadata)||void 0===e?void 0:e.version)||1})},n=JSON.stringify(t,null,2),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download="".concat(p.name.replace(/[^a-zA-Z0-9]/g,"_"),"_template.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((()=>URL.revokeObjectURL(i)),1e3)}catch(t){console.error("Export error:",t),alert("Failed to export template")}},title:"Export Template as JSON",children:(0,wo.jsx)(td,{size:16})})]})]}),(0,wo.jsx)("div",{className:"header-right",children:(0,wo.jsxs)("div",{className:"control-group",children:[(0,wo.jsx)("button",{className:"header-btn",onClick:()=>k(!_),title:"Settings",children:(0,wo.jsx)(Nc,{size:16})}),(0,wo.jsxs)("button",{className:"header-btn preview-btn",onClick:()=>{c&&c(p)},title:"Preview PDF",children:[(0,wo.jsx)(Pc,{size:16}),"Preview"]}),(0,wo.jsxs)("button",{className:"header-btn save-btn ".concat(u?"loading":""),onClick:()=>{var e;console.log("Saving template with background image:",!!p.backgroundImage),console.log("Saving template with fields count:",(null===(e=p.fields)||void 0===e?void 0:e.length)||0),w(l)},disabled:!m||u,title:"Save Template",children:[u?(0,wo.jsx)("div",{className:"spinner"}):(0,wo.jsx)(Jc,{size:16}),u?"Saving...":"Save"]}),(0,wo.jsx)("button",{className:"header-btn close-btn",onClick:d,title:"Close Editor",children:(0,wo.jsx)(Mc,{size:16})})]})}),_&&(0,wo.jsxs)("div",{className:"settings-dropdown",children:[(0,wo.jsxs)("div",{className:"settings-section",children:[(0,wo.jsx)("h4",{children:"Page Settings"}),(0,wo.jsxs)("div",{className:"setting-item",children:[(0,wo.jsx)("label",{children:"Page Size:"}),(0,wo.jsxs)("select",{defaultValue:"A4",children:[(0,wo.jsx)("option",{value:"A4",children:"A4 (210 \xd7 297 mm)"}),(0,wo.jsx)("option",{value:"Letter",children:"Letter (8.5 \xd7 11 in)"}),(0,wo.jsx)("option",{value:"Legal",children:"Legal (8.5 \xd7 14 in)"}),(0,wo.jsx)("option",{value:"A3",children:"A3 (297 \xd7 420 mm)"})]})]}),(0,wo.jsxs)("div",{className:"setting-item",children:[(0,wo.jsx)("label",{children:"Orientation:"}),(0,wo.jsxs)("select",{defaultValue:"portrait",children:[(0,wo.jsx)("option",{value:"portrait",children:"Portrait"}),(0,wo.jsx)("option",{value:"landscape",children:"Landscape"})]})]})]}),(0,wo.jsxs)("div",{className:"settings-section",children:[(0,wo.jsx)("h4",{children:"Grid Settings"}),(0,wo.jsxs)("div",{className:"setting-item",children:[(0,wo.jsx)("label",{children:"Grid Size:"}),(0,wo.jsx)("input",{type:"number",defaultValue:"10",min:"5",max:"50"}),(0,wo.jsx)("span",{children:"px"})]})]})]})]})},FO=e=>{let{templateId:t=null,initialTemplate:n=null,onSave:r,onPreview:a,onClose:s,dataSource:o=null,isSaving:l=!1,isPreviewing:c=!1}=e;const[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)({width:595,height:842}),[m,f]=(0,i.useState)(1),[g,v]=(0,i.useState)(!0),[b,y]=(0,i.useState)(!0),x=(0,i.useRef)(null),w=(0,i.useCallback)((e=>{console.log("Field selected:",e),u(e)}),[]),_=(0,i.useCallback)((e=>{e.target===e.currentTarget&&(console.log("Canvas clicked - deselecting field"),u(null))}),[]),k=e=>{let{initialTemplate:t}=e;const{loadTemplate:n,template:r}=Ff();return(0,i.useEffect)((()=>{var e;!t||r.id&&r.id===t.id||(console.log("Initializing template with background image:",!!t.backgroundImage),console.log("Initializing template with fields count:",(null===(e=t.fields)||void 0===e?void 0:e.length)||0),n(t))}),[null===t||void 0===t?void 0:t.id,n]),null},j=e=>{let{selectedField:t,onFieldSelect:n}=e;const{deleteField:r,duplicateField:a}=Ff();return(0,i.useEffect)((()=>{const e=e=>{"Delete"===e.key&&t&&(e.preventDefault(),window.confirm("Delete selected field?")&&(r(t.id),n(null))),(e.ctrlKey||e.metaKey)&&"d"===e.key&&t&&(e.preventDefault(),a(t.id)),"Escape"===e.key&&n(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[t,r,a,n]),null};return(0,wo.jsx)(Tm,{backend:$m,children:(0,wo.jsxs)(If,{children:[(0,wo.jsx)(k,{initialTemplate:n}),(0,wo.jsx)(j,{selectedField:d,onFieldSelect:u}),(0,wo.jsxs)("div",{className:"pdf-template-editor",children:[(0,wo.jsx)(IO,{zoom:m,onZoomChange:f,showGrid:g,onToggleGrid:()=>v(!g),snapToGrid:b,onToggleSnap:()=>y(!b),onSave:r,onPreview:a,onClose:s,isSaving:l,isPreviewing:c}),(0,wo.jsxs)("div",{className:"editor-layout",children:[(0,wo.jsx)("div",{className:"editor-sidebar left",children:(0,wo.jsx)(ug,{dataSource:o})}),(0,wo.jsx)("div",{className:"editor-main",children:(0,wo.jsx)("div",{className:"canvas-container",children:(0,wo.jsx)(Jf,{ref:x,width:h.width,height:h.height,zoom:m,showGrid:g,snapToGrid:b,selectedField:d,onFieldSelect:w,onClick:_})})}),(0,wo.jsx)("div",{className:"editor-sidebar right",children:(0,wo.jsx)(pg,{selectedField:d,onFieldUpdate:u})})]})]})]})})},zO=dc("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),qO=e=>{let{pageName:t="editor",requiresDesktop:n=!0,minWidth:r=768,showOnce:a=!0}=e;const[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),{t:d}=Ma("common");(0,i.useEffect)((()=>{const e=()=>{const e=window.innerWidth<r;c(e);const n="mobile-warning-dismissed-".concat(t),i=a&&localStorage.getItem(n);o(e&&!i)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[r,t,a]);const u=()=>{o(!1),a&&localStorage.setItem("mobile-warning-dismissed-".concat(t),"true")};return s&&l?(0,wo.jsx)(wo.Fragment,{children:(0,wo.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:(0,wo.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[(0,wo.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-6 py-4",children:(0,wo.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wo.jsxs)("div",{className:"flex items-center text-white",children:[(0,wo.jsx)(Xc,{className:"h-6 w-6 mr-3"}),(0,wo.jsx)("h3",{className:"text-lg font-bold",children:d("mobile_warning.title",{default:"Mobile Device Detected"})})]}),(0,wo.jsx)("button",{onClick:u,className:"text-white hover:text-gray-200 transition-colors",children:(0,wo.jsx)(Mc,{className:"h-5 w-5"})})]})}),(0,wo.jsxs)("div",{className:"p-6",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,wo.jsxs)("div",{className:"text-gray-400",children:[(0,wo.jsx)(zO,{className:"h-12 w-12"}),(0,wo.jsx)("p",{className:"text-xs text-center mt-2",children:"Mobile"})]}),(0,wo.jsx)("div",{className:"text-red-500",children:(0,wo.jsx)(Mc,{className:"h-8 w-8 mx-auto"})}),(0,wo.jsxs)("div",{className:"text-green-500",children:[(0,wo.jsx)(Gc,{className:"h-12 w-12"}),(0,wo.jsx)("p",{className:"text-xs text-center mt-2",children:"Desktop"})]})]}),(0,wo.jsxs)("div",{className:"text-center mb-6",children:[(0,wo.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:d("mobile_warning.subtitle",{default:"This page works best on desktop",pageName:t})}),(0,wo.jsx)("p",{className:"text-gray-600 leading-relaxed",children:n?d("mobile_warning.desktop_required",{default:"This editor requires a desktop computer with a larger screen for the best experience. Some features may not work properly on mobile devices.",pageName:t}):d("mobile_warning.desktop_recommended",{default:"While this page works on mobile, we recommend using a desktop computer for the best experience.",pageName:t})})]}),(0,wo.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,wo.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:d("mobile_warning.limitations_title",{default:"Mobile Limitations:"})}),(0,wo.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,wo.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_1",{default:"Limited drag & drop functionality"})]}),(0,wo.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_2",{default:"Smaller workspace area"})]}),(0,wo.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_3",{default:"Touch navigation challenges"})]}),n&&(0,wo.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_4",{default:"Some features may not work"})]})]})]}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[!n&&(0,wo.jsx)("button",{onClick:()=>{o(!1)},className:"flex-1 bg-amber-500 text-white px-4 py-3 rounded-lg font-medium hover:bg-amber-600 transition-colors",children:d("mobile_warning.proceed",{default:"Continue Anyway"})}),(0,wo.jsx)("button",{onClick:u,className:"flex-1 bg-gray-500 text-white px-4 py-3 rounded-lg font-medium hover:bg-gray-600 transition-colors",children:d("mobile_warning.dismiss",{default:"I Understand"})})]}),(0,wo.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:d("mobile_warning.help_text",{default:"For the best experience, please use a computer with a screen width of at least 768px."})})]})]})})}):null},BO={name:"Onboarding Flow",fields:[{name:"firstName",label:"First Name",type:"text",placeholder:"Enter first name"},{name:"lastName",label:"Last Name",type:"text",placeholder:"Enter last name"},{name:"email",label:"Email Address",type:"text",placeholder:"Enter email"},{name:"position",label:"Position",type:"text",placeholder:"Job position"},{name:"vesselAssignment",label:"Vessel Assignment",type:"text",placeholder:"Vessel name"},{name:"startDate",label:"Start Date",type:"date"},{name:"completionDate",label:"Completion Date",type:"date"},{name:"certificateNumber",label:"Certificate Number",type:"text"},{name:"trainingScore",label:"Training Score",type:"number"},{name:"managerSignature",label:"Manager Signature",type:"signature"},{name:"crewSignature",label:"Crew Signature",type:"signature"},{name:"companyLogo",label:"Company Logo",type:"image"},{name:"qrCode",label:"Verification QR Code",type:"qr_code"}]},UO=()=>{const{t:e}=Ma(["common"]),t=ne(),{templateId:n}=ie(),r=(0,Ie.useQueryClient)(),[a,s]=(0,i.useState)(!n),{data:o,isLoading:l}=(0,Ie.useQuery)(["template",n],(async()=>{var e;const t=await Us(n);return console.log("Loaded template:",t),console.log("Background image exists:",!!t.backgroundImage),console.log("Number of fields:",(null===(e=t.fields)||void 0===e?void 0:e.length)||0),t}),{enabled:!!n,onError:n=>{console.error("Template loading error:",n),rn.error(e("common:pdf_template.failed_load")),t("/templates")}}),c=(0,Ie.useMutation)((e=>a?Ws(e):Hs(n,e)),{onSuccess:n=>{rn.success(e(a?"common:pdf_template.created":"common:pdf_template.saved")),r.invalidateQueries("templates"),a&&(s(!1),t("/templates/edit/".concat(n.id),{replace:!0}))},onError:t=>{rn.error(e("common:pdf_template.failed_save")),console.error("Save error:",t)}}),d=(0,Ie.useMutation)((e=>Qs(e)),{onSuccess:e=>{const t=URL.createObjectURL(e);window.open(t,"_blank"),setTimeout((()=>URL.revokeObjectURL(t)),1e3)},onError:t=>{rn.error(e("common:pdf_template.failed_preview")),console.error("Preview error:",t)}});return l?(0,wo.jsx)(vc,{}):(0,wo.jsxs)("div",{className:"pdf-template-editor-page",children:[(0,wo.jsx)(qO,{pageName:"pdf-template-editor",requiresDesktop:!0,minWidth:1200}),(0,wo.jsx)(FO,{templateId:n,initialTemplate:o,dataSource:BO,onSave:e=>{var t,n;console.log("Saving template:",e),console.log("Background image exists:",!!e.backgroundImage),console.log("Background image type:",typeof e.backgroundImage),console.log("Background image preview:",(null===(t=e.backgroundImage)||void 0===t?void 0:t.substring(0,100))+"..."),console.log("Number of fields:",(null===(n=e.fields)||void 0===n?void 0:n.length)||0),c.mutate(e)},onPreview:e=>{const t=We(We({},e),{},{sampleData:{firstName:"John",lastName:"Doe",email:"john.doe@example.com",position:"Deck Officer",vesselAssignment:"MV Ocean Explorer",startDate:"2024-01-15",completionDate:(new Date).toISOString().split("T")[0],certificateNumber:"CERT-2024-001",trainingScore:95,companyLogo:"/logo.png"}});d.mutate(t)},onClose:()=>{window.confirm(e("common:pdf_template.close_confirm"))&&t("/templates")},isSaving:c.isLoading,isPreviewing:d.isLoading})]})},WO={name:"Test Data Source",fields:[{name:"firstName",label:"First Name",type:"text",placeholder:"Enter first name"},{name:"lastName",label:"Last Name",type:"text",placeholder:"Enter last name"},{name:"email",label:"Email Address",type:"text",placeholder:"Enter email"},{name:"position",label:"Position",type:"text",placeholder:"Job position"},{name:"startDate",label:"Start Date",type:"date"},{name:"completionDate",label:"Completion Date",type:"date"},{name:"certificateNumber",label:"Certificate Number",type:"text"},{name:"score",label:"Score",type:"number"},{name:"approved",label:"Approved",type:"boolean"}]},HO=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(!1);return(0,wo.jsx)("div",{style:{height:"100vh",width:"100vw"},children:(0,wo.jsx)(FO,{templateId:null,dataSource:WO,onSave:async e=>{console.log("Save template:",e),t(!0);try{await new Promise((e=>setTimeout(e,2e3))),alert("Template saved successfully! (Check console for data)")}catch(n){alert("Failed to save template")}finally{t(!1)}},onPreview:async e=>{console.log("Preview template:",e),r(!0);try{(new Date).toISOString().split("T")[0];await new Promise((e=>setTimeout(e,1e3))),alert("Preview generated! (Check console for template data)")}catch(t){alert("Failed to generate preview")}finally{r(!1)}},onClose:()=>{window.confirm("Close editor? Any unsaved changes will be lost.")&&window.history.back()},isSaving:e,isPreviewing:n})})};var VO=n(5254),GO=n.n(VO);const QO=e=>{let{value:t="",onChange:n,placeholder:r="Start writing...",height:a="300px",readOnly:s=!1,onImageUpload:o,onVideoUpload:l,allowedFormats:c=["bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","header","align","color","background","code-block","clean"]}=e;const[d,u]=(0,i.useState)(!1),h=(0,i.useRef)(null),p=(0,i.useCallback)((async()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=async()=>{const t=e.files[0];if(t&&o){u(!0);try{const e=await o(t),n=h.current.getEditor(),r=n.getSelection();n.insertEmbed(r.index,"image",e)}catch(n){console.error("Image upload failed:",n),alert("Failed to upload image. Please try again.")}finally{u(!1)}}}}),[o]),m=(0,i.useCallback)((async()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","video/*"),e.click(),e.onchange=async()=>{const t=e.files[0];if(t&&l){u(!0);try{const e=await l(t),n=h.current.getEditor(),r=n.getSelection();n.insertEmbed(r.index,"video",e)}catch(n){console.error("Video upload failed:",n),alert("Failed to upload video. Please try again.")}finally{u(!1)}}}}),[l]),f=(0,i.useMemo)((()=>({toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],["link","image","video"],["clean"]],handlers:{image:p,video:m}},clipboard:{matchVisual:!1}})),[p,m]),g=(0,i.useMemo)((()=>c),[c]),v=(0,i.useCallback)((e=>{if(n){const t=Dh.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","s","blockquote","ul","ol","li","a","img","video","h1","h2","h3","h4","h5","h6","code","pre"],ALLOWED_ATTR:["href","src","alt","title","width","height","class","style"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))/i,FORBID_TAGS:["script","object","embed","form","input","textarea","select","button"],FORBID_ATTR:["onerror","onload","onclick","onmouseover","onfocus","onblur","onchange","onsubmit"]});n(t)}}),[n]);return(0,wo.jsxs)("div",{className:"rich-text-editor-container",children:[d&&(0,wo.jsx)("div",{className:"upload-overlay",children:(0,wo.jsxs)("div",{className:"upload-spinner",children:[(0,wo.jsx)("div",{className:"spinner"}),(0,wo.jsx)("span",{children:"Uploading..."})]})}),(0,wo.jsx)(GO(),{ref:h,theme:"snow",value:t,onChange:v,placeholder:r,readOnly:s,modules:f,formats:g,style:{height:a},className:"rich-text-editor ".concat(s?"read-only":"")})]})},KO=[{code:"en",name:"English",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"nl",name:"Nederlands",flag:"\ud83c\uddf3\ud83c\uddf1"},{code:"de",name:"Deutsch",flag:"\ud83c\udde9\ud83c\uddea"},{code:"fr",name:"Fran\xe7ais",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"es",name:"Espa\xf1ol",flag:"\ud83c\uddea\ud83c\uddf8"}],YO=e=>{var t;let{selectedLanguage:n,onLanguageChange:r,translations:a,showConfidence:s=!1,sourceLanguage:o}=e;const[l,c]=(0,i.useState)(!1),{t:d}=Ma("common"),u=KO.find((e=>e.code===n)),h=n===o,p=e=>e>=.9?"text-green-600":e>=.8?"text-yellow-600":"text-red-600";return(0,wo.jsxs)("div",{className:"relative",children:[(0,wo.jsxs)("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(h?"bg-blue-50 border-2 border-blue-300":"bg-white border border-gray-300"),children:[(0,wo.jsx)("span",{className:"text-lg",children:null===u||void 0===u?void 0:u.flag}),(0,wo.jsxs)("div",{className:"flex flex-col items-start",children:[(0,wo.jsx)("span",{className:"font-medium",children:null===u||void 0===u?void 0:u.name}),h&&(0,wo.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"Source"})]}),s&&(null===(t=a[n])||void 0===t?void 0:t.confidence)&&!h&&(0,wo.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,wo.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(a[n].confidence>=.9?"bg-green-500":a[n].confidence>=.8?"bg-yellow-500":"bg-red-500")}),(0,wo.jsxs)("span",{className:"text-xs ".concat(p(a[n].confidence)),children:[Math.round(100*a[n].confidence),"%"]})]}),(0,wo.jsx)("span",{className:"text-gray-500",children:"\u25bc"})]}),l&&(0,wo.jsx)("div",{className:"absolute top-full left-0 mt-1 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:KO.map((e=>{const t=e.code===o;return(0,wo.jsxs)("button",{onClick:()=>{r(e.code),c(!1)},className:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-gray-50 ".concat(n===e.code?"bg-blue-50 text-blue-700":"text-gray-900"," ").concat(t?"border-l-4 border-blue-500":""," ").concat(0===KO.indexOf(e)?"rounded-t-lg":""," ").concat(KO.indexOf(e)===KO.length-1?"rounded-b-lg":""),children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("span",{className:"text-lg",children:e.flag}),(0,wo.jsxs)("div",{className:"flex flex-col",children:[(0,wo.jsx)("span",{className:"font-medium",children:e.name}),t&&(0,wo.jsx)("span",{className:"text-xs text-blue-600",children:"Source Language"})]})]}),a[e.code]&&!t&&(0,wo.jsxs)("div",{className:"flex items-center space-x-1",children:[a[e.code].confidence&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(a[e.code].confidence>=.9?"bg-green-500":a[e.code].confidence>=.8?"bg-yellow-500":"bg-red-500")}),(0,wo.jsxs)("span",{className:"text-xs ".concat(p(a[e.code].confidence)),children:[Math.round(100*a[e.code].confidence),"%"]})]}),a[e.code].humanReviewed&&(0,wo.jsx)("span",{className:"text-green-600",title:d("translation.humanReviewed"),children:"\u2705"})]})]},e.code)}))})]})},XO=e=>{let{languages:t,translations:n,metadata:r={},onLanguageClick:i,currentLanguage:a}=e;const{t:s}=Ma("common");return(0,wo.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,wo.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:s("translation.preview")}),(0,wo.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.map((e=>{const t=KO.find((t=>t.code===e)),o=n[e],l=r[e];return(0,wo.jsxs)("div",{onClick:()=>i(e),className:"p-2 rounded-md border cursor-pointer transition-colors ".concat(a===e?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"),children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wo.jsx)("span",{className:"text-sm",children:null===t||void 0===t?void 0:t.flag}),(0,wo.jsx)("span",{className:"text-xs font-medium",children:null===t||void 0===t?void 0:t.name})]}),(null===l||void 0===l?void 0:l.confidence)&&(0,wo.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(l.confidence>=.9?"bg-green-500":l.confidence>=.8?"bg-yellow-500":"bg-red-500")})]}),(0,wo.jsx)("div",{className:"text-xs text-gray-600 line-clamp-2",children:o||s("translation.notTranslated")})]},e)}))})]})},JO=e=>{var t,n,r,a;let{fieldName:s,value:o={},onChange:l,placeholder:c,enableAITranslation:d=!0,autoTranslate:u=!0,targetLanguages:h=["nl","de","fr","es"],className:p="",editorType:m="rich"}=e;const{t:f}=Ma("common"),{user:g}=ko(),v=(null===g||void 0===g?void 0:g.preferredLanguage)||"en",[b,y]=(0,i.useState)(v),[x,w]=(0,i.useState)({}),[_,k]=(0,i.useState)(!1),[j,N]=(0,i.useState)(new Set),S=(0,i.useRef)(null),E=(0,i.useRef)(null);(0,i.useEffect)((()=>{if(o&&"object"===typeof o)if(o.content)w({content:o.content,metadata:o.ai_metadata||{}});else{const e={},t={};Object.entries(o).forEach((n=>{let[r,i]=n;e[r]=i,t[r]={confidence:1,method:"manual",human_reviewed:!0,translated_at:(new Date).toISOString()}})),w({content:e,metadata:t})}else"string"===typeof o&&w({content:{[v]:o},metadata:{[v]:{confidence:1,method:"manual",human_reviewed:!0,translated_at:(new Date).toISOString()}}})}),[o,v]);const C=(0,i.useCallback)(((e,t)=>{w((n=>{var r,i,a,s,o;const c=We(We({},n),{},{content:We(We({},n.content),{},{[e]:t}),metadata:We(We({},n.metadata),{},{[e]:We(We({},null===(r=n.metadata)||void 0===r?void 0:r[e]),{},{confidence:e===v?1:(null===(i=n.metadata)||void 0===i||null===(a=i[e])||void 0===a?void 0:a.confidence)||.8,method:e===v?"manual":(null===(s=n.metadata)||void 0===s||null===(o=s[e])||void 0===o?void 0:o.method)||"manual",human_reviewed:!0,translated_at:(new Date).toISOString()})})});return S.current&&clearTimeout(S.current),S.current=setTimeout((()=>{l({source_lang:v,content:c.content,ai_metadata:c.metadata})}),300),c})),e===v&&u&&d&&t.trim().length>10&&(E.current&&clearTimeout(E.current),E.current=setTimeout((()=>{A(t)}),2e3))}),[v,l,u,d]),A=async e=>{if(!e||e.trim().length<10)return;const t=h.filter((e=>e!==v));if(0!==t.length){k(!0),N((e=>new Set([...e,...t])));try{const n=await fetch("/api/translation/batch-translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({texts:[e],sourceLang:v,targetLangs:t})});if(!n.ok)throw new Error("Auto translation failed: ".concat(n.status));const{results:r}=await n.json();w((e=>{const t=We({},e.content),n=We({},e.metadata);return Object.entries(r).forEach((e=>{let[r,i]=e;const a=i[0];a&&!a.error&&(t[r]=a.translation,n[r]={confidence:a.confidence,method:a.provider,maritime_enhanced:a.maritimeEnhanced,translated_at:(new Date).toISOString(),human_reviewed:!1})})),setTimeout((()=>{l({source_lang:v,content:t,ai_metadata:n})}),100),We(We({},e),{},{content:t,metadata:n})})),t.length>0&&Tt.success("\u2728 Auto-translated to ".concat(t.length," languages"),{duration:2e3,position:"bottom-right",style:{background:"#10B981",color:"white",fontSize:"14px"}})}catch(n){console.error("Auto translation failed:",n)}finally{k(!1),N(new Set)}}},T=(null===(t=x.content)||void 0===t?void 0:t[b])||"",O=null===(n=x.metadata)||void 0===n?void 0:n[b];null===(r=x.content)||void 0===r||null===(a=r[v])||void 0===a||a.trim().length;return(0,wo.jsxs)("div",{className:"multilingual-editor ".concat(p),children:[(0,wo.jsx)("div",{className:"mb-4",children:(0,wo.jsx)(YO,{selectedLanguage:b,onLanguageChange:y,translations:x.metadata||{},showConfidence:!0,sourceLanguage:v})}),(0,wo.jsxs)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[(0,wo.jsx)("div",{className:"editor-container",children:(()=>{switch(m){case"rich":return(0,wo.jsx)(QO,{value:T,onChange:e=>C(b,e),placeholder:c||f("translation.enterContent"),className:"min-h-[200px]"});case"textarea":return(0,wo.jsx)("textarea",{value:T,onChange:e=>C(b,e.target.value),placeholder:c||f("translation.enterContent"),className:"w-full min-h-[200px] p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical"});default:return(0,wo.jsx)("input",{type:"text",value:T,onChange:e=>C(b,e.target.value),placeholder:c||f("translation.enterContent"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}})()}),_&&(0,wo.jsxs)("div",{className:"px-3 py-2 bg-blue-50 border-t border-blue-200 flex items-center",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),(0,wo.jsx)("span",{className:"text-sm text-blue-800",children:"Auto-translating..."})]})]}),d&&(0,wo.jsx)(XO,{languages:[v,...h],translations:x.content||{},metadata:x.metadata||{},onLanguageClick:y,currentLanguage:b}),O&&(0,wo.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[O.maritime_enhanced&&(0,wo.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 mr-2",children:f("translation.maritimeEnhanced")}),O.human_reviewed&&(0,wo.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 mr-2",children:f("translation.humanReviewed")}),O.method&&(0,wo.jsx)("span",{className:"text-gray-400",children:f("translation.translatedBy",{method:O.method})})]})]})},$O=e=>{let{isOpen:t,onClose:n,onSelectTemplate:r,selectedTemplateIds:a=[]}=e;const{t:s}=Ma(["flows","common"]),[o,l]=(0,i.useState)([]),[c,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(""),[p,m]=(0,i.useState)(null),[f,g]=(0,i.useState)(null);(0,i.useEffect)((()=>{t&&v()}),[t]);const v=async()=>{d(!0);try{const e=(await xo.get("/templates?browse=true")).data;l(e.templates||e||[])}catch(e){console.error("Failed to load templates:",e),rn.error(s("pdf_output.failed_to_load_templates"))}finally{d(!1)}},b=e=>{m(e),(async e=>{try{const t=await xo.get("/templates/".concat(e,"/preview"));g(t.data)}catch(t){console.error("Failed to load template preview:",t)}})(e.id)},y=()=>{m(null),g(null),h(""),n()},x=o.filter((e=>e.name.toLowerCase().includes(u.toLowerCase())||e.description&&e.description.toLowerCase().includes(u.toLowerCase()))).filter((e=>!a.includes(e.id)));return t?(0,wo.jsxs)("div",{className:"template-browser-modal",children:[(0,wo.jsx)("div",{className:"modal-backdrop",onClick:y}),(0,wo.jsxs)("div",{className:"modal-content",children:[(0,wo.jsxs)("div",{className:"modal-header",children:[(0,wo.jsxs)("h2",{children:["\ud83d\udcc4 ",s("pdf_output.browse_pdf_templates")]}),(0,wo.jsx)("button",{className:"close-button",onClick:y,children:"\xd7"})]}),(0,wo.jsx)("div",{className:"modal-body",children:(0,wo.jsxs)("div",{className:"browser-content",children:[(0,wo.jsxs)("div",{className:"templates-panel",children:[(0,wo.jsxs)("div",{className:"search-section",children:[(0,wo.jsx)("input",{type:"text",placeholder:s("pdf_output.search_templates"),value:u,onChange:e=>h(e.target.value),className:"search-input"}),(0,wo.jsxs)("div",{className:"template-count",children:[x.length," ",s("pdf_output.templates_available")]})]}),c?(0,wo.jsxs)("div",{className:"loading-state",children:[(0,wo.jsx)("div",{className:"loading-spinner"}),(0,wo.jsx)("p",{children:s("common:loading.default")})]}):(0,wo.jsx)("div",{className:"templates-list",children:0===x.length?(0,wo.jsxs)("div",{className:"empty-state",children:[(0,wo.jsx)("div",{className:"empty-icon",children:"\ud83d\udcc4"}),(0,wo.jsx)("h3",{children:s("pdf_output.no_templates_available")}),(0,wo.jsx)("p",{children:s("pdf_output.no_templates_description")})]}):x.map((e=>(0,wo.jsxs)("div",{className:"template-item ".concat((null===p||void 0===p?void 0:p.id)===e.id?"selected":""),onClick:()=>b(e),children:[(0,wo.jsx)("div",{className:"template-icon",children:"\ud83d\udcc4"}),(0,wo.jsxs)("div",{className:"template-info",children:[(0,wo.jsx)("h4",{children:e.name}),(0,wo.jsx)("p",{children:e.description||s("pdf_output.no_description")}),(0,wo.jsxs)("div",{className:"template-meta",children:[(0,wo.jsxs)("span",{className:"field-count",children:[e.field_count||0," ",s("pdf_output.fields")]}),(0,wo.jsx)("span",{className:"template-size",children:e.page_format||"A4"})]})]}),(null===p||void 0===p?void 0:p.id)===e.id&&(0,wo.jsx)("div",{className:"selected-indicator",children:"\u2713"})]},e.id)))})]}),(0,wo.jsx)("div",{className:"preview-panel",children:p?(0,wo.jsxs)("div",{className:"template-preview",children:[(0,wo.jsxs)("div",{className:"preview-header",children:[(0,wo.jsx)("h3",{children:p.name}),(0,wo.jsx)("div",{className:"template-actions",children:(0,wo.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>window.open("/api/templates/".concat(p.id,"/preview"),"_blank"),children:s("pdf_output.view_full_preview")})})]}),(0,wo.jsx)("div",{className:"preview-content",children:f?(0,wo.jsxs)("div",{className:"preview-image",children:[(0,wo.jsx)("img",{src:f.thumbnail||"/api/templates/".concat(p.id,"/thumbnail"),alt:"Preview of ".concat(p.name),onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,wo.jsxs)("div",{className:"preview-fallback",style:{display:"none"},children:[(0,wo.jsx)("div",{className:"fallback-icon",children:"\ud83d\udcc4"}),(0,wo.jsx)("p",{children:s("pdf_output.preview_not_available")})]})]}):(0,wo.jsxs)("div",{className:"preview-loading",children:[(0,wo.jsx)("div",{className:"loading-spinner"}),(0,wo.jsx)("p",{children:s("pdf_output.loading_preview")})]})}),(0,wo.jsxs)("div",{className:"template-details",children:[(0,wo.jsxs)("div",{className:"detail-item",children:[(0,wo.jsxs)("span",{className:"detail-label",children:[s("pdf_output.template_type"),":"]}),(0,wo.jsx)("span",{className:"detail-value",children:p.type||s("pdf_output.document")})]}),(0,wo.jsxs)("div",{className:"detail-item",children:[(0,wo.jsxs)("span",{className:"detail-label",children:[s("pdf_output.page_format"),":"]}),(0,wo.jsx)("span",{className:"detail-value",children:p.page_format||"A4"})]}),(0,wo.jsxs)("div",{className:"detail-item",children:[(0,wo.jsxs)("span",{className:"detail-label",children:[s("pdf_output.available_fields"),":"]}),(0,wo.jsx)("span",{className:"detail-value",children:p.field_count||0})]}),(0,wo.jsxs)("div",{className:"detail-item",children:[(0,wo.jsxs)("span",{className:"detail-label",children:[s("pdf_output.created"),":"]}),(0,wo.jsx)("span",{className:"detail-value",children:p.created_at?new Date(p.created_at).toLocaleDateString():s("pdf_output.unknown")})]})]}),(null===f||void 0===f?void 0:f.fields)&&Array.isArray(f.fields)&&f.fields.length>0&&(0,wo.jsxs)("div",{className:"template-fields",children:[(0,wo.jsx)("h4",{children:s("pdf_output.template_fields")}),(0,wo.jsx)("div",{className:"fields-list",children:f.fields.map(((e,t)=>(0,wo.jsxs)("div",{className:"field-item",children:[(0,wo.jsx)("span",{className:"field-name",children:e.name||"Unnamed Field"}),(0,wo.jsx)("span",{className:"field-type",children:e.type||"unknown"})]},t)))})]})]}):(0,wo.jsxs)("div",{className:"preview-placeholder",children:[(0,wo.jsx)("div",{className:"placeholder-icon",children:"\ud83d\udc46"}),(0,wo.jsx)("h3",{children:s("pdf_output.select_template_to_preview")}),(0,wo.jsx)("p",{children:s("pdf_output.select_template_description")})]})})]})}),(0,wo.jsxs)("div",{className:"modal-footer",children:[(0,wo.jsx)("button",{className:"btn btn-secondary",onClick:y,children:s("common:cancel")}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>{p&&(r(p),y())},disabled:!p,children:s("pdf_output.add_template")})]})]})]}):null},ZO=e=>{let{isOpen:t,onClose:n,onSave:r,templateId:a,workflow:s,existingMapping:o={}}=e;const{t:l}=Ma(["flows","common"]),[c,d]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[p,m]=(0,i.useState)({}),[f,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)("visual");(0,i.useEffect)((()=>{t&&a&&(y(),x(),m(o))}),[t,a,s,o]);const y=async()=>{g(!0);try{const e=(await xo.get("/templates/fields/".concat(a))).data;d(e.fields||[])}catch(e){console.error("Failed to load template fields:",e),rn.error(l("pdf_output.failed_to_load_template_fields"))}finally{g(!1)}},x=()=>{const e=[];e.push({id:"workflow.name",name:"Workflow Name",type:"text",category:"workflow"},{id:"workflow.description",name:"Workflow Description",type:"text",category:"workflow"},{id:"workflow.completion_date",name:"Completion Date",type:"date",category:"workflow"}),e.push({id:"user.name",name:"User Name",type:"text",category:"user"},{id:"user.email",name:"User Email",type:"email",category:"user"},{id:"user.employee_id",name:"Employee ID",type:"text",category:"user"},{id:"user.department",name:"Department",type:"text",category:"user"},{id:"user.position",name:"Position",type:"text",category:"user"}),e.push({id:"manager.name",name:"Manager Name",type:"text",category:"manager"},{id:"manager.email",name:"Manager Email",type:"email",category:"manager"}),s.phases&&s.phases.forEach(((t,n)=>{e.push({id:"phase.".concat(t.id,".name"),name:"Phase ".concat(n+1,": ").concat(t.name),type:"text",category:"phases"},{id:"phase.".concat(t.id,".completion_date"),name:"Phase ".concat(n+1," Completion Date"),type:"date",category:"phases"},{id:"phase.".concat(t.id,".score"),name:"Phase ".concat(n+1," Score"),type:"number",category:"phases"}),"quiz"===t.type&&e.push({id:"quiz.".concat(t.id,".score"),name:"".concat(t.name," Quiz Score"),type:"number",category:"quiz"},{id:"quiz.".concat(t.id,".percentage"),name:"".concat(t.name," Quiz Percentage"),type:"number",category:"quiz"},{id:"quiz.".concat(t.id,".passed"),name:"".concat(t.name," Quiz Passed"),type:"boolean",category:"quiz"})})),h(e)},w=e=>{m((t=>{const n=We({},t);return delete n[e],n}))},_=()=>{n()},k=u.reduce(((e,t)=>{const n=t.category;return e[n]||(e[n]=[]),e[n].push(t),e}),{}),j=()=>Object.keys(p).filter((e=>p[e])).length;return t?(0,wo.jsxs)("div",{className:"data-mapping-modal",children:[(0,wo.jsx)("div",{className:"modal-backdrop",onClick:_}),(0,wo.jsxs)("div",{className:"modal-content",children:[(0,wo.jsxs)("div",{className:"modal-header",children:[(0,wo.jsxs)("h2",{children:["\ud83d\udd17 ",l("pdf_output.configure_data_mapping")]}),(0,wo.jsx)("button",{className:"close-button",onClick:_,children:"\xd7"})]}),(0,wo.jsxs)("div",{className:"mapping-tabs",children:[(0,wo.jsxs)("button",{className:"tab-button ".concat("visual"===v?"active":""),onClick:()=>b("visual"),children:["\ud83c\udfaf ",l("pdf_output.visual_mapping")]}),(0,wo.jsxs)("button",{className:"tab-button ".concat("manual"===v?"active":""),onClick:()=>b("manual"),children:["\u2699\ufe0f ",l("pdf_output.manual_mapping")]})]}),(0,wo.jsxs)("div",{className:"mapping-status",children:[(0,wo.jsxs)("div",{className:"status-item",children:[(0,wo.jsxs)("span",{className:"status-label",children:[l("pdf_output.template_fields"),":"]}),(0,wo.jsx)("span",{className:"status-value",children:c.length})]}),(0,wo.jsxs)("div",{className:"status-item",children:[(0,wo.jsxs)("span",{className:"status-label",children:[l("pdf_output.mapped_fields"),":"]}),(0,wo.jsx)("span",{className:"status-value",children:j()})]}),(0,wo.jsxs)("div",{className:"status-item",children:[(0,wo.jsxs)("span",{className:"status-label",children:[l("pdf_output.flow_data_fields"),":"]}),(0,wo.jsx)("span",{className:"status-value",children:u.length})]})]}),(0,wo.jsx)("div",{className:"modal-body",children:f?(0,wo.jsxs)("div",{className:"loading-state",children:[(0,wo.jsx)("div",{className:"loading-spinner"}),(0,wo.jsx)("p",{children:l("pdf_output.loading_template_fields")})]}):(0,wo.jsxs)(wo.Fragment,{children:["visual"===v&&(0,wo.jsx)("div",{className:"visual-mapping",children:(0,wo.jsxs)("div",{className:"mapping-columns",children:[(0,wo.jsxs)("div",{className:"fields-column",children:[(0,wo.jsxs)("h3",{children:["\ud83d\udcc4 ",l("pdf_output.template_fields")]}),(0,wo.jsx)("div",{className:"fields-list",children:c.map((e=>{var t;return(0,wo.jsxs)("div",{className:"field-item template-field ".concat(p[e.id]?"mapped":""),"data-field-id":e.id,children:[(0,wo.jsxs)("div",{className:"field-header",children:[(0,wo.jsx)("span",{className:"field-name",children:e.name}),(0,wo.jsx)("span",{className:"field-type",children:e.type})]}),p[e.id]&&(0,wo.jsxs)("div",{className:"mapped-to",children:[(0,wo.jsxs)("span",{children:["\ud83d\udccd ",null===(t=u.find((t=>t.id===p[e.id])))||void 0===t?void 0:t.name]}),(0,wo.jsx)("button",{className:"clear-mapping",onClick:()=>w(e.id),children:"\xd7"})]})]},e.id)}))})]}),(0,wo.jsx)("div",{className:"connection-column",children:(0,wo.jsx)("div",{className:"connection-line"})}),(0,wo.jsxs)("div",{className:"fields-column",children:[(0,wo.jsxs)("h3",{children:["\ud83d\udcca ",l("pdf_output.flow_data_fields")]}),(0,wo.jsx)("div",{className:"fields-list",children:Object.entries(k).map((e=>{let[t,n]=e;return(0,wo.jsxs)("div",{className:"field-group",children:[(0,wo.jsx)("h4",{className:"group-header",children:l("pdf_output.".concat(t))}),n.map((e=>(0,wo.jsx)("div",{className:"field-item flow-field ".concat(Object.values(p).includes(e.id)?"used":""),onClick:()=>{rn(l("pdf_output.use_manual_mapping_for_now"))},children:(0,wo.jsxs)("div",{className:"field-header",children:[(0,wo.jsx)("span",{className:"field-name",children:e.name}),(0,wo.jsx)("span",{className:"field-type",children:e.type})]})},e.id)))]},t)}))})]})]})}),"manual"===v&&(0,wo.jsx)("div",{className:"manual-mapping",children:(0,wo.jsxs)("div",{className:"mapping-table",children:[(0,wo.jsxs)("div",{className:"table-header",children:[(0,wo.jsx)("span",{children:l("pdf_output.template_field")}),(0,wo.jsx)("span",{children:l("pdf_output.flow_data_field")}),(0,wo.jsx)("span",{children:l("pdf_output.actions")})]}),c.map((e=>(0,wo.jsxs)("div",{className:"mapping-row",children:[(0,wo.jsxs)("div",{className:"template-field-info",children:[(0,wo.jsx)("span",{className:"field-name",children:e.name}),(0,wo.jsxs)("span",{className:"field-type",children:["(",e.type,")"]})]}),(0,wo.jsx)("div",{className:"flow-field-selector",children:(0,wo.jsxs)("select",{value:p[e.id]||"",onChange:t=>{return n=e.id,r=t.target.value,void m((e=>We(We({},e),{},{[n]:r})));var n,r},className:"mapping-select",children:[(0,wo.jsx)("option",{value:"",children:l("pdf_output.select_flow_field")}),Object.entries(k).map((t=>{let[n,r]=t;return(0,wo.jsx)("optgroup",{label:l("pdf_output.".concat(n)),children:r.filter((t=>t.type===e.type||"text"===e.type&&["email","text"].includes(t.type))).map((e=>(0,wo.jsx)("option",{value:e.id,children:e.name},e.id)))},n)}))]})}),(0,wo.jsx)("div",{className:"mapping-actions",children:p[e.id]&&(0,wo.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>w(e.id),children:l("pdf_output.clear")})})]},e.id)))]})})]})}),(0,wo.jsxs)("div",{className:"modal-footer",children:[(0,wo.jsx)("button",{className:"btn btn-secondary",onClick:_,children:l("common:cancel")}),(0,wo.jsxs)("button",{className:"btn btn-primary",onClick:()=>{r(p),_(),rn.success(l("pdf_output.mapping_saved_successfully"))},disabled:0===j(),children:[l("pdf_output.save_mapping")," (",j(),")"]})]})]})]}):null},eP=e=>{let{workflow:t,onConfigUpdate:n}=e;const{t:r}=Ma(["flows","common"]),{user:a}=ko(),[s,o]=(0,i.useState)({enabled:!1,templates:[],globalSettings:{emailDelivery:!0,recipients:{user:!0,manager:!0,hr:!0,custom:[]}}}),[l,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)("overview"),[m,f]=(0,i.useState)(!1),[g,v]=(0,i.useState)(!1),[b,y]=(0,i.useState)(null);(0,i.useEffect)((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.config)&&void 0!==e&&e.pdf_output&&o(t.config.pdf_output),x()}),[t]);const x=async()=>{u(!0);try{const e=await fetch("/api/templates");if(e.ok){const t=await e.json();c(t)}}catch(e){console.error("Failed to load PDF templates:",e),rn.error("Failed to load PDF templates")}finally{u(!1)}},w=e=>{const r=We(We({},s),e);o(r),n(We(We({},t.config),{},{pdf_output:r}))},_=(e,t)=>{w({templates:s.templates.map((n=>n.id===e?We(We({},n),t):n))})},k=()=>(0,wo.jsxs)("div",{className:"pdf-config-tabs",children:[(0,wo.jsxs)("button",{className:"tab-button ".concat("overview"===h?"active":""),onClick:()=>p("overview"),children:["\ud83d\udcca ",r("pdf_output.pdf_output_overview")]}),(0,wo.jsxs)("button",{className:"tab-button ".concat("templates"===h?"active":""),onClick:()=>p("templates"),children:["\ud83d\udcc4 ",r("pdf_output.pdf_templates")]}),(0,wo.jsxs)("button",{className:"tab-button ".concat("delivery"===h?"active":""),onClick:()=>p("delivery"),children:["\ud83d\udce7 ",r("pdf_output.delivery_settings")]})]}),j=()=>(0,wo.jsxs)("div",{className:"pdf-overview-tab",children:[(0,wo.jsx)("div",{className:"pdf-enable-section",children:(0,wo.jsxs)("div",{className:"setting-card",children:[(0,wo.jsxs)("div",{className:"setting-header",children:[(0,wo.jsxs)("h3",{children:["\ud83d\udcc4 ",r("pdf_output.pdf_output_enable")]}),(0,wo.jsxs)("label",{className:"toggle-switch",children:[(0,wo.jsx)("input",{type:"checkbox",checked:s.enabled,onChange:e=>w({enabled:e.target.checked})}),(0,wo.jsx)("span",{className:"toggle-slider"})]})]}),(0,wo.jsx)("p",{className:"setting-description",children:r("pdf_output.pdf_output_enable_description")})]})}),s.enabled&&(0,wo.jsxs)("div",{className:"pdf-summary",children:[(0,wo.jsxs)("div",{className:"summary-grid",children:[(0,wo.jsxs)("div",{className:"summary-card",children:[(0,wo.jsx)("div",{className:"summary-icon",children:"\ud83d\udcc4"}),(0,wo.jsxs)("div",{className:"summary-content",children:[(0,wo.jsx)("h4",{children:s.templates.length}),(0,wo.jsx)("p",{children:r("pdf_output.configured_templates")})]})]}),(0,wo.jsxs)("div",{className:"summary-card",children:[(0,wo.jsx)("div",{className:"summary-icon",children:"\u26a1"}),(0,wo.jsxs)("div",{className:"summary-content",children:[(0,wo.jsx)("h4",{children:s.templates.filter((e=>"quiz_complete"===e.trigger)).length}),(0,wo.jsx)("p",{children:r("pdf_output.quiz_triggers")})]})]}),(0,wo.jsxs)("div",{className:"summary-card",children:[(0,wo.jsx)("div",{className:"summary-icon",children:"\ud83d\udce7"}),(0,wo.jsxs)("div",{className:"summary-content",children:[(0,wo.jsx)("h4",{children:s.globalSettings.emailDelivery?r("pdf_output.enabled"):r("pdf_output.disabled")}),(0,wo.jsx)("p",{children:r("pdf_output.email_delivery")})]})]})]}),0===s.templates.length&&(0,wo.jsx)("div",{className:"empty-templates",children:(0,wo.jsxs)("div",{className:"empty-state",children:[(0,wo.jsx)("div",{className:"empty-icon",children:"\ud83d\udcc4"}),(0,wo.jsx)("h3",{children:r("pdf_output.no_pdf_templates_configured")}),(0,wo.jsx)("p",{children:r("pdf_output.add_pdf_template_description")}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>p("templates"),children:r("pdf_output.add_first_template")})]})})]})]}),N=()=>(0,wo.jsxs)("div",{className:"pdf-templates-tab",children:[(0,wo.jsxs)("div",{className:"templates-header",children:[(0,wo.jsxs)("h3",{children:["\ud83d\udcc4 ",r("pdf_output.pdf_template_associations")]}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>f(!0),disabled:!s.enabled,children:r("pdf_output.add_template")})]}),!s.enabled&&(0,wo.jsx)("div",{className:"disabled-notice",children:(0,wo.jsx)("p",{children:r("pdf_output.enable_pdf_output_first")})}),s.enabled&&(0,wo.jsx)("div",{className:"template-associations",children:s.templates.map((e=>(0,wo.jsx)(S,{association:e,availableTemplates:l,onUpdate:t=>_(e.id,t),onRemove:()=>{return t=e.id,void w({templates:s.templates.filter((e=>e.id!==t))});var t}},e.id)))})]}),S=e=>{var t,n,i,a,s;let{association:o,availableTemplates:l,onUpdate:c,onRemove:d}=e;const u=l.find((e=>e.id===o.template_id));return(0,wo.jsxs)("div",{className:"template-association-card",children:[(0,wo.jsxs)("div",{className:"association-header",children:[(0,wo.jsxs)("div",{className:"template-info",children:[(0,wo.jsx)("h4",{children:(null===u||void 0===u?void 0:u.name)||r("pdf_output.unknown_template")}),(0,wo.jsx)("p",{children:(null===u||void 0===u?void 0:u.description)||r("no_description")})]}),(0,wo.jsxs)("div",{className:"association-actions",children:[(0,wo.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>(e=>{y(e),v(!0)})(o),children:r("pdf_output.configure_mapping")}),(0,wo.jsx)("button",{className:"btn btn-danger btn-sm",onClick:d,children:r("pdf_output.remove")})]})]}),(0,wo.jsxs)("div",{className:"association-settings",children:[(0,wo.jsxs)("div",{className:"setting-group",children:[(0,wo.jsx)("label",{children:r("pdf_output.trigger_when")}),(0,wo.jsxs)("select",{value:o.trigger,onChange:e=>c({trigger:e.target.value}),className:"form-select",children:[(0,wo.jsx)("option",{value:"quiz_complete",children:r("pdf_output.quiz_completed")}),(0,wo.jsx)("option",{value:"phase_complete",children:r("pdf_output.phase_completed")}),(0,wo.jsx)("option",{value:"workflow_complete",children:r("pdf_output.workflow_completed")}),(0,wo.jsx)("option",{value:"manual",children:r("pdf_output.manual_generation")})]})]}),(0,wo.jsx)("div",{className:"setting-group",children:(0,wo.jsxs)("label",{className:"checkbox-label",children:[(0,wo.jsx)("input",{type:"checkbox",checked:o.enabled,onChange:e=>c({enabled:e.target.checked})}),r("pdf_output.enable_this_template")]})})]}),(0,wo.jsxs)("div",{className:"association-preview",children:[(0,wo.jsxs)("div",{className:"preview-item",children:[(0,wo.jsxs)("span",{className:"preview-label",children:[r("pdf_output.data_fields_mapped"),":"]}),(0,wo.jsxs)("span",{className:"preview-value",children:[Object.keys(o.data_mapping||{}).length," ",r("pdf_output.fields")]})]}),(0,wo.jsxs)("div",{className:"preview-item",children:[(0,wo.jsxs)("span",{className:"preview-label",children:[r("pdf_output.recipients"),":"]}),(0,wo.jsx)("span",{className:"preview-value",children:[(null===(t=o.recipients)||void 0===t?void 0:t.user)&&r("pdf_output.user"),(null===(n=o.recipients)||void 0===n?void 0:n.manager)&&r("pdf_output.manager"),(null===(i=o.recipients)||void 0===i?void 0:i.hr)&&r("pdf_output.hr"),(null===(a=o.recipients)||void 0===a||null===(s=a.custom)||void 0===s?void 0:s.length)>0&&"".concat(o.recipients.custom.length," ").concat(r("pdf_output.custom"))].filter(Boolean).join(", ")||r("pdf_output.none")})]})]})]})},E=()=>{var e;return(0,wo.jsx)("div",{className:"pdf-delivery-tab",children:(0,wo.jsxs)("div",{className:"delivery-settings",children:[(0,wo.jsxs)("div",{className:"setting-card",children:[(0,wo.jsxs)("div",{className:"setting-header",children:[(0,wo.jsxs)("h3",{children:["\ud83d\udce7 ",r("pdf_output.email_delivery")]}),(0,wo.jsxs)("label",{className:"toggle-switch",children:[(0,wo.jsx)("input",{type:"checkbox",checked:s.globalSettings.emailDelivery,onChange:e=>w({globalSettings:We(We({},s.globalSettings),{},{emailDelivery:e.target.checked})})}),(0,wo.jsx)("span",{className:"toggle-slider"})]})]}),(0,wo.jsx)("p",{className:"setting-description",children:r("pdf_output.email_delivery_description")})]}),s.globalSettings.emailDelivery&&(0,wo.jsxs)("div",{className:"recipients-config",children:[(0,wo.jsx)("h4",{children:r("pdf_output.default_recipients")}),(0,wo.jsx)("div",{className:"recipients-grid",children:Object.entries(s.globalSettings.recipients).map((e=>{let[t,n]=e;return"custom"===t?null:(0,wo.jsxs)("label",{className:"recipient-checkbox",children:[(0,wo.jsx)("input",{type:"checkbox",checked:n,onChange:e=>w({globalSettings:We(We({},s.globalSettings),{},{recipients:We(We({},s.globalSettings.recipients),{},{[t]:e.target.checked})})})}),(0,wo.jsxs)("span",{className:"recipient-label",children:["user"===t&&"\ud83d\udc64","manager"===t&&"\ud83d\udc68\u200d\ud83d\udcbc","hr"===t&&"\ud83c\udfe2",r("pdf_output.".concat(t))]})]},t)}))}),(0,wo.jsxs)("div",{className:"custom-recipients",children:[(0,wo.jsx)("h5",{children:r("pdf_output.custom_recipients")}),(0,wo.jsx)("div",{className:"custom-recipients-list",children:null===(e=s.globalSettings.recipients.custom)||void 0===e?void 0:e.map(((e,t)=>(0,wo.jsxs)("div",{className:"custom-recipient",children:[(0,wo.jsx)("span",{children:e}),(0,wo.jsx)("button",{className:"btn btn-danger btn-xs",onClick:()=>{const e=[...s.globalSettings.recipients.custom];e.splice(t,1),w({globalSettings:We(We({},s.globalSettings),{},{recipients:We(We({},s.globalSettings.recipients),{},{custom:e})})})},children:"\xd7"})]},t)))}),(0,wo.jsx)("div",{className:"add-custom-recipient",children:(0,wo.jsx)("input",{type:"email",placeholder:r("pdf_output.enter_email_address"),className:"form-input",onKeyPress:e=>{if("Enter"===e.key&&e.target.value.trim()){const t=[...s.globalSettings.recipients.custom||[]];t.push(e.target.value.trim()),w({globalSettings:We(We({},s.globalSettings),{},{recipients:We(We({},s.globalSettings.recipients),{},{custom:t})})}),e.target.value=""}}})})]})]})]})})};return(0,wo.jsxs)("div",{className:"pdf-output-config",children:[(0,wo.jsxs)("div",{className:"pdf-config-header",children:[(0,wo.jsxs)("h2",{children:["\ud83d\udcc4 ",r("pdf_output.pdf_output_configuration")]}),(0,wo.jsx)("p",{children:r("pdf_output.pdf_output_description")})]}),(0,wo.jsx)(k,{}),(0,wo.jsxs)("div",{className:"pdf-config-content",children:["overview"===h&&(0,wo.jsx)(j,{}),"templates"===h&&(0,wo.jsx)(N,{}),"delivery"===h&&(0,wo.jsx)(E,{})]}),(0,wo.jsx)($O,{isOpen:m,onClose:()=>f(!1),onSelectTemplate:e=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"quiz_complete";const n={id:Date.now().toString(),template_id:e,trigger:t,enabled:!0,data_mapping:{},recipients:We({},s.globalSettings.recipients)};w({templates:[...s.templates,n]})}(e.id,"quiz_complete"),f(!1),rn.success(r("pdf_output.template_added_successfully"))},selectedTemplateIds:s.templates.map((e=>e.template_id))}),(0,wo.jsx)(ZO,{isOpen:g,onClose:()=>v(!1),onSave:e=>{b&&(_(b.id,{data_mapping:e}),v(!1),y(null))},templateId:null===b||void 0===b?void 0:b.template_id,workflow:t,existingMapping:(null===b||void 0===b?void 0:b.data_mapping)||{}})]})},tP=e=>{let{workflowItem:t,onContentImported:n,onClose:r}=e;const{t:a}=Ma(),[s,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(!0),[m,f]=(0,i.useState)(!1);(0,i.useEffect)((()=>{g()}),[]);const g=async()=>{try{p(!0);const e=await Ms();o(e||[]),console.log("\ud83d\udd0d [CONTENT-IMPORTER] Loaded training phases:",e)}catch(e){console.error("\u274c Error loading training content:",e)}finally{p(!1)}};return h?(0,wo.jsx)("div",{className:"content-importer-modal",children:(0,wo.jsxs)("div",{className:"modal-content",children:[(0,wo.jsxs)("div",{className:"modal-header",children:[(0,wo.jsx)("h3",{children:"Loading Training Content..."}),(0,wo.jsx)("button",{onClick:r,className:"close-btn",children:"\xd7"})]}),(0,wo.jsx)("div",{className:"modal-body",children:(0,wo.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,wo.jsx)("div",{className:"spinner"}),(0,wo.jsx)("p",{children:"Loading available training content..."})]})})]})}):(0,wo.jsx)("div",{className:"content-importer-modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,wo.jsxs)("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"12px",width:"90%",maxWidth:"800px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,wo.jsxs)("div",{className:"modal-header",style:{padding:"20px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,wo.jsxs)("h3",{style:{margin:0},children:['Import Training Content for "',t.title,'"']}),(0,wo.jsx)("button",{onClick:r,className:"close-btn",style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px"},children:"\xd7"})]}),(0,wo.jsxs)("div",{className:"modal-body",style:{padding:"20px",overflow:"auto",flex:1},children:[(0,wo.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,wo.jsxs)("div",{children:[(0,wo.jsxs)("h4",{children:["\ud83d\udcda Available Training Phases (",s.length,")"]}),(0,wo.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:s.map(((e,t)=>{const n=l===e;return(0,wo.jsxs)("div",{className:"training-phase ".concat(n?"selected":""),onClick:()=>{c(e),u(null)},style:{padding:"12px",border:n?"2px solid #007bff":"1px solid #ddd",borderRadius:"8px",margin:"8px 0",cursor:"pointer",backgroundColor:n?"#e3f2fd":"white"},children:[(0,wo.jsx)("h5",{style:{margin:"0 0 4px 0"},children:e.title||e.name||"Phase ".concat(t+1)}),e.description&&(0,wo.jsx)("p",{style:{margin:"0",fontSize:"14px",color:"#666"},children:e.description}),(0,wo.jsx)("div",{style:{fontSize:"12px",color:"#888",marginTop:"4px"},children:e.items?"".concat(e.items.length," items"):"No items"})]},e.id)}))})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h4",{children:"\ud83d\udcdd Training Items"}),l?(0,wo.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:l.items&&l.items.length>0?l.items.map(((e,t)=>((e,t)=>{const n=d===e;return(0,wo.jsxs)("div",{className:"training-item ".concat(n?"selected":""),onClick:()=>u(e),style:{padding:"12px",border:n?"2px solid #007bff":"1px solid #ddd",borderRadius:"8px",margin:"8px 0",cursor:"pointer",backgroundColor:n?"#f8f9fa":"white"},children:[(0,wo.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"16px"},children:e.title||e.name||"Item ".concat(t+1)}),e.description&&(0,wo.jsx)("p",{style:{margin:"0 0 8px 0",color:"#666",fontSize:"14px"},children:e.description}),e.content&&(0,wo.jsxs)("div",{style:{fontSize:"12px",color:"#888"},children:[(0,wo.jsx)("strong",{children:"Content available:"}),"object"===typeof e.content?(0,wo.jsxs)("span",{children:[" ",Object.keys(e.content).join(", ")]}):(0,wo.jsxs)("span",{children:[" Text content (",typeof e.content,")"]})]})]},t)})(e,t))):(0,wo.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"#666",border:"1px dashed #ddd",borderRadius:"8px"},children:[(0,wo.jsx)("p",{children:"This phase has no individual items."}),(0,wo.jsx)("p",{children:"You can import the phase content directly."}),(0,wo.jsx)("button",{onClick:()=>u(l),className:"btn btn-outline",style:{marginTop:"10px"},children:"Use Phase Content"})]})}):(0,wo.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#999",border:"1px dashed #ddd",borderRadius:"8px"},children:"Select a training phase to see its items"})]})]}),d&&(0,wo.jsxs)("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,wo.jsx)("h4",{children:"\ud83d\udccb Content Preview"}),(0,wo.jsxs)("div",{style:{fontSize:"14px"},children:[(0,wo.jsx)("strong",{children:"Title:"})," ",d.title||d.name||"Untitled",(0,wo.jsx)("br",{}),(0,wo.jsx)("strong",{children:"Description:"})," ",d.description||"No description",(0,wo.jsx)("br",{}),(0,wo.jsx)("strong",{children:"Content Type:"})," ",typeof d.content,(0,wo.jsx)("br",{}),d.content&&"object"===typeof d.content&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("strong",{children:"Content Sections:"})," ",Object.keys(d.content).join(", ")]})]})]})]}),(0,wo.jsxs)("div",{className:"modal-footer",style:{padding:"20px",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,wo.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:l&&d?'Ready to import: "'.concat(d.title||d.name||"Selected content",'"'):"Select a training phase and item to import"}),(0,wo.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,wo.jsx)("button",{onClick:r,className:"btn btn-outline",disabled:m,children:"Cancel"}),(0,wo.jsx)("button",{onClick:async()=>{if(l&&d)try{f(!0),await bo(t.id,l.id,d.item_number||1),console.log("\u2705 [CONTENT-IMPORTER] Successfully imported content"),n({content_source:"training_reference",training_phase_id:l.id,training_item_number:d.item_number||1,enriched_content:d.content||d})}catch(e){console.error("\u274c Error importing content:",e),alert("Failed to import content. Please try again.")}finally{f(!1)}else alert("Please select both a training phase and an item")},className:"btn btn-primary",disabled:!l||!d||m,children:m?"\u23f3 Importing...":"\ud83d\udce5 Import Content"})]})]})]})})},nP=e=>{if(!e)return"";if("string"===typeof e)return e;let t="";return e.title&&(t+="<h2>".concat(e.title,"</h2>")),e.description&&(t+='<p class="description">'.concat(e.description,"</p>")),e.content&&(e.content.overview&&(t+='<div class="overview"><h3>Overview</h3><p>'.concat(e.content.overview,"</p></div>")),e.content.objectives&&e.content.objectives.length>0&&(t+='<div class="objectives"><h3>Learning Objectives</h3><ul>',e.content.objectives.forEach((e=>{e.trim()&&(t+="<li>".concat(e,"</li>"))})),t+="</ul></div>"),e.content.keyPoints&&e.content.keyPoints.length>0&&(t+='<div class="key-points"><h3>Key Points</h3><ul>',e.content.keyPoints.forEach((e=>{e.trim()&&(t+="<li>".concat(e,"</li>"))})),t+="</ul></div>"),e.content.procedures&&e.content.procedures.length>0&&(t+='<div class="procedures"><h3>Procedures</h3><ol>',e.content.procedures.forEach((e=>{e.trim()&&(t+="<li>".concat(e,"</li>"))})),t+="</ol></div>")),t||"<p>No content available</p>"},rP=e=>{var t,n,r,a;let{item:s,onUpdate:o,onCreateTrainingContent:l,onLinkTrainingContent:c}=e;const{t:d}=Ma(),[u,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[f,g]=(0,i.useState)(!0),[v,b]=(0,i.useState)(!1);(0,i.useEffect)((()=>{console.log("\ud83d\udd0d [TRAINING-CONTENT-EDITOR] Item data:",{itemId:s.id,itemTitle:s.title,contentSource:s.content_source,trainingPhaseId:s.training_phase_id,trainingItemNumber:s.training_item_number,hasEnrichedContent:!!s.enriched_content,hasContent:!!s.content,hasTrainingContent:!!s.training_content,contentType:typeof s.content,contentKeys:s.content?Object.keys(s.content):[],fullItem:s}),"training_reference"===s.content_source&&s.training_content?m({title:s.title,description:s.training_content.overview||"",category:"training",content:{overview:s.training_content.overview||"",objectives:s.training_content.objectives||[],keyPoints:s.training_content.keyPoints||[],procedures:s.training_content.procedures||[]},source:"training_reference",training_phase_id:s.training_phase_id,training_item_number:s.training_item_number}):s.enriched_content?m(s.enriched_content):s.content?m({title:s.title,description:s.content.description||"",category:s.content.category||"general",content:{overview:s.content.value||s.content.overview||"",objectives:s.content.objectives||[],keyPoints:s.content.keyPoints||[],procedures:s.content.procedures||[]},source:"inline"}):m({title:s.title,description:"",category:"general",content:{overview:"",objectives:[],keyPoints:[],procedures:[]},source:"inline"})}),[s]);const y=e=>{m((t=>We(We({},t),{},{content:We(We({},t.content),{},{[e]:[...t.content[e]||[],""]})})))},x=(e,t,n)=>{m((r=>We(We({},r),{},{content:We(We({},r.content),{},{[e]:r.content[e].map(((e,r)=>r===t?n:e))})})))},w=(e,t)=>{m((n=>We(We({},n),{},{content:We(We({},n.content),{},{[e]:n.content[e].filter(((e,n)=>n!==t))})})))};return p?(0,wo.jsxs)("div",{className:"training-content-editor",children:[(0,wo.jsxs)("div",{className:"editor-header",children:[(0,wo.jsx)("div",{className:"content-source-indicator",children:"training_reference"===s.content_source?(0,wo.jsxs)("span",{className:"badge badge-training",children:["\ud83d\udcda Training Content",s.training_phase_id&&(0,wo.jsxs)("small",{children:[" (Phase: ",s.training_phase_id.slice(0,8),"...)"]})]}):(0,wo.jsx)("span",{className:"badge badge-inline",children:"\ud83d\udcdd Inline Content"})}),(0,wo.jsxs)("div",{className:"editor-controls",children:[(0,wo.jsx)("button",{type:"button",onClick:()=>g(!f),className:"btn btn-sm btn-outline",children:f?"\ud83d\udcdd Edit":"\ud83d\udc41\ufe0f Preview"}),u&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("button",{type:"button",onClick:()=>{var e,t,n;"training_reference"===s.content_source?o(s.id,{training_content:p}):p.content.overview||(null===(e=p.content.objectives)||void 0===e?void 0:e.length)>0||(null===(t=p.content.keyPoints)||void 0===t?void 0:t.length)>0||(null===(n=p.content.procedures)||void 0===n?void 0:n.length)>0?l(s.id,p):o(s.id,{content:{value:p.content.overview,description:p.description,category:p.category}});h(!1)},className:"btn btn-sm btn-primary",children:"\ud83d\udcbe Save"}),(0,wo.jsx)("button",{type:"button",onClick:()=>{s.enriched_content&&m(s.enriched_content),h(!1)},className:"btn btn-sm btn-outline",children:"\u274c Cancel"})]}),!u&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("button",{type:"button",onClick:()=>b(!0),className:"btn btn-sm btn-success",title:"Import existing training content",children:"\ud83d\udce5 Import Content"}),(0,wo.jsx)("button",{type:"button",onClick:()=>{h(!0),g(!1)},className:"btn btn-sm btn-outline",children:"\u270f\ufe0f Edit Content"})]})]})]}),f&&!u?(0,wo.jsx)("div",{className:"content-preview",children:(0,wo.jsx)(Wh,{content:nP(p)})}):(0,wo.jsxs)("div",{className:"content-editor",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:"Title"}),(0,wo.jsx)("input",{type:"text",value:p.title||"",onChange:e=>m((t=>We(We({},t),{},{title:e.target.value}))),className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:"Description"}),(0,wo.jsx)("textarea",{value:p.description||"",onChange:e=>m((t=>We(We({},t),{},{description:e.target.value}))),className:"form-textarea",rows:"2"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:"Category"}),(0,wo.jsxs)("select",{value:p.category||"general",onChange:e=>m((t=>We(We({},t),{},{category:e.target.value}))),className:"form-select",children:[(0,wo.jsx)("option",{value:"general",children:"General"}),(0,wo.jsx)("option",{value:"safety",children:"Safety"}),(0,wo.jsx)("option",{value:"emergency",children:"Emergency"}),(0,wo.jsx)("option",{value:"orientation",children:"Orientation"}),(0,wo.jsx)("option",{value:"operational",children:"Operational"}),(0,wo.jsx)("option",{value:"compliance",children:"Compliance"})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:"Overview"}),(0,wo.jsx)("textarea",{value:(null===(t=p.content)||void 0===t?void 0:t.overview)||"",onChange:e=>m((t=>We(We({},t),{},{content:We(We({},t.content),{},{overview:e.target.value})}))),className:"form-textarea",rows:"3",placeholder:"Provide an overview of this training content..."})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:"Learning Objectives"}),(0,wo.jsxs)("div",{className:"list-editor",children:[((null===(n=p.content)||void 0===n?void 0:n.objectives)||[]).map(((e,t)=>(0,wo.jsxs)("div",{className:"list-item",children:[(0,wo.jsx)("input",{type:"text",value:e,onChange:e=>x("objectives",t,e.target.value),className:"form-input",placeholder:"Enter learning objective..."}),(0,wo.jsx)("button",{type:"button",onClick:()=>w("objectives",t),className:"btn btn-sm btn-danger",children:"\u274c"})]},t))),(0,wo.jsx)("button",{type:"button",onClick:()=>y("objectives"),className:"btn btn-sm btn-outline",children:"\u2795 Add Objective"})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:"Key Points"}),(0,wo.jsxs)("div",{className:"list-editor",children:[((null===(r=p.content)||void 0===r?void 0:r.keyPoints)||[]).map(((e,t)=>(0,wo.jsxs)("div",{className:"list-item",children:[(0,wo.jsx)("input",{type:"text",value:e,onChange:e=>x("keyPoints",t,e.target.value),className:"form-input",placeholder:"Enter key point..."}),(0,wo.jsx)("button",{type:"button",onClick:()=>w("keyPoints",t),className:"btn btn-sm btn-danger",children:"\u274c"})]},t))),(0,wo.jsx)("button",{type:"button",onClick:()=>y("keyPoints"),className:"btn btn-sm btn-outline",children:"\u2795 Add Key Point"})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:"Procedures"}),(0,wo.jsxs)("div",{className:"list-editor",children:[((null===(a=p.content)||void 0===a?void 0:a.procedures)||[]).map(((e,t)=>(0,wo.jsxs)("div",{className:"list-item",children:[(0,wo.jsx)("input",{type:"text",value:e,onChange:e=>x("procedures",t,e.target.value),className:"form-input",placeholder:"Enter procedure step..."}),(0,wo.jsx)("button",{type:"button",onClick:()=>w("procedures",t),className:"btn btn-sm btn-danger",children:"\u274c"})]},t))),(0,wo.jsx)("button",{type:"button",onClick:()=>y("procedures"),className:"btn btn-sm btn-outline",children:"\u2795 Add Procedure"})]})]})]}),(0,wo.jsx)("style",{jsx:!0,children:"\n        .training-content-editor {\n          border: 1px solid #e1e5e9;\n          border-radius: 8px;\n          padding: 16px;\n          margin: 8px 0;\n        }\n\n        .editor-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 16px;\n          padding-bottom: 8px;\n          border-bottom: 1px solid #e1e5e9;\n        }\n\n        .content-source-indicator .badge {\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-size: 12px;\n          font-weight: 500;\n        }\n\n        .badge-training {\n          background-color: #e3f2fd;\n          color: #1976d2;\n        }\n\n        .badge-inline {\n          background-color: #f3e5f5;\n          color: #7b1fa2;\n        }\n\n        .editor-controls {\n          display: flex;\n          gap: 8px;\n        }\n\n        .content-preview {\n          background-color: #f8f9fa;\n          border-radius: 4px;\n          padding: 16px;\n          min-height: 200px;\n        }\n\n        .content-editor .form-group {\n          margin-bottom: 16px;\n        }\n\n        .content-editor label {\n          display: block;\n          margin-bottom: 4px;\n          font-weight: 500;\n          color: #374151;\n        }\n\n        .list-editor {\n          border: 1px solid #d1d5db;\n          border-radius: 4px;\n          padding: 8px;\n          background-color: #f9fafb;\n        }\n\n        .list-item {\n          display: flex;\n          gap: 8px;\n          margin-bottom: 8px;\n          align-items: center;\n        }\n\n        .list-item .form-input {\n          flex: 1;\n        }\n\n        .btn {\n          padding: 6px 12px;\n          border-radius: 4px;\n          border: 1px solid #d1d5db;\n          background-color: white;\n          cursor: pointer;\n          font-size: 14px;\n        }\n\n        .btn-sm {\n          padding: 4px 8px;\n          font-size: 12px;\n        }\n\n        .btn-primary {\n          background-color: #3b82f6;\n          color: white;\n          border-color: #3b82f6;\n        }\n\n        .btn-outline {\n          background-color: transparent;\n        }\n\n        .btn-danger {\n          background-color: #ef4444;\n          color: white;\n          border-color: #ef4444;\n        }\n\n        .btn:hover {\n          opacity: 0.8;\n        }\n\n        .form-input, .form-textarea, .form-select {\n          width: 100%;\n          padding: 8px 12px;\n          border: 1px solid #d1d5db;\n          border-radius: 4px;\n          font-size: 14px;\n        }\n\n        .form-textarea {\n          resize: vertical;\n        }\n      "}),v&&(0,wo.jsx)(tP,{workflowItem:s,onContentImported:e=>{console.log("\u2705 [TRAINING-CONTENT-EDITOR] Content imported:",e),m(e.enriched_content),b(!1),o(s.id,e)},onClose:()=>b(!1)})]}):(0,wo.jsx)("div",{children:"Loading..."})},iP=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=(0,i.useRef)(null),s=(0,i.useRef)(null),o=(0,i.useRef)(null),l=(0,i.useRef)("saved");(0,i.useEffect)((()=>{null===o.current&&(o.current=JSON.stringify(e),s.current=Date.now())}),[]);const c=(0,i.useCallback)((()=>JSON.stringify(e)!==o.current),[e]),d=(0,i.useCallback)((async()=>{if(c()&&r)try{l.current="saving",await t(e),l.current="saved",s.current=Date.now(),o.current=JSON.stringify(e)}catch(n){console.error("Auto-save failed:",n),l.current="error"}}),[e,t,c,r]);(0,i.useEffect)((()=>{if(r&&c())return a.current&&clearTimeout(a.current),a.current=setTimeout(d,n),()=>{a.current&&clearTimeout(a.current)}}),[e,n,r,d,c]),(0,i.useEffect)((()=>()=>{a.current&&clearTimeout(a.current)}),[]);const u=(0,i.useCallback)((async()=>{a.current&&clearTimeout(a.current),await d()}),[d]);return{saveStatus:l.current,forceSave:u,lastSaved:s.current,hasUnsavedChanges:c()}},aP=e=>{let{saveStatus:t,lastSaved:n,hasUnsavedChanges:r}=e;const{t:i}=Ma("common"),a=e=>{const t=Date.now()-e,n=Math.floor(t/6e4),r=Math.floor(t/1e3);return n>0?"".concat(n,"m ago"):r>30?"".concat(r,"s ago"):i("auto_save.just_now")};return(0,wo.jsxs)("div",{className:"auto-save-indicator ".concat(t),children:[(0,wo.jsx)("span",{className:"save-icon",children:(()=>{switch(t){case"saving":return(0,wo.jsx)("svg",{className:"saving-spinner",width:"16",height:"16",viewBox:"0 0 16 16",children:(0,wo.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:"none",stroke:"currentColor",strokeWidth:"2"})});case"error":return(0,wo.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[(0,wo.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,wo.jsx)("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"})]});case"saved":return r?(0,wo.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[(0,wo.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,wo.jsx)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]}):(0,wo.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[(0,wo.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,wo.jsx)("path",{d:"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"})]});default:return null}})()}),(0,wo.jsx)("span",{className:"save-text",children:(()=>{switch(t){case"saving":return i("auto_save.saving");case"error":return i("auto_save.save_failed");case"saved":return r?i("auto_save.unsaved_changes"):n?i("auto_save.saved_time_ago",{time:a(n)}):i("auto_save.saved");default:return""}})()})]})};const sP="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function oP(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function lP(e){return"nodeType"in e}function cP(e){var t,n;return e?oP(e)?e:lP(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function dP(e){const{Document:t}=cP(e);return e instanceof t}function uP(e){return!oP(e)&&e instanceof cP(e).HTMLElement}function hP(e){return e instanceof cP(e).SVGElement}function pP(e){return e?oP(e)?e.document:lP(e)?dP(e)?e:uP(e)||hP(e)?e.ownerDocument:document:document:document}const mP=sP?i.useLayoutEffect:i.useEffect;function fP(e){const t=(0,i.useRef)(e);return mP((()=>{t.current=e})),(0,i.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function gP(e,t){void 0===t&&(t=[e]);const n=(0,i.useRef)(e);return mP((()=>{n.current!==e&&(n.current=e)}),t),n}function vP(e,t){const n=(0,i.useRef)();return(0,i.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function bP(e){const t=fP(e),n=(0,i.useRef)(null),r=(0,i.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function yP(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e}),[e]),t.current}let xP={};function wP(e,t){return(0,i.useMemo)((()=>{if(t)return t;const n=null==xP[e]?0:xP[e]+1;return xP[e]=n,e+"-"+n}),[e,t])}function _P(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[i,a]of r){const n=t[i];null!=n&&(t[i]=n+e*a)}return t}),We({},t))}}const kP=_P(1),jP=_P(-1);function NP(e){if(!e)return!1;const{KeyboardEvent:t}=cP(e.target);return t&&e instanceof t}function SP(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=cP(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const EP=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[EP.Translate.toString(e),EP.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),CP="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function AP(e){return e.matches(CP)?e:e.querySelector(CP)}const TP={display:"none"};function OP(e){let{id:t,value:n}=e;return i.createElement("div",{id:t,style:TP},n)}function PP(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return i.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const MP=["transform"],DP=["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"],RP=(0,i.createContext)(null);const LP={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},IP={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function FP(e){let{announcements:t=IP,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=LP}=e;const{announce:s,announcement:l}=function(){const[e,t]=(0,i.useState)("");return{announce:(0,i.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),c=wP("DndLiveRegion"),[d,u]=(0,i.useState)(!1);if((0,i.useEffect)((()=>{u(!0)}),[]),function(e){const t=(0,i.useContext)(RP);(0,i.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,i.useMemo)((()=>({onDragStart(e){let{active:n}=e;s(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&s(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;s(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;s(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;s(t.onDragCancel({active:n,over:r}))}})),[s,t])),!d)return null;const h=i.createElement(i.Fragment,null,i.createElement(OP,{id:r,value:a.draggable}),i.createElement(PP,{id:c,announcement:l}));return n?(0,o.createPortal)(h,n):h}var zP;function qP(){}function BP(e,t){return(0,i.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(zP||(zP={}));const UP=Object.freeze({x:0,y:0});function WP(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function HP(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function VP(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function GP(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function QP(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function KP(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const YP=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=KP(t,t.left,t.top),a=[];for(const s of r){const{id:e}=s,t=n.get(e);if(t){const n=WP(KP(t),i);a.push({id:e,data:{droppableContainer:s,value:n}})}}return a.sort(HP)};function XP(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),s=i-r,o=a-n;if(r<i&&n<a){const n=t.width*t.height,r=e.width*e.height,i=s*o;return Number((i/(n+r-i)).toFixed(4))}return 0}const JP=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const a of r){const{id:e}=a,r=n.get(e);if(r){const n=XP(r,t);n>0&&i.push({id:e,data:{droppableContainer:a,value:n}})}}return i.sort(VP)};function $P(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:UP}function ZP(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((t,n)=>We(We({},t),{},{top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),We({},t))}}const eM=ZP(1);function tM(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const nM={ignoreTransform:!1};function rM(e,t){void 0===t&&(t=nM);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=cP(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=tM(t);if(!r)return e;const{scaleX:i,scaleY:a,x:s,y:o}=r,l=e.left-s-(1-i)*parseFloat(n),c=e.top-o-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?e.width/i:e.width,u=a?e.height/a:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(n,t,r))}const{top:r,left:i,width:a,height:s,bottom:o,right:l}=n;return{top:r,left:i,width:a,height:s,bottom:o,right:l}}function iM(e){return rM(e,{ignoreTransform:!0})}function aM(e,t){const n=[];return e?function r(i){if(null!=t&&n.length>=t)return n;if(!i)return n;if(dP(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!uP(i)||hP(i))return n;if(n.includes(i))return n;const a=cP(e).getComputedStyle(i);return i!==e&&function(e,t){void 0===t&&(t=cP(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"===typeof r&&n.test(r)}))}(i,a)&&n.push(i),function(e,t){return void 0===t&&(t=cP(e).getComputedStyle(e)),"fixed"===t.position}(i,a)?n:r(i.parentNode)}(e):n}function sM(e){const[t]=aM(e,1);return null!=t?t:null}function oM(e){return sP&&e?oP(e)?e:lP(e)?dP(e)||e===pP(e).scrollingElement?window:uP(e)?e:null:null:null}function lM(e){return oP(e)?e.scrollX:e.scrollLeft}function cM(e){return oP(e)?e.scrollY:e.scrollTop}function dM(e){return{x:lM(e),y:cM(e)}}var uM;function hM(e){return!(!sP||!e)&&e===document.scrollingElement}function pM(e){const t={x:0,y:0},n=hM(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(uM||(uM={}));const mM={x:.2,y:.2};function fM(e,t,n,r,i){let{top:a,left:s,right:o,bottom:l}=n;void 0===r&&(r=10),void 0===i&&(i=mM);const{isTop:c,isBottom:d,isLeft:u,isRight:h}=pM(e),p={x:0,y:0},m={x:0,y:0},f=t.height*i.y,g=t.width*i.x;return!c&&a<=t.top+f?(p.y=uM.Backward,m.y=r*Math.abs((t.top+f-a)/f)):!d&&l>=t.bottom-f&&(p.y=uM.Forward,m.y=r*Math.abs((t.bottom-f-l)/f)),!h&&o>=t.right-g?(p.x=uM.Forward,m.x=r*Math.abs((t.right-g-o)/g)):!u&&s<=t.left+g&&(p.x=uM.Backward,m.x=r*Math.abs((t.left+g-s)/g)),{direction:p,speed:m}}function gM(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function vM(e){return e.reduce(((e,t)=>kP(e,dM(t))),UP)}function bM(e,t){if(void 0===t&&(t=rM),!e)return;const{top:n,left:r,bottom:i,right:a}=t(e);sM(e)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const yM=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+lM(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+cM(t)),0)}]];class xM{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=aM(t),r=vM(n);this.rect=We({},e),this.width=e.width,this.height=e.height;for(const[i,a,s]of yM)for(const e of a)Object.defineProperty(this,e,{get:()=>{const t=s(n),a=r[i]-t;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wM{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function _M(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"===typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var kM,jM;function NM(e){e.preventDefault()}function SM(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(kM||(kM={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(jM||(jM={}));const EM={start:[jM.Space,jM.Enter],cancel:[jM.Esc],end:[jM.Space,jM.Enter,jM.Tab]},CM=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case jM.Right:return We(We({},n),{},{x:n.x+25});case jM.Left:return We(We({},n),{},{x:n.x-25});case jM.Down:return We(We({},n),{},{y:n.y+25});case jM.Up:return We(We({},n),{},{y:n.y-25})}};class AM{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new wM(pP(t)),this.windowListeners=new wM(cP(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(kM.Resize,this.handleCancel),this.windowListeners.add(kM.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(kM.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&bM(n),t(UP)}handleKeyDown(e){if(NP(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:i=EM,coordinateGetter:a=CM,scrollBehavior:s="smooth"}=r,{code:o}=e;if(i.end.includes(o))return void this.handleEnd(e);if(i.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:UP;this.referenceCoordinates||(this.referenceCoordinates=c);const d=a(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=jP(d,c),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(const n of i){const i=e.code,{isTop:a,isRight:o,isLeft:l,isBottom:c,maxScroll:u,minScroll:h}=pM(n),p=gM(n),m={x:Math.min(i===jM.Right?p.right-p.width/2:p.right,Math.max(i===jM.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(i===jM.Down?p.bottom-p.height/2:p.bottom,Math.max(i===jM.Down?p.top:p.top+p.height/2,d.y))},f=i===jM.Right&&!o||i===jM.Left&&!l,g=i===jM.Down&&!c||i===jM.Up&&!a;if(f&&m.x!==d.x){const e=n.scrollLeft+t.x,a=i===jM.Right&&e<=u.x||i===jM.Left&&e>=h.x;if(a&&!t.y)return void n.scrollTo({left:e,behavior:s});r.x=a?n.scrollLeft-e:i===jM.Right?n.scrollLeft-u.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(g&&m.y!==d.y){const e=n.scrollTop+t.y,a=i===jM.Down&&e<=u.y||i===jM.Up&&e>=h.y;if(a&&!t.x)return void n.scrollTo({top:e,behavior:s});r.y=a?n.scrollTop-e:i===jM.Down?n.scrollTop-u.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,kP(jP(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function TM(e){return Boolean(e&&"distance"in e)}function OM(e){return Boolean(e&&"delay"in e)}AM.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=EM,onActivation:i}=t,{active:a}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class PM{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=cP(e);return e instanceof t?e:pP(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:i}=e,{target:a}=i;this.props=e,this.events=t,this.document=pP(a),this.documentListeners=new wM(this.document),this.listeners=new wM(n),this.windowListeners=new wM(cP(a)),this.initialCoordinates=null!=(r=SP(i))?r:UP,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(kM.Resize,this.handleCancel),this.windowListeners.add(kM.DragStart,NM),this.windowListeners.add(kM.VisibilityChange,this.handleCancel),this.windowListeners.add(kM.ContextMenu,NM),this.documentListeners.add(kM.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(OM(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(TM(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(kM.Click,SM,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(kM.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:i}=this,{onMove:a,options:{activationConstraint:s}}=i;if(!r)return;const o=null!=(t=SP(e))?t:UP,l=jP(r,o);if(!n&&s){if(TM(s)){if(null!=s.tolerance&&_M(l,s.tolerance))return this.handleCancel();if(_M(l,s.distance))return this.handleStart()}return OM(s)&&_M(l,s.tolerance)?this.handleCancel():void this.handlePending(s,l)}e.cancelable&&e.preventDefault(),a(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===jM.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const MM={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class DM extends PM{constructor(e){const{event:t}=e,n=pP(t.target);super(e,MM,n)}}DM.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const RM={move:{name:"mousemove"},end:{name:"mouseup"}};var LM;!function(e){e[e.RightClick=2]="RightClick"}(LM||(LM={}));(class extends PM{constructor(e){super(e,RM,pP(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==LM.RightClick&&(null==r||r({event:n}),!0)}}];const IM={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var FM,zM;function qM(e){let{acceleration:t,activator:n=FM.Pointer,canScroll:r,draggingRect:a,enabled:s,interval:o=5,order:l=zM.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:p}=e;const m=function(e){let{delta:t,disabled:n}=e;const r=yP(t);return vP((e=>{if(n||!r||!e)return BM;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[uM.Backward]:e.x[uM.Backward]||-1===i.x,[uM.Forward]:e.x[uM.Forward]||1===i.x},y:{[uM.Backward]:e.y[uM.Backward]||-1===i.y,[uM.Forward]:e.y[uM.Forward]||1===i.y}}}),[n,t,r])}({delta:h,disabled:!s}),[f,g]=function(){const e=(0,i.useRef)(null);return[(0,i.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,i.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),v=(0,i.useRef)({x:0,y:0}),b=(0,i.useRef)({x:0,y:0}),y=(0,i.useMemo)((()=>{switch(n){case FM.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case FM.DraggableRect:return a}}),[n,a,c]),x=(0,i.useRef)(null),w=(0,i.useCallback)((()=>{const e=x.current;if(!e)return;const t=v.current.x*b.current.x,n=v.current.y*b.current.y;e.scrollBy(t,n)}),[]),_=(0,i.useMemo)((()=>l===zM.TreeOrder?[...d].reverse():d),[l,d]);(0,i.useEffect)((()=>{if(s&&d.length&&y){for(const e of _){if(!1===(null==r?void 0:r(e)))continue;const n=d.indexOf(e),i=u[n];if(!i)continue;const{direction:a,speed:s}=fM(e,i,y,t,p);for(const e of["x","y"])m[e][a[e]]||(s[e]=0,a[e]=0);if(s.x>0||s.y>0)return g(),x.current=e,f(w,o),v.current=s,void(b.current=a)}v.current={x:0,y:0},b.current={x:0,y:0},g()}else g()}),[t,w,r,g,s,o,JSON.stringify(y),JSON.stringify(m),f,d,_,u,JSON.stringify(p)])}(class extends PM{constructor(e){super(e,IM)}static setup(){return window.addEventListener(IM.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(IM.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(FM||(FM={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(zM||(zM={}));const BM={x:{[uM.Backward]:!1,[uM.Forward]:!1},y:{[uM.Backward]:!1,[uM.Forward]:!1}};var UM,WM;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(UM||(UM={})),function(e){e.Optimized="optimized"}(WM||(WM={}));const HM=new Map;function VM(e,t){return vP((n=>e?n||("function"===typeof t?t(e):e):null),[t,e])}function GM(e){let{callback:t,disabled:n}=e;const r=fP(t),a=(0,i.useMemo)((()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return(0,i.useEffect)((()=>()=>null==a?void 0:a.disconnect()),[a]),a}function QM(e){return new xM(rM(e),e)}function KM(e,t,n){void 0===t&&(t=QM);const[r,a]=(0,i.useState)(null);function s(){a((r=>{if(!e)return null;var i;if(!1===e.isConnected)return null!=(i=null!=r?r:n)?i:null;const a=t(e);return JSON.stringify(r)===JSON.stringify(a)?r:a}))}const o=function(e){let{callback:t,disabled:n}=e;const r=fP(t),a=(0,i.useMemo)((()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return(0,i.useEffect)((()=>()=>null==a?void 0:a.disconnect()),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){s();break}}}}),l=GM({callback:s});return mP((()=>{s(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())}),[e]),r}const YM=[];function XM(e,t){void 0===t&&(t=[]);const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{n.current=null}),t),(0,i.useEffect)((()=>{const t=e!==UP;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?jP(e,n.current):UP}function JM(e){return(0,i.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const $M=[];function ZM(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return uP(t)?t:e}const eD=[{sensor:DM,options:{}},{sensor:AM,options:{}}],tD={current:{}},nD={draggable:{measure:iM},droppable:{measure:iM,strategy:UM.WhileDragging,frequency:WM.Optimized},dragOverlay:{measure:rM}};class rD extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const iD={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rD,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:qP},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nD,measureDroppableContainers:qP,windowRect:null,measuringScheduled:!1},aD={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:qP,draggableNodes:new Map,over:null,measureDroppableContainers:qP},sD=(0,i.createContext)(aD),oD=(0,i.createContext)(iD);function lD(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rD}}}function cD(e,t){switch(t.type){case zP.DragStart:return We(We({},e),{},{draggable:We(We({},e.draggable),{},{initialCoordinates:t.initialCoordinates,active:t.active})});case zP.DragMove:return null==e.draggable.active?e:We(We({},e),{},{draggable:We(We({},e.draggable),{},{translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}})});case zP.DragEnd:case zP.DragCancel:return We(We({},e),{},{draggable:We(We({},e.draggable),{},{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case zP.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new rD(e.droppable.containers);return i.set(r,n),We(We({},e),{},{droppable:We(We({},e.droppable),{},{containers:i})})}case zP.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const s=new rD(e.droppable.containers);return s.set(n,We(We({},a),{},{disabled:i})),We(We({},e),{},{droppable:We(We({},e.droppable),{},{containers:s})})}case zP.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new rD(e.droppable.containers);return a.delete(n),We(We({},e),{},{droppable:We(We({},e.droppable),{},{containers:a})})}default:return e}}function dD(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=(0,i.useContext)(sD),s=yP(r),o=yP(null==n?void 0:n.id);return(0,i.useEffect)((()=>{if(!t&&!r&&s&&null!=o){if(!NP(s))return;if(document.activeElement===s.target)return;const e=a.get(o);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=AP(e);if(t){t.focus();break}}}))}}),[r,t,a,o,s]),null}function uD(e,t){let{transform:n}=t,r=Fo(t,MP);return null!=e&&e.length?e.reduce(((e,t)=>t(We({transform:e},r))),n):n}const hD=(0,i.createContext)(We(We({},UP),{},{scaleX:1,scaleY:1}));var pD;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(pD||(pD={}));const mD=(0,i.memo)((function(e){var t,n,r,a;let{id:s,accessibility:l,autoScroll:c=!0,children:d,sensors:u=eD,collisionDetection:h=JP,measuring:p,modifiers:m}=e,f=Fo(e,DP);const g=(0,i.useReducer)(cD,void 0,lD),[v,b]=g,[y,x]=function(){const[e]=(0,i.useState)((()=>new Set)),t=(0,i.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,i.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[w,_]=(0,i.useState)(pD.Uninitialized),k=w===pD.Initialized,{draggable:{active:j,nodes:N,translate:S},droppable:{containers:E}}=v,C=null!=j?N.get(j):null,A=(0,i.useRef)({initial:null,translated:null}),T=(0,i.useMemo)((()=>{var e;return null!=j?{id:j,data:null!=(e=null==C?void 0:C.data)?e:tD,rect:A}:null}),[j,C]),O=(0,i.useRef)(null),[P,M]=(0,i.useState)(null),[D,R]=(0,i.useState)(null),L=gP(f,Object.values(f)),I=wP("DndDescribedBy",s),F=(0,i.useMemo)((()=>E.getEnabled()),[E]),z=(q=p,(0,i.useMemo)((()=>({draggable:We(We({},nD.draggable),null==q?void 0:q.draggable),droppable:We(We({},nD.droppable),null==q?void 0:q.droppable),dragOverlay:We(We({},nD.dragOverlay),null==q?void 0:q.dragOverlay)})),[null==q?void 0:q.draggable,null==q?void 0:q.droppable,null==q?void 0:q.dragOverlay]));var q;const{droppableRects:B,measureDroppableContainers:U,measuringScheduled:W}=function(e,t){let{dragging:n,dependencies:r,config:a}=t;const[s,o]=(0,i.useState)(null),{frequency:l,measure:c,strategy:d}=a,u=(0,i.useRef)(e),h=function(){switch(d){case UM.Always:return!1;case UM.BeforeDragging:return n;default:return!n}}(),p=gP(h),m=(0,i.useCallback)((function(e){void 0===e&&(e=[]),p.current||o((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),f=(0,i.useRef)(null),g=vP((t=>{if(h&&!n)return HM;if(!t||t===HM||u.current!==e||null!=s){const t=new Map;for(let n of e){if(!n)continue;if(s&&s.length>0&&!s.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new xM(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,s,n,h,c]);return(0,i.useEffect)((()=>{u.current=e}),[e]),(0,i.useEffect)((()=>{h||m()}),[n,h]),(0,i.useEffect)((()=>{s&&s.length>0&&o(null)}),[JSON.stringify(s)]),(0,i.useEffect)((()=>{h||"number"!==typeof l||null!==f.current||(f.current=setTimeout((()=>{m(),f.current=null}),l))}),[l,h,m,...r]),{droppableRects:g,measureDroppableContainers:m,measuringScheduled:null!=s}}(F,{dragging:k,dependencies:[S.x,S.y],config:z.droppable}),H=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return vP((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(N,j),V=(0,i.useMemo)((()=>D?SP(D):null),[D]),G=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"===typeof c?!1===c.enabled:!1===c,n=k&&!e&&!t;if("object"===typeof c)return We(We({},c),{},{enabled:n});return{enabled:n}}(),Q=function(e,t){return VM(e,t)}(H,z.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const s=(0,i.useRef)(!1),{x:o,y:l}="boolean"===typeof a?{x:a,y:a}:a;mP((()=>{if(!o&&!l||!t)return void(s.current=!1);if(s.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const i=$P(n(e),r);if(o||(i.x=0),l||(i.y=0),s.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){const t=sM(e);t&&t.scrollBy({top:i.y,left:i.x})}}),[t,o,l,r,n])}({activeNode:null!=j?N.get(j):null,config:G.layoutShiftCompensation,initialRect:Q,measure:z.draggable.measure});const K=KM(H,z.draggable.measure,Q),Y=KM(H?H.parentElement:null),X=(0,i.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),J=E.getNodeFor(null==(t=X.current.over)?void 0:t.id),$=function(e){let{measure:t}=e;const[n,r]=(0,i.useState)(null),a=(0,i.useCallback)((e=>{for(const{target:n}of e)if(uP(n)){r((e=>{const r=t(n);return e?We(We({},e),{},{width:r.width,height:r.height}):r}));break}}),[t]),s=GM({callback:a}),o=(0,i.useCallback)((e=>{const n=ZM(e);null==s||s.disconnect(),n&&(null==s||s.observe(n)),r(n?t(n):null)}),[t,s]),[l,c]=bP(o);return(0,i.useMemo)((()=>({nodeRef:l,rect:n,setRef:c})),[n,l,c])}({measure:z.dragOverlay.measure}),Z=null!=(n=$.nodeRef.current)?n:H,ee=k?null!=(r=$.rect)?r:K:null,te=Boolean($.nodeRef.current&&$.rect),ne=$P(re=te?null:K,VM(re));var re;const ie=JM(Z?cP(Z):null),ae=function(e){const t=(0,i.useRef)(e),n=vP((n=>e?n&&n!==YM&&e&&t.current&&e.parentNode===t.current.parentNode?n:aM(e):YM),[e]);return(0,i.useEffect)((()=>{t.current=e}),[e]),n}(k?null!=J?J:H:null),se=function(e,t){void 0===t&&(t=rM);const[n]=e,r=JM(n?cP(n):null),[a,s]=(0,i.useState)($M);function o(){s((()=>e.length?e.map((e=>hM(e)?r:new xM(t(e),e))):$M))}const l=GM({callback:o});return mP((()=>{null==l||l.disconnect(),o(),e.forEach((e=>null==l?void 0:l.observe(e)))}),[e]),a}(ae),oe=uD(m,{transform:{x:S.x-ne.x,y:S.y-ne.y,scaleX:1,scaleY:1},activatorEvent:D,active:T,activeNodeRect:K,containerNodeRect:Y,draggingNodeRect:ee,over:X.current.over,overlayNodeRect:$.rect,scrollableAncestors:ae,scrollableAncestorRects:se,windowRect:ie}),le=V?kP(V,S):null,ce=function(e){const[t,n]=(0,i.useState)(null),r=(0,i.useRef)(e),a=(0,i.useCallback)((e=>{const t=oM(e.target);t&&n((e=>e?(e.set(t,dM(t)),new Map(e)):null))}),[]);return(0,i.useEffect)((()=>{const t=r.current;if(e!==t){i(t);const s=e.map((e=>{const t=oM(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,dM(t)]):null})).filter((e=>null!=e));n(s.length?new Map(s):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach((e=>{const t=oM(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),(0,i.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>kP(e,t)),UP):vM(e):UP),[e,t])}(ae),de=XM(ce),ue=XM(ce,[K]),he=kP(oe,de),pe=ee?eM(ee,oe):null,me=T&&pe?h({active:T,collisionRect:pe,droppableRects:B,droppableContainers:F,pointerCoordinates:le}):null,fe=QP(me,"id"),[ge,ve]=(0,i.useState)(null),be=function(e,t,n){return We(We({},e),{},{scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1})}(te?oe:kP(oe,ue),null!=(a=null==ge?void 0:ge.rect)?a:null,K),ye=(0,i.useRef)(null),xe=(0,i.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==O.current)return;const i=N.get(O.current);if(!i)return;const a=e.nativeEvent,s=new n({active:O.current,activeNode:i,event:a,options:r,context:X,onAbort(e){if(!N.get(e))return;const{onDragAbort:t}=L.current,n={id:e};null==t||t(n),y({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!N.get(e))return;const{onDragPending:i}=L.current,a={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(a),y({type:"onDragPending",event:a})},onStart(e){const t=O.current;if(null==t)return;const n=N.get(t);if(!n)return;const{onDragStart:r}=L.current,i={activatorEvent:a,active:{id:t,data:n.data,rect:A}};(0,o.unstable_batchedUpdates)((()=>{null==r||r(i),_(pD.Initializing),b({type:zP.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:i}),M(ye.current),R(a)}))},onMove(e){b({type:zP.DragMove,coordinates:e})},onEnd:l(zP.DragEnd),onCancel:l(zP.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:i}=X.current;let s=null;if(t&&i){const{cancelDrop:o}=L.current;if(s={activatorEvent:a,active:t,collisions:n,delta:i,over:r},e===zP.DragEnd&&"function"===typeof o){await Promise.resolve(o(s))&&(e=zP.DragCancel)}}O.current=null,(0,o.unstable_batchedUpdates)((()=>{b({type:e}),_(pD.Uninitialized),ve(null),M(null),R(null),ye.current=null;const t=e===zP.DragEnd?"onDragEnd":"onDragCancel";if(s){const e=L.current[t];null==e||e(s),y({type:t,event:s})}}))}}ye.current=s}),[N]),we=(0,i.useCallback)(((e,t)=>(n,r)=>{const i=n.nativeEvent,a=N.get(r);if(null!==O.current||!a||i.dndKit||i.defaultPrevented)return;const s={active:a};!0===e(n,t.options,s)&&(i.dndKit={capturedBy:t.sensor},O.current=r,xe(n,t))}),[N,xe]),_e=function(e,t){return(0,i.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(u,we);!function(e){(0,i.useEffect)((()=>{if(!sP)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(u),mP((()=>{K&&w===pD.Initializing&&_(pD.Initialized)}),[K,w]),(0,i.useEffect)((()=>{const{onDragMove:e}=L.current,{active:t,activatorEvent:n,collisions:r,over:i}=X.current;if(!t||!n)return;const a={active:t,activatorEvent:n,collisions:r,delta:{x:he.x,y:he.y},over:i};(0,o.unstable_batchedUpdates)((()=>{null==e||e(a),y({type:"onDragMove",event:a})}))}),[he.x,he.y]),(0,i.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=X.current;if(!e||null==O.current||!t||!i)return;const{onDragOver:a}=L.current,s=r.get(fe),l=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,c={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:l};(0,o.unstable_batchedUpdates)((()=>{ve(l),null==a||a(c),y({type:"onDragOver",event:c})}))}),[fe]),mP((()=>{X.current={activatorEvent:D,active:T,activeNode:H,collisionRect:pe,collisions:me,droppableRects:B,draggableNodes:N,draggingNode:Z,draggingNodeRect:ee,droppableContainers:E,over:ge,scrollableAncestors:ae,scrollAdjustedTranslate:he},A.current={initial:ee,translated:pe}}),[T,H,me,pe,N,Z,ee,B,E,ge,ae,he]),qM(We(We({},G),{},{delta:S,draggingRect:pe,pointerCoordinates:le,scrollableAncestors:ae,scrollableAncestorRects:se}));const ke=(0,i.useMemo)((()=>({active:T,activeNode:H,activeNodeRect:K,activatorEvent:D,collisions:me,containerNodeRect:Y,dragOverlay:$,draggableNodes:N,droppableContainers:E,droppableRects:B,over:ge,measureDroppableContainers:U,scrollableAncestors:ae,scrollableAncestorRects:se,measuringConfiguration:z,measuringScheduled:W,windowRect:ie})),[T,H,K,D,me,Y,$,N,E,B,ge,U,ae,se,z,W,ie]),je=(0,i.useMemo)((()=>({activatorEvent:D,activators:_e,active:T,activeNodeRect:K,ariaDescribedById:{draggable:I},dispatch:b,draggableNodes:N,over:ge,measureDroppableContainers:U})),[D,_e,T,K,b,I,N,ge,U]);return i.createElement(RP.Provider,{value:x},i.createElement(sD.Provider,{value:je},i.createElement(oD.Provider,{value:ke},i.createElement(hD.Provider,{value:be},d)),i.createElement(dD,{disabled:!1===(null==l?void 0:l.restoreFocus)})),i.createElement(FP,We(We({},l),{},{hiddenTextDescribedById:I})))})),fD=(0,i.createContext)(null),gD="button";function vD(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const s=wP("Draggable"),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:p}=(0,i.useContext)(sD),{role:m=gD,roleDescription:f="draggable",tabIndex:g=0}=null!=a?a:{},v=(null==c?void 0:c.id)===t,b=(0,i.useContext)(v?hD:fD),[y,x]=bP(),[w,_]=bP(),k=function(e,t){return(0,i.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e}),{})),[e,t])}(o,t),j=gP(n);mP((()=>(h.set(t,{id:t,key:s,node:y,activatorNode:w,data:j}),()=>{const e=h.get(t);e&&e.key===s&&h.delete(t)})),[h,t]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:(0,i.useMemo)((()=>({role:m,tabIndex:g,"aria-disabled":r,"aria-pressed":!(!v||m!==gD)||void 0,"aria-roledescription":f,"aria-describedby":u.draggable})),[r,m,g,v,f,u.draggable]),isDragging:v,listeners:r?void 0:k,node:y,over:p,setNodeRef:x,setActivatorNodeRef:_,transform:b}}function bD(){return(0,i.useContext)(oD)}const yD={timeout:25};function xD(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function wD(e,t){return e.reduce(((e,n,r)=>{const i=t.get(n);return i&&(e[r]=i),e}),Array(e.length))}function _D(e){return null!==e&&e>=0}const kD=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const a=xD(t,r,n),s=t[i],o=a[i];return o&&s?{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}:null},jD={scaleX:1,scaleY:1},ND=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:a,overIndex:s}=e;const o=null!=(t=a[n])?t:r;if(!o)return null;if(i===n){const e=a[s];return e?We({x:0,y:n<s?e.top+e.height-(o.top+o.height):e.top-o.top},jD):null}const l=function(e,t,n){const r=e[t],i=e[t-1],a=e[t+1];if(!r)return 0;if(n<t)return i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0;return a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0}(a,i,n);return We(i>n&&i<=s?{x:0,y:-o.height-l}:i<n&&i>=s?{x:0,y:o.height+l}:{x:0,y:0},jD)};const SD="Sortable",ED=i.createContext({activeIndex:-1,containerId:SD,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:kD,disabled:{draggable:!1,droppable:!1}});function CD(e){let{children:t,id:n,items:r,strategy:a=kD,disabled:s=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=bD(),h=wP(SD,n),p=Boolean(null!==l.rect),m=(0,i.useMemo)((()=>r.map((e=>"object"===typeof e&&"id"in e?e.id:e))),[r]),f=null!=o,g=o?m.indexOf(o.id):-1,v=d?m.indexOf(d.id):-1,b=(0,i.useRef)(m),y=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(m,b.current),x=-1!==v&&-1===g||y,w=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(s);mP((()=>{y&&f&&u(m)}),[y,m,f,u]),(0,i.useEffect)((()=>{b.current=m}),[m]);const _=(0,i.useMemo)((()=>({activeIndex:g,containerId:h,disabled:w,disableTransforms:x,items:m,overIndex:v,useDragOverlay:p,sortedRects:wD(m,c),strategy:a})),[g,h,w.draggable,w.droppable,x,m,v,c,p,a]);return i.createElement(ED.Provider,{value:_},t)}const AD=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return xD(n,r,i).indexOf(t)},TD=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:a,newIndex:s,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((o===a||i!==s)&&(!!n||s!==i&&t===l))},OD={duration:200,easing:"ease"},PD="transform",MD=EP.Transition.toString({property:PD,duration:0,easing:"linear"}),DD={roleDescription:"sortable"};function RD(e){let{animateLayoutChanges:t=TD,attributes:n,disabled:r,data:a,getNewIndex:s=AD,id:o,strategy:l,resizeObserverConfig:c,transition:d=OD}=e;const{items:u,containerId:h,activeIndex:p,disabled:m,disableTransforms:f,sortedRects:g,overIndex:v,useDragOverlay:b,strategy:y}=(0,i.useContext)(ED),x=function(e,t){var n,r;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,m),w=u.indexOf(o),_=(0,i.useMemo)((()=>We({sortable:{containerId:h,index:w,items:u}},a)),[h,a,w,u]),k=(0,i.useMemo)((()=>u.slice(u.indexOf(o))),[u,o]),{rect:j,node:N,isOver:S,setNodeRef:E}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const s=wP("Droppable"),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=(0,i.useContext)(sD),u=(0,i.useRef)({disabled:n}),h=(0,i.useRef)(!1),p=(0,i.useRef)(null),m=(0,i.useRef)(null),{disabled:f,updateMeasurementsFor:g,timeout:v}=We(We({},yD),a),b=gP(null!=g?g:r),y=GM({callback:(0,i.useCallback)((()=>{h.current?(null!=m.current&&clearTimeout(m.current),m.current=setTimeout((()=>{d(Array.isArray(b.current)?b.current:[b.current]),m.current=null}),v)):h.current=!0}),[v]),disabled:f||!o}),x=(0,i.useCallback)(((e,t)=>{y&&(t&&(y.unobserve(t),h.current=!1),e&&y.observe(e))}),[y]),[w,_]=bP(x),k=gP(t);return(0,i.useEffect)((()=>{y&&w.current&&(y.disconnect(),h.current=!1,y.observe(w.current))}),[w,y]),(0,i.useEffect)((()=>(l({type:zP.RegisterDroppable,element:{id:r,key:s,disabled:n,node:w,rect:p,data:k}}),()=>l({type:zP.UnregisterDroppable,key:s,id:r}))),[r]),(0,i.useEffect)((()=>{n!==u.current.disabled&&(l({type:zP.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)}),[r,s,n,l]),{active:o,rect:p,isOver:(null==c?void 0:c.id)===r,node:w,over:c,setNodeRef:_}}({id:o,data:_,disabled:x.droppable,resizeObserverConfig:We({updateMeasurementsFor:k},c)}),{active:C,activatorEvent:A,activeNodeRect:T,attributes:O,setNodeRef:P,listeners:M,isDragging:D,over:R,setActivatorNodeRef:L,transform:I}=vD({id:o,data:_,attributes:We(We({},DD),n),disabled:x.draggable}),F=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(E,P),z=Boolean(C),q=z&&!f&&_D(p)&&_D(v),B=!b&&D,U=B&&q?I:null,W=q?null!=U?U:(null!=l?l:y)({rects:g,activeNodeRect:T,activeIndex:p,overIndex:v,index:w}):null,H=_D(p)&&_D(v)?s({id:o,items:u,activeIndex:p,overIndex:v}):w,V=null==C?void 0:C.id,G=(0,i.useRef)({activeId:V,items:u,newIndex:H,containerId:h}),Q=u!==G.current.items,K=t({active:C,containerId:h,isDragging:D,isSorting:z,id:o,index:w,items:u,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:d,wasDragging:null!=G.current.activeId}),Y=function(e){let{disabled:t,index:n,node:r,rect:a}=e;const[s,o]=(0,i.useState)(null),l=(0,i.useRef)(n);return mP((()=>{if(!t&&n!==l.current&&r.current){const e=a.current;if(e){const t=rM(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}n!==l.current&&(l.current=n)}),[t,n,r,a]),(0,i.useEffect)((()=>{s&&o(null)}),[s]),s}({disabled:!K,index:w,node:N,rect:j});return(0,i.useEffect)((()=>{z&&G.current.newIndex!==H&&(G.current.newIndex=H),h!==G.current.containerId&&(G.current.containerId=h),u!==G.current.items&&(G.current.items=u)}),[z,H,h,u]),(0,i.useEffect)((()=>{if(V===G.current.activeId)return;if(null!=V&&null==G.current.activeId)return void(G.current.activeId=V);const e=setTimeout((()=>{G.current.activeId=V}),50);return()=>clearTimeout(e)}),[V]),{active:C,activeIndex:p,attributes:O,data:_,rect:j,index:w,newIndex:H,items:u,isOver:S,isSorting:z,isDragging:D,listeners:M,node:N,overIndex:v,over:R,setNodeRef:F,setActivatorNodeRef:L,setDroppableNodeRef:E,setDraggableNodeRef:P,transform:null!=Y?Y:W,transition:function(){if(Y||Q&&G.current.newIndex===w)return MD;if(B&&!NP(A)||!d)return;if(z||K)return EP.Transition.toString(We(We({},d),{},{property:PD}));return}()}}function LD(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"===typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const ID=[jM.Down,jM.Right,jM.Up,jM.Left],FD=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:a,over:s,scrollableAncestors:o}}=t;if(ID.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];a.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const a=i.get(n.id);if(a)switch(e.code){case jM.Down:r.top<a.top&&t.push(n);break;case jM.Up:r.top>a.top&&t.push(n);break;case jM.Left:r.left>a.left&&t.push(n);break;case jM.Right:r.left<a.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=GP(t),a=[];for(const s of r){const{id:e}=s,t=n.get(e);if(t){const n=GP(t),r=i.reduce(((e,t,r)=>e+WP(n[r],t)),0),o=Number((r/4).toFixed(4));a.push({id:e,data:{droppableContainer:s,value:o}})}}return a.sort(HP)})({active:n,collisionRect:r,droppableRects:i,droppableContainers:t,pointerCoordinates:null});let c=QP(l,"id");if(c===(null==s?void 0:s.id)&&l.length>1&&(c=l[1].id),null!=c){const e=a.get(n.id),t=a.get(c),s=t?i.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&s&&e&&t){const n=aM(l).some(((e,t)=>o[t]!==e)),i=zD(e,t),a=function(e,t){if(!LD(e)||!LD(t))return!1;if(!zD(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!i?{x:0,y:0}:{x:a?r.width-s.width:0,y:a?r.height-s.height:0},d={x:s.left,y:s.top};return c.x&&c.y?d:jP(d,c)}}}};function zD(e,t){return!(!LD(e)||!LD(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const qD=["description_multilingual","name_multilingual"],BD=["title","description_multilingual","name_multilingual"],UD=["description_multilingual","name_multilingual"],WD=["title","description_multilingual","name_multilingual"],HD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={[t]:e},i={};return Object.entries(n).forEach((e=>{let[n,a]=e;n!==t&&a&&(r[n]=a.translated_text,i[n]={confidence:parseFloat(a.confidence_score)||.95,method:a.translation_method||"ai",translated_at:a.created_at,human_reviewed:a.human_reviewed||!1,reviewed_by:a.reviewed_by,reviewed_at:a.reviewed_at})})),{source_lang:t,content:r,ai_metadata:i}},VD=async e=>{if(console.log("\ud83d\udd04 [ADAPTATION-DEBUG] Starting adaptation for workflow:",e),!e)return console.log("\u274c [ADAPTATION-DEBUG] No workflow provided, returning null"),null;if(e.title&&"object"===typeof e.title&&e.title.source_lang)return console.log("\u2705 [ADAPTATION-DEBUG] Workflow already in multilingual format, returning as-is"),e;console.log("\ud83d\udd04 [ADAPTATION-DEBUG] Converting legacy workflow to multilingual format..."),console.log("\ud83d\udd04 [ADAPTATION-DEBUG] Workflow ID:",e.id),console.log("\ud83d\udd04 [ADAPTATION-DEBUG] Workflow name:",e.name);const t=await(async e=>{try{if(console.log("\ud83d\udd0d [TRANSLATION-DEBUG] Starting fetchWorkflowTranslations for ID:",e),!e)return console.log("\ud83d\udd0d [TRANSLATION-DEBUG] No workflow ID provided, returning empty object"),{};console.log("\ud83d\udd0d [TRANSLATION-DEBUG] Calling workflowService.getWorkflowTranslations...");const t=await go(e);console.log("\ud83d\udd0d [TRANSLATION-DEBUG] Raw API response:",t),console.log("\ud83d\udd0d [TRANSLATION-DEBUG] Translations found:",t.translations);const n=t.translations||{},r={title:n.title||{},description:n.description||{},phases:{}};return Object.entries(n).forEach((e=>{let[t,n]=e;if(t.startsWith("phase_")){const e=t.match(/^phase_([^_]+)_(.+)$/);if(e){const[,t,i]=e;r.phases[t]||(r.phases[t]={}),r.phases[t][i]=n,console.log("\ud83d\udd0d [TRANSLATION-DEBUG] Grouped phase translation:",{phaseId:t,field:i,languages:Object.keys(n)})}}})),console.log("\ud83d\udd0d [TRANSLATION-DEBUG] Final grouped translations:",{workflow:{title:Object.keys(r.title),description:Object.keys(r.description)},phases:Object.keys(r.phases)}),r}catch(t){return console.error("\u274c [TRANSLATION-DEBUG] Failed to fetch workflow translations:",t),console.error("\u274c [TRANSLATION-DEBUG] Error details:",t.message,t.stack),{}}})(e.id);console.log("\ud83d\udd04 [ADAPTATION-DEBUG] Fetched translations:",t);const n=(e.workflow_phases||e.phases||[]).map((e=>{var n;const r=(null===(n=t.phases)||void 0===n?void 0:n[e.id])||{};return console.log("\ud83d\udd04 [ADAPTATION-DEBUG] Processing phase:",{id:e.id,name:e.name,hasTranslations:Object.keys(r).length>0,translationFields:Object.keys(r)}),We(We({},e),{},{name_multilingual:HD(e.name||"","en",r.name||{}),description_multilingual:HD(e.description||"","en",r.description||{}),name:e.name,description:e.description})})),r=We(We({},e),{},{phases:n,title:HD(e.name||"","en",t.title||{}),description_multilingual:HD(e.description||"","en",t.description||{}),source_language:"en",supported_languages:["en"],translation_status:Object.keys(t.title||{}).length>0?"partial":"source_only"});return console.log("\u2705 [ADAPTATION-DEBUG] Adapted workflow with translations:",{workflowId:e.id,titleTranslations:Object.keys(t.title||{}),descriptionTranslations:Object.keys(t.description||{}),adaptedTitle:r.title,adaptedDescription:r.description_multilingual}),r},GD=e=>{let{phase:t,index:n,activePhase:r,setActivePhase:i,updatePhase:a,deletePhase:s,addPhaseItem:o,updatePhaseItem:l,deletePhaseItem:c,handleDragEnd:d,handleCreateTrainingContent:u,handleLinkTrainingContent:h,sensors:p,t:m}=e;const{attributes:f,listeners:g,setNodeRef:v,transform:b,transition:y,isDragging:x}=RD({id:t.id}),w={transform:EP.Transform.toString(b),transition:y,opacity:x?.5:1};return(0,wo.jsxs)("div",{ref:v,style:w,className:"phase-card ".concat(r===t.id?"active":""),children:[(0,wo.jsxs)("div",{className:"phase-header",children:[(0,wo.jsx)("div",We(We(We({className:"phase-drag-handle"},f),g),{},{children:"\u22ee\u22ee"})),(0,wo.jsxs)("div",{className:"phase-info",children:[(0,wo.jsx)("span",{className:"phase-number",children:n+1}),(0,wo.jsxs)("div",{className:"phase-details",children:[(0,wo.jsx)("h3",{children:t.name}),(0,wo.jsx)("p",{children:t.description||m("no_description")})]})]}),(0,wo.jsxs)("div",{className:"phase-actions",children:[(0,wo.jsx)("button",{className:"btn btn-secondary",onClick:()=>i(r===t.id?null:t.id),children:r===t.id?m("collapse"):m("edit")}),(0,wo.jsx)("button",{className:"btn btn-danger",onClick:()=>s(t.id),children:m("delete")})]})]}),r===t.id&&(0,wo.jsxs)("div",{className:"phase-editor",children:[(0,wo.jsxs)("div",{className:"form-grid",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:m("phase_name")}),(0,wo.jsx)("input",{type:"text",value:t.name,onChange:e=>a(t.id,{name:e.target.value}),className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:m("phase_type")}),(0,wo.jsxs)("select",{value:t.type,onChange:e=>a(t.id,{type:e.target.value}),className:"form-select",children:[(0,wo.jsx)("option",{value:"content",children:m("content")}),(0,wo.jsx)("option",{value:"form",children:m("form")}),(0,wo.jsx)("option",{value:"quiz",children:m("quiz")}),(0,wo.jsx)("option",{value:"mixed",children:m("mixed")}),(0,wo.jsx)("option",{value:"approval",children:m("approval")})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:m("estimated_duration")}),(0,wo.jsx)("input",{type:"number",value:t.estimated_duration||2,onChange:e=>a(t.id,{estimated_duration:parseInt(e.target.value)}),className:"form-input",min:"0.5",max:"72",step:"0.5"})]}),(0,wo.jsx)("div",{className:"form-group",children:(0,wo.jsxs)("label",{className:"checkbox-label",children:[(0,wo.jsx)("input",{type:"checkbox",checked:t.required,onChange:e=>a(t.id,{required:e.target.checked})}),m("required_phase")]})})]}),(0,wo.jsxs)("div",{className:"form-group full-width",children:[(0,wo.jsx)("label",{children:m("phase_description")}),(0,wo.jsx)("textarea",{value:t.description,onChange:e=>a(t.id,{description:e.target.value}),className:"form-textarea",rows:2})]}),(0,wo.jsxs)("div",{className:"phase-items-section",children:[(0,wo.jsxs)("div",{className:"items-header",children:[(0,wo.jsx)("h4",{children:m("phase_items")}),(0,wo.jsx)("button",{className:"btn btn-secondary",onClick:()=>o(t.id),children:m("add_item")})]}),t.workflow_phase_items&&t.workflow_phase_items.length>0?(0,wo.jsx)(mD,{sensors:p,collisionDetection:YP,onDragEnd:e=>d(e,t.id),children:(0,wo.jsx)("div",{className:"items-list",children:(0,wo.jsx)(CD,{items:t.workflow_phase_items.sort(((e,t)=>(e.item_number||0)-(t.item_number||0))).map((e=>e.id)),strategy:ND,children:t.workflow_phase_items.sort(((e,t)=>(e.item_number||0)-(t.item_number||0))).map((e=>(0,wo.jsx)(QD,{item:e,phaseId:t.id,updatePhaseItem:l,deletePhaseItem:c,handleCreateTrainingContent:u,handleLinkTrainingContent:h,t:m},e.id)))})})}):(0,wo.jsxs)("div",{className:"empty-items",children:[(0,wo.jsx)("p",{children:m("no_items")}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>o(t.id),children:m("add_first_item")})]})]})]})]})},QD=e=>{let{item:t,phaseId:n,updatePhaseItem:r,deletePhaseItem:a,handleCreateTrainingContent:s,handleLinkTrainingContent:o,t:l}=e;console.log("\ud83d\udc1b [SORTABLE-ITEM] Handlers received:",{itemId:t.id,hasCreateHandler:"function"===typeof s,hasLinkHandler:"function"===typeof o,createHandler:s,linkHandler:o});const{attributes:c,listeners:d,setNodeRef:u,transform:h,transition:p,isDragging:m}=RD({id:t.id}),f={transform:EP.Transform.toString(h),transition:p,opacity:m?.5:1};return i.useEffect((()=>{console.log("\ud83d\udc1b [DND-DEBUG] SortableItem mounted:",{itemId:t.id,itemTitle:t.title,hasListeners:!!d,hasAttributes:!!c,isDragging:m})}),[t.id,m]),(0,wo.jsxs)("div",{ref:u,style:f,className:"item-card",children:[(0,wo.jsxs)("div",{className:"item-header",children:[(0,wo.jsx)("div",We(We(We({className:"drag-handle"},c),d),{},{onMouseDown:()=>console.log("\ud83d\udc1b [DND-DEBUG] Drag handle mouse down for item:",t.id),onClick:()=>console.log("\ud83d\udc1b [DND-DEBUG] Drag handle clicked for item:",t.id),children:"\u22ee\u22ee"})),(0,wo.jsx)("span",{className:"item-number",children:t.item_number||1}),(0,wo.jsxs)("div",{className:"item-info",children:[(0,wo.jsx)("h5",{children:t.title||l("untitled_item")}),(0,wo.jsx)("span",{className:"item-type",children:l(t.type)})]}),(0,wo.jsx)("button",{className:"btn btn-danger btn-small",onClick:()=>a(n,t.id),children:l("delete")})]}),(0,wo.jsxs)("div",{className:"item-editor",children:[(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:l("item_title")}),(0,wo.jsx)("input",{type:"text",value:t.title,onChange:e=>r(n,t.id,{title:e.target.value}),placeholder:l("item_title_placeholder"),className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:l("item_type")}),(0,wo.jsxs)("select",{value:t.type,onChange:e=>r(n,t.id,{type:e.target.value}),className:"form-select",children:[(0,wo.jsx)("option",{value:"content",children:l("content")}),(0,wo.jsx)("option",{value:"quiz",children:l("quiz")}),(0,wo.jsx)("option",{value:"upload",children:l("upload")}),(0,wo.jsx)("option",{value:"signature",children:l("signature")})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:l("content_text")}),(0,wo.jsx)(rP,{item:t,onUpdate:(e,t)=>r(n,e,t),onCreateTrainingContent:s,onLinkTrainingContent:o})]}),(0,wo.jsx)("div",{className:"form-group",children:(0,wo.jsxs)("label",{className:"checkbox-label",children:[(0,wo.jsx)("input",{type:"checkbox",checked:!1!==t.required,onChange:e=>r(n,t.id,{required:e.target.checked})}),l("required_item")]})})]})]})},KD=e=>{let{workflowData:t,onSave:n,onCancel:r}=e;const{t:a}=Ma(["flows","common"]),{user:s}=ko(),[o,l]=(0,i.useState)({name:"",slug:"",description:"",type:"onboarding",status:"draft",config:{},metadata:{},phases:[],title:{source_lang:"en",content:{},ai_metadata:{}},description_multilingual:{source_lang:"en",content:{},ai_metadata:{}},source_language:"en",supported_languages:["en"],translation_status:"source_only"}),[c,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),[f,g]=(0,i.useState)("workflow"),v=(0,i.useCallback)((async e=>{var r,i;if(null!==t&&void 0!==t&&t.id&&(null!==(r=e.name)&&void 0!==r&&r.trim()||(null===(i=e.phases)||void 0===i?void 0:i.length)>0)){console.log("\ud83d\udd04 [AUTO-SAVE] Auto-saving workflow changes...");const r=(e.phases||[]).map((e=>{const{description_multilingual:t,name_multilingual:n}=e;return Fo(e,qD)})),{title:i,description_multilingual:a,name_multilingual:s}=e,o=Fo(e,BD),l={name:e.name||t.name,slug:o.slug||e.slug,description:o.description||e.description,type:o.type||e.type,status:o.status||e.status,config:o.config||e.config,metadata:o.metadata||e.metadata,workflow_phases:r};return n(t.id,l,{autoSave:!0})}}),[null===t||void 0===t?void 0:t.id,n]),{saveStatus:b,lastSaved:y,hasUnsavedChanges:x,forceSave:w}=iP(o,v,5e3,!c&&(null===t||void 0===t?void 0:t.id)),_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(BP(DM,{activationConstraint:{distance:8}}),BP(AM,{coordinateGetter:FD}));(0,i.useEffect)((()=>{console.log("\ud83d\udc1b [DND-DEBUG] Checking @dnd-kit imports..."),console.log("\ud83d\udc1b [DND-DEBUG] DndContext available:",!!mD),console.log("\ud83d\udc1b [DND-DEBUG] useSortable available:",!!RD),console.log("\ud83d\udc1b [DND-DEBUG] arrayMove available:",!!xD),console.log("\ud83d\udc1b [DND-DEBUG] Sensors configured:",_.length,"sensors")}),[]),(0,i.useEffect)((()=>{(async()=>{if(t){m(!0);try{const e=await VD(t);l(e),console.log("\u2705 Workflow adapted to multilingual format:",e)}catch(e){console.error("\u274c Failed to adapt workflow to multilingual format:",e),l(We(We({},t),{},{phases:t.workflow_phases||[],title:{source_lang:"en",content:{en:t.name||""},ai_metadata:{}},description_multilingual:{source_lang:"en",content:{en:t.description||""},ai_metadata:{}}}))}finally{m(!1)}}})()}),[t]);const k=()=>{const e={id:"temp-".concat(Date.now()),phase_number:o.phases.length+1,name:"".concat(a("phase")," ").concat(o.phases.length+1),description:"",type:"content",config:{},required:!0,estimated_duration:2,workflow_phase_items:[]};l((t=>We(We({},t),{},{phases:[...t.phases,e]}))),h(e.id)},j=(e,t)=>{l((n=>We(We({},n),{},{phases:n.phases.map((n=>n.id===e?We(We({},n),t):n))})))},N=e=>{window.confirm(a("delete_phase_confirm"))&&(l((t=>We(We({},t),{},{phases:t.phases.filter((t=>t.id!==e))}))),u===e&&h(null))},S=e=>{const t=o.phases.find((t=>t.id===e));if(!t)return;const n=t.workflow_phase_items||[],r=n.length>0?Math.max(...n.map((e=>e.item_number||0))):0,i={id:"temp-item-".concat(Date.now()),item_number:r+1,type:"content",title:"".concat(a("item")," ").concat(r+1),content:{value:""},required:!0};j(e,{workflow_phase_items:[...n,i]})},E=(e,t,n)=>{const r=o.phases.find((t=>t.id===e));r&&j(e,{workflow_phase_items:r.workflow_phase_items.map((e=>e.id===t?We(We({},e),n):e))})},C=async(e,t)=>{console.log("\ud83c\udfaf [FLOW-EDITOR] handleCreateTrainingContent called with:",{itemId:e,trainingContent:t});try{const n=await vo(e,t);if(!n.success)throw new Error(n.error||"Failed to create training content");{rn.success("Training content created successfully");const r=o.phases.find((t=>{var n;return null===(n=t.workflow_phase_items)||void 0===n?void 0:n.some((t=>t.id===e))}));r&&E(r.id,e,{content_source:"training_phase",training_phase_id:n.training_phase_id,training_item_number:"01",enriched_content:t})}}catch(n){console.error("Error creating training content:",n),rn.error("Failed to create training content: "+n.message)}},A=async(e,t,n)=>{try{const r=await bo(e,t,n);if(!r.success)throw new Error(r.error||"Failed to link training content");{rn.success("Training content linked successfully");const r=o.phases.find((t=>{var n;return null===(n=t.workflow_phase_items)||void 0===n?void 0:n.some((t=>t.id===e))}));r&&E(r.id,e,{content_source:"training_phase",training_phase_id:t,training_item_number:n})}}catch(r){console.error("Error linking training content:",r),rn.error("Failed to link training content: "+r.message)}},T=(e,t)=>{if(!window.confirm(a("delete_item_confirm")))return;const n=o.phases.find((t=>t.id===e));if(!n)return;const r=(n.workflow_phase_items||[]).filter((e=>e.id!==t));j(e,{workflow_phase_items:r})},O=(e,t)=>{var n,r;console.log("\ud83d\udc1b [DND-DEBUG] handleDragEnd called with:",{activeId:null===(n=e.active)||void 0===n?void 0:n.id,overId:null===(r=e.over)||void 0===r?void 0:r.id,phaseId:t,hasActiveAndOver:!(!e.active||!e.over)});const{active:i,over:a}=e;if(i.id!==(null===a||void 0===a?void 0:a.id)){const e=o.phases.find((e=>e.id===t));if(!e)return void console.log("\ud83d\udc1b [DND-DEBUG] Phase not found for ID:",t);const n=e.workflow_phase_items||[],r=n.findIndex((e=>e.id===i.id)),s=n.findIndex((e=>e.id===a.id));if(console.log("\ud83d\udc1b [DND-DEBUG] Reordering items:",{itemCount:n.length,oldIndex:r,newIndex:s,activeId:i.id,overId:a.id}),-1!==r&&-1!==s){const e=xD(n,r,s).map(((e,t)=>We(We({},e),{},{item_number:t+1})));console.log("\ud83d\udc1b [DND-DEBUG] Items reordered successfully:",{originalOrder:n.map((e=>e.id)),newOrder:e.map((e=>e.id))}),j(t,{workflow_phase_items:e})}else console.log("\ud83d\udc1b [DND-DEBUG] Invalid indices for reordering:",{oldIndex:r,newIndex:s})}else console.log("\ud83d\udc1b [DND-DEBUG] No reordering needed - same position")};return console.log("\ud83d\udc1b [FLOW-EDITOR] Handlers defined:",{hasCreateHandler:!0,hasLinkHandler:!0}),(0,wo.jsxs)("div",{className:"flow-editor",children:[(0,wo.jsxs)("div",{className:"editor-header",children:[(0,wo.jsxs)("div",{className:"header-content",children:[(0,wo.jsx)("h1",{children:null!==t&&void 0!==t&&t.id?a("edit_workflow"):a("create_workflow")}),(0,wo.jsx)("p",{children:a("editor_description")}),(null===t||void 0===t?void 0:t.id)&&(0,wo.jsx)(aP,{saveStatus:b,lastSaved:y,hasUnsavedChanges:x})]}),(0,wo.jsxs)("div",{className:"header-actions",children:[(0,wo.jsx)("button",{className:"btn btn-secondary",onClick:r,disabled:c,children:a("common:cancel")}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:async()=>{const e=(null===t||void 0===t?void 0:t.name)||o.name;if(e.trim())if(o.slug.trim()){d(!0);try{const i=(o.phases||[]).map((e=>{const{description_multilingual:t,name_multilingual:n}=e;return Fo(e,UD)})),{title:a,description_multilingual:s,name_multilingual:l}=o,c=Fo(o,WD),d={name:e,slug:c.slug||o.slug,description:c.description||o.description,type:c.type||o.type,status:c.status||o.status,config:c.config||o.config,metadata:c.metadata||o.metadata,workflow_phases:i};console.log("\ud83d\udcbe [SAVE] Saving workflow with phases:",{workflowId:null===t||void 0===t?void 0:t.id,phaseCount:d.workflow_phases.length,phases:d.workflow_phases.map((e=>({id:e.id,name:e.name,type:e.type})))}),null!==t&&void 0!==t&&t.id?await n(t.id,d):await n(d),r()}catch(i){console.error("Failed to save workflow:",i)}finally{d(!1)}}else rn.error(a("validation.slug_required"));else rn.error(a("validation.name_required"))},disabled:c,children:a(c?"common:saving":"common:save")})]})]}),(0,wo.jsxs)("div",{className:"editor-tabs",children:[(0,wo.jsxs)("button",{className:"tab-button ".concat("workflow"===f?"active":""),onClick:()=>g("workflow"),children:["\u2699\ufe0f ",a("workflow_settings")]}),(0,wo.jsxs)("button",{className:"tab-button ".concat("phases"===f?"active":""),onClick:()=>g("phases"),children:["\ud83d\udccb ",a("phases")]}),(0,wo.jsxs)("button",{className:"tab-button ".concat("pdf-output"===f?"active":""),onClick:()=>g("pdf-output"),children:["\ud83d\udcc4 ",a("pdf_output.pdf_output_configuration")]})]}),(0,wo.jsxs)("div",{className:"editor-content",children:["workflow"===f&&(0,wo.jsxs)("div",{className:"workflow-settings",children:[(0,wo.jsx)("h2",{children:a("workflow_settings")}),(0,wo.jsxs)("div",{className:"form-grid",children:[(0,wo.jsxs)("div",{className:"form-group full-width",children:[(0,wo.jsx)("label",{children:a("workflow_name")}),(0,wo.jsxs)("div",{className:"workflow-name-display",children:[(0,wo.jsx)("strong",{children:(null===t||void 0===t?void 0:t.name)||o.name}),(0,wo.jsx)("span",{className:"name-help-text",children:a("workflow_name_set_in_wizard")})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:a("workflow_slug")}),(0,wo.jsx)("input",{type:"text",value:o.slug,onChange:e=>l((t=>We(We({},t),{},{slug:e.target.value}))),placeholder:a("workflow_slug_placeholder"),className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:a("workflow_type")}),(0,wo.jsxs)("select",{value:o.type,onChange:e=>l((t=>We(We({},t),{},{type:e.target.value}))),className:"form-select",children:[(0,wo.jsx)("option",{value:"onboarding",children:a("onboarding")}),(0,wo.jsx)("option",{value:"training",children:a("training")}),(0,wo.jsx)("option",{value:"assessment",children:a("assessment")}),(0,wo.jsx)("option",{value:"certification",children:a("certification")}),(0,wo.jsx)("option",{value:"compliance",children:a("compliance")})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:a("workflow_status")}),(0,wo.jsxs)("select",{value:o.status,onChange:e=>l((t=>We(We({},t),{},{status:e.target.value}))),className:"form-select",children:[(0,wo.jsx)("option",{value:"draft",children:a("draft")}),(0,wo.jsx)("option",{value:"active",children:a("active")}),(0,wo.jsx)("option",{value:"archived",children:a("archived")})]})]})]}),(0,wo.jsxs)("div",{className:"form-group full-width",children:[(0,wo.jsx)("label",{children:a("workflow_description")}),p?(0,wo.jsxs)("div",{className:"loading-translations",children:[(0,wo.jsx)("div",{className:"loading-spinner"}),(0,wo.jsx)("span",{children:"Loading existing translations..."})]}):(0,wo.jsx)(JO,{fieldName:"description",value:o.description_multilingual,onChange:e=>((e,t)=>{l((n=>We(We({},n),{},{[e]:t})))})("description_multilingual",e),placeholder:a("workflow_description_placeholder"),editorType:"textarea",autoTranslate:!0,targetLanguages:["en","nl","de","fr","es"].filter((e=>e!==((null===s||void 0===s?void 0:s.preferredLanguage)||"en")))})]})]}),"phases"===f&&(0,wo.jsxs)("div",{className:"phases-section",children:[(0,wo.jsxs)("div",{className:"section-header",children:[(0,wo.jsx)("h2",{children:a("phases")}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:k,children:a("add_phase")})]}),0===o.phases.length?(0,wo.jsxs)("div",{className:"empty-phases",children:[(0,wo.jsx)("p",{children:a("no_phases")}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:k,children:a("add_first_phase")})]}):(0,wo.jsx)(mD,{sensors:_,collisionDetection:YP,onDragEnd:e=>{var t,n;console.log("\ud83d\udc1b [DND-DEBUG] handlePhaseDragEnd called with:",{activeId:null===(t=e.active)||void 0===t?void 0:t.id,overId:null===(n=e.over)||void 0===n?void 0:n.id,hasActiveAndOver:!(!e.active||!e.over)});const{active:r,over:i}=e;if(r.id!==(null===i||void 0===i?void 0:i.id)){const e=o.phases.findIndex((e=>e.id===r.id)),t=o.phases.findIndex((e=>e.id===i.id));if(console.log("\ud83d\udc1b [DND-DEBUG] Reordering phases:",{phaseCount:o.phases.length,oldIndex:e,newIndex:t,activeId:r.id,overId:i.id}),-1!==e&&-1!==t){const n=xD(o.phases,e,t).map(((e,t)=>We(We({},e),{},{phase_number:t+1})));console.log("\ud83d\udc1b [DND-DEBUG] Phases reordered successfully:",{originalOrder:o.phases.map((e=>e.id)),newOrder:n.map((e=>e.id))}),l((e=>We(We({},e),{},{phases:n})))}else console.log("\ud83d\udc1b [DND-DEBUG] Invalid indices for phase reordering:",{oldIndex:e,newIndex:t})}else console.log("\ud83d\udc1b [DND-DEBUG] No phase reordering needed - same position")},children:(0,wo.jsx)("div",{className:"phases-list",children:(0,wo.jsx)(CD,{items:o.phases.map((e=>e.id)),strategy:ND,children:o.phases.map(((e,t)=>(0,wo.jsx)(GD,{phase:e,index:t,activePhase:u,setActivePhase:h,updatePhase:j,deletePhase:N,addPhaseItem:S,updatePhaseItem:E,deletePhaseItem:T,handleDragEnd:O,handleCreateTrainingContent:C,handleLinkTrainingContent:A,sensors:_,t:a},e.id)))})})})]}),"pdf-output"===f&&(0,wo.jsx)(eP,{workflow:o,onConfigUpdate:e=>{l((t=>We(We({},t),{},{config:e})))}})]})]})},YD=e=>{var t,n,r,a;let{onComplete:s,onCancel:o}=e;const{t:l}=Ma(["flows","common"]),[c,d]=(0,i.useState)(1),[u,h]=(0,i.useState)({name:"",slug:"",description:"",type:"onboarding",template:"blank"}),p=[{id:"blank",name:l("templates.blank"),description:l("templates.blank_description"),phases:[]},{id:"onboarding",name:l("templates.onboarding"),description:l("templates.onboarding_description"),phases:[{name:l("template_phases.welcome_introduction"),type:"content"},{name:l("template_phases.safety_training"),type:"mixed"},{name:l("template_phases.company_policies"),type:"content"},{name:l("template_phases.skills_assessment"),type:"quiz"},{name:l("template_phases.final_review"),type:"approval"}]},{id:"training",name:l("templates.training"),description:l("templates.training_description"),phases:[{name:l("template_phases.course_introduction"),type:"content"},{name:l("template_phases.learning_materials"),type:"content"},{name:l("template_phases.practical_exercises"),type:"form"},{name:l("template_phases.knowledge_test"),type:"quiz"}]},{id:"assessment",name:l("templates.assessment"),description:l("templates.assessment_description"),phases:[{name:l("template_phases.pre_assessment"),type:"form"},{name:l("template_phases.competency_test"),type:"quiz"},{name:l("template_phases.performance_review"),type:"approval"}]}],m=e=>e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").trim();return(0,wo.jsx)("div",{className:"flow-wizard-overlay",children:(0,wo.jsxs)("div",{className:"flow-wizard",children:[(0,wo.jsxs)("div",{className:"wizard-header",children:[(0,wo.jsx)("h2",{children:l("wizard.title")}),(0,wo.jsx)("button",{className:"close-button",onClick:o,children:(0,wo.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,wo.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,wo.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,wo.jsx)("div",{className:"wizard-progress",children:(0,wo.jsxs)("div",{className:"progress-steps",children:[(0,wo.jsxs)("div",{className:"progress-step ".concat(c>=1?"active":""),children:[(0,wo.jsx)("span",{children:"1"}),(0,wo.jsx)("label",{children:l("wizard.step1")})]}),(0,wo.jsxs)("div",{className:"progress-step ".concat(c>=2?"active":""),children:[(0,wo.jsx)("span",{children:"2"}),(0,wo.jsx)("label",{children:l("wizard.step2")})]}),(0,wo.jsxs)("div",{className:"progress-step ".concat(c>=3?"active":""),children:[(0,wo.jsx)("span",{children:"3"}),(0,wo.jsx)("label",{children:l("wizard.step3")})]})]})}),(0,wo.jsxs)("div",{className:"wizard-content",children:[1===c&&(0,wo.jsxs)("div",{className:"wizard-step",children:[(0,wo.jsx)("h3",{children:l("wizard.basic_info")}),(0,wo.jsx)("p",{children:l("wizard.basic_info_description")}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:l("workflow_name")}),(0,wo.jsx)("input",{type:"text",value:u.name,onChange:e=>{return t=e.target.value,void h((e=>We(We({},e),{},{name:t,slug:m(t)})));var t},placeholder:l("workflow_name_placeholder"),className:"form-input",autoFocus:!0})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:l("workflow_slug")}),(0,wo.jsx)("input",{type:"text",value:u.slug,onChange:e=>h((t=>We(We({},t),{},{slug:e.target.value}))),placeholder:l("workflow_slug_placeholder"),className:"form-input"})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:l("workflow_type")}),(0,wo.jsxs)("select",{value:u.type,onChange:e=>h((t=>We(We({},t),{},{type:e.target.value}))),className:"form-select",children:[(0,wo.jsx)("option",{value:"onboarding",children:l("onboarding")}),(0,wo.jsx)("option",{value:"training",children:l("training")}),(0,wo.jsx)("option",{value:"assessment",children:l("assessment")}),(0,wo.jsx)("option",{value:"certification",children:l("certification")}),(0,wo.jsx)("option",{value:"compliance",children:l("compliance")})]})]}),(0,wo.jsxs)("div",{className:"form-group",children:[(0,wo.jsx)("label",{children:l("workflow_description")}),(0,wo.jsx)("textarea",{value:u.description,onChange:e=>h((t=>We(We({},t),{},{description:e.target.value}))),placeholder:l("workflow_description_placeholder"),className:"form-textarea",rows:3})]})]}),2===c&&(0,wo.jsxs)("div",{className:"wizard-step",children:[(0,wo.jsx)("h3",{children:l("wizard.choose_template")}),(0,wo.jsx)("p",{children:l("wizard.template_description")}),(0,wo.jsx)("div",{className:"templates-grid",children:p.map((e=>(0,wo.jsxs)("div",{className:"template-card ".concat(u.template===e.id?"selected":""),onClick:()=>h((t=>We(We({},t),{},{template:e.id}))),children:[(0,wo.jsxs)("div",{className:"template-header",children:[(0,wo.jsx)("h4",{children:e.name}),(0,wo.jsx)("div",{className:"template-radio",children:(0,wo.jsx)("input",{type:"radio",checked:u.template===e.id,onChange:()=>h((t=>We(We({},t),{},{template:e.id})))})})]}),(0,wo.jsx)("p",{children:e.description}),e.phases.length>0&&(0,wo.jsxs)("div",{className:"template-phases",children:[(0,wo.jsxs)("span",{className:"phases-label",children:[l("phases"),":"]}),(0,wo.jsx)("ul",{children:e.phases.map(((e,t)=>(0,wo.jsx)("li",{children:e.name},t)))})]})]},e.id)))})]}),3===c&&(0,wo.jsxs)("div",{className:"wizard-step",children:[(0,wo.jsx)("h3",{children:l("wizard.review")}),(0,wo.jsx)("p",{children:l("wizard.review_description")}),(0,wo.jsxs)("div",{className:"review-section",children:[(0,wo.jsxs)("div",{className:"review-item",children:[(0,wo.jsx)("label",{children:l("workflow_name")}),(0,wo.jsx)("span",{children:u.name})]}),(0,wo.jsxs)("div",{className:"review-item",children:[(0,wo.jsx)("label",{children:l("workflow_slug")}),(0,wo.jsx)("span",{children:u.slug})]}),(0,wo.jsxs)("div",{className:"review-item",children:[(0,wo.jsx)("label",{children:l("workflow_type")}),(0,wo.jsx)("span",{children:l(u.type)})]}),(0,wo.jsxs)("div",{className:"review-item",children:[(0,wo.jsx)("label",{children:l("template")}),(0,wo.jsx)("span",{children:null===(t=p.find((e=>e.id===u.template)))||void 0===t?void 0:t.name})]}),u.description&&(0,wo.jsxs)("div",{className:"review-item",children:[(0,wo.jsx)("label",{children:l("workflow_description")}),(0,wo.jsx)("span",{children:u.description})]}),(null===(n=p.find((e=>e.id===u.template)))||void 0===n?void 0:n.phases.length)>0&&(0,wo.jsxs)("div",{className:"review-item",children:[(0,wo.jsxs)("label",{children:[l("phases")," (",null===(r=p.find((e=>e.id===u.template)))||void 0===r?void 0:r.phases.length,")"]}),(0,wo.jsx)("ul",{className:"phases-preview",children:null===(a=p.find((e=>e.id===u.template)))||void 0===a?void 0:a.phases.map(((e,t)=>(0,wo.jsxs)("li",{children:[(0,wo.jsx)("span",{className:"phase-number",children:t+1}),(0,wo.jsx)("span",{className:"phase-name",children:e.name}),(0,wo.jsxs)("span",{className:"phase-type",children:["(",l(e.type),")"]})]},t)))})]})]})]})]}),(0,wo.jsx)("div",{className:"wizard-footer",children:(0,wo.jsxs)("div",{className:"footer-actions",children:[(0,wo.jsx)("button",{className:"btn btn-secondary",onClick:1===c?o:()=>{c>1&&d(c-1)},children:l(1===c?"common:cancel":"wizard.previous")}),c<3?(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(1===c){if(!u.name.trim())return void rn.error(l("validation.name_required"));d(2)}else 2===c&&d(3)},children:l("wizard.next")}):(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>{const e=p.find((e=>e.id===u.template)),t={name:u.name,slug:u.slug,description:u.description,type:u.type,status:"draft",config:{template_used:u.template,created_via_wizard:!0},metadata:{template_name:e.name,created_date:(new Date).toISOString()},workflow_phases:e.phases.map(((e,t)=>({id:"temp-".concat(t+1),phase_number:t+1,name:e.name,description:"",type:e.type,config:{},required:!0,estimated_duration:30,workflow_phase_items:[]})))};s(t)},children:l("wizard.create_workflow")})]})})]})})},XD=()=>{const{user:e}=ko(),{t:t}=Ma(["flows","common","api"]),[n,r]=(0,i.useState)("workflows"),[a,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)([]),[c,d]=(0,i.useState)(null),[u,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)("all"),[f,g]=(0,i.useState)("active"),[v,b]=(0,i.useState)(null),[y,x]=(0,i.useState)(null),w=(0,i.useCallback)((()=>{var t;return!!e&&("admin"===e.role||"manager"===e.role&&(null===(t=e.permissions)||void 0===t?void 0:t.includes("content_edit")))}),[e]),_=(0,i.useCallback)((async()=>{if(w()){s(!0);try{const e={};"all"!==p&&(e.type=p),"all"!==f&&(e.status=f),"active"===f&&(e.active_only=!0);const t=await uo(e);l(t||[])}catch(e){console.error("Failed to load workflows:",e),rn.error(t("load_failed"))}finally{s(!1)}}}),[w,p,f,t]),k=(0,i.useCallback)((async e=>{try{const n=await ho(e);return l((e=>[n,...e])),rn.success(t("create_success")),n}catch(n){throw console.error("Failed to create workflow:",n),rn.error(t("create_failed")),n}}),[t]),j=(0,i.useCallback)((async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var i;const a=r.autoSave;a?console.log("\ud83d\udd04 [AUTO-SAVE] Auto-saving workflow:",e):console.log("\ud83d\udd04 [FLOWS-EDITOR] Updating workflow:",e),console.log("\ud83d\udd04 [FLOWS-EDITOR] Workflow data:",We(We({},n),{},{workflow_phases:n.workflow_phases?"".concat(n.workflow_phases.length," phases"):"no phases"}));const s=await po(e,n);return console.log("\u2705 [FLOWS-EDITOR] Updated workflow received:",{id:s.id,name:s.name,phaseCount:(null===(i=s.workflow_phases)||void 0===i?void 0:i.length)||0}),l((t=>t.map((t=>t.id===e?s:t)))),a||rn.success(t("update_success")),s}catch(a){throw console.error("Failed to update workflow:",a),r.autoSave||rn.error(t("update_failed")),a}}),[t]),N=(0,i.useCallback)((async e=>{if(window.confirm(t("delete_confirm")))try{await mo(e),l((t=>t.filter((t=>t.id!==e)))),rn.success(t("delete_success"))}catch(n){console.error("Failed to delete workflow:",n),rn.error(t("delete_failed"))}}),[t]),S=(0,i.useCallback)((async e=>{const n={name:"".concat(e.name," ").concat(t("copy_suffix")),slug:"".concat(e.slug,"-copy-").concat(Date.now()),description:e.description,type:e.type,config:e.config,metadata:We(We({},e.metadata),{},{duplicated_from:e.id})};try{await k(n)}catch(r){console.error("Failed to duplicate workflow:",r)}}),[k]),E=(0,i.useCallback)((async e=>{x(e.id);try{await fo(e.slug,["nl","de"]);await _(),rn.success(t("translation_success"))}catch(n){console.error("Failed to translate workflow:",n),rn.error(t("translation_failed"))}finally{x(null),b(null)}}),[_,t]);return(0,i.useEffect)((()=>{_()}),[_]),(0,i.useEffect)((()=>{const e=e=>{v&&!e.target.closest(".card-menu")&&b(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[v]),w()?null!==c?(0,wo.jsxs)("div",{className:"flows-editor-page",children:[(0,wo.jsx)(qO,{pageName:"flows-editor",requiresDesktop:!0,minWidth:1200}),(0,wo.jsx)(KD,{workflowData:c,onSave:c.id?j:k,onCancel:()=>d(null)})]}):(0,wo.jsxs)("div",{className:"flows-editor-page",children:[(0,wo.jsx)(qO,{pageName:"flows-editor",requiresDesktop:!0,minWidth:1200}),(0,wo.jsxs)("div",{className:"page-header",children:[(0,wo.jsxs)("div",{className:"header-content",children:[(0,wo.jsx)("h1",{children:t("title")}),(0,wo.jsx)("p",{children:t("description")})]}),(0,wo.jsx)("div",{className:"header-actions",children:(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>h(!0),children:t("create_new")})})]}),(0,wo.jsxs)("div",{className:"filters-section",children:[(0,wo.jsxs)("div",{className:"filter-group",children:[(0,wo.jsx)("label",{children:t("filter_type")}),(0,wo.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"filter-select",children:[(0,wo.jsx)("option",{value:"all",children:t("all_types")}),(0,wo.jsx)("option",{value:"onboarding",children:t("onboarding")}),(0,wo.jsx)("option",{value:"training",children:t("training")}),(0,wo.jsx)("option",{value:"assessment",children:t("assessment")}),(0,wo.jsx)("option",{value:"certification",children:t("certification")}),(0,wo.jsx)("option",{value:"compliance",children:t("compliance")})]})]}),(0,wo.jsxs)("div",{className:"filter-group",children:[(0,wo.jsx)("label",{children:t("filter_status")}),(0,wo.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"filter-select",children:[(0,wo.jsx)("option",{value:"all",children:t("all_statuses")}),(0,wo.jsx)("option",{value:"active",children:t("active")}),(0,wo.jsx)("option",{value:"draft",children:t("draft")}),(0,wo.jsx)("option",{value:"archived",children:t("archived")})]})]})]}),a?(0,wo.jsxs)("div",{className:"loading-state",children:[(0,wo.jsx)("div",{className:"spinner"}),(0,wo.jsx)("p",{children:t("common:loading.content")})]}):(0,wo.jsx)("div",{className:"workflows-section",children:0===o.length?(0,wo.jsxs)("div",{className:"empty-state",children:[(0,wo.jsx)("div",{className:"empty-icon",children:(0,wo.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[(0,wo.jsx)("path",{d:"M12 2L2 7L12 12L22 7L12 2Z"}),(0,wo.jsx)("path",{d:"M2 17L12 22L22 17"}),(0,wo.jsx)("path",{d:"M2 12L12 17L22 12"})]})}),(0,wo.jsx)("h3",{children:t("empty.title")}),(0,wo.jsx)("p",{children:t("empty.message")}),(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>h(!0),children:t("create_first")})]}):(0,wo.jsx)("div",{className:"workflows-grid",children:o.map((e=>{var n,r,i,a;return(0,wo.jsxs)("div",{className:"workflow-card",children:[(0,wo.jsxs)("div",{className:"card-header",children:[(0,wo.jsxs)("div",{className:"workflow-title",children:[(0,wo.jsx)("h3",{children:e.name}),(0,wo.jsxs)("div",{className:"workflow-badges",children:[(0,wo.jsx)("span",{className:"badge ".concat((a=e.type,{onboarding:"bg-blue-100 text-blue-800",training:"bg-green-100 text-green-800",assessment:"bg-purple-100 text-purple-800",certification:"bg-yellow-100 text-yellow-800",compliance:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800")),children:t(e.type)}),(0,wo.jsx)("span",{className:"badge ".concat((i=e.status,{active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-gray-100 text-gray-800"}[i]||"bg-gray-100 text-gray-800")),children:t(e.status)})]})]}),(0,wo.jsxs)("div",{className:"card-menu",children:[(0,wo.jsx)("button",{className:"menu-button",onClick:()=>b(v===e.id?null:e.id),children:(0,wo.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,wo.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,wo.jsx)("circle",{cx:"12",cy:"5",r:"1"}),(0,wo.jsx)("circle",{cx:"12",cy:"19",r:"1"})]})}),v===e.id&&(0,wo.jsxs)("div",{className:"dropdown-menu",children:[(0,wo.jsx)("button",{className:"dropdown-item",onClick:()=>E(e),disabled:y===e.id,children:y===e.id?t("translating"):t("translate")}),(0,wo.jsx)("button",{className:"dropdown-item",onClick:()=>{S(e),b(null)},children:t("duplicate")}),"active"!==e.status&&(0,wo.jsx)("button",{className:"dropdown-item danger",onClick:()=>{N(e.id),b(null)},children:t("delete")})]})]})]}),(0,wo.jsxs)("div",{className:"card-content",children:[(0,wo.jsx)("p",{children:e.description||t("no_description")}),(0,wo.jsxs)("div",{className:"workflow-stats",children:[(0,wo.jsxs)("div",{className:"stat",children:[(0,wo.jsx)("span",{className:"stat-label",children:t("phases")}),(0,wo.jsx)("span",{className:"stat-value",children:(null===(n=e.workflow_phases)||void 0===n?void 0:n.length)||0})]}),(0,wo.jsxs)("div",{className:"stat",children:[(0,wo.jsx)("span",{className:"stat-label",children:t("items")}),(0,wo.jsx)("span",{className:"stat-value",children:(null===(r=e.workflow_phases)||void 0===r?void 0:r.reduce(((e,t)=>{var n;return e+((null===(n=t.workflow_phase_items)||void 0===n?void 0:n.length)||0)}),0))||0})]}),(0,wo.jsxs)("div",{className:"stat",children:[(0,wo.jsx)("span",{className:"stat-label",children:t("version")}),(0,wo.jsxs)("span",{className:"stat-value",children:["v",e.version]})]})]})]}),(0,wo.jsx)("div",{className:"card-actions",children:(0,wo.jsx)("button",{className:"btn btn-primary",onClick:()=>d(e),children:t("edit")})})]},e.id)}))})}),u&&(0,wo.jsx)(YD,{onComplete:e=>{h(!1),d(e)},onCancel:()=>h(!1)})]}):(0,wo.jsx)("div",{className:"flows-editor-page",children:(0,wo.jsxs)("div",{className:"access-denied",children:[(0,wo.jsx)("h2",{children:t("access_denied.title")}),(0,wo.jsx)("p",{children:t("access_denied.message")})]})})},JD=dc("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),$D=dc("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ZD=()=>{const{user:e}=ko(),t=ee(),{t:n}=Ma("common"),r="admin"===(null===e||void 0===e?void 0:e.role)?[{name:n("admin.dashboard"),href:"/admin",icon:wc},{name:n("navigation.users"),href:"/admin/users",icon:_c},{name:n("navigation.settings"),href:"/admin/settings",icon:Dc}]:"manager"===(null===e||void 0===e?void 0:e.role)?[{name:n("navigation.dashboard"),href:"/manager",icon:wc},{name:n("admin.crew_members"),href:"/manager/crew",icon:_c},{name:n("navigation.certificates"),href:"/manager/certificates",icon:pu}]:[{name:n("navigation.dashboard"),href:"/crew",icon:wc},{name:n("navigation.training"),href:"/crew/training",icon:bu},{name:n("navigation.profile"),href:"/crew/profile",icon:Dc}];return(0,wo.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 lg:hidden z-40",children:(0,wo.jsx)("div",{className:"grid grid-cols-3 gap-1 p-2",children:r.map((e=>{const n=e.icon,r="/manager"===(i=e.href)||"/crew"===i||"/admin"===i?t.pathname===i:t.pathname.startsWith(i);var i;return(0,wo.jsxs)(Me,{to:e.href,className:"flex flex-col items-center justify-center py-3 px-2 rounded-lg transition-all duration-200 mobile-nav-item ".concat(r?"bg-burando-teal text-white shadow-md":"text-gray-600 hover:text-burando-teal hover:bg-gray-100"),children:[(0,wo.jsx)(n,{className:"h-5 w-5 mb-1 ".concat(r?"text-white":"")}),(0,wo.jsx)("span",{className:"text-xs font-medium truncate max-w-16 ".concat(r?"text-white":""),children:e.name})]},e.name)}))})})},eR=()=>{const{user:e,logout:t}=ko(),n=ee(),[r,a]=(0,i.useState)(!1),{t:s}=Ma("common"),o=()=>{t()},l="admin"===(null===e||void 0===e?void 0:e.role)?[{name:s("admin.dashboard"),href:"/admin",icon:wc}]:"manager"===(null===e||void 0===e?void 0:e.role)?[{name:s("navigation.dashboard"),href:"/manager",icon:wc},{name:s("admin.crew_members"),href:"/manager/crew",icon:_c}]:[{name:s("navigation.dashboard"),href:"/crew",icon:wc},{name:s("navigation.training"),href:"/crew/training",icon:bu},{name:s("navigation.profile"),href:"/crew/profile",icon:Dc}],c=e=>"/manager"===e||"/crew"===e?n.pathname===e:n.pathname.startsWith(e);return(0,wo.jsxs)("div",{className:"min-h-screen burando-bg",children:[(0,wo.jsxs)("header",{className:"nav-glass sticky top-0 z-50",children:[(0,wo.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,wo.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,wo.jsxs)("div",{className:"flex items-center",children:[(0,wo.jsx)("img",{src:"/burando-logo.svg",alt:"Burando Maritime Services",className:"h-10 w-auto mr-4"}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("h1",{className:"text-xl font-bold text-gradient-navy",children:s("general.burando_maritime")}),(0,wo.jsx)("p",{className:"text-sm text-gradient-primary font-medium",children:s("crew.onboarding")})]})]}),(0,wo.jsx)("nav",{className:"hidden md:flex space-x-2",children:l.map((e=>{const t=e.icon;return(0,wo.jsxs)(Me,{to:e.href,className:"flex items-center px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 ".concat(c(e.href)?"glass-button text-white shadow-lg":"text-slate-700 hover:text-slate-900 hover:bg-white/20 hover:backdrop-blur-sm"),children:[(0,wo.jsx)(t,{className:"h-4 w-4 mr-2"}),e.name]},e.name)}))}),(0,wo.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wo.jsx)(yc,{}),(0,wo.jsxs)("div",{className:"hidden md:block text-right",children:[(0,wo.jsxs)("p",{className:"text-sm font-medium text-slate-800",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,wo.jsx)("p",{className:"text-xs text-slate-600 capitalize",children:null===e||void 0===e?void 0:e.role})]}),(0,wo.jsxs)("button",{onClick:o,className:"flex items-center px-4 py-2 text-sm text-slate-700 hover:text-red-600 transition-all duration-300 rounded-xl hover:bg-red-50/80 hover:backdrop-blur-sm border border-transparent hover:border-red-200",title:s("navigation.logout"),children:[(0,wo.jsx)(JD,{className:"h-4 w-4"}),(0,wo.jsx)("span",{className:"ml-2 hidden md:inline",children:s("navigation.logout")})]}),(0,wo.jsx)("button",{onClick:()=>a(!r),className:"md:hidden p-3 rounded-lg text-gray-700 hover:text-burando-teal hover:bg-gray-100 touch-target transition-all duration-200","aria-label":r?"Close menu":"Open menu",children:r?(0,wo.jsx)(Mc,{className:"h-6 w-6"}):(0,wo.jsx)($D,{className:"h-6 w-6"})})]})]})}),r&&(0,wo.jsx)("div",{className:"md:hidden border-t border-gray-200 bg-white shadow-lg",children:(0,wo.jsxs)("div",{className:"px-4 py-4 space-y-2",children:[(0,wo.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 mb-3 bg-gray-50 rounded-lg",children:[(0,wo.jsxs)("p",{className:"text-base font-medium text-gray-900",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,wo.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:null===e||void 0===e?void 0:e.role})]}),l.map((e=>{const t=e.icon;return(0,wo.jsxs)(Me,{to:e.href,onClick:()=>a(!1),className:"burando-nav-link flex items-center px-4 py-4 rounded-lg text-base font-medium transition-all duration-200 touch-target ".concat(c(e.href)?"text-burando-teal bg-burando-teal/10 active shadow-sm":"text-gray-700 hover:text-burando-teal hover:bg-gray-100"),children:[(0,wo.jsx)(t,{className:"h-5 w-5 mr-4"}),e.name]},e.name)})),(0,wo.jsxs)("button",{onClick:o,className:"w-full flex items-center px-4 py-4 text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 touch-target mt-4 border-t border-gray-200 pt-6",children:[(0,wo.jsx)(JD,{className:"h-5 w-5 mr-4"}),s("navigation.logout")]})]})})]}),(0,wo.jsx)("main",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 md:py-8 pb-20 lg:pb-8",children:(0,wo.jsx)("div",{className:"fade-in",children:(0,wo.jsx)(xe,{})})}),(0,wo.jsx)("footer",{className:"glass-card mt-auto mx-4 md:mx-6 mb-4 md:mb-6 hidden lg:block",children:(0,wo.jsx)("div",{className:"px-4 md:px-6 py-4",children:(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center text-center md:text-left",children:[(0,wo.jsxs)("div",{className:"flex flex-col md:flex-row items-center mb-4 md:mb-0",children:[(0,wo.jsx)("img",{src:"/burando-logo.svg",alt:"Burando Maritime Services",className:"h-6 w-auto mr-0 md:mr-3 mb-2 md:mb-0"}),(0,wo.jsxs)("span",{className:"text-xs md:text-sm text-slate-600",children:["\xa9 2024 ",s("general.burando_maritime")," ",s("general.maritime_services"),". ",s("general.all_rights_reserved"),"."]})]}),(0,wo.jsxs)("div",{className:"text-xs md:text-sm text-gradient-primary font-medium",children:[s("general.safety_management_system")," v1.0"]})]})})}),(0,wo.jsx)(ZD,{})]})},tR=dc("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const nR=new class{constructor(){this.sessionId=kf(),this.errorQueue=[],this.isOnline=navigator.onLine,this.maxRetries=3,this.retryDelay=1e3,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this))}handleOnline(){this.isOnline=!0,this.flushErrorQueue()}handleOffline(){this.isOnline=!1}generateErrorId(){return"fe_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}async logError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={id:this.generateErrorId(),type:e,message:t.message||"Unknown error",stack:t.stack,timestamp:(new Date).toISOString(),sessionId:this.sessionId,url:window.location.href,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},context:We(We({},n),{},{reactVersion:i.version,environment:"production"})};return this.errorQueue.push(r),this.isOnline?await this.sendErrorToBackend(r):console.warn("Offline: Error queued for later transmission",r),r.id}async sendErrorToBackend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{const t=await fetch("/api/errors/frontend",{method:"POST",headers:{"Content-Type":"application/json","X-Session-ID":this.sessionId},body:JSON.stringify(e)});if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));return this.errorQueue=this.errorQueue.filter((t=>t.id!==e.id)),console.log("\u2705 Error logged to backend: ".concat(e.id)),!0}catch(n){return console.error("\u274c Failed to log error to backend (attempt ".concat(t+1,"):"),n),t<this.maxRetries?setTimeout((()=>{this.sendErrorToBackend(e,t+1)}),this.retryDelay*Math.pow(2,t)):console.error("\u274c Max retries exceeded for error: ".concat(e.id)),!1}}async flushErrorQueue(){if(!this.isOnline||0===this.errorQueue.length)return;console.log("\ud83d\udce4 Flushing ".concat(this.errorQueue.length," queued errors"));const e=this.errorQueue.map((e=>this.sendErrorToBackend(e)));try{await Promise.allSettled(e)}catch(t){console.error("Error flushing error queue:",t)}}logReactError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown";return this.logError("REACT_ERROR_BOUNDARY",e,{componentStack:t.componentStack,errorBoundary:n,errorInfo:t})}logUnhandledRejection(e){var t;const n=e.reason instanceof Error?e.reason:new Error(e.reason);return this.logError("UNHANDLED_PROMISE_REJECTION",n,{reason:e.reason,promise:null===(t=e.promise)||void 0===t?void 0:t.toString()})}logGlobalError(e){const t=new Error(e.message);return t.stack="".concat(e.filename,":").concat(e.lineno,":").concat(e.colno),this.logError("GLOBAL_JAVASCRIPT_ERROR",t,{filename:e.filename,lineno:e.lineno,colno:e.colno})}logCustomError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Error(e);return this.logError("CUSTOM_APPLICATION_ERROR",n,t)}logPerformanceIssue(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=new Error("Performance issue: ".concat(e," (").concat(t,") exceeded threshold (").concat(n,")"));return this.logError("PERFORMANCE_ISSUE",i,We({metric:e,value:t,threshold:n},r))}getErrorStats(){return{sessionId:this.sessionId,queuedErrors:this.errorQueue.length,isOnline:this.isOnline,totalErrors:this.errorQueue.length}}clearErrorQueue(){this.errorQueue=[]}};window.addEventListener("error",(e=>{nR.logGlobalError(e)})),window.addEventListener("unhandledrejection",(e=>{nR.logUnhandledRejection(e)}));const rR=nR;class iR extends i.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState((e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1})))},this.handleRefresh=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),rs.logError(e,"react_error_boundary",{componentStack:t.componentStack,errorBoundary:this.constructor.name}),rR.logReactError(e,t,this.constructor.name),console.error("React Error Boundary caught an error:",e,t)}render(){return this.state.hasError?(0,wo.jsx)(aR,We({error:this.state.error,errorInfo:this.state.errorInfo,retryCount:this.state.retryCount,onRetry:this.handleRetry,onRefresh:this.handleRefresh,onGoHome:this.handleGoHome},this.props)):this.props.children}}function aR(e){let{error:t,errorInfo:n,retryCount:r,onRetry:i,onRefresh:a,onGoHome:s,context:o="general"}=e;const{t:l}=Ma(["errors","common"]);return(0,wo.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-deep-blue via-burando-navy to-burando-dark-blue flex items-center justify-center p-4",children:(0,wo.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-6 text-center",children:[(0,wo.jsx)("div",{className:"flex justify-center mb-4",children:(0,wo.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,wo.jsx)(Xc,{className:"w-8 h-8 text-red-600"})})}),(0,wo.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:l(r>2?"errors:user_friendly.technical_difficulties":"errors:user_friendly.something_went_wrong")}),(0,wo.jsx)("p",{className:"text-gray-600 mb-6",children:(()=>{var e,n,i;return null!==t&&void 0!==t&&null!==(e=t.message)&&void 0!==e&&e.includes("ChunkLoadError")||null!==t&&void 0!==t&&null!==(n=t.message)&&void 0!==n&&n.includes("Loading chunk")?l("errors:network.slow_connection"):null!==t&&void 0!==t&&null!==(i=t.message)&&void 0!==i&&i.includes("Network")?l("errors:network.connection_lost"):l(r>2?"errors:user_friendly.working_on_it":"errors:user_friendly.please_try_again")})()}),(0,wo.jsx)("div",{className:"space-y-3 mb-6",children:(()=>{const e=[];return r<3&&e.push({label:l("errors:actions.retry"),action:i,primary:!0,icon:Bc}),e.push({label:l("errors:actions.refresh"),action:a,primary:r>=3,icon:Bc}),e.push({label:l("errors:actions.go_back"),action:s,icon:tR}),e})().map(((e,t)=>(0,wo.jsxs)("button",{onClick:e.action,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat(e.primary?"bg-burando-light-green text-white hover:bg-burando-green":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,wo.jsx)(e.icon,{className:"w-4 h-4"}),(0,wo.jsx)("span",{children:e.label})]},t)))}),(0,wo.jsxs)("div",{className:"border-t pt-4",children:[(0,wo.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:l("errors:help.still_stuck")}),(0,wo.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-burando-blue",children:[(0,wo.jsx)(uc,{className:"w-4 h-4"}),(0,wo.jsx)("span",{children:l("errors:help.contact_info")})]})]}),!1]})})}function sR(e){let{children:t,context:n="general"}=e;return(0,wo.jsx)(iR,{context:n,children:t})}const oR=dc("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]),lR=()=>{const[e,t]=(0,i.useState)(navigator.onLine),[n,r]=(0,i.useState)(!1),[a,s]=(0,i.useState)("unknown"),[o,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(0),[p,m]=(0,i.useState)(!1),f=(0,i.useCallback)((async()=>{if(e)try{const e=Date.now(),t=await fetch("/api/health",{method:"HEAD",cache:"no-cache"}),n=Date.now()-e;t.ok?s(n<200?"excellent":n<500?"good":n<1e3?"fair":"poor"):s("poor")}catch(n){s("offline"),t(!1)}else s("offline")}),[e]),g=(0,i.useCallback)((()=>{t(!0),n&&(Tt.success("\ud83d\udea2 Connection restored! Syncing your progress...",{duration:4e3,icon:"\ud83d\udce1",style:{background:"#10b981",color:"white"}}),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SYNC_OFFLINE_DATA"}),l(new Date),r(!1)),f()}),[n,f]),v=(0,i.useCallback)((()=>{t(!1),r(!0),s("offline"),d(!0),Tt.error("\ud83d\udce1 You're now offline. Don't worry - you can continue your maritime training!",{duration:6e3,icon:"\u26a0\ufe0f",style:{background:"#ef4444",color:"white"}})}),[]),b=(0,i.useCallback)((()=>{const e=localStorage.getItem("pendingQuizSync"),t=localStorage.getItem("pendingProgressSync");let n=0;if(e)try{n+=JSON.parse(e).length}catch(He){console.warn("Failed to parse pending quiz sync data")}if(t)try{n+=JSON.parse(t).length}catch(He){console.warn("Failed to parse pending progress sync data")}h(n)}),[]);(0,i.useEffect)((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((()=>{m(!0)}))}),[]),(0,i.useEffect)((()=>{window.addEventListener("online",g),window.addEventListener("offline",v);const e=setInterval(f,3e4),t=setInterval(b,5e3);return f(),b(),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",v),clearInterval(e),clearInterval(t)}}),[g,v,f,b]);return e&&0===u&&"excellent"===a?null:(0,wo.jsxs)("div",{className:"fixed top-4 right-4 z-50",children:[(0,wo.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-white text-sm font-medium shadow-lg ".concat((()=>{if(!e)return"bg-red-500";switch(a){case"excellent":return"bg-green-500";case"good":return"bg-green-400";case"fair":return"bg-yellow-500";case"poor":return"bg-orange-500";default:return"bg-gray-500"}})()),children:[(()=>{if(!e)return(0,wo.jsx)(ld,{className:"h-4 w-4"});switch(a){case"excellent":case"good":return(0,wo.jsx)(od,{className:"h-4 w-4"});case"fair":case"poor":return(0,wo.jsx)(oR,{className:"h-4 w-4"});default:return(0,wo.jsx)(Bc,{className:"h-4 w-4 animate-spin"})}})(),(0,wo.jsx)("span",{children:(()=>{if(!e)return"Offline Mode";switch(a){case"excellent":return"Excellent Connection";case"good":return"Good Connection";case"fair":return"Fair Connection";case"poor":return"Poor Connection";default:return"Checking..."}})()}),u>0&&(0,wo.jsxs)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs",children:[u," pending"]}),!p&&(0,wo.jsx)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs",children:"SW Loading..."})]}),o&&(0,wo.jsxs)("div",{className:"mt-1 text-xs text-gray-600 text-right",children:["Last sync: ",o.toLocaleTimeString()]})]})},cR=()=>{const{t:e}=Ma(["common"]),{getTokenTimeRemaining:t,isTokenExpiringSoon:n,logout:r}=ko(),[a,s]=(0,i.useState)(0),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=()=>{const e=t();s(e);const r=n(10);l(r&&!c)};e();const r=setInterval(e,3e4);return()=>clearInterval(r)}),[t,n,c]);if(!o||a<=0)return null;const u=Math.floor(a/6e4)<=2;return(0,wo.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md ".concat(u?"animate-pulse":""),children:(0,wo.jsx)("div",{className:"rounded-lg shadow-lg border-l-4 p-4 ".concat(u?"bg-red-50 border-red-500 text-red-800":"bg-yellow-50 border-yellow-500 text-yellow-800"),children:(0,wo.jsxs)("div",{className:"flex items-start",children:[(0,wo.jsx)("div",{className:"flex-shrink-0",children:u?(0,wo.jsx)(Xc,{className:"h-5 w-5 text-red-500"}):(0,wo.jsx)(id,{className:"h-5 w-5 text-yellow-500"})}),(0,wo.jsxs)("div",{className:"ml-3 flex-1",children:[(0,wo.jsx)("h3",{className:"text-sm font-semibold",children:e(u?"common:session.expiring_soon":"common:session.warning")}),(0,wo.jsx)("p",{className:"text-sm mt-1",children:e("common:session.expires_in",{time:(e=>{const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return t>0?"".concat(t,"m ").concat(n,"s"):"".concat(n,"s")})(a)})}),(0,wo.jsxs)("div",{className:"mt-3 flex space-x-2",children:[(0,wo.jsxs)("button",{onClick:()=>{window.location.href="/login"},className:"inline-flex items-center px-3 py-1 rounded text-xs font-medium transition-colors ".concat(u?"bg-red-600 text-white hover:bg-red-700":"bg-yellow-600 text-white hover:bg-yellow-700"),children:[(0,wo.jsx)(Bc,{className:"h-3 w-3 mr-1"}),e("common:session.refresh_session")]}),(0,wo.jsx)("button",{onClick:()=>{r(),window.location.href="/login"},className:"inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-gray-600 text-white hover:bg-gray-700 transition-colors",children:e("common:session.logout")})]})]}),(0,wo.jsx)("div",{className:"flex-shrink-0 ml-2",children:(0,wo.jsx)("button",{onClick:()=>{d(!0),l(!1)},className:"rounded-md p-1 inline-flex items-center justify-center transition-colors ".concat(u?"text-red-400 hover:text-red-600 hover:bg-red-100":"text-yellow-400 hover:text-yellow-600 hover:bg-yellow-100"),children:(0,wo.jsx)(Mc,{className:"h-4 w-4"})})})]})})})},dR=dc("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),uR={admin:{email:"adminmartexx@shipdocs.app",name:"Admin Splinter",role:"admin",icon:fc},manager:{email:"manager@shipdocs.app",name:"Test Manager",role:"manager",icon:_c},crew:{email:"m.splinter@protonmail.com",name:"Martin Splinter",role:"crew",icon:cd}},hR=()=>{const{user:e,devLogin:t}=ko(),[n,r]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1);if(console.log("DevModeBar - NODE_ENV:","production"),console.log("DevModeBar - REACT_APP_DEV_MODE:",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DEV_MODE),"true"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DEV_MODE)return null;if("undefined"!==typeof window&&window.location.hostname.includes("burando.online"))return console.warn("DevModeBar disabled on production domain"),null;const o=e?Object.values(uR).find((t=>t.email===e.email)):null,l=(null===o||void 0===o?void 0:o.icon)||Dc;return(0,wo.jsx)("div",{className:"fixed bottom-4 left-4 z-50",children:(0,wo.jsxs)("div",{className:"bg-yellow-400 text-black rounded-lg shadow-lg border-2 border-yellow-600",children:[(0,wo.jsxs)("div",{className:"px-4 py-2 flex items-center gap-3 cursor-pointer select-none",onClick:()=>r(!n),children:[(0,wo.jsx)("span",{className:"font-bold text-sm",children:"\ud83d\udea7 DEV MODE"}),e&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)("span",{className:"text-sm",children:"|"}),(0,wo.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wo.jsx)(l,{className:"h-4 w-4"}),(0,wo.jsxs)("span",{className:"text-sm font-medium",children:[(null===o||void 0===o?void 0:o.name)||e.email," (",e.role,")"]})]})]}),n?(0,wo.jsx)(mc,{className:"h-4 w-4"}):(0,wo.jsx)(dR,{className:"h-4 w-4"})]}),n&&(0,wo.jsxs)("div",{className:"border-t-2 border-yellow-600 p-3",children:[(0,wo.jsx)("div",{className:"text-xs font-semibold mb-2",children:"Quick Switch:"}),(0,wo.jsx)("div",{className:"flex gap-2",children:Object.entries(uR).map((n=>{let[r,i]=n;const o=i.icon,l=(null===e||void 0===e?void 0:e.email)===i.email;return(0,wo.jsxs)("button",{onClick:()=>(async e=>{s(!0);try{await t(uR[e].email)}catch(n){console.error("Dev login failed:",n)}finally{s(!1)}})(r),disabled:a||l,className:"\n                      flex items-center gap-2 px-3 py-1.5 rounded text-xs font-medium\n                      transition-all duration-200\n                      ".concat(l?"bg-black text-yellow-400 cursor-default":"bg-yellow-500 hover:bg-yellow-600 text-black","\n                      ").concat(a?"opacity-50 cursor-wait":"","\n                    "),children:[(0,wo.jsx)(o,{className:"h-3 w-3"}),r.charAt(0).toUpperCase()+r.slice(1)]},r)}))}),(0,wo.jsx)("div",{className:"mt-3 pt-3 border-t border-yellow-600",children:(0,wo.jsxs)("div",{className:"text-xs space-y-1",children:[(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{className:"text-gray-700",children:"Environment:"}),(0,wo.jsx)("span",{className:"font-mono",children:"production"})]}),(0,wo.jsxs)("div",{className:"flex justify-between",children:[(0,wo.jsx)("span",{className:"text-gray-700",children:"API URL:"}),(0,wo.jsx)("span",{className:"font-mono text-xs",children:window.location.origin})]})]})})]})]})})},pR=()=>{const{t:e}=Ma(["common","auth","dashboard","training","quiz"]),{currentLanguage:t,changeLanguage:n,languages:r}=Co();return(0,wo.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Internationalization Test Component"}),(0,wo.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,wo.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:["Current Language: ",t]}),(0,wo.jsx)("div",{className:"flex space-x-2",children:r.map((e=>(0,wo.jsxs)("button",{onClick:()=>n(e.code),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat(t===e.code?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e.flag," ",e.name]},e.code)))})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Translation Tests"}),(0,wo.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{namespace:"common",key:"navigation.dashboard",label:"Dashboard"},{namespace:"common",key:"buttons.save",label:"Save Button"},{namespace:"auth",key:"title",label:"App Title"},{namespace:"auth",key:"login_methods.magic_link.title",label:"Magic Link"},{namespace:"dashboard",key:"crew.welcome",label:"Welcome Message",params:{name:"Test User"}},{namespace:"training",key:"phases.phase1.title",label:"Phase 1 Title"},{namespace:"quiz",key:"title",label:"Quiz Title",params:{phase:1}},{namespace:"quiz",key:"safety_equipment.fire_extinguisher",label:"Fire Extinguisher"}].map(((t,n)=>(0,wo.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,wo.jsxs)("div",{className:"text-sm text-gray-500 mb-1",children:[t.label," (",t.namespace,":",t.key,")"]}),(0,wo.jsx)("div",{className:"font-medium text-gray-800",children:t.params?e("".concat(t.namespace,":").concat(t.key),t.params):e("".concat(t.namespace,":").concat(t.key))})]},n)))})]}),(0,wo.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Maritime Safety Equipment"}),(0,wo.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["fire_extinguisher","life_jacket","emergency_alarm","first_aid_kit","emergency_exit","muster_station","safety_shower","eye_wash_station"].map((t=>(0,wo.jsx)("div",{className:"text-center p-2 bg-white rounded border",children:(0,wo.jsx)("div",{className:"text-sm font-medium text-blue-700",children:e("quiz:safety_equipment.".concat(t))})},t)))})]}),(0,wo.jsxs)("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"Status Indicators"}),(0,wo.jsx)("div",{className:"flex flex-wrap gap-2",children:["completed","in_progress","not_started","pending","passed","failed","approved","rejected"].map((t=>(0,wo.jsx)("span",{className:"px-3 py-1 bg-white text-green-700 rounded-full text-sm font-medium border",children:e("common:status.".concat(t))},t)))})]}),(0,wo.jsxs)("div",{className:"mt-6 p-4 bg-gray-100 rounded-lg text-xs text-gray-600",children:[(0,wo.jsx)("h4",{className:"font-semibold mb-2",children:"Debug Information:"}),(0,wo.jsxs)("div",{children:["Current Language: ",t]}),(0,wo.jsxs)("div",{children:["Available Languages: ",r.map((e=>e.code)).join(", ")]}),(0,wo.jsxs)("div",{children:["localStorage Language: ",localStorage.getItem("i18nextLng")]})]})]})},mR=()=>{const{t:e}=Ma(["common"]),[t,n]=(0,i.useState)("Safety training is mandatory for all crew members"),[r,a]=(0,i.useState)("en"),[s,o]=(0,i.useState)("nl"),[l,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(""),[m,f]=(0,i.useState)(null),g=[{code:"en",name:"English"},{code:"nl",name:"Dutch"},{code:"de",name:"German"},{code:"fr",name:"French"},{code:"es",name:"Spanish"}];return(0,wo.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,wo.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"\ud83c\udf0d AI Translation System Test"}),(0,wo.jsxs)("div",{className:"mb-6",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Maritime Test Texts:"}),(0,wo.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["Safety training is mandatory for all crew members","Emergency procedures must be followed at all times","Life jacket inspection completed successfully","Navigation equipment check required","Fire drill scheduled for tomorrow morning","Muster station assembly point designated","Personal protective equipment must be worn","Bridge watch handover procedures"].map(((e,t)=>(0,wo.jsx)("button",{onClick:()=>(e=>{n(e)})(e),className:"text-left p-2 text-sm bg-blue-50 hover:bg-blue-100 rounded border transition-colors",children:e},t)))})]}),(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text to Translate:"}),(0,wo.jsx)("textarea",{value:t,onChange:e=>n(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter text to translate..."})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From:"}),(0,wo.jsx)("select",{value:r,onChange:e=>a(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:g.map((e=>(0,wo.jsx)("option",{value:e.code,children:e.name},e.code)))})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To:"}),(0,wo.jsx)("select",{value:s,onChange:e=>o(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:g.map((e=>(0,wo.jsx)("option",{value:e.code,children:e.name},e.code)))})]})]}),(0,wo.jsx)("button",{onClick:async()=>{if(t.trim()){u(!0),p(""),c(""),f(null);try{const e=await fetch("/api/translation/translate-text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,sourceLang:r,targetLang:s,domain:"maritime"})});if(e.ok){const t=await e.json();c(t.translation),f({confidence:t.confidence,provider:t.provider,maritimeEnhanced:t.maritimeEnhanced,timestamp:t.timestamp})}else{const t=await e.json();p("Translation failed: ".concat(t.message||t.error))}}catch(e){p("Network error: ".concat(e.message))}finally{u(!1)}}else p("Please enter text to translate")},disabled:d||r===s,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:d?"\ud83d\udd04 Translating...":"\ud83c\udf0d Translate"}),h&&(0,wo.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,wo.jsxs)("p",{className:"text-red-700",children:["\u274c ",h]})}),l&&(0,wo.jsxs)("div",{className:"space-y-4",children:[(0,wo.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:[(0,wo.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"\u2705 Translation Result:"}),(0,wo.jsx)("p",{className:"text-green-700 text-lg",children:l})]}),m&&(0,wo.jsxs)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-md",children:[(0,wo.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"\ud83d\udcca Translation Details:"}),(0,wo.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-medium",children:"Confidence:"}),(0,wo.jsxs)("div",{className:"text-gray-600",children:[(100*m.confidence).toFixed(1),"%"]})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-medium",children:"Provider:"}),(0,wo.jsx)("div",{className:"text-gray-600",children:m.provider})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-medium",children:"Maritime Enhanced:"}),(0,wo.jsx)("div",{className:"text-gray-600",children:m.maritimeEnhanced?"\u2693 Yes":"\u274c No"})]}),(0,wo.jsxs)("div",{children:[(0,wo.jsx)("span",{className:"font-medium",children:"Timestamp:"}),(0,wo.jsx)("div",{className:"text-gray-600",children:new Date(m.timestamp).toLocaleTimeString()})]})]})]})]})]}),(0,wo.jsxs)("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,wo.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"\ud83d\udd27 System Status:"}),(0,wo.jsx)("p",{className:"text-yellow-700 text-sm",children:"This test uses the AI translation system with fallback providers. For best results, configure API keys for Claude, OpenAI, or Google Translate in system settings."})]})]})},fR=()=>{const{user:e,nextOnboardingStep:t}=ko(),{nextStep:n,trackEvent:r}=Lo(),{t:a}=Ma(["onboarding","common"]);(0,i.useEffect)((()=>{r&&null!==e&&void 0!==e&&e.id&&r("step_start",{step_name:"welcome_aboard",user_role:null===e||void 0===e?void 0:e.role,vessel_assignment:null===e||void 0===e?void 0:e.vessel_assignment})}),[r,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.role,null===e||void 0===e?void 0:e.vessel_assignment]);return(0,wo.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-navy via-burando-teal to-burando-bright-teal flex items-center justify-center p-4",children:(0,wo.jsx)("div",{className:"max-w-2xl w-full",children:(0,wo.jsxs)("div",{className:"glass-card-elevated p-8 sm:p-12 text-center",children:[(0,wo.jsxs)("div",{className:"relative mb-8",children:[(0,wo.jsx)("div",{className:"inline-flex items-center justify-center w-32 h-32 bg-gradient-to-br from-burando-bright-teal to-burando-teal rounded-full mb-6 shadow-2xl animate-pulse",children:(0,wo.jsx)(gc,{className:"h-16 w-16 text-white"})}),(0,wo.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-burando-light-green rounded-full flex items-center justify-center animate-bounce",children:(0,wo.jsx)(cd,{className:"h-4 w-4 text-white"})})]}),(0,wo.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4 drop-shadow-xl",children:"\ud83d\udea2 Welcome Aboard!"}),(0,wo.jsxs)("div",{className:"text-white/90 text-lg sm:text-xl mb-8 space-y-2",children:[(0,wo.jsxs)("p",{className:"font-semibold",children:["Hi ",null===e||void 0===e?void 0:e.firstName,", you're joining the crew as a ",(0,wo.jsx)("span",{className:"text-burando-light-green font-bold",children:null===e||void 0===e?void 0:e.role})]}),(0,wo.jsx)("p",{children:"Let's get you started with your maritime safety training"})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,wo.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,wo.jsx)(bu,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,wo.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Safety Training"}),(0,wo.jsx)("p",{className:"text-white/70 text-xs",children:"Essential maritime safety protocols"})]}),(0,wo.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,wo.jsx)(_c,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,wo.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Team Integration"}),(0,wo.jsx)("p",{className:"text-white/70 text-xs",children:"Meet your crew and responsibilities"})]}),(0,wo.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,wo.jsx)(gc,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,wo.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Vessel Operations"}),(0,wo.jsx)("p",{className:"text-white/70 text-xs",children:"Ship-specific procedures and equipment"})]})]}),(0,wo.jsxs)("div",{className:"glass-card p-6 mb-8 text-left",children:[(0,wo.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 text-center",children:"Your Training Journey"}),(0,wo.jsxs)("div",{className:"space-y-3",children:[(0,wo.jsxs)("div",{className:"flex items-center text-white/90",children:[(0,wo.jsx)("div",{className:"w-3 h-3 bg-burando-bright-teal rounded-full mr-3"}),(0,wo.jsxs)("span",{className:"text-sm",children:[(0,wo.jsx)("strong",{children:"Phase 1:"})," Safety Fundamentals (2 hours)"]})]}),(0,wo.jsxs)("div",{className:"flex items-center text-white/90",children:[(0,wo.jsx)("div",{className:"w-3 h-3 bg-burando-teal rounded-full mr-3"}),(0,wo.jsxs)("span",{className:"text-sm",children:[(0,wo.jsx)("strong",{children:"Phase 2:"})," Emergency Procedures (2 hours)"]})]}),(0,wo.jsxs)("div",{className:"flex items-center text-white/90",children:[(0,wo.jsx)("div",{className:"w-3 h-3 bg-burando-navy rounded-full mr-3"}),(0,wo.jsxs)("span",{className:"text-sm",children:[(0,wo.jsx)("strong",{children:"Phase 3:"})," Operational Training (2 hours)"]})]})]}),(0,wo.jsx)("div",{className:"mt-4 p-3 bg-burando-bright-teal/20 rounded-lg",children:(0,wo.jsxs)("p",{className:"text-white/90 text-sm text-center",children:[(0,wo.jsx)("strong",{children:"Total Time:"})," 4-6 hours over 2 weeks"]})})]}),(0,wo.jsx)("button",{onClick:async()=>{r&&null!==e&&void 0!==e&&e.id&&await r("step_complete",{step_name:"welcome_aboard",action:"continue_clicked"}),n?await n():t()},className:"w-full bg-gradient-to-r from-burando-light-green to-burando-bright-teal text-white font-bold py-4 px-8 rounded-xl text-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-burando-bright-teal/50 focus:ring-offset-2 shadow-xl min-h-[56px] touch-manipulation",children:(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)("span",{children:"Start Your Training Journey"}),(0,wo.jsx)(Gh,{className:"h-6 w-6 ml-3"})]})}),(0,wo.jsx)("div",{className:"mt-6 text-center",children:(0,wo.jsx)("p",{className:"text-white/60 text-sm",children:"\ud83c\udf0a Designed for maritime professionals by maritime experts"})})]})})})},gR=dc("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),vR=dc("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]),bR=()=>{const{user:e,nextOnboardingStep:t}=ko(),{nextStep:n,saveRoleSelection:r,trackEvent:a,progress:s}=Lo(),{t:o}=Ma(["onboarding","common"]),[l,c]=(0,i.useState)((null===s||void 0===s?void 0:s.selected_role_focus)||null);(0,i.useEffect)((()=>{a&&null!==e&&void 0!==e&&e.id&&a("step_start",{step_name:"role_setup",user_position:null===e||void 0===e?void 0:e.position,vessel_assignment:null===e||void 0===e?void 0:e.vessel_assignment})}),[a,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.position,null===e||void 0===e?void 0:e.vessel_assignment]);const d={schipper:{icon:gR,title:"Schipper/Kapitein",description:"Leiding, navigatie en volledige verantwoordelijkheid voor het schip",modules:["Rijnvaart Navigatie & Verkeerswetten","Leiderschap & Crisismanagement","Lading Planning & Stabiliteit","Wettelijke Verantwoordelijkheden"],duration:"8 uur",priority:"Leiderschap & Navigatie"},stuurman:{icon:cd,title:"Stuurman",description:"Navigatie ondersteuning en operationele taken",modules:["Navigatie Ondersteuning","Communicatie Systemen (VHF/AIS)","Sluizen & Bruggen Operaties","Wachtdienst Procedures"],duration:"6 uur",priority:"Navigatie & Operaties"},matroos:{icon:vR,title:"Matroos",description:"Ervaren dekwerkzaamheden en specialistische taken",modules:["Geavanceerde Dekwerkzaamheden","Lading Behandeling & Veiligheid","Onderhoud & Reparaties","Mentoring Nieuwe Bemanningsleden"],duration:"5 uur",priority:"Dekoperaties & Mentoring"},deksman:{icon:_c,title:"Deksman",description:"Basis dekwerkzaamheden en algemene ondersteuning",modules:["Basis Dekwerkzaamheden","Veiligheid & Persoonlijke Bescherming","Basis Onderhoud & Schoonmaak","Teamwerk & Communicatie"],duration:"4 uur",priority:"Basis Dekoperaties"}};return(0,wo.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-navy via-burando-teal to-burando-bright-teal flex items-center justify-center p-4",children:(0,wo.jsx)("div",{className:"max-w-4xl w-full",children:(0,wo.jsxs)("div",{className:"glass-card-elevated p-6 sm:p-8",children:[(0,wo.jsxs)("div",{className:"text-center mb-8",children:[(0,wo.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"\ud83c\udfaf Customize Your Training"}),(0,wo.jsx)("p",{className:"text-white/90 text-lg",children:"Select your primary role focus to personalize your training experience"})]}),(0,wo.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:Object.entries(d).map((e=>{let[t,n]=e;const r=n.icon,i=l===t;return(0,wo.jsx)("div",{onClick:()=>c(t),className:"glass-card p-6 cursor-pointer transition-all duration-300 transform hover:scale-[1.02] ".concat(i?"ring-4 ring-burando-light-green bg-burando-bright-teal/20":"hover:bg-white/10"),children:(0,wo.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,wo.jsx)("div",{className:"p-3 rounded-full ".concat(i?"bg-burando-light-green":"bg-burando-bright-teal"),children:(0,wo.jsx)(r,{className:"h-8 w-8 text-white"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,wo.jsx)("h3",{className:"text-xl font-bold text-white",children:n.title}),i&&(0,wo.jsx)(sd,{className:"h-6 w-6 text-burando-light-green"})]}),(0,wo.jsx)("p",{className:"text-white/80 text-sm mb-4",children:n.description}),(0,wo.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,wo.jsxs)("div",{className:"flex items-center text-white/70 text-sm",children:[(0,wo.jsx)(id,{className:"h-4 w-4 mr-2"}),(0,wo.jsxs)("span",{children:["Duration: ",n.duration]})]}),(0,wo.jsxs)("div",{className:"flex items-center text-white/70 text-sm",children:[(0,wo.jsx)(pu,{className:"h-4 w-4 mr-2"}),(0,wo.jsxs)("span",{children:["Focus: ",n.priority]})]})]}),(0,wo.jsxs)("div",{className:"space-y-1",children:[(0,wo.jsx)("p",{className:"text-white/90 text-sm font-medium",children:"Training Modules:"}),n.modules.map(((e,t)=>(0,wo.jsxs)("div",{className:"flex items-center text-white/70 text-xs",children:[(0,wo.jsx)("div",{className:"w-1.5 h-1.5 bg-burando-bright-teal rounded-full mr-2"}),(0,wo.jsx)("span",{children:e})]},t)))]})]})]})},t)}))}),l&&(0,wo.jsxs)("div",{className:"glass-card p-6 mb-8 bg-burando-bright-teal/20 border border-burando-light-green/30",children:[(0,wo.jsxs)("h3",{className:"text-lg font-bold text-white mb-2",children:["\u2705 Selected: ",d[l].title]}),(0,wo.jsxs)("p",{className:"text-white/90 text-sm",children:["Your training will be customized for ",d[l].description.toLowerCase(),"with emphasis on ",d[l].priority.toLowerCase(),"."]})]}),(0,wo.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,wo.jsxs)("button",{onClick:()=>{},className:"flex items-center justify-center px-6 py-3 text-white/80 bg-white/10 border border-white/20 rounded-lg hover:bg-white/20 transition-all duration-300 min-h-[48px] touch-manipulation",children:[(0,wo.jsx)(ku,{className:"h-5 w-5 mr-2"}),(0,wo.jsx)("span",{children:"Back"})]}),(0,wo.jsxs)("button",{onClick:async()=>{if(l){if(r&&null!==e&&void 0!==e&&e.id){var i;const t={selected_at:(new Date).toISOString(),user_position:null===e||void 0===e?void 0:e.position,vessel_assignment:null===e||void 0===e?void 0:e.vessel_assignment,training_modules:(null===(i=d[l])||void 0===i?void 0:i.modules)||[]};await r(l,t),a&&await a("role_select",{step_name:"role_setup",selected_role:l,role_details:d[l],user_position:null===e||void 0===e?void 0:e.position})}localStorage.setItem("training_focus_".concat(e.id),l),n?await n():t()}},disabled:!l,className:"flex items-center justify-center px-8 py-3 rounded-lg font-semibold transition-all duration-300 min-h-[48px] touch-manipulation ".concat(l?"bg-gradient-to-r from-burando-light-green to-burando-bright-teal text-white hover:shadow-lg transform hover:scale-[1.02]":"bg-gray-500 text-gray-300 cursor-not-allowed"),children:[(0,wo.jsx)("span",{children:"Continue to Training Overview"}),(0,wo.jsx)(Gh,{className:"h-5 w-5 ml-2"})]})]}),(0,wo.jsx)("div",{className:"mt-6 text-center",children:(0,wo.jsx)("p",{className:"text-white/60 text-sm",children:"\ud83d\udca1 Don't worry - you can access training for all roles later"})})]})})})},yR=dc("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),xR=()=>{const{user:e,completeOnboarding:t}=ko(),{completeOnboarding:n,trackEvent:r,progress:a,roleContent:s}=Lo(),{t:o}=Ma(["onboarding","common"]);(0,i.useEffect)((()=>{r&&null!==e&&void 0!==e&&e.id&&r("step_start",{step_name:"training_overview",selected_role_focus:null===a||void 0===a?void 0:a.selected_role_focus,user_position:null===e||void 0===e?void 0:e.position})}),[r,null===e||void 0===e?void 0:e.id,null===a||void 0===a?void 0:a.selected_role_focus,null===e||void 0===e?void 0:e.position]);const l=(null===a||void 0===a?void 0:a.selected_role_focus)||"general",c=[{phase:1,title:"Safety Fundamentals",description:"Essential maritime safety knowledge and emergency procedures",icon:yR,duration:"2 hours",modules:["Personal Safety Equipment","Emergency Alarm Signals","Muster Station Procedures","Basic First Aid"],status:"ready"},{phase:2,title:"Emergency Procedures",description:"Advanced emergency response and crisis management",icon:Xc,duration:"2 hours",modules:["Fire Fighting Procedures","Abandon Ship Procedures","Man Overboard Response","Emergency Communication"],status:"locked"},{phase:3,title:"Operational Training",description:"Role-specific operational procedures and equipment",icon:gc,duration:"2 hours",modules:["Equipment Operation","Standard Procedures","Documentation Requirements","Quality Assurance"],status:"locked"}],d=e=>{switch(e){case"ready":return(0,wo.jsx)(vu,{className:"h-5 w-5 text-burando-light-green"});case"locked":return(0,wo.jsx)(id,{className:"h-5 w-5 text-white/50"});default:return(0,wo.jsx)(sd,{className:"h-5 w-5 text-burando-light-green"})}},u=e=>{switch(e){case"ready":return"Ready to Start";case"locked":return"Unlocks After Previous Phase";default:return"Completed"}},h=e=>{switch(e){case"ready":return"text-white font-semibold";case"locked":return"text-white/50";default:return"text-burando-light-green font-semibold"}};return(0,wo.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-navy via-burando-teal to-burando-bright-teal flex items-center justify-center p-4",children:(0,wo.jsx)("div",{className:"max-w-4xl w-full",children:(0,wo.jsxs)("div",{className:"glass-card-elevated p-6 sm:p-8",children:[(0,wo.jsxs)("div",{className:"text-center mb-8",children:[(0,wo.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"\ud83d\udcda Your Training Program"}),(0,wo.jsx)("p",{className:"text-white/90 text-lg mb-2",children:"Welcome to your personalized maritime training journey"}),(0,wo.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-burando-bright-teal/20 rounded-full",children:[(0,wo.jsx)(pu,{className:"h-5 w-5 text-burando-light-green mr-2"}),(0,wo.jsxs)("span",{className:"text-white font-medium",children:["Focus: ",l.charAt(0).toUpperCase()+l.slice(1).replace("-"," ")]})]})]}),(0,wo.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,wo.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,wo.jsx)(bu,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,wo.jsx)("h3",{className:"font-semibold text-white",children:"3 Phases"}),(0,wo.jsx)("p",{className:"text-white/70 text-sm",children:"Comprehensive training program"})]}),(0,wo.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,wo.jsx)(id,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,wo.jsx)("h3",{className:"font-semibold text-white",children:"6 Hours Total"}),(0,wo.jsx)("p",{className:"text-white/70 text-sm",children:"Flexible self-paced learning"})]}),(0,wo.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,wo.jsx)(_c,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,wo.jsx)("h3",{className:"font-semibold text-white",children:"Expert Support"}),(0,wo.jsx)("p",{className:"text-white/70 text-sm",children:"Maritime professionals available"})]})]}),(0,wo.jsx)("div",{className:"space-y-6 mb-8",children:c.map((e=>{const t=e.icon,n="ready"===e.status;return(0,wo.jsx)("div",{className:"glass-card p-6 transition-all duration-300 ".concat(n?"ring-2 ring-burando-light-green":""),children:(0,wo.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,wo.jsx)("div",{className:"p-3 rounded-full ".concat(n?"bg-burando-light-green":"bg-white/20"),children:(0,wo.jsx)(t,{className:"h-8 w-8 text-white"})}),(0,wo.jsxs)("div",{className:"flex-1",children:[(0,wo.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,wo.jsxs)("h3",{className:"text-xl font-bold text-white",children:["Phase ",e.phase,": ",e.title]}),(0,wo.jsxs)("div",{className:"flex items-center space-x-2",children:[d(e.status),(0,wo.jsx)("span",{className:"text-sm font-semibold ".concat(h(e.status)),children:u(e.status)})]})]}),(0,wo.jsx)("p",{className:"text-white/80 mb-4",children:e.description}),(0,wo.jsxs)("div",{className:"flex items-center text-white/70 text-sm mb-4",children:[(0,wo.jsx)(id,{className:"h-4 w-4 mr-2"}),(0,wo.jsxs)("span",{children:["Duration: ",e.duration]})]}),(0,wo.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.modules.map(((e,t)=>(0,wo.jsxs)("div",{className:"flex items-center text-white/70 text-sm",children:[(0,wo.jsx)("div",{className:"w-1.5 h-1.5 bg-burando-bright-teal rounded-full mr-2"}),(0,wo.jsx)("span",{children:e})]},t)))})]})]})},e.phase)}))}),(0,wo.jsxs)("div",{className:"glass-card p-6 mb-8 bg-burando-bright-teal/20 border border-burando-light-green/30",children:[(0,wo.jsxs)("h3",{className:"text-lg font-bold text-white mb-3 flex items-center",children:[(0,wo.jsx)(Xc,{className:"h-5 w-5 mr-2 text-burando-light-green"}),"Important Information"]}),(0,wo.jsxs)("div",{className:"space-y-2 text-white/90 text-sm",children:[(0,wo.jsx)("p",{children:"\u2022 Training must be completed in sequence - each phase unlocks the next"}),(0,wo.jsx)("p",{children:"\u2022 You can pause and resume training at any time"}),(0,wo.jsx)("p",{children:"\u2022 All progress is automatically saved"}),(0,wo.jsx)("p",{children:"\u2022 Certificates are generated upon successful completion"}),(0,wo.jsx)("p",{children:"\u2022 Support is available 24/7 for maritime emergencies"})]})]}),(0,wo.jsxs)("div",{className:"text-center",children:[(0,wo.jsx)("button",{onClick:async()=>{r&&null!==e&&void 0!==e&&e.id&&await r("flow_complete",{step_name:"training_overview",action:"start_training_clicked",selected_role_focus:l,completion_method:"normal_flow"}),n?await n():t()},className:"w-full sm:w-auto bg-gradient-to-r from-burando-light-green to-burando-bright-teal text-white font-bold py-4 px-8 rounded-xl text-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-burando-bright-teal/50 focus:ring-offset-2 shadow-xl min-h-[56px] touch-manipulation",children:(0,wo.jsxs)("div",{className:"flex items-center justify-center",children:[(0,wo.jsx)(vu,{className:"h-6 w-6 mr-3"}),(0,wo.jsx)("span",{children:"Start Phase 1: Safety Fundamentals"}),(0,wo.jsx)(Gh,{className:"h-6 w-6 ml-3"})]})}),(0,wo.jsx)("p",{className:"text-white/60 text-sm mt-4",children:"\ud83c\udfaf Ready to begin your maritime training journey"})]})]})})})},wR=()=>{const{onboardingStep:e}=ko(),{currentStep:t,isLoading:n}=Lo(),r=void 0!==t?t:e;if(console.log("\ud83c\udfaf OnboardingFlow - Current step:",r,"Enhanced step:",t,"Basic step:",e),n)return(0,wo.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-deep-blue via-burando-navy to-burando-dark-blue flex items-center justify-center",children:(0,wo.jsxs)("div",{className:"text-white text-center",children:[(0,wo.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-burando-light-green mx-auto mb-4"}),(0,wo.jsx)("p",{children:"Loading your onboarding..."})]})});switch(r){case 0:default:return(0,wo.jsx)(fR,{});case 1:return(0,wo.jsx)(bR,{});case 2:return(0,wo.jsx)(xR,{})}};const _R=()=>{const{user:e}=ko(),[t,n]=(0,i.useState)({}),[r,a]=(0,i.useState)(!1),s=(0,i.useRef)({}),o=(0,i.useRef)(Date.now());(0,i.useEffect)((()=>(e&&!r&&l(),()=>{r&&c()})),[e,r]);const l=(0,i.useCallback)((()=>{if(a(!0),o.current=Date.now(),"PerformanceObserver"in window){const t=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{"navigation"===e.entryType&&(d("page_load_time",e.loadEventEnd-e.loadEventStart),d("dom_content_loaded",e.domContentLoadedEventEnd-e.domContentLoadedEventStart),d("first_contentful_paint",e.loadEventEnd-e.fetchStart))}))}));try{t.observe({entryTypes:["navigation"]})}catch(e){console.warn("Navigation timing not supported:",e)}const n=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{"resource"===e.entryType&&d("resource_load_time",e.responseEnd-e.requestStart,{resource:e.name.split("/").pop(),type:e.initiatorType})}))}));try{n.observe({entryTypes:["resource"]})}catch(e){console.warn("Resource timing not supported:",e)}const r=new PerformanceObserver((e=>{const t=e.getEntries(),n=t[t.length-1];n&&d("largest_contentful_paint",n.startTime)}));try{r.observe({entryTypes:["largest-contentful-paint"]})}catch(e){console.warn("LCP not supported:",e)}const i=new PerformanceObserver((e=>{let t=0;e.getEntries().forEach((e=>{e.hadRecentInput||(t+=e.value)})),d("cumulative_layout_shift",t)}));try{i.observe({entryTypes:["layout-shift"]})}catch(e){console.warn("CLS not supported:",e)}}v(),b(),console.log("\ud83d\udd0d Performance monitoring started")}),[e]),c=(0,i.useCallback)((()=>{a(!1);const e=Date.now()-o.current;d("session_duration",e),console.log("\ud83d\udd0d Performance monitoring stopped")}),[]),d=(0,i.useCallback)((function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={name:t,value:r,unit:u(t),timestamp:(new Date).toISOString(),tags:We(We({},i),{},{userId:null===e||void 0===e?void 0:e.id,sessionId:h(),userAgent:navigator.userAgent,connectionStatus:navigator.onLine?"online":"offline"},p())};s.current[t]=a,n((e=>We(We({},e),{},{[t]:a}))),y(a)}),[e]),u=e=>["page_load_time","dom_content_loaded","first_contentful_paint","largest_contentful_paint","resource_load_time","api_response_time","session_duration"].includes(e)?"ms":"cumulative_layout_shift"===e?"score":e.includes("_rate")?"%":e.includes("_count")?"count":"value",h=(0,i.useCallback)((()=>{let e=sessionStorage.getItem("performanceSessionId");return e||(e="perf_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionStorage.setItem("performanceSessionId",e)),e}),[]),p=(0,i.useCallback)((()=>({vessel:(null===e||void 0===e?void 0:e.vessel_assignment)||"unknown",position:(null===e||void 0===e?void 0:e.position)||"unknown",location:m(),deviceType:f(),connectionQuality:g()})),[e]),m=()=>{const e=navigator.connection;return e?"2g"===e.effectiveType||e.downlink<1?"at_sea":"3g"===e.effectiveType||e.downlink<5?"in_port":"onshore":"unknown"},f=()=>{const e=navigator.userAgent;return/Mobile|Android|iPhone/i.test(e)?"mobile":/Tablet|iPad/i.test(e)?"tablet":"desktop"},g=()=>{if(!navigator.onLine)return"offline";const e=navigator.connection;if(!e)return"good";switch(e.effectiveType){case"4g":return"excellent";case"3g":return"good";case"2g":return"fair";default:return"poor"}},v=(0,i.useCallback)((()=>{const e=()=>{const e=navigator.connection;e&&(d("connection_bandwidth",e.downlink||0,{unit:"mbps"}),d("connection_rtt",e.rtt||0,{unit:"ms"}),d("connection_type",1,{type:e.effectiveType||"unknown"}))};e();const t=setInterval(e,3e4);return()=>clearInterval(t)}),[]),b=(0,i.useCallback)((()=>{const e=()=>{if("memory"in performance){const e=performance.memory;d("memory_used",e.usedJSHeapSize,{unit:"bytes"}),d("memory_total",e.totalJSHeapSize,{unit:"bytes"}),d("memory_limit",e.jsHeapSizeLimit,{unit:"bytes"})}"getBattery"in navigator&&navigator.getBattery().then((e=>{d("battery_level",100*e.level,{unit:"%"}),d("battery_charging",e.charging?1:0)}))};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[]),y=(0,i.useCallback)(function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const s=()=>{clearTimeout(n),e(...i)};clearTimeout(n),n=setTimeout(s,t)}}((e=>{x(e)}),1e3),[]),x=async e=>{},w=(0,i.useCallback)((e=>{const t=Date.now();return{end:n=>{const r=Date.now()-t;return d("api_response_time",r,{endpoint:e,status:(null===n||void 0===n?void 0:n.toString())||"unknown"}),r}}}),[d]),_=(0,i.useCallback)((e=>{const t=Date.now();return{end:()=>{const n=Date.now()-t;return d("user_action_time",n,{action:e}),n}}}),[d]);return{metrics:t,isMonitoring:r,recordMetric:d,measureApiCall:w,measureUserAction:_,startMonitoring:l,stopMonitoring:c}};function kR(){var e;const{user:t,login:n,logout:r,isLoading:a}=ko(),{needsOnboarding:s}=Lo(),{isMonitoring:o,measureApiCall:l}=_R();i.useEffect((()=>{ip.init().then((e=>{e&&(console.log("\ud83c\udf0a Maritime offline mode ready"),t&&ip.preloadCriticalContent())}))}),[t]);const{isLoading:c}=(0,Ie.useQuery)("verify-token",ds,{enabled:!t&&!!localStorage.getItem("token"),onSuccess:e=>{n(e.user,localStorage.getItem("token"))},onError:()=>{localStorage.removeItem("token")},retry:!1});return a||c?(0,wo.jsx)(vc,{}):(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(lR,{}),t&&(0,wo.jsx)(cR,{}),(0,wo.jsxs)(ke,{children:[(0,wo.jsx)(we,{path:"/login",element:t?(0,wo.jsx)(ye,{to:"admin"===t.role?"/admin":"manager"===t.role?"/manager":"/crew",replace:!0}):(0,wo.jsx)(xc,{})}),t?(0,wo.jsx)(wo.Fragment,{children:s&&"crew"===t.role?(0,wo.jsx)(we,{path:"*",element:(0,wo.jsx)(wR,{})}):(0,wo.jsxs)(we,{path:"/",element:(0,wo.jsx)(eR,{}),children:["admin"===t.role&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(we,{path:"/admin",element:(0,wo.jsx)(ud,{})}),(0,wo.jsx)(we,{path:"/templates/new",element:(0,wo.jsx)(UO,{})}),(0,wo.jsx)(we,{path:"/templates/edit/:templateId",element:(0,wo.jsx)(UO,{})}),(0,wo.jsx)(we,{path:"/test-pdf-editor",element:(0,wo.jsx)(HO,{})}),(0,wo.jsx)(we,{path:"/flows",element:(0,wo.jsx)(XD,{})})]}),"manager"===t.role&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(we,{path:"/manager",element:(0,wo.jsx)(gu,{})}),(null===(e=t.permissions)||void 0===e?void 0:e.includes("content_edit"))&&(0,wo.jsx)(we,{path:"/flows",element:(0,wo.jsx)(XD,{})})]}),"crew"===t.role&&(0,wo.jsxs)(wo.Fragment,{children:[(0,wo.jsx)(we,{path:"/crew",element:(0,wo.jsx)(xu,{})}),(0,wo.jsx)(we,{path:"/crew/training/:phase",element:(0,wo.jsx)(Hh,{})}),(0,wo.jsx)(we,{path:"/crew/quiz/:phase",element:(0,wo.jsx)(pp,{})}),(0,wo.jsx)(we,{path:"/crew/profile",element:(0,wo.jsx)(gp,{})})]}),(0,wo.jsx)(we,{path:"/profile",element:(0,wo.jsx)(gp,{})}),(0,wo.jsx)(we,{path:"/test-translations",element:(0,wo.jsx)(pR,{})}),(0,wo.jsx)(we,{path:"/test-ai-translations",element:(0,wo.jsx)(mR,{})}),(0,wo.jsx)(we,{path:"/",element:(0,wo.jsx)(ye,{to:"admin"===t.role?"/admin":"manager"===t.role?"/manager":"/crew",replace:!0})})]})}):(0,wo.jsx)(we,{path:"*",element:(0,wo.jsx)(ye,{to:"/login",replace:!0})}),(0,wo.jsx)(we,{path:"*",element:(0,wo.jsx)(ye,{to:"/",replace:!0})})]}),(0,wo.jsx)(hR,{})]})}const jR=function(){return(0,wo.jsx)(sR,{context:"application",children:(0,wo.jsx)(So,{children:(0,wo.jsx)(Io,{children:(0,wo.jsx)(Ao,{children:(0,wo.jsx)(kR,{})})})})})};console.log("\ud83d\ude80 [BUILD] App starting v2.0.1 - TrainingContentEditor integration"),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("\ud83d\udea2 [SW] Service Worker registered successfully:",e),e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("\ud83d\udea2 [SW] New service worker available")}))}))})).catch((e=>{console.error("\ud83d\udea2 [SW] Service Worker registration failed:",e)}))}));const NR=new Ie.QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:3e5}}});s.createRoot(document.getElementById("root")).render((0,wo.jsx)(i.StrictMode,{children:(0,wo.jsx)(Ie.QueryClientProvider,{client:NR,children:(0,wo.jsxs)(Te,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[(0,wo.jsx)(jR,{}),(0,wo.jsx)(nn,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}))})()})();