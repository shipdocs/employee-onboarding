/*! For license information please see main.60ed894a.js.LICENSE.txt */
(()=>{var e={54:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===e&&(e={});var n={},c=Boolean(e.type&&o[e.type]);for(var d in e){var u=e[d];if((0,i.isCustomAttribute)(d))n[d]=u;else{var h=d.toLowerCase(),m=l(h);if(m){var p=(0,i.getPropertyInfo)(m);switch(r.includes(m)&&s.includes(t)&&!c&&(m=l("default"+h)),n[m]=u,p&&p.type){case i.BOOLEAN:n[m]=!0;break;case i.OVERLOADED_BOOLEAN:""===u&&(n[m]=!0)}}else a.PRESERVE_CUSTOM_ATTRIBUTES&&(n[d]=u)}}return(0,a.setStyleProp)(e.style,n),n};var i=n(676),a=n(156),r=["checked","value"],s=["input","select","textarea"],o={reset:!0,submit:!0};function l(e){return i.possibleStandardNames[e]}},58:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var r=n(251),s=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),w(this,e)},e}();t.Node=s;var o=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return i(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(s);t.DataNode=o;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Text,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(o);t.Text=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Comment,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(o);t.Comment=c;var d=function(e){function t(t,n){var i=e.call(this,n)||this;return i.name=t,i.type=r.ElementType.Directive,i}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(o);t.ProcessingInstruction=d;var u=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return i(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(s);t.NodeWithChildren=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.CDATA,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(u);t.CDATA=h;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Root,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(u);t.Document=m;var p=function(e){function t(t,n,i,a){void 0===i&&(i=[]),void 0===a&&(a="script"===t?r.ElementType.Script:"style"===t?r.ElementType.Style:r.ElementType.Tag);var s=e.call(this,i)||this;return s.name=t,s.attribs=n,s.type=a,s}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,i;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(i=e["x-attribsPrefix"])||void 0===i?void 0:i[t]}}))},enumerable:!1,configurable:!0}),t}(u);function f(e){return(0,r.isTag)(e)}function g(e){return e.type===r.ElementType.CDATA}function v(e){return e.type===r.ElementType.Text}function b(e){return e.type===r.ElementType.Comment}function x(e){return e.type===r.ElementType.Directive}function y(e){return e.type===r.ElementType.Root}function w(e,t){var n;if(void 0===t&&(t=!1),v(e))n=new l(e.data);else if(b(e))n=new c(e.data);else if(f(e)){var i=t?_(e.children):[],r=new p(e.name,a({},e.attribs),i);i.forEach((function(e){return e.parent=r})),null!=e.namespace&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]=a({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]=a({},e["x-attribsPrefix"])),n=r}else if(g(e)){i=t?_(e.children):[];var s=new h(i);i.forEach((function(e){return e.parent=s})),n=s}else if(y(e)){i=t?_(e.children):[];var o=new m(i);i.forEach((function(e){return e.parent=o})),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else{if(!x(e))throw new Error("Not implemented yet: ".concat(e.type));var u=new d(e.name,e.data);null!=e["x-name"]&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function _(e){for(var t=e.map((function(e){return w(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=p,t.isTag=f,t.isCDATA=g,t.isText=v,t.isComment=b,t.isDirective=x,t.isDocument=y,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=w},85:(e,t,n)=>{"use strict";var i=n(340),a=n(950),r=n(119);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),w=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case N:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case w:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var D=Array.isArray,R=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},I=[],F=-1;function z(e){return{current:e}}function q(e){0>F||(e.current=I[F],I[F]=null,F--)}function W(e,t){F++,I[F]=e.current,e.current=t}var B=z(null),U=z(null),V=z(null),H=z(null);function G(e,t){switch(W(V,t),W(U,e),W(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?au(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ru(t=au(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(B),W(B,e)}function Q(){q(B),q(U),q(V)}function Y(e){null!==e.memoizedState&&W(H,e);var t=B.current,n=ru(t,e.type);t!==n&&(W(U,e),W(B,n))}function K(e){U.current===e&&(q(B),q(U)),H.current===e&&(q(H),Yu._currentValue=L)}var X=Object.prototype.hasOwnProperty,J=i.unstable_scheduleCallback,$=i.unstable_cancelCallback,Z=i.unstable_shouldYield,ee=i.unstable_requestPaint,te=i.unstable_now,ne=i.unstable_getCurrentPriorityLevel,ie=i.unstable_ImmediatePriority,ae=i.unstable_UserBlockingPriority,re=i.unstable_NormalPriority,se=i.unstable_LowPriority,oe=i.unstable_IdlePriority,le=i.log,ce=i.unstable_setDisableYieldValue,de=null,ue=null;function he(e){if("function"===typeof le&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2;var ge=256,ve=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var a=0,r=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~r)?a=be(i):0!==(s&=o)?a=be(s):n||0!==(n=o&~e)&&(a=be(n)):0!==(o=i&~r)?a=be(o):0!==s?a=be(s):n||0!==(n=i&~e)&&(a=be(n)),0===a?0:0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(n=t&-t)||32===r&&0!==(4194048&n))?t:a}function ye(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function ke(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Ne(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function je(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-me(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-me(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Me=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Me,De="__reactProps$"+Me,Re="__reactContainer$"+Me,Oe="__reactEvents$"+Me,Le="__reactListeners$"+Me,Ie="__reactHandles$"+Me,Fe="__reactResources$"+Me,ze="__reactMarker$"+Me;function qe(e){delete e[Pe],delete e[De],delete e[Oe],delete e[Le],delete e[Ie]}function We(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xu(e);null!==e;){if(n=e[Pe])return n;e=xu(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Pe]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ve(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[ze]=!0}var Ge=new Set,Qe={};function Ye(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Qe[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Xe,Je,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(a=t,X.call(et,a)||!X.call(Ze,a)&&($e.test(a)?et[a]=!0:(Ze[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function it(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function at(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var rt=!1;function st(e,t){if(!e||rt)return"";rt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var i=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){i=r}e.call(n.prototype)}}else{try{throw Error()}catch(s){i=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&i&&"string"===typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),s=r[0],o=r[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(a=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(i===l.length||a===c.length)for(i=l.length-1,a=c.length-1;1<=i&&0<=a&&l[i]!==c[a];)a--;for(;1<=i&&0<=a;i--,a--)if(l[i]!==c[a]){if(1!==i||1!==a)do{if(i--,0>--a||l[i]!==c[a]){var d="\n"+l[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=i&&0<=a);break}}}finally{rt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return at("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=dt(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,i,a,r,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?bt(e,s,ct(t)):null!=n?bt(e,s,ct(n)):null!=i&&e.removeAttribute("value"),null==a&&null!=r&&(e.defaultChecked=!!r),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,i,a,r,s,o){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=n){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:a)&&"symbol"!==typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(i&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function yt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(s(92));if(D(i)){if(1<i.length)throw Error(s(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var a in t)i=t[a],t.hasOwnProperty(a)&&n[a]!==i&&Nt(e,a,i)}else for(var r in t)t.hasOwnProperty(r)&&Nt(e,r,t[r])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Dt=null;function Rt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=i[De]||null;if(!a)throw Error(s(90));gt(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&ht(i)}break e;case"textarea":yt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Lt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Dt)&&(Wc(),Pt&&(t=Pt,e=Dt,Dt=Pt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function It(e,t){var n=e.stateNode;if(null===n)return null;var i=n[De]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Ft)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(Dh){zt=!1}var Wt=null,Bt=null,Ut=null;function Vt(){if(Ut)return Ut;var e,t,n=Bt,i=n.length,a="value"in Wt?Wt.value:Wt.textContent,r=a.length;for(e=0;e<i&&n[e]===a[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===a[r-t];t++);return Ut=a.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Qt(){return!1}function Yt(e){function t(t,n,i,a,r){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Gt:Qt,this.isPropagationStopped=Qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Kt,Xt,Jt,$t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Yt($t),en=h({},$t,{view:0,detail:0}),tn=Yt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Kt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Kt=0,Jt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),an=Yt(nn),rn=Yt(h({},nn,{dataTransfer:0})),sn=Yt(h({},en,{relatedTarget:0})),on=Yt(h({},$t,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(h({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Yt(h({},$t,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return mn}var fn=Yt(h({},en,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),bn=Yt(h({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=Yt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yn=Yt(h({},$t,{newState:0,oldState:0})),wn=[9,13,27,32],_n=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var Nn=Ft&&"TextEvent"in window&&!kn,jn=Ft&&(!_n||kn&&8<kn&&11>=kn),Sn=String.fromCharCode(32),Cn=!1;function En(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Tn=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function Dn(e,t,n,i){Pt?Dt?Dt.push(i):Dt=[i]:Pt=i,0<(t=Vd(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Rn=null,On=null;function Ln(e){Ld(e,0)}function In(e){if(ht(Ue(e)))return e}function Fn(e,t){if("change"===e)return t}var zn=!1;if(Ft){var qn;if(Ft){var Wn="oninput"in document;if(!Wn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),Wn="function"===typeof Bn.oninput}qn=Wn}else qn=!1;zn=qn&&(!document.documentMode||9<document.documentMode)}function Un(){Rn&&(Rn.detachEvent("onpropertychange",Vn),On=Rn=null)}function Vn(e){if("value"===e.propertyName&&In(On)){var t=[];Dn(t,On,e,Mt(e)),Lt(Ln,t)}}function Hn(e,t,n){"focusin"===e?(Un(),On=n,(Rn=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Un()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return In(On)}function Qn(e,t){if("click"===e)return In(t)}function Yn(e,t){if("input"===e||"change"===e)return In(t)}var Kn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Kn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!X.call(t,a)||!Kn(e[a],t[a]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,i=Jn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Jn(i)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ei(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ni=Ft&&"documentMode"in document&&11>=document.documentMode,ii=null,ai=null,ri=null,si=!1;function oi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;si||null==ii||ii!==mt(i)||("selectionStart"in(i=ii)&&ti(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},ri&&Xn(ri,i)||(ri=i,0<(i=Vd(ai,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ii)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ci={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},di={},ui={};function hi(e){if(di[e])return di[e];if(!ci[e])return e;var t,n=ci[e];for(t in n)if(n.hasOwnProperty(t)&&t in ui)return di[e]=n[t];return e}Ft&&(ui=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);var mi=hi("animationend"),pi=hi("animationiteration"),fi=hi("animationstart"),gi=hi("transitionrun"),vi=hi("transitionstart"),bi=hi("transitioncancel"),xi=hi("transitionend"),yi=new Map,wi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(e,t){yi.set(e,t),Ye(t,[e])}wi.push("scrollEnd");var ki=new WeakMap;function Ni(e,t){if("object"===typeof e&&null!==e){var n=ki.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},ki.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var ji=[],Si=0,Ci=0;function Ei(){for(var e=Si,t=Ci=Si=0;t<e;){var n=ji[t];ji[t++]=null;var i=ji[t];ji[t++]=null;var a=ji[t];ji[t++]=null;var r=ji[t];if(ji[t++]=null,null!==i&&null!==a){var s=i.pending;null===s?a.next=a:(a.next=s.next,s.next=a),i.pending=a}0!==r&&Pi(n,a,r)}}function Ai(e,t,n,i){ji[Si++]=e,ji[Si++]=t,ji[Si++]=n,ji[Si++]=i,Ci|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Ti(e,t,n,i){return Ai(e,t,n,i),Di(e)}function Mi(e,t){return Ai(e,null,null,t),Di(e)}function Pi(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var a=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(i=r.alternate)&&(i.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(a=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,a&&null!==t&&(a=31-me(n),null===(i=(e=r.hiddenUpdates)[a])?e[a]=[t]:i.push(t),t.lane=536870912|n),r):null}function Di(e){if(50<Pc)throw Pc=0,Dc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ri={};function Oi(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(e,t,n,i){return new Oi(e,t,n,i)}function Ii(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fi(e,t){var n=e.alternate;return null===n?((n=Li(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qi(e,t,n,i,a,r){var o=0;if(i=e,"function"===typeof e)Ii(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Li(31,n,t,a)).elementType=C,e.lanes=r,e;case g:return Wi(n.children,a,r,t);case v:o=8,a|=24;break;case b:return(e=Li(12,n,t,2|a)).elementType=b,e.lanes=r,e;case k:return(e=Li(13,n,t,a)).elementType=k,e.lanes=r,e;case N:return(e=Li(19,n,t,a)).elementType=N,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:case w:o=10;break e;case y:o=9;break e;case _:o=11;break e;case j:o=14;break e;case S:o=16,i=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),i=null}return(t=Li(o,n,t,a)).elementType=e,t.type=i,t.lanes=r,t}function Wi(e,t,n,i){return(e=Li(7,e,i,t)).lanes=n,e}function Bi(e,t,n){return(e=Li(6,e,null,t)).lanes=n,e}function Ui(e,t,n){return(t=Li(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vi=[],Hi=0,Gi=null,Qi=0,Yi=[],Ki=0,Xi=null,Ji=1,$i="";function Zi(e,t){Vi[Hi++]=Qi,Vi[Hi++]=Gi,Gi=e,Qi=t}function ea(e,t,n){Yi[Ki++]=Ji,Yi[Ki++]=$i,Yi[Ki++]=Xi,Xi=e;var i=Ji;e=$i;var a=32-me(i)-1;i&=~(1<<a),n+=1;var r=32-me(t)+a;if(30<r){var s=a-a%5;r=(i&(1<<s)-1).toString(32),i>>=s,a-=s,Ji=1<<32-me(t)+a|n<<a|i,$i=r+e}else Ji=1<<r|n<<a|i,$i=e}function ta(e){null!==e.return&&(Zi(e,1),ea(e,1,0))}function na(e){for(;e===Gi;)Gi=Vi[--Hi],Vi[Hi]=null,Qi=Vi[--Hi],Vi[Hi]=null;for(;e===Xi;)Xi=Yi[--Ki],Yi[Ki]=null,$i=Yi[--Ki],Yi[Ki]=null,Ji=Yi[--Ki],Yi[Ki]=null}var ia=null,aa=null,ra=!1,sa=null,oa=!1,la=Error(s(519));function ca(e){throw fa(Ni(Error(s(418,"")),e)),la}function da(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Pe]=e,t[De]=i,n){case"dialog":Id("cancel",t),Id("close",t);break;case"iframe":case"object":case"embed":Id("load",t);break;case"video":case"audio":for(n=0;n<Rd.length;n++)Id(Rd[n],t);break;case"source":Id("error",t);break;case"img":case"image":case"link":Id("error",t),Id("load",t);break;case"details":Id("toggle",t);break;case"input":Id("invalid",t),vt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ut(t);break;case"select":Id("invalid",t);break;case"textarea":Id("invalid",t),wt(t,i.value,i.defaultValue,i.children),ut(t)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Xd(t.textContent,n)?(null!=i.popover&&(Id("beforetoggle",t),Id("toggle",t)),null!=i.onScroll&&Id("scroll",t),null!=i.onScrollEnd&&Id("scrollend",t),null!=i.onClick&&(t.onclick=Jd),t=!0):t=!1,t||ca(e)}function ua(e){for(ia=e.return;ia;)switch(ia.tag){case 5:case 13:return void(oa=!1);case 27:case 3:return void(oa=!0);default:ia=ia.return}}function ha(e){if(e!==ia)return!1;if(!ra)return ua(e),ra=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||su(e.type,e.memoizedProps)),t=!t),t&&aa&&ca(e),ua(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){aa=vu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}aa=null}}else 27===n?(n=aa,mu(e.type)?(e=bu,bu=null,aa=e):aa=n):aa=ia?vu(e.stateNode.nextSibling):null;return!0}function ma(){aa=ia=null,ra=!1}function pa(){var e=sa;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),sa=null),e}function fa(e){null===sa?sa=[e]:sa.push(e)}var ga=z(null),va=null,ba=null;function xa(e,t,n){W(ga,t._currentValue),t._currentValue=n}function ya(e){e._currentValue=ga.current,q(ga)}function wa(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function _a(e,t,n,i){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var r=a.dependencies;if(null!==r){var o=a.child;r=r.firstContext;e:for(;null!==r;){var l=r;r=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),wa(r.return,n,e),i||(o=null);break e}r=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(r=o.alternate)&&(r.lanes|=n),wa(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function ka(e,t,n,i){e=null;for(var a=t,r=!1;null!==a;){if(!r)if(0!==(524288&a.flags))r=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=a.type;Kn(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===H.current){if(null===(o=a.alternate))throw Error(s(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Yu):e=[Yu])}a=a.return}null!==e&&_a(t,e,n,i),t.flags|=262144}function Na(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ja(e){va=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Sa(e){return Ea(va,e)}function Ca(e,t){return null===va&&ja(e),Ea(e,t)}function Ea(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ba){if(null===e)throw Error(s(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return n}var Aa="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ta=i.unstable_scheduleCallback,Ma=i.unstable_NormalPriority,Pa={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Da(){return{controller:new Aa,data:new Map,refCount:0}}function Ra(e){e.refCount--,0===e.refCount&&Ta(Ma,(function(){e.controller.abort()}))}var Oa=null,La=0,Ia=0,Fa=null;function za(){if(0===--La&&null!==Oa){null!==Fa&&(Fa.status="fulfilled");var e=Oa;Oa=null,Ia=0,Fa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qa=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Oa){var n=Oa=[];La=0,Ia=Ad(),Fa={status:"pending",value:void 0,then:function(e){n.push(e)}}}La++,t.then(za,za)}(0,t),null!==qa&&qa(e,t)};var Wa=z(null);function Ba(){var e=Wa.current;return null!==e?e:ic.pooledCache}function Ua(e,t){W(Wa,null===t?Wa.current:t.pool)}function Va(){var e=Ba();return null===e?null:{parent:Pa._currentValue,pool:e}}var Ha=Error(s(460)),Ga=Error(s(474)),Qa=Error(s(542)),Ya={then:function(){}};function Ka(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xa(){}function Ja(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xa,Xa),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xa,Xa);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e}throw $a=t,Ha}}var $a=null;function Za(){if(null===$a)throw Error(s(459));var e=$a;return $a=null,e}function er(e){if(e===Ha||e===Qa)throw Error(s(483))}var tr=!1;function nr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ir(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ar(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&nc)){var a=i.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=Di(e),Pi(e,null,n),t}return Ai(e,i,t,n),Di(e)}function sr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function or(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var a=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?a=r=s:r=r.next=s,n=n.next}while(null!==n);null===r?a=r=t:r=r.next=t}else a=r=t;return n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lr=!1;function cr(){if(lr){if(null!==Fa)throw Fa}}function dr(e,t,n,i){lr=!1;var a=e.updateQueue;tr=!1;var r=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?r=c:s.next=c,s=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=a.baseState;for(s=0,d=c=l=null,o=r;;){var m=-536870913&o.lane,p=m!==o.lane;if(p?(rc&m)===m:(i&m)===m){0!==m&&m===Ia&&(lr=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,g=o;m=t;var v=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(v,u,m);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=g.payload)?f.call(v,u,m):f)||void 0===m)break e;u=h({},u,m);break e;case 2:tr=!0}}null!==(m=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[m]:p.push(m))}else p={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=m;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===r&&(a.shared.lanes=0),mc|=s,e.lanes=s,e.memoizedState=u}}function ur(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function hr(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ur(n[e],t)}var mr=z(null),pr=z(0);function fr(e,t){W(pr,e=uc),W(mr,t),uc=e|t.baseLanes}function gr(){W(pr,uc),W(mr,mr.current)}function vr(){uc=pr.current,q(mr),q(pr)}var br=0,xr=null,yr=null,wr=null,_r=!1,kr=!1,Nr=!1,jr=0,Sr=0,Cr=null,Er=0;function Ar(){throw Error(s(321))}function Tr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function Mr(e,t,n,i,a,r){return br=r,xr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Hs:Gs,Nr=!1,r=n(i,a),Nr=!1,kr&&(r=Dr(t,n,i,a)),Pr(e),r}function Pr(e){R.H=Vs;var t=null!==yr&&null!==yr.next;if(br=0,wr=yr=xr=null,_r=!1,Sr=0,Cr=null,t)throw Error(s(300));null===e||Co||null!==(e=e.dependencies)&&Na(e)&&(Co=!0)}function Dr(e,t,n,i){xr=e;var a=0;do{if(kr&&(Cr=null),Sr=0,kr=!1,25<=a)throw Error(s(301));if(a+=1,wr=yr=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}R.H=Qs,r=t(n,i)}while(kr);return r}function Rr(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?qr(t):t,e=e.useState()[0],(null!==yr?yr.memoizedState:null)!==e&&(xr.flags|=1024),t}function Or(){var e=0!==jr;return jr=0,e}function Lr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ir(e){if(_r){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}_r=!1}br=0,wr=yr=xr=null,kr=!1,Sr=jr=0,Cr=null}function Fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wr?xr.memoizedState=wr=e:wr=wr.next=e,wr}function zr(){if(null===yr){var e=xr.alternate;e=null!==e?e.memoizedState:null}else e=yr.next;var t=null===wr?xr.memoizedState:wr.next;if(null!==t)wr=t,yr=e;else{if(null===e){if(null===xr.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(yr=e).memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},null===wr?xr.memoizedState=wr=e:wr=wr.next=e}return wr}function qr(e){var t=Sr;return Sr+=1,null===Cr&&(Cr=[]),e=Ja(Cr,e,t),t=xr,null===(null===wr?t.memoizedState:wr.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Hs:Gs),e}function Wr(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return qr(e);if(e.$$typeof===w)return Sa(e)}throw Error(s(438,String(e)))}function Br(e){var t=null,n=xr.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=xr.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xr.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=E;return t.index++,n}function Ur(e,t){return"function"===typeof t?t(e):t}function Vr(e){return Hr(zr(),yr,e)}function Hr(e,t,n){var i=e.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=n;var a=e.baseQueue,r=i.pending;if(null!==r){if(null!==a){var o=a.next;a.next=r.next,r.next=o}t.baseQueue=a=r,i.pending=null}if(r=e.baseState,null===a)e.memoizedState=r;else{var l=o=null,c=null,d=t=a.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(rc&h)===h:(br&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Ia&&(u=!0);else{if((br&m)===m){d=d.next,m===Ia&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=r):c=c.next=h,xr.lanes|=m,mc|=m}h=d.action,Nr&&n(r,h),r=d.hasEagerState?d.eagerState:n(r,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,o=r):c=c.next=m,xr.lanes|=h,mc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=r:c.next=l,!Kn(r,e.memoizedState)&&(Co=!0,u&&null!==(n=Fa)))throw n;e.memoizedState=r,e.baseState=o,e.baseQueue=c,i.lastRenderedState=r}return null===a&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Gr(e){var t=zr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,r=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{r=e(r,o.action),o=o.next}while(o!==a);Kn(r,t.memoizedState)||(Co=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function Qr(e,t,n){var i=xr,a=zr(),r=ra;if(r){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!Kn((yr||a).memoizedState,n);if(o&&(a.memoizedState=n,Co=!0),a=a.queue,gs(2048,8,Xr.bind(null,i,a,e),[e]),a.getSnapshot!==t||o||null!==wr&&1&wr.memoizedState.tag){if(i.flags|=2048,ms(9,{destroy:void 0,resource:void 0},Kr.bind(null,i,a,n,t),null),null===ic)throw Error(s(349));r||0!==(124&br)||Yr(i,t,n)}return n}function Yr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xr.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Kr(e,t,n,i){t.value=n,t.getSnapshot=i,Jr(t)&&$r(e)}function Xr(e,t,n){return n((function(){Jr(t)&&$r(e)}))}function Jr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(i){return!0}}function $r(e){var t=Mi(e,2);null!==t&&Lc(t,e,2)}function Zr(e){var t=Fr();if("function"===typeof e){var n=e;if(e=n(),Nr){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:e},t}function es(e,t,n,i){return e.baseState=n,Hr(e,yr,"function"===typeof i?i:Ur)}function ts(e,t,n,i,a){if(Ws(e))throw Error(s(485));if(null!==(e=t.action)){var r={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==R.T?n(!0):r.isTransition=!1,i(r),null===(n=t.pending)?(r.next=t.pending=r,ns(t,r)):(r.next=n.next,t.pending=n.next=r)}}function ns(e,t){var n=t.action,i=t.payload,a=e.state;if(t.isTransition){var r=R.T,s={};R.T=s;try{var o=n(a,i),l=R.S;null!==l&&l(s,o),is(e,t,o)}catch(c){rs(e,t,c)}finally{R.T=r}}else try{is(e,t,r=n(a,i))}catch(d){rs(e,t,d)}}function is(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){as(e,t,n)}),(function(n){return rs(e,t,n)})):as(e,t,n)}function as(e,t,n){t.status="fulfilled",t.value=n,ss(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ns(e,n)))}function rs(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,ss(t),t=t.next}while(t!==i)}e.action=null}function ss(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function os(e,t){return t}function ls(e,t){if(ra){var n=ic.formState;if(null!==n){e:{var i=xr;if(ra){if(aa){t:{for(var a=aa,r=oa;8!==a.nodeType;){if(!r){a=null;break t}if(null===(a=vu(a.nextSibling))){a=null;break t}}a="F!"===(r=a.data)||"F"===r?a:null}if(a){aa=vu(a.nextSibling),i="F!"===a.data;break e}}ca(i)}i=!1}i&&(t=n[0])}}return(n=Fr()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},n.queue=i,n=Fs.bind(null,xr,i),i.dispatch=n,i=Zr(!1),r=qs.bind(null,xr,!1,i.queue),a={state:t,dispatch:null,action:e,pending:null},(i=Fr()).queue=a,n=ts.bind(null,xr,a,r,n),a.dispatch=n,i.memoizedState=e,[t,n,!1]}function cs(e){return ds(zr(),yr,e)}function ds(e,t,n){if(t=Hr(e,t,os)[0],e=Vr(Ur)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=qr(t)}catch(s){if(s===Ha)throw Qa;throw s}else i=t;var a=(t=zr()).queue,r=a.dispatch;return n!==t.memoizedState&&(xr.flags|=2048,ms(9,{destroy:void 0,resource:void 0},us.bind(null,a,n),null)),[i,r,e]}function us(e,t){e.action=t}function hs(e){var t=zr(),n=yr;if(null!==n)return ds(t,n,e);zr(),t=t.memoizedState;var i=(n=zr()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ms(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=xr.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xr.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ps(){return zr().memoizedState}function fs(e,t,n,i){var a=Fr();i=void 0===i?null:i,xr.flags|=e,a.memoizedState=ms(1|t,{destroy:void 0,resource:void 0},n,i)}function gs(e,t,n,i){var a=zr();i=void 0===i?null:i;var r=a.memoizedState.inst;null!==yr&&null!==i&&Tr(i,yr.memoizedState.deps)?a.memoizedState=ms(t,r,n,i):(xr.flags|=e,a.memoizedState=ms(1|t,r,n,i))}function vs(e,t){fs(8390656,8,e,t)}function bs(e,t){gs(2048,8,e,t)}function xs(e,t){return gs(4,2,e,t)}function ys(e,t){return gs(4,4,e,t)}function ws(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function _s(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,gs(4,4,ws.bind(null,t,e),n)}function ks(){}function Ns(e,t){var n=zr();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Tr(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function js(e,t){var n=zr();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Tr(t,i[1]))return i[0];if(i=e(),Nr){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[i,t],i}function Ss(e,t,n){return void 0===n||0!==(1073741824&br)?e.memoizedState=t:(e.memoizedState=n,e=Oc(),xr.lanes|=e,mc|=e,n)}function Cs(e,t,n,i){return Kn(n,t)?n:null!==mr.current?(e=Ss(e,n,i),Kn(e,t)||(Co=!0),e):0===(42&br)?(Co=!0,e.memoizedState=n):(e=Oc(),xr.lanes|=e,mc|=e,t)}function Es(e,t,n,i,a){var r=O.p;O.p=0!==r&&8>r?r:8;var s=R.T,o={};R.T=o,qs(e,!1,t,n);try{var l=a(),c=R.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)zs(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),i}(l,i),Rc());else zs(e,t,i,Rc())}catch(d){zs(e,t,{then:function(){},status:"rejected",reason:d},Rc())}finally{O.p=r,R.T=s}}function As(){}function Ts(e,t,n,i){if(5!==e.tag)throw Error(s(476));var a=Ms(e).queue;Es(e,a,t,L,null===n?As:function(){return Ps(e),n(i)})}function Ms(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ps(e){zs(e,Ms(e).next.queue,{},Rc())}function Ds(){return Sa(Yu)}function Rs(){return zr().memoizedState}function Os(){return zr().memoizedState}function Ls(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Rc(),i=rr(t,e=ar(n),n);return null!==i&&(Lc(i,t,n),sr(i,t,n)),t={cache:Da()},void(e.payload=t)}t=t.return}}function Is(e,t,n){var i=Rc();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ws(e)?Bs(t,n):null!==(n=Ti(e,t,n,i))&&(Lc(n,e,i),Us(n,t,i))}function Fs(e,t,n){zs(e,t,n,Rc())}function zs(e,t,n,i){var a={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ws(e))Bs(t,a);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=r(s,n);if(a.hasEagerState=!0,a.eagerState=o,Kn(o,s))return Ai(e,t,a,0),null===ic&&Ei(),!1}catch(l){}if(null!==(n=Ti(e,t,a,i)))return Lc(n,e,i),Us(n,t,i),!0}return!1}function qs(e,t,n,i){if(i={lane:2,revertLane:Ad(),action:i,hasEagerState:!1,eagerState:null,next:null},Ws(e)){if(t)throw Error(s(479))}else null!==(t=Ti(e,n,i,2))&&Lc(t,e,2)}function Ws(e){var t=e.alternate;return e===xr||null!==t&&t===xr}function Bs(e,t){kr=_r=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Us(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Vs={readContext:Sa,use:Wr,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useLayoutEffect:Ar,useInsertionEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useSyncExternalStore:Ar,useId:Ar,useHostTransitionStatus:Ar,useFormState:Ar,useActionState:Ar,useOptimistic:Ar,useMemoCache:Ar,useCacheRefresh:Ar},Hs={readContext:Sa,use:Wr,useCallback:function(e,t){return Fr().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:vs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,fs(4194308,4,ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fs(4194308,4,e,t)},useInsertionEffect:function(e,t){fs(4,2,e,t)},useMemo:function(e,t){var n=Fr();t=void 0===t?null:t;var i=e();if(Nr){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Fr();if(void 0!==n){var a=n(t);if(Nr){he(!0);try{n(t)}finally{he(!1)}}}else a=t;return i.memoizedState=i.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},i.queue=e,e=e.dispatch=Is.bind(null,xr,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Fr().memoizedState=e},useState:function(e){var t=(e=Zr(e)).queue,n=Fs.bind(null,xr,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ks,useDeferredValue:function(e,t){return Ss(Fr(),e,t)},useTransition:function(){var e=Zr(!1);return e=Es.bind(null,xr,e.queue,!0,!1),Fr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=xr,a=Fr();if(ra){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===ic)throw Error(s(349));0!==(124&rc)||Yr(i,t,n)}a.memoizedState=n;var r={value:n,getSnapshot:t};return a.queue=r,vs(Xr.bind(null,i,r,e),[e]),i.flags|=2048,ms(9,{destroy:void 0,resource:void 0},Kr.bind(null,i,r,n,t),null),n},useId:function(){var e=Fr(),t=ic.identifierPrefix;if(ra){var n=$i;t="\xab"+t+"R"+(n=(Ji&~(1<<32-me(Ji)-1)).toString(32)+n),0<(n=jr++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Er++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ds,useFormState:ls,useActionState:ls,useOptimistic:function(e){var t=Fr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qs.bind(null,xr,!0,n),n.dispatch=t,[e,t]},useMemoCache:Br,useCacheRefresh:function(){return Fr().memoizedState=Ls.bind(null,xr)}},Gs={readContext:Sa,use:Wr,useCallback:Ns,useContext:Sa,useEffect:bs,useImperativeHandle:_s,useInsertionEffect:xs,useLayoutEffect:ys,useMemo:js,useReducer:Vr,useRef:ps,useState:function(){return Vr(Ur)},useDebugValue:ks,useDeferredValue:function(e,t){return Cs(zr(),yr.memoizedState,e,t)},useTransition:function(){var e=Vr(Ur)[0],t=zr().memoizedState;return["boolean"===typeof e?e:qr(e),t]},useSyncExternalStore:Qr,useId:Rs,useHostTransitionStatus:Ds,useFormState:cs,useActionState:cs,useOptimistic:function(e,t){return es(zr(),0,e,t)},useMemoCache:Br,useCacheRefresh:Os},Qs={readContext:Sa,use:Wr,useCallback:Ns,useContext:Sa,useEffect:bs,useImperativeHandle:_s,useInsertionEffect:xs,useLayoutEffect:ys,useMemo:js,useReducer:Gr,useRef:ps,useState:function(){return Gr(Ur)},useDebugValue:ks,useDeferredValue:function(e,t){var n=zr();return null===yr?Ss(n,e,t):Cs(n,yr.memoizedState,e,t)},useTransition:function(){var e=Gr(Ur)[0],t=zr().memoizedState;return["boolean"===typeof e?e:qr(e),t]},useSyncExternalStore:Qr,useId:Rs,useHostTransitionStatus:Ds,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var n=zr();return null!==yr?es(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Br,useCacheRefresh:Os},Ys=null,Ks=0;function Xs(e){var t=Ks;return Ks+=1,null===Ys&&(Ys=[]),Ja(Ys,e,t)}function Js(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $s(e,t){if(t.$$typeof===m)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zs(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Fi(e,t)).index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Bi(n,e.mode,i)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,i){var r=n.type;return r===g?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===S&&Zs(r)===t.type)?(Js(t=a(t,n.props),n),t.return=e,t):(Js(t=qi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ui(n,e.mode,i)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,i,r){return null===t||7!==t.tag?((t=Wi(n,e.mode,i,r)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Bi(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Js(n=qi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Ui(t,e.mode,n)).return=e,t;case S:return h(e,t=(0,t._init)(t._payload),n)}if(D(t)||T(t))return(t=Wi(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xs(t),n);if(t.$$typeof===w)return h(e,Ca(e,t),n);$s(e,t)}return null}function m(e,t,n,i){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===a?c(e,t,n,i):null;case f:return n.key===a?d(e,t,n,i):null;case S:return m(e,t,n=(a=n._init)(n._payload),i)}if(D(n)||T(n))return null!==a?null:u(e,t,n,i,null);if("function"===typeof n.then)return m(e,t,Xs(n),i);if(n.$$typeof===w)return m(e,t,Ca(e,n),i);$s(e,n)}return null}function v(e,t,n,i,a){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,a);if("object"===typeof i&&null!==i){switch(i.$$typeof){case p:return c(t,e=e.get(null===i.key?n:i.key)||null,i,a);case f:return d(t,e=e.get(null===i.key?n:i.key)||null,i,a);case S:return v(e,t,n,i=(0,i._init)(i._payload),a)}if(D(i)||T(i))return u(t,e=e.get(n)||null,i,a,null);if("function"===typeof i.then)return v(e,t,n,Xs(i),a);if(i.$$typeof===w)return v(e,t,n,Ca(t,i),a);$s(t,i)}return null}function b(l,c,d,u){if("object"===typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case p:e:{for(var x=d.key;null!==c;){if(c.key===x){if((x=d.type)===g){if(7===c.tag){n(l,c.sibling),(u=a(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===x||"object"===typeof x&&null!==x&&x.$$typeof===S&&Zs(x)===c.type){n(l,c.sibling),Js(u=a(c,d.props),d),u.return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}d.type===g?((u=Wi(d.props.children,l.mode,u,d.key)).return=l,l=u):(Js(u=qi(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return o(l);case f:e:{for(x=d.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(u=a(c,d.children||[])).return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}(u=Ui(d,l.mode,u)).return=l,l=u}return o(l);case S:return b(l,c,d=(x=d._init)(d._payload),u)}if(D(d))return function(a,s,o,l){for(var c=null,d=null,u=s,p=s=0,f=null;null!==u&&p<o.length;p++){u.index>p?(f=u,u=null):f=u.sibling;var g=m(a,u,o[p],l);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(a,u),s=r(g,s,p),null===d?c=g:d.sibling=g,d=g,u=f}if(p===o.length)return n(a,u),ra&&Zi(a,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(a,o[p],l))&&(s=r(u,s,p),null===d?c=u:d.sibling=u,d=u);return ra&&Zi(a,p),c}for(u=i(u);p<o.length;p++)null!==(f=v(u,a,p,o[p],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?p:f.key),s=r(f,s,p),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach((function(e){return t(a,e)})),ra&&Zi(a,p),c}(l,c,d,u);if(T(d)){if("function"!==typeof(x=T(d)))throw Error(s(150));return function(a,o,l,c){if(null==l)throw Error(s(151));for(var d=null,u=null,p=o,f=o=0,g=null,b=l.next();null!==p&&!b.done;f++,b=l.next()){p.index>f?(g=p,p=null):g=p.sibling;var x=m(a,p,b.value,c);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(a,p),o=r(x,o,f),null===u?d=x:u.sibling=x,u=x,p=g}if(b.done)return n(a,p),ra&&Zi(a,f),d;if(null===p){for(;!b.done;f++,b=l.next())null!==(b=h(a,b.value,c))&&(o=r(b,o,f),null===u?d=b:u.sibling=b,u=b);return ra&&Zi(a,f),d}for(p=i(p);!b.done;f++,b=l.next())null!==(b=v(p,a,f,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?f:b.key),o=r(b,o,f),null===u?d=b:u.sibling=b,u=b);return e&&p.forEach((function(e){return t(a,e)})),ra&&Zi(a,f),d}(l,c,d=x.call(d),u)}if("function"===typeof d.then)return b(l,c,Xs(d),u);if(d.$$typeof===w)return b(l,c,Ca(l,d),u);$s(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(u=a(c,d)).return=l,l=u):(n(l,c),(u=Bi(d,l.mode,u)).return=l,l=u),o(l)):n(l,c)}return function(e,t,n,i){try{Ks=0;var a=b(e,t,n,i);return Ys=null,a}catch(s){if(s===Ha||s===Qa)throw s;var r=Li(29,s,null,e.mode);return r.lanes=i,r.return=e,r}}}var to=eo(!0),no=eo(!1),io=z(null),ao=null;function ro(e){var t=e.alternate;W(co,1&co.current),W(io,e),null===ao&&(null===t||null!==mr.current||null!==t.memoizedState)&&(ao=e)}function so(e){if(22===e.tag){if(W(co,co.current),W(io,e),null===ao){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ao=e)}}else oo()}function oo(){W(co,co.current),W(io,io.current)}function lo(e){q(io),ao===e&&(ao=null),q(co)}var co=z(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Rc(),a=ar(i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=rr(e,a,i))&&(Lc(t,e,i),sr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Rc(),a=ar(i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=rr(e,a,i))&&(Lc(t,e,i),sr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rc(),i=ar(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=rr(e,i,n))&&(Lc(t,e,n),sr(t,e,n))}};function po(e,t,n,i,a,r,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,s):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,i)||!Xn(a,r))}function fo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var a in n===t&&(n=h({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){vo(e)}function xo(e){console.error(e)}function yo(e){vo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function _o(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout((function(){throw i}))}}function ko(e,t,n){return(n=ar(n)).tag=3,n.payload={element:null},n.callback=function(){wo(e,t)},n}function No(e){return(e=ar(e)).tag=3,e}function jo(e,t,n,i){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var r=i.value;e.payload=function(){return a(r)},e.callback=function(){_o(t,n,i)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){_o(t,n,i),"function"!==typeof a&&(null===Nc?Nc=new Set([this]):Nc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var So=Error(s(461)),Co=!1;function Eo(e,t,n,i){t.child=null===e?no(t,null,n,i):to(t,e.child,n,i)}function Ao(e,t,n,i,a){n=n.render;var r=t.ref;if("ref"in i){var s={};for(var o in i)"ref"!==o&&(s[o]=i[o])}else s=i;return ja(t),i=Mr(e,t,n,s,r,a),o=Or(),null===e||Co?(ra&&o&&ta(t),t.flags|=1,Eo(e,t,i,a),t.child):(Lr(e,t,a),Ko(e,t,a))}function To(e,t,n,i,a){if(null===e){var r=n.type;return"function"!==typeof r||Ii(r)||void 0!==r.defaultProps||null!==n.compare?((e=qi(n.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Mo(e,t,r,i,a))}if(r=e.child,!Xo(e,a)){var s=r.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(s,i)&&e.ref===t.ref)return Ko(e,t,a)}return t.flags|=1,(e=Fi(r,i)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,n,i,a){if(null!==e){var r=e.memoizedProps;if(Xn(r,i)&&e.ref===t.ref){if(Co=!1,t.pendingProps=i=r,!Xo(e,a))return t.lanes=e.lanes,Ko(e,t,a);0!==(131072&e.flags)&&(Co=!0)}}return Oo(e,t,n,i,a)}function Po(e,t,n){var i=t.pendingProps,a=i.children,r=null!==e?e.memoizedState:null;if("hidden"===i.mode){if(0!==(128&t.flags)){if(i=null!==r?r.baseLanes|n:n,null!==e){for(a=t.child=e.child,r=0;null!==a;)r=r|a.lanes|a.childLanes,a=a.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Do(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Do(e,t,null!==r?r.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ua(0,null!==r?r.cachePool:null),null!==r?fr(t,r):gr(),so(t)}else null!==r?(Ua(0,r.cachePool),fr(t,r),oo(),t.memoizedState=null):(null!==e&&Ua(0,null),gr(),oo());return Eo(e,t,a,n),t.child}function Do(e,t,n,i){var a=Ba();return a=null===a?null:{parent:Pa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Ua(0,null),gr(),so(t),null!==e&&ka(e,t,i,!0),null}function Ro(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oo(e,t,n,i,a){return ja(t),n=Mr(e,t,n,i,void 0,a),i=Or(),null===e||Co?(ra&&i&&ta(t),t.flags|=1,Eo(e,t,n,a),t.child):(Lr(e,t,a),Ko(e,t,a))}function Lo(e,t,n,i,a,r){return ja(t),t.updateQueue=null,n=Dr(t,i,n,a),Pr(e),i=Or(),null===e||Co?(ra&&i&&ta(t),t.flags|=1,Eo(e,t,n,r),t.child):(Lr(e,t,r),Ko(e,t,r))}function Io(e,t,n,i,a){if(ja(t),null===t.stateNode){var r=Ri,s=n.contextType;"object"===typeof s&&null!==s&&(r=Sa(s)),r=new n(i,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=mo,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=i,r.state=t.memoizedState,r.refs={},nr(t),s=n.contextType,r.context="object"===typeof s&&null!==s?Sa(s):Ri,r.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(ho(t,n,s,i),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(s=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),s!==r.state&&mo.enqueueReplaceState(r,r.state,null),dr(t,i,r,a),cr(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){r=t.stateNode;var o=t.memoizedProps,l=go(n,o);r.props=l;var c=r.context,d=n.contextType;s=Ri,"object"===typeof d&&null!==d&&(s=Sa(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o||c!==s)&&fo(t,r,i,s),tr=!1;var h=t.memoizedState;r.state=h,dr(t,i,r,a),cr(),c=t.memoizedState,o||h!==c||tr?("function"===typeof u&&(ho(t,n,u,i),c=t.memoizedState),(l=tr||po(t,n,l,i,h,c,s))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=s,i=l):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,ir(e,t),d=go(n,s=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=n.contextType,l=Ri,"object"===typeof c&&null!==c&&(l=Sa(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(s!==u||h!==l)&&fo(t,r,i,l),tr=!1,h=t.memoizedState,r.state=h,dr(t,i,r,a),cr();var m=t.memoizedState;s!==u||h!==m||tr||null!==e&&null!==e.dependencies&&Na(e.dependencies)?("function"===typeof o&&(ho(t,n,o,i),m=t.memoizedState),(d=tr||po(t,n,d,i,h,m,l)||null!==e&&null!==e.dependencies&&Na(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,m,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,m,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),r.props=i,r.state=m,r.context=l,i=d):("function"!==typeof r.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Ro(e,t),i=0!==(128&t.flags),r||i?(r=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&i?(t.child=to(t,e.child,null,a),t.child=to(t,null,n,a)):Eo(e,t,n,a),t.memoizedState=r.state,e=t.child):e=Ko(e,t,a),e}function Fo(e,t,n,i){return ma(),t.flags|=256,Eo(e,t,n,i),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qo(e){return{baseLanes:e,cachePool:Va()}}function Wo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Bo(e,t,n){var i,a=t.pendingProps,r=!1,o=0!==(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),i&&(r=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(ra){if(r?ro(t):oo(),ra){var l,c=aa;if(l=c){e:{for(l=c,c=oa;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vu(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xi?{id:Ji,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},(l=Li(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ia=t,aa=null,l=!0):l=!1}l||ca(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gu(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=a.children,a=a.fallback,r?(oo(),c=Vo({mode:"hidden",children:c},r=t.mode),a=Wi(a,r,n,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(r=t.child).memoizedState=qo(n),r.childLanes=Wo(e,i,n),t.memoizedState=zo,a):(ro(t),Uo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(ro(t),t.flags&=-257,t=Ho(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),r=a.fallback,c=t.mode,a=Vo({mode:"visible",children:a.children},c),(r=Wi(r,c,n,null)).flags|=2,a.return=t,r.return=t,a.sibling=r,t.child=a,to(t,e.child,null,n),(a=t.child).memoizedState=qo(n),a.childLanes=Wo(e,i,n),t.memoizedState=zo,t=r);else if(ro(t),gu(c)){if(i=c.nextSibling&&c.nextSibling.dataset)var d=i.dgst;i=d,(a=Error(s(419))).stack="",a.digest=i,fa({value:a,source:null,stack:null}),t=Ho(e,t,n)}else if(Co||ka(e,t,n,!1),i=0!==(n&e.childLanes),Co||i){if(null!==(i=ic)&&(0!==(a=0!==((a=0!==(42&(a=n&-n))?1:Ee(a))&(i.suspendedLanes|n))?0:a)&&a!==l.retryLane))throw l.retryLane=a,Mi(e,a),Lc(i,e,a),So;"$?"===c.data||Qc(),t=Ho(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,aa=vu(c.nextSibling),ia=t,ra=!0,sa=null,oa=!1,null!==e&&(Yi[Ki++]=Ji,Yi[Ki++]=$i,Yi[Ki++]=Xi,Ji=e.id,$i=e.overflow,Xi=t),(t=Uo(t,a.children)).flags|=4096);return t}return r?(oo(),r=a.fallback,c=t.mode,d=(l=e.child).sibling,(a=Fi(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==d?r=Fi(d,r):(r=Wi(r,c,n,null)).flags|=2,r.return=t,a.return=t,a.sibling=r,t.child=a,a=r,r=t.child,null===(c=e.child.memoizedState)?c=qo(n):(null!==(l=c.cachePool)?(d=Pa._currentValue,l=l.parent!==d?{parent:d,pool:d}:l):l=Va(),c={baseLanes:c.baseLanes|n,cachePool:l}),r.memoizedState=c,r.childLanes=Wo(e,i,n),t.memoizedState=zo,a):(ro(t),e=(n=e.child).sibling,(n=Fi(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Uo(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=Li(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ho(e,t,n){return to(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),wa(e.return,t,n)}function Qo(e,t,n,i,a){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=a)}function Yo(e,t,n){var i=t.pendingProps,a=i.revealOrder,r=i.tail;if(Eo(e,t,i.children,n),0!==(2&(i=co.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(W(co,i),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Qo(t,!1,a,n,r);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Qo(t,!0,n,null,r);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ka(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Fi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Na(e))}function Jo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Xo(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),xa(0,Pa,e.memoizedState.cache),ma();break;case 27:case 5:Y(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:xa(0,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(ro(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(ro(t),null!==(e=Ko(e,t,n))?e.sibling:null);ro(t);break;case 19:var a=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(ka(e,t,n,!1),i=0!==(n&t.childLanes)),a){if(i)return Yo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),W(co,co.current),i)break;return null;case 22:case 23:return t.lanes=0,Po(e,t,n);case 24:xa(0,Pa,e.memoizedState.cache)}return Ko(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,ra&&0!==(1048576&t.flags)&&ea(t,Qi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,a=i._init;if(i=a(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((a=i.$$typeof)===_){t.tag=11,t=Ao(null,t,i,e,n);break e}if(a===j){t.tag=14,t=To(null,t,i,e,n);break e}}throw t=P(i)||i,Error(s(306,t,""))}Ii(i)?(e=go(i,e),t.tag=1,t=Io(null,t,i,e,n)):(t.tag=0,t=Oo(null,t,i,e,n))}return t;case 0:return Oo(e,t,t.type,t.pendingProps,n);case 1:return Io(e,t,i=t.type,a=go(i,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(s(387));i=t.pendingProps;var r=t.memoizedState;a=r.element,ir(e,t),dr(t,i,null,n);var o=t.memoizedState;if(i=o.cache,xa(0,Pa,i),i!==r.cache&&_a(t,[Pa],n,!0),cr(),i=o.element,r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Fo(e,t,i,n);break e}if(i!==a){fa(a=Ni(Error(s(424)),t)),t=Fo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=vu(e.firstChild),ia=t,ra=!0,sa=null,oa=!0,n=no(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ma(),i===a){t=Ko(e,t,n);break e}Eo(e,t,i,n)}t=t.child}return t;case 26:return Ro(e,t),null===e?(n=Eu(t.type,null,t.pendingProps,null))?t.memoizedState=n:ra||(n=t.type,e=t.pendingProps,(i=iu(V.current).createElement(n))[Pe]=t,i[De]=e,eu(i,n,e),He(i),t.stateNode=i):t.memoizedState=Eu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&ra&&(i=t.stateNode=yu(t.type,t.pendingProps,V.current),ia=t,oa=!0,a=aa,mu(t.type)?(bu=a,aa=vu(i.firstChild)):aa=a),Eo(e,t,t.pendingProps.children,n),Ro(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ra&&((a=i=aa)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===r)return e}if(null===(e=vu(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,oa))?(t.stateNode=i,ia=t,aa=vu(i.firstChild),oa=!1,a=!0):a=!1),a||ca(t)),Y(t),a=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,i=r.children,su(a,r)?i=null:null!==o&&su(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=Mr(e,t,Rr,null,null,n),Yu._currentValue=a),Ro(e,t),Eo(e,t,i,n),t.child;case 6:return null===e&&ra&&((e=n=aa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vu(e.nextSibling)))return null}return e}(n,t.pendingProps,oa))?(t.stateNode=n,ia=t,aa=null,e=!0):e=!1),e||ca(t)),null;case 13:return Bo(e,t,n);case 4:return G(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=to(t,null,i,n):Eo(e,t,i,n),t.child;case 11:return Ao(e,t,t.type,t.pendingProps,n);case 7:return Eo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,xa(0,t.type,i.value),Eo(e,t,i.children,n),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,ja(t),i=i(a=Sa(a)),t.flags|=1,Eo(e,t,i,n),t.child;case 14:return To(e,t,t.type,t.pendingProps,n);case 15:return Mo(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=Vo(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fi(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Po(e,t,n);case 24:return ja(t),i=Sa(Pa),null===e?(null===(a=Ba())&&(a=ic,r=Da(),a.pooledCache=r,r.refCount++,null!==r&&(a.pooledCacheLanes|=n),a=r),t.memoizedState={parent:i,cache:a},nr(t),xa(0,Pa,a)):(0!==(e.lanes&n)&&(ir(e,t),dr(t,null,null,n),cr()),a=e.memoizedState,r=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),xa(0,Pa,i)):(i=r.cache,xa(0,Pa,i),i!==a.cache&&_a(t,[Pa],n,!0))),Eo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function $o(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Wu(t)){if(null!==(t=io.current)&&((4194048&rc)===rc?null!==ao:(62914560&rc)!==rc&&0===(536870912&rc)||t!==ao))throw $a=Ya,Ga;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=65011712&a.subtreeFlags,i|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function il(e,t,n){var i=t.pendingProps;switch(na(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ya(Pa),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ha(t)?$o(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pa())),nl(t),null;case 26:return n=t.memoizedState,null===e?($o(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?($o(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==i&&$o(t),nl(t),t.flags&=-16777217),null;case 27:K(t),n=V.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&$o(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return nl(t),null}e=B.current,ha(t)?da(t):(e=yu(a,i,n),t.stateNode=e,$o(t))}return nl(t),null;case 5:if(K(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&$o(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return nl(t),null}if(e=B.current,ha(t))da(t);else{switch(a=iu(V.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof i.is?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"===typeof i.is?a.createElement(n,{is:i.is}):a.createElement(n)}}e[Pe]=t,e[De]=i;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(eu(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$o(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&$o(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(e=V.current,ha(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(a=ia))switch(a.tag){case 27:case 5:i=a.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Xd(e.nodeValue,n)))||ca(t)}else(e=iu(e).createTextNode(i))[Pe]=t,t.stateNode=e}return nl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[Pe]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),a=!1}else a=pa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(a=i.alternate.memoizedState.cachePool.pool);var r=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(r=i.memoizedState.cachePool.pool),r!==a&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Q(),null===e&&qd(t.stateNode.containerInfo),nl(t),null;case 10:return ya(t.type),nl(t),null;case 19:if(q(co),null===(a=t.memoizedState))return nl(t),null;if(i=0!==(128&t.flags),null===(r=a.rendering))if(i)tl(a,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=uo(e))){for(t.flags|=128,tl(a,!1),e=r.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zi(n,e),n=n.sibling;return W(co,1&co.current|2),t.child}e=e.sibling}null!==a.tail&&te()>_c&&(t.flags|=128,i=!0,tl(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=uo(r))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!r.alternate&&!ra)return nl(t),null}else 2*te()-a.renderingStartTime>_c&&536870912!==n&&(t.flags|=128,i=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=a.last)?e.sibling=r:t.child=r,a.last=r)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=co.current,W(co,i?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),vr(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&q(Wa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ya(Pa),nl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function al(e,t){switch(na(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ya(Pa),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return q(co),null;case 4:return Q(),null;case 10:return ya(t.type),null;case 22:case 23:return lo(t),vr(),null!==e&&q(Wa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ya(Pa),null;default:return null}}function rl(e,t){switch(na(t),t.tag){case 3:ya(Pa),Q();break;case 26:case 27:case 5:K(t);break;case 4:Q();break;case 13:lo(t);break;case 19:q(co);break;case 10:ya(t.type);break;case 22:case 23:lo(t),vr(),null!==e&&q(Wa);break;case 24:ya(Pa)}}function sl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var a=i.next;n=a;do{if((n.tag&e)===e){i=void 0;var r=n.create,s=n.inst;i=r(),s.destroy=i}n=n.next}while(n!==a)}}catch(o){dd(t,t.return,o)}}function ol(e,t,n){try{var i=t.updateQueue,a=null!==i?i.lastEffect:null;if(null!==a){var r=a.next;i=r;do{if((i.tag&e)===e){var s=i.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,a=t;var l=n,c=o;try{c()}catch(d){dd(a,l,d)}}}i=i.next}while(i!==r)}}catch(d){dd(t,t.return,d)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hr(t,n)}catch(i){dd(e,e.return,i)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){dd(e,t,i)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(a){dd(e,t,a)}}function ul(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(a){dd(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(r){dd(e,t,r)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(a){dd(e,e.return,a)}}function ml(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,r=null,o=null,l=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:i.hasOwnProperty(p)||$d(e,t,p,null,i,h)}}for(var m in i){var p=i[m];if(h=n[m],i.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":r=p;break;case"name":a=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&$d(e,t,m,p,i,h)}}return void gt(e,o,l,c,d,u,r,a);case"select":for(r in p=o=l=m=null,n)if(c=n[r],n.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(r)||$d(e,t,r,null,i,c)}for(a in i)if(r=i[a],c=n[a],i.hasOwnProperty(a)&&(null!=r||null!=c))switch(a){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":o=r;default:r!==c&&$d(e,t,a,r,i,c)}return t=l,n=o,i=p,void(null!=m?xt(e,!!n,m,!1):!!i!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=m=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:$d(e,t,l,null,i,a)}for(o in i)if(a=i[o],r=n[o],i.hasOwnProperty(o)&&(null!=a||null!=r))switch(o){case"value":m=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(s(91));break;default:a!==r&&$d(e,t,o,a,i,r)}return void yt(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!i.hasOwnProperty(f))if("selected"===f)e.selected=!1;else $d(e,t,f,null,i,m);for(c in i)if(m=i[c],p=n[c],i.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else $d(e,t,c,m,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!i.hasOwnProperty(g)&&$d(e,t,g,null,i,m);for(d in i)if(m=i[d],p=n[d],i.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(s(137,t));break;default:$d(e,t,d,m,i,p)}return;default:if(St(t)){for(var v in n)m=n[v],n.hasOwnProperty(v)&&void 0!==m&&!i.hasOwnProperty(v)&&Zd(e,t,v,void 0,i,m);for(u in i)m=i[u],p=n[u],!i.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||Zd(e,t,u,m,i,p);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&null!=m&&!i.hasOwnProperty(b)&&$d(e,t,b,null,i,m);for(h in i)m=i[h],p=n[h],!i.hasOwnProperty(h)||m===p||null==m&&null==p||$d(e,t,h,m,i,p)}(i,e.type,n,t),i[De]=t}catch(a){dd(e,e.return,a)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&mu(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&mu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jd));else if(4!==i&&(27===i&&mu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&mu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);eu(t,i,n),t[Pe]=e,t[De]=n}catch(r){dd(e,e.return,r)}}var xl=!1,yl=!1,wl=!1,_l="function"===typeof WeakSet?WeakSet:Set,kl=null;function Nl(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Il(e,n),4&i&&sl(5,n);break;case 1:if(Il(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){dd(n,n.return,s)}else{var a=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){dd(n,n.return,o)}}64&i&&ll(n),512&i&&dl(n,n.return);break;case 3:if(Il(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hr(e,t)}catch(s){dd(n,n.return,s)}}break;case 27:null===t&&4&i&&bl(n);case 26:case 5:Il(e,n),null===t&&4&i&&hl(n),512&i&&dl(n,n.return);break;case 12:Il(e,n);break;case 13:Il(e,n),4&i&&Tl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=pd.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||yl,a=xl;var r=yl;xl=i,(yl=t)&&!r?zl(e,n,0!==(8772&n.subtreeFlags)):Il(e,n),xl=a,yl=r}break;case 30:break;default:Il(e,n)}}function jl(e){var t=e.alternate;null!==t&&(e.alternate=null,jl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Sl=null,Cl=!1;function El(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,n)}catch(r){}switch(n.tag){case 26:yl||ul(n,t),El(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:yl||ul(n,t);var i=Sl,a=Cl;mu(n.type)&&(Sl=n.stateNode,Cl=!1),El(e,t,n),wu(n.stateNode),Sl=i,Cl=a;break;case 5:yl||ul(n,t);case 6:if(i=Sl,a=Cl,Sl=null,El(e,t,n),Cl=a,null!==(Sl=i))if(Cl)try{(9===Sl.nodeType?Sl.body:"HTML"===Sl.nodeName?Sl.ownerDocument.body:Sl).removeChild(n.stateNode)}catch(s){dd(n,t,s)}else try{Sl.removeChild(n.stateNode)}catch(s){dd(n,t,s)}break;case 18:null!==Sl&&(Cl?(pu(9===(e=Sl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):pu(Sl,n.stateNode));break;case 4:i=Sl,a=Cl,Sl=n.stateNode.containerInfo,Cl=!0,El(e,t,n),Sl=i,Cl=a;break;case 0:case 11:case 14:case 15:yl||ol(2,n,t),yl||ol(4,n,t),El(e,t,n);break;case 1:yl||(ul(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&cl(n,t,i)),El(e,t,n);break;case 21:El(e,t,n);break;case 22:yl=(i=yl)||null!==n.memoizedState,El(e,t,n),yl=i;break;default:El(e,t,n)}}function Tl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){dd(t,t.return,n)}}function Ml(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var i=fd.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}function Pl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var a=n[i],r=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(mu(l.type)){Sl=l.stateNode,Cl=!1;break e}break;case 5:Sl=l.stateNode,Cl=!1;break e;case 3:case 4:Sl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Sl)throw Error(s(160));Al(r,o,a),Sl=null,Cl=!1,null!==(r=a.alternate)&&(r.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Rl(t,e),t=t.sibling}var Dl=null;function Rl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ol(e),4&i&&(ol(3,e,e.return),sl(3,e),ol(5,e,e.return));break;case 1:Pl(t,e),Ol(e),512&i&&(yl||null===n||ul(n,n.return)),64&i&&xl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var a=Dl;if(Pl(t,e),Ol(e),512&i&&(yl||null===n||ul(n,n.return)),4&i){var r=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(i){case"title":(!(r=a.getElementsByTagName("title")[0])||r[ze]||r[Pe]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=a.createElement(i),a.head.insertBefore(r,a.querySelector("head > title"))),eu(r,i,n),r[Pe]=e,He(r),i=r;break e;case"link":var o=zu("link","href",a).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((r=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&r.getAttribute("rel")===(null==n.rel?null:n.rel)&&r.getAttribute("title")===(null==n.title?null:n.title)&&r.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}eu(r=a.createElement(i),i,n),a.head.appendChild(r);break;case"meta":if(o=zu("meta","content",a).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((r=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&r.getAttribute("name")===(null==n.name?null:n.name)&&r.getAttribute("property")===(null==n.property?null:n.property)&&r.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&r.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}eu(r=a.createElement(i),i,n),a.head.appendChild(r);break;default:throw Error(s(468,i))}r[Pe]=e,He(r),i=r}e.stateNode=i}else qu(a,e.type,e.stateNode);else e.stateNode=Ru(a,i,e.memoizedProps);else r!==i?(null===r?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):r.count--,null===i?qu(a,e.type,e.stateNode):Ru(a,i,e.memoizedProps)):null===i&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Ol(e),512&i&&(yl||null===n||ul(n,n.return)),null!==n&&4&i&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Ol(e),512&i&&(yl||null===n||ul(n,n.return)),32&e.flags){a=e.stateNode;try{_t(a,"")}catch(p){dd(e,e.return,p)}}4&i&&null!=e.stateNode&&ml(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&i&&(wl=!0);break;case 6:if(Pl(t,e),Ol(e),4&i){if(null===e.stateNode)throw Error(s(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){dd(e,e.return,p)}}break;case 3:if(Fu=null,a=Dl,Dl=Nu(t.containerInfo),Pl(t,e),Dl=a,Ol(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(p){dd(e,e.return,p)}wl&&(wl=!1,Ll(e));break;case 4:i=Dl,Dl=Nu(e.stateNode.containerInfo),Pl(t,e),Ol(e),Dl=i;break;case 12:default:Pl(t,e),Ol(e);break;case 13:Pl(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ml(e,i)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=xl,u=yl;if(xl=d||a,yl=u||c,Pl(t,e),yl=u,xl=d,Ol(e),8192&i)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||xl||yl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(r=c.stateNode,a)"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(p){dd(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(p){dd(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Ml(e,n))));break;case 19:Pl(t,e),Ol(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ml(e,i)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(pl(i)){n=i;break}i=i.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var a=n.stateNode;vl(e,fl(e),a);break;case 5:var r=n.stateNode;32&n.flags&&(_t(r,""),n.flags&=-33),vl(e,fl(e),r);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,fl(e),o);break;default:throw Error(s(161))}}catch(l){dd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ll(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ll(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Il(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Nl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:ul(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:wu(t.stateNode);case 26:case 5:ul(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,a=e,r=t,s=r.flags;switch(r.tag){case 0:case 11:case 15:zl(a,r,n),sl(4,r);break;case 1:if(zl(a,r,n),"function"===typeof(a=(i=r).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){dd(i,i.return,c)}if(null!==(a=(i=r).updateQueue)){var o=i.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)ur(l[a],o)}catch(c){dd(i,i.return,c)}}n&&64&s&&ll(r),dl(r,r.return);break;case 27:bl(r);case 26:case 5:zl(a,r,n),n&&null===i&&4&s&&hl(r),dl(r,r.return);break;case 12:zl(a,r,n);break;case 13:zl(a,r,n),n&&4&s&&Tl(a,r);break;case 22:null===r.memoizedState&&zl(a,r,n),dl(r,r.return);break;case 30:break;default:zl(a,r,n)}t=t.sibling}}function ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ra(n))}function Wl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ra(e))}function Bl(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,i),t=t.sibling}function Ul(e,t,n,i){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,i),2048&a&&sl(9,t);break;case 1:case 13:default:Bl(e,t,n,i);break;case 3:Bl(e,t,n,i),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ra(e)));break;case 12:if(2048&a){Bl(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,s=r.id,o=r.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){dd(t,t.return,l)}}else Bl(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,s=t.alternate,null!==t.memoizedState?2&r._visibility?Bl(e,t,n,i):Hl(e,t):2&r._visibility?Bl(e,t,n,i):(r._visibility|=2,Vl(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&a&&ql(s,t);break;case 24:Bl(e,t,n,i),2048&a&&Wl(t.alternate,t)}}function Vl(e,t,n,i,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,s=t,o=n,l=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(r,s,o,l,a),sl(8,s);break;case 23:break;case 22:var d=s.stateNode;null!==s.memoizedState?2&d._visibility?Vl(r,s,o,l,a):Hl(r,s):(d._visibility|=2,Vl(r,s,o,l,a)),a&&2048&c&&ql(s.alternate,s);break;case 24:Vl(r,s,o,l,a),a&&2048&c&&Wl(s.alternate,s);break;default:Vl(r,s,o,l,a)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,a=i.flags;switch(i.tag){case 22:Hl(n,i),2048&a&&ql(i.alternate,i);break;case 24:Hl(n,i),2048&a&&Wl(i.alternate,i);break;default:Hl(n,i)}t=t.sibling}}var Gl=8192;function Ql(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Bu)throw Error(s(475));var i=Bu;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Au(n.href),r=e.querySelector(Tu(a));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(i.count++,i=Vu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,void He(r);r=e.ownerDocument||e,n=Mu(n),(a=_u.get(a))&&Lu(n,a),He(r=r.createElement("link"));var o=r;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),eu(r,"link",n),t.instance=r}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(i.count++,t=Vu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Dl;Dl=Nu(e.stateNode.containerInfo),Ql(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Ql(e),Gl=t):Ql(e))}}function Kl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Zl(i,e)}Kl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,$l(e)):Xl(e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Zl(i,e)}Kl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),$l(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,$l(t));break;default:$l(t)}e=e.sibling}}function Zl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Ra(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,kl=i;else e:for(n=e;null!==kl;){var a=(i=kl).sibling,r=i.return;if(jl(i),i===n){kl=null;break e}if(null!==a){a.return=r,kl=a;break e}kl=r}}}var ec={getCacheForType:function(e){var t=Sa(Pa),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ic=null,ac=null,rc=0,sc=0,oc=null,lc=!1,cc=!1,dc=!1,uc=0,hc=0,mc=0,pc=0,fc=0,gc=0,vc=0,bc=null,xc=null,yc=!1,wc=0,_c=1/0,kc=null,Nc=null,jc=0,Sc=null,Cc=null,Ec=0,Ac=0,Tc=null,Mc=null,Pc=0,Dc=null;function Rc(){if(0!==(2&nc)&&0!==rc)return rc&-rc;if(null!==R.T){return 0!==Ia?Ia:Ad()}return Te()}function Oc(){0===gc&&(gc=0===(536870912&rc)||ra?_e():536870912);var e=io.current;return null!==e&&(e.flags|=32),gc}function Lc(e,t,n){(e!==ic||2!==sc&&9!==sc)&&null===e.cancelPendingCommit||(Uc(e,0),qc(e,rc,gc,!1)),je(e,n),0!==(2&nc)&&e===ic||(e===ic&&(0===(2&nc)&&(pc|=n),4===hc&&qc(e,rc,gc,!1)),_d(e))}function Ic(e,t,n){if(0!==(6&nc))throw Error(s(327));for(var i=!n&&0===(124&t)&&0===(t&e.expiredLanes)||ye(e,t),a=i?function(e,t){var n=nc;nc|=2;var i=Hc(),a=Gc();ic!==e||rc!==t?(kc=null,_c=te()+500,Uc(e,t)):cc=ye(e,t);e:for(;;)try{if(0!==sc&&null!==ac){t=ac;var r=oc;t:switch(sc){case 1:sc=0,oc=null,Zc(e,t,r,1);break;case 2:case 9:if(Ka(r)){sc=0,oc=null,$c(t);break}t=function(){2!==sc&&9!==sc||ic!==e||(sc=7),_d(e)},r.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:Ka(r)?(sc=0,oc=null,$c(t)):(sc=0,oc=null,Zc(e,t,r,7));break;case 5:var o=null;switch(ac.tag){case 26:o=ac.memoizedState;case 5:case 27:var l=ac;if(!o||Wu(o)){sc=0,oc=null;var c=l.sibling;if(null!==c)ac=c;else{var d=l.return;null!==d?(ac=d,ed(d)):ac=null}break t}}sc=0,oc=null,Zc(e,t,r,5);break;case 6:sc=0,oc=null,Zc(e,t,r,6);break;case 8:Bc(),hc=6;break e;default:throw Error(s(462))}}Xc();break}catch(u){Vc(e,u)}return ba=va=null,R.H=i,R.A=a,nc=n,null!==ac?0:(ic=null,rc=0,Ei(),hc)}(e,t):Yc(e,t,!0),r=i;;){if(0===a){cc&&!i&&qc(e,t,0,!1);break}if(n=e.current.alternate,!r||zc(n)){if(2===a){if(r=t,e.errorRecoveryDisabledLanes&r)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Uc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=r,pc|=r,a=4;break e}r=xc,xc=a,null!==r&&(null===xc?xc=r:xc.push.apply(xc,r))}a=o}if(r=!1,2!==a)continue}}if(1===a){Uc(e,0),qc(e,t,0,!0);break}e:{switch(i=e,r=a){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:qc(i,t,gc,!lc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(a=wc+300-te())){if(qc(i,t,gc,!lc),0!==xe(i,0,!0))break e;i.timeoutHandle=lu(Fc.bind(null,i,n,xc,kc,yc,t,gc,pc,vc,lc,r,2,-0,0),a)}else Fc(i,n,xc,kc,yc,t,gc,pc,vc,lc,r,0,-0,0)}break}a=Yc(e,t,!1),r=!1}_d(e)}function Fc(e,t,n,i,a,r,o,l,c,d,u,h,m,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bu={stylesheets:null,count:0,unsuspend:Uu},Yl(t),null!==(h=function(){if(null===Bu)throw Error(s(475));var e=Bu;return e.stylesheets&&0===e.count&&Gu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Gu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nd.bind(null,e,t,r,n,i,a,o,l,c,u,1,m,p)),void qc(e,r,o,!d);nd(e,t,r,n,i,a,o,l,c)}function zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var a=n[i],r=a.getSnapshot;a=a.value;try{if(!Kn(r(),a))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qc(e,t,n,i){t&=~fc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var a=t;0<a;){var r=31-me(a),s=1<<r;i[r]=-1,a&=~s}0!==n&&Se(e,n,t)}function Wc(){return 0!==(6&nc)||(kd(0,!1),!1)}function Bc(){if(null!==ac){if(0===sc)var e=ac.return;else ba=va=null,Ir(e=ac),Ys=null,Ks=0,e=ac;for(;null!==e;)rl(e.alternate,e),e=e.return;ac=null}}function Uc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),ic=e,ac=n=Fi(e.current,null),rc=t,sc=0,oc=null,lc=!1,cc=ye(e,t),dc=!1,vc=gc=fc=pc=mc=hc=0,xc=bc=null,yc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var a=31-me(i),r=1<<a;t|=e[a],i&=~r}return uc=t,Ei(),n}function Vc(e,t){xr=null,R.H=Vs,t===Ha||t===Qa?(t=Za(),sc=3):t===Ga?(t=Za(),sc=4):sc=t===So?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===ac&&(hc=1,wo(e,Ni(t,e.current)))}function Hc(){var e=R.H;return R.H=Vs,null===e?Vs:e}function Gc(){var e=R.A;return R.A=ec,e}function Qc(){hc=4,lc||(4194048&rc)!==rc&&null!==io.current||(cc=!0),0===(134217727&mc)&&0===(134217727&pc)||null===ic||qc(ic,rc,gc,!1)}function Yc(e,t,n){var i=nc;nc|=2;var a=Hc(),r=Gc();ic===e&&rc===t||(kc=null,Uc(e,t)),t=!1;var s=hc;e:for(;;)try{if(0!==sc&&null!==ac){var o=ac,l=oc;switch(sc){case 8:Bc(),s=6;break e;case 3:case 2:case 9:case 6:null===io.current&&(t=!0);var c=sc;if(sc=0,oc=null,Zc(e,o,l,c),n&&cc){s=0;break e}break;default:c=sc,sc=0,oc=null,Zc(e,o,l,c)}}Kc(),s=hc;break}catch(d){Vc(e,d)}return t&&e.shellSuspendCounter++,ba=va=null,nc=i,R.H=a,R.A=r,null===ac&&(ic=null,rc=0,Ei()),s}function Kc(){for(;null!==ac;)Jc(ac)}function Xc(){for(;null!==ac&&!Z();)Jc(ac)}function Jc(e){var t=Jo(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function $c(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Lo(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Lo(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:Ir(t);default:rl(n,t),t=Jo(n,t=ac=zi(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function Zc(e,t,n,i){ba=va=null,Ir(t),Ys=null,Ks=0;var a=t.return;try{if(function(e,t,n,i,a){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&ka(t,n,a,!0),null!==(n=io.current)){switch(n.tag){case 13:return null===ao?Qc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===Ya?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),ud(e,i,a)),!1;case 22:return n.flags|=65536,i===Ya?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),ud(e,i,a)),!1}throw Error(s(435,n.tag))}return ud(e,i,a),Qc(),!1}if(ra)return null!==(t=io.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==la&&fa(Ni(e=Error(s(422),{cause:i}),n))):(i!==la&&fa(Ni(t=Error(s(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,i=Ni(i,n),or(e,a=ko(e.stateNode,i,a)),4!==hc&&(hc=2)),!1;var r=Error(s(520),{cause:i});if(r=Ni(r,n),null===bc?bc=[r]:bc.push(r),4!==hc&&(hc=2),null===t)return!0;i=Ni(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,or(n,e=ko(n.stateNode,i,e)),!1;case 1:if(t=n.type,r=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Nc||!Nc.has(r))))return n.flags|=65536,a&=-a,n.lanes|=a,jo(a=No(a),e,n,i),or(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,rc))return hc=1,wo(e,Ni(n,e.current)),void(ac=null)}catch(r){if(null!==a)throw ac=a,r;return hc=1,wo(e,Ni(n,e.current)),void(ac=null)}32768&t.flags?(ra||1===i?e=!0:cc||0!==(536870912&rc)?e=!1:(lc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=io.current)&&13===i.tag&&(i.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,lc);e=t.return;var n=il(t.alternate,t,uc);if(null!==n)return void(ac=n);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===hc&&(hc=5)}function td(e,t){do{var n=al(e.alternate,e);if(null!==n)return n.flags&=32767,void(ac=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=n}while(null!==e);hc=6,ac=null}function nd(e,t,n,i,a,r,o,l,c){e.cancelPendingCommit=null;do{od()}while(0!==jc);if(0!==(6&nc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(r=t.lanes|t.childLanes,function(e,t,n,i,a,r){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var d=31-me(n),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==i&&Se(e,i,0),0!==r&&0===a&&0!==e.tag&&(e.suspendedLanes|=r&~(s&~t))}(e,n,r|=Ci,o,l,c),e===ic&&(ac=ic=null,rc=0),Cc=t,Sc=e,Ec=n,Ac=r,Tc=a,Mc=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(re,(function(){return ld(),null}))):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=R.T,R.T=null,a=O.p,O.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,tu=nh,ti(e=ei(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var a=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==r||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===a&&(l=o),m===r&&++u===i&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},nh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(r=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,n=t,a=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var f=go(n.type,a,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(f,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){dd(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nc=o,O.p=a,R.T=i}}jc=1,id(),ad(),rd()}}function id(){if(1===jc){jc=0;var e=Sc,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var i=O.p;O.p=2;var a=nc;nc|=4;try{Rl(t,e);var r=nu,s=ei(e.containerInfo),o=r.focusedElem,l=r.selectionRange;if(s!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&ti(o)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var u=o.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=o.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(s=g,g=f,f=s);var v=$n(o,f),b=$n(o,g);if(v&&b&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==b.node||m.focusOffset!==b.offset)){var x=u.createRange();x.setStart(v.node,v.offset),m.removeAllRanges(),f>g?(m.addRange(x),m.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),m.addRange(x))}}}}for(u=[],m=o;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<u.length;o++){var y=u[o];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}nh=!!tu,nu=tu=null}finally{nc=a,O.p=i,R.T=n}}e.current=t,jc=2}}function ad(){if(2===jc){jc=0;var e=Sc,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var i=O.p;O.p=2;var a=nc;nc|=4;try{Nl(e,t.alternate,t)}finally{nc=a,O.p=i,R.T=n}}jc=3}}function rd(){if(4===jc||3===jc){jc=0,ee();var e=Sc,t=Cc,n=Ec,i=Mc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,Cc=Sc=null,sd(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Nc=null),Ae(n),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=R.T,a=O.p,O.p=2,R.T=null;try{for(var r=e.onRecoverableError,s=0;s<i.length;s++){var o=i[s];r(o.value,{componentStack:o.stack})}}finally{R.T=t,O.p=a}}0!==(3&Ec)&&od(),_d(e),a=e.pendingLanes,0!==(4194090&n)&&0!==(42&a)?e===Dc?Pc++:(Pc=0,Dc=e):Pc=0,kd(0,!1)}}function sd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ra(t)))}function od(e){return id(),ad(),rd(),ld()}function ld(){if(5!==jc)return!1;var e=Sc,t=Ac;Ac=0;var n=Ae(Ec),i=R.T,a=O.p;try{O.p=32>n?32:n,R.T=null,n=Tc,Tc=null;var r=Sc,o=Ec;if(jc=0,Cc=Sc=null,Ec=0,0!==(6&nc))throw Error(s(331));var l=nc;if(nc|=4,Jl(r.current),Ul(r,r.current,o,n),nc=l,kd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,r)}catch(c){}return!0}finally{O.p=a,R.T=i,sd(e,t)}}function cd(e,t,n){t=Ni(n,t),null!==(e=rr(e,t=ko(e.stateNode,t,2),2))&&(je(e,2),_d(e))}function dd(e,t,n){if(3===e.tag)cd(e,e,n);else for(;null!==t;){if(3===t.tag){cd(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Nc||!Nc.has(i))){e=Ni(n,e),null!==(i=rr(t,n=No(2),2))&&(jo(n,i,t,e),je(i,2),_d(i));break}}t=t.return}}function ud(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new tc;var a=new Set;i.set(t,a)}else void 0===(a=i.get(t))&&(a=new Set,i.set(t,a));a.has(n)||(dc=!0,a.add(n),e=hd.bind(null,e,t,n),t.then(e,e))}function hd(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(rc&n)===n&&(4===hc||3===hc&&(62914560&rc)===rc&&300>te()-wc?0===(2&nc)&&Uc(e,0):fc|=n,vc===rc&&(vc=0)),_d(e)}function md(e,t){0===t&&(t=ke()),null!==(e=Mi(e,t))&&(je(e,t),_d(e))}function pd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),md(e,n)}function fd(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==i&&i.delete(t),md(e,n)}var gd=null,vd=null,bd=!1,xd=!1,yd=!1,wd=0;function _d(e){e!==vd&&null===e.next&&(null===vd?gd=vd=e:vd=vd.next=e),xd=!0,bd||(bd=!0,uu((function(){0!==(6&nc)?J(ie,Nd):jd()})))}function kd(e,t){if(!yd&&xd){yd=!0;do{for(var n=!1,i=gd;null!==i;){if(!t)if(0!==e){var a=i.pendingLanes;if(0===a)var r=0;else{var s=i.suspendedLanes,o=i.pingedLanes;r=(1<<31-me(42|e)+1)-1,r=201326741&(r&=a&~(s&~o))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,Ed(i,r))}else r=rc,0===(3&(r=xe(i,i===ic?r:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||ye(i,r)||(n=!0,Ed(i,r));i=i.next}}while(n);yd=!1}}function Nd(){jd()}function jd(){xd=bd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ou&&(ou=e,!0);return ou=null,!1}()&&(e=wd),wd=0);for(var t=te(),n=null,i=gd;null!==i;){var a=i.next,r=Sd(i,t);0===r?(i.next=null,null===n?gd=a:n.next=a,null===a&&(vd=n)):(n=i,(0!==e||0!==(3&r))&&(xd=!0)),i=a}kd(e,!1)}function Sd(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var s=31-me(r),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&i)||(a[s]=we(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(n=rc,n=xe(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===sc||9===sc)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&$(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ye(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&$(i),Ae(n)){case 2:case 8:n=ae;break;case 32:default:n=re;break;case 268435456:n=oe}return i=Cd.bind(null,e),n=J(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&$(i),e.callbackPriority=2,e.callbackNode=null,2}function Cd(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(od()&&e.callbackNode!==n)return null;var i=rc;return 0===(i=xe(e,e===ic?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ic(e,i,t),Sd(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cd.bind(null,e):null)}function Ed(e,t){if(od())return null;Ic(e,t,!0)}function Ad(){return 0===wd&&(wd=_e()),wd}function Td(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Md(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pd=0;Pd<wi.length;Pd++){var Dd=wi[Pd];_i(Dd.toLowerCase(),"on"+(Dd[0].toUpperCase()+Dd.slice(1)))}_i(mi,"onAnimationEnd"),_i(pi,"onAnimationIteration"),_i(fi,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(gi,"onTransitionRun"),_i(vi,"onTransitionStart"),_i(bi,"onTransitionCancel"),_i(xi,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Od=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rd));function Ld(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&a.isPropagationStopped())break e;r=o,a.currentTarget=c;try{r(a)}catch(d){vo(d)}a.currentTarget=null,r=l}else for(s=0;s<i.length;s++){if(l=(o=i[s]).instance,c=o.currentTarget,o=o.listener,l!==r&&a.isPropagationStopped())break e;r=o,a.currentTarget=c;try{r(a)}catch(d){vo(d)}a.currentTarget=null,r=l}}}}function Id(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var i=e+"__bubble";n.has(i)||(Wd(t,e,2,!1),n.add(i))}function Fd(e,t,n){var i=0;t&&(i|=4),Wd(n,e,i,t)}var zd="_reactListening"+Math.random().toString(36).slice(2);function qd(e){if(!e[zd]){e[zd]=!0,Ge.forEach((function(t){"selectionchange"!==t&&(Od.has(t)||Fd(t,!1,e),Fd(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zd]||(t[zd]=!0,Fd("selectionchange",!1,t))}}function Wd(e,t,n,i){switch(ch(t)){case 2:var a=ih;break;case 8:a=ah;break;default:a=rh}n=a.bind(null,t,n,e),a=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),i?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Bd(e,t,n,i,a){var r=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var o=i.stateNode.containerInfo;if(o===a)break;if(4===s)for(s=i.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===a)return;s=s.return}for(;null!==o;){if(null===(s=We(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){i=r=s;continue e}o=o.parentNode}}i=i.return}Lt((function(){var i=r,a=Mt(n),s=[];e:{var o=yi.get(e);if(void 0!==o){var c=Zt,d=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":d="focus",c=sn;break;case"focusout":d="blur",c=sn;break;case"beforeblur":case"afterblur":c=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case mi:case pi:case fi:c=on;break;case xi:c=bn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=yn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=i;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=It(f,m))&&u.push(Ud(f,g,p)),h)break;f=f.return}0<u.length&&(o=new c(o,d,null,n,a),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Tt||!(d=n.relatedTarget||n.fromElement)||!We(d)&&!d[Re])&&(c||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=i,null!==(d=(d=n.relatedTarget||n.toElement)?We(d):null)&&(h=l(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=i),c!==d)){if(u=an,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=gn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?o:Ue(c),p=null==d?o:Ue(d),(o=new u(g,f+"leave",c,n,a)).target=h,o.relatedTarget=p,g=null,We(a)===i&&((u=new u(m,f+"enter",d,n,a)).target=p,u.relatedTarget=h,g=u),h=g,c&&d)e:{for(m=d,f=0,p=u=c;p;p=Hd(p))f++;for(p=0,g=m;g;g=Hd(g))p++;for(;0<f-p;)u=Hd(u),f--;for(;0<p-f;)m=Hd(m),p--;for(;f--;){if(u===m||null!==m&&u===m.alternate)break e;u=Hd(u),m=Hd(m)}u=null}else u=null;null!==c&&Gd(s,o,c,u,!1),null!==d&&null!==h&&Gd(s,h,d,u,!0)}if("select"===(c=(o=i?Ue(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Fn;else if(Pn(o))if(zn)v=Yn;else{v=Gn;var b=Hn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&St(i.elementType)&&(v=Fn):v=Qn;switch(v&&(v=v(e,i))?Dn(s,v,n,a):(b&&b(e,o,i),"focusout"===e&&i&&"number"===o.type&&null!=i.memoizedProps.value&&bt(o,"number",o.value)),b=i?Ue(i):window,e){case"focusin":(Pn(b)||"true"===b.contentEditable)&&(ii=b,ai=i,ri=null);break;case"focusout":ri=ai=ii=null;break;case"mousedown":si=!0;break;case"contextmenu":case"mouseup":case"dragend":si=!1,oi(s,n,a);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":oi(s,n,a)}var x;if(_n)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Tn?En(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Tn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Tn&&(x=Vt()):(Bt="value"in(Wt=a)?Wt.value:Wt.textContent,Tn=!0)),0<(b=Vd(i,y)).length&&(y=new cn(y,e,null,n,a),s.push({event:y,listeners:b}),x?y.data=x:null!==(x=An(n))&&(y.data=x))),(x=Nn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Cn=!0,Sn);case"textInput":return(e=t.data)===Sn&&Cn?null:e;default:return null}}(e,n):function(e,t){if(Tn)return"compositionend"===e||!_n&&En(e,t)?(e=Vt(),Ut=Bt=Wt=null,Tn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(y=Vd(i,"onBeforeInput")).length&&(b=new cn("onBeforeInput","beforeinput",null,n,a),s.push({event:b,listeners:y}),b.data=x)),function(e,t,n,i,a){if("submit"===t&&n&&n.stateNode===a){var r=Td((a[De]||null).action),s=i.submitter;s&&null!==(t=(t=s[De]||null)?Td(t.formAction):s.getAttribute("formAction"))&&(r=t,s=null);var o=new Zt("action","action",null,i,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==wd){var e=s?Md(a,s):new FormData(a);Ts(n,{pending:!0,data:e,method:a.method,action:r},null,e)}}else"function"===typeof r&&(o.preventDefault(),e=s?Md(a,s):new FormData(a),Ts(n,{pending:!0,data:e,method:a.method,action:r},r,e))},currentTarget:a}]})}}(s,e,i,n,a)}Ld(s,t)}))}function Ud(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vd(e,t){for(var n=t+"Capture",i=[];null!==e;){var a=e,r=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===r||(null!=(a=It(e,n))&&i.unshift(Ud(e,a,r)),null!=(a=It(e,t))&&i.push(Ud(e,a,r))),3===e.tag)return i;e=e.return}return[]}function Hd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gd(e,t,n,i,a){for(var r=t._reactName,s=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=It(n,r))&&s.unshift(Ud(n,c,l)):a||null!=(c=It(n,r))&&s.push(Ud(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qd=/\r\n?/g,Yd=/\u0000|\uFFFD/g;function Kd(e){return("string"===typeof e?e:""+e).replace(Qd,"\n").replace(Yd,"")}function Xd(e,t){return t=Kd(t),Kd(e)===t}function Jd(){}function $d(e,t,n,i,a,r){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||_t(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&_t(e,""+i);break;case"className":nt(e,"class",i);break;case"tabIndex":nt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,i);break;case"style":jt(e,i,r);break;case"data":if("object"!==t){nt(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===n?("input"!==t&&$d(e,t,"name",a.name,a,null),$d(e,t,"formEncType",a.formEncType,a,null),$d(e,t,"formMethod",a.formMethod,a,null),$d(e,t,"formTarget",a.formTarget,a,null)):($d(e,t,"encType",a.encType,a,null),$d(e,t,"method",a.method,a,null),$d(e,t,"target",a.target,a,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Jd);break;case"onScroll":null!=i&&Id("scroll",e);break;case"onScrollEnd":null!=i&&Id("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=At(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Id("beforetoggle",e),Id("toggle",e),tt(e,"popover",i);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":tt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,i)}}function Zd(e,t,n,i,a,r){switch(n){case"style":jt(e,i,r);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof i?_t(e,i):("number"===typeof i||"bigint"===typeof i)&&_t(e,""+i);break;case"onScroll":null!=i&&Id("scroll",e);break;case"onScrollEnd":null!=i&&Id("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(r=null!=(r=e[De]||null)?r[n]:null)&&e.removeEventListener(t,r,a),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):tt(e,n,i):("function"!==typeof r&&null!==r&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,a)))}}function eu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Id("error",e),Id("load",e);var i,a=!1,r=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":a=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:$d(e,t,i,o,n,null)}}return r&&$d(e,t,"srcSet",n.srcSet,n,null),void(a&&$d(e,t,"src",n.src,n,null));case"input":Id("invalid",e);var l=i=o=r=null,c=null,d=null;for(a in n)if(n.hasOwnProperty(a)){var u=n[a];if(null!=u)switch(a){case"name":r=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":i=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(s(137,t));break;default:$d(e,t,a,u,n,null)}}return vt(e,i,l,c,d,o,r,!1),void ut(e);case"select":for(r in Id("invalid",e),a=o=i=null,n)if(n.hasOwnProperty(r)&&null!=(l=n[r]))switch(r){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:$d(e,t,r,l,n,null)}return t=i,n=o,e.multiple=!!a,void(null!=t?xt(e,!!a,t,!1):null!=n&&xt(e,!!a,n,!0));case"textarea":for(o in Id("invalid",e),i=r=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":r=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:$d(e,t,o,l,n,null)}return wt(e,a,r,i),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else $d(e,t,c,a,n,null);return;case"dialog":Id("beforetoggle",e),Id("toggle",e),Id("cancel",e),Id("close",e);break;case"iframe":case"object":Id("load",e);break;case"video":case"audio":for(a=0;a<Rd.length;a++)Id(Rd[a],e);break;case"image":Id("error",e),Id("load",e);break;case"details":Id("toggle",e);break;case"embed":case"source":case"link":Id("error",e),Id("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(a=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:$d(e,t,d,a,n,null)}return;default:if(St(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(a=n[u])&&Zd(e,t,u,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&$d(e,t,l,a,n,null))}var tu=null,nu=null;function iu(e){return 9===e.nodeType?e:e.ownerDocument}function au(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ru(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function su(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ou=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(hu)}:lu;function hu(e){setTimeout((function(){throw e}))}function mu(e){return"head"===e}function pu(e,t){var n=t,i=0,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0<i&&8>i){n=i;var s=e.ownerDocument;if(1&n&&wu(s.documentElement),2&n&&wu(s.body),4&n)for(wu(n=s.head),s=n.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[ze]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}if(0===a)return e.removeChild(r),void Ch(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Ch(t)}function fu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fu(n),qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bu=null;function xu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function yu(e,t,n){switch(t=iu(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function wu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qe(e)}var _u=new Map,ku=new Set;function Nu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var ju=O.d;O.d={f:function(){var e=ju.f(),t=Wc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Ps(t):ju.r(e)},D:function(e){ju.D(e),Cu("dns-prefetch",e,null)},C:function(e,t){ju.C(e,t),Cu("preconnect",e,t)},L:function(e,t,n){ju.L(e,t,n);var i=Su;if(i&&e&&t){var a='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+ft(n.imageSizes)+'"]')):a+='[href="'+ft(e)+'"]';var r=a;switch(t){case"style":r=Au(e);break;case"script":r=Pu(e)}_u.has(r)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),_u.set(r,e),null!==i.querySelector(a)||"style"===t&&i.querySelector(Tu(r))||"script"===t&&i.querySelector(Du(r))||(eu(t=i.createElement("link"),"link",e),He(t),i.head.appendChild(t)))}},m:function(e,t){ju.m(e,t);var n=Su;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ft(i)+'"][href="'+ft(e)+'"]',r=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Pu(e)}if(!_u.has(r)&&(e=h({rel:"modulepreload",href:e},t),_u.set(r,e),null===n.querySelector(a))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Du(r)))return}eu(i=n.createElement("link"),"link",e),He(i),n.head.appendChild(i)}}},X:function(e,t){ju.X(e,t);var n=Su;if(n&&e){var i=Ve(n).hoistableScripts,a=Pu(e),r=i.get(a);r||((r=n.querySelector(Du(a)))||(e=h({src:e,async:!0},t),(t=_u.get(a))&&Iu(e,t),He(r=n.createElement("script")),eu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(a,r))}},S:function(e,t,n){ju.S(e,t,n);var i=Su;if(i&&e){var a=Ve(i).hoistableStyles,r=Au(e);t=t||"default";var s=a.get(r);if(!s){var o={loading:0,preload:null};if(s=i.querySelector(Tu(r)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=_u.get(r))&&Lu(e,n);var l=s=i.createElement("link");He(l),eu(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Ou(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:o},a.set(r,s)}}},M:function(e,t){ju.M(e,t);var n=Su;if(n&&e){var i=Ve(n).hoistableScripts,a=Pu(e),r=i.get(a);r||((r=n.querySelector(Du(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=_u.get(a))&&Iu(e,t),He(r=n.createElement("script")),eu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(a,r))}}};var Su="undefined"===typeof document?null:document;function Cu(e,t,n){var i=Su;if(i&&"string"===typeof t&&t){var a=ft(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),ku.has(a)||(ku.add(a),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(a)&&(eu(t=i.createElement("link"),"link",e),He(t),i.head.appendChild(t)))}}function Eu(e,t,n,i){var a,r,o,l,c=(c=V.current)?Nu(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Au(n.href),(i=(n=Ve(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Au(n.href);var d=Ve(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Tu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),_u.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_u.set(e,n),d||(a=c,r=e,o=n,l=u.state,a.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=a.createElement("link"),l.preload=r,r.addEventListener("load",(function(){return l.loading|=1})),r.addEventListener("error",(function(){return l.loading|=2})),eu(r,"link",o),He(r),a.head.appendChild(r))))),t&&null===i)throw Error(s(528,""));return u}if(t&&null!==i)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pu(n),(i=(n=Ve(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Au(e){return'href="'+ft(e)+'"'}function Tu(e){return'link[rel="stylesheet"]['+e+"]"}function Mu(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pu(e){return'[src="'+ft(e)+'"]'}function Du(e){return"script[async]"+e}function Ru(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(i)return t.instance=i,He(i),i;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(i=(e.ownerDocument||e).createElement("style")),eu(i,"style",a),Ou(i,n.precedence,e),t.instance=i;case"stylesheet":a=Au(n.href);var r=e.querySelector(Tu(a));if(r)return t.state.loading|=4,t.instance=r,He(r),r;i=Mu(n),(a=_u.get(a))&&Lu(i,a),He(r=(e.ownerDocument||e).createElement("link"));var o=r;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),eu(r,"link",i),t.state.loading|=4,Ou(r,n.precedence,e),t.instance=r;case"script":return r=Pu(n.src),(a=e.querySelector(Du(r)))?(t.instance=a,He(a),a):(i=n,(a=_u.get(r))&&Iu(i=h({},n),a),He(a=(e=e.ownerDocument||e).createElement("script")),eu(a,"link",i),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Ou(i,n.precedence,e));return t.instance}function Ou(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,r=a,s=0;s<i.length;s++){var o=i[s];if(o.dataset.precedence===t)r=o;else if(r!==a)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Lu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Iu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fu=null;function zu(e,t,n){if(null===Fu){var i=new Map,a=Fu=new Map;a.set(n,i)}else(i=(a=Fu).get(n))||(i=new Map,a.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var r=n[a];if(!(r[ze]||r[Pe]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var s=r.getAttribute(t)||"";s=e+s;var o=i.get(s);o?o.push(r):i.set(s,[r])}}return i}function qu(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Wu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bu=null;function Uu(){}function Vu(){if(this.count--,0===this.count)if(this.stylesheets)Gu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hu=null;function Gu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hu=new Map,t.forEach(Qu,e),Hu=null,Vu.call(e))}function Qu(e,t){if(!(4&t.state.loading)){var n=Hu.get(e);if(n)var i=n.get(null);else{n=new Map,Hu.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<a.length;r++){var s=a[r];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}s=(a=t.instance).getAttribute("data-precedence"),(r=n.get(s)||i)===i&&n.set(null,a),n.set(s,a),this.count++,i=Vu.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),r?r.parentNode.insertBefore(a,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Yu={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Ku(e,t,n,i,a,r,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=r,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xu(e,t,n,i,a,r,s,o,l,c,d,u){return e=new Ku(e,t,n,s,o,l,c,u),t=1,!0===r&&(t|=24),r=Li(3,null,null,t),e.current=r,r.stateNode=e,(t=Da()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},nr(r),e}function Ju(e){return e?e=Ri:Ri}function $u(e,t,n,i,a,r){a=Ju(a),null===i.context?i.context=a:i.pendingContext=a,(i=ar(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(i.callback=r),null!==(n=rr(e,i,t))&&(Lc(n,0,t),sr(n,e,t))}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function th(e){if(13===e.tag){var t=Mi(e,67108864);null!==t&&Lc(t,0,67108864),eh(e,67108864)}}var nh=!0;function ih(e,t,n,i){var a=R.T;R.T=null;var r=O.p;try{O.p=2,rh(e,t,n,i)}finally{O.p=r,R.T=a}}function ah(e,t,n,i){var a=R.T;R.T=null;var r=O.p;try{O.p=8,rh(e,t,n,i)}finally{O.p=r,R.T=a}}function rh(e,t,n,i){if(nh){var a=sh(i);if(null===a)Bd(e,t,i,oh,n),bh(e,i);else if(function(e,t,n,i,a){switch(t){case"focusin":return uh=xh(uh,e,t,n,i,a),!0;case"dragenter":return hh=xh(hh,e,t,n,i,a),!0;case"mouseover":return mh=xh(mh,e,t,n,i,a),!0;case"pointerover":var r=a.pointerId;return ph.set(r,xh(ph.get(r)||null,e,t,n,i,a)),!0;case"gotpointercapture":return r=a.pointerId,fh.set(r,xh(fh.get(r)||null,e,t,n,i,a)),!0}return!1}(a,e,t,n,i))i.stopPropagation();else if(bh(e,i),4&t&&-1<vh.indexOf(e)){for(;null!==a;){var r=Be(a);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var s=be(r.pendingLanes);if(0!==s){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-me(s);o.entanglements[1]|=l,s&=~l}_d(r),0===(6&nc)&&(_c=te()+500,kd(0,!1))}}break;case 13:null!==(o=Mi(r,2))&&Lc(o,0,2),Wc(),eh(r,2)}if(null===(r=sh(i))&&Bd(e,t,i,oh,n),r===a)break;a=r}null!==a&&i.stopPropagation()}else Bd(e,t,i,null,n)}}function sh(e){return lh(e=Mt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=We(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ie:return 2;case ae:return 8;case re:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,uh=null,hh=null,mh=null,ph=new Map,fh=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function xh(e,t,n,i,a,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[a]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function yh(e){var t=We(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,(function(){if(13===n.tag){var e=Rc();e=Ee(e);var t=Mi(n,e);null!==t&&Lc(t,0,e),eh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Tt=i,n.target.dispatchEvent(i),Tt=null,t.shift()}return!0}function _h(e,t,n){wh(e)&&n.delete(t)}function kh(){dh=!1,null!==uh&&wh(uh)&&(uh=null),null!==hh&&wh(hh)&&(hh=null),null!==mh&&wh(mh)&&(mh=null),ph.forEach(_h),fh.forEach(_h)}function Nh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,kh)))}var jh=null;function Sh(e){jh!==e&&(jh=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,(function(){jh===e&&(jh=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],a=e[t+2];if("function"!==typeof i){if(null===lh(i||n))continue;break}var r=Be(n);null!==r&&(e.splice(t,3),t-=3,Ts(r,{pending:!0,data:a,method:n.method,action:i},i,a))}})))}function Ch(e){function t(t){return Nh(t,e)}null!==uh&&Nh(uh,e),null!==hh&&Nh(hh,e),null!==mh&&Nh(mh,e),ph.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var i=gh[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)yh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var a=n[i],r=n[i+1],s=a[De]||null;if("function"===typeof r)s||Sh(n);else if(s){var o=null;if(r&&r.hasAttribute("formAction")){if(a=r,s=r[De]||null)o=s.formAction;else if(null!==lh(a))continue}else o=s.action;"function"===typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Sh(n)}}}function Eh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Eh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$u(t.current,Rc(),e,t,null,null)},Ah.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$u(e.current,2,null,e,null,null),Wc(),t[Re]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&yh(e)}};var Th=a.version;if("19.1.0"!==Th)throw Error(s(527,Th,"19.1.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var r=a.alternate;if(null===r){if(null!==(i=a.return)){n=i;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return d(a),e;if(r===i)return d(a),t;r=r.sibling}throw Error(s(188))}if(n.return!==i.return)n=a,i=r;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,i=r;break}if(c===i){o=!0,i=a,n=r;break}c=c.sibling}if(!o){for(c=r.child;c;){if(c===n){o=!0,n=r,i=a;break}if(c===i){o=!0,i=r,n=a;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Mh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{de=Ph.inject(Mh),ue=Ph}catch(Rh){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,i="",a=bo,r=xo,l=yo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xu(e,1,!1,null,0,n,i,a,r,l,0,null),e[Re]=t.current,qd(e),new Eh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var i=!1,a="",r=bo,l=xo,c=yo,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(r=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(t=Xu(e,1,!0,t,0,i,a,r,l,c,0,d)).context=Ju(null),n=t.current,(a=ar(i=Ee(i=Rc()))).callback=null,rr(n,a,i),n=i,t.current.lanes=n,je(t,n),_d(t),e[Re]=t.current,qd(e),new Ah(t)},t.version="19.1.0"},92:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var r=n(251),s=n(58);a(n(58),t);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,n){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof t&&(n=t,t=o),"object"===typeof e&&(t=e,e=void 0),this.callback=null!==e&&void 0!==e?e:null,this.options=null!==t&&void 0!==t?t:o,this.elementCB=null!==n&&void 0!==n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?r.ElementType.Tag:void 0,i=new s.Element(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===r.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new s.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment)this.lastNode.data+=e;else{var t=new s.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new s.Text(""),t=new s.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new s.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"===typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(863)},127:()=>{},146:(e,t,n)=>{"use strict";n.d(t,{QueryClient:()=>i.E});var i=n(438),a=n(127);n.o(a,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return a.QueryClientProvider}}),n.o(a,"useMutation")&&n.d(t,{useMutation:function(){return a.useMutation}}),n.o(a,"useQuery")&&n.d(t,{useQuery:function(){return a.useQuery}}),n.o(a,"useQueryClient")&&n.d(t,{useQueryClient:function(){return a.useQueryClient}})},149:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(s),n=t?t[1]:void 0;return(0,r.formatDOM)((0,a.default)(e),null,n)};var a=i(n(606)),r=n(389),s=/<(![a-zA-Z\s]+)>/},156:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.returnFirstArg=t.canTextBeChildOfNode=t.ELEMENTS_WITH_NO_TEXT_CHILDREN=t.PRESERVE_CUSTOM_ATTRIBUTES=void 0,t.isCustomComponent=function(e,t){if(!e.includes("-"))return Boolean(t&&"string"===typeof t.is);if(s.has(e))return!1;return!0},t.setStyleProp=function(e,t){if("string"!==typeof e)return;if(!e.trim())return void(t.style={});try{t.style=(0,r.default)(e,o)}catch(n){t.style={}}};var a=n(950),r=i(n(967)),s=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var o={reactCompat:!0};t.PRESERVE_CUSTOM_ATTRIBUTES=Number(a.version.split(".")[0])>=16,t.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);t.canTextBeChildOfNode=function(e){return!t.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(e.name)};t.returnFirstArg=function(e){return e}},168:(e,t,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(null,arguments)}n.d(t,{A:()=>i})},223:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,s:()=>l});var i=n(168),a=n(592),r=n(854),s=n(639),o=n(339),l=function(){function e(e){this.options=(0,i.A)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||c(),this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter((function(t){return t!==e}))},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(o.lQ).catch(o.lQ)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,n="loading"===this.state.status,i=Promise.resolve();return n||(this.dispatch({type:"loading",variables:this.options.variables}),i=i.then((function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)})).then((function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)})).then((function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})}))),i.then((function(){return t.executeMutation()})).then((function(n){e=n,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)})).then((function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)})).then((function(){return t.dispatch({type:"success",data:e}),e})).catch((function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),(0,a.t)().error(e),Promise.resolve().then((function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)})).then((function(){throw t.dispatch({type:"error",error:e}),e}))}))},t.executeMutation=function(){var e,t=this;return this.retryer=new s.eJ({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return(0,i.A)({},e,{failureCount:e.failureCount+1});case"pause":return(0,i.A)({},e,{isPaused:!0});case"continue":return(0,i.A)({},e,{isPaused:!1});case"loading":return(0,i.A)({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return(0,i.A)({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return(0,i.A)({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,i.A)({},e,t.state);default:return e}}(this.state,e),r.j.batch((function(){t.observers.forEach((function(t){t.onMutationUpdate(e)})),t.mutationCache.notify(t)}))},e}();function c(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}},251:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},339:(e,t,n)=>{"use strict";n.d(t,{BH:()=>x,Cp:()=>v,F$:()=>f,G6:()=>j,GR:()=>u,HN:()=>l,MK:()=>m,Od:()=>g,S$:()=>a,Zw:()=>s,b_:()=>h,f8:()=>y,gn:()=>o,j3:()=>c,jY:()=>S,lQ:()=>r,nJ:()=>p,vh:()=>d,yy:()=>N});var i=n(168),a="undefined"===typeof window;function r(){}function s(e,t){return"function"===typeof e?e(t):e}function o(e){return"number"===typeof e&&e>=0&&e!==1/0}function l(e){return Array.isArray(e)?e:[e]}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function d(e,t,n){return k(e)?"function"===typeof t?(0,i.A)({},n,{queryKey:e,queryFn:t}):(0,i.A)({},t,{queryKey:e}):e}function u(e,t,n){return k(e)?"function"===typeof t?(0,i.A)({},n,{mutationKey:e,mutationFn:t}):(0,i.A)({},t,{mutationKey:e}):"function"===typeof e?(0,i.A)({},t,{mutationFn:e}):(0,i.A)({},e)}function h(e,t,n){return k(e)?[(0,i.A)({},t,{queryKey:e}),n]:[e||{},t]}function m(e,t){var n=e.active,i=e.exact,a=e.fetching,r=e.inactive,s=e.predicate,o=e.queryKey,l=e.stale;if(k(o))if(i){if(t.queryHash!==f(o,t.options))return!1}else if(!v(t.queryKey,o))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(n,r);if("none"===c)return!1;if("all"!==c){var d=t.isActive();if("active"===c&&!d)return!1;if("inactive"===c&&d)return!1}return("boolean"!==typeof l||t.isStale()===l)&&(("boolean"!==typeof a||t.isFetching()===a)&&!(s&&!s(t)))}function p(e,t){var n=e.exact,i=e.fetching,a=e.predicate,r=e.mutationKey;if(k(r)){if(!t.options.mutationKey)return!1;if(n){if(g(t.options.mutationKey)!==g(r))return!1}else if(!v(t.options.mutationKey,r))return!1}return("boolean"!==typeof i||"loading"===t.state.status===i)&&!(a&&!a(t))}function f(e,t){return((null==t?void 0:t.queryKeyHashFn)||g)(e)}function g(e){var t,n=l(e);return t=n,JSON.stringify(t,(function(e,t){return w(t)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}))}function v(e,t){return b(l(e),l(t))}function b(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some((function(n){return!b(e[n],t[n])})))}function x(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||w(e)&&w(t)){for(var i=n?e.length:Object.keys(e).length,a=n?t:Object.keys(t),r=a.length,s=n?[]:{},o=0,l=0;l<r;l++){var c=n?l:a[l];s[c]=x(e[c],t[c]),s[c]===e[c]&&o++}return i===r&&o===i?e:s}return t}function y(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function w(e){if(!_(e))return!1;var t=e.constructor;if("undefined"===typeof t)return!0;var n=t.prototype;return!!_(n)&&!!n.hasOwnProperty("isPrototypeOf")}function _(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e){return"string"===typeof e||Array.isArray(e)}function N(e){return new Promise((function(t){setTimeout(t,e)}))}function j(e){Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}function S(){if("function"===typeof AbortController)return new AbortController}},340:(e,t,n)=>{"use strict";e.exports=n(487)},352:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(85)},355:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,a,r;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(a=i;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=i;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,r[a]))return!1;for(a=i;0!==a--;){var s=r[a];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},380:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var i=(0,a.default)(e),r="function"===typeof t;return i.forEach((function(e){if("declaration"===e.type){var i=e.property,a=e.value;r?t(i,a,e):a&&((n=n||{})[i]=a)}})),n};var a=i(n(814))},389:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatAttributes=r,t.escapeSpecialCharacters=function(e){return e.replace(a.CARRIAGE_RETURN_REGEX,a.CARRIAGE_RETURN_PLACEHOLDER)},t.revertEscapedCharacters=o,t.formatDOM=function e(t,n,a){void 0===n&&(n=null);for(var l,c=[],d=0,u=t.length;d<u;d++){var h=t[d];switch(h.nodeType){case 1:var m=s(h.nodeName);(l=new i.Element(m,r(h.attributes))).children=e("template"===m?h.content.childNodes:h.childNodes,l);break;case 3:l=new i.Text(o(h.nodeValue));break;case 8:l=new i.Comment(h.nodeValue);break;default:continue}var p=c[d-1]||null;p&&(p.next=l),l.parent=n,l.prev=p,l.next=null,c.push(l)}a&&((l=new i.ProcessingInstruction(a.substring(0,a.indexOf(" ")).toLowerCase(),a)).next=c[0]||null,l.parent=n,c.unshift(l),c[1]&&(c[1].prev=c[0]));return c};var i=n(794),a=n(900);function r(e){for(var t={},n=0,i=e.length;n<i;n++){var a=e[n];t[a.name]=a.value}return t}function s(e){var t=function(e){return a.CASE_SENSITIVE_TAG_NAMES_MAP[e]}(e=e.toLowerCase());return t||e}function o(e){return e.replace(a.CARRIAGE_RETURN_PLACEHOLDER_REGEX,a.CARRIAGE_RETURN)}},413:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},414:(e,t,n)=>{"use strict";e.exports=n(916)},438:(e,t,n)=>{"use strict";n.d(t,{E:()=>b});var i=n(168),a=n(339),r=n(540),s=n(854),o=n(592),l=n(639),c=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=(0,i.A)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,a.gn)(this.cacheTime)&&(this.gcTimeout=setTimeout((function(){e.optionalRemove()}),this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var n,i,r=this.state.data,s=(0,a.Zw)(e,r);return(null==(n=(i=this.options).isDataEqual)?void 0:n.call(i,r,s))?s=r:!1!==this.options.structuralSharing&&(s=(0,a.BH)(r,s)),this.dispatch({data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),s},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(a.lQ).catch(a.lQ):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some((function(e){return!1!==e.options.enabled}))},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((function(e){return e.getCurrentResult().isStale}))},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,a.j3)(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnWindowFocus()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnReconnect()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((function(t){return t!==e})),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var n,i,r,s=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return null==(c=this.retryer)||c.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var d=this.observers.find((function(e){return e.options.queryFn}));d&&this.setOptions(d.options)}var u=(0,a.HN)(this.queryKey),h=(0,a.jY)(),m={queryKey:u,pageParam:void 0,meta:this.meta};Object.defineProperty(m,"signal",{enumerable:!0,get:function(){if(h)return s.abortSignalConsumed=!0,h.signal}});var p,f,g={fetchOptions:t,options:this.options,queryKey:u,state:this.state,fetchFn:function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(m)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(n=this.options.behavior)?void 0:n.onFetch)&&(null==(p=this.options.behavior)||p.onFetch(g));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(i=g.fetchOptions)?void 0:i.meta))||this.dispatch({type:"fetch",meta:null==(f=g.fetchOptions)?void 0:f.meta});return this.retryer=new l.eJ({fn:g.fetchFn,abort:null==h||null==(r=h.abort)?void 0:r.bind(h),onSuccess:function(e){s.setData(e),null==s.cache.config.onSuccess||s.cache.config.onSuccess(e,s),0===s.cacheTime&&s.optionalRemove()},onError:function(e){(0,l.wm)(e)&&e.silent||s.dispatch({type:"error",error:e}),(0,l.wm)(e)||(null==s.cache.config.onError||s.cache.config.onError(e,s),(0,o.t)().error(e)),0===s.cacheTime&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),s.j.batch((function(){t.observers.forEach((function(t){t.onQueryUpdate(e)})),t.cache.notify({query:t,type:"queryUpdated",action:e})}))},t.getDefaultState=function(e){var t="function"===typeof e.initialData?e.initialData():e.initialData,n="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,i="undefined"!==typeof t;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:i?"success":"idle"}},t.reducer=function(e,t){var n,a;switch(t.type){case"failed":return(0,i.A)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,i.A)({},e,{isPaused:!0});case"continue":return(0,i.A)({},e,{isPaused:!1});case"fetch":return(0,i.A)({},e,{fetchFailureCount:0,fetchMeta:null!=(n=t.meta)?n:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,i.A)({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(a=t.dataUpdatedAt)?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var r=t.error;return(0,l.wm)(r)&&r.revert&&this.revertState?(0,i.A)({},this.revertState):(0,i.A)({},e,{error:r,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,i.A)({},e,{isInvalidated:!0});case"setState":return(0,i.A)({},e,t.state);default:return e}},e}(),d=n(817),u=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.queries=[],n.queriesMap={},n}(0,r.A)(t,e);var n=t.prototype;return n.build=function(e,t,n){var i,r=t.queryKey,s=null!=(i=t.queryHash)?i:(0,a.F$)(r,t),o=this.get(s);return o||(o=new c({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r),meta:t.meta}),this.add(o)),o},n.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},n.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter((function(t){return t!==e})),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},n.clear=function(){var e=this;s.j.batch((function(){e.queries.forEach((function(t){e.remove(t)}))}))},n.get=function(e){return this.queriesMap[e]},n.getAll=function(){return this.queries},n.find=function(e,t){var n=(0,a.b_)(e,t)[0];return"undefined"===typeof n.exact&&(n.exact=!0),this.queries.find((function(e){return(0,a.MK)(n,e)}))},n.findAll=function(e,t){var n=(0,a.b_)(e,t)[0];return Object.keys(n).length>0?this.queries.filter((function(e){return(0,a.MK)(n,e)})):this.queries},n.notify=function(e){var t=this;s.j.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){var e=this;s.j.batch((function(){e.queries.forEach((function(e){e.onFocus()}))}))},n.onOnline=function(){var e=this;s.j.batch((function(){e.queries.forEach((function(e){e.onOnline()}))}))},t}(d.Q),h=n(223),m=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.mutations=[],n.mutationId=0,n}(0,r.A)(t,e);var n=t.prototype;return n.build=function(e,t,n){var i=new h.s({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(i),i},n.add=function(e){this.mutations.push(e),this.notify(e)},n.remove=function(e){this.mutations=this.mutations.filter((function(t){return t!==e})),e.cancel(),this.notify(e)},n.clear=function(){var e=this;s.j.batch((function(){e.mutations.forEach((function(t){e.remove(t)}))}))},n.getAll=function(){return this.mutations},n.find=function(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find((function(t){return(0,a.nJ)(e,t)}))},n.findAll=function(e){return this.mutations.filter((function(t){return(0,a.nJ)(e,t)}))},n.notify=function(e){var t=this;s.j.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var e=this.mutations.filter((function(e){return e.state.isPaused}));return s.j.batch((function(){return e.reduce((function(e,t){return e.then((function(){return t.continue().catch(a.lQ)}))}),Promise.resolve())}))},t}(d.Q),p=n(643),f=n(576);function g(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function v(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}var b=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new u,this.mutationCache=e.mutationCache||new m,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=p.m.subscribe((function(){p.m.isFocused()&&f.t.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())})),this.unsubscribeOnline=f.t.subscribe((function(){p.m.isFocused()&&f.t.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())}))},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var n=(0,a.b_)(e,t)[0];return n.fetching=!0,this.queryCache.findAll(n).length},t.isMutating=function(e){return this.mutationCache.findAll((0,i.A)({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map((function(e){return[e.queryKey,e.state.data]}))},t.setQueryData=function(e,t,n){var i=(0,a.vh)(e),r=this.defaultQueryOptions(i);return this.queryCache.build(this,r).setData(t,n)},t.setQueriesData=function(e,t,n){var i=this;return s.j.batch((function(){return i.getQueryCache().findAll(e).map((function(e){var a=e.queryKey;return[a,i.setQueryData(a,t,n)]}))}))},t.getQueryState=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state},t.removeQueries=function(e,t){var n=(0,a.b_)(e,t)[0],i=this.queryCache;s.j.batch((function(){i.findAll(n).forEach((function(e){i.remove(e)}))}))},t.resetQueries=function(e,t,n){var r=this,o=(0,a.b_)(e,t,n),l=o[0],c=o[1],d=this.queryCache,u=(0,i.A)({},l,{active:!0});return s.j.batch((function(){return d.findAll(l).forEach((function(e){e.reset()})),r.refetchQueries(u,c)}))},t.cancelQueries=function(e,t,n){var i=this,r=(0,a.b_)(e,t,n),o=r[0],l=r[1],c=void 0===l?{}:l;"undefined"===typeof c.revert&&(c.revert=!0);var d=s.j.batch((function(){return i.queryCache.findAll(o).map((function(e){return e.cancel(c)}))}));return Promise.all(d).then(a.lQ).catch(a.lQ)},t.invalidateQueries=function(e,t,n){var r,o,l,c=this,d=(0,a.b_)(e,t,n),u=d[0],h=d[1],m=(0,i.A)({},u,{active:null==(r=null!=(o=u.refetchActive)?o:u.active)||r,inactive:null!=(l=u.refetchInactive)&&l});return s.j.batch((function(){return c.queryCache.findAll(u).forEach((function(e){e.invalidate()})),c.refetchQueries(m,h)}))},t.refetchQueries=function(e,t,n){var r=this,o=(0,a.b_)(e,t,n),l=o[0],c=o[1],d=s.j.batch((function(){return r.queryCache.findAll(l).map((function(e){return e.fetch(void 0,(0,i.A)({},c,{meta:{refetchPage:null==l?void 0:l.refetchPage}}))}))})),u=Promise.all(d).then(a.lQ);return(null==c?void 0:c.throwOnError)||(u=u.catch(a.lQ)),u},t.fetchQuery=function(e,t,n){var i=(0,a.vh)(e,t,n),r=this.defaultQueryOptions(i);"undefined"===typeof r.retry&&(r.retry=!1);var s=this.queryCache.build(this,r);return s.isStaleByTime(r.staleTime)?s.fetch(r):Promise.resolve(s.state.data)},t.prefetchQuery=function(e,t,n){return this.fetchQuery(e,t,n).then(a.lQ).catch(a.lQ)},t.fetchInfiniteQuery=function(e,t,n){var i=(0,a.vh)(e,t,n);return i.behavior={onFetch:function(e){e.fetchFn=function(){var t,n,i,r,s,o,c,d=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,u=null==(i=e.fetchOptions)||null==(r=i.meta)?void 0:r.fetchMore,h=null==u?void 0:u.pageParam,m="forward"===(null==u?void 0:u.direction),p="backward"===(null==u?void 0:u.direction),f=(null==(s=e.state.data)?void 0:s.pages)||[],b=(null==(o=e.state.data)?void 0:o.pageParams)||[],x=(0,a.jY)(),y=null==x?void 0:x.signal,w=b,_=!1,k=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},N=function(e,t,n,i){return w=i?[t].concat(w):[].concat(w,[t]),i?[n].concat(e):[].concat(e,[n])},j=function(t,n,i,a){if(_)return Promise.reject("Cancelled");if("undefined"===typeof i&&!n&&t.length)return Promise.resolve(t);var r={queryKey:e.queryKey,signal:y,pageParam:i,meta:e.meta},s=k(r),o=Promise.resolve(s).then((function(e){return N(t,i,e,a)}));return(0,l.dd)(s)&&(o.cancel=s.cancel),o};if(f.length)if(m){var S="undefined"!==typeof h,C=S?h:g(e.options,f);c=j(f,S,C)}else if(p){var E="undefined"!==typeof h,A=E?h:v(e.options,f);c=j(f,E,A,!0)}else!function(){w=[];var t="undefined"===typeof e.options.getNextPageParam,n=!d||!f[0]||d(f[0],0,f);c=n?j([],t,b[0]):Promise.resolve(N([],b[0],f[0]));for(var i=function(n){c=c.then((function(i){if(!d||!f[n]||d(f[n],n,f)){var a=t?b[n]:g(e.options,i);return j(i,t,a)}return Promise.resolve(N(i,b[n],f[n]))}))},a=1;a<f.length;a++)i(a)}();else c=j([]);var T=c.then((function(e){return{pages:e,pageParams:w}}));return T.cancel=function(){_=!0,null==x||x.abort(),(0,l.dd)(c)&&c.cancel()},T}}},this.fetchQuery(i)},t.prefetchInfiniteQuery=function(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(a.lQ).catch(a.lQ)},t.cancelMutations=function(){var e=this,t=s.j.batch((function(){return e.mutationCache.getAll().map((function(e){return e.cancel()}))}));return Promise.all(t).then(a.lQ).catch(a.lQ)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var n=this.queryDefaults.find((function(t){return(0,a.Od)(e)===(0,a.Od)(t.queryKey)}));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find((function(t){return(0,a.Cp)(e,t.queryKey)})))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var n=this.mutationDefaults.find((function(t){return(0,a.Od)(e)===(0,a.Od)(t.mutationKey)}));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find((function(t){return(0,a.Cp)(e,t.mutationKey)})))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=(0,i.A)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=(0,a.F$)(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,i.A)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}()},466:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var r=n(251),s=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),w(this,e)},e}();t.Node=s;var o=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return i(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(s);t.DataNode=o;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Text,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(o);t.Text=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Comment,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(o);t.Comment=c;var d=function(e){function t(t,n){var i=e.call(this,n)||this;return i.name=t,i.type=r.ElementType.Directive,i}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(o);t.ProcessingInstruction=d;var u=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return i(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(s);t.NodeWithChildren=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.CDATA,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(u);t.CDATA=h;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Root,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(u);t.Document=m;var p=function(e){function t(t,n,i,a){void 0===i&&(i=[]),void 0===a&&(a="script"===t?r.ElementType.Script:"style"===t?r.ElementType.Style:r.ElementType.Tag);var s=e.call(this,i)||this;return s.name=t,s.attribs=n,s.type=a,s}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,i;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(i=e["x-attribsPrefix"])||void 0===i?void 0:i[t]}}))},enumerable:!1,configurable:!0}),t}(u);function f(e){return(0,r.isTag)(e)}function g(e){return e.type===r.ElementType.CDATA}function v(e){return e.type===r.ElementType.Text}function b(e){return e.type===r.ElementType.Comment}function x(e){return e.type===r.ElementType.Directive}function y(e){return e.type===r.ElementType.Root}function w(e,t){var n;if(void 0===t&&(t=!1),v(e))n=new l(e.data);else if(b(e))n=new c(e.data);else if(f(e)){var i=t?_(e.children):[],r=new p(e.name,a({},e.attribs),i);i.forEach((function(e){return e.parent=r})),null!=e.namespace&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]=a({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]=a({},e["x-attribsPrefix"])),n=r}else if(g(e)){i=t?_(e.children):[];var s=new h(i);i.forEach((function(e){return e.parent=s})),n=s}else if(y(e)){i=t?_(e.children):[];var o=new m(i);i.forEach((function(e){return e.parent=o})),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else{if(!x(e))throw new Error("Not implemented yet: ".concat(e.type));var u=new d(e.name,e.data);null!=e["x-name"]&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function _(e){for(var t=e.map((function(e){return w(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=p,t.isTag=f,t.isCDATA=g,t.isText=v,t.isComment=b,t.isDirective=x,t.isDocument=y,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=w},487:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,a=e[i];if(!(0<r(a,t)))break e;e[i]=t,e[n]=a,n=i}}function i(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,a=e.length,s=a>>>1;i<s;){var o=2*(i+1)-1,l=e[o],c=o+1,d=e[c];if(0>r(l,n))c<a&&0>r(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<a&&0>r(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,v=!1,b="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function _(e){if(g=!1,w(e),!f)if(null!==i(c))f=!0,N||(N=!0,k());else{var t=i(d);null!==t&&P(_,t.startTime-e)}}var k,N=!1,j=-1,S=5,C=-1;function E(){return!!v||!(t.unstable_now()-C<S)}function A(){if(v=!1,N){var e=t.unstable_now();C=e;var n=!0;try{e:{f=!1,g&&(g=!1,x(j),j=-1),p=!0;var r=m;try{t:{for(w(e),h=i(c);null!==h&&!(h.expirationTime>e&&E());){var s=h.callback;if("function"===typeof s){h.callback=null,m=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===i(c)&&a(c),w(e)}else a(c);h=i(c)}if(null!==h)n=!0;else{var l=i(d);null!==l&&P(_,l.startTime-e),n=!1}}break e}finally{h=null,m=r,p=!1}n=void 0}}finally{n?k():N=!1}}}if("function"===typeof y)k=function(){y(A)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,M=T.port2;T.port1.onmessage=A,k=function(){M.postMessage(null)}}else k=function(){b(A,0)};function P(e,n){j=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,a,r){var s=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?s+r:s:r=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>s?(e.sortIndex=r,n(d,e),null===i(c)&&e===i(d)&&(g?(x(j),j=-1):g=!0,P(_,r-s))):(e.sortIndex=o,n(c,e),f||p||(f=!0,N||(N=!0,k()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},540:(e,t,n)=>{"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,{A:()=>a})},569:(e,t)=>{t.SAME=0;t.CAMELCASE=1,t.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1}},576:(e,t,n)=>{"use strict";n.d(t,{t:()=>s});var i=n(540),a=n(817),r=n(339),s=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!r.S$&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},t}(0,i.A)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"===typeof e?n.setOnline(e):n.onOnline()}))},n.setOnline=function(e){this.online=e,e&&this.onOnline()},n.onOnline=function(){this.listeners.forEach((function(e){e()}))},n.isOnline=function(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine},t}(a.Q))},592:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,t:()=>a});var i=console;function a(){return i}function r(e){i=e}},599:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},606:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,h=(e=(0,i.escapeSpecialCharacters)(e)).match(o),m=h&&h[1]?h[1].toLowerCase():"";switch(m){case a:var p=u(e);if(!l.test(e))null===(t=null===(v=p.querySelector(r))||void 0===v?void 0:v.parentNode)||void 0===t||t.removeChild(v);if(!c.test(e))null===(n=null===(v=p.querySelector(s))||void 0===v?void 0:v.parentNode)||void 0===n||n.removeChild(v);return p.querySelectorAll(a);case r:case s:var g=d(e).querySelectorAll(m);return c.test(e)&&l.test(e)?g[0].parentNode.childNodes:g;default:return f?f(e):(v=d(e,s).querySelector(s)).childNodes;var v}};var i=n(389),a="html",r="head",s="body",o=/<([a-zA-Z]+[0-9]?)/,l=/<head[^]*>/i,c=/<body[^]*>/i,d=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},u=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},h="object"===typeof window&&window.DOMParser;if("function"===typeof h){var m=new h;d=u=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),m.parseFromString(e,"text/html")}}if("object"===typeof document&&document.implementation){var p=document.implementation.createHTMLDocument();d=function(e,t){if(t){var n=p.documentElement.querySelector(t);return n&&(n.innerHTML=e),p}return p.documentElement.innerHTML=e,p}}var f,g="object"===typeof document&&document.createElement("template");g&&g.content&&(f=function(e){return g.innerHTML=e,g.content.childNodes})},639:(e,t,n)=>{"use strict";n.d(t,{dd:()=>o,eJ:()=>d,wm:()=>c});var i=n(643),a=n(576),r=n(339);function s(e){return Math.min(1e3*Math.pow(2,e),3e4)}function o(e){return"function"===typeof(null==e?void 0:e.cancel)}var l=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function c(e){return e instanceof l}var d=function(e){var t,n,c,d,u=this,h=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){h=!0},this.continueRetry=function(){h=!1},this.continue=function(){return null==n?void 0:n()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise((function(e,t){c=e,d=t}));var m=function(t){u.isResolved||(u.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==n||n(),c(t))},p=function(t){u.isResolved||(u.isResolved=!0,null==e.onError||e.onError(t),null==n||n(),d(t))};!function c(){if(!u.isResolved){var d;try{d=e.fn()}catch(f){d=Promise.reject(f)}t=function(e){if(!u.isResolved&&(p(new l(e)),null==u.abort||u.abort(),o(d)))try{d.cancel()}catch(t){}},u.isTransportCancelable=o(d),Promise.resolve(d).then(m).catch((function(t){var o,l;if(!u.isResolved){var d=null!=(o=e.retry)?o:3,m=null!=(l=e.retryDelay)?l:s,f="function"===typeof m?m(u.failureCount,t):m,g=!0===d||"number"===typeof d&&u.failureCount<d||"function"===typeof d&&d(u.failureCount,t);!h&&g?(u.failureCount++,null==e.onFail||e.onFail(u.failureCount,t),(0,r.yy)(f).then((function(){if(!i.m.isFocused()||!a.t.isOnline())return new Promise((function(t){n=t,u.isPaused=!0,null==e.onPause||e.onPause()})).then((function(){n=void 0,u.isPaused=!1,null==e.onContinue||e.onContinue()}))})).then((function(){h?p(t):c()}))):p(t)}}))}}()}},643:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var i=n(540),a=n(817),r=n(339),s=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!r.S$&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},t}(0,i.A)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"===typeof e?n.setFocused(e):n.onFocus()}))},n.setFocused=function(e){this.focused=e,e&&this.onFocus()},n.onFocus=function(){this.listeners.forEach((function(e){e()}))},n.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(a.Q))},672:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToDOM=t.domToReact=t.attributesToProps=t.Text=t.ProcessingInstruction=t.Element=t.Comment=void 0,t.default=function(e,t){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];return(0,s.default)((0,a.default)(e,(null===t||void 0===t?void 0:t.htmlparser2)||l),t)};var a=i(n(149));t.htmlToDOM=a.default;var r=i(n(54));t.attributesToProps=r.default;var s=i(n(938));t.domToReact=s.default;var o=n(92);Object.defineProperty(t,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(t,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(t,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return o.Text}});var l={lowerCaseAttributeNames:!1}},676:(e,t,n)=>{"use strict";function i(e,t,n,i,a,r,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=s}const a={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((e=>{a[e]=new i(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((e=>{let[t,n]=e;a[t]=new i(t,1,!1,n,null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((e=>{a[e]=new i(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((e=>{a[e]=new i(e,2,!1,e,null,!1,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((e=>{a[e]=new i(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((e=>{a[e]=new i(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((e=>{a[e]=new i(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((e=>{a[e]=new i(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((e=>{a[e]=new i(e,5,!1,e.toLowerCase(),null,!1,!1)}));const r=/[\-\:]([a-z])/g,s=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((e=>{const t=e.replace(r,s);a[t]=new i(t,1,!1,e,null,!1,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((e=>{const t=e.replace(r,s);a[t]=new i(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((e=>{const t=e.replace(r,s);a[t]=new i(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((e=>{a[e]=new i(e,1,!1,e.toLowerCase(),null,!1,!1)}));a.xlinkHref=new i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((e=>{a[e]=new i(e,1,!1,e.toLowerCase(),null,!0,!0)}));const{CAMELCASE:o,SAME:l,possibleStandardNames:c}=n(569),d=RegExp.prototype.test.bind(new RegExp("^(data|aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$")),u=Object.keys(c).reduce(((e,t)=>{const n=c[t];return n===l?e[t]=t:n===o?e[t.toLowerCase()]=t:e[t]=n,e}),{});t.BOOLEAN=3,t.BOOLEANISH_STRING=2,t.NUMERIC=5,t.OVERLOADED_BOOLEAN=4,t.POSITIVE_NUMERIC=6,t.RESERVED=0,t.STRING=1,t.getPropertyInfo=function(e){return a.hasOwnProperty(e)?a[e]:null},t.isCustomAttribute=d,t.possibleStandardNames=u},794:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var r=n(251),s=n(466);a(n(466),t);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,n){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof t&&(n=t,t=o),"object"===typeof e&&(t=e,e=void 0),this.callback=null!==e&&void 0!==e?e:null,this.options=null!==t&&void 0!==t?t:o,this.elementCB=null!==n&&void 0!==n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?r.ElementType.Tag:void 0,i=new s.Element(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===r.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new s.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment)this.lastNode.data+=e;else{var t=new s.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new s.Text(""),t=new s.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new s.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"===typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},814:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,i=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function d(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var u=1,h=1;function m(e){var t=e.match(n);t&&(u+=t.length);var i=e.lastIndexOf("\n");h=~i?e.length-i:h+e.length}function p(){var e={line:u,column:h};return function(t){return t.position=new f(e),x(),t}}function f(e){this.start=e,this.end={line:u,column:h},this.source=l.source}f.prototype.content=e;var g=[];function v(t){var n=new Error(l.source+":"+u+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=u,n.column=h,n.source=e,!l.silent)throw n;g.push(n)}function b(t){var n=t.exec(e);if(n){var i=n[0];return m(i),e=e.slice(i.length),n}}function x(){b(i)}function y(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return v("End of comment missing");var i=e.slice(2,n-2);return h+=2,m(i),e=e.slice(n),h+=2,t({type:"comment",comment:i})}}function _(){var e=p(),n=b(a);if(n){if(w(),!b(r))return v("property missing ':'");var i=b(s),l=e({type:"declaration",property:d(n[0].replace(t,c)),value:i?d(i[0].replace(t,c)):c});return b(o),l}}return x(),function(){var e,t=[];for(y(t);e=_();)!1!==e&&(t.push(e),y(t));return t}()}},817:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var i=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,n=e||function(){};return this.listeners.push(n),this.onSubscribe(),function(){t.listeners=t.listeners.filter((function(e){return e!==n})),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}()},854:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var i=n(339),a=new(function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):(0,i.G6)((function(){t.notifyFn(e)}))},t.batchCalls=function(e){var t=this;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t.schedule((function(){e.apply(void 0,i)}))}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&(0,i.G6)((function(){e.batchNotifyFn((function(){t.forEach((function(t){e.notifyFn(t)}))}))}))},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}())},863:(e,t,n)=>{"use strict";var i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:a,fetchPriority:r}):"script"===n&&s.d.X(e,{crossOrigin:i,integrity:a,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},900:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=t.CARRIAGE_RETURN_PLACEHOLDER=t.CARRIAGE_RETURN_REGEX=t.CARRIAGE_RETURN=t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES=void 0,t.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES.reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{}),t.CARRIAGE_RETURN="\r",t.CARRIAGE_RETURN_REGEX=new RegExp(t.CARRIAGE_RETURN,"g"),t.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(t.CARRIAGE_RETURN_PLACEHOLDER,"g")},916:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function a(e,t,i){var a=null;if(void 0!==i&&(a=""+i),void 0!==t.key&&(a=""+t.key),"key"in t)for(var r in i={},t)"key"!==r&&(i[r]=t[r]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=a,t.jsxs=a},920:(e,t,n)=>{"use strict";n.d(t,{QueryClient:()=>i.QueryClient,QueryClientProvider:()=>a.QueryClientProvider,useMutation:()=>a.useMutation,useQuery:()=>a.useQuery,useQueryClient:()=>a.useQueryClient});var i=n(146);n.o(i,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return i.QueryClientProvider}}),n.o(i,"useMutation")&&n.d(t,{useMutation:function(){return i.useMutation}}),n.o(i,"useQuery")&&n.d(t,{useQuery:function(){return i.useQuery}}),n.o(i,"useQueryClient")&&n.d(t,{useQueryClient:function(){return i.useQueryClient}});var a=n(999)},935:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,i=/-([a-z])/g,a=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||a.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(s,l):e.replace(r,l)).replace(i,o))}},938:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){void 0===n&&(n={});for(var i=[],a="function"===typeof n.replace,c=n.transform||s.returnFirstArg,d=n.library||o,u=d.cloneElement,h=d.createElement,m=d.isValidElement,p=t.length,f=0;f<p;f++){var g=t[f];if(a){var v=n.replace(g,f);if(m(v)){p>1&&(v=u(v,{key:v.key||f})),i.push(c(v,g,f));continue}}if("text"!==g.type){var b=g,x={};l(b)?((0,s.setStyleProp)(b.attribs.style,b.attribs),x=b.attribs):b.attribs&&(x=(0,r.default)(b.attribs,b.name));var y=void 0;switch(g.type){case"script":case"style":g.children[0]&&(x.dangerouslySetInnerHTML={__html:g.children[0].data});break;case"tag":"textarea"===g.name&&g.children[0]?x.defaultValue=g.children[0].data:g.children&&g.children.length&&(y=e(g.children,n));break;default:continue}p>1&&(x.key=f),i.push(c(h(g.name,x,y),g,f))}else{var w=!g.data.trim().length;if(w&&g.parent&&!(0,s.canTextBeChildOfNode)(g.parent))continue;if(n.trim&&w)continue;i.push(c(g.data,g,f))}}return 1===i.length?i[0]:i};var a=n(950),r=i(n(54)),s=n(156),o={cloneElement:a.cloneElement,createElement:a.createElement,isValidElement:a.isValidElement};function l(e){return s.PRESERVE_CUSTOM_ATTRIBUTES&&"tag"===e.type&&(0,s.isCustomComponent)(e.name,e.attribs)}},950:(e,t,n)=>{"use strict";e.exports=n(983)},967:function(e,t,n){"use strict";var i=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(380)),a=n(935);function r(e,t){var n={};return e&&"string"===typeof e?((0,i.default)(e,(function(e,i){e&&i&&(n[(0,a.camelCase)(e,t)]=i)})),n):n}r.default=r,e.exports=r},983:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var y=x.prototype=new b;y.constructor=x,f(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function N(e,t,i,a,r,s){return i=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:s}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(){}function A(e,t,a,r,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(o){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case i:d=!0;break;case h:return A((d=e._init)(e._payload),t,a,r,s)}}if(d)return s=s(e),d=""===r?"."+C(e,0):r,w(s)?(a="",null!=d&&(a=d.replace(S,"$&/")+"/"),A(s,t,a,"",(function(e){return e}))):null!=s&&(j(s)&&(l=s,c=a+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+d,s=N(l.type,c,void 0,0,0,l.props)),t.push(s)),1;d=0;var u,p=""===r?".":r+":";if(w(e))for(var f=0;f<e.length;f++)d+=A(r=e[f],t,a,o=p+C(r,f),s);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=m&&u[m]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(r=e.next()).done;)d+=A(r=r.value,t,a,o=p+C(r,f++),s);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,r,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function T(e,t,n){if(null==e)return e;var i=[],a=0;return A(e,i,"","",(function(e){return t.call(n,e,a++)})),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=s,t.PureComponent=x,t.StrictMode=r,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=f({},e.props),a=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!k.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(i[r]=t[r]);var r=arguments.length-2;if(1===r)i.children=n;else if(1<r){for(var s=Array(r),o=0;o<r;o++)s[o]=arguments[o+2];i.children=s}return N(e.type,a,void 0,0,0,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var i,a={},r=null;if(null!=t)for(i in void 0!==t.key&&(r=""+t.key),t)k.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return N(e,r,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var i=e(),a=_.S;null!==a&&a(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(D,P)}catch(r){P(r)}finally{_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var i=_.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.1.0"},999:(e,t,n)=>{"use strict";n.d(t,{QueryClientProvider:()=>h,useMutation:()=>y,useQuery:()=>M,useQueryClient:()=>u});var i=n(854),a=n(119).unstable_batchedUpdates;i.j.setBatchNotifyFunction(a);var r=n(592),s=console;(0,r.B)(s);var o=n(950),l=o.createContext(void 0),c=o.createContext(!1);function d(e){return e&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=l),window.ReactQueryClientContext):l}var u=function(){var e=o.useContext(d(o.useContext(c)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},h=function(e){var t=e.client,n=e.contextSharing,i=void 0!==n&&n,a=e.children;o.useEffect((function(){return t.mount(),function(){t.unmount()}}),[t]);var r=d(i);return o.createElement(c.Provider,{value:i},o.createElement(r.Provider,{value:t},a))},m=n(168),p=n(339),f=n(540),g=n(223),v=n(817),b=function(e){function t(t,n){var i;return(i=e.call(this)||this).client=t,i.setOptions(n),i.bindMethods(),i.updateResult(),i}(0,f.A)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,m.A)({},this.options,{variables:"undefined"!==typeof e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:(0,g.$)(),t=(0,m.A)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},n.notify=function(e){var t=this;i.j.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(v.Q);function x(e,t,n){return"function"===typeof t?t.apply(void 0,n):"boolean"===typeof t?t:!!e}function y(e,t,n){var a=o.useRef(!1),r=o.useState(0)[1],s=(0,p.GR)(e,t,n),l=u(),c=o.useRef();c.current?c.current.setOptions(s):c.current=new b(l,s);var d=c.current.getCurrentResult();o.useEffect((function(){a.current=!0;var e=c.current.subscribe(i.j.batchCalls((function(){a.current&&r((function(e){return e+1}))})));return function(){a.current=!1,e()}}),[]);var h=o.useCallback((function(e,t){c.current.mutate(e,t).catch(p.lQ)}),[]);if(d.error&&x(void 0,c.current.options.useErrorBoundary,[d.error]))throw d.error;return(0,m.A)({},d,{mutate:h,mutateAsync:d.mutate})}var w=n(643),_=n(639),k=function(e){function t(t,n){var i;return(i=e.call(this)||this).client=t,i.options=n,i.trackedProps=[],i.selectError=null,i.bindMethods(),i.setOptions(n),i}(0,f.A)(t,e);var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),N(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return j(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return j(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(e,t){var n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var a=this.hasListeners();a&&S(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(t),!a||this.currentQuery===i&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var r=this.computeRefetchInterval();!a||this.currentQuery===i&&this.options.enabled===n.enabled&&r===this.currentRefetchInterval||this.updateRefetchInterval(r)},n.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,t);return this.createResult(n,t)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(e,t){var n=this,i={},a=function(e){n.trackedProps.includes(e)||n.trackedProps.push(e)};return Object.keys(e).forEach((function(t){Object.defineProperty(i,t,{configurable:!1,enumerable:!0,get:function(){return a(t),e[t]}})})),(t.useErrorBoundary||t.suspense)&&a("error"),i},n.getNextResult=function(e){var t=this;return new Promise((function(n,i){var a=t.subscribe((function(t){t.isFetching||(a(),t.isError&&(null==e?void 0:e.throwOnError)?i(t.error):n(t))}))}))},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(e){return this.fetch((0,m.A)({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},n.fetchOptimistic=function(e){var t=this,n=this.client.defaultQueryObserverOptions(e),i=this.client.getQueryCache().build(this.client,n);return i.fetch().then((function(){return t.createResult(i,n)}))},n.fetch=function(e){var t=this;return this.executeFetch(e).then((function(){return t.updateResult(),t.currentResult}))},n.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(p.lQ)),t},n.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!p.S$&&!this.currentResult.isStale&&(0,p.gn)(this.options.staleTime)){var t=(0,p.j3)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),t)}},n.computeRefetchInterval=function(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},n.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!p.S$&&!1!==this.options.enabled&&(0,p.gn)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(t.options.refetchIntervalInBackground||w.m.isFocused())&&t.executeFetch()}),this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(e,t){var n,i=this.currentQuery,a=this.options,s=this.currentResult,o=this.currentResultState,l=this.currentResultOptions,c=e!==i,d=c?e.state:this.currentQueryInitialState,u=c?this.currentResult:this.previousQueryResult,h=e.state,m=h.dataUpdatedAt,f=h.error,g=h.errorUpdatedAt,v=h.isFetching,b=h.status,x=!1,y=!1;if(t.optimisticResults){var w=this.hasListeners(),_=!w&&N(e,t),k=w&&S(e,i,t,a);(_||k)&&(v=!0,m||(b="loading"))}if(t.keepPreviousData&&!h.dataUpdateCount&&(null==u?void 0:u.isSuccess)&&"error"!==b)n=u.data,m=u.dataUpdatedAt,b=u.status,x=!0;else if(t.select&&"undefined"!==typeof h.data)if(s&&h.data===(null==o?void 0:o.data)&&t.select===this.selectFn)n=this.selectResult;else try{this.selectFn=t.select,n=t.select(h.data),!1!==t.structuralSharing&&(n=(0,p.BH)(null==s?void 0:s.data,n)),this.selectResult=n,this.selectError=null}catch(E){(0,r.t)().error(E),this.selectError=E}else n=h.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof n&&("loading"===b||"idle"===b)){var j;if((null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==l?void 0:l.placeholderData))j=s.data;else if(j="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof j)try{j=t.select(j),!1!==t.structuralSharing&&(j=(0,p.BH)(null==s?void 0:s.data,j)),this.selectError=null}catch(E){(0,r.t)().error(E),this.selectError=E}"undefined"!==typeof j&&(b="success",n=j,y=!0)}return this.selectError&&(f=this.selectError,n=this.selectResult,g=Date.now(),b="error"),{status:b,isLoading:"loading"===b,isSuccess:"success"===b,isError:"error"===b,isIdle:"idle"===b,data:n,dataUpdatedAt:m,error:f,errorUpdatedAt:g,failureCount:h.fetchFailureCount,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&"loading"!==b,isLoadingError:"error"===b&&0===h.dataUpdatedAt,isPlaceholderData:y,isPreviousData:x,isRefetchError:"error"===b&&0!==h.dataUpdatedAt,isStale:C(e,t),refetch:this.refetch,remove:this.remove}},n.shouldNotifyListeners=function(e,t){if(!t)return!0;var n=this.options,i=n.notifyOnChangeProps,a=n.notifyOnChangePropsExclusions;if(!i&&!a)return!0;if("tracked"===i&&!this.trackedProps.length)return!0;var r="tracked"===i?this.trackedProps:i;return Object.keys(e).some((function(n){var i=n,s=e[i]!==t[i],o=null==r?void 0:r.some((function(e){return e===n})),l=null==a?void 0:a.some((function(e){return e===n}));return s&&!l&&(!r||o)}))},n.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,p.f8)(this.currentResult,t)){var n={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(n.listeners=!0),this.notify((0,m.A)({},n,e))}},n.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},n.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||(0,_.wm)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},n.notify=function(e){var t=this;i.j.batch((function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)})),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})}))},t}(v.Q);function N(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&j(e,t,t.refetchOnMount)}function j(e,t,n){if(!1!==t.enabled){var i="function"===typeof n?n(e):n;return"always"===i||!1!==i&&C(e,t)}return!1}function S(e,t,n,i){return!1!==n.enabled&&(e!==t||!1===i.enabled)&&(!n.suspense||"error"!==e.state.status)&&C(e,n)}function C(e,t){return e.isStaleByTime(t.staleTime)}function E(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var A=o.createContext(E()),T=function(){return o.useContext(A)};function M(e,t,n){return function(e,t){var n=o.useRef(!1),a=o.useState(0)[1],r=u(),s=T(),l=r.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=i.j.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=i.j.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=i.j.batchCalls(l.onSettled)),l.suspense&&("number"!==typeof l.staleTime&&(l.staleTime=1e3),0===l.cacheTime&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(s.isReset()||(l.retryOnMount=!1));var c=o.useState((function(){return new t(r,l)}))[0],d=c.getOptimisticResult(l);if(o.useEffect((function(){n.current=!0,s.clearReset();var e=c.subscribe(i.j.batchCalls((function(){n.current&&a((function(e){return e+1}))})));return c.updateResult(),function(){n.current=!1,e()}}),[s,c]),o.useEffect((function(){c.setOptions(l,{listeners:!1})}),[l,c]),l.suspense&&d.isLoading)throw c.fetchOptimistic(l).then((function(e){var t=e.data;null==l.onSuccess||l.onSuccess(t),null==l.onSettled||l.onSettled(t,null)})).catch((function(e){s.clearReset(),null==l.onError||l.onError(e),null==l.onSettled||l.onSettled(void 0,e)}));if(d.isError&&!s.isReset()&&!d.isFetching&&x(l.suspense,l.useErrorBoundary,[d.error,c.getCurrentQuery()]))throw d.error;return"tracked"===l.notifyOnChangeProps&&(d=c.trackResult(d,l)),d}((0,p.vh)(e,t,n),k)}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Ki,hasStandardBrowserEnv:()=>Ji,hasStandardBrowserWebWorkerEnv:()=>$i,navigator:()=>Xi,origin:()=>Zi});var t={};n.r(t),n.d(t,{FILE:()=>Rf,HTML:()=>If,TEXT:()=>Lf,URL:()=>Of});var i=n(950),a=n(352);function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(599);const u=["sri"],h=["page"],m=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function b(){return j((function(e,t){let{pathname:n,search:i,hash:a}=e.location;return _("",{pathname:n,search:i,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:k(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function x(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Tt){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return d(d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?N(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function N(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function j(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:r=!1}=i,s=a.history,o="POP",l=null,c=u();function u(){return(s.state||{idx:null}).idx}function h(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function m(e){return S(e)}null==c&&(c=0,s.replaceState(d(d({},s.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(a,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(v,h),l=e,()=>{a.removeEventListener(v,h),l=null}},createHref:e=>t(a,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let i=_(p.location,e,t);n&&n(i,e),c=u()+1;let d=w(i,c),h=p.createHref(i);try{s.pushState(d,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;a.location.assign(h)}r&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let i=_(p.location,e,t);n&&n(i,e),c=u();let a=w(i,c),d=p.createHref(i);s.replaceState(a,"",d),r&&l&&l({action:o,location:p.location,delta:0})},go:e=>s.go(e)};return p}function S(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),x(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:k(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function C(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,i){let a=U(("string"===typeof t?N(t):t).pathname||"/",n);if(null==a)return null;let r=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let s=null;for(let o=0;null==s&&o<r.length;++o){let e=B(a);s=z(r[o],e,i)}return s}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=(e,a,r)=>{let s={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};s.relativePath.startsWith("/")&&(x(s.relativePath.startsWith(i),'Absolute route path "'.concat(s.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),s.relativePath=s.relativePath.slice(i.length));let o=Y([i,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(x(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),A(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:F(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of T(e.path))a(e,t,i);else a(e,t)})),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,a=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===i.length)return a?[r,""]:[r];let s=T(i.join("/")),o=[];return o.push(...s.map((e=>""===e?r:[r,e].join("/")))),a&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var M=/^:[\w-]+$/,P=3,D=2,R=1,O=10,L=-2,I=e=>"*"===e;function F(e,t){let n=e.split("/"),i=n.length;return n.some(I)&&(i+=L),t&&(i+=D),n.filter((e=>!I(e))).reduce(((e,t)=>e+(M.test(t)?P:""===t?R:O)),i)}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,a={},r="/",s=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===r?t:t.slice(r.length)||"/",d=q({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!i[i.length-1].route.index&&(d=q({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),s.push({params:a,pathname:Y([r,d.pathname]),pathnameBase:K(Y([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=Y([r,d.pathnameBase]))}return s}function q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=W(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let r=a[0],s=r.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:i.reduce(((e,t,n)=>{let{paramName:i,isOptional:a}=t;if("*"===i){let e=o[n]||"";s=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:r,pathnameBase:s,pattern:e}}function W(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(i.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function B(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function V(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function G(e){let t=H(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function Q(e,t,n){let i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=N(e):(i=d({},e),x(!i.pathname||!i.pathname.includes("?"),V("?","pathname","search",i)),x(!i.pathname||!i.pathname.includes("#"),V("#","pathname","hash",i)),x(!i.search||!i.search.includes("#"),V("#","search","hash",i)));let r,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)r=n;else{let e=t.length-1;if(!a&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:a=""}="string"===typeof e?N(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:X(i),hash:J(a)}}(i,r),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),K=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],ee=(new Set(Z),["GET",...Z]);new Set(ee),Symbol("ResetLoaderData");var te=i.createContext(null);te.displayName="DataRouter";var ne=i.createContext(null);ne.displayName="DataRouterState";var ie=i.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var ae=i.createContext(new Map);ae.displayName="Fetchers";var re=i.createContext(null);re.displayName="Await";var se=i.createContext(null);se.displayName="Navigation";var oe=i.createContext(null);oe.displayName="Location";var le=i.createContext({outlet:null,matches:[],isDataRoute:!1});le.displayName="Route";var ce=i.createContext(null);ce.displayName="RouteError";function de(){return null!=i.useContext(oe)}function ue(){return x(de(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(oe).location}var he="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function me(e){i.useContext(se).static||i.useLayoutEffect(e)}function pe(){let{isDataRoute:e}=i.useContext(le);return e?function(){let{router:e}=je("useNavigate"),t=Ce("useNavigate"),n=i.useRef(!1);me((()=>{n.current=!0}));let a=i.useCallback((async function(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(n.current,he),n.current&&("number"===typeof i?e.navigate(i):await e.navigate(i,d({fromRouteId:t},a)))}),[e,t]);return a}():function(){x(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(te),{basename:t,navigator:n}=i.useContext(se),{matches:a}=i.useContext(le),{pathname:r}=ue(),s=JSON.stringify(G(a)),o=i.useRef(!1);me((()=>{o.current=!0}));let l=i.useCallback((function(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(o.current,he),!o.current)return;if("number"===typeof i)return void n.go(i);let l=Q(i,JSON.parse(s),r,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Y([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)}),[t,n,s,r,e]);return l}()}var fe=i.createContext(null);function ge(){let{matches:e}=i.useContext(le),t=e[e.length-1];return t?t.params:{}}function ve(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=i.useContext(le),{pathname:a}=ue(),r=JSON.stringify(G(n));return i.useMemo((()=>Q(e,JSON.parse(r),a,"path"===t)),[e,r,a,t])}function be(e,t,n,a){x(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=i.useContext(se),{matches:s}=i.useContext(le),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";Te(c,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(c,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,p=ue();if(t){var f;let e="string"===typeof t?N(t):t;x("/"===u||(null===(f=e.pathname)||void 0===f?void 0:f.startsWith(u)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(u,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=p;let g=m.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=C(e,{pathname:v});y(h||null!=b,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),y(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=ke(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Y([u,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Y([u,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,a);return t&&w?i.createElement(oe.Provider,{value:{location:d({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},w):w}function xe(){let e=Ee(),t=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=i.createElement(i.Fragment,null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:s},"ErrorBoundary")," or"," ",i.createElement("code",{style:s},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:r},n):null,o)}var ye=i.createElement(xe,null),we=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(le.Provider,{value:this.props.routeContext},i.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _e(e){let{routeContext:t,match:n,children:a}=e,r=i.useContext(te);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(le.Provider,{value:t},a)}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,r=null===n||void 0===n?void 0:n.errors;if(null!=r){let e=a.findIndex((e=>e.route.id&&void 0!==(null===r||void 0===r?void 0:r[e.route.id])));x(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(r).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,o=-1;if(n)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=i),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){s=!0,a=o>=0?a.slice(0,o+1):[a[0]];break}}}return a.reduceRight(((e,l,c)=>{let d,u=!1,h=null,m=null;n&&(d=r&&l.route.id?r[l.route.id]:void 0,h=l.route.errorElement||ye,s&&(o<0&&0===c?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,m=null):o===c&&(u=!0,m=l.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,c+1)),f=()=>{let t;return t=d?h:u?m:l.route.Component?i.createElement(l.route.Component,null):l.route.element?l.route.element:e,i.createElement(_e,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?i.createElement(we,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}function Ne(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function je(e){let t=i.useContext(te);return x(t,Ne(e)),t}function Se(e){let t=i.useContext(ne);return x(t,Ne(e)),t}function Ce(e){let t=function(e){let t=i.useContext(le);return x(t,Ne(e)),t}(e),n=t.matches[t.matches.length-1];return x(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ee(){var e;let t=i.useContext(ce),n=Se("useRouteError"),a=Ce("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[a]}var Ae={};function Te(e,t,n){t||Ae[e]||(Ae[e]=!0,y(!1,n))}i.memo((function(e){let{routes:t,future:n,state:i}=e;return be(t,void 0,i,n)}));function Me(e){let{to:t,replace:n,state:a,relative:r}=e;x(de(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=i.useContext(se);y(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=i.useContext(le),{pathname:l}=ue(),c=pe(),d=Q(t,G(o),l,"path"===r),u=JSON.stringify(d);return i.useEffect((()=>{c(JSON.parse(u),{replace:n,state:a,relative:r})}),[c,u,r,n,a]),null}function Pe(e){return function(e){let t=i.useContext(le).outlet;return t?i.createElement(fe.Provider,{value:e},t):t}(e.context)}function De(e){x(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Re(e){let{basename:t="/",children:n=null,location:a,navigationType:r="POP",navigator:s,static:o=!1}=e;x(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=i.useMemo((()=>({basename:l,navigator:s,static:o,future:{}})),[l,s,o]);"string"===typeof a&&(a=N(a));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:p="default"}=a,f=i.useMemo((()=>{let e=U(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:m,key:p},navigationType:r}}),[l,d,u,h,m,p,r]);return y(null!=f,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:i.createElement(se.Provider,{value:c},i.createElement(oe.Provider,{children:n,value:f}))}function Oe(e){let{children:t,location:n}=e;return be(Le(t),n)}i.Component;function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return i.Children.forEach(e,((e,a)=>{if(!i.isValidElement(e))return;let r=[...t,a];if(e.type===i.Fragment)return void n.push.apply(n,Le(e.props.children,r));x(e.type===De,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),x(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Le(e.props.children,r)),n.push(s)})),n}var Ie="get",Fe="application/x-www-form-urlencoded";function ze(e){return null!=e&&"string"===typeof e.tagName}function qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map((e=>[n,e])):[[n,i]])}),[]))}var We=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ue(e){return null==e||Be.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Fe,'"')),null)}function Ve(e,t){let n,i,a,r,s;if(ze(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");i=s?U(s,t):null,n=e.getAttribute("method")||Ie,a=Ue(e.getAttribute("enctype"))||Fe,r=new FormData(e)}else if(function(e){return ze(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ze(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(i=o?U(o,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Ie,a=Ue(e.getAttribute("formenctype"))||Ue(s.getAttribute("enctype"))||Fe,r=new FormData(s,e),!function(){if(null===We)try{new FormData(document.createElement("form"),0),We=!1}catch(Tt){We=!0}return We}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,i)}}else{if(ze(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ie,i=null,a=Fe,s=e}var o;return r&&"text/plain"===a&&(s=r,r=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:r,body:s}}function He(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ge(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Qe(e){return null!=e&&"string"===typeof e.page}function Ye(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ke(e,t,n,i,a,r){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter(((e,t)=>s(e,t)||o(e,t))):"data"===r?t.filter(((t,r)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,r)||o(t,r))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0})):[]}function Xe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map((e=>{let i=t.routes[e.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a})).flat(1),[...new Set(i)];var i}function Je(e,t){let n=new Set,i=new Set(t);return e.reduce(((e,a)=>{if(t&&!Qe(a)&&"script"===a.as&&a.href&&i.has(a.href))return e;let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(a));return n.has(r)||(n.add(r),e.push({key:r,link:a})),e}),[])}function $e(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Ze=new Set([100,101,204,205]);function et(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===U(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}i.Component;function tt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let a,r=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(t))return i.createElement(nt,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return i.createElement(nt,{title:"Application Error!",isOutsideRemixApp:n},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),r)}function nt(e){var t;let{title:n,renderScripts:a,isOutsideRemixApp:r,children:s}=e,{routeModules:o}=ot();return null!==o.root&&void 0!==t&&t.Layout&&!r?s:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,n)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,a?i.createElement(pt,null):null)))}function it(e,t){return"lazy"===e.mode&&!0===t}function at(){let e=i.useContext(te);return He(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rt(){let e=i.useContext(ne);return He(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var st=i.createContext(void 0);function ot(){let e=i.useContext(st);return He(e,"You must render this element inside a <HydratedRouter> element"),e}function lt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ct(e,t,n){if(n&&!mt)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function dt(e){let{page:t}=e,n=r(e,h),{router:a}=at(),s=i.useMemo((()=>C(a.routes,t,a.basename)),[a.routes,t,a.basename]);return s?i.createElement(ht,d({page:t,matches:s},n)):null}function ut(e){let{manifest:t,routeModules:n}=ot(),[a,r]=i.useState([]);return i.useEffect((()=>{let i=!1;return async function(e,t,n){let i=await Promise.all(e.map((async e=>{let i=t.routes[e.route.id];if(i){let e=await Ge(i,n);return e.links?e.links():[]}return[]})));return Je(i.flat(1).filter(Ye).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?d(d({},e),{},{rel:"prefetch",as:"style"}):d(d({},e),{},{rel:"prefetch"}))))}(e,t,n).then((e=>{i||r(e)})),()=>{i=!0}}),[e,t,n]),a}function ht(e){let{page:t,matches:n}=e,a=r(e,m),s=ue(),{manifest:o,routeModules:l}=ot(),{basename:c}=at(),{loaderData:u,matches:h}=rt(),p=i.useMemo((()=>Ke(t,n,h,o,s,"data")),[t,n,h,o,s]),f=i.useMemo((()=>Ke(t,n,h,o,s,"assets")),[t,n,h,o,s]),g=i.useMemo((()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,i=!1;if(n.forEach((t=>{var n;let a=o.routes[t.route.id];a&&a.hasLoader&&(!p.some((e=>e.route.id===t.route.id))&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?i=!0:e.add(t.route.id))})),0===e.size)return[];let a=et(t,c);return i&&e.size>0&&a.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[a.pathname+a.search]}),[c,u,s,o,p,n,t,l]),v=i.useMemo((()=>Xe(f,o)),[f,o]),b=ut(f);return i.createElement(i.Fragment,null,g.map((e=>i.createElement("link",d({key:e,rel:"prefetch",as:"fetch",href:e},a)))),v.map((e=>i.createElement("link",d({key:e,rel:"modulepreload",href:e},a)))),b.map((e=>{let{key:t,link:n}=e;return i.createElement("link",d({key:t},n))})))}st.displayName="FrameworkContext";var mt=!1;function pt(e){let{manifest:t,serverHandoffString:n,isSpaMode:a,renderMeta:s,routeDiscovery:o,ssr:l}=ot(),{router:c,static:h,staticContext:m}=at(),{matches:p}=rt(),f=it(o,l);s&&(s.didRenderScripts=!0);let g=ct(p,null,a);i.useEffect((()=>{0}),[]);let v=i.useMemo((()=>{var a;let s=m?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==t.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map(((e,n)=>{let i="route".concat(n),a=t.routes[e.route.id];He(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,d=[...r?[{module:r,varName:"".concat(i,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===d.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[d.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(i," = {").concat(d.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=r(e,u),a=new Set(t.state.matches.map((e=>e.route.id))),s=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(s.pop();s.length>0;)o.push("/".concat(s.join("/"))),s.pop();o.forEach((e=>{let n=C(t.routes,e,t.basename);n&&n.forEach((e=>a.add(e.route.id)))}));let l=[...a].reduce(((e,t)=>Object.assign(e,{[t]:i.routes[t]})),{});return d(d({},i),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return i.createElement(i.Fragment,null,i.createElement("script",d(d({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:$e(s),type:void 0})),i.createElement("script",d(d({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:$e(o),type:"module",async:!0})))}),[]),b=mt?[]:(t.entry.imports.concat(Xe(g,t,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let y="object"===typeof t.sri?t.sri:{};return mt?null:i.createElement(i.Fragment,null,"object"===typeof t.sri?i.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:y})}}):null,f?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:y[t.url],suppressHydrationWarning:!0}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:y[t.entry.module],suppressHydrationWarning:!0}),b.map((t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:y[t],suppressHydrationWarning:!0}))),v)}function ft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var gt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{gt&&(window.__reactRouterVersion="7.6.3")}catch(Tt){}function vt(e){let{basename:t,children:n,window:a}=e,r=i.useRef();null==r.current&&(r.current=b({window:a,v5Compat:!0}));let s=r.current,[o,l]=i.useState({action:s.action,location:s.location}),c=i.useCallback((e=>{i.startTransition((()=>l(e)))}),[l]);return i.useLayoutEffect((()=>s.listen(c)),[s,c]),i.createElement(Re,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var bt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=i.forwardRef((function(e,t){let n,{onClick:a,discover:s="render",prefetch:o="none",relative:l,reloadDocument:c,replace:u,state:h,target:m,to:f,preventScrollReset:g,viewTransition:v}=e,b=r(e,p),{basename:w}=i.useContext(se),_="string"===typeof f&&bt.test(f),N=!1;if("string"===typeof f&&_&&(n=f,gt))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=U(t.pathname,w);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:N=!0}catch(Tt){y(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let j=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=i.useContext(se),{hash:r,pathname:s,search:o}=ve(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:Y([n,s])),a.createHref({pathname:l,search:o,hash:r})}(f,{relative:l}),[S,C,E]=function(e,t){let n=i.useContext(st),[a,r]=i.useState(!1),[s,o]=i.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=i.useRef(null);i.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=e=>{e.forEach((e=>{o(e.isIntersecting)}))},t=new IntersectionObserver(e,{threshold:.5});return m.current&&t.observe(m.current),()=>{t.disconnect()}}}),[e]),i.useEffect((()=>{if(a){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[a]);let p=()=>{r(!0)},f=()=>{r(!1),o(!1)};return n?"intent"!==e?[s,m,{}]:[s,m,{onFocus:lt(l,p),onBlur:lt(c,f),onMouseEnter:lt(d,p),onMouseLeave:lt(u,f),onTouchStart:lt(h,p)}]:[!1,m,{}]}(o,b),A=function(e){let{target:t,replace:n,state:a,preventScrollReset:r,relative:s,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=pe(),c=ue(),d=ve(e,{relative:s});return i.useCallback((i=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(i,t)){i.preventDefault();let t=void 0!==n?n:k(c)===k(d);l(e,{replace:t,state:a,preventScrollReset:r,relative:s,viewTransition:o})}}),[c,l,d,n,a,t,e,r,s,o])}(f,{replace:u,state:h,target:m,preventScrollReset:g,relative:l,viewTransition:v});let T=i.createElement("a",d(d(d({},b),E),{},{href:n||j,onClick:N||c?a:function(e){a&&a(e),e.defaultPrevented||A(e)},ref:ft(t,C),target:m,"data-discover":_||"render"!==s?void 0:"true"}));return S&&!_?i.createElement(i.Fragment,null,T,i.createElement(dt,{page:j})):T}));xt.displayName="Link";var yt=i.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:u,children:h}=e,m=r(e,f),p=ve(c,{relative:m.relative}),g=ue(),v=i.useContext(ne),{navigator:b,basename:y}=i.useContext(se),w=null!=v&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useContext(ie);x(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=kt("useViewTransitionState"),r=ve(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=U(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=U(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=q(r.pathname,o)||null!=q(r.pathname,s)}(p)&&!0===u,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,k=g.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(k=k.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&y&&(N=U(N,y)||N);const j="/"!==_&&_.endsWith("/")?_.length-1:_.length;let S,C=k===_||!o&&k.startsWith(_)&&"/"===k.charAt(j),E=null!=N&&(N===_||!o&&N.startsWith(_)&&"/"===N.charAt(_.length)),A={isActive:C,isPending:E,isTransitioning:w},T=C?n:void 0;S="function"===typeof s?s(A):[s,C?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M="function"===typeof l?l(A):l;return i.createElement(xt,d(d({},m),{},{"aria-current":T,className:S,ref:t,style:M,to:c,viewTransition:u}),"function"===typeof h?h(A):h)}));yt.displayName="NavLink";var wt=i.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:a,navigate:s,reloadDocument:o,replace:l,state:c,method:u=Ie,action:h,onSubmit:m,relative:p,preventScrollReset:f,viewTransition:v}=e,b=r(e,g),y=Ct(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=i.useContext(se),a=i.useContext(le);x(a,"useFormAction must be used inside a RouteContext");let[r]=a.matches.slice(-1),s=d({},ve(e||".",{relative:t})),o=ue();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!r.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:Y([n,s.pathname]));return k(s)}(h,{relative:p}),_="get"===u.toLowerCase()?"get":"post",N="string"===typeof h&&bt.test(h);return i.createElement("form",d(d({ref:t,method:_,action:w,onSubmit:o?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;y(t||e.currentTarget,{fetcherKey:a,method:n,navigate:s,replace:l,state:c,relative:p,preventScrollReset:f,viewTransition:v})}},b),{},{"data-discover":N||"render"!==n?void 0:"true"}))}));function _t(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function kt(e){let t=i.useContext(te);return x(t,_t(e)),t}function Nt(e){y("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=i.useRef(qe(e)),n=i.useRef(!1),a=ue(),r=i.useMemo((()=>function(e,t){let n=qe(e);return t&&t.forEach(((e,i)=>{n.has(i)||t.getAll(i).forEach((e=>{n.append(i,e)}))})),n}(a.search,n.current?null:t.current)),[a.search]),s=pe(),o=i.useCallback(((e,t)=>{const i=qe("function"===typeof e?e(r):e);n.current=!0,s("?"+i,t)}),[s,r]);return[r,o]}wt.displayName="Form";var jt=0,St=()=>"__".concat(String(++jt),"__");function Ct(){let{router:e}=kt("useSubmit"),{basename:t}=i.useContext(se),n=Ce("useRouteId");return i.useCallback((async function(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:r,method:s,encType:o,formData:l,body:c}=Ve(i,t);if(!1===a.navigate){let t=a.fetcherKey||St();await e.fetch(t,n,a.action||r,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||s,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||r,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||s,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})}),[e,t,n])}var Et=n(920);function At(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let Tt={data:""},Mt=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Tt,Pt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Dt=/\/\*[^]*?\*\/|  +/g,Rt=/\n+/g,Ot=(e,t)=>{let n="",i="",a="";for(let r in e){let s=e[r];"@"==r[0]?"i"==r[1]?n=r+" "+s+";":i+="f"==r[1]?Ot(s,r):r+"{"+Ot(s,"k"==r[1]?"":t)+"}":"object"==typeof s?i+=Ot(s,t?t.replace(/([^,])+/g,(e=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):r):null!=s&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Ot.p?Ot.p(r,s):r+":"+s+";")}return n+(t&&a?t+"{"+a+"}":a)+i},Lt={},It=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+It(e[n]);return t}return e},Ft=(e,t,n,i,a)=>{let r=It(e),s=Lt[r]||(Lt[r]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(r));if(!Lt[s]){let t=r!==e?e:(e=>{let t,n,i=[{}];for(;t=Pt.exec(e.replace(Dt,""));)t[4]?i.shift():t[3]?(n=t[3].replace(Rt," ").trim(),i.unshift(i[0][n]=i[0][n]||{})):i[0][t[1]]=t[2].replace(Rt," ").trim();return i[0]})(e);Lt[s]=Ot(a?{["@keyframes "+s]:t}:t,n?"":"."+s)}let o=n&&Lt.g?Lt.g:null;return n&&(Lt.g=Lt[s]),((e,t,n,i)=>{i?t.data=t.data.replace(i,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Lt[s],t,i,o),s};function zt(e){let t=this||{},n=e.call?e(t.p):e;return Ft(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,i,a)=>{let r=t[a];if(r&&r.call){let e=r(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&"object"==typeof e?e.props?"":Ot(e,""):!1===e?"":e}return e+i+(null==r?"":r)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,Mt(t.target),t.g,t.o,t.k)}zt.bind({g:1});let qt,Wt,Bt,Ut=zt.bind({k:1});function Vt(e,t){let n=this||{};return function(){let i=arguments;function a(r,s){let o=Object.assign({},r),l=o.className||a.className;n.p=Object.assign({theme:Wt&&Wt()},o),n.o=/ *go\d+/.test(l),o.className=zt.apply(n,i)+(l?" "+l:""),t&&(o.ref=s);let c=e;return e[0]&&(c=o.as||e,delete o.as),Bt&&c[0]&&Bt(o),qt(c,o)}return t?t(a):a}}var Ht,Gt,Qt,Yt,Kt,Xt,Jt,$t,Zt,en,tn,nn,an,rn,sn,on,ln=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,cn=(()=>{let e=0;return()=>(++e).toString()})(),dn=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),un=(e,t)=>{switch(t.type){case 0:return d(d({},e),{},{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return d(d({},e),{},{toasts:e.toasts.map((e=>e.id===t.toast.id?d(d({},e),t.toast):e))});case 2:let{toast:n}=t;return un(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:i}=t;return d(d({},e),{},{toasts:e.toasts.map((e=>e.id===i||void 0===i?d(d({},e),{},{dismissed:!0,visible:!1}):e))});case 4:return void 0===t.toastId?d(d({},e),{},{toasts:[]}):d(d({},e),{},{toasts:e.toasts.filter((e=>e.id!==t.toastId))});case 5:return d(d({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return d(d({},e),{},{pausedAt:void 0,toasts:e.toasts.map((e=>d(d({},e),{},{pauseDuration:e.pauseDuration+a})))})}},hn=[],mn={toasts:[],pausedAt:void 0},pn=e=>{mn=un(mn,e),hn.forEach((e=>{e(mn)}))},fn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gn=e=>(t,n)=>{let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return d(d({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||cn()})}(t,e,n);return pn({type:2,toast:i}),i.id},vn=(e,t)=>gn("blank")(e,t);vn.error=gn("error"),vn.success=gn("success"),vn.loading=gn("loading"),vn.custom=gn("custom"),vn.dismiss=e=>{pn({type:3,toastId:e})},vn.remove=e=>pn({type:4,toastId:e}),vn.promise=(e,t,n)=>{let i=vn.loading(t.loading,d(d({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then((e=>{let a=t.success?ln(t.success,e):void 0;return a?vn.success(a,d(d({id:i},n),null==n?void 0:n.success)):vn.dismiss(i),e})).catch((e=>{let a=t.error?ln(t.error,e):void 0;a?vn.error(a,d(d({id:i},n),null==n?void 0:n.error)):vn.dismiss(i)})),e};var bn=(e,t)=>{pn({type:1,toast:{id:e,height:t}})},xn=()=>{pn({type:5,time:Date.now()})},yn=new Map,wn=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,i.useState)(mn),a=(0,i.useRef)(mn);(0,i.useEffect)((()=>(a.current!==mn&&n(mn),hn.push(n),()=>{let e=hn.indexOf(n);e>-1&&hn.splice(e,1)})),[]);let r=t.toasts.map((t=>{var n,i,a;return d(d(d(d({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(i=e[t.type])?void 0:i.duration)||(null==e?void 0:e.duration)||fn[t.type],style:d(d(d({},e.style),null==(a=e[t.type])?void 0:a.style),t.style)})}));return d(d({},t),{},{toasts:r})}(e);(0,i.useEffect)((()=>{if(n)return;let e=Date.now(),i=t.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>vn.dismiss(t.id)),n);t.visible&&vn.dismiss(t.id)}));return()=>{i.forEach((e=>e&&clearTimeout(e)))}}),[t,n]);let a=(0,i.useCallback)((()=>{n&&pn({type:6,time:Date.now()})}),[n]),r=(0,i.useCallback)(((e,n)=>{let{reverseOrder:i=!1,gutter:a=8,defaultPosition:r}=n||{},s=t.filter((t=>(t.position||r)===(e.position||r)&&t.height)),o=s.findIndex((t=>t.id===e.id)),l=s.filter(((e,t)=>t<o&&e.visible)).length;return s.filter((e=>e.visible)).slice(...i?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+a),0)}),[t]);return(0,i.useEffect)((()=>{t.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(yn.has(e))return;let n=setTimeout((()=>{yn.delete(e),pn({type:4,toastId:e})}),t);yn.set(e,n)}(e.id,e.removeDelay);else{let t=yn.get(e.id);t&&(clearTimeout(t),yn.delete(e.id))}}))}),[t]),{toasts:t,handlers:{updateHeight:bn,startPause:xn,endPause:a,calculateOffset:r}}},_n=Ut(Ht||(Ht=At(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),kn=Ut(Gt||(Gt=At(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Nn=Ut(Qt||(Qt=At(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),jn=Vt("div")(Yt||(Yt=At(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),(e=>e.primary||"#ff4b4b"),_n,kn,(e=>e.secondary||"#fff"),Nn),Sn=Ut(Kt||(Kt=At(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Cn=Vt("div")(Xt||(Xt=At(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),(e=>e.secondary||"#e0e0e0"),(e=>e.primary||"#616161"),Sn),En=Ut(Jt||(Jt=At(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),An=Ut($t||($t=At(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Tn=Vt("div")(Zt||(Zt=At(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),(e=>e.primary||"#61d345"),En,An,(e=>e.secondary||"#fff")),Mn=Vt("div")(en||(en=At(["\n  position: absolute;\n"]))),Pn=Vt("div")(tn||(tn=At(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Dn=Ut(nn||(nn=At(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Rn=Vt("div")(an||(an=At(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Dn),On=e=>{let{toast:t}=e,{icon:n,type:a,iconTheme:r}=t;return void 0!==n?"string"==typeof n?i.createElement(Rn,null,n):n:"blank"===a?null:i.createElement(Pn,null,i.createElement(Cn,d({},r)),"loading"!==a&&i.createElement(Mn,null,"error"===a?i.createElement(jn,d({},r)):i.createElement(Tn,d({},r))))},Ln=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),In=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Fn=Vt("div")(rn||(rn=At(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),zn=Vt("div")(sn||(sn=At(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),qn=i.memo((e=>{let{toast:t,position:n,style:a,children:r}=e,s=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[i,a]=dn()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Ln(n),In(n)];return{animation:t?"".concat(Ut(i)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Ut(a)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},o=i.createElement(On,{toast:t}),l=i.createElement(zn,d({},t.ariaProps),ln(t.message,t));return i.createElement(Fn,{className:t.className,style:d(d(d({},s),a),t.style)},"function"==typeof r?r({icon:o,message:l}):i.createElement(i.Fragment,null,o,l))}));!function(e,t,n,i){Ot.p=t,qt=e,Wt=n,Bt=i}(i.createElement);var Wn=e=>{let{id:t,className:n,style:a,onHeightUpdate:r,children:s}=e,o=i.useCallback((e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;r(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,r]);return i.createElement("div",{ref:o,className:n,style:a},s)},Bn=zt(on||(on=At(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Un=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:a,gutter:r,children:s,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:u}=wn(a);return i.createElement("div",{id:"_rht_toaster",style:d({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},o),className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let a=e.position||n,o=((e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return d(d({left:0,right:0,display:"flex",position:"absolute",transition:dn()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},i),a)})(a,u.calculateOffset(e,{reverseOrder:t,gutter:r,defaultPosition:n}));return i.createElement(Wn,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Bn:"",style:o},"custom"===e.type?ln(e.message,e):s?s(e):i.createElement(qn,{toast:e,position:a}))})))},Vn=vn;function Hn(e,t){return function(){return e.apply(t,arguments)}}const{toString:Gn}=Object.prototype,{getPrototypeOf:Qn}=Object,{iterator:Yn,toStringTag:Kn}=Symbol,Xn=(Jn=Object.create(null),e=>{const t=Gn.call(e);return Jn[t]||(Jn[t]=t.slice(8,-1).toLowerCase())});var Jn;const $n=e=>(e=e.toLowerCase(),t=>Xn(t)===e),Zn=e=>t=>typeof t===e,{isArray:ei}=Array,ti=Zn("undefined");const ni=$n("ArrayBuffer");const ii=Zn("string"),ai=Zn("function"),ri=Zn("number"),si=e=>null!==e&&"object"===typeof e,oi=e=>{if("object"!==Xn(e))return!1;const t=Qn(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Kn in e)&&!(Yn in e)},li=$n("Date"),ci=$n("File"),di=$n("Blob"),ui=$n("FileList"),hi=$n("URLSearchParams"),[mi,pi,fi,gi]=["ReadableStream","Request","Response","Headers"].map($n);function vi(e,t){let n,i,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ei(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=a?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let s;for(n=0;n<r;n++)s=i[n],t.call(null,e[s],s,e)}}function bi(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,a=n.length;for(;a-- >0;)if(i=n[a],t===i.toLowerCase())return i;return null}const xi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,yi=e=>!ti(e)&&e!==xi;const wi=(_i="undefined"!==typeof Uint8Array&&Qn(Uint8Array),e=>_i&&e instanceof _i);var _i;const ki=$n("HTMLFormElement"),Ni=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ji=$n("RegExp"),Si=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};vi(n,((n,a)=>{let r;!1!==(r=t(n,a,e))&&(i[a]=r||n)})),Object.defineProperties(e,i)};const Ci=$n("AsyncFunction"),Ei=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),i=[],xi.addEventListener("message",(e=>{let{source:t,data:a}=e;t===xi&&a===n&&i.length&&i.shift()()}),!1),e=>{i.push(e),xi.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,ai(xi.postMessage)),Ai="undefined"!==typeof queueMicrotask?queueMicrotask.bind(xi):"undefined"!==typeof process&&process.nextTick||Ei,Ti={isArray:ei,isArrayBuffer:ni,isBuffer:function(e){return null!==e&&!ti(e)&&null!==e.constructor&&!ti(e.constructor)&&ai(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ai(e.append)&&("formdata"===(t=Xn(e))||"object"===t&&ai(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ni(e.buffer),t},isString:ii,isNumber:ri,isBoolean:e=>!0===e||!1===e,isObject:si,isPlainObject:oi,isReadableStream:mi,isRequest:pi,isResponse:fi,isHeaders:gi,isUndefined:ti,isDate:li,isFile:ci,isBlob:di,isRegExp:ji,isFunction:ai,isStream:e=>si(e)&&ai(e.pipe),isURLSearchParams:hi,isTypedArray:wi,isFileList:ui,forEach:vi,merge:function e(){const{caseless:t}=yi(this)&&this||{},n={},i=(i,a)=>{const r=t&&bi(n,a)||a;oi(n[r])&&oi(i)?n[r]=e(n[r],i):oi(i)?n[r]=e({},i):ei(i)?n[r]=i.slice():n[r]=i};for(let a=0,r=arguments.length;a<r;a++)arguments[a]&&vi(arguments[a],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return vi(t,((t,i)=>{n&&ai(t)?e[i]=Hn(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let a,r,s;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),r=a.length;r-- >0;)s=a[r],i&&!i(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==n&&Qn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Xn,kindOfTest:$n,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(ei(e))return e;let t=e.length;if(!ri(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Yn]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:ki,hasOwnProperty:Ni,hasOwnProp:Ni,reduceDescriptors:Si,freezeMethods:e=>{Si(e,((t,n)=>{if(ai(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];ai(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return ei(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:bi,global:xi,isContextDefined:yi,isSpecCompliantForm:function(e){return!!(e&&ai(e.append)&&"FormData"===e[Kn]&&e[Yn])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(si(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const a=ei(e)?[]:{};return vi(e,((e,t)=>{const r=n(e,i+1);!ti(r)&&(a[t]=r)})),t[i]=void 0,a}}return e};return n(e,0)},isAsyncFn:Ci,isThenable:e=>e&&(si(e)||ai(e))&&ai(e.then)&&ai(e.catch),setImmediate:Ei,asap:Ai,isIterable:e=>null!=e&&ai(e[Yn])};function Mi(e,t,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}Ti.inherits(Mi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ti.toJSONObject(this.config),code:this.code,status:this.status}}});const Pi=Mi.prototype,Di={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Di[e]={value:e}})),Object.defineProperties(Mi,Di),Object.defineProperty(Pi,"isAxiosError",{value:!0}),Mi.from=(e,t,n,i,a,r)=>{const s=Object.create(Pi);return Ti.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Mi.call(s,e.message,t,n,i,a),s.cause=e,s.name=e.name,r&&Object.assign(s,r),s};const Ri=Mi;function Oi(e){return Ti.isPlainObject(e)||Ti.isArray(e)}function Li(e){return Ti.endsWith(e,"[]")?e.slice(0,-2):e}function Ii(e,t,n){return e?e.concat(t).map((function(e,t){return e=Li(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Fi=Ti.toFlatObject(Ti,{},null,(function(e){return/^is[A-Z]/.test(e)}));const zi=function(e,t,n){if(!Ti.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Ti.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Ti.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,r=n.dots,s=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Ti.isSpecCompliantForm(t);if(!Ti.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Ti.isDate(e))return e.toISOString();if(Ti.isBoolean(e))return e.toString();if(!o&&Ti.isBlob(e))throw new Ri("Blob is not supported. Use a Buffer instead.");return Ti.isArrayBuffer(e)||Ti.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"===typeof e)if(Ti.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Ti.isArray(e)&&function(e){return Ti.isArray(e)&&!e.some(Oi)}(e)||(Ti.isFileList(e)||Ti.endsWith(n,"[]"))&&(o=Ti.toArray(e)))return n=Li(n),o.forEach((function(e,i){!Ti.isUndefined(e)&&null!==e&&t.append(!0===s?Ii([n],i,r):null===s?n:n+"[]",l(e))})),!1;return!!Oi(e)||(t.append(Ii(a,n,r),l(e)),!1)}const d=[],u=Object.assign(Fi,{defaultVisitor:c,convertValue:l,isVisitable:Oi});if(!Ti.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Ti.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+i.join("."));d.push(n),Ti.forEach(n,(function(n,r){!0===(!(Ti.isUndefined(n)||null===n)&&a.call(t,n,Ti.isString(r)?r.trim():r,i,u))&&e(n,i?i.concat(r):[r])})),d.pop()}}(e),t};function qi(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Wi(e,t){this._pairs=[],e&&zi(e,this,t)}const Bi=Wi.prototype;Bi.append=function(e,t){this._pairs.push([e,t])},Bi.toString=function(e){const t=e?function(t){return e.call(this,t,qi)}:qi;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ui=Wi;function Vi(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Hi(e,t,n){if(!t)return e;const i=n&&n.encode||Vi;Ti.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let r;if(r=a?a(t,n):Ti.isURLSearchParams(t)?t.toString():new Ui(t,n).toString(i),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const Gi=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ti.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Qi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yi={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ui,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ki="undefined"!==typeof window&&"undefined"!==typeof document,Xi="object"===typeof navigator&&navigator||void 0,Ji=Ki&&(!Xi||["ReactNative","NativeScript","NS"].indexOf(Xi.product)<0),$i="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Zi=Ki&&window.location.href||"http://localhost",ea=d(d({},e),Yi);const ta=function(e){function t(e,n,i,a){let r=e[a++];if("__proto__"===r)return!0;const s=Number.isFinite(+r),o=a>=e.length;if(r=!r&&Ti.isArray(i)?i.length:r,o)return Ti.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!s;i[r]&&Ti.isObject(i[r])||(i[r]=[]);return t(e,n,i[r],a)&&Ti.isArray(i[r])&&(i[r]=function(e){const t={},n=Object.keys(e);let i;const a=n.length;let r;for(i=0;i<a;i++)r=n[i],t[r]=e[r];return t}(i[r])),!s}if(Ti.isFormData(e)&&Ti.isFunction(e.entries)){const n={};return Ti.forEachEntry(e,((e,i)=>{t(function(e){return Ti.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const na={transitional:Qi,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,a=Ti.isObject(e);a&&Ti.isHTMLForm(e)&&(e=new FormData(e));if(Ti.isFormData(e))return i?JSON.stringify(ta(e)):e;if(Ti.isArrayBuffer(e)||Ti.isBuffer(e)||Ti.isStream(e)||Ti.isFile(e)||Ti.isBlob(e)||Ti.isReadableStream(e))return e;if(Ti.isArrayBufferView(e))return e.buffer;if(Ti.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return zi(e,new ea.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return ea.isNode&&Ti.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=Ti.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return zi(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Ti.isString(e))try{return(t||JSON.parse)(e),Ti.trim(e)}catch(Tt){if("SyntaxError"!==Tt.name)throw Tt}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||na.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Ti.isResponse(e)||Ti.isReadableStream(e))return e;if(e&&Ti.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(Tt){if(n){if("SyntaxError"===Tt.name)throw Ri.from(Tt,Ri.ERR_BAD_RESPONSE,this,null,this.response);throw Tt}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ea.classes.FormData,Blob:ea.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ti.forEach(["delete","get","head","post","put","patch"],(e=>{na.headers[e]={}}));const ia=na,aa=Ti.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ra=Symbol("internals");function sa(e){return e&&String(e).trim().toLowerCase()}function oa(e){return!1===e||null==e?e:Ti.isArray(e)?e.map(oa):String(e)}function la(e,t,n,i,a){return Ti.isFunction(i)?i.call(this,t,n):(a&&(t=n),Ti.isString(t)?Ti.isString(i)?-1!==t.indexOf(i):Ti.isRegExp(i)?i.test(t):void 0:void 0)}class ca{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function a(e,t,n){const a=sa(t);if(!a)throw new Error("header name must be a non-empty string");const r=Ti.findKey(i,a);(!r||void 0===i[r]||!0===n||void 0===n&&!1!==i[r])&&(i[r||t]=oa(e))}const r=(e,t)=>Ti.forEach(e,((e,n)=>a(e,n,t)));if(Ti.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(Ti.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,i,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),i=e.substring(a+1).trim(),!n||t[n]&&aa[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(Ti.isObject(e)&&Ti.isIterable(e)){let n,i,a={};for(const t of e){if(!Ti.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[i=t[0]]=(n=a[i])?Ti.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}r(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=sa(e)){const n=Ti.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Ti.isFunction(t))return t.call(this,e,n);if(Ti.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sa(e)){const n=Ti.findKey(this,e);return!(!n||void 0===this[n]||t&&!la(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function a(e){if(e=sa(e)){const a=Ti.findKey(n,e);!a||t&&!la(0,n[a],a,t)||(delete n[a],i=!0)}}return Ti.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const a=t[n];e&&!la(0,this[a],a,e,!0)||(delete this[a],i=!0)}return i}normalize(e){const t=this,n={};return Ti.forEach(this,((i,a)=>{const r=Ti.findKey(n,a);if(r)return t[r]=oa(i),void delete t[a];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();s!==a&&delete t[a],t[s]=oa(i),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ti.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Ti.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ra]=this[ra]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=sa(e);t[i]||(!function(e,t){const n=Ti.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,a){return this[i].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[i]=!0)}return Ti.isArray(e)?e.forEach(i):i(e),this}}ca.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ti.reduceDescriptors(ca.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),Ti.freezeMethods(ca);const da=ca;function ua(e,t){const n=this||ia,i=t||n,a=da.from(i.headers);let r=i.data;return Ti.forEach(e,(function(e){r=e.call(n,r,a.normalize(),t?t.status:void 0)})),a.normalize(),r}function ha(e){return!(!e||!e.__CANCEL__)}function ma(e,t,n){Ri.call(this,null==e?"canceled":e,Ri.ERR_CANCELED,t,n),this.name="CanceledError"}Ti.inherits(ma,Ri,{__CANCEL__:!0});const pa=ma;function fa(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Ri("Request failed with status code "+n.status,[Ri.ERR_BAD_REQUEST,Ri.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ga=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a,r=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=i[s];a||(a=l),n[r]=o,i[r]=l;let d=s,u=0;for(;d!==r;)u+=n[d++],d%=e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const va=function(e,t){let n,i,a=0,r=1e3/t;const s=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=r,n=null,i&&(clearTimeout(i),i=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=r?s(l,e):(n=l,i||(i=setTimeout((()=>{i=null,s(n)}),r-t)))},()=>n&&s(n)]},ba=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const a=ga(50,250);return va((n=>{const r=n.loaded,s=n.lengthComputable?n.total:void 0,o=r-i,l=a(o);i=r;e({loaded:r,total:s,progress:s?r/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&r<=s?(s-r)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},xa=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},ya=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Ti.asap((()=>e(...n)))},wa=ea.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ea.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ea.origin),ea.navigator&&/(msie|trident)/i.test(ea.navigator.userAgent)):()=>!0,_a=ea.hasStandardBrowserEnv?{write(e,t,n,i,a,r){const s=[e+"="+encodeURIComponent(t)];Ti.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Ti.isString(i)&&s.push("path="+i),Ti.isString(a)&&s.push("domain="+a),!0===r&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ka(e,t,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Na=e=>e instanceof da?d({},e):e;function ja(e,t){t=t||{};const n={};function i(e,t,n,i){return Ti.isPlainObject(e)&&Ti.isPlainObject(t)?Ti.merge.call({caseless:i},e,t):Ti.isPlainObject(t)?Ti.merge({},t):Ti.isArray(t)?t.slice():t}function a(e,t,n,a){return Ti.isUndefined(t)?Ti.isUndefined(e)?void 0:i(void 0,e,0,a):i(e,t,0,a)}function r(e,t){if(!Ti.isUndefined(t))return i(void 0,t)}function s(e,t){return Ti.isUndefined(t)?Ti.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function o(n,a,r){return r in t?i(n,a):r in e?i(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,n)=>a(Na(e),Na(t),0,!0)};return Ti.forEach(Object.keys(Object.assign({},e,t)),(function(i){const r=l[i]||a,s=r(e[i],t[i],i);Ti.isUndefined(s)&&r!==o||(n[i]=s)})),n}const Sa=e=>{const t=ja({},e);let n,{data:i,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=da.from(o),t.url=Hi(ka(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Ti.isFormData(i))if(ea.hasStandardBrowserEnv||ea.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(ea.hasStandardBrowserEnv&&(a&&Ti.isFunction(a)&&(a=a(t)),a||!1!==a&&wa(t.url))){const e=r&&s&&_a.read(s);e&&o.set(r,e)}return t},Ca="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=Sa(e);let a=i.data;const r=da.from(i.headers).normalize();let s,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=i;function p(){c&&c(),d&&d(),i.cancelToken&&i.cancelToken.unsubscribe(s),i.signal&&i.signal.removeEventListener("abort",s)}let f=new XMLHttpRequest;function g(){if(!f)return;const i=da.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());fa((function(e){t(e),p()}),(function(e){n(e),p()}),{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:i,config:e,request:f}),f=null}f.open(i.method.toUpperCase(),i.url,!0),f.timeout=i.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Ri("Request aborted",Ri.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new Ri("Network Error",Ri.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const a=i.transitional||Qi;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new Ri(t,a.clarifyTimeoutError?Ri.ETIMEDOUT:Ri.ECONNABORTED,e,f)),f=null},void 0===a&&r.setContentType(null),"setRequestHeader"in f&&Ti.forEach(r.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),Ti.isUndefined(i.withCredentials)||(f.withCredentials=!!i.withCredentials),u&&"json"!==u&&(f.responseType=i.responseType),m&&([l,d]=ba(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=ba(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(s=t=>{f&&(n(!t||t.type?new pa(null,e,f):t),f.abort(),f=null)},i.cancelToken&&i.cancelToken.subscribe(s),i.signal&&(i.signal.aborted?s():i.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===ea.protocols.indexOf(v)?n(new Ri("Unsupported protocol "+v+":",Ri.ERR_BAD_REQUEST,e)):f.send(a||null)}))},Ea=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const a=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;i.abort(t instanceof Ri?t:new pa(t instanceof Error?t.message:t))}};let r=t&&setTimeout((()=>{r=null,a(new Ri("timeout ".concat(t," of ms exceeded"),Ri.ETIMEDOUT))}),t);const s=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:o}=i;return o.unsubscribe=()=>Ti.asap(s),o}};function Aa(e,t){this.v=e,this.k=t}function Ta(e){return function(){return new Ma(e.apply(this,arguments))}}function Ma(e){var t,n;function i(t,n){try{var r=e[t](n),s=r.value,o=s instanceof Aa;Promise.resolve(o?s.v:s).then((function(n){if(o){var l="return"===t?"return":"next";if(!s.k||n.done)return i(l,n);n=e[l](n).value}a(r.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(r,s){var o={key:e,arg:a,resolve:r,reject:s,next:null};n?n=n.next=o:(t=n=o,i(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function Pa(e){return new Aa(e,0)}function Da(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise((function(n){n(e[t](i))})),{done:!1,value:new Aa(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function Ra(e){var t,n,i,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new Oa(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function Oa(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Oa=function(e){this.s=e,this.n=e.next},Oa.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Oa(e)}Ma.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ma.prototype.next=function(e){return this._invoke("next",e)},Ma.prototype.throw=function(e){return this._invoke("throw",e)},Ma.prototype.return=function(e){return this._invoke("return",e)};const La=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,a=0;for(;a<n;)i=a+t,yield e.slice(a,i),a=i},Ia=function(){var e=Ta((function*(e,t){var n,i=!1,a=!1;try{for(var r,s=Ra(Fa(e));i=!(r=yield Pa(s.next())).done;i=!1){const e=r.value;yield*Da(Ra(La(e,t)))}}catch(o){a=!0,n=o}finally{try{i&&null!=s.return&&(yield Pa(s.return()))}finally{if(a)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Fa=function(){var e=Ta((function*(e){if(e[Symbol.asyncIterator])return void(yield*Da(Ra(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Pa(t.read());if(e)break;yield n}}finally{yield Pa(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),za=(e,t,n,i)=>{const a=Ia(e,t);let r,s=0,o=e=>{r||(r=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await a.next();if(t)return o(),void e.close();let r=i.byteLength;if(n){let e=s+=r;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},qa="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Wa=qa&&"function"===typeof ReadableStream,Ba=qa&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ua=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(Tt){return!1}},Va=Wa&&Ua((()=>{let e=!1;const t=new Request(ea.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Ha=Wa&&Ua((()=>Ti.isReadableStream(new Response("").body))),Ga={stream:Ha&&(e=>e.body)};var Qa;qa&&(Qa=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ga[e]&&(Ga[e]=Ti.isFunction(Qa[e])?t=>t[e]():(t,n)=>{throw new Ri("Response type '".concat(e,"' is not supported"),Ri.ERR_NOT_SUPPORT,n)})})));const Ya=async(e,t)=>{const n=Ti.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Ti.isBlob(e))return e.size;if(Ti.isSpecCompliantForm(e)){const t=new Request(ea.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ti.isArrayBufferView(e)||Ti.isArrayBuffer(e)?e.byteLength:(Ti.isURLSearchParams(e)&&(e+=""),Ti.isString(e)?(await Ba(e)).byteLength:void 0)})(t):n},Ka=qa&&(async e=>{let{url:t,method:n,data:i,signal:a,cancelToken:r,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:m}=Sa(e);c=c?(c+"").toLowerCase():"text";let p,f=Ea([a,r&&r.toAbortSignal()],s);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(l&&Va&&"get"!==n&&"head"!==n&&0!==(v=await Ya(u,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(Ti.isFormData(i)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=xa(v,ba(ya(l)));i=za(n.body,65536,e,t)}}Ti.isString(h)||(h=h?"include":"omit");const a="credentials"in Request.prototype;p=new Request(t,d(d({},m),{},{signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:a?h:void 0}));let r=await fetch(p,m);const s=Ha&&("stream"===c||"response"===c);if(Ha&&(o||s&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=Ti.toFiniteNumber(r.headers.get("content-length")),[n,i]=o&&xa(t,ba(ya(o),!0))||[];r=new Response(za(r.body,65536,n,(()=>{i&&i(),g&&g()})),e)}c=c||"text";let b=await Ga[Ti.findKey(Ga,c)||"text"](r,e);return!s&&g&&g(),await new Promise(((t,n)=>{fa(t,n,{data:b,headers:da.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:p})}))}catch(b){if(g&&g(),b&&"TypeError"===b.name&&/Load failed|fetch/i.test(b.message))throw Object.assign(new Ri("Network Error",Ri.ERR_NETWORK,e,p),{cause:b.cause||b});throw Ri.from(b,b&&b.code,e,p)}}),Xa={http:null,xhr:Ca,fetch:Ka};Ti.forEach(Xa,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Tt){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ja=e=>"- ".concat(e),$a=e=>Ti.isFunction(e)||null===e||!1===e,Za=e=>{e=Ti.isArray(e)?e:[e];const{length:t}=e;let n,i;const a={};for(let r=0;r<t;r++){let t;if(n=e[r],i=n,!$a(n)&&(i=Xa[(t=String(n)).toLowerCase()],void 0===i))throw new Ri("Unknown adapter '".concat(t,"'"));if(i)break;a[t||"#"+r]=i}if(!i){const e=Object.entries(a).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Ja).join("\n"):" "+Ja(e[0]):"as no adapter specified";throw new Ri("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function er(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pa(null,e)}function tr(e){er(e),e.headers=da.from(e.headers),e.data=ua.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Za(e.adapter||ia.adapter)(e).then((function(t){return er(e),t.data=ua.call(e,e.transformResponse,t),t.headers=da.from(t.headers),t}),(function(t){return ha(t)||(er(e),t&&t.response&&(t.response.data=ua.call(e,e.transformResponse,t.response),t.response.headers=da.from(t.response.headers))),Promise.reject(t)}))}const nr="1.10.0",ir={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ir[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ar={};ir.transitional=function(e,t,n){function i(e,t){return"[Axios v"+nr+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,r)=>{if(!1===e)throw new Ri(i(a," has been removed"+(t?" in "+t:"")),Ri.ERR_DEPRECATED);return t&&!ar[a]&&(ar[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,r)}},ir.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const rr={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Ri("options must be an object",Ri.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const r=i[a],s=t[r];if(s){const t=e[r],n=void 0===t||s(t,r,e);if(!0!==n)throw new Ri("option "+r+" must be "+n,Ri.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ri("Unknown option "+r,Ri.ERR_BAD_OPTION)}},validators:ir},sr=rr.validators;class or{constructor(e){this.defaults=e||{},this.interceptors={request:new Gi,response:new Gi}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Tt){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ja(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:a}=t;void 0!==n&&rr.assertOptions(n,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),null!=i&&(Ti.isFunction(i)?t.paramsSerializer={serialize:i}:rr.assertOptions(i,{encode:sr.function,serialize:sr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),rr.assertOptions(t,{baseUrl:sr.spelling("baseURL"),withXsrfToken:sr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=a&&Ti.merge(a.common,a[t.method]);a&&Ti.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=da.concat(r,a);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!o){const e=[tr.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let h=t;for(u=0;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=tr.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Hi(ka((e=ja(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ti.forEach(["delete","get","head","options"],(function(e){or.prototype[e]=function(t,n){return this.request(ja(n||{},{method:e,url:t,data:(n||{}).data}))}})),Ti.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,a){return this.request(ja(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}or.prototype[e]=t(),or.prototype[e+"Form"]=t(!0)}));const lr=or;class cr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,a){n.reason||(n.reason=new pa(e,i,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new cr((function(t){e=t}));return{token:t,cancel:e}}}const dr=cr;const ur={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ur).forEach((e=>{let[t,n]=e;ur[n]=t}));const hr=ur;const mr=function e(t){const n=new lr(t),i=Hn(lr.prototype.request,n);return Ti.extend(i,lr.prototype,n,{allOwnKeys:!0}),Ti.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(ja(t,n))},i}(ia);mr.Axios=lr,mr.CanceledError=pa,mr.CancelToken=dr,mr.isCancel=ha,mr.VERSION=nr,mr.toFormData=zi,mr.AxiosError=Ri,mr.Cancel=mr.CanceledError,mr.all=function(e){return Promise.all(e)},mr.spread=function(e){return function(t){return e.apply(null,t)}},mr.isAxiosError=function(e){return Ti.isObject(e)&&!0===e.isAxiosError},mr.mergeConfig=ja,mr.AxiosHeaders=da,mr.formToJSON=e=>ta(Ti.isHTMLForm(e)?new FormData(e):e),mr.getAdapter=Za,mr.HttpStatusCode=hr,mr.default=mr;const pr=mr,fr=e=>"string"===typeof e,gr=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return n.resolve=e,n.reject=t,n},vr=e=>null==e?"":""+e,br=/###/g,xr=e=>e&&e.indexOf("###")>-1?e.replace(br,"."):e,yr=e=>!e||fr(e),wr=(e,t,n)=>{const i=fr(t)?t.split("."):t;let a=0;for(;a<i.length-1;){if(yr(e))return{};const t=xr(i[a]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++a}return yr(e)?{}:{obj:e,k:xr(i[a])}},_r=(e,t,n)=>{const{obj:i,k:a}=wr(e,t,Object);if(void 0!==i||1===t.length)return void(i[a]=n);let r=t[t.length-1],s=t.slice(0,t.length-1),o=wr(e,s,Object);for(;void 0===o.obj&&s.length;){var l;r="".concat(s[s.length-1],".").concat(r),s=s.slice(0,s.length-1),o=wr(e,s,Object),null!==(l=o)&&void 0!==l&&l.obj&&"undefined"!==typeof o.obj["".concat(o.k,".").concat(r)]&&(o.obj=void 0)}o.obj["".concat(o.k,".").concat(r)]=n},kr=(e,t)=>{const{obj:n,k:i}=wr(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,i))return n[i]},Nr=(e,t,n)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?fr(e[i])||e[i]instanceof String||fr(t[i])||t[i]instanceof String?n&&(e[i]=t[i]):Nr(e[i],t[i],n):e[i]=t[i]);return e},jr=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Sr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Cr=e=>fr(e)?e.replace(/[&<>"'\/]/g,(e=>Sr[e])):e;const Er=[" ",",","?","!",";"],Ar=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),Tr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const i=t.split(n);let a=e;for(let r=0;r<i.length;){if(!a||"object"!==typeof a)return;let e,t="";for(let s=r;s<i.length;++s)if(s!==r&&(t+=n),t+=i[s],e=a[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&s<i.length-1)continue;r+=s-r+1;break}a=e}return a},Mr=e=>null===e||void 0===e?void 0:e.replace("_","-"),Pr={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,i;null===(n=console)||void 0===n||null===(n=n[e])||void 0===n||null===(i=n.apply)||void 0===i||i.call(n,console,t)}};class Dr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Pr,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(fr(e[0])&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new Dr(this.logger,d(d({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Dr(this.logger,e)}}var Rr=new Dr;class Or{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,i]=e;for(let a=0;a<i;a++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[i,a]=t;for(let r=0;r<a;r++)i.apply(i,[e,...n])}))}}}class Lr extends Or{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){var i;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,s=void 0!==a.ignoreJSONStructure?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):fr(n)&&r?o.push(...n.split(r)):o.push(n)));const l=kr(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!l&&s&&fr(n)?Tr(null===(i=this.data)||void 0===i||null===(i=i[e])||void 0===i?void 0:i[t],n,r):l}addResource(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator;let s=[e,t];n&&(s=s.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(s=e.split("."),i=t,t=s[1]),this.addNamespaces(t),_r(this.data,s,i),a.silent||this.emit("added",e,t,n,i)}addResources(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const a in n)(fr(n[a])||Array.isArray(n[a]))&&this.addResource(e,t,a,n[a],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),i=n,n=t,t=s[1]),this.addNamespaces(t);let o=kr(this.data,s)||{};r.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?Nr(o,n,a):o=d(d({},o),n),_r(this.data,s,o),r.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var Ir={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,i,a){return e.forEach((e=>{var r,s;t=null!==(r=null===(s=this.processors[e])||void 0===s?void 0:s.process(t,n,i,a))&&void 0!==r?r:t})),t}};const Fr={},zr=e=>!fr(e)&&"boolean"!==typeof e&&"number"!==typeof e;class qr extends Or{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Rr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){const t=d({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}});if(null==e)return!1;const n=this.resolve(e,t);return void 0!==(null===n||void 0===n?void 0:n.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const r=n&&e.indexOf(n)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const i=Er.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===i.length)return!0;const a=Ar.getRegExp("(".concat(i.map((e=>"?"===e?"\\?":e)).join("|"),")"));let r=!a.test(e);if(!r){const t=e.indexOf(n);t>0&&!a.test(e.substring(0,t))&&(r=!0)}return r})(e,n,i);if(r&&!s){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:fr(a)?[a]:a};const r=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(r[0])>-1)&&(a=r.shift()),e=r.join(i)}return{key:e,namespaces:fr(a)?[a]:a}}translate(e,t,n){let i="object"===typeof t?d({},t):t;if("object"!==typeof i&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof options&&(i=d({},i)),i||(i={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const a=void 0!==i.returnDetails?i.returnDetails:this.options.returnDetails,r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,{key:s,namespaces:o}=this.extractFromKey(e[e.length-1],i),l=o[o.length-1];let c=void 0!==i.nsSeparator?i.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=i.lng||this.language,h=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null===u||void 0===u?void 0:u.toLowerCase()))return h?a?{res:"".concat(l).concat(c).concat(s),usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:"".concat(l).concat(c).concat(s):a?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:s;const m=this.resolve(e,i);let p=null===m||void 0===m?void 0:m.res;const f=(null===m||void 0===m?void 0:m.usedKey)||s,g=(null===m||void 0===m?void 0:m.exactUsedKey)||s,v=void 0!==i.joinArrays?i.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,x=void 0!==i.count&&!fr(i.count),y=qr.hasDefaultValue(i),w=x?this.pluralResolver.getSuffix(u,i.count,i):"",_=i.ordinal&&x?this.pluralResolver.getSuffix(u,i.count,{ordinal:!1}):"",k=x&&!i.ordinal&&0===i.count,N=k&&i["defaultValue".concat(this.options.pluralSeparator,"zero")]||i["defaultValue".concat(w)]||i["defaultValue".concat(_)]||i.defaultValue;let j=p;b&&!p&&y&&(j=N);const S=zr(j),C=Object.prototype.toString.apply(j);if(!(b&&j&&S&&["[object Number]","[object Function]","[object RegExp]"].indexOf(C)<0)||fr(v)&&Array.isArray(j))if(b&&fr(v)&&Array.isArray(p))p=p.join(v),p&&(p=this.extendTranslation(p,e,i,n));else{let t=!1,a=!1;!this.isValidLookup(p)&&y&&(t=!0,p=N),this.isValidLookup(p)||(a=!0,p=s);const o=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:p,h=y&&N!==p&&this.options.updateMissing;if(a||t||h){if(this.logger.log(h?"updateKey":"missingKey",u,l,s,h?N:p),r){const e=this.resolve(s,d(d({},i),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let i=0;i<t.length;i++)e.push(t[i]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(i.lng||this.language):e.push(i.lng||this.language);const n=(e,t,n)=>{var a;const r=y&&n!==p?n:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,r,h,i):null!==(a=this.backendConnector)&&void 0!==a&&a.saveMissing&&this.backendConnector.saveMissing(e,l,t,r,h,i),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,i);k&&i["defaultValue".concat(this.options.pluralSeparator,"zero")]&&t.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&t.push("".concat(this.options.pluralSeparator,"zero")),t.forEach((t=>{n([e],s+t,i["defaultValue".concat(t)]||N)}))})):n(e,s,N))}p=this.extendTranslation(p,e,i,m,n),a&&p===s&&this.options.appendNamespaceToMissingKey&&(p="".concat(l).concat(c).concat(s)),(a||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l).concat(c).concat(s):s,t?p:void 0,i))}else{if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,j,d(d({},i),{},{ns:o})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");return a?(m.res=e,m.usedParams=this.getUsedParamsDetails(i),m):e}if(r){const e=Array.isArray(j),t=e?[]:{},n=e?g:f;for(const a in j)if(Object.prototype.hasOwnProperty.call(j,a)){const e="".concat(n).concat(r).concat(a);t[a]=y&&!p?this.translate(e,d(d({},i),{},{defaultValue:zr(N)?N[a]:void 0},{joinArrays:!1,ns:o})):this.translate(e,d(d({},i),{joinArrays:!1,ns:o})),t[a]===e&&(t[a]=j[a])}p=t}}return a?(m.res=p,m.usedParams=this.getUsedParamsDetails(i),m):p}extendTranslation(e,t,n,i,a){var r,s=this;if(null!==(r=this.i18nFormat)&&void 0!==r&&r.parse)e=this.i18nFormat.parse(e,d(d({},this.options.interpolation.defaultVariables),n),n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){var o;n.interpolation&&this.interpolator.init(d(d({},n),{interpolation:d(d({},this.options.interpolation),n.interpolation)}));const r=fr(e)&&(void 0!==(null===n||void 0===n||null===(o=n.interpolation)||void 0===o?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(r){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let c=n.replace&&!fr(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=d(d({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language||i.usedLng,n),r){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(null===a||void 0===a?void 0:a[0])!==i[0]||n.context?s.translate(...i,t):(s.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null)}),n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=fr(l)?[l]:l;return null!=e&&null!==c&&void 0!==c&&c.length&&!1!==n.applyPostProcessor&&(e=Ir.handle(c,e,t,this.options&&this.options.postProcessPassResolved?d({i18nResolved:d(d({},i),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e){let t,n,i,a,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fr(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,s),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==s.count&&!fr(s.count),u=d&&!s.ordinal&&0===s.count,h=void 0!==s.context&&(fr(s.context)||"number"===typeof s.context)&&""!==s.context,m=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);c.forEach((e=>{var o,c;this.isValidLookup(t)||(r=e,Fr["".concat(m[0],"-").concat(e)]||null===(o=this.utils)||void 0===o||!o.hasLoadedNamespace||null!==(c=this.utils)&&void 0!==c&&c.hasLoadedNamespace(r)||(Fr["".concat(m[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(m.join(", "),'" won\'t get resolved as namespace "').concat(r,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach((n=>{var r;if(this.isValidLookup(t))return;a=n;const o=[l];if(null!==(r=this.i18nFormat)&&void 0!==r&&r.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,n,e,s);else{let e;d&&(e=this.pluralResolver.getSuffix(n,s.count,s));const t="".concat(this.options.pluralSeparator,"zero"),i="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(d&&(o.push(l+e),s.ordinal&&0===e.indexOf(i)&&o.push(l+e.replace(i,this.options.pluralSeparator)),u&&o.push(l+t)),h){const n="".concat(l).concat(this.options.contextSeparator).concat(s.context);o.push(n),d&&(o.push(n+e),s.ordinal&&0===e.indexOf(i)&&o.push(n+e.replace(i,this.options.pluralSeparator)),u&&o.push(n+t))}}let c;for(;c=o.pop();)this.isValidLookup(t)||(i=c,t=this.getResource(n,e,c,s))})))}))})),{res:t,usedKey:n,exactUsedKey:i,usedLng:a,usedNS:r}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){var i;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!==(i=this.i18nFormat)&&void 0!==i&&i.getResource?this.i18nFormat.getResource(e,t,n,a):this.resourceStore.getResource(e,t,n,a)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!fr(e.replace);let i=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i=d(d({},this.options.interpolation.defaultVariables),i)),!n){i=d({},i);for(const e of t)delete i[e]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class Wr{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Rr.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Mr(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Mr(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(fr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(Tt){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const i=this.getLanguagePartFromCode(e);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find((e=>e===i?e:e.indexOf("-")<0&&i.indexOf("-")<0?void 0:e.indexOf("-")>0&&i.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===i||0===e.indexOf(i)&&i.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),fr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),i=[],a=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return fr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):fr(e)&&a(this.formatLanguageCode(e)),n.forEach((e=>{i.indexOf(e)<0&&a(this.formatLanguageCode(e))})),i}}const Br={zero:0,one:1,two:2,few:3,many:4,other:5},Ur={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Vr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Rr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Mr("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let r;try{r=new Intl.PluralRules(n,{type:i})}catch(s){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Ur;if(!e.match(/-|_/))return Ur;const n=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(n,t)}return this.pluralRulesCache[a]=r,r}needsPlural(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(e,n);return i||(i=this.getRule("dev",n)),(null===(t=i)||void 0===t?void 0:t.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>"".concat(t).concat(e)))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort(((e,t)=>Br[e]-Br[t])).map((e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(e,n);return i?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(i.select(t)):(this.logger.warn("no plural rule found for: ".concat(e)),this.getSuffix("dev",t,n))}}const Hr=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,n)=>{const i=kr(e,n);return void 0!==i?i:kr(t,n)})(e,t,n);return!r&&a&&fr(n)&&(r=Tr(e,n,i),void 0===r&&(r=Tr(t,n,i))),r},Gr=e=>e.replace(/\$/g,"$$$$");class Qr{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Rr.create("interpolator"),this.options=t,this.format=(null===t||void 0===t||null===(e=t.interpolation)||void 0===e?void 0:e.format)||(e=>e),this.init(t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:a,prefixEscaped:r,suffix:s,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:m,nestingSuffixEscaped:p,nestingOptionsSeparator:f,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:Cr,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=a?jr(a):r||"{{",this.suffix=s?jr(s):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?jr(u):h||jr("$t("),this.nestingSuffix=m?jr(m):p||jr(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null===e||void 0===e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix))}interpolate(e,t,n,i){var a;let r,s,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const a=Hr(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(a,void 0,n,d(d(d({},i),t),{},{interpolationkey:e})):a}const a=e.split(this.formatSeparator),r=a.shift().trim(),s=a.join(this.formatSeparator).trim();return this.format(Hr(t,l,r,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,d(d(d({},i),t),{},{interpolationkey:r}))};this.resetRegExp();const u=(null===i||void 0===i?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=void 0!==(null===i||void 0===i||null===(a=i.interpolation)||void 0===a?void 0:a.skipOnVariables)?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Gr(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Gr(this.escape(e)):Gr(e)}].forEach((t=>{for(o=0;r=t.regex.exec(e);){const n=r[1].trim();if(s=c(n),void 0===s)if("function"===typeof u){const t=u(e,r,i);s=fr(t)?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))s="";else{if(h){s=r[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),s=""}else fr(s)||this.useRawValueToEscape||(s=vr(s));const a=t.safeValue(s);if(e=e.replace(r[0],a),h?(t.regex.lastIndex+=s.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),e}nest(e,t){let n,i,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(e,t)=>{var n;const i=this.nestingOptionsSeparator;if(e.indexOf(i)<0)return e;const r=e.split(new RegExp("".concat(i,"[ ]*{")));let s="{".concat(r[1]);e=r[0],s=this.interpolate(s,a);const o=s.match(/'/g),l=s.match(/"/g);((null!==(n=null===o||void 0===o?void 0:o.length)&&void 0!==n?n:0)%2===0&&!l||l.length%2!==0)&&(s=s.replace(/'/g,'"'));try{a=JSON.parse(s),t&&(a=d(d({},t),a))}catch(Tt){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),Tt),"".concat(e).concat(i).concat(s)}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];a=d({},r),a=a.replace&&!fr(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const l=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(-1!==l&&(o=n[1].slice(l).split(this.formatSeparator).map((e=>e.trim())).filter(Boolean),n[1]=n[1].slice(0,l)),i=t(s.call(this,n[1].trim(),a),a),i&&n[0]===e&&!fr(i))return i;fr(i)||(i=vr(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),o.length&&(i=o.reduce(((e,t)=>this.format(e,t,r.lng,d(d({},r),{},{interpolationkey:n[1].trim()}))),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}const Yr=e=>{const t={};return(n,i,a)=>{let r=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(r=d(d({},r),{},{[a.interpolationkey]:void 0}));const s=i+JSON.stringify(r);let o=t[s];return o||(o=e(Mr(i),a),t[s]=o),o(n)}},Kr=e=>(t,n,i)=>e(Mr(n),i)(t);class Xr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Rr.create("formatter"),this.options=e,this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Yr:Kr;this.formats={number:n(((e,t)=>{const n=new Intl.NumberFormat(e,d({},t));return e=>n.format(e)})),currency:n(((e,t)=>{const n=new Intl.NumberFormat(e,d(d({},t),{},{style:"currency"}));return e=>n.format(e)})),datetime:n(((e,t)=>{const n=new Intl.DateTimeFormat(e,d({},t));return e=>n.format(e)})),relativetime:n(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,d({},t));return e=>n.format(e,t.range||"day")})),list:n(((e,t)=>{const n=new Intl.ListFormat(e,d({},t));return e=>n.format(e)}))}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Yr(t)}format(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find((e=>e.indexOf(")")>-1))){const e=a.findIndex((e=>e.indexOf(")")>-1));a[0]=[a[0],...a.splice(1,e)].join(this.formatSeparator)}const r=a.reduce(((e,t)=>{const{formatName:a,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const a=i[1].substring(0,i[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach((e=>{if(e){const[t,...i]=e.split(":"),a=i.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();n[r]||(n[r]=a),"false"===a&&(n[r]=!1),"true"===a&&(n[r]=!0),isNaN(a)||(n[r]=parseInt(a,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[a]){let t=e;try{var s;const o=(null===i||void 0===i||null===(s=i.formatParams)||void 0===s?void 0:s[i.interpolationkey])||{},l=o.locale||o.lng||i.locale||i.lng||n;t=this.formats[a](e,l,d(d(d({},r),i),o))}catch(o){this.logger.warn(o)}return t}return this.logger.warn("there was no format function for ".concat(a)),e}),e);return r}}class Jr extends Or{constructor(e,t,n){var i,a;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=Rr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null===(i=this.backend)||void 0===i||null===(a=i.init)||void 0===a||a.call(i,n,r.backend,r)}queueLoad(e,t,n,i){const a={},r={},s={},o={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const s="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===r[s]&&(r[s]=!0):(this.state[s]=1,i=!1,void 0===r[s]&&(r[s]=!0),void 0===a[s]&&(a[s]=!0),void 0===o[t]&&(o[t]=!0)))})),i||(s[e]=!0)})),(Object.keys(a).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(r),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const i=e.split("|"),a=i[0],r=i[1];t&&this.emit("failedLoading",a,r,t),!t&&n&&this.store.addResourceBundle(a,r,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const s={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:i,k:a}=wr(e,t,Object);i[a]=i[a]||[],i[a].push(n)})(n.loaded,[a],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===s[e][t]&&(s[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:a,callback:r});this.readingCalls++;const s=(s,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&o&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,i+1,2*a,r)}),a):r(s,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,s);try{const n=o(e,t);n&&"function"===typeof n.then?n.then((e=>s(null,e))).catch(s):s(null,n)}catch(l){s(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();fr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),fr(t)&&(t=[t]);const a=this.queueLoad(e,t,n,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),i=n[0],a=n[1];this.read(i,a,"read",void 0,void 0,((n,r)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(a," for language ").concat(i," failed"),n),!n&&r&&this.logger.log("".concat(t,"loaded namespace ").concat(a," for language ").concat(i),r),this.loaded(e,n,r)}))}saveMissing(e,t,n,i,a){var r,s,o;let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(null===(r=this.services)||void 0===r||null===(r=r.utils)||void 0===r||!r.hasLoadedNamespace||null!==(s=this.services)&&void 0!==s&&null!==(s=s.utils)&&void 0!==s&&s.hasLoadedNamespace(t)){if(void 0!==n&&null!==n&&""!==n){if(null!==(o=this.backend)&&void 0!==o&&o.create){const r=d(d({},l),{},{isUpdate:a}),s=this.backend.create.bind(this.backend);if(s.length<6)try{let a;a=5===s.length?s(e,t,n,i,r):s(e,t,n,i),a&&"function"===typeof a.then?a.then((e=>c(null,e))).catch(c):c(null,a)}catch(u){c(u)}else s(e,t,n,i,c,r)}e&&e[0]&&this.store.addResource(e[0],t,n,i)}}else this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const $r=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),fr(e[1])&&(t.defaultValue=e[1]),fr(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Zr=e=>{var t,n;return fr(e.ns)&&(e.ns=[e.ns]),fr(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),fr(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null===(t=e.supportedLngs)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"===typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},es=()=>{};class ts extends Or{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=Zr(e),this.services={},this.logger=Rr,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),null==t.defaultNS&&t.ns&&(fr(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=$r();this.options=d(d(d({},i),this.options),Zr(t)),this.options.interpolation=d(d({},i.interpolation),this.options.interpolation),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?Rr.init(a(this.modules.logger),this.options):Rr.init(null,this.options),t=this.modules.formatter?this.modules.formatter:Xr;const n=new Wr(this.options);this.store=new Lr(this.options.resources,this.options);const r=this.services;r.logger=Rr,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new Vr(n,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(r.formatter=a(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new Qr(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new Jr(a(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];e.emit(t,...i)})),this.modules.languageDetector&&(r.languageDetector=a(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=a(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new qr(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];e.emit(t,...i)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=es),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const r=gr(),s=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),r}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:es;const n=fr(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){var i,a;if("cimode"===(null===n||void 0===n?void 0:n.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e)))}null===(i=this.options.preload)||void 0===i||null===(a=i.forEach)||void 0===a||a.call(i,(e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const i=gr();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=es),this.services.backendConnector.reload(e,t,(e=>{i.resolve(),n(e)})),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Ir.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const i=gr();this.emit("languageChanging",e);const a=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},r=(r,s)=>{s?this.isLanguageChangingTo===e&&(a(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,i.resolve((function(){return n.t(...arguments)})),t&&t(r,(function(){return n.t(...arguments)}))},s=t=>{e||t||!this.services.languageDetector||(t=[]);const n=fr(t)?t:t&&t[0],i=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(fr(t)?[t]:t);var s,o;i&&(this.language||a(i),this.translator.language||this.translator.changeLanguage(i),null===(s=this.services.languageDetector)||void 0===s||null===(o=s.cacheUserLanguage)||void 0===o||o.call(s,i));this.loadResources(i,(e=>{r(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),i}getFixedT(e,t,n){var i=this;const a=function(e,t){let r;if("object"!==typeof t){for(var s=arguments.length,o=new Array(s>2?s-2:0),l=2;l<s;l++)o[l-2]=arguments[l];r=i.options.overloadTranslationOptionHandler([e,t].concat(o))}else r=d({},t);r.lng=r.lng||a.lng,r.lngs=r.lngs||a.lngs,r.ns=r.ns||a.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||a.keyPrefix);const c=i.options.keySeparator||".";let u;return u=r.keyPrefix&&Array.isArray(e)?e.map((e=>"".concat(r.keyPrefix).concat(c).concat(e))):r.keyPrefix?"".concat(r.keyPrefix).concat(c).concat(e):e,i.t(u,r)};return fr(e)?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=n,a}t(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return null===(e=this.translator)||void 0===e?void 0:e.translate(...n)}exists(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return null===(e=this.translator)||void 0===e?void 0:e.exists(...n)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const r=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!r(n,e)||i&&!r(a,e)))}loadNamespaces(e,t){const n=gr();return this.options.ns?(fr(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=gr();fr(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter((e=>i.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return a.length?(this.options.preload=i.concat(a),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null===(t=this.languages)||void 0===t?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";if(Intl.Locale){const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}const i=(null===(n=this.services)||void 0===n?void 0:n.languageUtils)||new Wr($r());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new ts(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:es;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i=d(d(d({},this.options),e),{isClone:!0}),a=new ts(i);void 0===e.debug&&void 0===e.prefix||(a.logger=a.logger.clone(e));if(["store","services","language"].forEach((e=>{a[e]=this[e]})),a.services=d({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n){const e=Object.keys(this.store.data).reduce(((e,t)=>(e[t]=d({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce(((n,i)=>(n[i]=d({},e[t][i]),n)),e[t]),e)),{});a.store=new Lr(e,i),a.services.resourceStore=a.store}return a.translator=new qr(a.services,i),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.emit(e,...n)})),a.init(i,t),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ns=ts.createInstance();ns.createInstance=ts.createInstance;ns.createInstance,ns.dir,ns.init,ns.loadResources,ns.reloadResources,ns.use,ns.changeLanguage,ns.getFixedT,ns.t,ns.exists,ns.setDefaultNamespace,ns.hasLoadedNamespace,ns.loadNamespaces,ns.loadLanguages;n(413);Object.create(null);const is={},as=(e,t,n,i)=>{ls(n)&&is[n]||(ls(n)&&(is[n]=new Date),((e,t,n,i)=>{var a,r,s;const o=[n,d({code:t},i||{})];if(null!==e&&void 0!==e&&null!==(a=e.services)&&void 0!==a&&null!==(a=a.logger)&&void 0!==a&&a.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);ls(o[0])&&(o[0]="react-i18next:: ".concat(o[0])),null!==e&&void 0!==e&&null!==(r=e.services)&&void 0!==r&&null!==(r=r.logger)&&void 0!==r&&r.warn?e.services.logger.warn(...o):null!==(s=console)&&void 0!==s&&s.warn&&console.warn(...o)})(e,t,n,i))},rs=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout((()=>{e.off("initialized",n)}),0),t()};e.on("initialized",n)}},ss=(e,t,n)=>{e.loadNamespaces(t,rs(e,n))},os=(e,t,n,i)=>{if(ls(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return ss(e,n,i);n.forEach((t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,rs(e,i))},ls=e=>"string"===typeof e,cs=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ds={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},us=e=>ds[e];let hs={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(cs,us)};let ms;const ps={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hs=d(d({},hs),e)}(e.options.react),(e=>{ms=e})(e)}},fs=(0,i.createContext)();class gs{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const vs=(e,t,n,i)=>e.getFixedT(t,n,i),bs=function(e){var t,n,a,r;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:o}=s,{i18n:l,defaultNS:c}=(0,i.useContext)(fs)||{},u=o||l||ms;if(u&&!u.reportNamespaces&&(u.reportNamespaces=new gs),!u){as(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return ls(t)?t:"object"===typeof(n=t)&&null!==n&&ls(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}null!==(t=u.options.react)&&void 0!==t&&t.wait&&as(u,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const h=d(d(d({},hs),u.options.react),s),{useSuspense:m,keyPrefix:p}=h;let f=e||c||(null===(n=u.options)||void 0===n?void 0:n.defaultNS);f=ls(f)?[f]:f||["translation"],null===(a=(r=u.reportNamespaces).addUsedNamespaces)||void 0===a||a.call(r,f);const g=(u.isInitialized||u.initializedStoreOnce)&&f.every((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,i)=>{var a;if((null===(a=n.bindI18n)||void 0===a?void 0:a.indexOf("languageChanging"))>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e))return!1}}):(as(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,u,h))),v=((e,t,n,a)=>(0,i.useCallback)(vs(e,t,n,a),[e,t,n,a]))(u,s.lng||null,"fallback"===h.nsMode?f:f[0],p),b=()=>v,x=()=>vs(u,s.lng||null,"fallback"===h.nsMode?f:f[0],p),[y,w]=(0,i.useState)(b);let _=f.join();s.lng&&(_="".concat(s.lng).concat(_));const k=((e,t)=>{const n=(0,i.useRef)();return(0,i.useEffect)((()=>{n.current=t?n.current:e}),[e,t]),n.current})(_),N=(0,i.useRef)(!0);(0,i.useEffect)((()=>{const{bindI18n:e,bindI18nStore:t}=h;N.current=!0,g||m||(s.lng?os(u,s.lng,f,(()=>{N.current&&w(x)})):ss(u,f,(()=>{N.current&&w(x)}))),g&&k&&k!==_&&N.current&&w(x);const n=()=>{N.current&&w(x)};return e&&(null===u||void 0===u||u.on(e,n)),t&&(null===u||void 0===u||u.store.on(t,n)),()=>{N.current=!1,u&&(null===e||void 0===e||e.split(" ").forEach((e=>u.off(e,n)))),t&&u&&t.split(" ").forEach((e=>u.store.off(e,n)))}}),[u,_]),(0,i.useEffect)((()=>{N.current&&g&&w(b)}),[u,p,g]);const j=[y,u,g];if(j.t=y,j.i18n=u,j.ready=g,g)return j;if(!g&&!m)return j;throw new Promise((e=>{s.lng?os(u,s.lng,f,(()=>e())):ss(u,f,(()=>e()))}))};const{slice:xs,forEach:ys}=[];const ws=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,_s={create(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+60*n*1e3)),i&&(a.domain=i),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"},i=encodeURIComponent(t);let a="".concat(e,"=").concat(i);if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(e))}if(n.domain){if(!ws.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(n.domain)}if(n.path){if(!ws.test(n.path))throw new TypeError("option path is invalid");a+="; Path=".concat(n.path)}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(a+="; Partitioned"),a}(e,t,a)},read(e){const t="".concat(e,"="),n=document.cookie.split(";");for(let i=0;i<n.length;i++){let e=n[i];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var ks={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!==typeof document)return _s.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:i,cookieDomain:a,cookieOptions:r}=t;n&&"undefined"!==typeof document&&_s.create(n,e,i,a,r)}},Ns={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!==typeof window){var i;let{search:e}=window.location;!window.location.search&&(null===(i=window.location.hash)||void 0===i?void 0:i.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const a=e.substring(1).split("&");for(let i=0;i<a.length;i++){const e=a[i].indexOf("=");if(e>0){a[i].substring(0,e)===n&&(t=a[i].substring(e+1))}}}return t}},js={name:"hash",lookup(e){let t,{lookupHash:n,lookupFromHashIndex:i}=e;if("undefined"!==typeof window){const{hash:e}=window.location;if(e&&e.length>2){const r=e.substring(1);if(n){const e=r.split("&");for(let i=0;i<e.length;i++){const a=e[i].indexOf("=");if(a>0){e[i].substring(0,a)===n&&(t=e[i].substring(a+1))}}}if(t)return t;if(!t&&i>-1){var a;const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return;return null===(a=t["number"===typeof i?i:0])||void 0===a?void 0:a.replace("/","")}}}return t}};let Ss=null;const Cs=()=>{if(null!==Ss)return Ss;try{if(Ss="undefined"!==typeof window&&null!==window.localStorage,!Ss)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(Tt){Ss=!1}return Ss};var Es={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Cs())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Cs()&&window.localStorage.setItem(n,e)}};let As=null;const Ts=()=>{if(null!==As)return As;try{if(As="undefined"!==typeof window&&null!==window.sessionStorage,!As)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(Tt){As=!1}return As};var Ms={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Ts())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&Ts()&&window.sessionStorage.setItem(n,e)}},Ps={name:"navigator",lookup(e){const t=[];if("undefined"!==typeof navigator){const{languages:e,userLanguage:n,language:i}=navigator;if(e)for(let a=0;a<e.length;a++)t.push(e[a]);n&&t.push(n),i&&t.push(i)}return t.length>0?t:void 0}},Ds={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const i=n||("undefined"!==typeof document?document.documentElement:null);return i&&"function"===typeof i.getAttribute&&(t=i.getAttribute("lang")),t}},Rs={name:"path",lookup(e){var t;let{lookupFromPathIndex:n}=e;if("undefined"===typeof window)return;const i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(i))return;return null===(t=i["number"===typeof n?n:0])||void 0===t?void 0:t.replace("/","")}},Os={name:"subdomain",lookup(e){var t;let{lookupFromSubdomainIndex:n}=e;const i="number"===typeof n?n+1:1,a="undefined"!==typeof window&&(null===(t=window.location)||void 0===t||null===(t=t.hostname)||void 0===t?void 0:t.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(a)return a[i]}};let Ls=!1;try{document.cookie,Ls=!0}catch(Tt){}const Is=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ls||Is.splice(1,1);class Fs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return ys.call(xs.call(arguments,1),(t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:Is,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"===typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(ks),this.addDetector(Ns),this.addDetector(Es),this.addDetector(Ms),this.addDetector(Ps),this.addDetector(Ds),this.addDetector(Rs),this.addDetector(Os),this.addDetector(js)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach((e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"===typeof n&&(n=[n]),n&&(t=t.concat(n))}})),t=t.filter((e=>{return void 0!==e&&null!==e&&!("string"===typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some((e=>e.test(t))));var t})).map((e=>this.options.convertDetectedLanguage(e))),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)})))}}Fs.type="languageDetector";const zs={en:{common:JSON.parse('{"navigation":{"dashboard":"Control Panel","profile":"Crew Record","logout":"Logout","training":"Training Program","quiz":"Assessment"},"buttons":{"continue":"Continue","start":"Start","finish":"Finish","next":"Next","previous":"Previous","save":"Save","cancel":"Cancel","submit":"Submit","upload":"Upload","download":"Download","retry":"Retry","review":"Review","approve":"Approve","reject":"Reject","edit":"Edit","delete":"Delete","view":"View","close":"Close","confirm":"Confirm","back":"Back","loading":"Loading...","locked":"Locked","take_quiz":"Take Quiz","view_results":"View Results","sync_now":"Sync Now","back_to_dashboard":"Back to Control Panel"},"status":{"completed":"Completed","in_progress":"In Progress","not_started":"Not Started","pending":"Pending","active":"Active","inactive":"Inactive","passed":"Passed","failed":"Failed","approved":"Approved","rejected":"Rejected","overdue":"Overdue"},"forms":{"required":"This field is required","email_invalid":"Please enter a valid email address","password_min_length":"Password must be at least {{min}} characters","file_too_large":"File size exceeds the maximum allowed limit","file_invalid_type":"Invalid file type","min_length":"{{field}} must be at least {{min}} characters"},"time":{"hours":"hours","minutes":"minutes","days":"days","weeks":"weeks","due_in":"Due in {{time}}","overdue_by":"Overdue by {{time}}"},"progress":{"overall":"Overall Progress","completed_items":"{{completed}}/{{total}} items completed","percentage":"{{percentage}}%"},"errors":{"generic":"An error occurred. Please try again.","network":"Network error. Please check your connection.","unauthorized":"You are not authorized to perform this action.","not_found":"The requested resource was not found.","server_error":"Server error. Please try again later.","connection_restored":"Connection restored! You\'re back online.","session_expired":"Your session has expired. Please log in again.","access_denied":"Access denied. Contact your administrator if needed."},"success":{"saved":"Successfully saved","updated":"Successfully updated","deleted":"Successfully deleted","uploaded":"Successfully uploaded"},"admin":{"dashboard":"Admin Control Panel","templates":"PDF Templates","settings":"System Preferences","crew_members":"Crew Members","system_administration":"System Administration","welcome_back":"Welcome back, {{name}}","administrator":"Administrator","total_managers":"Total Managers","total_crew_members":"Total Crew Members","active_sessions":"Active Sessions","system_health":"System Health","overview":"Overview","managers":"Managers","audit_logs":"Audit Logs"},"manager":{"dashboard":"Manager Control Panel","crew_management":"Crew Management","quiz_reviews":"Quiz Reviews","onboarding_reviews":"Onboarding Reviews","certificates":"Certificates","add_crew":"Add New Crew Member","bulk_actions":"Bulk Actions","select_all":"Select All","deselect_all":"Deselect All","export_selected":"Export Selected","send_reminder":"Send Reminder","archive_selected":"Archive Selected","add_manager":"Add New Manager","edit_manager":"Edit Manager","create_manager":"Create Manager","update_manager":"Update Manager","creating":"Creating...","updating":"Updating...","first_name":"First Name","last_name":"Last Name","password":"Password","new_password":"New Password (optional)","password_requirements":"Password must be at least 8 characters with uppercase, lowercase, and number","password_leave_blank":"Leave blank to keep current password","manager_permissions":"Manager Permissions","permissions":"Permissions","permissions_default":"Default permissions will be assigned if none are selected","permissions_selected":"{{count}} permission(s) selected","email_cannot_change":"Email cannot be changed","loading_manager":"Loading manager data...","manager_created":"Manager created successfully","manager_updated":"Manager updated successfully","failed_create":"Failed to create manager","failed_update":"Failed to update manager","permission_labels":{"view_crew_list":"View Crew List","manage_crew_members":"Manage Crew Members","review_quiz_results":"Review Quiz Results","approve_training_completion":"Approve Training","view_certificates":"View Certificates","regenerate_certificates":"Regenerate Certificates","view_compliance_reports":"View Compliance Reports","export_training_data":"Export Training Data","content_edit":"Content Management"},"permission_descriptions":{"view_crew_list":"View all crew members","manage_crew_members":"Create, edit, and manage crew members","review_quiz_results":"View and review training quiz results","approve_training_completion":"Approve training completion and issue certificates","view_certificates":"View issued certificates","regenerate_certificates":"Regenerate and reissue certificates","view_compliance_reports":"Access compliance and training reports","export_training_data":"Export training data and reports","content_edit":"Edit training content, phases, and quiz questions"}},"crew":{"member":"Crew Member","members":"Crew Members","onboarding":"Crew Onboarding","training_items":"Training Items","phase_overview":"Phase Overview"},"common":{"status":"Status","not_set":"Not set"},"general":{"search":"Search","filter":"Filter","refresh":"Refresh","actions":"Actions","details":"Details","overview":"Overview","all_rights_reserved":"All rights reserved","safety_management_system":"Safety Management System","burando_maritime":"Burando Maritime","maritime_services":"Maritime Services","completion_rate":"Completion Rate","overall_completion_rate":"Overall Completion Rate","pending_reviews":"Pending Reviews","recent_activity":"Recent Activity","no_activity":"No recent activity","compliance_metrics":"Compliance Metrics","item":"Item","of":"of"},"profile":{"title":"Crew Record","my_profile":"My Crew Record","personal_information":"Personal information and contact details","personal_info":"Personal Information","contact_info":"Contact Information","work_info":"Work Information","full_name":"Full Name","email":"Email Address","email_address":"Email Address","phone":"Phone Number","phone_number":"Phone Number","role":"Role","position":"Position","vessel":"Vessel Assignment","boarding_date":"Expected Boarding Date","emergency_contact":"Emergency Contact","contact_name":"Contact Name","contact_phone":"Contact Phone","vessel_assignment":"Vessel Assignment","start_date":"Start Date","loading_profile":"Loading profile...","preferences":"Preferences","language_preference":"Language Preference","language_description":"Choose your preferred language for the interface and email communications","language_updated":"Language preference updated successfully","language_update_failed":"Failed to update language preference","updating_language":"Updating language preference"},"error_boundary":{"title":"Something went wrong","message":"We\'re sorry, but something unexpected happened. Please try refreshing the page.","refresh_button":"Refresh Page"},"loading":{"default":"Loading...","profile":"Loading profile...","content":"Loading content...","quiz":"Loading quiz...","saving":"Saving...","uploading":"Uploading..."},"session":{"expiring_soon":"Session Expiring Soon!","warning":"Session Warning","expires_in":"Your session will expire in {{time}}. Please save your work.","refresh_session":"Refresh Session","logout":"Logout Now"},"auto_save":{"saving":"Saving...","saved":"Saved","save_failed":"Save failed","unsaved_changes":"Unsaved changes","saved_time_ago":"Saved {{time}} ago","just_now":"just now"},"quiz_errors":{"loading_failed":"Error Loading Quiz","failed_message":"Failed to load the quiz for Phase {{phase}}","try_again":"Try Again","unknown_error":"Unknown error","error":"Error"},"audit_log":{"title":"Audit Logs","action":"Action","all_actions":"All Actions","user":"User","timestamp":"Timestamp","details":"Details","filters":"Filters","from_date":"From Date","to_date":"To Date","resource_type":"Resource Type","failed_to_load":"Failed to load audit logs"},"content_management":{"title":"Content Management","description":"Manage training phases and quiz content","access_denied":{"title":"Access Denied","message":"You don\'t have permission to edit training content. Contact your administrator if you need access."},"migration":{"title":"Database Migration Required","message":"The content management tables have not been created yet. Please run the migration:","filename":"20250602000002_content_management_system.sql"},"tabs":{"training":"Training Phases","quizzes":"Quizzes"},"training":{"title":"Training Phases","create":"Create Training Phase","create_button":"+ Create Training Phase","edit":"Edit","delete":"Delete","delete_confirm":"Are you sure you want to delete this training phase? This action cannot be undone.","delete_success":"Training phase deleted successfully!","delete_failed":"Failed to delete training phase. Please try again.","untitled":"Untitled Phase","no_description":"No description","items_count":"{{count}} items","time_limit":"{{limit}}h limit","empty":{"title":"No training phases yet","message":"Create your first training phase to get started or load the default training content.","load_default":"Load Default Content","load_confirm":"This will load the default training content. Continue?","load_success":"Loaded {{phases}} phases and {{quizzes}} quizzes","load_failed":"Failed to load initial data"}},"quizzes":{"title":"Quizzes","create":"Create Quiz","create_button":"+ Create New Quiz","edit":"Edit","delete":"Delete","delete_confirm":"Are you sure you want to delete this quiz? This action cannot be undone.","delete_success":"Quiz deleted successfully!","delete_failed":"Failed to delete quiz. Please try again.","save_failed":"Failed to save quiz. Please try again.","untitled":"Untitled Quiz","no_description":"No description","questions_count":"{{count}} questions","time_limit":"{{limit}}min","passing_score":"{{score}}% pass","empty":{"title":"No quizzes yet","message":"Create your first quiz to get started."}}},"actions":{"preview":"Preview","edit":"Edit","delete":"Delete","view":"View","download":"Download","save":"Save","cancel":"Cancel"},"roles":{"admin":"Administrator","manager":"Manager","crew":"Crew Member"},"pdf_template":{"failed_load":"Failed to load template","created":"Template created successfully!","saved":"Template saved successfully!","failed_save":"Failed to save template","failed_preview":"Failed to generate preview","close_confirm":"Are you sure you want to close? Any unsaved changes will be lost."},"translation":{"translateWorkflow":"Translate Workflow","translating":"Translating...","multilingualContent":"Multilingual Content","progress":"Translation Progress","noSourceContent":"No source content to translate","workflowTranslated":"Workflow translated to {{count}} languages","failed":"Translation failed","success":"Translation successful","batchSuccess":"Batch translation completed for {{count}} languages","batchFailed":"Batch translation failed","error":"Translation error: {{error}}","noSourceText":"No source text to translate","translatedBy":"Translated by {{method}}","maritimeEnhanced":"Maritime Enhanced","humanReviewed":"Human Reviewed","confidence":"Confidence","improve":"Improve","markReviewed":"Mark as Reviewed","markedReviewed":"Marked as reviewed","aiTranslate":"AI Translate","translateAll":"Translate All","preview":"Translation Preview","notTranslated":"Not translated","enterContent":"Enter content..."},"mobile_warning":{"title":"Mobile Device Detected","subtitle":"This page works best on desktop","desktop_required":"This editor requires a desktop computer with a larger screen for the best experience. Some features may not work properly on mobile devices.","desktop_recommended":"While this page works on mobile, we recommend using a desktop computer for the best experience.","limitations_title":"Mobile Limitations:","limitation_1":"Limited drag & drop functionality","limitation_2":"Smaller workspace area","limitation_3":"Touch navigation challenges","limitation_4":"Some features may not work","proceed":"Continue Anyway","dismiss":"I Understand","help_text":"For the best experience, please use a computer with a screen width of at least 768px."}}'),auth:JSON.parse('{"title":"\ud83d\udea2 Welcome to Burando Maritime Training","subtitle":"Professional Maritime Training Platform","tagline":"New to the platform? Enter your email address and we\'ll send you a secure login link.","copyright":"\xa9 2024 Burando Maritime Services. All rights reserved.","login_methods":{"title":"Crew Member Access","subtitle":"Enter your email to get started with your training program","magic_link":{"title":"Login Link","description":"For crew members - secure email authentication","token_label":"Enter Your Login Code","token_placeholder":"Paste your code here...","help_title":"Need help?","help_text":"Check your email for an invitation from Burando Maritime. Click the secure login link, and your code will be filled automatically.","button":"Access Training Program","loading":"Verifying Login Link..."},"request":{"title":"Get Started","description":"Enter your email address and we\'ll send you a secure login link","email_label":"Your Email Address","email_placeholder":"Enter your email address","help_title":"What happens next?","help_text":"You\'ll receive a secure login link via email within moments. Click the link to access your training program instantly.","note":"Use the same email address that was registered by your manager.","button":"Get Started","loading":"Sending Login Link...","alternative_text":"Already have a login code?","manual_token_button":"Enter Login Code","admin_button":"System Administrator"},"token":{"title":"\ud83d\udce7 Have a Login Code?","description":"If your email link didn\'t work, you can enter your email and login code below","email_label":"Your Email Address","email_placeholder":"Enter your email address","token_label":"Login Code","token_placeholder":"Paste your login code here (e.g., ABC123XYZ...)","button":"Continue","loading":"Verifying Login Code...","back_button":"\u2190 Back to Get Started"},"admin":{"title":"\u2699\ufe0f System Administrator","description":"For system administrators only","email_label":"Administrator Email","email_placeholder":"admin@shipdocs.app","password_label":"Administrator Password","password_placeholder":"Enter secure password","button":"Administrator Login","loading":"Authenticating...","security_notice":"\ud83d\udd12 This is a secure administrative area. All access attempts are logged.","back_button":"\u2190 Back to Crew Login"}},"messages":{"welcome_back":"Welcome back, {{name}}!","welcome":"Welcome aboard, {{name}}!","magic_link_expired":"This login code has expired. Please request a new one.","magic_link_sent":"Login link sent! Check your email for the secure login link.","login_failed":"We couldn\'t log you in. Please check your email for a new login link.","invalid_credentials":"We couldn\'t log you in. Please check your email for a new login link.","token_required":"Login code is required","email_required":"Email is required","password_required":"Password is required","network_error":"Connection problem. Please check your internet and try again."},"validation":{"email_invalid":"Please enter a valid email address","email_required":"Email address is required","token_required":"Login code is required","token_min_length":"Login code must be at least 10 characters","admin_email_required":"Administrator email is required","admin_password_required":"Administrator password is required","admin_password_min_length":"Password must be at least 8 characters"}}'),dashboard:JSON.parse('{"crew":{"welcome":"Welcome, {{name}}!","subtitle":"Continue your onboarding training journey","vessel":"Vessel","position":"Position","overall_progress":"Overall Progress","current_training":"Current Training","items_completed":"Items Completed","quiz_results":"Quiz Results","my_profile":"My Profile","loading_dashboard":"Loading your dashboard...","stats":{"phases_completed":"Phases Completed","items_completed":"Items Completed","quizzes_passed":"Quizzes Passed","status":"Status"},"training_phases":{"title":"Training Phases","subtitle":"Complete each phase in order to progress","steps_label":"Steps","quiz_label":"Quiz","quiz_required":"Quiz Required","quiz_passed":"Quiz Passed ({{score}}%)","quiz_failed":"Quiz Failed ({{score}}%) - Retake Required","quiz_approved":"Quiz Approved ({{score}}%)","awaiting_review":"Awaiting Review ({{score}}%)","take_quiz":"Take Quiz","view_results":"View Results","retake_quiz":"Retake Quiz"},"next_steps":{"title":"Next Steps","complete_training":"Complete your current training phase","take_quiz":"Take the quiz for Phase {{phase}}","wait_approval":"Wait for manager approval of your quiz results","all_complete":"Congratulations! You have completed all training phases.","continue_training":"Continue Your Training","phase1_next":"Start with Phase 1: Immediate Safety Training to begin your onboarding journey.","phase2_next":"Move on to Phase 2: Operational Training to learn about vessel operations.","phase3_next":"Complete Phase 3: Advanced Training & Policies to finish your onboarding."},"completion":{"congratulations":"Congratulations! \ud83c\udf89","all_complete_message":"You have successfully completed all phases of the onboarding training program. Your completion certificate has been generated and sent to HR.","items_completed_count":"{{completed}}/{{total}} items completed","overdue_by_days":"Overdue by {{days}} days","due_in_days":"Due in {{days}} days","status_not_started":"not started","status_in_progress":"in progress","status_completed":"completed"}},"manager":{"welcome":"Manager Dashboard","subtitle":"Manage crew onboarding and training progress"}}'),training:JSON.parse('{"phase":"Phase","phases":{"phase1":{"title":"Immediate Safety Training","description":"Essential safety training to be completed within 24 hours of boarding","time_limit":"24 hours"},"phase2":{"title":"Nautical Training","description":"Comprehensive nautical procedures and vessel operations training","time_limit":"72 hours"},"phase3":{"title":"Advanced Safety & Environmental","description":"Advanced safety protocols and environmental compliance training","time_limit":"1 week"}},"items":{"meet_colleagues":"Meet colleagues + daily affairs on board","safety_equipment":"Safety equipment and emergency procedures","fire_safety":"Fire safety and firefighting equipment","emergency_procedures":"Emergency procedures and muster stations","personal_protective":"Personal protective equipment (PPE)","vessel_layout":"Vessel layout and restricted areas","communication":"Communication procedures and protocols","environmental":"Environmental protection procedures","cargo_operations":"Cargo operations and safety","navigation":"Navigation and bridge procedures","engine_room":"Engine room safety and procedures","maintenance":"Maintenance and repair procedures"},"categories":{"orientation":"Orientation","safety":"Safety","emergency":"Emergency Procedures","equipment":"Equipment","procedures":"Procedures","environmental":"Environmental","navigation":"Navigation","maintenance":"Maintenance"},"instructions":{"read_carefully":"Please read the following information carefully","complete_all":"Complete all training items in this phase","take_photos":"Take photos as proof of completion where required","ask_questions":"Ask your supervisor if you have any questions","safety_first":"Safety is our top priority - never skip safety procedures"},"completion":{"item_completed":"Training item completed","phase_completed":"Phase completed successfully","all_completed":"All training phases completed","certificate_ready":"Certificate ready for download","instructor_signature":"Instructor signature required","photo_required":"Photo proof required"},"navigation":{"previous_item":"Previous Item","next_item":"Next Item","back_to_phase":"Back to Phase Overview","mark_complete":"Mark as Complete","undo_complete":"Undo Completion"},"ui":{"time_spent":"Time Spent","minutes":"minutes","start_training":"Start Training","continue_training":"Continue Training","phase_complete":"Phase Complete","take_quiz_now":"Take Quiz Now","back_to_dashboard":"Back to Dashboard","congratulations":"Congratulations!","phase_completed_message":"You have successfully completed this training phase.","ready_for_quiz":"You are now ready to take the quiz for this phase.","loading_content":"Loading training content...","not_found_title":"Training Phase Not Found","not_found_message":"The requested training phase could not be loaded.","return_to_dashboard":"Return to Dashboard","training_progress":"Training Progress","time_limit":"Time Limit","total_items":"Total Items","completed":"Completed","remaining":"Remaining","phase_overview":"Phase Overview","quick_actions":"Quick Actions","excellent_work":"Excellent Work! Phase Complete!","outstanding_achievement":"Outstanding Achievement!","phase_completion_message":"You\'ve successfully completed all {{count}} training items for {{title}}!","dedication_message":"Your dedication to maritime safety training is commendable.","test_knowledge":"Ready to test your knowledge?","view_quiz_results_message":"You can review your quiz results or continue studying the materials.","auto_navigate_message":"Automatically proceeding to quiz in:","cancel_auto_nav":"Cancel auto-navigation","auto_nav_10_seconds":"Auto-navigate to quiz in 10 seconds","streamlined_flow_title":"Streamlined Training Flow","auto_complete_message":"This item will be automatically marked as complete when you click \\"Next\\". You can always undo completion if needed.","mark_complete_now":"Mark as Complete Now","mark_incomplete":"Mark as Incomplete","last_training_item":"Last training item!","take_final_quiz":"Take Final Quiz Now","complete_and_next":"Complete & Next","overview":"Overview","learning_objectives":"Learning Objectives","key_points":"Key Points to Remember","procedures":"Procedures","emergency_response_types":"Emergency Response Types","training_content_placeholder":"Detailed training content for \\"{{title}}\\" will be displayed here.","training_content":"Training Content"}}'),quiz:JSON.parse('{"title":"Phase {{phase}} Assessment","instructions":{"title":"Quiz Instructions","read_carefully":"Please read all questions carefully before answering","time_limit":"Time limit: {{minutes}} minutes","passing_score":"Passing score: {{score}}%","single_attempt":"You have one attempt per quiz session","save_progress":"Your progress is automatically saved","review_answers":"Review your answers before submitting","no_going_back":"You cannot change answers after submission"},"question_types":{"multiple_choice":"Multiple Choice","true_false":"True/False","file_upload":"File Upload","short_answer":"Short Answer","drag_drop":"Drag and Drop","fill_gaps":"Fill in the Gaps"},"navigation":{"question_progress":"Question {{current}} of {{total}}","previous_question":"Previous Question","next_question":"Next Question","submit_quiz":"Submit Quiz","review_quiz":"Review Quiz","start_quiz":"Start Quiz","retake_quiz":"Retake Quiz","ready_to_begin":"Ready to Begin?","time_limit_label":"Time Limit","questions_label":"Questions","passing_score_label":"Passing Score","questions_count":"{{count}} questions"},"file_upload":{"instructions":"Upload a clear photo showing the required safety equipment","drag_drop":"Drag and drop your file here, or click to browse","file_types":"Accepted file types: JPG, PNG, PDF","max_size":"Maximum file size: {{size}}MB","upload_success":"File uploaded successfully","upload_error":"Upload failed. Please try again.","remove_file":"Remove file","file_removed":"File removed. You can upload a new one."},"results":{"quiz_completed":"Quiz Completed","your_score":"Your Score: {{score}}%","passing_score":"Passing Score: {{required}}%","result_passed":"Congratulations! You passed the quiz.","result_failed":"You did not meet the passing score. Please review the training material and retake the quiz.","pending_review":"Your quiz is pending manager review.","approved":"Your quiz has been approved by management.","rejected":"Your quiz was not approved. Please retake the quiz.","time_taken":"Time taken: {{time}}","questions_correct":"{{correct}} out of {{total}} questions correct","view_answers":"View Detailed Results","download_certificate":"Download Certificate"},"validation":{"answer_required":"Please provide an answer for this question","file_required":"Please upload a file for this question","invalid_file_type":"Invalid file type. Please upload JPG, PNG, or PDF files only.","file_too_large":"File size exceeds the maximum limit of {{size}}MB","text_too_short":"Answer must be at least {{min}} characters long","text_too_long":"Answer must not exceed {{max}} characters"},"safety_equipment":{"fire_extinguisher":"Fire Extinguisher","life_jacket":"Life Jacket","emergency_alarm":"Emergency Alarm","first_aid_kit":"First Aid Kit","emergency_exit":"Emergency Exit","muster_station":"Muster Station","safety_shower":"Safety Shower","eye_wash_station":"Eye Wash Station"},"common_answers":{"yes":"Yes","no":"No","true":"True","false":"False","correct":"Correct","incorrect":"Incorrect","not_answered":"Not answered"},"loading":{"preparing_quiz":"Please wait while we prepare your Phase {{phase}} quiz."},"errors":{"not_found":"Quiz Not Found","not_available":"The quiz for Phase {{phase}} is not available.","session_expired":"Quiz session expired. Please refresh the page to start over.","submission_failed":"Failed to submit quiz: {{error}}","session_not_found":"Quiz session not found. Please refresh and try again."},"ui":{"auto_advance":"Advancing automatically in 1.5s...","question_answered":"Question answered","provide_answer":"Please provide an answer to continue","question_progress":"Question","save_progress":"Save your progress","quiz_completed_title":"Quiz Completed!","quiz_completed_message":"Your answers have been submitted and are being reviewed. You will receive your results and certificate once the review is complete.","return_to_training":"Return to Training","go_to_dashboard":"Go to Dashboard","important_instructions":"Important Instructions:","instruction_photos":"Some questions require photo uploads - ensure good lighting and clear images","instruction_navigation":"You can navigate between questions but cannot restart once submitted","instruction_files":"File uploads must be under 5MB and in JPG, PNG, or WebP format","instruction_all_questions":"All questions must be answered to complete the quiz","instruction_auto_save":"Your progress is automatically saved","quiz_started":"Quiz started! Good luck!"},"offline":{"mode_active":"Offline Mode","pending_sync":"Will Sync","progress_restored":"Quiz progress restored from offline storage","now_offline":"You\'re now offline. Your progress will be saved locally.","back_online_will_sync":"Back online! Your quiz will sync automatically.","saved_will_sync":"Quiz completed offline. Results will sync when connection is restored.","save_failed":"Failed to save quiz offline. Please try again."}}'),admin:JSON.parse('{"dashboard":{"title":"Admin Dashboard","tabs":{"overview":"Overview","managers":"Manager Management","templates":"PDF Templates","content":"Content Management","settings":"System Settings","audit":"Audit Log"},"stats":{"managers":"Total Managers","crew":"Total Crew Members","sessions":"Active Sessions","health":"System Health"},"sections":{"managers":{"title":"Manager Accounts","description":"Manage manager accounts and permissions","add":"Add Manager","active":"Active","inactive":"Inactive"},"templates":{"title":"PDF Templates","description":"Manage certificate and document templates","create":"Create Template","empty":"No templates","emptyDescription":"Get started by creating your first PDF template."},"content":{"title":"Content Management","description":"Edit Training & Quizzes","redirecting":"Redirecting to Content Management..."},"audit":{"view":"View Activity","title":"System Audit Log","description":"Track all administrative actions and system events","loading":"Loading audit logs...","failed":"Failed to load audit logs","tryAgain":"Try Again","filters":"Filters","refresh":"Refresh","action":"Action","allActions":"All Actions","resourceType":"Resource Type","fromDate":"From Date","toDate":"To Date","clearFilters":"Clear Filters","noLogs":"No audit logs found","noLogsDescription":"No audit log entries match your current filters.","viewDetails":"View Details","previous":"Previous","next":"Next","showing":"Showing","to":"to","of":"of","results":"results","page":"Page {{page}} of {{totalPages}}","actions":{"adminLogin":"Admin Login","managerLogin":"Manager Login","crewLogin":"Crew Login","userCreated":"User Created","userUpdated":"User Updated","userDeleted":"User Deleted","emailSent":"Email Sent","certificateGenerated":"Certificate Generated"},"resourceTypes":{"admin":"Admin","manager":"Manager","crew":"Crew","template":"Template","email":"Email"}}},"actions":{"deactivate":"Deactivate manager","activate":"Activate manager","sendMagicLink":"Send magic login link","resendWelcomeEmail":"Resend welcome email","edit":"Edit manager","delete":"Delete manager"},"tooltips":{"deactivateManager":"Deactivate this manager account and revoke access","activateManager":"Activate this manager account and grant access","sendMagicLink":"Send a secure login link to this manager\'s email (3-hour expiration)","resendWelcomeEmail":"Resend welcome email with new password and manager guide (respects current language preference)","editManager":"Edit manager account details, permissions, and settings","deleteManager":"Permanently delete this manager account (cannot be undone)"},"messages":{"loadFailed":"Failed to load dashboard data","managerActivated":"Manager {{name}} activated successfully","managerDeactivated":"Manager {{name}} deactivated successfully","statusUpdateFailed":"Failed to update manager status","magicLinkSent":"Magic link sent to {{name}}","magicLinkFailed":"Failed to send magic link","welcomeEmailResent":"Welcome email with new credentials sent to {{name}}","welcomeEmailFailed":"Failed to send welcome email","deleteConfirm":"Are you sure you want to delete manager \\"{{name}}\\"? This action cannot be undone.","managerDeleted":"Manager deleted successfully","deleteFailed":"Failed to delete manager","templateDeleteConfirm":"Are you sure you want to delete template \\"{{name}}\\"? This action cannot be undone.","templateDeleted":"Template deleted successfully","templateDeleteFailed":"Failed to delete template"}},"settings":{"title":"System Settings","description":"Configure global application settings and preferences","categories":{"application":"Application","email":"Email","security":"Security","training":"Training","notifications":"Notifications"},"descriptions":{"application":"General application settings","email":"Email configuration and notifications","security":"Security and authentication settings","training":"Training and certification settings","notifications":"Notification preferences"},"actions":{"save":"Save Changes","saving":"Saving...","refresh":"Refresh","reset":"Reset to Defaults","unsaved_changes":"Unsaved changes"},"messages":{"loading":"Loading system settings...","load_failed":"Failed to load system settings","try_again":"Try Again","reset_confirm":"Are you sure you want to reset {{category}} settings to defaults? This cannot be undone.","reset_all_confirm":"Are you sure you want to reset all settings to defaults? This cannot be undone."},"email":{"provider_title":"Email Service Provider","provider_description":"Choose your email service provider. Only relevant settings will be shown below.","smtp_title":"SMTP","smtp_description":"ProtonMail, Gmail, etc.","mailersend_title":"MailerSend","mailersend_description":"Transactional Email API"},"empty":{"title":"No settings found","message":"No settings are available for this category."}},"certificates":{"title":"Certificates","description":"Manage crew certificates and documentation","loading":"Loading certificates...","error":"Error Loading Certificates","failed":"Failed to load certificates","tryAgain":"Try Again","search":"Search certificates...","refresh":"Refresh","noFound":"No Certificates Found","noFoundDescription":"No certificates match your current filters.","filters":{"allTypes":"All Types","onboardingTraining":"Onboarding Training","introKapitein":"Intro Kapitein"},"table":{"type":"Type","crewMember":"Crew Member","issueDate":"Issue Date","expiryDate":"Expiry Date","status":"Status","actions":"Actions"},"status":{"noExpiry":"No Expiry","expired":"Expired","expiringSoon":"Expiring Soon","valid":"Valid","unverified":"Unverified","verified":"Verified","notVerified":"Not Verified"},"details":{"title":"Certificate Details","crewInfo":"Crew Member Information","name":"Name","email":"Email","position":"Position","vessel":"Vessel Assignment","editTitle":"Edit Certificate Details","certificateType":"Certificate Type","certificateNumber":"Certificate Number","issueDate":"Issue Date","expiryDate":"Expiry Date","issuingAuthority":"Issuing Authority","verified":"Verified","cancel":"Cancel","saveChanges":"Save Changes","metadata":"Certificate Metadata","generatedBy":"Generated By","generatedAt":"Generated At","lastUpdated":"Last Updated","updatedBy":"Updated By","templateUsed":"Template Used","version":"Version","fileSize":"File Size","downloadCount":"Download Count","editDetails":"Edit Details","download":"Download Certificate","regenerateConfirm":"Confirm regeneration?","regenerateDescription":"This will create a new certificate file. The existing certificate will be replaced.","regenerate":"Regenerate Certificate","deleteConfirm":"Confirm deletion?","deleteDescription":"This action cannot be undone. The certificate and all its data will be permanently removed.","delete":"Delete Certificate"},"messages":{"updated":"Certificate updated successfully","updateFailed":"Failed to update certificate: {{error}}","deleted":"Certificate deleted successfully","deleteFailed":"Failed to delete certificate: {{error}}","regenerated":"Certificate regenerated successfully","regenerateFailed":"Failed to regenerate certificate: {{error}}"},"pagination":{"previous":"Previous","next":"Next","showing":"Showing","to":"to","of":"of","results":"results"}}}'),manager:JSON.parse('{"dashboard":{"title":"Manager Dashboard","sections":{"crew":{"title":"Crew Members","description":"Manage your crew member roster and onboarding status","refresh":"Refresh","add":"Add Crew Member","search":"Search crew members...","selected":"{{count}} selected"},"quizReviews":{"title":"Pending Quiz Reviews","description":"Review and approve quiz submissions from crew members","empty":"No Pending Reviews","emptyDescription":"All quiz submissions have been reviewed."},"onboardingReviews":{"title":"Complete Onboarding Reviews","description":"Review complete training progress and approve final onboarding","empty":"No Pending Reviews","emptyDescription":"No crew members ready for final onboarding approval."},"compliance":{"trainingProgress":"Training Progress by Position","sessionsCompleted":"{{count}} training sessions completed this week","lastUpdated":"Last updated: {{date}}","quizReviewsPending":"{{count}} quiz reviews pending your approval","requiresAttention":"Requires immediate attention","certificatesIssued":"{{count}} certificates issued this month","certificatesDistributed":"All certificates automatically distributed"}},"filters":{"allStatus":"All Status","notStarted":"Not Started","inProgress":"In Progress","formsCompleted":"Forms Completed","trainingCompleted":"Training Completed","fullyCompleted":"Fully Completed","suspended":"Suspended"},"table":{"headers":{"name":"Name","position":"Position","vessel":"Vessel","boardingDate":"Boarding Date","status":"Status","actions":"Actions"}},"status":{"notStarted":"Not Started","inProgress":"In Progress","formsCompleted":"Forms Completed","trainingCompleted":"Training Completed","fullyCompleted":"Fully Completed","suspended":"Suspended"},"actions":{"view":"View crew member details","sendMagicLink":"Send magic link","sendSafetyPdf":"Send Safety Management PDF","sendOnboardingEmail":"Send Onboarding Start Email","edit":"Edit crew member","delete":"Delete crew member","approve":"Approve quiz","reject":"Reject quiz","approveOnboarding":"Approve Complete Onboarding"},"tooltips":{"viewCrewMember":"View detailed crew member information, training progress, and completion status","sendMagicLink":"Send a secure login link to crew member\'s email for training access (3-hour expiration)","sendSafetyPDF":"Send the complete Safety Management System (SMS) PDF document to crew member","sendOnboardingStart":"Send welcome email to officially start the crew member\'s onboarding training process","resendCompletionEmail":"Resend completion certificate and congratulations email to fully trained crew member","editCrewMember":"Edit crew member details, position, vessel assignment, and other profile information","deleteCrewMember":"Permanently remove this crew member from the system (cannot be undone)"},"quiz":{"passed":"Passed","failed":"Failed","requiresReview":"Quiz requires review"},"certificates":{"issued":"Certificates Issued"},"bulk":{"selectFirst":"Please select crew members first"},"messages":{"crewCreated":"Crew member created successfully","crewCreateFailed":"Failed to create crew member","magicLinkSent":"Magic link sent successfully","magicLinkFailed":"Failed to send magic link","crewUpdated":"Crew member updated successfully","crewUpdateFailed":"Failed to update crew member","crewDeleted":"Crew member deleted successfully","crewDeleteFailed":"Failed to delete crew member","quizReviewed":"Quiz review completed successfully","quizReviewFailed":"Failed to review quiz","onboardingApproved":"Onboarding approved and certificate sent","onboardingApproveFailed":"Failed to approve onboarding","safetyPdfSent":"Safety Management PDF sent successfully","safetyPdfFailed":"Failed to send Safety PDF: {{error}}","onboardingEmailSent":"Onboarding Start email sent successfully","onboardingEmailFailed":"Failed to send Onboarding Start email: {{error}}","deleteConfirm":"Are you sure you want to delete {{name}}? This action cannot be undone.","bulkDeleteConfirm":"Are you sure you want to delete {{count}} crew member(s)? This action cannot be undone.","approveOnboardingConfirm":"Are you sure you want to approve this crew member\'s complete onboarding? This will generate and send their completion certificate."},"contentManagement":"Content Management","stats":{"total_crew":"Total Crew","pending_reviews":"Pending Reviews","in_progress":"In Progress","not_started":"Not Started"}}}'),crew:JSON.parse('{"dashboard":{"title":"Crew Dashboard","welcome":"Welcome back, {{name}}!","sections":{"profile":{"title":"Your Profile","description":"View and update your personal information","view":"View Profile"},"trainingProgress":{"title":"Training Progress","description":"Complete your onboarding training phases","phase":"Phase {{number}}","currentPhase":"Current Phase","completedPhase":"Completed Phase","upcomingPhase":"Upcoming Phase","dueDate":"Due: {{date}}","overdue":"Overdue","startTraining":"Start Training","continueTraining":"Continue Training","viewTraining":"View Training","takeQuiz":"Take Quiz","quizPassed":"Quiz Passed","quizFailed":"Quiz Failed - Retake Required","awaitingReview":"Quiz Submitted - Awaiting Review","itemsCompleted":"{{completed}} of {{total}} items completed"},"quizHistory":{"title":"Quiz History","phase":"Phase {{number}} Quiz","score":"Score: {{score}}/{{total}}","passed":"Passed","failed":"Failed","pending":"Under Review","rejected":"Rejected - Please Retake","retake":"Retake Quiz","feedback":"Manager Feedback"},"forms":{"title":"Required Forms","description":"Complete and submit required onboarding forms","notStarted":"Not Started","inProgress":"In Progress","completed":"Completed","complete":"Complete Forms","review":"Review Forms"}},"status":{"notStarted":"Not Started","inProgress":"In Progress","formsCompleted":"Forms Completed","trainingCompleted":"Training Completed","fullyCompleted":"Fully Completed","suspended":"Account Suspended"},"messages":{"noActiveSession":"No active training session found","quizNotAvailable":"Quiz not available yet. Complete all training items first.","trainingCompleted":"Congratulations! You\'ve completed all training phases.","certificateIssued":"Your completion certificate has been issued.","contactManager":"Please contact your manager if you have questions."}},"training":{"phase":"Phase {{number}}: {{title}}","progress":"Progress: {{percentage}}%","item":"Item {{number}}","markComplete":"Mark as Complete","uploadProof":"Upload Proof","proofRequired":"Proof of completion required","proofUploaded":"Proof uploaded","completed":"Completed","nextItem":"Next Item","previousItem":"Previous Item","backToOverview":"Back to Overview","completePhase":"Complete Phase","phaseCompleted":"Phase Completed!","proceedToQuiz":"Proceed to Quiz","messages":{"itemCompleted":"Training item completed successfully","itemCompleteFailed":"Failed to complete training item","proofUploaded":"Proof uploaded successfully","proofUploadFailed":"Failed to upload proof","phaseCompleted":"Phase {{number}} completed successfully!","allItemsRequired":"Please complete all training items before taking the quiz"}},"quiz":{"title":"Phase {{number}} Quiz","instructions":"Please answer all questions carefully. You need to score at least {{passingScore}}% to pass.","question":"Question {{current}} of {{total}}","submit":"Submit Quiz","submitting":"Submitting...","confirmSubmit":"Are you sure you want to submit your quiz? You cannot change your answers after submission.","results":{"title":"Quiz Results","score":"Your Score: {{score}}/{{total}} ({{percentage}}%)","passed":"Congratulations! You passed the quiz.","failed":"Unfortunately, you did not pass. Please review the material and try again.","pending":"Your quiz has been submitted for manual review. You will be notified once it\'s reviewed.","reviewFeedback":"Manager Feedback: {{feedback}}"},"messages":{"submitted":"Quiz submitted successfully","submitFailed":"Failed to submit quiz","loadFailed":"Failed to load quiz questions","answerRequired":"Please answer all questions before submitting"}},"forms":{"title":"Onboarding Forms","personal":{"title":"Personal Information","firstName":"First Name","lastName":"Last Name","email":"Email Address","phone":"Phone Number","address":"Home Address","dateOfBirth":"Date of Birth","nationality":"Nationality","passportNumber":"Passport Number","seamanBookNumber":"Seaman\'s Book Number"},"emergency":{"title":"Emergency Contact","name":"Contact Name","relationship":"Relationship","phone":"Contact Phone","email":"Contact Email","address":"Contact Address"},"medical":{"title":"Medical Information","bloodType":"Blood Type","allergies":"Allergies","medications":"Current Medications","conditions":"Medical Conditions","doctorName":"Doctor Name","doctorPhone":"Doctor Phone"},"banking":{"title":"Banking Information","bankName":"Bank Name","accountNumber":"Account Number","iban":"IBAN","swiftCode":"SWIFT/BIC Code"},"actions":{"save":"Save Progress","submit":"Submit Forms","edit":"Edit Forms","download":"Download Copy"},"messages":{"saved":"Forms saved successfully","submitted":"Forms submitted successfully","saveFailed":"Failed to save forms","submitFailed":"Failed to submit forms","allFieldsRequired":"Please fill in all required fields","confirmSubmit":"Are you sure you want to submit your forms? You cannot edit them after submission."}}}'),forms:JSON.parse('{"selectPosition":"Select position","addManager":{"title":"Add New Manager","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","phone":"Phone Number (optional)","company":"Company","preferredLanguage":"Preferred Language","permissions":"Permissions"},"permissionOptions":{"crew_manage":"Manage crew members","quiz_review":"Review and approve quizzes","onboarding_approve":"Approve final onboarding","certificates_view":"View certificates","certificates_download":"Download certificates","certificates_regenerate":"Regenerate certificates","content_edit":"Edit training content"},"actions":{"create":"Create Manager","cancel":"Cancel"},"messages":{"success":"Manager created successfully","error":"Failed to create manager"}},"editManager":{"title":"Edit Manager","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","phone":"Phone Number","company":"Company","preferredLanguage":"Preferred Language","permissions":"Permissions","isActive":"Active Status"},"activeOptions":{"active":"Active","inactive":"Inactive"},"actions":{"save":"Save Changes","cancel":"Cancel"},"messages":{"success":"Manager updated successfully","error":"Failed to update manager"}},"addCrewMember":{"title":"Add New Crew Member","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","position":"Position","vesselAssignment":"Vessel Assignment","expectedBoardingDate":"Expected Boarding Date","contactPhone":"Contact Phone","emergencyContactName":"Emergency Contact Name","emergencyContactPhone":"Emergency Contact Phone","preferredLanguage":"Preferred Language"},"actions":{"create":"Create Crew Member","cancel":"Cancel"},"messages":{"success":"Crew member created successfully","error":"Failed to create crew member"}},"editCrewMember":{"title":"Edit Crew Member","fields":{"email":"Email Address","firstName":"First Name","lastName":"Last Name","position":"Position","vesselAssignment":"Vessel Assignment","expectedBoardingDate":"Expected Boarding Date","contactPhone":"Contact Phone","emergencyContactName":"Emergency Contact Name","emergencyContactPhone":"Emergency Contact Phone","preferredLanguage":"Preferred Language","isActive":"Active Status"},"actions":{"save":"Save Changes","cancel":"Cancel"},"messages":{"success":"Crew member updated successfully","error":"Failed to update crew member"}},"quizReview":{"title":"Review Quiz Submission","submittedBy":"Submitted by: {{name}}","phase":"Phase {{number}} Quiz","score":"Score: {{score}}/{{total}} ({{percentage}}%)","submittedAt":"Submitted: {{date}}","question":"Question {{number}}","userAnswer":"User Answer","correctAnswer":"Correct Answer","correct":"Correct","incorrect":"Incorrect","feedback":{"title":"Manager Feedback","placeholder":"Provide feedback for the crew member (optional)"},"actions":{"approve":"Approve Quiz","reject":"Reject Quiz","cancel":"Cancel"},"messages":{"approveConfirm":"Are you sure you want to approve this quiz?","rejectConfirm":"Are you sure you want to reject this quiz? The crew member will need to retake it.","approved":"Quiz approved successfully","rejected":"Quiz rejected successfully","error":"Failed to process quiz review"}},"onboardingReview":{"title":"Review Complete Onboarding","crewMember":"Crew Member: {{name}}","position":"Position: {{position}}","vessel":"Vessel: {{vessel}}","summary":{"title":"Training Summary","formsCompleted":"Forms: Completed","phase":"Phase {{number}}","status":"Status: {{status}}","quizScore":"Quiz: {{score}}/{{total}}","completedAt":"Completed: {{date}}"},"actions":{"approve":"Approve & Issue Certificate","reject":"Request Additional Training","cancel":"Cancel"},"messages":{"approveConfirm":"Are you sure you want to approve this crew member\'s onboarding? This will issue their completion certificate.","approved":"Onboarding approved and certificate issued","error":"Failed to process onboarding review"}},"common":{"required":"Required","optional":"Optional","loading":"Loading...","saving":"Saving...","submitting":"Submitting...","error":"An error occurred","tryAgain":"Try Again","close":"Close","confirm":"Confirm","cancel":"Cancel","yes":"Yes","no":"No"}}'),flows:JSON.parse('{"title":"Workflow Management","description":"Create and manage dynamic workflows for training, onboarding, assessments, and more.","create_new":"Create New Flow","create_first":"Create Your First Flow","edit_workflow":"Edit Workflow","create_workflow":"Create Workflow","editor_description":"Design your workflow by configuring phases and content items.","filter_type":"Filter by Type","filter_status":"Filter by Status","all_types":"All Types","all_statuses":"All Statuses","onboarding":"Onboarding","training":"Training","assessment":"Assessment","certification":"Certification","compliance":"Compliance","active":"Active","draft":"Draft","archived":"Archived","workflow_settings":"Workflow Settings","workflow_name":"Workflow Name","workflow_name_placeholder":"Enter a descriptive name for this workflow","workflow_name_set_in_wizard":"This name was set during the wizard and cannot be changed here","workflow_slug":"Workflow Slug","workflow_slug_placeholder":"URL-friendly identifier (auto-generated)","workflow_type":"Workflow Type","workflow_status":"Status","workflow_description":"Description","workflow_description_placeholder":"Describe the purpose and objectives of this workflow","phases":"Phases","phase":"Phase","add_phase":"Add Phase","add_first_phase":"Add Your First Phase","no_phases":"No phases added yet. Add your first phase to get started.","phase_name":"Phase Name","phase_type":"Phase Type","phase_description":"Phase Description","estimated_duration":"Estimated Duration (hours)","required_phase":"Required Phase","delete_phase_confirm":"Are you sure you want to delete this phase? This action cannot be undone.","phase_items":"Phase Content Items","item":"Item","add_item":"Add Item","add_first_item":"Add First Item","no_items":"No content items yet. Add your first item to get started.","untitled_item":"Untitled Item","item_title":"Item Title","item_type":"Item Type","delete_item_confirm":"Are you sure you want to delete this item?","content_text":"Content Text","content_placeholder":"Enter your content text here...","video_url":"Video URL","document_url":"Document URL","video":"Video","document":"Document","form_field":"Form Field","quiz_question":"Quiz Question","content":"Content","form":"Form","quiz":"Quiz","mixed":"Mixed Content","approval":"Approval Required","items":"Items","version":"Version","no_description":"No description provided","edit":"Edit","duplicate":"Duplicate","delete":"Delete","collapse":"Collapse","template":"Template","translate":"Translate","translate_workflow":"Translate Workflow","translating":"Translating...","translation_success":"Workflow translated successfully","translation_failed":"Failed to translate workflow","empty":{"title":"No workflows found","message":"Get started by creating your first workflow using our intuitive editor."},"access_denied":{"title":"Access Denied","message":"You don\'t have permission to access the Flows Editor. Contact your administrator for access."},"validation":{"name_required":"Workflow name is required","slug_required":"Workflow slug is required"},"create_success":"Workflow created successfully","create_failed":"Failed to create workflow","update_success":"Workflow updated successfully","update_failed":"Failed to update workflow","delete_success":"Workflow deleted successfully","delete_failed":"Failed to delete workflow","delete_confirm":"Are you sure you want to delete this workflow? This action cannot be undone.","load_failed":"Failed to load workflows","wizard":{"title":"Create New Workflow","step1":"Basic Info","step2":"Template","step3":"Review","basic_info":"Basic Information","basic_info_description":"Start by providing basic information about your workflow.","choose_template":"Choose Template","template_description":"Select a template to get started quickly, or choose blank to start from scratch.","review":"Review & Create","review_description":"Review your workflow configuration before creating it.","next":"Next","previous":"Previous","create_workflow":"Create Workflow"},"copy_suffix":"(Copy)","templates":{"blank":"Blank Workflow","blank_description":"Start with an empty workflow and build it from scratch.","onboarding":"Onboarding Template","onboarding_description":"Pre-configured workflow for new employee onboarding with welcome, training, and assessment phases.","training":"Training Template","training_description":"Structured training workflow with introduction, materials, exercises, and testing.","assessment":"Assessment Template","assessment_description":"Competency assessment workflow with pre-assessment, testing, and performance review."},"template_phases":{"welcome_introduction":"Welcome & Introduction","safety_training":"Safety Training","company_policies":"Company Policies","skills_assessment":"Skills Assessment","final_review":"Final Review","course_introduction":"Course Introduction","learning_materials":"Learning Materials","practical_exercises":"Practical Exercises","knowledge_test":"Knowledge Test","pre_assessment":"Pre-Assessment","competency_test":"Competency Test","performance_review":"Performance Review"},"pdf_output":{"pdf_output_configuration":"PDF Output Configuration","pdf_output_description":"Configure automatic PDF generation and delivery for this workflow","pdf_output_overview":"Overview","pdf_templates":"Templates","delivery_settings":"Delivery","pdf_output_enable":"Enable PDF Output","pdf_output_enable_description":"Automatically generate PDF documents when users complete quizzes or phases","configured_templates":"Configured Templates","quiz_triggers":"Quiz Triggers","email_delivery":"Email Delivery","enabled":"Enabled","disabled":"Disabled","no_pdf_templates_configured":"No PDF Templates Configured","add_pdf_template_description":"Add PDF templates to automatically generate certificates, reports, or forms when users complete this workflow","add_first_template":"Add Your First Template","pdf_template_associations":"PDF Template Associations","add_template":"Add Template","enable_pdf_output_first":"Enable PDF output in the Overview tab to configure templates","unknown_template":"Unknown Template","configure_mapping":"Configure Mapping","remove":"Remove","trigger_when":"Trigger When","quiz_completed":"Quiz Completed","phase_completed":"Phase Completed","workflow_completed":"Workflow Completed","manual_generation":"Manual Generation","enable_this_template":"Enable this template","data_fields_mapped":"Data fields mapped","fields":"fields","recipients":"Recipients","user":"User","manager":"Manager","hr":"HR Department","custom":"custom recipients","none":"None","email_delivery_description":"Automatically send generated PDFs via email to specified recipients","default_recipients":"Default Recipients","custom_recipients":"Custom Recipients","enter_email_address":"Enter email address...","browse_pdf_templates":"Browse PDF Templates","search_templates":"Search templates...","templates_available":"templates available","no_templates_available":"No Templates Available","no_templates_description":"No PDF templates are available for selection. Create templates first in the PDF Template Editor.","view_full_preview":"View Full Preview","preview_not_available":"Preview not available","loading_preview":"Loading preview...","template_type":"Template Type","page_format":"Page Format","available_fields":"Available Fields","created":"Created","unknown":"Unknown","template_fields":"Template Fields","select_template_to_preview":"Select a template to preview","select_template_description":"Choose a template from the list to see its preview and details.","document":"Document","template_added_successfully":"Template added successfully","failed_to_load_templates":"Failed to load templates","configure_data_mapping":"Configure Data Mapping","visual_mapping":"Visual Mapping","manual_mapping":"Manual Mapping","flow_data_fields":"Flow Data Fields","failed_to_load_template_fields":"Failed to load template fields","loading_template_fields":"Loading template fields...","template_field":"Template Field","flow_data_field":"Flow Data Field","actions":"Actions","select_flow_field":"Select flow field...","clear":"Clear","save_mapping":"Save Mapping","mapping_saved_successfully":"Mapping saved successfully","use_manual_mapping_for_now":"Use manual mapping tab for now","mapped_fields":"Mapped Fields","workflow":"Workflow","phases":"Phases","quiz":"Quiz Results"}}'),api:JSON.parse('{"errors":{"general":{"networkError":"Network error. Please check your connection.","serverError":"Server error. Please try again later.","unauthorized":"You are not authorized to perform this action.","sessionExpired":"Your session has expired. Please log in again.","notFound":"The requested resource was not found.","validationError":"Please check your input and try again.","timeout":"Request timed out. Please try again."},"auth":{"invalidCredentials":"Invalid email or password.","emailNotFound":"No account found with this email address.","passwordIncorrect":"Incorrect password.","accountDisabled":"Your account has been disabled.","magicLinkInvalid":"This login link is invalid or has expired.","magicLinkUsed":"This login link has already been used.","logoutFailed":"Failed to log out. Please try again."},"crew":{"createFailed":"Failed to create crew member.","updateFailed":"Failed to update crew member.","deleteFailed":"Failed to delete crew member.","notFound":"Crew member not found.","emailExists":"A crew member with this email already exists.","invalidData":"Invalid crew member data provided."},"manager":{"createFailed":"Failed to create manager.","updateFailed":"Failed to update manager.","deleteFailed":"Failed to delete manager.","notFound":"Manager not found.","emailExists":"A manager with this email already exists.","noPermission":"You don\'t have permission to manage other managers."},"training":{"sessionNotFound":"Training session not found.","itemNotFound":"Training item not found.","alreadyCompleted":"This training item is already completed.","notStarted":"Please start the training phase first.","completeFailed":"Failed to mark item as complete.","proofRequired":"Proof of completion is required for this item.","uploadFailed":"Failed to upload proof document."},"quiz":{"notAvailable":"Quiz is not available yet.","alreadyPassed":"You have already passed this quiz.","submitFailed":"Failed to submit quiz.","reviewFailed":"Failed to review quiz.","notFound":"Quiz not found.","invalidAnswers":"Invalid quiz answers provided.","incompleteTraining":"Please complete all training items before taking the quiz."},"certificates":{"generateFailed":"Failed to generate certificate.","notFound":"Certificate not found.","notEligible":"User is not eligible for certificate.","sendFailed":"Failed to send certificate email."},"email":{"sendFailed":"Failed to send email.","invalidAddress":"Invalid email address.","templateNotFound":"Email template not found.","attachmentFailed":"Failed to attach document."},"pdf":{"generateFailed":"Failed to generate PDF.","templateNotFound":"PDF template not found.","invalidData":"Invalid data for PDF generation."},"upload":{"failed":"Failed to upload file.","tooLarge":"File is too large. Maximum size is {{maxSize}}.","invalidType":"Invalid file type. Allowed types: {{allowedTypes}}.","noFile":"No file provided."}},"success":{"saved":"Changes saved successfully.","created":"Created successfully.","updated":"Updated successfully.","deleted":"Deleted successfully.","sent":"Sent successfully.","completed":"Completed successfully.","approved":"Approved successfully.","rejected":"Rejected successfully."}}'),errors:JSON.parse('{"network":{"connection_lost":"Connection lost. Please check your internet connection and try again.","slow_connection":"Your connection seems slow. This might take a moment longer than usual.","offline":"You appear to be offline. Please check your internet connection.","timeout":"The request is taking longer than expected. Please try again.","server_unreachable":"Unable to reach our servers. Please check your connection and try again."},"authentication":{"session_expired":"Your session has expired. Please log in again to continue.","session_expiring_soon":"Your session will expire in {{minutes}} minutes. Please save your work.","login_failed":"We couldn\'t log you in. Please check your credentials and try again.","login_link_expired":"This login link has expired. Please request a new one from the login page.","login_link_invalid":"This login link is not valid. Please request a new one from the login page.","access_denied":"You don\'t have permission to access this area. Contact your administrator if you need access.","token_invalid":"Your login session is no longer valid. Please log in again."},"onboarding":{"progress_save_failed":"We couldn\'t save your progress. Your work is safe, but please try again.","step_load_failed":"Unable to load this onboarding step. Please refresh the page and try again.","completion_failed":"We couldn\'t complete your onboarding. Please try again or contact support.","role_selection_failed":"Unable to save your role selection. Please try selecting your role again.","analytics_failed":"Progress tracking is temporarily unavailable, but your onboarding will continue normally."},"training":{"phase_load_failed":"Unable to load Phase {{phase}} training. Please refresh the page and try again.","item_load_failed":"This training item couldn\'t be loaded. Please try again or skip to the next item.","completion_failed":"We couldn\'t mark this training as complete. Please try again.","quiz_load_failed":"The quiz couldn\'t be loaded. Please refresh the page and try again.","quiz_submit_failed":"Your quiz answers couldn\'t be submitted. Please try again.","progress_sync_failed":"Your training progress couldn\'t be synchronized. Your work is saved locally."},"certificates":{"generation_failed":"Your certificate couldn\'t be generated right now. Please try again later.","download_failed":"Certificate download failed. Please try again or contact support.","not_eligible":"You\'re not yet eligible for this certificate. Complete all required training first."},"file_operations":{"upload_failed":"File upload failed. Please check your file and try again.","file_too_large":"This file is too large. Please choose a smaller file (max {{maxSize}}).","invalid_file_type":"This file type is not supported. Please choose a {{allowedTypes}} file.","download_failed":"File download failed. Please try again."},"form_validation":{"required_field":"This field is required.","invalid_email":"Please enter a valid email address.","password_too_short":"Password must be at least {{minLength}} characters long.","passwords_dont_match":"Passwords don\'t match.","invalid_date":"Please enter a valid date.","future_date_required":"Date must be in the future.","past_date_required":"Date must be in the past."},"server":{"internal_error":"Something went wrong on our end. Please try again in a few moments.","maintenance":"The system is temporarily under maintenance. Please try again later.","overloaded":"Our servers are busy right now. Please wait a moment and try again.","database_error":"There\'s a temporary issue with our database. Please try again shortly."},"recovery":{"refresh_page":"Try refreshing the page","check_connection":"Check your internet connection","try_again_later":"Try again in a few minutes","contact_support":"Contact support if the problem continues","save_work":"Save your work before trying again","restart_browser":"Try restarting your browser"},"maritime_specific":{"vessel_data_unavailable":"Vessel information is temporarily unavailable. Your training can continue.","crew_record_sync_failed":"Your crew record couldn\'t be synchronized. Changes are saved locally.","safety_protocol_load_failed":"Safety protocols couldn\'t be loaded. Please contact your safety officer.","compliance_check_failed":"Compliance verification is temporarily unavailable.","boarding_date_invalid":"Please enter a valid boarding date.","position_not_recognized":"This crew position is not recognized. Please contact HR."},"user_friendly":{"something_went_wrong":"Oops! Something didn\'t work as expected.","please_try_again":"Please try again.","working_on_it":"We\'re working on fixing this.","almost_there":"You\'re almost there! Just one more try.","technical_difficulties":"We\'re experiencing some technical difficulties.","back_soon":"Everything should be back to normal soon."},"actions":{"retry":"Try Again","refresh":"Refresh Page","go_back":"Go Back","contact_support":"Contact Support","skip":"Skip This Step","save_and_continue":"Save and Continue","try_later":"Try Later","report_problem":"Report Problem"},"help":{"what_happened":"What happened?","what_to_do":"What should I do?","need_help":"Need help?","common_solutions":"Common solutions:","still_stuck":"Still having trouble?","contact_info":"Contact your system administrator or IT support."}}'),feedback:JSON.parse('{"quick":{"how_was_experience":"How was your experience?","good_experience":"Good experience","okay_experience":"Okay experience","poor_experience":"Poor experience"},"detailed":{"open_detailed":"Detailed feedback","rate_experience":"Rate your experience","additional_comments":"Additional comments (optional)","comment_placeholder":"Tell us about your experience, any issues you encountered, or suggestions for improvement...","characters":"characters","context":"Context","submitting":"Submitting...","submit":"Submit Feedback"},"contexts":{"general":"General Feedback","training_completion":"Training Completion","quiz_completion":"Quiz Completion","offline_mode":"Offline Experience","error_recovery":"Error Recovery"},"validation":{"rating_or_comment_required":"Please provide either a rating or comment"},"errors":{"submission_failed":"Failed to submit feedback. Please try again."}}')},nl:{common:JSON.parse('{"navigation":{"dashboard":"Controlepaneel","profile":"Bemanningsrecord","logout":"Uitloggen","training":"Trainingsprogramma","quiz":"Beoordeling"},"translation":{"translateWorkflow":"Workflow Vertalen","translating":"Aan het vertalen...","multilingualContent":"Meertalige Inhoud","progress":"Vertaalvoortgang","noSourceContent":"Geen broninhoud om te vertalen","workflowTranslated":"Workflow vertaald naar {{count}} talen","failed":"Vertaling mislukt","success":"Vertaling succesvol","batchSuccess":"Batchvertaling voltooid voor {{count}} talen","batchFailed":"Batchvertaling mislukt","error":"Vertaalfout: {{error}}","noSourceText":"Geen brontekst om te vertalen","translatedBy":"Vertaald door {{method}}","maritimeEnhanced":"Maritiem Verbeterd","humanReviewed":"Menselijk Beoordeeld","confidence":"Vertrouwen","improve":"Verbeteren","markReviewed":"Markeren als Beoordeeld","markedReviewed":"Gemarkeerd als beoordeeld","aiTranslate":"AI Vertaling","translateAll":"Alles Vertalen","preview":"Vertaalvoorbeeld","notTranslated":"Niet vertaald","enterContent":"Inhoud invoeren..."},"buttons":{"continue":"Doorgaan","start":"Start","finish":"Voltooien","next":"Volgende","previous":"Vorige","save":"Opslaan","cancel":"Annuleren","submit":"Indienen","upload":"Uploaden","download":"Downloaden","retry":"Opnieuw proberen","review":"Beoordelen","approve":"Goedkeuren","reject":"Afwijzen","edit":"Bewerken","delete":"Verwijderen","view":"Bekijken","close":"Sluiten","confirm":"Bevestigen","back":"Terug","loading":"Laden...","locked":"Vergrendeld","take_quiz":"Neem Quiz","view_results":"Bekijk Resultaten","sync_now":"Nu Synchroniseren","back_to_dashboard":"Terug naar Controlepaneel"},"errors":{"generic":"Er is een fout opgetreden. Probeer opnieuw.","network":"Netwerkfout. Controleer uw verbinding.","unauthorized":"U bent niet geautoriseerd om deze actie uit te voeren.","not_found":"De gevraagde bron werd niet gevonden.","server_error":"Serverfout. Probeer later opnieuw.","connection_restored":"Verbinding hersteld! U bent weer online.","session_expired":"Uw sessie is verlopen. Log opnieuw in.","access_denied":"Toegang geweigerd. Neem contact op met uw beheerder indien nodig."},"mobile_warning":{"title":"Mobiel Apparaat Gedetecteerd","subtitle":"Deze pagina werkt het beste op desktop","desktop_required":"Deze editor vereist een desktopcomputer met een groter scherm voor de beste ervaring. Sommige functies werken mogelijk niet goed op mobiele apparaten.","desktop_recommended":"Hoewel deze pagina werkt op mobiel, raden we aan een desktopcomputer te gebruiken voor de beste ervaring.","limitations_title":"Mobiele Beperkingen:","limitation_1":"Beperkte slepen en neerzetten functionaliteit","limitation_2":"Kleinere werkruimte","limitation_3":"Uitdagingen met aanraaknavigatie","limitation_4":"Sommige functies werken mogelijk niet","proceed":"Toch Doorgaan","dismiss":"Ik Begrijp Het","help_text":"Voor de beste ervaring, gebruik alstublieft een computer met een schermbreedteminimum van 768px."},"profile":{"title":"Bemanningsrecord","my_profile":"Mijn Bemanningsrecord","personal_information":"Persoonlijke informatie en contactgegevens","personal_info":"Persoonlijke Informatie","contact_info":"Contactinformatie","work_info":"Werkinformatie","full_name":"Volledige Naam","email":"E-mailadres","email_address":"E-mailadres","phone":"Telefoonnummer","phone_number":"Telefoonnummer","role":"Rol","position":"Positie","vessel":"Scheepstoewijzing","boarding_date":"Verwachte Inschepingsdatum","emergency_contact":"Noodcontact","contact_name":"Contactnaam","contact_phone":"Contact Telefoon","vessel_assignment":"Scheepstoewijzing","start_date":"Startdatum","loading_profile":"Profiel laden...","preferences":"Voorkeuren","language_preference":"Taalvoorkeur","language_description":"Kies uw voorkeurstaal voor de interface en e-mailcommunicatie","language_updated":"Taalvoorkeur succesvol bijgewerkt","language_update_failed":"Fout bij bijwerken taalvoorkeur","updating_language":"Taalvoorkeur bijwerken"}}'),auth:JSON.parse('{"title":"\ud83d\udea2 Welkom bij Burando Maritime Training","subtitle":"Professioneel Maritiem Training Platform","tagline":"Nieuw op het platform? Voer uw e-mailadres in en we sturen u een veilige inloglink.","copyright":"\xa9 2024 Burando Maritime Services. Alle rechten voorbehouden.","login_methods":{"title":"Bemanning Toegang","subtitle":"Voer uw e-mailadres in om te beginnen met uw trainingsprogramma","magic_link":{"title":"Inloglink","description":"Voor bemanningsleden - veilige e-mail authenticatie","token_label":"Voer Uw Inlogcode In","token_placeholder":"Plak uw code hier...","help_title":"Hulp nodig?","help_text":"Controleer uw e-mail voor een uitnodiging van Burando Maritime. Klik op de veilige inloglink en uw code wordt automatisch ingevuld.","button":"Toegang met Inloglink","loading":"Inloglink Verifi\xebren..."},"request":{"title":"Aan de Slag","description":"Voer uw e-mailadres in en we sturen u een veilige inloglink","email_label":"Uw E-mailadres","email_placeholder":"Voer uw e-mailadres in","help_title":"Wat gebeurt er nu?","help_text":"U ontvangt binnen enkele ogenblikken een veilige inloglink via e-mail. Klik op de link om direct toegang te krijgen tot uw trainingsprogramma.","note":"Gebruik hetzelfde e-mailadres dat door uw manager is geregistreerd.","button":"Aan de Slag","loading":"Inloglink Verzenden...","alternative_text":"Heeft u al een inlogcode?","manual_token_button":"Inlogcode Invoeren","admin_button":"Systeembeheerder"},"token":{"title":"\ud83d\udce7 Heeft u een Inlogcode?","description":"Als uw e-maillink niet werkte, kunt u hieronder uw e-mail en inlogcode invoeren","email_label":"Uw E-mailadres","email_placeholder":"Voer uw e-mailadres in","token_label":"Inlogcode","token_placeholder":"Plak uw inlogcode hier (bijv. ABC123XYZ...)","button":"Doorgaan","loading":"Inlogcode Verifi\xebren...","back_button":"\u2190 Terug naar Aan de Slag"},"admin":{"title":"\u2699\ufe0f Systeembeheerder","description":"Alleen voor systeembeheerders","email_label":"Administrator E-mail","email_placeholder":"admin@shipdocs.app","password_label":"Administrator Wachtwoord","password_placeholder":"Voer beveiligd wachtwoord in","button":"Administrator Inloggen","loading":"Authenticeren...","security_notice":"\ud83d\udd12 Dit is een beveiligd administratief gebied. Alle toegangspogingen worden gelogd.","back_button":"\u2190 Terug naar Bemanning Inloggen"}},"messages":{"welcome_back":"Welkom terug, {{name}}!","welcome":"Welkom aan boord, {{name}}!","magic_link_expired":"Deze inlogcode is verlopen. Vraag een nieuwe aan.","magic_link_sent":"Inloglink verzonden! Controleer uw e-mail voor de veilige inloglink.","login_failed":"We konden u niet inloggen. Controleer uw e-mail voor een nieuwe inloglink.","invalid_credentials":"We konden u niet inloggen. Controleer uw e-mail voor een nieuwe inloglink.","token_required":"Inlogcode is verplicht","email_required":"E-mailadres is verplicht","password_required":"Wachtwoord is verplicht","network_error":"Verbindingsprobleem. Controleer uw internet en probeer opnieuw."},"validation":{"email_invalid":"Voer een geldig e-mailadres in","email_required":"E-mailadres is verplicht","token_required":"Inlogcode is verplicht","token_min_length":"Inlogcode moet minimaal 10 tekens bevatten","admin_email_required":"Administrator e-mail is verplicht","admin_password_required":"Administrator wachtwoord is verplicht","admin_password_min_length":"Wachtwoord moet minimaal 8 tekens bevatten"}}'),dashboard:JSON.parse('{"crew":{"welcome":"Welkom, {{name}}!","subtitle":"Ga verder met uw onboarding training reis","vessel":"Schip","position":"Positie","overall_progress":"Totale Voortgang","stats":{"phases_completed":"Fasen Voltooid","items_completed":"Items Voltooid","quizzes_passed":"Examens Geslaagd","status":"Status"},"training_phases":{"title":"Training Fasen","subtitle":"Voltooi elke fase in volgorde om vooruitgang te boeken","steps_label":"Stappen","quiz_label":"Examen","quiz_required":"Examen Vereist","quiz_passed":"Examen Geslaagd ({{score}}%)","quiz_failed":"Examen Gefaald ({{score}}%) - Herkansing Vereist","quiz_approved":"Examen Goedgekeurd ({{score}}%)","awaiting_review":"Wacht op Beoordeling ({{score}}%)","take_quiz":"Examen Maken","view_results":"Resultaten Bekijken","retake_quiz":"Examen Herkansen"},"next_steps":{"title":"Volgende Stappen","complete_training":"Voltooi uw huidige training fase","take_quiz":"Maak het examen voor Fase {{phase}}","wait_approval":"Wacht op manager goedkeuring van uw examenresultaten","all_complete":"Gefeliciteerd! U heeft alle training fasen voltooid."}},"manager":{"welcome":"Manager Dashboard","subtitle":"Beheer bemanning onboarding en trainingsvoortgang"}}'),training:JSON.parse('{"phase":"Fase","phases":{"phase1":{"title":"Directe Veiligheidstraining","description":"Essenti\xeble veiligheidstraining die binnen 24 uur na het aan boord gaan moet worden voltooid","time_limit":"24 uur"},"phase2":{"title":"Nautische Training","description":"Uitgebreide nautische procedures en scheepsoperaties training","time_limit":"72 uur"},"phase3":{"title":"Geavanceerde Veiligheid & Milieu","description":"Geavanceerde veiligheidsprotocollen en milieunaleving training","time_limit":"1 week"}},"items":{"meet_colleagues":"Collega\'s ontmoeten + dagelijkse zaken aan boord","safety_equipment":"Veiligheidsuitrusting en noodprocedures","fire_safety":"Brandveiligheid en brandbestrijdingsapparatuur","emergency_procedures":"Noodprocedures en verzamelplaatsen","personal_protective":"Persoonlijke beschermingsmiddelen (PBM)","vessel_layout":"Scheepsindeling en verboden gebieden","communication":"Communicatieprocedures en protocollen","environmental":"Milieubeschermingsprocedures","cargo_operations":"Ladingoperaties en veiligheid","navigation":"Navigatie en brugprocedures","engine_room":"Machinekamerveiligheid en procedures","maintenance":"Onderhoud en reparatieprocedures"},"categories":{"orientation":"Ori\xebntatie","safety":"Veiligheid","emergency":"Noodprocedures","equipment":"Uitrusting","procedures":"Procedures","environmental":"Milieu","navigation":"Navigatie","maintenance":"Onderhoud"},"instructions":{"read_carefully":"Lees de volgende informatie zorgvuldig door","complete_all":"Voltooi alle trainingsonderdelen in deze fase","take_photos":"Maak foto\'s als bewijs van voltooiing waar vereist","ask_questions":"Vraag uw supervisor als u vragen heeft","safety_first":"Veiligheid is onze topprioriteit - sla nooit veiligheidsprocedures over"},"completion":{"item_completed":"Trainingsonderdeel voltooid","phase_completed":"Fase succesvol voltooid","all_completed":"Alle trainingsfasen voltooid","certificate_ready":"Certificaat klaar voor download","instructor_signature":"Instructeur handtekening vereist","photo_required":"Fotobewijs vereist"},"navigation":{"previous_item":"Vorig Onderdeel","next_item":"Volgend Onderdeel","back_to_phase":"Terug naar Fase Overzicht","mark_complete":"Markeren als Voltooid","undo_complete":"Voltooiing Ongedaan Maken"},"ui":{"time_spent":"Tijd Besteed","minutes":"minuten","start_training":"Training Starten","continue_training":"Training Voortzetten","phase_complete":"Fase Voltooid","take_quiz_now":"Examen Nu Maken","back_to_dashboard":"Terug naar Dashboard","congratulations":"Gefeliciteerd!","phase_completed_message":"U heeft deze trainingsfase succesvol voltooid.","ready_for_quiz":"U bent nu klaar om het examen voor deze fase te maken."}}'),quiz:JSON.parse('{"title":"Fase {{phase}} Beoordeling","instructions":{"title":"Examen Instructies","read_carefully":"Lees alle vragen zorgvuldig door voordat u antwoordt","time_limit":"Tijdslimiet: {{minutes}} minuten","passing_score":"Slagingspercentage: {{score}}%","single_attempt":"U heeft \xe9\xe9n poging per examensessie","save_progress":"Uw voortgang wordt automatisch opgeslagen","review_answers":"Controleer uw antwoorden voordat u indient","no_going_back":"U kunt antwoorden niet wijzigen na indiening"},"question_types":{"multiple_choice":"Meerkeuzevraag","true_false":"Waar/Onwaar","file_upload":"Bestand Uploaden","short_answer":"Kort Antwoord","drag_drop":"Slepen en Neerzetten","fill_gaps":"Invullen van Gaten"},"navigation":{"question_progress":"Vraag {{current}} van {{total}}","previous_question":"Vorige Vraag","next_question":"Volgende Vraag","submit_quiz":"Examen Indienen","review_quiz":"Examen Controleren","start_quiz":"Examen Starten","retake_quiz":"Examen Herkansen","ready_to_begin":"Klaar om te Beginnen?","time_limit_label":"Tijdslimiet","questions_label":"Vragen","passing_score_label":"Slagingspercentage","questions_count":"{{count}} vragen"},"file_upload":{"instructions":"Upload een duidelijke foto van de vereiste veiligheidsuitrusting","drag_drop":"Sleep uw bestand hierheen, of klik om te bladeren","file_types":"Geaccepteerde bestandstypen: JPG, PNG, PDF","max_size":"Maximale bestandsgrootte: {{size}}MB","upload_success":"Bestand succesvol ge\xfcpload","upload_error":"Upload mislukt. Probeer het opnieuw.","remove_file":"Bestand verwijderen"},"results":{"quiz_completed":"Examen Voltooid","your_score":"Uw Score: {{score}}%","passing_score":"Slagingspercentage: {{required}}%","result_passed":"Gefeliciteerd! U bent geslaagd voor het examen.","result_failed":"U heeft het slagingspercentage niet behaald. Bekijk het trainingsmateriaal en herkans het examen.","pending_review":"Uw examen wacht op manager beoordeling.","approved":"Uw examen is goedgekeurd door het management.","rejected":"Uw examen is niet goedgekeurd. Herkans het examen.","time_taken":"Tijd gebruikt: {{time}}","questions_correct":"{{correct}} van {{total}} vragen correct","view_answers":"Gedetailleerde Resultaten Bekijken","download_certificate":"Certificaat Downloaden"},"validation":{"answer_required":"Geef een antwoord op deze vraag","file_required":"Upload een bestand voor deze vraag","invalid_file_type":"Ongeldig bestandstype. Upload alleen JPG, PNG, of PDF bestanden.","file_too_large":"Bestandsgrootte overschrijdt de maximumlimiet van {{size}}MB","text_too_short":"Antwoord moet minimaal {{min}} tekens lang zijn","text_too_long":"Antwoord mag niet meer dan {{max}} tekens bevatten"},"safety_equipment":{"fire_extinguisher":"Brandblusser","life_jacket":"Reddingsvest","emergency_alarm":"Noodalarm","first_aid_kit":"EHBO-kit","emergency_exit":"Nooduitgang","muster_station":"Verzamelplaats","safety_shower":"Veiligheidsdouche","eye_wash_station":"Oogspoelapparaat"},"common_answers":{"yes":"Ja","no":"Nee","true":"Waar","false":"Onwaar","correct":"Correct","incorrect":"Incorrect","not_answered":"Niet beantwoord"},"offline":{"mode_active":"Offline Modus","pending_sync":"Wordt Gesynchroniseerd","progress_restored":"Quiz voortgang hersteld uit offline opslag","now_offline":"U bent nu offline. Uw voortgang wordt lokaal opgeslagen.","back_online_will_sync":"Weer online! Uw quiz wordt automatisch gesynchroniseerd.","saved_will_sync":"Quiz offline voltooid. Resultaten worden gesynchroniseerd wanneer verbinding is hersteld.","save_failed":"Kon quiz niet offline opslaan. Probeer opnieuw."}}'),admin:JSON.parse('{"dashboard":{"title":"Beheerder Dashboard","tabs":{"overview":"Overzicht","managers":"Manager Beheer","templates":"PDF Sjablonen","content":"Inhoudsbeheer","settings":"Systeeminstellingen","audit":"Auditlog"},"stats":{"managers":"Totaal Managers","crew":"Totaal Bemanningsleden","sessions":"Actieve Sessies","health":"Systeemgezondheid"},"sections":{"managers":{"title":"Manager Accounts","description":"Beheer manager accounts en machtigingen","add":"Manager Toevoegen","active":"Actief","inactive":"Inactief"},"templates":{"title":"PDF Sjablonen","description":"Beheer certificaat en document sjablonen","create":"Sjabloon Maken","empty":"Geen sjablonen","emptyDescription":"Begin met het maken van uw eerste PDF sjabloon."},"content":{"title":"Inhoudsbeheer","description":"Training & Examens Bewerken","redirecting":"Doorverwijzen naar Inhoudsbeheer..."},"audit":{"view":"Activiteit Bekijken","title":"Systeem Audit Log","description":"Volg alle administratieve acties en systeemgebeurtenissen","loading":"Audit logs laden...","failed":"Fout bij laden audit logs","tryAgain":"Probeer Opnieuw","filters":"Filters","refresh":"Vernieuwen","action":"Actie","allActions":"Alle Acties","resourceType":"Bron Type","fromDate":"Van Datum","toDate":"Tot Datum","clearFilters":"Filters Wissen","noLogs":"Geen audit logs gevonden","noLogsDescription":"Geen audit log items voldoen aan uw huidige filters.","viewDetails":"Bekijk Details","previous":"Vorige","next":"Volgende","showing":"Toont","to":"tot","of":"van","results":"resultaten","page":"Pagina {{page}} van {{totalPages}}","actions":{"adminLogin":"Admin Inlog","managerLogin":"Manager Inlog","crewLogin":"Bemanning Inlog","userCreated":"Gebruiker Aangemaakt","userUpdated":"Gebruiker Bijgewerkt","userDeleted":"Gebruiker Verwijderd","emailSent":"E-mail Verzonden","certificateGenerated":"Certificaat Gegenereerd"},"resourceTypes":{"admin":"Admin","manager":"Manager","crew":"Bemanning","template":"Sjabloon","email":"E-mail"}}},"actions":{"deactivate":"Manager deactiveren","activate":"Manager activeren","sendMagicLink":"Magische login link versturen","resendWelcomeEmail":"Welkomst e-mail opnieuw versturen","edit":"Manager bewerken","delete":"Manager verwijderen"},"tooltips":{"deactivateManager":"Dit manager account deactiveren en toegang intrekken","activateManager":"Dit manager account activeren en toegang verlenen","sendMagicLink":"Beveiligde inloglink versturen naar e-mail van deze manager (3 uur geldig)","resendWelcomeEmail":"Welkomst e-mail opnieuw versturen met nieuw wachtwoord en manager handleiding (respecteert huidige taalvoorkeur)","editManager":"Manager account details, rechten en instellingen bewerken","deleteManager":"Dit manager account permanent verwijderen (kan niet ongedaan worden gemaakt)"},"messages":{"loadFailed":"Fout bij laden dashboard gegevens","managerActivated":"Manager {{name}} succesvol geactiveerd","managerDeactivated":"Manager {{name}} succesvol gedeactiveerd","statusUpdateFailed":"Fout bij bijwerken manager status","magicLinkSent":"Magische link verstuurd naar {{name}}","magicLinkFailed":"Fout bij versturen magische link","welcomeEmailResent":"Welkomst e-mail met nieuwe inloggegevens verstuurd naar {{name}}","welcomeEmailFailed":"Fout bij versturen welkomst e-mail","deleteConfirm":"Weet u zeker dat u manager \\"{{name}}\\" wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","managerDeleted":"Manager succesvol verwijderd","deleteFailed":"Fout bij verwijderen manager","templateDeleteConfirm":"Weet u zeker dat u sjabloon \\"{{name}}\\" wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","templateDeleted":"Sjabloon succesvol verwijderd","templateDeleteFailed":"Fout bij verwijderen sjabloon"}},"settings":{"title":"Systeeminstellingen","description":"Configureer globale applicatie instellingen en voorkeuren","categories":{"application":"Applicatie","email":"E-mail","security":"Beveiliging","training":"Training","notifications":"Meldingen"},"descriptions":{"application":"Algemene applicatie instellingen","email":"E-mail configuratie en meldingen","security":"Beveiliging en authenticatie instellingen","training":"Training en certificering instellingen","notifications":"Melding voorkeuren"},"actions":{"save":"Wijzigingen Opslaan","saving":"Opslaan...","refresh":"Vernieuwen","reset":"Herstel naar Standaard","unsaved_changes":"Niet opgeslagen wijzigingen"},"messages":{"loading":"Systeeminstellingen laden...","load_failed":"Fout bij laden systeeminstellingen","try_again":"Probeer Opnieuw","reset_confirm":"Weet u zeker dat u {{category}} instellingen wilt herstellen naar standaard? Dit kan niet ongedaan worden gemaakt.","reset_all_confirm":"Weet u zeker dat u alle instellingen wilt herstellen naar standaard? Dit kan niet ongedaan worden gemaakt."},"email":{"provider_title":"E-mail Service Provider","provider_description":"Kies uw e-mail service provider. Alleen relevante instellingen worden hieronder getoond.","smtp_title":"SMTP","smtp_description":"ProtonMail, Gmail, etc.","mailersend_title":"MailerSend","mailersend_description":"Transactionele E-mail API"},"empty":{"title":"Geen instellingen gevonden","message":"Er zijn geen instellingen beschikbaar voor deze categorie."}},"certificates":{"title":"Certificaten","description":"Beheer bemanning certificaten en documentatie","loading":"Certificaten laden...","error":"Fout bij Laden Certificaten","failed":"Fout bij laden certificaten","tryAgain":"Probeer Opnieuw","search":"Zoek certificaten...","refresh":"Vernieuwen","noFound":"Geen Certificaten Gevonden","noFoundDescription":"Geen certificaten voldoen aan uw huidige filters.","filters":{"allTypes":"Alle Types","onboardingTraining":"Onboarding Training","introKapitein":"Intro Kapitein"},"table":{"type":"Type","crewMember":"Bemanningslid","issueDate":"Uitgiftedatum","expiryDate":"Vervaldatum","status":"Status","actions":"Acties"},"status":{"noExpiry":"Geen Vervaldatum","expired":"Verlopen","expiringSoon":"Verloopt Binnenkort","valid":"Geldig","unverified":"Niet Geverifieerd","verified":"Geverifieerd","notVerified":"Niet Geverifieerd"},"details":{"title":"Certificaat Details","crewInfo":"Bemanningslid Informatie","name":"Naam","email":"E-mail","position":"Positie","vessel":"Schip Toewijzing","editTitle":"Certificaat Details Bewerken","certificateType":"Certificaat Type","certificateNumber":"Certificaatnummer","issueDate":"Uitgiftedatum","expiryDate":"Vervaldatum","issuingAuthority":"Uitgevende Instantie","verified":"Geverifieerd","cancel":"Annuleren","saveChanges":"Wijzigingen Opslaan","metadata":"Certificaat Metadata","generatedBy":"Gegenereerd Door","generatedAt":"Gegenereerd Op","lastUpdated":"Laatst Bijgewerkt","updatedBy":"Bijgewerkt Door","templateUsed":"Gebruikte Sjabloon","version":"Versie","fileSize":"Bestandsgrootte","downloadCount":"Download Aantal","editDetails":"Details Bewerken","download":"Certificaat Downloaden","regenerateConfirm":"Bevestig regeneratie?","regenerateDescription":"Dit zal een nieuw certificaatbestand aanmaken. Het bestaande certificaat wordt vervangen.","regenerate":"Certificaat Regenereren","deleteConfirm":"Bevestig verwijdering?","deleteDescription":"Deze actie kan niet ongedaan worden gemaakt. Het certificaat en alle gegevens worden permanent verwijderd.","delete":"Certificaat Verwijderen"},"messages":{"updated":"Certificaat succesvol bijgewerkt","updateFailed":"Fout bij bijwerken certificaat: {{error}}","deleted":"Certificaat succesvol verwijderd","deleteFailed":"Fout bij verwijderen certificaat: {{error}}","regenerated":"Certificaat succesvol geregenereerd","regenerateFailed":"Fout bij regenereren certificaat: {{error}}"},"pagination":{"previous":"Vorige","next":"Volgende","showing":"Toont","to":"tot","of":"van","results":"resultaten"}}}'),manager:JSON.parse('{"dashboard":{"title":"Manager Dashboard","sections":{"crew":{"title":"Bemanningsleden","description":"Beheer uw bemanningsrooster en onboarding status","refresh":"Vernieuwen","add":"Bemanningslid Toevoegen","search":"Zoek bemanningsleden...","selected":"{{count}} geselecteerd"},"quizReviews":{"title":"Wachtende Examen Beoordelingen","description":"Beoordeel en keur exameninzendingen van bemanningsleden goed","empty":"Geen Wachtende Beoordelingen","emptyDescription":"Alle exameninzendingen zijn beoordeeld."},"onboardingReviews":{"title":"Complete Onboarding Beoordelingen","description":"Beoordeel volledige trainingsvoortgang en keur definitieve onboarding goed","empty":"Geen Wachtende Beoordelingen","emptyDescription":"Geen bemanningsleden klaar voor definitieve onboarding goedkeuring."},"compliance":{"trainingProgress":"Trainingsvoortgang per Positie","sessionsCompleted":"{{count}} trainingssessies voltooid deze week","lastUpdated":"Laatst bijgewerkt: {{date}}","quizReviewsPending":"{{count}} examenbeoordelingen wachten op uw goedkeuring","requiresAttention":"Vereist onmiddellijke aandacht","certificatesIssued":"{{count}} certificaten uitgegeven deze maand","certificatesDistributed":"Alle certificaten automatisch verspreid"}},"filters":{"allStatus":"Alle Status","notStarted":"Niet Gestart","inProgress":"Bezig","formsCompleted":"Formulieren Voltooid","trainingCompleted":"Training Voltooid","fullyCompleted":"Volledig Voltooid","suspended":"Opgeschort"},"table":{"headers":{"name":"Naam","position":"Positie","vessel":"Schip","boardingDate":"Instapdag","status":"Status","actions":"Acties"}},"status":{"notStarted":"Niet Gestart","inProgress":"Bezig","formsCompleted":"Formulieren Voltooid","trainingCompleted":"Training Voltooid","fullyCompleted":"Volledig Voltooid","suspended":"Opgeschort"},"actions":{"view":"Bekijk bemanningslid details","sendMagicLink":"Verstuur magische link","sendSafetyPdf":"Verstuur Veiligheidsmanagement PDF","sendOnboardingEmail":"Verstuur Onboarding Start Email","edit":"Bewerk bemanningslid","delete":"Verwijder bemanningslid","approve":"Keur examen goed","reject":"Wijs examen af","approveOnboarding":"Keur Volledige Onboarding Goed"},"tooltips":{"viewCrewMember":"Bekijk gedetailleerde bemanningslid informatie, trainingsvoortgang en voltooiingsstatus","sendMagicLink":"Verstuur beveiligde inloglink naar e-mail van bemanningslid voor trainingstoegang (3 uur geldig)","sendSafetyPDF":"Verstuur het complete Safety Management System (SMS) PDF document naar bemanningslid","sendOnboardingStart":"Verstuur welkomst e-mail om officieel het onboarding trainingsproces te starten","resendCompletionEmail":"Verstuur voltooiingscertificaat en felicitatie e-mail opnieuw naar volledig getraind bemanningslid","editCrewMember":"Bewerk bemanningslid details, positie, scheepstoewijzing en andere profielinformatie","deleteCrewMember":"Verwijder dit bemanningslid permanent uit het systeem (kan niet ongedaan worden gemaakt)"},"quiz":{"passed":"Geslaagd","failed":"Gefaald","requiresReview":"Examen vereist beoordeling"},"certificates":{"issued":"Certificaten Uitgegeven"},"bulk":{"selectFirst":"Selecteer eerst bemanningsleden"},"messages":{"crewCreated":"Bemanningslid succesvol aangemaakt","crewCreateFailed":"Fout bij aanmaken bemanningslid","magicLinkSent":"Magische link succesvol verstuurd","magicLinkFailed":"Fout bij versturen magische link","crewUpdated":"Bemanningslid succesvol bijgewerkt","crewUpdateFailed":"Fout bij bijwerken bemanningslid","crewDeleted":"Bemanningslid succesvol verwijderd","crewDeleteFailed":"Fout bij verwijderen bemanningslid","quizReviewed":"Examenbeoordeling succesvol voltooid","quizReviewFailed":"Fout bij beoordelen examen","onboardingApproved":"Onboarding goedgekeurd en certificaat verstuurd","onboardingApproveFailed":"Fout bij goedkeuren onboarding","safetyPdfSent":"Veiligheidsmanagement PDF succesvol verstuurd","safetyPdfFailed":"Fout bij versturen Veiligheids PDF: {{error}}","onboardingEmailSent":"Onboarding Start email succesvol verstuurd","onboardingEmailFailed":"Fout bij versturen Onboarding Start email: {{error}}","deleteConfirm":"Weet u zeker dat u {{name}} wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","bulkDeleteConfirm":"Weet u zeker dat u {{count}} bemanningslid(en) wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","approveOnboardingConfirm":"Weet u zeker dat u de volledige onboarding van dit bemanningslid wilt goedkeuren? Dit zal hun voltooiingscertificaat genereren en versturen."},"contentManagement":"Inhoudsbeheer","stats":{"total_crew":"Totaal Bemanning","pending_reviews":"Wachtende Beoordelingen","in_progress":"Bezig","not_started":"Niet Gestart"}}}'),crew:JSON.parse('{"dashboard":{"title":"Bemanning Dashboard","welcome":"Welkom terug, {{name}}!","sections":{"profile":{"title":"Uw Profiel","description":"Bekijk en werk uw persoonlijke informatie bij","view":"Bekijk Profiel"},"trainingProgress":{"title":"Trainingsvoortgang","description":"Voltooi uw onboarding trainingsfases","phase":"Fase {{number}}","currentPhase":"Huidige Fase","completedPhase":"Voltooide Fase","upcomingPhase":"Komende Fase","dueDate":"Deadline: {{date}}","overdue":"Achterstallig","startTraining":"Start Training","continueTraining":"Ga Door met Training","viewTraining":"Bekijk Training","takeQuiz":"Doe Examen","quizPassed":"Examen Geslaagd","quizFailed":"Examen Gefaald - Herkansing Vereist","awaitingReview":"Examen Ingediend - Wacht op Beoordeling","itemsCompleted":"{{completed}} van {{total}} items voltooid"},"quizHistory":{"title":"Examengeschiedenis","phase":"Fase {{number}} Examen","score":"Score: {{score}}/{{total}}","passed":"Geslaagd","failed":"Gefaald","pending":"In Beoordeling","rejected":"Afgekeurd - Doe Opnieuw","retake":"Herkans Examen","feedback":"Manager Feedback"},"forms":{"title":"Vereiste Formulieren","description":"Vul de vereiste onboarding formulieren in en dien ze in","notStarted":"Niet Gestart","inProgress":"Bezig","completed":"Voltooid","complete":"Vul Formulieren In","review":"Bekijk Formulieren"}},"status":{"notStarted":"Niet Gestart","inProgress":"Bezig","formsCompleted":"Formulieren Voltooid","trainingCompleted":"Training Voltooid","fullyCompleted":"Volledig Voltooid","suspended":"Account Opgeschort"},"messages":{"noActiveSession":"Geen actieve trainingssessie gevonden","quizNotAvailable":"Examen nog niet beschikbaar. Voltooi eerst alle trainingsitems.","trainingCompleted":"Gefeliciteerd! U heeft alle trainingsfases voltooid.","certificateIssued":"Uw voltooiingscertificaat is uitgegeven.","contactManager":"Neem contact op met uw manager als u vragen heeft."}},"training":{"phase":"Fase {{number}}: {{title}}","progress":"Voortgang: {{percentage}}%","item":"Item {{number}}","markComplete":"Markeer als Voltooid","uploadProof":"Upload Bewijs","proofRequired":"Bewijs van voltooiing vereist","proofUploaded":"Bewijs ge\xfcpload","completed":"Voltooid","nextItem":"Volgend Item","previousItem":"Vorig Item","backToOverview":"Terug naar Overzicht","completePhase":"Voltooi Fase","phaseCompleted":"Fase Voltooid!","proceedToQuiz":"Ga door naar Examen","messages":{"itemCompleted":"Trainingsitem succesvol voltooid","itemCompleteFailed":"Fout bij voltooien trainingsitem","proofUploaded":"Bewijs succesvol ge\xfcpload","proofUploadFailed":"Fout bij uploaden bewijs","phaseCompleted":"Fase {{number}} succesvol voltooid!","allItemsRequired":"Voltooi alle trainingsitems voordat u het examen doet"}},"quiz":{"title":"Fase {{number}} Examen","instructions":"Beantwoord alle vragen zorgvuldig. U moet minimaal {{passingScore}}% scoren om te slagen.","question":"Vraag {{current}} van {{total}}","submit":"Dien Examen In","submitting":"Indienen...","confirmSubmit":"Weet u zeker dat u uw examen wilt indienen? U kunt uw antwoorden niet meer wijzigen na indiening.","results":{"title":"Examenresultaten","score":"Uw Score: {{score}}/{{total}} ({{percentage}}%)","passed":"Gefeliciteerd! U bent geslaagd voor het examen.","failed":"Helaas bent u niet geslaagd. Bekijk het materiaal en probeer het opnieuw.","pending":"Uw examen is ingediend voor handmatige beoordeling. U wordt ge\xefnformeerd zodra het is beoordeeld.","reviewFeedback":"Manager Feedback: {{feedback}}"},"messages":{"submitted":"Examen succesvol ingediend","submitFailed":"Fout bij indienen examen","loadFailed":"Fout bij laden examenvragen","answerRequired":"Beantwoord alle vragen voordat u indient"}},"forms":{"title":"Onboarding Formulieren","personal":{"title":"Persoonlijke Informatie","firstName":"Voornaam","lastName":"Achternaam","email":"E-mailadres","phone":"Telefoonnummer","address":"Huisadres","dateOfBirth":"Geboortedatum","nationality":"Nationaliteit","passportNumber":"Paspoortnummer","seamanBookNumber":"Monsterboekje Nummer"},"emergency":{"title":"Noodcontact","name":"Naam Contact","relationship":"Relatie","phone":"Telefoon Contact","email":"E-mail Contact","address":"Adres Contact"},"medical":{"title":"Medische Informatie","bloodType":"Bloedgroep","allergies":"Allergie\xebn","medications":"Huidige Medicatie","conditions":"Medische Aandoeningen","doctorName":"Naam Huisarts","doctorPhone":"Telefoon Huisarts"},"banking":{"title":"Bankinformatie","bankName":"Banknaam","accountNumber":"Rekeningnummer","iban":"IBAN","swiftCode":"SWIFT/BIC Code"},"actions":{"save":"Bewaar Voortgang","submit":"Dien Formulieren In","edit":"Bewerk Formulieren","download":"Download Kopie"},"messages":{"saved":"Formulieren succesvol opgeslagen","submitted":"Formulieren succesvol ingediend","saveFailed":"Fout bij opslaan formulieren","submitFailed":"Fout bij indienen formulieren","allFieldsRequired":"Vul alle verplichte velden in","confirmSubmit":"Weet u zeker dat u uw formulieren wilt indienen? U kunt ze niet meer bewerken na indiening."}}}'),forms:JSON.parse('{"selectPosition":"Selecteer positie","addManager":{"title":"Nieuwe Manager Toevoegen","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","phone":"Telefoonnummer (optioneel)","company":"Bedrijf","preferredLanguage":"Voorkeurstaal","permissions":"Machtigingen"},"permissionOptions":{"crew_manage":"Bemanningsleden beheren","quiz_review":"Examens beoordelen en goedkeuren","onboarding_approve":"Definitieve onboarding goedkeuren","certificates_view":"Certificaten bekijken","certificates_download":"Certificaten downloaden","certificates_regenerate":"Certificaten opnieuw genereren","content_edit":"Trainingsinhoud bewerken"},"actions":{"create":"Manager Aanmaken","cancel":"Annuleren"},"messages":{"success":"Manager succesvol aangemaakt","error":"Fout bij aanmaken manager"}},"editManager":{"title":"Manager Bewerken","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","phone":"Telefoonnummer","company":"Bedrijf","preferredLanguage":"Voorkeurstaal","permissions":"Machtigingen","isActive":"Actieve Status"},"activeOptions":{"active":"Actief","inactive":"Inactief"},"actions":{"save":"Wijzigingen Opslaan","cancel":"Annuleren"},"messages":{"success":"Manager succesvol bijgewerkt","error":"Fout bij bijwerken manager"}},"addCrewMember":{"title":"Nieuw Bemanningslid Toevoegen","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","position":"Positie","vesselAssignment":"Schip Toewijzing","expectedBoardingDate":"Verwachte Instapdag","contactPhone":"Contact Telefoon","emergencyContactName":"Naam Noodcontact","emergencyContactPhone":"Telefoon Noodcontact","preferredLanguage":"Voorkeurstaal"},"actions":{"create":"Bemanningslid Aanmaken","cancel":"Annuleren"},"messages":{"success":"Bemanningslid succesvol aangemaakt","error":"Fout bij aanmaken bemanningslid"}},"editCrewMember":{"title":"Bemanningslid Bewerken","fields":{"email":"E-mailadres","firstName":"Voornaam","lastName":"Achternaam","position":"Positie","vesselAssignment":"Schip Toewijzing","expectedBoardingDate":"Verwachte Instapdag","contactPhone":"Contact Telefoon","emergencyContactName":"Naam Noodcontact","emergencyContactPhone":"Telefoon Noodcontact","preferredLanguage":"Voorkeurstaal","isActive":"Actieve Status"},"actions":{"save":"Wijzigingen Opslaan","cancel":"Annuleren"},"messages":{"success":"Bemanningslid succesvol bijgewerkt","error":"Fout bij bijwerken bemanningslid"}},"quizReview":{"title":"Beoordeel Exameninzending","submittedBy":"Ingediend door: {{name}}","phase":"Fase {{number}} Examen","score":"Score: {{score}}/{{total}} ({{percentage}}%)","submittedAt":"Ingediend: {{date}}","question":"Vraag {{number}}","userAnswer":"Antwoord Gebruiker","correctAnswer":"Correct Antwoord","correct":"Correct","incorrect":"Incorrect","feedback":{"title":"Manager Feedback","placeholder":"Geef feedback voor het bemanningslid (optioneel)"},"actions":{"approve":"Keur Examen Goed","reject":"Wijs Examen Af","cancel":"Annuleren"},"messages":{"approveConfirm":"Weet u zeker dat u dit examen wilt goedkeuren?","rejectConfirm":"Weet u zeker dat u dit examen wilt afwijzen? Het bemanningslid moet het opnieuw doen.","approved":"Examen succesvol goedgekeurd","rejected":"Examen succesvol afgekeurd","error":"Fout bij verwerken examenbeoordeling"}},"onboardingReview":{"title":"Beoordeel Volledige Onboarding","crewMember":"Bemanningslid: {{name}}","position":"Positie: {{position}}","vessel":"Schip: {{vessel}}","summary":{"title":"Trainingssamenvatting","formsCompleted":"Formulieren: Voltooid","phase":"Fase {{number}}","status":"Status: {{status}}","quizScore":"Examen: {{score}}/{{total}}","completedAt":"Voltooid: {{date}}"},"actions":{"approve":"Keur Goed & Geef Certificaat Uit","reject":"Vraag Extra Training Aan","cancel":"Annuleren"},"messages":{"approveConfirm":"Weet u zeker dat u de onboarding van dit bemanningslid wilt goedkeuren? Dit zal hun voltooiingscertificaat uitgeven.","approved":"Onboarding goedgekeurd en certificaat uitgegeven","error":"Fout bij verwerken onboarding beoordeling"}},"common":{"required":"Verplicht","optional":"Optioneel","loading":"Laden...","saving":"Opslaan...","submitting":"Indienen...","error":"Er is een fout opgetreden","tryAgain":"Probeer Opnieuw","close":"Sluiten","confirm":"Bevestigen","cancel":"Annuleren","yes":"Ja","no":"Nee"}}'),flows:JSON.parse('{"title":"Workflow Beheer","description":"Maak en beheer dynamische workflows voor training, onboarding, beoordelingen en meer.","create_new":"Nieuwe Flow Maken","create_first":"Maak Je Eerste Flow","edit_workflow":"Workflow Bewerken","create_workflow":"Workflow Maken","editor_description":"Ontwerp je workflow door fasen en content-items te configureren.","filter_type":"Filter op Type","filter_status":"Filter op Status","all_types":"Alle Types","all_statuses":"Alle Statussen","onboarding":"Onboarding","training":"Training","assessment":"Beoordeling","certification":"Certificering","compliance":"Compliance","active":"Actief","draft":"Concept","archived":"Gearchiveerd","workflow_settings":"Workflow Instellingen","workflow_name":"Workflow Naam","workflow_name_placeholder":"Voer een beschrijvende naam in voor deze workflow","workflow_name_set_in_wizard":"Deze naam is ingesteld tijdens de wizard en kan niet hier worden gewijzigd","workflow_slug":"Workflow Slug","workflow_slug_placeholder":"URL-vriendelijke identifier (automatisch gegenereerd)","workflow_type":"Workflow Type","workflow_status":"Status","workflow_description":"Beschrijving","workflow_description_placeholder":"Beschrijf het doel en de doelstellingen van deze workflow","phases":"Fasen","phase":"Fase","add_phase":"Fase Toevoegen","add_first_phase":"Voeg Je Eerste Fase Toe","no_phases":"Nog geen fasen toegevoegd. Voeg je eerste fase toe om te beginnen.","phase_name":"Fase Naam","phase_type":"Fase Type","phase_description":"Fase Beschrijving","estimated_duration":"Geschatte Duur (uren)","required_phase":"Verplichte Fase","delete_phase_confirm":"Weet je zeker dat je deze fase wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","phase_items":"Fase Inhoud Items","item":"Item","add_item":"Item Toevoegen","add_first_item":"Eerste Item Toevoegen","no_items":"Nog geen inhoud items. Voeg je eerste item toe om te beginnen.","untitled_item":"Naamloos Item","item_title":"Item Titel","item_type":"Item Type","delete_item_confirm":"Weet je zeker dat je dit item wilt verwijderen?","content_text":"Inhoud Tekst","content_placeholder":"Voer hier je inhoud tekst in...","video_url":"Video URL","document_url":"Document URL","video":"Video","document":"Document","form_field":"Formulier Veld","quiz_question":"Quiz Vraag","content":"Inhoud","form":"Formulier","quiz":"Quiz","mixed":"Gemengde Inhoud","approval":"Goedkeuring Vereist","items":"Items","version":"Versie","no_description":"Geen beschrijving opgegeven","edit":"Bewerken","duplicate":"Dupliceren","delete":"Verwijderen","collapse":"Inklappen","template":"Sjabloon","translate":"Vertalen","translate_workflow":"Workflow Vertalen","translating":"Bezig met vertalen...","translation_success":"Workflow succesvol vertaald","translation_failed":"Vertaling van workflow mislukt","empty":{"title":"Geen workflows gevonden","message":"Begin door je eerste workflow te maken met onze intu\xeftieve editor."},"access_denied":{"title":"Toegang Geweigerd","message":"Je hebt geen toestemming om de Flows Editor te gebruiken. Neem contact op met je beheerder voor toegang."},"validation":{"name_required":"Workflow naam is verplicht","slug_required":"Workflow slug is verplicht"},"create_success":"Workflow succesvol aangemaakt","create_failed":"Kan workflow niet aanmaken","update_success":"Workflow succesvol bijgewerkt","update_failed":"Kan workflow niet bijwerken","delete_success":"Workflow succesvol verwijderd","delete_failed":"Kan workflow niet verwijderen","delete_confirm":"Weet je zeker dat je deze workflow wilt verwijderen? Deze actie kan niet ongedaan worden gemaakt.","load_failed":"Kan workflows niet laden","wizard":{"title":"Nieuwe Workflow Maken","step1":"Basis Info","step2":"Sjabloon","step3":"Beoordeling","basic_info":"Basis Informatie","basic_info_description":"Begin door basis informatie over je workflow te verstrekken.","choose_template":"Kies Sjabloon","template_description":"Selecteer een sjabloon om snel te beginnen, of kies blanco om helemaal opnieuw te beginnen.","review":"Beoordelen & Maken","review_description":"Bekijk je workflow configuratie voordat je deze maakt.","next":"Volgende","previous":"Vorige","create_workflow":"Workflow Maken"},"copy_suffix":"(Kopie)","templates":{"blank":"Lege Workflow","blank_description":"Begin met een lege workflow en bouw deze helemaal opnieuw op.","onboarding":"Onboarding Sjabloon","onboarding_description":"Vooraf geconfigureerde workflow voor nieuwe medewerker onboarding met welkom, training en beoordelings fasen.","training":"Training Sjabloon","training_description":"Gestructureerde training workflow met introductie, materialen, oefeningen en testen.","assessment":"Beoordeling Sjabloon","assessment_description":"Competentie beoordeling workflow met voor-beoordeling, testen en prestatie beoordeling."},"template_phases":{"welcome_introduction":"Welkom & Introductie","safety_training":"Veiligheidstraining","company_policies":"Bedrijfsbeleid","skills_assessment":"Vaardigheden Beoordeling","final_review":"Eindreview","course_introduction":"Cursus Introductie","learning_materials":"Leermateriaal","practical_exercises":"Praktische Oefeningen","knowledge_test":"Kennistest","pre_assessment":"Voor-beoordeling","competency_test":"Competentietest","performance_review":"Prestatie Beoordeling"},"pdf_output":{"pdf_output_configuration":"PDF Output Configuratie","pdf_output_description":"Configureer automatische PDF generatie en levering voor deze workflow","pdf_output_overview":"Overzicht","pdf_templates":"Sjablonen","delivery_settings":"Levering","pdf_output_enable":"PDF Output Inschakelen","pdf_output_enable_description":"Genereer automatisch PDF documenten wanneer gebruikers quizzes of fasen voltooien","configured_templates":"Geconfigureerde Sjablonen","quiz_triggers":"Quiz Triggers","email_delivery":"E-mail Levering","enabled":"Ingeschakeld","disabled":"Uitgeschakeld","no_pdf_templates_configured":"Geen PDF Sjablonen Geconfigureerd","add_pdf_template_description":"Voeg PDF sjablonen toe om automatisch certificaten, rapporten of formulieren te genereren wanneer gebruikers deze workflow voltooien","add_first_template":"Voeg Je Eerste Sjabloon Toe","pdf_template_associations":"PDF Sjabloon Koppelingen","add_template":"Sjabloon Toevoegen","enable_pdf_output_first":"Schakel PDF output in op het Overzicht tabblad om sjablonen te configureren","unknown_template":"Onbekend Sjabloon","configure_mapping":"Mapping Configureren","remove":"Verwijderen","trigger_when":"Activeren Wanneer","quiz_completed":"Quiz Voltooid","phase_completed":"Fase Voltooid","workflow_completed":"Workflow Voltooid","manual_generation":"Handmatige Generatie","enable_this_template":"Dit sjabloon inschakelen","data_fields_mapped":"Data velden gekoppeld","fields":"velden","recipients":"Ontvangers","user":"Gebruiker","manager":"Manager","hr":"HR Afdeling","custom":"aangepaste ontvangers","none":"Geen","email_delivery_description":"Verstuur automatisch gegenereerde PDFs via e-mail naar gespecificeerde ontvangers","default_recipients":"Standaard Ontvangers","custom_recipients":"Aangepaste Ontvangers","enter_email_address":"Voer e-mailadres in...","browse_pdf_templates":"PDF Sjablonen Bladeren","search_templates":"Sjablonen zoeken...","templates_available":"sjablonen beschikbaar","no_templates_available":"Geen Sjablonen Beschikbaar","no_templates_description":"Er zijn geen PDF sjablonen beschikbaar voor selectie. Maak eerst sjablonen aan in de PDF Sjabloon Editor.","view_full_preview":"Volledige Voorvertoning Bekijken","preview_not_available":"Voorvertoning niet beschikbaar","loading_preview":"Voorvertoning laden...","template_type":"Sjabloon Type","page_format":"Pagina Formaat","available_fields":"Beschikbare Velden","created":"Aangemaakt","unknown":"Onbekend","template_fields":"Sjabloon Velden","select_template_to_preview":"Selecteer een sjabloon voor voorvertoning","select_template_description":"Kies een sjabloon uit de lijst om de voorvertoning en details te bekijken.","document":"Document","template_added_successfully":"Sjabloon succesvol toegevoegd","failed_to_load_templates":"Kan sjablonen niet laden","configure_data_mapping":"Data Mapping Configureren","visual_mapping":"Visuele Mapping","manual_mapping":"Handmatige Mapping","flow_data_fields":"Flow Data Velden","failed_to_load_template_fields":"Kan sjabloon velden niet laden","loading_template_fields":"Sjabloon velden laden...","template_field":"Sjabloon Veld","flow_data_field":"Flow Data Veld","actions":"Acties","select_flow_field":"Selecteer flow veld...","clear":"Wissen","save_mapping":"Mapping Opslaan","mapping_saved_successfully":"Mapping succesvol opgeslagen","use_manual_mapping_for_now":"Gebruik handmatige mapping tab voor nu","mapped_fields":"Gekoppelde Velden","workflow":"Workflow","phases":"Fasen","quiz":"Quiz Resultaten"}}'),api:JSON.parse('{"errors":{"general":{"networkError":"Netwerkfout. Controleer uw verbinding.","serverError":"Serverfout. Probeer het later opnieuw.","unauthorized":"U bent niet geautoriseerd om deze actie uit te voeren.","sessionExpired":"Uw sessie is verlopen. Log opnieuw in.","notFound":"De opgevraagde bron is niet gevonden.","validationError":"Controleer uw invoer en probeer opnieuw.","timeout":"Verzoek time-out. Probeer het opnieuw."},"auth":{"invalidCredentials":"Ongeldig e-mailadres of wachtwoord.","emailNotFound":"Geen account gevonden met dit e-mailadres.","passwordIncorrect":"Onjuist wachtwoord.","accountDisabled":"Uw account is uitgeschakeld.","magicLinkInvalid":"Deze inloglink is ongeldig of verlopen.","magicLinkUsed":"Deze inloglink is al gebruikt.","logoutFailed":"Uitloggen mislukt. Probeer het opnieuw."},"crew":{"createFailed":"Aanmaken bemanningslid mislukt.","updateFailed":"Bijwerken bemanningslid mislukt.","deleteFailed":"Verwijderen bemanningslid mislukt.","notFound":"Bemanningslid niet gevonden.","emailExists":"Een bemanningslid met dit e-mailadres bestaat al.","invalidData":"Ongeldige bemanningslid gegevens opgegeven."},"manager":{"createFailed":"Aanmaken manager mislukt.","updateFailed":"Bijwerken manager mislukt.","deleteFailed":"Verwijderen manager mislukt.","notFound":"Manager niet gevonden.","emailExists":"Een manager met dit e-mailadres bestaat al.","noPermission":"U heeft geen toestemming om andere managers te beheren."},"training":{"sessionNotFound":"Trainingssessie niet gevonden.","itemNotFound":"Trainingsitem niet gevonden.","alreadyCompleted":"Dit trainingsitem is al voltooid.","notStarted":"Start eerst de trainingsfase.","completeFailed":"Markeren als voltooid mislukt.","proofRequired":"Bewijs van voltooiing is vereist voor dit item.","uploadFailed":"Uploaden bewijsdocument mislukt."},"quiz":{"notAvailable":"Examen is nog niet beschikbaar.","alreadyPassed":"U bent al geslaagd voor dit examen.","submitFailed":"Indienen examen mislukt.","reviewFailed":"Beoordelen examen mislukt.","notFound":"Examen niet gevonden.","invalidAnswers":"Ongeldige examenantwoorden opgegeven.","incompleteTraining":"Voltooi alle trainingsitems voordat u het examen doet."},"certificates":{"generateFailed":"Genereren certificaat mislukt.","notFound":"Certificaat niet gevonden.","notEligible":"Gebruiker komt niet in aanmerking voor certificaat.","sendFailed":"Versturen certificaat e-mail mislukt."},"email":{"sendFailed":"Versturen e-mail mislukt.","invalidAddress":"Ongeldig e-mailadres.","templateNotFound":"E-mailsjabloon niet gevonden.","attachmentFailed":"Toevoegen document mislukt."},"pdf":{"generateFailed":"Genereren PDF mislukt.","templateNotFound":"PDF sjabloon niet gevonden.","invalidData":"Ongeldige gegevens voor PDF generatie."},"upload":{"failed":"Uploaden bestand mislukt.","tooLarge":"Bestand is te groot. Maximale grootte is {{maxSize}}.","invalidType":"Ongeldig bestandstype. Toegestane types: {{allowedTypes}}.","noFile":"Geen bestand opgegeven."}},"success":{"saved":"Wijzigingen succesvol opgeslagen.","created":"Succesvol aangemaakt.","updated":"Succesvol bijgewerkt.","deleted":"Succesvol verwijderd.","sent":"Succesvol verstuurd.","completed":"Succesvol voltooid.","approved":"Succesvol goedgekeurd.","rejected":"Succesvol afgekeurd."}}'),errors:JSON.parse('{"network":{"connection_lost":"Verbinding verloren. Controleer uw internetverbinding en probeer opnieuw.","slow_connection":"Uw verbinding lijkt traag. Dit kan iets langer duren dan gewoonlijk.","offline":"U lijkt offline te zijn. Controleer uw internetverbinding.","timeout":"Het verzoek duurt langer dan verwacht. Probeer opnieuw.","server_unreachable":"Kan onze servers niet bereiken. Controleer uw verbinding en probeer opnieuw."},"authentication":{"session_expired":"Uw sessie is verlopen. Log opnieuw in om door te gaan.","session_expiring_soon":"Uw sessie verloopt over {{minutes}} minuten. Sla uw werk op.","login_failed":"We konden u niet inloggen. Controleer uw gegevens en probeer opnieuw.","login_link_expired":"Deze inloglink is verlopen. Vraag een nieuwe aan op de inlogpagina.","login_link_invalid":"Deze inloglink is niet geldig. Vraag een nieuwe aan op de inlogpagina.","access_denied":"U heeft geen toegang tot dit gebied. Neem contact op met uw beheerder als u toegang nodig heeft.","token_invalid":"Uw inlogsessie is niet meer geldig. Log opnieuw in."},"onboarding":{"progress_save_failed":"We konden uw voortgang niet opslaan. Uw werk is veilig, maar probeer opnieuw.","step_load_failed":"Kan deze onboarding-stap niet laden. Ververs de pagina en probeer opnieuw.","completion_failed":"We konden uw onboarding niet voltooien. Probeer opnieuw of neem contact op met ondersteuning.","role_selection_failed":"Kan uw rolselectie niet opslaan. Probeer uw rol opnieuw te selecteren.","analytics_failed":"Voortgangsregistratie is tijdelijk niet beschikbaar, maar uw onboarding gaat normaal door."},"training":{"phase_load_failed":"Kan Fase {{phase}} training niet laden. Ververs de pagina en probeer opnieuw.","item_load_failed":"Dit trainingsonderdeel kon niet worden geladen. Probeer opnieuw of ga naar het volgende onderdeel.","completion_failed":"We konden deze training niet als voltooid markeren. Probeer opnieuw.","quiz_load_failed":"De quiz kon niet worden geladen. Ververs de pagina en probeer opnieuw.","quiz_submit_failed":"Uw quiz-antwoorden konden niet worden verzonden. Probeer opnieuw.","progress_sync_failed":"Uw trainingsvoortgang kon niet worden gesynchroniseerd. Uw werk is lokaal opgeslagen."},"certificates":{"generation_failed":"Uw certificaat kon nu niet worden gegenereerd. Probeer later opnieuw.","download_failed":"Certificaat download mislukt. Probeer opnieuw of neem contact op met ondersteuning.","not_eligible":"U komt nog niet in aanmerking voor dit certificaat. Voltooi eerst alle vereiste training."},"file_operations":{"upload_failed":"Bestand uploaden mislukt. Controleer uw bestand en probeer opnieuw.","file_too_large":"Dit bestand is te groot. Kies een kleiner bestand (max {{maxSize}}).","invalid_file_type":"Dit bestandstype wordt niet ondersteund. Kies een {{allowedTypes}} bestand.","download_failed":"Bestand downloaden mislukt. Probeer opnieuw."},"form_validation":{"required_field":"Dit veld is verplicht.","invalid_email":"Voer een geldig e-mailadres in.","password_too_short":"Wachtwoord moet minimaal {{minLength}} tekens lang zijn.","passwords_dont_match":"Wachtwoorden komen niet overeen.","invalid_date":"Voer een geldige datum in.","future_date_required":"Datum moet in de toekomst liggen.","past_date_required":"Datum moet in het verleden liggen."},"server":{"internal_error":"Er ging iets mis aan onze kant. Probeer over een paar momenten opnieuw.","maintenance":"Het systeem is tijdelijk in onderhoud. Probeer later opnieuw.","overloaded":"Onze servers zijn momenteel druk bezet. Wacht even en probeer opnieuw.","database_error":"Er is een tijdelijk probleem met onze database. Probeer binnenkort opnieuw."},"recovery":{"refresh_page":"Probeer de pagina te verversen","check_connection":"Controleer uw internetverbinding","try_again_later":"Probeer over een paar minuten opnieuw","contact_support":"Neem contact op met ondersteuning als het probleem aanhoudt","save_work":"Sla uw werk op voordat u opnieuw probeert","restart_browser":"Probeer uw browser opnieuw te starten"},"maritime_specific":{"vessel_data_unavailable":"Scheepsinformatie is tijdelijk niet beschikbaar. Uw training kan doorgaan.","crew_record_sync_failed":"Uw bemanningsrecord kon niet worden gesynchroniseerd. Wijzigingen zijn lokaal opgeslagen.","safety_protocol_load_failed":"Veiligheidsprotocollen konden niet worden geladen. Neem contact op met uw veiligheidsofficier.","compliance_check_failed":"Compliance verificatie is tijdelijk niet beschikbaar.","boarding_date_invalid":"Voer een geldige inschepingsdatum in.","position_not_recognized":"Deze bemanningspositie wordt niet herkend. Neem contact op met HR."},"user_friendly":{"something_went_wrong":"Oeps! Iets werkte niet zoals verwacht.","please_try_again":"Probeer opnieuw.","working_on_it":"We werken aan het oplossen hiervan.","almost_there":"U bent er bijna! Nog \xe9\xe9n keer proberen.","technical_difficulties":"We ondervinden enkele technische problemen.","back_soon":"Alles zou binnenkort weer normaal moeten werken."},"actions":{"retry":"Opnieuw Proberen","refresh":"Pagina Verversen","go_back":"Ga Terug","contact_support":"Contact Ondersteuning","skip":"Deze Stap Overslaan","save_and_continue":"Opslaan en Doorgaan","try_later":"Later Proberen","report_problem":"Probleem Melden"},"help":{"what_happened":"Wat is er gebeurd?","what_to_do":"Wat moet ik doen?","need_help":"Hulp nodig?","common_solutions":"Veelvoorkomende oplossingen:","still_stuck":"Nog steeds problemen?","contact_info":"Neem contact op met uw systeembeheerder of IT-ondersteuning."}}'),feedback:JSON.parse('{"quick":{"how_was_experience":"Hoe was uw ervaring?","good_experience":"Goede ervaring","okay_experience":"Redelijke ervaring","poor_experience":"Slechte ervaring"},"detailed":{"open_detailed":"Gedetailleerde feedback","rate_experience":"Beoordeel uw ervaring","additional_comments":"Aanvullende opmerkingen (optioneel)","comment_placeholder":"Vertel ons over uw ervaring, eventuele problemen die u tegenkwam, of suggesties voor verbetering...","characters":"karakters","context":"Context","submitting":"Verzenden...","submit":"Feedback Verzenden"},"contexts":{"general":"Algemene Feedback","training_completion":"Training Voltooiing","quiz_completion":"Quiz Voltooiing","offline_mode":"Offline Ervaring","error_recovery":"Foutherstel"},"validation":{"rating_or_comment_required":"Geef alstublieft een beoordeling of opmerking"},"errors":{"submission_failed":"Feedback verzenden mislukt. Probeer het opnieuw."}}')}};ns.use(Fs).use(ps).init({resources:zs,fallbackLng:"en",defaultNS:"common",nsSeparator:":",keySeparator:".",detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"],lookupLocalStorage:"i18nextLng",checkWhitelist:!0},supportedLngs:["en","nl"],nonExplicitSupportedLngs:!1,interpolation:{escapeValue:!1},react:{useSuspense:!1},debug:!1});const qs=ns;const Ws=new class{constructor(){this.defaultDuration=5e3,this.networkErrorDuration=7e3,this.criticalErrorDuration=1e4}getCurrentLanguage(){return qs.language||"en"}translateError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return qs.t("errors:".concat(e),t)}catch(n){return qs.t("common:errors.generic",t)}}categorizeError(e){var t,n,i,a,r;if(!e)return"unknown";if(!e.response&&("NETWORK_ERROR"===e.code||null!==(t=e.message)&&void 0!==t&&t.includes("Network Error")))return"network";if("ECONNABORTED"===e.code||null!==(n=e.message)&&void 0!==n&&n.includes("timeout"))return"timeout";if(null!==(i=e.response)&&void 0!==i&&i.status){const t=e.response.status;if(401===t)return"authentication";if(403===t)return"authorization";if(404===t)return"not_found";if(422===t)return"validation";if(t>=500)return"server"}if(null!==(a=e.response)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&r.error){const t=e.response.data.error.toLowerCase();if(t.includes("session")||t.includes("token"))return"authentication";if(t.includes("permission")||t.includes("access"))return"authorization";if(t.includes("validation")||t.includes("invalid"))return"validation"}return"generic"}getErrorMessage(e){var t,n,i;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";const r=this.categorizeError(e),s=null===(t=e.response)||void 0===t?void 0:t.data;switch(r){case"network":return!1===navigator.onLine?this.translateError("network.offline"):this.translateError("network.connection_lost");case"timeout":return this.translateError("network.timeout");case"authentication":return null!==s&&void 0!==s&&null!==(n=s.error)&&void 0!==n&&n.includes("expired")?this.translateError("authentication.session_expired"):null!==s&&void 0!==s&&null!==(i=s.error)&&void 0!==i&&i.includes("login link")?this.translateError("authentication.login_link_expired"):this.translateError("authentication.login_failed");case"authorization":return this.translateError("authentication.access_denied");case"not_found":return this.getContextualNotFoundMessage(a);case"validation":return this.getValidationErrorMessage(s);case"server":return this.translateError("server.internal_error");default:return this.getContextualGenericMessage(a,s)}}getContextualNotFoundMessage(e){switch(e){case"training":return this.translateError("training.item_load_failed");case"quiz":return this.translateError("training.quiz_load_failed");case"certificate":return this.translateError("certificates.not_eligible");default:return this.translateError("common:errors.not_found")}}getValidationErrorMessage(e){if(null!==e&&void 0!==e&&e.details){const t=e.details.toLowerCase();if(t.includes("email"))return this.translateError("form_validation.invalid_email");if(t.includes("password"))return this.translateError("form_validation.password_too_short");if(t.includes("required"))return this.translateError("form_validation.required_field")}return this.translateError("common:errors.validationError")}getContextualGenericMessage(e,t){switch(e){case"onboarding":return this.translateError("onboarding.progress_save_failed");case"training":return this.translateError("training.completion_failed");case"quiz":return this.translateError("training.quiz_submit_failed");case"certificate":return this.translateError("certificates.generation_failed");case"file_upload":return this.translateError("file_operations.upload_failed");default:return this.translateError("user_friendly.something_went_wrong")}}getRecoverySuggestions(e){switch(this.categorizeError(e)){case"network":return[this.translateError("recovery.check_connection"),this.translateError("recovery.refresh_page"),this.translateError("recovery.try_again_later")];case"authentication":return[this.translateError("recovery.refresh_page"),this.translateError("actions.retry")];case"server":return[this.translateError("recovery.try_again_later"),this.translateError("recovery.refresh_page"),this.translateError("recovery.contact_support")];default:return[this.translateError("actions.retry"),this.translateError("recovery.refresh_page")]}}showError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getErrorMessage(e,t),a=this.categorizeError(e);let r=this.defaultDuration;"network"===a&&(r=this.networkErrorDuration),"server"===a&&(r=this.criticalErrorDuration);const s=d({duration:n.duration||r,style:{background:"#dc2626",color:"#fff",fontSize:"14px",fontWeight:"500",borderRadius:"8px",padding:"12px 16px",maxWidth:"400px"},iconTheme:{primary:"#dc2626",secondary:"#fff"}},n.toastOptions);if(n.showRecovery){const n=this.getRecoverySuggestions(e,t),a="".concat(i,"\n\n").concat(this.translateError("help.what_to_do")," ").concat(n[0]);return Vn.error(a,s)}return Vn.error(i,s)}showSuccess(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.translateError(e,t.params);return Vn.success(n,d({duration:3e3,style:{background:"#059669",color:"#fff",fontSize:"14px",fontWeight:"500",borderRadius:"8px",padding:"12px 16px"},iconTheme:{primary:"#059669",secondary:"#fff"}},t.toastOptions))}showWarning(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.translateError(e,t.params);return Vn(n,d({duration:4e3,icon:"\u26a0\ufe0f",style:{background:"#d97706",color:"#fff",fontSize:"14px",fontWeight:"500",borderRadius:"8px",padding:"12px 16px"}},t.toastOptions))}handleMaritimeError(e,t){var n,i,a;const r=(null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i||null===(a=i.error)||void 0===a?void 0:a.toLowerCase())||"";return r.includes("vessel")?this.showError(e,"maritime",{customMessage:this.translateError("maritime_specific.vessel_data_unavailable")}):r.includes("crew record")?this.showError(e,"maritime",{customMessage:this.translateError("maritime_specific.crew_record_sync_failed")}):r.includes("safety protocol")?this.showError(e,"maritime",{customMessage:this.translateError("maritime_specific.safety_protocol_load_failed")}):this.showError(e,t)}isOffline(){return!1===navigator.onLine}handleOfflineError(){return this.showWarning("network.offline",{duration:this.networkErrorDuration,showRecovery:!0})}logError(e,t){}},Bs=Ws;const Us=new class{constructor(){this.memoryStorage={token:null,refreshToken:null,expiresAt:null},this.storageKey="auth_token",this.refreshKey="refresh_token"}setToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3600;try{if(this.memoryStorage.token=e,this.memoryStorage.refreshToken=t,this.memoryStorage.expiresAt=Date.now()+1e3*n,"undefined"!==typeof window&&window.sessionStorage){const n={token:e,expiresAt:this.memoryStorage.expiresAt};sessionStorage.setItem(this.storageKey,JSON.stringify(n)),t&&sessionStorage.setItem(this.refreshKey,t)}}catch(i){console.error("Failed to store token:",i)}}getToken(){if(this.memoryStorage.token)return Date.now()<this.memoryStorage.expiresAt?this.memoryStorage.token:(this.clearToken(),null);try{if("undefined"!==typeof window&&window.sessionStorage){const e=sessionStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);if(Date.now()<t.expiresAt)return this.memoryStorage.token=t.token,this.memoryStorage.expiresAt=t.expiresAt,t.token;this.clearToken()}}}catch(e){console.error("Failed to retrieve token:",e)}return null}getRefreshToken(){if(this.memoryStorage.refreshToken)return this.memoryStorage.refreshToken;try{if("undefined"!==typeof window&&window.sessionStorage)return sessionStorage.getItem(this.refreshKey)}catch(e){console.error("Failed to retrieve refresh token:",e)}return null}clearToken(){this.memoryStorage={token:null,refreshToken:null,expiresAt:null};try{"undefined"!==typeof window&&window.sessionStorage&&(sessionStorage.removeItem(this.storageKey),sessionStorage.removeItem(this.refreshKey))}catch(e){console.error("Failed to clear tokens:",e)}}isTokenExpiringSoon(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;if(!this.memoryStorage.expiresAt)return!0;return(this.memoryStorage.expiresAt-Date.now())/1e3<e}decodeToken(e){try{const t=e.split(".")[1];return JSON.parse(atob(t))}catch(t){return console.error("Failed to decode token:",t),null}}},Vs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const n=(e=>{if(!e)return null;try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp}catch(t){return null}})(e);if(!n)return!1;const i=n-Date.now();return i<=60*t*1e3&&i>0},Hs=pr.create({baseURL:"/api".trim(),timeout:3e4});Hs.interceptors.request.use((e=>{const t=Us.getToken();if(t){if((e=>{if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])),n=Date.now()/1e3;return t.exp<n}catch(t){return!0}})(t))return Us.clearToken(),Vn.error("Your session has expired. Please log in again."),window.location.href="/login",Promise.reject(new Error("Token expired"));Vs(t,5)&&Vn.error("Your session will expire soon. Please save your work and log in again.",{duration:8e3,id:"token-expiring-warning"}),e.headers.Authorization="Bearer ".concat(t)}return e}),(e=>Promise.reject(e))),Hs.interceptors.response.use((e=>e),(e=>{var t,n;const{response:i}=e;return Bs.logError(e,"api_interceptor",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(n=e.config)||void 0===n?void 0:n.method,status:null===i||void 0===i?void 0:i.status}),401===(null===i||void 0===i?void 0:i.status)?(Us.clearToken(),Bs.showError(e,"authentication"),setTimeout((()=>{window.location.href="/login"}),1e3)):403===(null===i||void 0===i?void 0:i.status)?Bs.showError(e,"authorization"):(null===i||void 0===i?void 0:i.status)>=500?Bs.showError(e,"server"):i?Bs.showError(e,"general"):Bs.isOffline()?Bs.handleOfflineError():Bs.showError(e,"network"),Promise.reject(e)}));const Gs=async e=>(await Hs.post("/auth/magic-login",{token:e})).data,Qs=async(e,t)=>(await Hs.post("/auth/admin-login",{email:e,password:t})).data,Ys=async e=>(await Hs.post("/auth/dev-login",{email:e})).data,Ks=async()=>(await Hs.get("/auth/verify")).data,Xs=async()=>(await Hs.post("/auth/logout")).data,Js=async e=>(await Hs.post("/auth/request-magic-link",{email:e})).data,$s=async e=>(await Hs.post("/manager/crew",e)).data,Zs=async()=>(await Hs.get("/manager/crew")).data,eo=async(e,t)=>(await Hs.put("/manager/crew/".concat(e),t)).data,to=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await Hs.delete("/manager/crew/".concat(e).concat(t?"?forceDelete=true":""))).data},no=async(e,t)=>(await Hs.post("/manager/crew/bulk-action",{action:e,userIds:t})).data,io=async e=>(await Hs.post("/manager/crew/".concat(e,"/send-magic-link"))).data,ao=async e=>(await Hs.post("/manager/crew/".concat(e,"/send-safety-pdf"))).data,ro=async e=>(await Hs.post("/manager/crew/".concat(e,"/send-onboarding-start"))).data,so=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(await Hs.post("/manager/crew/".concat(e,"/resend-completion-email"),{comments:t})).data},oo=async()=>(await Hs.get("/manager/dashboard/stats")).data,lo=async()=>(await Hs.get("/manager/quiz-reviews/pending")).data,co=async(e,t)=>(await Hs.post("/manager/quiz-reviews/".concat(e,"/approve"),t)).data,uo=async()=>(await Hs.get("/manager/onboarding-reviews")).data,ho=async e=>(await Hs.post("/manager/onboarding-reviews/".concat(e,"/approve"))).data,mo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:t,limit:n,certificate_type:i,user_id:a,from_date:r,to_date:s,sort_by:o,sort_order:l}=e,c=new URLSearchParams;t&&c.append("page",t),n&&c.append("limit",n),i&&c.append("certificate_type",i),a&&c.append("user_id",a),r&&c.append("from_date",r),s&&c.append("to_date",s),o&&c.append("sort_by",o),l&&c.append("sort_order",l);const d="/manager/certificates".concat(c.toString()?"?".concat(c.toString()):"");return(await Hs.get(d)).data},po=async(e,t)=>(await Hs.put("/manager/certificates/".concat(e),t)).data,fo=async e=>(await Hs.delete("/manager/certificates/".concat(e))).data,go=async e=>(await Hs.post("/manager/certificates/regenerate",e)).data,vo=async()=>(await Hs.get("/crew/profile")).data,bo=async()=>(await Hs.get("/crew/training/progress")).data,xo=async e=>(await Hs.get("/crew/training/phase/".concat(e))).data,yo=async e=>(await Hs.get("/training/phase/".concat(e))).data,wo=async(e,t)=>(await Hs.post("/training/phase/".concat(e,"/item/").concat(t,"/complete"))).data,_o=async(e,t)=>(await Hs.delete("/training/phase/".concat(e,"/item/").concat(t,"/complete"))).data,ko=async e=>(await Hs.get("/training/quiz/".concat(e))).data,No=async(e,t)=>(await Hs.post("/training/quiz/".concat(e,"/submit"),t)).data,jo=async()=>(await Hs.get("/training/quiz-history")).data,So=async()=>(await Hs.get("/training/stats")).data,Co=async()=>(await Hs.get("/templates")).data,Eo=async e=>(await Hs.get("/templates/".concat(e))).data,Ao=async e=>(await Hs.post("/templates",e)).data,To=async(e,t)=>(await Hs.put("/templates/".concat(e),t)).data,Mo=async(e,t)=>(await Hs.patch("/templates/".concat(e,"/rename"),{name:t})).data,Po=async e=>(await Hs.delete("/templates/".concat(e))).data,Do=async e=>(await Hs.post("/templates/preview",e,{responseType:"blob"})).data,Ro=async()=>(await Hs.get("/admin/stats")).data,Oo=async()=>(await Hs.get("/admin/managers")).data,Lo=async e=>(await Hs.get("/admin/managers/".concat(e))).data,Io=async e=>(await Hs.post("/admin/managers",e)).data,Fo=async(e,t)=>(await Hs.patch("/admin/managers/".concat(e),t)).data,zo=async e=>(await Hs.delete("/admin/managers/".concat(e))).data,qo=async e=>(await Hs.post("/admin/managers/".concat(e,"/send-magic-link"))).data,Wo=async e=>(await Hs.post("/admin/managers/".concat(e,"/resend-welcome-email"))).data,Bo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:t,limit:n,user_id:i,action:a,resource_type:r,from_date:s,to_date:o}=e,l=new URLSearchParams;t&&l.append("page",t),n&&l.append("limit",n),i&&l.append("user_id",i),a&&l.append("action",a),r&&l.append("resource_type",r),s&&l.append("from_date",s),o&&l.append("to_date",o);const c="/admin/audit-log".concat(l.toString()?"?".concat(l.toString()):"");return(await Hs.get(c)).data},Uo=async()=>(await Hs.get("/admin/system-settings")).data,Vo=async e=>(await Hs.put("/admin/system-settings",e)).data,Ho=async e=>(await Hs.post("/admin/system-settings",e)).data,Go=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.metric&&t.append("metric",e.metric);const n="/admin/performance/metrics".concat(t.toString()?"?".concat(t.toString()):"");return(await Hs.get(n)).data},Qo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.location&&t.append("location",e.location);const n="/admin/performance/maritime".concat(t.toString()?"?".concat(t.toString()):"");return(await Hs.get(n)).data},Yo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.context&&t.append("context",e.context),e.type&&t.append("type",e.type);const n="/admin/feedback/summary".concat(t.toString()?"?".concat(t.toString()):"");return(await Hs.get(n)).data},Ko=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.timeRange&&t.append("timeRange",e.timeRange),e.format&&t.append("format",e.format);const n="/admin/performance/export".concat(t.toString()?"?".concat(t.toString()):"");return await Hs.get(n,{responseType:"blob"})},Xo={getWorkflows:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.type&&t.append("type",e.type),e.status&&t.append("status",e.status),e.active_only&&t.append("active_only","true"),e.category&&t.append("category",e.category);const n="/workflows".concat(t.toString()?"?".concat(t.toString()):"");return(await Hs.get(n)).data},getWorkflowBySlug:async e=>(await Hs.get("/workflows/".concat(e))).data,createWorkflow:async e=>(await Hs.post("/workflows",e)).data,updateWorkflow:async(e,t)=>(await Hs.put("/workflows/edit-workflow",d({id:e},t))).data,deleteWorkflow:async e=>(await Hs.delete("/workflows/edit-workflow",{data:{id:e}})).data,startWorkflow:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await Hs.post("/workflows/".concat(e,"/start"),{user_id:t,additional_data:n})).data},getMyInstances:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.status&&t.append("status",e.status),e.workflow_slug&&t.append("workflow_slug",e.workflow_slug);const n="/workflows/my-instances".concat(t.toString()?"?".concat(t.toString()):"");return(await Hs.get(n)).data},getInstance:async e=>(await Hs.get("/workflows/instances/".concat(e))).data,updateProgress:async(e,t)=>(await Hs.post("/workflows/instances/".concat(e,"/progress"),t)).data,getWorkflowStats:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new URLSearchParams;t.from&&n.append("from",t.from),t.to&&n.append("to",t.to);const i="/workflows/".concat(e,"/stats").concat(n.toString()?"?".concat(n.toString()):"");return(await Hs.get(i)).data},getProgressAnalytics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;e.workflow_id&&t.append("workflow_id",e.workflow_id),e.user_id&&t.append("user_id",e.user_id),e.from_date&&t.append("from_date",e.from_date),e.to_date&&t.append("to_date",e.to_date);const n="/workflows/progress-analytics".concat(t.toString()?"?".concat(t.toString()):"");return(await Hs.get(n)).data},translateWorkflow:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["nl","de"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await Hs.post("/workflows/".concat(e,"/translate"),{targetLanguages:t,translationMethod:n.translationMethod||"ai",includePhases:!1!==n.includePhases,includeItems:!1!==n.includeItems})).data},getWorkflowTranslations:async e=>(await Hs.get("/workflows/translations?workflow_id=".concat(e))).data,saveWorkflowTranslation:async(e,t)=>(await Hs.post("/workflows/translations?workflow_id=".concat(e),t)).data,createTrainingContent:async(e,t)=>(await Hs.post("/workflows/items/".concat(e,"/training-content"),t)).data,updateTrainingContent:async(e,t)=>(await Hs.put("/workflows/items/".concat(e,"/training-content"),t)).data,linkTrainingContent:async(e,t,n)=>(await Hs.post("/workflows/items/".concat(e,"/link-training"),{training_phase_id:t,training_item_number:n})).data,unlinkTrainingContent:async e=>(await Hs.delete("/workflows/items/".concat(e,"/training-content"))).data,getAvailableTrainingContent:async()=>(await Hs.get("/workflows/available-training-content")).data,migrateToTrainingIntegration:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await Hs.post("/workflows/migrate-to-training-integration",e)).data},getMigrationStatus:async()=>(await Hs.get("/workflows/migrate-to-training-integration")).data},Jo={getQuizTranslations:async e=>(await Hs.get("/training/quiz/".concat(e,"/translations"))).data,saveQuizTranslation:async(e,t)=>(await Hs.post("/training/quiz/".concat(e,"/translations"),t)).data,deleteQuizTranslation:async(e,t)=>(await Hs.delete("/training/quiz/".concat(e,"/translations"),{data:t})).data,translateQuiz:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await Hs.post("/training/quiz/".concat(e,"/translate"),{target_languages:t,source_language:n.sourceLang||"en",translation_method:n.method||"ai",overwrite_existing:n.overwriteExisting||!1,include_answers:!1!==n.includeAnswers,include_explanations:!1!==n.includeExplanations})).data},getQuizInLanguage:async function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";const i=await Jo.getQuizTranslations(e);return{phase:i.phase,language:n,questions:(null===(t=i.questions)||void 0===t?void 0:t.map((e=>{var t,a;return{question_index:e.question_index,question_text:e.content_languages[n]||e.content_languages[null===(t=i.translation_status)||void 0===t?void 0:t.source_language]||e.content_languages.en,answers:(null===(a=e.answer_options)||void 0===a?void 0:a.map((e=>{var t,a;return{answer_index:e.answer_index,text:e.content_languages[n]||e.content_languages[null===(t=i.translation_status)||void 0===t?void 0:t.source_language]||e.content_languages.en,explanation:e.explanation_languages[n]||e.explanation_languages[null===(a=i.translation_status)||void 0===a?void 0:a.source_language]||e.explanation_languages.en,is_correct:e.is_correct}})))||[],quiz_metadata:e.quiz_metadata||{}}})))||[]}},getQuizTranslationStatus:async e=>(await Jo.getQuizTranslations(e)).translation_status||null};var $o=n(414);const Zo=(0,i.createContext)(),el=()=>{const e=(0,i.useContext)(Zo);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},tl=e=>{if(!e)return null;try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp}catch(t){return null}},nl=e=>{const t=tl(e);return t?Math.max(0,t-Date.now()):0},il=e=>{let{children:t}=e;const[n,a]=(0,i.useState)(null),[r,s]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),[c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[p,f]=(0,i.useState)(0),g=(0,i.useCallback)((async e=>{if(!e||(e=>{if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])),n=Date.now()/1e3;return t.exp<n}catch(t){return!0}})(e))return x(),!1;try{const t=await pr.get("/api/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}});return a(t.data.user),s(e),!0}catch(t){return x(),!1}}),[]);(0,i.useEffect)((()=>{if(!r)return;const e=()=>{const e=nl(r),t=e/6e4;t<=5&&t>0&&!d&&(u(!0),Vn.error("Your session will expire in ".concat(Math.ceil(t)," minutes. Please save your work and log in again."),{duration:1e4,id:"session-expiring-warning"})),e<=0&&(Vn.error("Your session has expired. Please log in again."),x())};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[r,d]),(0,i.useEffect)((()=>{const e=Us.getToken();e&&g(e),l(!1)}),[g]);const v=(0,i.useCallback)((e=>{sessionStorage.getItem("onboarding_completed_".concat(e.id))||"crew"!==e.role?m(!1):(m(!0),f(0))}),[]),b=(0,i.useCallback)(((e,t)=>{a(e),s(t),u(!1),Us.setToken(t),v(e)}),[v]),x=(0,i.useCallback)((async()=>{try{await Xs()}catch(e){console.error("Logout API call failed:",e)}a(null),s(null),u(!1),m(!1),f(0),Us.clearToken()}),[]),y=(0,i.useCallback)((()=>{n&&(sessionStorage.setItem("onboarding_completed_".concat(n.id),"true"),m(!1),f(0))}),[n]),w=(0,i.useCallback)((()=>{f((e=>e+1))}),[]),_=(0,i.useCallback)((()=>{y()}),[y]),k=(0,i.useCallback)((async e=>{if(!c)throw new Error("Dev mode is not enabled");try{const t=await Ys(e),{token:n,user:i}=t;return Us.setToken(n),sessionStorage.setItem("user",JSON.stringify(i)),sessionStorage.setItem("devModeLastUser",e),s(n),a(i),pr.defaults.headers.common.Authorization="Bearer ".concat(n),v(i),Vn.success("Switched to ".concat(i.role,": ").concat(i.firstName," ").concat(i.lastName)),t}catch(t){throw Vn.error("Dev login failed"),t}}),[c,v]),N=()=>r?nl(r):0,j={user:n,token:r,isLoading:o,login:b,logout:x,devLogin:k,isDevMode:c,isAuthenticated:!!n,isAdmin:"admin"===(null===n||void 0===n?void 0:n.role),isManager:"manager"===(null===n||void 0===n?void 0:n.role),isCrew:"crew"===(null===n||void 0===n?void 0:n.role),isManagerOrAdmin:"manager"===(null===n||void 0===n?void 0:n.role)||"admin"===(null===n||void 0===n?void 0:n.role),hasRoleAccess:e=>{const t={admin:3,manager:2,crew:1};return t[null===n||void 0===n?void 0:n.role]>=t[e]},getTokenTimeRemaining:N,isTokenExpiringSoon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=N();return t>0&&t<=60*e*1e3},tokenExpirationTime:r?tl(r):null,needsOnboarding:h,onboardingStep:p,completeOnboarding:y,nextOnboardingStep:w,skipOnboarding:_};return(0,$o.jsx)(Zo.Provider,{value:j,children:t})},al=(0,i.createContext)(),rl=()=>{const e=(0,i.useContext)(al);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},sl=e=>{let{children:t}=e;const{i18n:n}=bs(),{user:a}=el(),[r,s]=(0,i.useState)(n.language),o=[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}],l=async e=>{try{if(await n.changeLanguage(e),s(e),localStorage.setItem("i18nextLng",e),a&&"crew"===a.role)try{if(!(await fetch("/api/crew/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({preferredLanguage:e})})).ok)throw new Error("Failed to update language preference")}catch(t){}}catch(t){Vn.error("Error changing language")}};(0,i.useEffect)((()=>{(async()=>{let e="en";if(a&&a.preferredLanguage)e=a.preferredLanguage;else{const t=localStorage.getItem("i18nextLng");if(t&&o.some((e=>e.code===t)))e=t;else{const t=navigator.language.split("-")[0];o.some((e=>e.code===t))&&(e=t)}}e!==r&&await l(e)})()}),[a]),(0,i.useEffect)((()=>{const e=e=>{s(e)};return n.on("languageChanged",e),()=>{n.off("languageChanged",e)}}),[n]);const c={currentLanguage:r,languages:o,changeLanguage:l,isRTL:!1};return(0,$o.jsx)(al.Provider,{value:c,children:t})},ol="/api/crew/onboarding",ll="".concat(ol,"/analytics"),cl="".concat(ol,"/progress");const dl=new class{constructor(){this.sessionId=this.generateSessionId()}generateSessionId(){return"onb_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}async getProgress(e){try{const e=localStorage.getItem("token");if(!e)return null;const t=await fetch(cl,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.text(),n=new Error(e);return n.response={status:t.status,data:{error:e}},Bs.showError(n,"onboarding"),null}return(await t.json()).progress}catch(t){return null}}async initializeProgress(e){try{const t=localStorage.getItem("token");if(!t)return null;const n=await fetch(cl,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({current_step:0,completed_steps:[],custom_preferences:{started:(new Date).toISOString(),session_id:this.sessionId}})});if(!n.ok)return null;const i=await n.json();return await this.trackEvent(e,"step_start",0,{session_id:this.sessionId,initialization:!0}),i.progress}catch(t){return null}}async updateStep(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var i;const a=localStorage.getItem("token");if(!a)return null;const r=await this.getProgress(e);if(!r)return null;if(t>3)return await this.completeOnboarding(e);const s=(new Date).toISOString(),o=d(d({},(null===(i=r.custom_preferences)||void 0===i?void 0:i.step_timestamps)||{}),{},{["step_".concat(t,"_started")]:s});let l=[...r.completed_steps];t>r.current_step&&!l.includes(r.current_step)&&(l.push(r.current_step),o["step_".concat(r.current_step,"_completed")]=s);const c={current_step:t,completed_steps:l,custom_preferences:d(d({},r.custom_preferences),{},{step_timestamps:o,last_updated:s},n)},u=await fetch(cl,{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){await u.text();return null}const h=await u.json();return await this.trackEvent(e,"step_complete",r.current_step,{session_id:this.sessionId,step_data:n,next_step:t}),await this.trackEvent(e,"step_start",t,{session_id:this.sessionId,previous_step:r.current_step}),h.progress}catch(a){return null}}async saveRoleSelection(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const i=localStorage.getItem("token");if(!i)return null;const a=await this.getProgress(e);if(!a)return null;const r=await fetch(cl,{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({selected_role_focus:t,custom_preferences:d(d({},a.custom_preferences),{},{role_focus:t,role_preferences:n,role_selected_at:(new Date).toISOString()})})});if(!r.ok)return null;const s=await r.json();return await this.trackEvent(e,"role_select",a.current_step,{session_id:this.sessionId,role_focus:t,preferences:n}),s.progress}catch(i){return null}}async completeOnboarding(e){try{const t=localStorage.getItem("token");if(!t)return null;const n=await this.getProgress(e);if(!n)return null;const i=(new Date).toISOString(),a=[...new Set([...n.completed_steps,n.current_step])],r=await fetch(cl,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({is_completed:!0,completed_steps:a,custom_preferences:d(d({},n.custom_preferences),{},{step_timestamps:d(d({},n.custom_preferences.step_timestamps),{},{["step_".concat(n.current_step,"_completed")]:i,flow_completed:i})})})});if(!r.ok)return null;const s=await r.json();return await this.trackEvent(e,"flow_complete",n.current_step,{session_id:this.sessionId,total_steps_completed:a.length,selected_role_focus:n.selected_role_focus,completion_time:i}),s.progress}catch(t){return null}}async trackEvent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const a=localStorage.getItem("token");if(!a)return;if(!e)return;const r=await fetch(ll,{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({event_type:t,step_number:n,event_data:i,session_id:this.sessionId})});if(!r.ok){await r.text()}}catch(a){}}async needsOnboarding(e){try{const t=await this.getProgress(e);return!t||!t.is_completed}catch(t){return!0}}resetOnboardingForUser(e){localStorage.removeItem("onboarding_completed_".concat(e)),localStorage.removeItem("training_focus_".concat(e))}},ul=dl,hl=(0,i.createContext)(),ml=()=>{const e=(0,i.useContext)(hl);if(!e)throw new Error("useOnboarding must be used within an OnboardingProvider");return e},pl=e=>{let{children:t}=e;const{user:n,isAuthenticated:a}=el(),[r,s]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),u=(0,i.useCallback)((async()=>{if(null!==n&&void 0!==n&&n.id){if("crew"!==n.role)return s(null),void l(!1);try{l(!0),d(null);let e=await ul.getProgress(n.id);e||"crew"!==n.role||(e=await ul.initializeProgress(n.id)),s(e)}catch(e){d(e.message)}finally{l(!1)}}else l(!1)}),[null===n||void 0===n?void 0:n.id,null===n||void 0===n?void 0:n.role]);(0,i.useEffect)((()=>{a&&n?u():(s(null),l(!1))}),[a,n,u]);const h=(0,i.useCallback)((()=>!(!n||"crew"!==n.role)&&(!r||!r.is_completed)),[n,r]),m=(0,i.useCallback)((()=>(null===r||void 0===r?void 0:r.current_step)||0),[r]),p=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===n||void 0===n||!n.id)return!1;try{if(r){const t=r.current_step+1,i=await ul.updateStep(n.id,t,e);if(i)return s(i),!0}return!0}catch(t){return!0}}),[null===n||void 0===n?void 0:n.id,r]),f=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n||void 0===n||!n.id||!r)return!1;try{const i=await ul.updateStep(n.id,e,t);return!!i&&(s(i),!0)}catch(i){return d(i.message),!1}}),[null===n||void 0===n?void 0:n.id,r]),g=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===n||void 0===n||!n.id)return!1;try{const i=await ul.saveRoleSelection(n.id,e,t);return!!i&&(s(i),!0)}catch(i){return d(i.message),!1}}),[null===n||void 0===n?void 0:n.id]),v=(0,i.useCallback)((async()=>{if(null===n||void 0===n||!n.id)return!1;try{if(r){const e=await ul.completeOnboarding(n.id);if(e)return s(e),localStorage.setItem("onboarding_completed_".concat(n.id),"true"),!0}return localStorage.setItem("onboarding_completed_".concat(n.id),"true"),!0}catch(e){return localStorage.setItem("onboarding_completed_".concat(n.id),"true"),!0}}),[null===n||void 0===n?void 0:n.id,r]),b=(0,i.useCallback)((async()=>await v()),[v]),x=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!==n&&void 0!==n&&n.id&&a)try{await ul.trackEvent(n.id,e,null===r||void 0===r?void 0:r.current_step,t)}catch(i){}}),[null===n||void 0===n?void 0:n.id,a,null===r||void 0===r?void 0:r.current_step]),y=(0,i.useCallback)((()=>{if(null===r||void 0===r||!r.selected_role_focus)return null;const e={schipper:{welcomeMessage:"Welkom aan boord, Schipper! Uw leiderschap en navigatie expertise is cruciaal voor onze binnenvaart operaties.",trainingFocus:"Leiderschap, Navigatie, en Wettelijke Verantwoordelijkheden",estimatedDuration:"8-10 uur",priority:"Leiderschap & Navigatie"},stuurman:{welcomeMessage:"Welkom aan boord, Stuurman! Uw navigatie ondersteuning houdt onze operaties veilig en effici\xebnt.",trainingFocus:"Navigatie Ondersteuning, Communicatie, en Operationele Procedures",estimatedDuration:"6-8 uur",priority:"Navigatie & Operaties"},matroos:{welcomeMessage:"Welkom aan boord, Matroos! Uw ervaring en mentoring vaardigheden zijn waardevol voor ons team.",trainingFocus:"Geavanceerde Dekoperaties, Lading Behandeling, en Mentoring",estimatedDuration:"5-7 uur",priority:"Dekoperaties & Mentoring"},deksman:{welcomeMessage:"Welkom aan boord, Deksman! Uw bijdrage aan ons team is gewaardeerd en belangrijk.",trainingFocus:"Basis Dekoperaties, Veiligheid, en Teamwerk",estimatedDuration:"4-5 uur",priority:"Basis Dekoperaties"}};return e[r.selected_role_focus]||e.deksman}),[null===r||void 0===r?void 0:r.selected_role_focus]),w=(0,i.useCallback)((()=>{if(!r)return 0;if(r.is_completed)return 100;return Math.round(r.completed_steps.length/3*100)}),[r]),_={progress:r,isLoading:o,error:c,needsOnboarding:h(),currentStep:m(),completionPercentage:w(),roleContent:y(),nextStep:p,goToStep:f,saveRoleSelection:g,completeOnboarding:v,skipOnboarding:b,trackEvent:x,refreshProgress:u,clearError:()=>d(null)};return(0,$o.jsx)(hl.Provider,{value:_,children:t})},fl=["_f"],gl=["name"],vl=["_f"],bl=["ref","message","type"],xl=["formControl"];var yl=e=>"checkbox"===e.type,wl=e=>e instanceof Date,_l=e=>null==e;const kl=e=>"object"===typeof e;var Nl=e=>!_l(e)&&!Array.isArray(e)&&kl(e)&&!wl(e),jl=e=>Nl(e)&&e.target?yl(e.target)?e.target.checked:e.target.value:e,Sl=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Cl="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function El(e){let t;const n=Array.isArray(e),i="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Cl&&(e instanceof Blob||i)||!n&&!Nl(e))return e;if(t=n?[]:{},n||(e=>{const t=e.constructor&&e.constructor.prototype;return Nl(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=El(e[n]));else t=e}return t}var Al=e=>/^\w*$/.test(e),Tl=e=>void 0===e,Ml=e=>Array.isArray(e)?e.filter(Boolean):[],Pl=e=>Ml(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Dl=(e,t,n)=>{if(!t||!Nl(e))return n;const i=(Al(t)?[t]:Pl(t)).reduce(((e,t)=>_l(e)?e:e[t]),e);return Tl(i)||i===e?Tl(e[t])?n:e[t]:i},Rl=e=>"boolean"===typeof e,Ol=(e,t,n)=>{let i=-1;const a=Al(t)?[t]:Pl(t),r=a.length,s=r-1;for(;++i<r;){const t=a[i];let r=n;if(i!==s){const n=e[t];r=Nl(n)||Array.isArray(n)?n:isNaN(+a[i+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=r,e=e[t]}};const Ll="blur",Il="focusout",Fl="onBlur",zl="onChange",ql="onSubmit",Wl="onTouched",Bl="all",Ul="max",Vl="min",Hl="maxLength",Gl="minLength",Ql="pattern",Yl="required",Kl="validate",Xl=i.createContext(null);Xl.displayName="HookFormContext";var Jl=function(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a={defaultValues:t._defaultValues};for(const r in e)Object.defineProperty(a,r,{get:()=>{const a=r;return t._proxyFormState[a]!==Bl&&(t._proxyFormState[a]=!i||Bl),n&&(n[a]=!0),e[a]}});return a};const $l="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;var Zl=e=>"string"===typeof e,ec=(e,t,n,i,a)=>Zl(e)?(i&&t.watch.add(e),Dl(n,e,a)):Array.isArray(e)?e.map((e=>(i&&t.watch.add(e),Dl(n,e)))):(i&&(t.watchAll=!0),n);var tc=(e,t,n,i,a)=>t?d(d({},n[e]),{},{types:d(d({},n[e]&&n[e].types?n[e].types:{}),{},{[i]:a||!0})}):{},nc=e=>Array.isArray(e)?e:[e],ic=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},ac=e=>_l(e)||!kl(e);function rc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(ac(e)||ac(t))return e===t;if(wl(e)&&wl(t))return e.getTime()===t.getTime();const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const r of i){const i=e[r];if(!a.includes(r))return!1;if("ref"!==r){const e=t[r];if(wl(i)&&wl(e)||Nl(i)&&Nl(e)||Array.isArray(i)&&Array.isArray(e)?!rc(i,e,n):i!==e)return!1}}return!0}var sc=e=>Nl(e)&&!Object.keys(e).length,oc=e=>"file"===e.type,lc=e=>"function"===typeof e,cc=e=>{if(!Cl)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},dc=e=>"select-multiple"===e.type,uc=e=>"radio"===e.type,hc=e=>cc(e)&&e.isConnected;function mc(e,t){const n=Array.isArray(t)?t:Al(t)?[t]:Pl(t),i=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let i=0;for(;i<n;)e=Tl(e)?i++:e[t[i++]];return e}(e,n),a=n.length-1,r=n[a];return i&&delete i[r],0!==a&&(Nl(i)&&sc(i)||Array.isArray(i)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Tl(e[t]))return!1;return!0}(i))&&mc(e,n.slice(0,-1)),e}var pc=e=>{for(const t in e)if(lc(e[t]))return!0;return!1};function fc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(Nl(e)||n)for(const i in e)Array.isArray(e[i])||Nl(e[i])&&!pc(e[i])?(t[i]=Array.isArray(e[i])?[]:{},fc(e[i],t[i])):_l(e[i])||(t[i]=!0);return t}function gc(e,t,n){const i=Array.isArray(e);if(Nl(e)||i)for(const a in e)Array.isArray(e[a])||Nl(e[a])&&!pc(e[a])?Tl(t)||ac(n[a])?n[a]=Array.isArray(e[a])?fc(e[a],[]):d({},fc(e[a])):gc(e[a],_l(t)?{}:t[a],n[a]):n[a]=!rc(e[a],t[a]);return n}var vc=(e,t)=>gc(e,t,fc(t));const bc={value:!1,isValid:!1},xc={value:!0,isValid:!0};var yc=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Tl(e[0].attributes.value)?Tl(e[0].value)||""===e[0].value?xc:{value:e[0].value,isValid:!0}:xc:bc}return bc},wc=(e,t)=>{let{valueAsNumber:n,valueAsDate:i,setValueAs:a}=t;return Tl(e)?e:n?""===e?NaN:e?+e:e:i&&Zl(e)?new Date(e):a?a(e):e};const _c={isValid:!1,value:null};var kc=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),_c):_c;function Nc(e){const t=e.ref;return oc(t)?t.files:uc(t)?kc(e.refs).value:dc(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):yl(t)?yc(e.refs).value:wc(Tl(t.value)?e.ref.value:t.value,e)}var jc=e=>e instanceof RegExp,Sc=e=>Tl(e)?e:jc(e)?e.source:Nl(e)?jc(e.value)?e.value.source:e.value:e,Cc=e=>({isOnSubmit:!e||e===ql,isOnBlur:e===Fl,isOnChange:e===zl,isOnAll:e===Bl,isOnTouch:e===Wl});const Ec="AsyncFunction";var Ac=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const Tc=(e,t,n,i)=>{for(const a of n||Object.keys(e)){const n=Dl(e,a);if(n){const{_f:e}=n,s=r(n,fl);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!i)return!0;if(e.ref&&t(e.ref,e.name)&&!i)return!0;if(Tc(s,t))break}else if(Nl(s)&&Tc(s,t))break}}};function Mc(e,t,n){const i=Dl(e,n);if(i||Al(n))return{error:i,name:n};const a=n.split(".");for(;a.length;){const i=a.join("."),r=Dl(t,i),s=Dl(e,i);if(r&&!Array.isArray(r)&&n!==i)return{name:n};if(s&&s.type)return{name:i,error:s};if(s&&s.root&&s.root.type)return{name:"".concat(i,".root"),error:s.root};a.pop()}return{name:n}}var Pc=(e,t,n)=>{const i=nc(Dl(e,n));return Ol(i,"root",t[n]),Ol(e,n,i),e},Dc=e=>Zl(e);function Rc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Dc(e)||Array.isArray(e)&&e.every(Dc)||Rl(e)&&!e)return{type:n,message:Dc(e)?e:"",ref:t}}var Oc=e=>Nl(e)&&!jc(e)?e:{value:e,message:""},Lc=async(e,t,n,i,a,r)=>{const{ref:s,refs:o,required:l,maxLength:c,minLength:u,min:h,max:m,pattern:p,validate:f,name:g,valueAsNumber:v,mount:b}=e._f,x=Dl(n,g);if(!b||t.has(g))return{};const y=o?o[0]:s,w=e=>{a&&y.reportValidity&&(y.setCustomValidity(Rl(e)?"":e||""),y.reportValidity())},_={},k=uc(s),N=yl(s),j=k||N,S=(v||oc(s))&&Tl(s.value)&&Tl(x)||cc(s)&&""===s.value||""===x||Array.isArray(x)&&!x.length,C=tc.bind(null,g,i,_),E=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hl,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Gl;const r=e?t:n;_[g]=d({type:e?i:a,message:r,ref:s},C(e?i:a,r))};if(r?!Array.isArray(x)||!x.length:l&&(!j&&(S||_l(x))||Rl(x)&&!x||N&&!yc(o).isValid||k&&!kc(o).isValid)){const{value:e,message:t}=Dc(l)?{value:!!l,message:l}:Oc(l);if(e&&(_[g]=d({type:Yl,message:t,ref:y},C(Yl,t)),!i))return w(t),_}if(!S&&(!_l(h)||!_l(m))){let e,t;const n=Oc(m),a=Oc(h);if(_l(x)||isNaN(x)){const i=s.valueAsDate||new Date(x),r=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;Zl(n.value)&&x&&(e=o?r(x)>r(n.value):l?x>n.value:i>new Date(n.value)),Zl(a.value)&&x&&(t=o?r(x)<r(a.value):l?x<a.value:i<new Date(a.value))}else{const i=s.valueAsNumber||(x?+x:x);_l(n.value)||(e=i>n.value),_l(a.value)||(t=i<a.value)}if((e||t)&&(E(!!e,n.message,a.message,Ul,Vl),!i))return w(_[g].message),_}if((c||u)&&!S&&(Zl(x)||r&&Array.isArray(x))){const e=Oc(c),t=Oc(u),n=!_l(e.value)&&x.length>+e.value,a=!_l(t.value)&&x.length<+t.value;if((n||a)&&(E(n,e.message,t.message),!i))return w(_[g].message),_}if(p&&!S&&Zl(x)){const{value:e,message:t}=Oc(p);if(jc(e)&&!x.match(e)&&(_[g]=d({type:Ql,message:t,ref:s},C(Ql,t)),!i))return w(t),_}if(f)if(lc(f)){const e=Rc(await f(x,n),y);if(e&&(_[g]=d(d({},e),C(Kl,e.message)),!i))return w(e.message),_}else if(Nl(f)){let e={};for(const t in f){if(!sc(e)&&!i)break;const a=Rc(await f[t](x,n),y,t);a&&(e=d(d({},a),C(t,a.message)),w(a.message),i&&(_[g]=e))}if(!sc(e)&&(_[g]=d({ref:y},e),!i))return _}return w(!0),_};const Ic={mode:ql,reValidateMode:zl,shouldFocusError:!0};function Fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d(d({},Ic),e),n={submitCount:0,isDirty:!1,isReady:!1,isLoading:lc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const i={};let a,s=(Nl(t.defaultValues)||Nl(t.values))&&El(t.defaultValues||t.values)||{},o=t.shouldUnregister?{}:El(s),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m=d({},h);const p={array:ic(),state:ic()},f=t.criteriaMode===Bl,g=async e=>{if(!t.disabled&&(h.isValid||m.isValid||e)){const e=t.resolver?sc((await w()).errors):await _(i,!0);e!==n.isValid&&p.state.next({isValid:e})}},v=(e,i)=>{!t.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&((e||Array.from(c.mount)).forEach((e=>{e&&(i?Ol(n.validatingFields,e,i):mc(n.validatingFields,e))})),p.state.next({validatingFields:n.validatingFields,isValidating:!sc(n.validatingFields)}))},b=(e,t,n,a)=>{const r=Dl(i,e);if(r){const i=Dl(o,e,Tl(n)?Dl(s,e):n);Tl(i)||a&&a.defaultChecked||t?Ol(o,e,t?i:Nc(r._f)):j(e,i),l.mount&&g()}},x=(e,i,a,r,o)=>{let l=!1,c=!1;const d={name:e};if(!t.disabled){if(!a||r){(h.isDirty||m.isDirty)&&(c=n.isDirty,n.isDirty=d.isDirty=k(),l=c!==d.isDirty);const t=rc(Dl(s,e),i);c=!!Dl(n.dirtyFields,e),t?mc(n.dirtyFields,e):Ol(n.dirtyFields,e,!0),d.dirtyFields=n.dirtyFields,l=l||(h.dirtyFields||m.dirtyFields)&&c!==!t}if(a){const t=Dl(n.touchedFields,e);t||(Ol(n.touchedFields,e,a),d.touchedFields=n.touchedFields,l=l||(h.touchedFields||m.touchedFields)&&t!==a)}l&&o&&p.state.next(d)}return l?d:{}},y=(e,i,r,s)=>{const o=Dl(n.errors,e),l=(h.isValid||m.isValid)&&Rl(i)&&n.isValid!==i;var c;if(t.delayError&&r?(c=()=>((e,t)=>{Ol(n.errors,e,t),p.state.next({errors:n.errors})})(e,r),a=e=>{clearTimeout(u),u=setTimeout(c,e)},a(t.delayError)):(clearTimeout(u),a=null,r?Ol(n.errors,e,r):mc(n.errors,e)),(r?!rc(o,r):o)||!sc(s)||l){const t=d(d(d({},s),l&&Rl(i)?{isValid:i}:{}),{},{errors:n.errors,name:e});n=d(d({},n),t),p.state.next(t)}},w=async e=>{v(e,!0);const n=await t.resolver(o,t.context,((e,t,n,i)=>{const a={};for(const r of e){const e=Dl(t,r);e&&Ol(a,r,e._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:i}})(e||c.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return v(e),n},_=async function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const l in e){const d=e[l];if(d){const{_f:e}=d,u=r(d,vl);if(e){const r=c.array.has(e.name),u=d._f&&(!!(s=d._f)&&!!s.validate&&!!(lc(s.validate)&&s.validate.constructor.name===Ec||Nl(s.validate)&&Object.values(s.validate).find((e=>e.constructor.name===Ec))));u&&h.validatingFields&&v([l],!0);const m=await Lc(d,c.disabled,o,f,t.shouldUseNativeValidation&&!i,r);if(u&&h.validatingFields&&v([l]),m[e.name]&&(a.valid=!1,i))break;!i&&(Dl(m,e.name)?r?Pc(n.errors,m,e.name):Ol(n.errors,e.name,m[e.name]):mc(n.errors,e.name))}!sc(u)&&await _(u,i,a)}}var s;return a.valid},k=(e,n)=>!t.disabled&&(e&&n&&Ol(o,e,n),!rc(M(),s)),N=(e,t,n)=>ec(e,c,d({},l.mount?o:Tl(t)?s:Zl(e)?{[e]:t}:t),n,t),j=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=Dl(i,e);let r=t;if(a){const n=a._f;n&&(!n.disabled&&Ol(o,e,wc(t,n)),r=cc(n.ref)&&_l(t)?"":t,dc(n.ref)?[...n.ref.options].forEach((e=>e.selected=r.includes(e.value))):n.refs?yl(n.ref)?n.refs.forEach((e=>{e.defaultChecked&&e.disabled||(Array.isArray(r)?e.checked=!!r.find((t=>t===e.value)):e.checked=r===e.value||!!r)})):n.refs.forEach((e=>e.checked=e.value===r)):oc(n.ref)?n.ref.value="":(n.ref.value=r,n.ref.type||p.state.next({name:e,values:El(o)})))}(n.shouldDirty||n.shouldTouch)&&x(e,r,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&T(e)},S=(e,t,n)=>{for(const a in t){if(!t.hasOwnProperty(a))return;const r=t[a],s=e+"."+a,o=Dl(i,s);(c.array.has(e)||Nl(r)||o&&!o._f)&&!wl(r)?S(s,r,n):j(s,r,n)}},C=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Dl(i,e),u=c.array.has(e),f=El(t);Ol(o,e,f),u?(p.array.next({name:e,values:El(o)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&a.shouldDirty&&p.state.next({name:e,dirtyFields:vc(s,o),isDirty:k(e,f)})):!r||r._f||_l(f)?j(e,f,a):S(e,f,a),Ac(e,c)&&p.state.next(d({},n)),p.state.next({name:l.mount?e:void 0,values:El(o)})},E=async e=>{l.mount=!0;const r=e.target;let s=r.name,u=!0;const b=Dl(i,s),k=e=>{u=Number.isNaN(e)||wl(e)&&isNaN(e.getTime())||rc(e,Dl(o,s,e))},N=Cc(t.mode),j=Cc(t.reValidateMode);if(b){let l,S;const C=r.type?Nc(b._f):jl(e),E=e.type===Ll||e.type===Il,A=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(b._f)&&!t.resolver&&!Dl(n.errors,s)&&!b._f.deps||((e,t,n,i,a)=>!a.isOnAll&&(!n&&a.isOnTouch?!(t||e):(n?i.isOnBlur:a.isOnBlur)?!e:!(n?i.isOnChange:a.isOnChange)||e))(E,Dl(n.touchedFields,s),n.isSubmitted,j,N),M=Ac(s,c,E);Ol(o,s,C),E?(b._f.onBlur&&b._f.onBlur(e),a&&a(0)):b._f.onChange&&b._f.onChange(e);const P=x(s,C,E),D=!sc(P)||M;if(!E&&p.state.next({name:s,type:e.type,values:El(o)}),A)return(h.isValid||m.isValid)&&("onBlur"===t.mode?E&&g():E||g()),D&&p.state.next(d({name:s},M?{}:P));if(!E&&M&&p.state.next(d({},n)),t.resolver){const{errors:e}=await w([s]);if(k(C),u){const t=Mc(n.errors,i,s),a=Mc(e,i,t.name||s);l=a.error,s=a.name,S=sc(e)}}else v([s],!0),l=(await Lc(b,c.disabled,o,f,t.shouldUseNativeValidation))[s],v([s]),k(C),u&&(l?S=!1:(h.isValid||m.isValid)&&(S=await _(i,!0)));u&&(b._f.deps&&T(b._f.deps),y(s,S,l,P))}},A=(e,t)=>{if(Dl(n.errors,t)&&e.focus)return e.focus(),1},T=async function(e){let a,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=nc(e);if(t.resolver){const t=await(async e=>{const{errors:t}=await w(e);if(e)for(const i of e){const e=Dl(t,i);e?Ol(n.errors,i,e):mc(n.errors,i)}else n.errors=t;return t})(Tl(e)?e:o);a=sc(t),r=e?!o.some((e=>Dl(t,e))):a}else e?(r=(await Promise.all(o.map((async e=>{const t=Dl(i,e);return await _(t&&t._f?{[e]:t}:t)})))).every(Boolean),(r||n.isValid)&&g()):r=a=await _(i);return p.state.next(d(d(d({},!Zl(e)||(h.isValid||m.isValid)&&a!==n.isValid?{}:{name:e}),t.resolver||!e?{isValid:a}:{}),{},{errors:n.errors})),s.shouldFocus&&!r&&Tc(i,A,e?o:c.mount),r},M=e=>{const t=d({},l.mount?o:s);return Tl(e)?t:Zl(e)?Dl(t,e):e.map((e=>Dl(t,e)))},P=(e,t)=>({invalid:!!Dl((t||n).errors,e),isDirty:!!Dl((t||n).dirtyFields,e),error:Dl((t||n).errors,e),isValidating:!!Dl(n.validatingFields,e),isTouched:!!Dl((t||n).touchedFields,e)}),D=(e,t,a)=>{const s=(Dl(i,e,{_f:{}})._f||{}).ref,o=Dl(n.errors,e)||{},{ref:l,message:c,type:u}=o,h=r(o,bl);Ol(n.errors,e,d(d(d({},h),t),{},{ref:s})),p.state.next({name:e,errors:n.errors,isValid:!1}),a&&a.shouldFocus&&s&&s.focus&&s.focus()},R=e=>p.state.subscribe({next:t=>{var i,a,s;i=e.name,a=t.name,s=e.exact,i&&a&&i!==a&&!nc(i).some((e=>e&&(s?e===a:e.startsWith(a)||a.startsWith(e))))||!((e,t,n,i)=>{n(e);const{name:a}=e,s=r(e,gl);return sc(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!i||Bl)))})(t,e.formState||h,B,e.reRenderRoot)||e.callback(d(d({values:d({},o)},n),t))}}).unsubscribe,O=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const r of e?nc(e):c.mount)c.mount.delete(r),c.array.delete(r),a.keepValue||(mc(i,r),mc(o,r)),!a.keepError&&mc(n.errors,r),!a.keepDirty&&mc(n.dirtyFields,r),!a.keepTouched&&mc(n.touchedFields,r),!a.keepIsValidating&&mc(n.validatingFields,r),!t.shouldUnregister&&!a.keepDefaultValue&&mc(s,r);p.state.next({values:El(o)}),p.state.next(d(d({},n),a.keepDirty?{isDirty:k()}:{})),!a.keepIsValid&&g()},L=e=>{let{disabled:t,name:n}=e;(Rl(t)&&l.mount||t||c.disabled.has(n))&&(t?c.disabled.add(n):c.disabled.delete(n))},I=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Dl(i,e);const r=Rl(n.disabled)||Rl(t.disabled);return Ol(i,e,d(d({},a||{}),{},{_f:d(d({},a&&a._f?a._f:{ref:{name:e}}),{},{name:e,mount:!0},n)})),c.mount.add(e),a?L({disabled:Rl(n.disabled)?n.disabled:t.disabled,name:e}):b(e,!0,n.value),d(d(d({},r?{disabled:n.disabled||t.disabled}:{}),t.progressive?{required:!!n.required,min:Sc(n.min),max:Sc(n.max),minLength:Sc(n.minLength),maxLength:Sc(n.maxLength),pattern:Sc(n.pattern)}:{}),{},{name:e,onChange:E,onBlur:E,ref:r=>{if(r){I(e,n),a=Dl(i,e);const t=Tl(r.value)&&r.querySelectorAll&&r.querySelectorAll("input,select,textarea")[0]||r,o=(e=>uc(e)||yl(e))(t),l=a._f.refs||[];if(o?l.find((e=>e===t)):t===a._f.ref)return;Ol(i,e,{_f:d(d({},a._f),o?{refs:[...l.filter(hc),t,...Array.isArray(Dl(s,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t})}),b(e,!1,void 0,t)}else a=Dl(i,e,{}),a._f&&(a._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&(!Sl(c.array,e)||!l.action)&&c.unMount.add(e)}})},F=()=>t.shouldFocusError&&Tc(i,A,c.mount),z=(e,a)=>async r=>{let s;r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let l=El(o);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:e,values:t}=await w();n.errors=e,l=El(t)}else await _(i);if(c.disabled.size)for(const e of c.disabled)mc(l,e);if(mc(n.errors,"root"),sc(n.errors)){p.state.next({errors:{}});try{await e(l,r)}catch(u){s=u}}else a&&await a(d({},n.errors),r),F(),setTimeout(F);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:sc(n.errors)&&!s,submitCount:n.submitCount+1,errors:n.errors}),s)throw s},q=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e?El(e):s,u=El(r),m=sc(e),f=m?s:u;if(a.keepDefaultValues||(s=r),!a.keepValues){if(a.keepDirtyValues){const e=new Set([...c.mount,...Object.keys(vc(s,o))]);for(const t of Array.from(e))Dl(n.dirtyFields,t)?Ol(f,t,Dl(o,t)):C(t,Dl(f,t))}else{if(Cl&&Tl(e))for(const e of c.mount){const t=Dl(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(cc(e)){const t=e.closest("form");if(t){t.reset();break}}}}for(const e of c.mount){const t=Dl(f,e,Dl(s,e));Tl(t)||(Ol(f,e,t),C(e,Dl(f,e)))}}o=El(f),p.array.next({values:d({},f)}),p.state.next({values:d({},f)})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!h.isValid||!!a.keepIsValid||!!a.keepDirtyValues,l.watch=!!t.shouldUnregister,p.state.next({submitCount:a.keepSubmitCount?n.submitCount:0,isDirty:!m&&(a.keepDirty?n.isDirty:!(!a.keepDefaultValues||rc(e,s))),isSubmitted:!!a.keepIsSubmitted&&n.isSubmitted,dirtyFields:m?{}:a.keepDirtyValues?a.keepDefaultValues&&o?vc(s,o):n.dirtyFields:a.keepDefaultValues&&e?vc(s,e):a.keepDirty?n.dirtyFields:{},touchedFields:a.keepTouched?n.touchedFields:{},errors:a.keepErrors?n.errors:{},isSubmitSuccessful:!!a.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1})},W=(e,t)=>q(lc(e)?e(o):e,t),B=e=>{n=d(d({},n),e)},U={control:{register:I,unregister:O,getFieldState:P,handleSubmit:z,setError:D,_subscribe:R,_runSchema:w,_focusError:F,_getWatch:N,_getDirty:k,_setValid:g,_setFieldArray:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,d=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&r&&!t.disabled){if(l.action=!0,u&&Array.isArray(Dl(i,e))){const t=r(Dl(i,e),c.argA,c.argB);d&&Ol(i,e,t)}if(u&&Array.isArray(Dl(n.errors,e))){const t=r(Dl(n.errors,e),c.argA,c.argB);d&&Ol(n.errors,e,t),((e,t)=>{!Ml(Dl(e,t)).length&&mc(e,t)})(n.errors,e)}if((h.touchedFields||m.touchedFields)&&u&&Array.isArray(Dl(n.touchedFields,e))){const t=r(Dl(n.touchedFields,e),c.argA,c.argB);d&&Ol(n.touchedFields,e,t)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=vc(s,o)),p.state.next({name:e,isDirty:k(e,a),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ol(o,e,a)},_setDisabledField:L,_setErrors:e=>{n.errors=e,p.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>Ml(Dl(l.mount?o:s,e,t.shouldUnregister?Dl(s,e,[]):[])),_reset:q,_resetDefaultValues:()=>lc(t.defaultValues)&&t.defaultValues().then((e=>{W(e,t.resetOptions),p.state.next({isLoading:!1})})),_removeUnmounted:()=>{for(const e of c.unMount){const t=Dl(i,e);t&&(t._f.refs?t._f.refs.every((e=>!hc(e))):!hc(t._f.ref))&&O(e)}c.unMount=new Set},_disableForm:e=>{Rl(e)&&(p.state.next({disabled:e}),Tc(i,((t,n)=>{const a=Dl(i,n);a&&(t.disabled=a._f.disabled||e,Array.isArray(a._f.refs)&&a._f.refs.forEach((t=>{t.disabled=a._f.disabled||e})))}),0,!1))},_subjects:p,_proxyFormState:h,get _fields(){return i},get _formValues(){return o},get _state(){return l},set _state(e){l=e},get _defaultValues(){return s},get _names(){return c},set _names(e){c=e},get _formState(){return n},get _options(){return t},set _options(e){t=d(d({},t),e)}},subscribe:e=>(l.mount=!0,m=d(d({},m),e.formState),R(d(d({},e),{},{formState:m}))),trigger:T,register:I,handleSubmit:z,watch:(e,t)=>lc(e)?p.state.subscribe({next:n=>e(N(void 0,t),n)}):N(e,t,!0),setValue:C,getValues:M,reset:W,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Dl(i,e)&&(Tl(t.defaultValue)?C(e,El(Dl(s,e))):(C(e,t.defaultValue),Ol(s,e,El(t.defaultValue))),t.keepTouched||mc(n.touchedFields,e),t.keepDirty||(mc(n.dirtyFields,e),n.isDirty=t.defaultValue?k(e,El(Dl(s,e))):k()),t.keepError||(mc(n.errors,e),h.isValid&&g()),p.state.next(d({},n)))},clearErrors:e=>{e&&nc(e).forEach((e=>mc(n.errors,e))),p.state.next({errors:e?n.errors:{}})},unregister:O,setError:D,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Dl(i,e),a=n&&n._f;if(a){const e=a.refs?a.refs[0]:a.ref;e.focus&&(e.focus(),t.shouldSelect&&lc(e.select)&&e.select())}},getFieldState:P};return d(d({},U),{},{formControl:U})}function zc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.useRef(void 0),n=i.useRef(void 0),[a,s]=i.useState({isDirty:!1,isValidating:!1,isLoading:lc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:lc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=d(d({},e.formControl),{},{formState:a}),e.defaultValues&&!lc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const n=Fc(e),{formControl:i}=n,s=r(n,xl);t.current=d(d({},s),{},{formState:a})}const o=t.current.control;return o._options=e,$l((()=>{const e=o._subscribe({formState:o._proxyFormState,callback:()=>s(d({},o._formState)),reRenderRoot:!0});return s((e=>d(d({},e),{},{isReady:!0}))),o._formState.isReady=!0,e}),[o]),i.useEffect((()=>o._disableForm(e.disabled)),[o,e.disabled]),i.useEffect((()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)}),[o,e.mode,e.reValidateMode]),i.useEffect((()=>{e.errors&&(o._setErrors(e.errors),o._focusError())}),[o,e.errors]),i.useEffect((()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})}),[o,e.shouldUnregister]),i.useEffect((()=>{if(o._proxyFormState.isDirty){const e=o._getDirty();e!==a.isDirty&&o._subjects.state.next({isDirty:e})}}),[o,a.isDirty]),i.useEffect((()=>{e.values&&!rc(e.values,n.current)?(o._reset(e.values,o._options.resetOptions),n.current=e.values,s((e=>d({},e)))):o._resetDefaultValues()}),[o,e.values]),i.useEffect((()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next(d({},o._formState))),o._removeUnmounted()})),t.current.formState=Jl(a,o),t.current}const qc=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Wc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()};var Bc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Uc=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Vc=(0,i.forwardRef)(((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:u}=e,h=r(e,Uc);return(0,i.createElement)("svg",d(d(d({ref:t},Bc),{},{width:a,height:a,stroke:n,strokeWidth:o?24*Number(s)/Number(a):s,className:Wc("lucide",l)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...u.map((e=>{let[t,n]=e;return(0,i.createElement)(t,n)})),...Array.isArray(c)?c:[c]])})),Hc=["className"],Gc=(e,t)=>{const n=(0,i.forwardRef)(((n,a)=>{let{className:s}=n,o=r(n,Hc);return(0,i.createElement)(Vc,d({ref:a,iconNode:t,className:Wc("lucide-".concat((l=qc(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},o));var l}));return n.displayName=qc(e),n},Qc=Gc("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Yc=Gc("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Kc=Gc("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Xc=Gc("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Jc=Gc("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),$c=Gc("ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]),Zc=e=>{let{size:t="default",message:n}=e;const{t:i}=bs("common"),a={small:"h-4 w-4",default:"h-8 w-8",large:"h-12 w-12"};return(0,$o.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat({small:"p-2",default:"p-8",large:"p-12"}[t]),children:[(0,$o.jsxs)("div",{className:"relative",children:[(0,$o.jsx)($c,{className:"".concat(a[t]," text-blue-600 animate-pulse")}),(0,$o.jsx)("div",{className:"absolute inset-0 ".concat(a[t]," border-2 border-blue-200 border-t-blue-600 rounded-full animate-spin")})]}),(n||!n)&&(0,$o.jsx)("p",{className:"mt-4 text-sm text-gray-600 animate-pulse",children:n||i("loading.default")})]})},ed=Gc("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),td=e=>{let{className:t=""}=e;const{currentLanguage:n,languages:a,changeLanguage:r}=rl(),[s,o]=(0,i.useState)(!1),l=(0,i.useRef)(null);(0,i.useEffect)((()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const c=a.find((e=>e.code===n))||a[0];return(0,$o.jsxs)("div",{className:"relative ".concat(t),ref:l,children:[(0,$o.jsxs)("button",{onClick:()=>o(!s),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(t.includes("text-white")?"text-white hover:text-blue-100 hover:bg-white hover:bg-opacity-20":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"),"aria-expanded":s,"aria-haspopup":"true","aria-label":"Select language",children:[(0,$o.jsx)(ed,{className:"h-4 w-4"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:c.flag}),(0,$o.jsx)("span",{className:"hidden md:inline",children:c.name}),(0,$o.jsx)("svg",{className:"h-4 w-4 transition-transform duration-200 ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&(0,$o.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:a.map((e=>(0,$o.jsxs)("button",{onClick:()=>(async e=>{await r(e),o(!1)})(e.code),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-3 ".concat(n===e.code?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"),children:[(0,$o.jsx)("span",{className:"text-lg",children:e.flag}),(0,$o.jsx)("span",{children:e.name}),n===e.code&&(0,$o.jsx)("svg",{className:"h-4 w-4 ml-auto text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,$o.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.code)))})]})},nd=()=>{const[e]=Nt(),{login:t}=el(),[n,a]=(0,i.useState)("request"),[r,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),{t:c}=bs("auth"),{register:u,handleSubmit:h,formState:{errors:m},setValue:p,reset:f}=zc();(0,i.useEffect)((()=>{const t=e.get("token");t&&(p("token",t),g.mutate({token:t}))}),[e]);const g=(0,Et.useMutation)((e=>{let{token:t}=e;return Gs(t)}),{onSuccess:e=>{t(e.user,e.token),Vn.success(c("messages.welcome_back",{name:e.user.firstName}),{duration:4e3,icon:"\ud83d\udea2"})},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||c("messages.login_failed");i.includes("expired")||i.includes("Invalid or expired login link")?Vn.error(c("messages.magic_link_expired"),{duration:8e3,icon:"\u26a0\ufe0f"}):"NETWORK_ERROR"!==e.code&&navigator.onLine?Vn.error(c("messages.login_failed"),{duration:6e3,icon:"\u274c"}):Vn.error(c("messages.network_error"),{duration:6e3,icon:"\ud83d\udce1"})}}),v=(0,Et.useMutation)((e=>{let{email:t,password:n}=e;return Qs(t,n)}),{onSuccess:e=>{t(e.user,e.token),Vn.success("Welcome, Administrator ".concat(e.user.firstName,"!"),{duration:4e3,icon:"\u2699\ufe0f"})},onError:e=>{var t,n;(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||c("messages.login_failed");"NETWORK_ERROR"!==e.code&&navigator.onLine?Vn.error(c("messages.invalid_credentials"),{duration:6e3,icon:"\ud83d\udd12"}):Vn.error(c("messages.network_error"),{duration:6e3,icon:"\ud83d\udce1"})}}),b=(0,Et.useMutation)((e=>{let{email:t}=e;return Js(t)}),{onSuccess:()=>{Vn.success(c("messages.magic_link_sent"),{duration:6e3,icon:"\ud83d\udce7"}),a("token")},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||c("messages.login_failed");"NETWORK_ERROR"!==e.code&&navigator.onLine?Vn.error(i,{duration:6e3,icon:"\u274c"}):Vn.error(c("messages.network_error"),{duration:6e3,icon:"\ud83d\udce1"})}}),x=e=>{"token"===n?g.mutate({token:e.token,email:e.tokenEmail}):"admin"===n?v.mutate({email:e.email,password:e.password}):"request"===n&&b.mutate({email:e.requestEmail})},y=g.isLoading||v.isLoading||b.isLoading;return(0,$o.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[(0,$o.jsxs)("div",{className:"fixed inset-0 overflow-hidden z-0",children:[(0,$o.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 min-w-full min-h-full object-cover",style:{filter:"brightness(0.5)",width:"100vw",height:"56.25vw",minHeight:"100vh",minWidth:"177.78vh",imageRendering:"crisp-edges"},children:(0,$o.jsx)("source",{src:"https://23g-sharedhosting-burando-dev.s3.eu-west-1.amazonaws.com/app/uploads/2024/01/15102006/burando-korter.mp4",type:"video/mp4"})}),(0,$o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-burando-navy/40 via-burando-teal/25 to-burando-bright-teal/35"}),(0,$o.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white/10 rounded-full blur-3xl animate-pulse"}),(0,$o.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-burando-bright-teal/20 rounded-full blur-3xl animate-pulse delay-1000"}),(0,$o.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-burando-teal/10 rounded-full blur-3xl animate-pulse delay-500"})]}),(0,$o.jsxs)("div",{className:"max-w-lg w-full relative z-20",children:[(0,$o.jsxs)("div",{className:"text-center mb-12",children:[(0,$o.jsx)("div",{className:"flex justify-end mb-4",children:(0,$o.jsx)(td,{className:"text-white"})}),(0,$o.jsx)("div",{className:"flex justify-center mb-8",children:(0,$o.jsxs)("div",{className:"relative group",children:[(0,$o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-burando-teal to-burando-bright-teal rounded-2xl blur-lg opacity-75 animate-pulse group-hover:opacity-90 transition-opacity duration-300"}),(0,$o.jsx)("div",{className:"relative glass-card-elevated p-6 hover-lift",children:(0,$o.jsx)("img",{src:"/burando-logo-white.svg",alt:"Burando Maritime Services",className:"h-16 w-auto mx-auto filter drop-shadow-lg"})})]})}),(0,$o.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4 tracking-tight drop-shadow-2xl",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:c("title")}),(0,$o.jsx)("p",{className:"text-white text-lg sm:text-xl font-medium drop-shadow-xl mb-4",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.7)"},children:c("tagline")}),(0,$o.jsx)("div",{className:"mt-6 h-1 w-32 bg-gradient-to-r from-burando-teal to-burando-bright-teal rounded-full mx-auto"})]}),(0,$o.jsxs)("div",{className:"glass-card-elevated p-6 sm:p-8 lg:p-10 hover-lift fade-in",children:[(0,$o.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,$o.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-burando-bright-teal to-burando-teal rounded-full mb-4 sm:mb-6 shadow-2xl",children:(0,$o.jsx)("span",{className:"text-2xl sm:text-3xl",children:"\ud83d\udea2"})}),(0,$o.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3 drop-shadow-xl",style:{textShadow:"1px 1px 3px rgba(0,0,0,0.8)"},children:c("login_methods.title")}),(0,$o.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,$o.jsx)("p",{className:"text-white/90 text-base sm:text-lg mb-2",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.6)"},children:"New to the platform?"}),(0,$o.jsx)("p",{className:"text-white/80 text-sm sm:text-base leading-relaxed",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.6)"},children:"Enter your email address and we'll send you a secure login link."}),(0,$o.jsx)("div",{className:"mt-4 text-white/70 text-xs sm:text-sm",children:"Already have a login link? Enter the code from your email below."})]})]}),"request"===n&&(0,$o.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,$o.jsxs)("div",{className:"text-center mb-6",children:[(0,$o.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-burando-bright-teal to-burando-teal rounded-full mb-4 sm:mb-6 shadow-2xl animate-pulse",children:(0,$o.jsx)(Qc,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white"})}),(0,$o.jsx)("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-3 sm:mb-4",children:c("login_methods.request.title")}),(0,$o.jsx)("p",{className:"text-white/90 text-base sm:text-lg leading-relaxed font-medium px-2",children:c("login_methods.request.description")})]}),(0,$o.jsxs)("form",{onSubmit:h(x),className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label text-white text-lg font-semibold mb-3 block",htmlFor:"primary-email",children:c("login_methods.request.email_label")}),(0,$o.jsx)("input",d({id:"primary-email",type:"email",className:"glass-input w-full text-lg sm:text-xl py-5 sm:py-6 px-5 sm:px-6 text-white placeholder-white/50 rounded-xl border-2 ".concat(m.requestEmail?"border-red-400":"border-white/20 focus:border-burando-bright-teal"," transition-all duration-300 min-h-[56px] touch-manipulation text-center sm:text-left"),placeholder:c("login_methods.request.email_placeholder"),autoComplete:"email",autoFocus:!0},u("requestEmail",{required:c("validation.email_required"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:c("validation.email_invalid")}}))),m.requestEmail&&(0,$o.jsxs)("p",{className:"text-red-300 text-base mt-3 flex items-center",role:"alert",children:[(0,$o.jsx)(Yc,{className:"h-4 w-4 mr-2"}),m.requestEmail.message]})]}),(0,$o.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-burando-bright-teal to-burando-teal text-white font-bold py-7 sm:py-8 px-6 sm:px-8 rounded-2xl text-xl sm:text-2xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl disabled:opacity-50 disabled:transform-none disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-burando-bright-teal/50 focus:ring-offset-2 shadow-2xl animate-pulse hover:animate-none min-h-[64px] touch-manipulation",children:y?(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),(0,$o.jsx)("span",{className:"text-lg sm:text-xl",children:c("login_methods.request.loading")})]}):(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)(Qc,{className:"h-7 w-7 sm:h-8 sm:w-8 mr-3 sm:mr-4"}),(0,$o.jsx)("span",{children:c("login_methods.request.button")})]})})]}),(0,$o.jsx)("div",{className:"mt-8 glass-card p-6 border-l-4 border-burando-bright-teal",children:(0,$o.jsxs)("div",{className:"flex items-start",children:[(0,$o.jsx)("div",{className:"bg-burando-bright-teal/20 p-2 rounded-full mr-4 mt-1",children:(0,$o.jsx)(Yc,{className:"h-5 w-5 text-burando-bright-teal"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"font-semibold text-white mb-2",children:c("login_methods.request.help_title")}),(0,$o.jsx)("p",{className:"text-gray-200 text-sm leading-relaxed",children:c("login_methods.request.help_text")})]})]})}),(0,$o.jsx)("div",{className:"mt-8 sm:mt-12",children:r?(0,$o.jsx)("div",{className:"pt-6 border-t border-white/10",children:(0,$o.jsxs)("div",{className:"text-center space-y-4",children:[(0,$o.jsx)("p",{className:"text-white/50 text-sm mb-4",children:c("login_methods.request.alternative_text")}),(0,$o.jsx)("div",{className:"max-w-sm mx-auto",children:(0,$o.jsxs)("button",{type:"button",onClick:()=>a("token"),className:"w-full flex items-center justify-center px-5 py-4 text-base font-medium text-white/70 hover:text-white bg-white/5 hover:bg-white/10 rounded-lg transition-all duration-200 border border-white/10 hover:border-white/20 min-h-[48px] touch-manipulation",children:[(0,$o.jsx)(Kc,{className:"h-5 w-5 mr-3"}),c("login_methods.request.manual_token_button")]})}),(0,$o.jsx)("div",{className:"pt-4 border-t border-white/5",children:(0,$o.jsx)("button",{type:"button",onClick:()=>a("admin"),className:"text-sm text-white/40 hover:text-white/60 transition-colors duration-300 underline min-h-[44px] py-3 px-2 touch-manipulation",children:c("login_methods.request.admin_button")})}),(0,$o.jsx)("div",{className:"pt-2",children:(0,$o.jsx)("button",{type:"button",onClick:()=>s(!1),className:"text-white/40 hover:text-white/60 text-xs transition-colors duration-300",children:"\u2190 Hide options"})})]})}):(0,$o.jsx)("div",{className:"text-center",children:(0,$o.jsx)("button",{type:"button",onClick:()=>s(!0),className:"text-white/60 hover:text-white/80 text-base font-medium transition-colors duration-300 underline decoration-dotted underline-offset-4 py-3 px-4 min-h-[44px] touch-manipulation",children:"Need help logging in?"})})})]}),"request"!==n&&"admin"!==n&&(0,$o.jsx)("div",{className:"mb-8",children:(0,$o.jsxs)("button",{type:"button",onClick:()=>a("request"),className:"text-burando-bright-teal hover:text-white text-sm font-medium transition-colors duration-200 flex items-center mb-6",children:[(0,$o.jsx)(Xc,{className:"h-4 w-4 mr-2 rotate-90"}),c("login_methods.token.back_button")]})}),"token"===n&&(0,$o.jsx)("form",{onSubmit:h(x),className:"space-y-6 sm:space-y-8",children:(0,$o.jsx)($o.Fragment,{children:(0,$o.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,$o.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,$o.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-18 sm:h-18 bg-gradient-to-br from-burando-teal to-burando-navy rounded-full mb-4 sm:mb-6 shadow-lg",children:(0,$o.jsx)(Kc,{className:"h-7 w-7 sm:h-8 sm:w-8 text-white"})}),(0,$o.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:c("login_methods.token.title")}),(0,$o.jsx)("p",{className:"text-white/70 text-sm leading-relaxed max-w-md mx-auto px-2",children:c("login_methods.token.description")})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label text-white text-base font-medium mb-2 block",htmlFor:"token-email",children:c("login_methods.token.email_label")}),(0,$o.jsx)("input",d({id:"token-email",type:"email",className:"glass-input w-full text-base sm:text-lg py-4 px-5 text-white placeholder-white/50 rounded-lg border ".concat(m.tokenEmail?"border-red-400":"border-white/20 focus:border-burando-teal"," transition-all duration-300 min-h-[52px] touch-manipulation"),placeholder:c("login_methods.token.email_placeholder"),autoComplete:"email"},u("tokenEmail",{required:c("validation.email_required"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:c("validation.email_invalid")}}))),m.tokenEmail&&(0,$o.jsxs)("p",{className:"text-red-300 text-sm mt-2 flex items-center",role:"alert",children:[(0,$o.jsx)(Yc,{className:"h-4 w-4 mr-1"}),m.tokenEmail.message]})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label text-white text-base font-medium mb-2 block",htmlFor:"token-input",children:c("login_methods.token.token_label")}),(0,$o.jsx)("input",d({id:"token-input",type:"text",className:"glass-input w-full text-base sm:text-lg py-4 px-5 text-white placeholder-white/50 font-mono rounded-lg border ".concat(m.token?"border-red-400":"border-white/20 focus:border-burando-teal"," transition-all duration-300 min-h-[52px] touch-manipulation"),placeholder:c("login_methods.token.token_placeholder"),autoComplete:"off"},u("token",{required:c("validation.token_required"),minLength:{value:10,message:c("validation.token_min_length")}}))),m.token&&(0,$o.jsxs)("p",{className:"text-red-300 text-sm mt-2 flex items-center",role:"alert",children:[(0,$o.jsx)(Yc,{className:"h-4 w-4 mr-1"}),m.token.message]})]})]}),(0,$o.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-burando-teal to-burando-navy text-white font-semibold py-5 sm:py-5 px-6 rounded-lg text-base sm:text-lg transition-all duration-300 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-burando-teal/50 min-h-[52px] touch-manipulation",children:y?(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)(Zc,{size:"small",message:""}),(0,$o.jsx)("span",{className:"ml-3",children:c("login_methods.token.loading")})]}):(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)(Kc,{className:"h-5 w-5 mr-3"}),(0,$o.jsx)("span",{children:c("login_methods.token.button")})]})})]})})}),"admin"===n&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"mb-8",children:(0,$o.jsxs)("button",{type:"button",onClick:()=>{a("request"),f()},className:"text-burando-bright-teal hover:text-white text-sm font-medium transition-colors duration-200 flex items-center mb-6",children:[(0,$o.jsx)(Xc,{className:"h-4 w-4 mr-2 rotate-90"}),c("login_methods.admin.back_button")]})}),(0,$o.jsx)("form",{onSubmit:h(x),className:"space-y-8",children:(0,$o.jsx)($o.Fragment,{children:(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"text-center mb-6",children:[(0,$o.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full mb-4 shadow-lg",children:(0,$o.jsx)(Jc,{className:"h-6 w-6 text-white"})}),(0,$o.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:c("login_methods.admin.title")}),(0,$o.jsx)("p",{className:"text-white/60 text-xs",children:c("login_methods.admin.description")})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label text-white text-sm font-medium mb-2 block",htmlFor:"admin-email",children:c("login_methods.admin.email_label")}),(0,$o.jsx)("input",d({id:"admin-email",type:"email",className:"glass-input text-sm py-3 px-4 text-white placeholder-white/40 rounded-lg border ".concat(m.email?"border-red-400":"border-white/20 focus:border-red-400"," transition-all duration-300"),placeholder:c("login_methods.admin.email_placeholder"),autoComplete:"email"},u("email",{required:c("validation.admin_email_required"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:c("validation.email_invalid")}}))),m.email&&(0,$o.jsxs)("p",{className:"text-red-300 text-xs mt-1 flex items-center",role:"alert",children:[(0,$o.jsx)(Yc,{className:"h-3 w-3 mr-1"}),m.email.message]})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label text-white text-sm font-medium mb-2 block",htmlFor:"admin-password",children:c("login_methods.admin.password_label")}),(0,$o.jsx)("input",d({id:"admin-password",type:"password",className:"glass-input text-sm py-3 px-4 text-white placeholder-white/40 rounded-lg border ".concat(m.password?"border-red-400":"border-white/20 focus:border-red-400"," transition-all duration-300"),placeholder:c("login_methods.admin.password_placeholder"),autoComplete:"current-password"},u("password",{required:c("validation.admin_password_required"),minLength:{value:8,message:c("validation.admin_password_min_length")}}))),m.password&&(0,$o.jsxs)("p",{className:"text-red-300 text-xs mt-1 flex items-center",role:"alert",children:[(0,$o.jsx)(Yc,{className:"h-3 w-3 mr-1"}),m.password.message]})]})]}),(0,$o.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white font-medium py-3 px-4 rounded-lg text-sm transition-all duration-300 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-red-500/50",children:y?(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)(Zc,{size:"small",message:""}),(0,$o.jsx)("span",{className:"ml-2",children:c("login_methods.admin.loading")})]}):(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)(Jc,{className:"h-4 w-4 mr-2"}),(0,$o.jsx)("span",{children:c("login_methods.admin.button")})]})}),(0,$o.jsx)("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,$o.jsx)("p",{className:"text-red-200 text-xs text-center",children:c("login_methods.admin.security_notice")})})]})})})]})]}),(0,$o.jsxs)("div",{className:"text-center mt-8",children:[(0,$o.jsxs)("div",{className:"inline-flex items-center space-x-2 text-white text-sm glass-card px-6 py-3 hover-lift",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-burando-light-green rounded-full animate-pulse"}),(0,$o.jsx)("span",{className:"font-medium",children:c("tagline")})]}),(0,$o.jsx)("p",{className:"text-white/70 text-xs mt-4",children:c("copyright")})]}),(0,$o.jsx)("div",{className:"mt-8 text-center",children:(0,$o.jsxs)("div",{className:"glass-card p-4 border border-white/10",children:[(0,$o.jsx)("p",{className:"text-white/60 text-sm mb-3",children:"How was your login experience?"}),(0,$o.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,$o.jsx)("button",{onClick:()=>Vn.success("Thank you for your feedback! \ud83d\ude0a",{icon:"\ud83d\udc4d"}),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:"Good experience",children:"\ud83d\ude0a"}),(0,$o.jsx)("button",{onClick:()=>Vn.success("Thank you for your feedback! We'll improve this.",{icon:"\ud83d\udc4e"}),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:"Needs improvement",children:"\ud83d\ude10"}),(0,$o.jsx)("button",{onClick:()=>Vn.success("Thank you for your feedback! We're sorry for the trouble.",{icon:"\ud83d\ude1e"}),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:"Poor experience",children:"\ud83d\ude1e"})]})]})})]})]})},id=Gc("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ad=Gc("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),rd=Gc("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),sd=Gc("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),od=Gc("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ld=Gc("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),cd=Gc("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),dd=Gc("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),ud=Gc("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),hd=Gc("mail-plus",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M16 19h6",key:"xwg31i"}]]),md=Gc("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),pd=Gc("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fd=Gc("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gd=Gc("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),vd=Gc("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),bd=Gc("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),xd=Gc("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),yd=e=>{let{isOpen:t,onClose:n,onSuccess:a}=e;const{t:r}=bs(["common","forms"]),[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)([]),u=(0,Et.useQueryClient)(),{register:h,handleSubmit:m,formState:{errors:p},reset:f}=zc(),g=[{key:"view_crew_list",label:r("manager.permission_labels.view_crew_list"),description:r("manager.permission_descriptions.view_crew_list")},{key:"manage_crew_members",label:r("manager.permission_labels.manage_crew_members"),description:r("manager.permission_descriptions.manage_crew_members")},{key:"review_quiz_results",label:r("manager.permission_labels.review_quiz_results"),description:r("manager.permission_descriptions.review_quiz_results")},{key:"approve_training_completion",label:r("manager.permission_labels.approve_training_completion"),description:r("manager.permission_descriptions.approve_training_completion")},{key:"view_certificates",label:r("manager.permission_labels.view_certificates"),description:r("manager.permission_descriptions.view_certificates")},{key:"regenerate_certificates",label:r("manager.permission_labels.regenerate_certificates"),description:r("manager.permission_descriptions.regenerate_certificates")},{key:"view_compliance_reports",label:r("manager.permission_labels.view_compliance_reports"),description:r("manager.permission_descriptions.view_compliance_reports")},{key:"export_training_data",label:r("manager.permission_labels.export_training_data"),description:r("manager.permission_descriptions.export_training_data")},{key:"content_edit",label:r("manager.permission_labels.content_edit"),description:r("manager.permission_descriptions.content_edit")}],v=(0,Et.useMutation)(Io,{onSuccess:()=>{u.invalidateQueries("managers"),u.invalidateQueries("admin-stats"),Vn.success(r("manager.manager_created")),f(),c([]),n(),a&&a()},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||r("manager.failed_create");Vn.error(i)}}),b=()=>{f(),c([]),o(!1),n()};return t?(0,$o.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,$o.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl",children:[(0,$o.jsxs)("div",{className:"sticky top-0 bg-white z-10 flex items-center justify-between p-4 sm:p-5 border-b",children:[(0,$o.jsx)("h3",{className:"text-lg sm:text-xl font-medium text-gray-900",children:r("manager.add_manager")}),(0,$o.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 -mr-2 rounded-lg min-touch-target",children:(0,$o.jsx)(fd,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,$o.jsxs)("form",{onSubmit:m((e=>{const t={email:e.email,firstName:e.firstName,lastName:e.lastName,position:e.position,password:e.password,preferredLanguage:e.preferredLanguage||"en",permissions:l};v.mutate(t)})),className:"p-4 sm:p-5 space-y-4 sm:space-y-6",children:[(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(gd,{size:16,className:"inline mr-1"}),r("manager.first_name")]}),(0,$o.jsx)("input",d({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.firstName?"border-red-300":"border-gray-300")},h("firstName",{required:r("forms:required"),minLength:{value:2,message:r("forms:min_length",{field:r("manager.first_name"),min:2})}}))),p.firstName&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.firstName.message})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(gd,{size:16,className:"inline mr-1"}),r("manager.last_name")]}),(0,$o.jsx)("input",d({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.lastName?"border-red-300":"border-gray-300")},h("lastName",{required:r("forms:required"),minLength:{value:2,message:r("forms:min_length",{field:r("manager.last_name"),min:2})}}))),p.lastName&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.lastName.message})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(Qc,{size:16,className:"inline mr-1"}),r("profile.email_address")]}),(0,$o.jsx)("input",d({type:"email",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.email?"border-red-300":"border-gray-300")},h("email",{required:r("forms:required"),pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:r("forms:email_invalid")}}))),p.email&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.email.message})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(vd,{size:16,className:"inline mr-1"}),r("profile.position")]}),(0,$o.jsx)("input",d({type:"text",placeholder:"e.g., Fleet Manager, Training Coordinator",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.position?"border-red-300":"border-gray-300")},h("position")))]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(ed,{size:16,className:"inline mr-1"}),r("profile.language_preference")]}),(0,$o.jsx)("select",d(d({className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.preferredLanguage?"border-red-300":"border-gray-300")},h("preferredLanguage",{required:r("forms:required")})),{},{defaultValue:"en",children:[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}].map((e=>(0,$o.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),p.preferredLanguage&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.preferredLanguage.message}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r("profile.language_description")})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(bd,{size:16,className:"inline mr-1"}),r("manager.password")]}),(0,$o.jsxs)("div",{className:"relative",children:[(0,$o.jsx)("input",d({type:s?"text":"password",className:"w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(p.password?"border-red-300":"border-gray-300")},h("password",{required:r("forms:required"),minLength:{value:8,message:r("forms:password_min_length",{min:8})},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:r("manager.password_requirements")}}))),(0,$o.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!s),children:s?(0,$o.jsx)(xd,{size:16}):(0,$o.jsx)(pd,{size:16})})]}),p.password&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.password.message}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r("manager.password_requirements")})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("manager.manager_permissions")}),(0,$o.jsx)("button",{type:"button",onClick:()=>{l.length===g.length?c([]):c(g.map((e=>e.key)))},className:"text-sm text-blue-600 hover:text-blue-800",children:l.length===g.length?r("manager.deselect_all"):r("manager.select_all")})]}),(0,$o.jsx)("div",{className:"max-h-40 sm:max-h-48 overflow-y-auto border border-gray-200 rounded-md p-3",children:(0,$o.jsx)("div",{className:"space-y-3",children:g.map((e=>(0,$o.jsxs)("div",{className:"flex items-start",children:[(0,$o.jsx)("input",{type:"checkbox",id:e.key,checked:l.includes(e.key),onChange:()=>{return t=e.key,void c((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,$o.jsxs)("div",{className:"ml-3",children:[(0,$o.jsx)("label",{htmlFor:e.key,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e.label}),(0,$o.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.key)))})}),(0,$o.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:0===l.length?r("manager.permissions_default"):r("manager.permissions_selected",{count:l.length})})]}),(0,$o.jsx)("div",{className:"sticky bottom-0 bg-white border-t -mx-4 sm:-mx-5 px-4 sm:px-5 py-3 sm:py-4",children:(0,$o.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3",children:[(0,$o.jsx)("button",{type:"button",onClick:b,className:"w-full sm:w-auto px-4 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-touch-target",children:r("buttons.cancel")}),(0,$o.jsx)("button",{type:"submit",disabled:v.isLoading,className:"w-full sm:w-auto px-4 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-touch-target",children:v.isLoading?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),r("manager.creating")]}):r("manager.create_manager")})]})})]})]})}):null},wd=e=>{let{isOpen:t,onClose:n,onSuccess:a,managerId:r}=e;const{t:s}=bs(["common","forms"]),[o,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)([]),h=(0,Et.useQueryClient)(),{register:m,handleSubmit:p,formState:{errors:f},reset:g,setValue:v}=zc(),b=[{key:"view_crew_list",label:s("manager.permission_labels.view_crew_list"),description:s("manager.permission_descriptions.view_crew_list")},{key:"manage_crew_members",label:s("manager.permission_labels.manage_crew_members"),description:s("manager.permission_descriptions.manage_crew_members")},{key:"review_quiz_results",label:s("manager.permission_labels.review_quiz_results"),description:s("manager.permission_descriptions.review_quiz_results")},{key:"approve_training_completion",label:s("manager.permission_labels.approve_training_completion"),description:s("manager.permission_descriptions.approve_training_completion")},{key:"view_certificates",label:s("manager.permission_labels.view_certificates"),description:s("manager.permission_descriptions.view_certificates")},{key:"regenerate_certificates",label:s("manager.permission_labels.regenerate_certificates"),description:s("manager.permission_descriptions.regenerate_certificates")},{key:"view_compliance_reports",label:s("manager.permission_labels.view_compliance_reports"),description:s("manager.permission_descriptions.view_compliance_reports")},{key:"export_training_data",label:s("manager.permission_labels.export_training_data"),description:s("manager.permission_descriptions.export_training_data")},{key:"content_edit",label:s("manager.permission_labels.content_edit"),description:s("manager.permission_descriptions.content_edit")}],{data:x,isLoading:y}=(0,Et.useQuery)(["manager",r],(()=>Lo(r)),{enabled:t&&!!r,onSuccess:e=>{if(e.manager){const t=e.manager;v("firstName",t.first_name),v("lastName",t.last_name),v("position",t.position),v("email",t.email),v("preferredLanguage",t.preferred_language||"en"),u(e.permissions||[])}}}),w=(0,Et.useMutation)((e=>{let{id:t,data:n}=e;return Fo(t,n)}),{onSuccess:()=>{h.invalidateQueries("managers"),h.invalidateQueries(["manager",r]),h.invalidateQueries("admin-stats"),Vn.success(s("manager.manager_updated")),g(),u([]),n(),a&&a()},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager.failed_update");Vn.error(i)}});return(0,i.useEffect)((()=>{t||(g(),u([]),l(!1))}),[t,g]),t?(0,$o.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,$o.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl",children:[(0,$o.jsxs)("div",{className:"sticky top-0 bg-white z-10 flex items-center justify-between p-4 sm:p-5 border-b",children:[(0,$o.jsx)("h3",{className:"text-lg sm:text-xl font-medium text-gray-900",children:s("manager.edit_manager")}),(0,$o.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 -mr-2 rounded-lg min-touch-target",children:(0,$o.jsx)(fd,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),y?(0,$o.jsxs)("div",{className:"p-6 text-center",children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,$o.jsx)("p",{className:"mt-2 text-gray-600",children:s("manager.loading_manager")})]}):(0,$o.jsxs)("form",{onSubmit:p((e=>{const t={firstName:e.firstName,lastName:e.lastName,position:e.position,preferredLanguage:e.preferredLanguage,permissions:c};e.password&&e.password.trim()&&(t.password=e.password),w.mutate({id:r,data:t})})),className:"p-4 sm:p-5 space-y-4 sm:space-y-6",children:[(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(gd,{size:16,className:"inline mr-1"}),s("manager.first_name")]}),(0,$o.jsx)("input",d({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(f.firstName?"border-red-300":"border-gray-300")},m("firstName",{required:s("forms:required"),minLength:{value:2,message:s("forms:min_length",{field:s("manager.first_name"),min:2})}}))),f.firstName&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.firstName.message})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(gd,{size:16,className:"inline mr-1"}),s("manager.last_name")]}),(0,$o.jsx)("input",d({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(f.lastName?"border-red-300":"border-gray-300")},m("lastName",{required:s("forms:required"),minLength:{value:2,message:s("forms:min_length",{field:s("manager.last_name"),min:2})}}))),f.lastName&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.lastName.message})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(Qc,{size:16,className:"inline mr-1"}),s("profile.email_address")]}),(0,$o.jsx)("input",d(d({type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500"},m("email")),{},{disabled:!0})),(0,$o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:s("manager.email_cannot_change")})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(vd,{size:16,className:"inline mr-1"}),s("profile.position")]}),(0,$o.jsx)("input",d({type:"text",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(f.position?"border-red-300":"border-gray-300")},m("position",{required:s("forms:required"),minLength:{value:2,message:s("forms:min_length",{field:s("profile.position"),min:2})}}))),f.position&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.position.message})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(ed,{size:16,className:"inline mr-1"}),s("profile.language_preference")]}),(0,$o.jsx)("select",d(d({className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(f.preferredLanguage?"border-red-300":"border-gray-300")},m("preferredLanguage",{required:s("forms:required")})),{},{children:[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}].map((e=>(0,$o.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),f.preferredLanguage&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.preferredLanguage.message}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s("profile.language_description")})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,$o.jsx)(bd,{size:16,className:"inline mr-1"}),s("manager.new_password")]}),(0,$o.jsxs)("div",{className:"relative",children:[(0,$o.jsx)("input",d({type:o?"text":"password",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 pr-10 ".concat(f.password?"border-red-300":"border-gray-300")},m("password",{minLength:{value:8,message:s("forms:password_min_length",{min:8})}}))),(0,$o.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!o),children:o?(0,$o.jsx)(xd,{className:"h-4 w-4 text-gray-400"}):(0,$o.jsx)(pd,{className:"h-4 w-4 text-gray-400"})})]}),f.password&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.password.message}),(0,$o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:s("manager.password_leave_blank")})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s("manager.permissions")}),(0,$o.jsx)("button",{type:"button",onClick:()=>{c.length===b.length?u([]):u(b.map((e=>e.key)))},className:"text-sm text-blue-600 hover:text-blue-800",children:c.length===b.length?s("manager.deselect_all"):s("manager.select_all")})]}),(0,$o.jsx)("div",{className:"space-y-2 max-h-40 sm:max-h-48 overflow-y-auto border border-gray-200 rounded-md p-3",children:b.map((e=>(0,$o.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[(0,$o.jsx)("input",{type:"checkbox",checked:c.includes(e.key),onChange:()=>{return t=e.key,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,$o.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.key)))})]}),(0,$o.jsx)("div",{className:"sticky bottom-0 bg-white border-t -mx-4 sm:-mx-5 px-4 sm:px-5 py-3 sm:py-4",children:(0,$o.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3",children:[(0,$o.jsx)("button",{type:"button",onClick:n,className:"w-full sm:w-auto px-4 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 min-touch-target",children:s("buttons.cancel")}),(0,$o.jsx)("button",{type:"submit",disabled:w.isLoading,className:"w-full sm:w-auto px-4 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-touch-target",children:w.isLoading?s("manager.updating"):s("manager.update_manager")})]})})]})]})}):null},_d=Gc("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),kd=Gc("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Nd=Gc("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),jd=Gc("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Sd=Gc("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Cd=()=>{const{t:e}=bs(["admin","common"]),[t,n]=(0,i.useState)({page:1,limit:25,user_id:"",action:"",resource_type:"",from_date:"",to_date:""}),[a,r]=(0,i.useState)(!1),{data:s,isLoading:o,error:l,refetch:c}=(0,Et.useQuery)(["audit-logs",t],(()=>Bo(t)),{keepPreviousData:!0,onError:t=>{Vn.error(e("admin:dashboard.audit.failed"))}}),u=(null===s||void 0===s?void 0:s.auditLogs)||[],h=(null===s||void 0===s?void 0:s.pagination)||{},m=e=>{switch(e){case"admin_login":case"manager_login":return(0,$o.jsx)(bd,{className:"w-4 h-4"});case"view_managers":case"create_manager":case"update_manager":return(0,$o.jsx)(ad,{className:"w-4 h-4"});case"view_system_stats":case"view_audit_log":return(0,$o.jsx)(pd,{className:"w-4 h-4"});case"create_template":case"update_template":return(0,$o.jsx)(rd,{className:"w-4 h-4"});default:return(0,$o.jsx)(od,{className:"w-4 h-4"})}},p=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),f=(e,t)=>{n((n=>d(d({},n),{},{[e]:t,page:1})))},g=e=>{n((t=>d(d({},t),{},{page:e})))};return o?(0,$o.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,$o.jsx)("span",{className:"ml-2 text-gray-600",children:e("admin:dashboard.audit.loading")})]}):l?(0,$o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,$o.jsxs)("div",{className:"flex",children:[(0,$o.jsx)("div",{className:"flex-shrink-0",children:(0,$o.jsx)(Jc,{className:"h-5 w-5 text-red-400"})}),(0,$o.jsxs)("div",{className:"ml-3",children:[(0,$o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:e("admin:dashboard.audit.failed")}),(0,$o.jsx)("div",{className:"mt-2",children:(0,$o.jsx)("button",{onClick:()=>c(),className:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200",children:e("admin:dashboard.audit.tryAgain")})})]})]})}):(0,$o.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,$o.jsxs)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:[(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:e("admin:dashboard.audit.title")}),(0,$o.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:e("admin:dashboard.audit.description")})]}),(0,$o.jsxs)("div",{className:"flex gap-2",children:[(0,$o.jsxs)("button",{onClick:()=>r(!a),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target ".concat(a?"bg-gray-100":""),children:[(0,$o.jsx)(_d,{className:"w-4 h-4 mr-2"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:e("admin:dashboard.audit.filters")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Filter"})]}),(0,$o.jsxs)("button",{onClick:()=>c(),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,$o.jsx)(kd,{className:"w-4 h-4 mr-2"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:e("admin:dashboard.audit.refresh")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Refresh"})]})]})]}),a&&(0,$o.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.action")}),(0,$o.jsxs)("select",{value:t.action,onChange:e=>f("action",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,$o.jsx)("option",{value:"",children:e("admin:dashboard.audit.allActions")}),(0,$o.jsx)("option",{value:"admin_login",children:e("admin:dashboard.audit.actions.adminLogin")}),(0,$o.jsx)("option",{value:"manager_login",children:e("admin:dashboard.audit.actions.managerLogin")}),(0,$o.jsx)("option",{value:"create_manager",children:e("admin:dashboard.audit.actions.userCreated")}),(0,$o.jsx)("option",{value:"update_manager",children:e("admin:dashboard.audit.actions.userUpdated")}),(0,$o.jsx)("option",{value:"view_managers",children:e("admin:dashboard.audit.actions.managerLogin")}),(0,$o.jsx)("option",{value:"view_system_stats",children:"View Stats"}),(0,$o.jsx)("option",{value:"create_template",children:e("admin:dashboard.audit.actions.certificateGenerated")})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.resourceType")}),(0,$o.jsxs)("select",{value:t.resource_type,onChange:e=>f("resource_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,$o.jsx)("option",{value:"",children:e("admin:dashboard.audit.allActions")}),(0,$o.jsx)("option",{value:"authentication",children:"Authentication"}),(0,$o.jsx)("option",{value:"manager_management",children:"Manager Management"}),(0,$o.jsx)("option",{value:"system_administration",children:"System Administration"}),(0,$o.jsx)("option",{value:"template_management",children:"Template Management"})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.fromDate")}),(0,$o.jsx)("input",{type:"date",value:t.from_date,onChange:e=>f("from_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("admin:dashboard.audit.toDate")}),(0,$o.jsx)("input",{type:"date",value:t.to_date,onChange:e=>f("to_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,$o.jsx)("div",{className:"flex items-end sm:col-span-2 md:col-span-1",children:(0,$o.jsxs)("button",{onClick:()=>{n({page:1,limit:25,user_id:"",action:"",resource_type:"",from_date:"",to_date:""})},className:"w-full px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,$o.jsx)("span",{className:"hidden sm:inline",children:e("admin:dashboard.audit.clearFilters")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Clear"})]})})]})]}),(0,$o.jsx)("div",{className:"divide-y divide-gray-200",children:0===u.length?(0,$o.jsxs)("div",{className:"px-4 py-12 text-center",children:[(0,$o.jsx)(Jc,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,$o.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:e("admin:dashboard.audit.noLogs")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e("admin:dashboard.audit.noLogsDescription")})]}):u.map((t=>{return(0,$o.jsxs)("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:[(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("div",{className:"flex-shrink-0 p-2 rounded-full ".concat((i=t.action,i.includes("login")?"text-green-600 bg-green-100":i.includes("create")?"text-blue-600 bg-blue-100":i.includes("update")?"text-yellow-600 bg-yellow-100":i.includes("delete")?"text-red-600 bg-red-100":i.includes("view")?"text-gray-600 bg-gray-100":"text-purple-600 bg-purple-100")),children:m(t.action)}),(0,$o.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 space-y-1 sm:space-y-0",children:[(0,$o.jsx)("span",{className:"text-sm font-medium text-gray-900",children:p(t.action)}),(0,$o.jsx)("span",{className:"hidden sm:inline text-sm text-gray-500",children:"\u2022"}),(0,$o.jsx)("span",{className:"text-sm text-gray-500",children:(n=t.resourceType,n.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))}),t.resourceId&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("span",{className:"hidden sm:inline text-sm text-gray-500",children:"\u2022"}),(0,$o.jsxs)("span",{className:"text-sm text-gray-500",children:["ID: ",t.resourceId]})]})]}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 mt-1 space-y-1 sm:space-y-0",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(gd,{className:"w-3 h-3 text-gray-400"}),(0,$o.jsx)("span",{className:"text-sm text-gray-500 truncate",children:t.user?"".concat(t.user.firstName," ").concat(t.user.lastName," (").concat(t.user.email,")"):"Unknown User"})]}),t.ipAddress&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("span",{className:"hidden sm:inline text-sm text-gray-500",children:"\u2022"}),(0,$o.jsx)("span",{className:"text-sm text-gray-500",children:t.ipAddress})]})]})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 ml-11 sm:ml-0",children:[(0,$o.jsx)(Nd,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-xs sm:text-sm",children:new Date(t.createdAt).toLocaleString()})]})]}),t.details&&Object.keys(t.details).length>0&&(0,$o.jsx)("div",{className:"mt-2 ml-11",children:(0,$o.jsxs)("details",{className:"text-sm text-gray-600",children:[(0,$o.jsx)("summary",{className:"cursor-pointer hover:text-gray-800 p-2 rounded bg-gray-50 hover:bg-gray-100 min-touch-target",children:e("admin:dashboard.audit.viewDetails")}),(0,$o.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-x-auto max-h-40 scrollbar-thin",children:JSON.stringify(t.details,null,2)})]})})]},t.id);var n,i}))}),h.totalPages>1&&(0,$o.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,$o.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,$o.jsx)("button",{onClick:()=>g(h.page-1),disabled:h.page<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e("admin:dashboard.audit.previous")}),(0,$o.jsx)("button",{onClick:()=>g(h.page+1),disabled:h.page>=h.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e("admin:dashboard.audit.next")})]}),(0,$o.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,$o.jsx)("div",{children:(0,$o.jsxs)("p",{className:"text-sm text-gray-700",children:[e("admin:dashboard.audit.showing")," ",(0,$o.jsx)("span",{className:"font-medium",children:(h.page-1)*h.limit+1})," ",e("admin:dashboard.audit.to")," ",(0,$o.jsx)("span",{className:"font-medium",children:Math.min(h.page*h.limit,h.total)})," ",e("admin:dashboard.audit.of")," ",(0,$o.jsx)("span",{className:"font-medium",children:h.total})," ",e("admin:dashboard.audit.results")]})}),(0,$o.jsx)("div",{children:(0,$o.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,$o.jsx)("button",{onClick:()=>g(h.page-1),disabled:h.page<=1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,$o.jsx)(jd,{className:"h-5 w-5"})}),(0,$o.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:e("admin:dashboard.audit.page",{page:h.page,totalPages:h.totalPages})}),(0,$o.jsx)("button",{onClick:()=>g(h.page+1),disabled:h.page>=h.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,$o.jsx)(Sd,{className:"h-5 w-5"})})]})})]})]})]})},Ed=Gc("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ad=Gc("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),Td=Gc("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),Md=Gc("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Pd=Gc("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Dd=Gc("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Rd=Gc("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Od=()=>{const{t:e}=bs(["admin","common"]),[t,n]=(0,i.useState)({}),[a,r]=(0,i.useState)(!1),[s,o]=(0,i.useState)("application"),[l,c]=(0,i.useState)("smtp"),[u,h]=(0,i.useState)("claude"),m=(0,Et.useQueryClient)(),{data:p,isLoading:f,error:g,refetch:v}=(0,Et.useQuery)("system-settings",Uo,{onSuccess:e=>{var t,i,a;n(e.settings||{}),r(!1);const s=(null===(t=e.settings)||void 0===t?void 0:t.email)||{},o=(null===(i=s.email_service_provider)||void 0===i?void 0:i.value)||(null===(a=s.email_provider)||void 0===a?void 0:a.value)||"smtp";c(o)},onError:t=>{Vn.error(e("admin:dashboard.messages.loadFailed"))}}),b=(0,Et.useMutation)(Vo,{onSuccess:()=>{m.invalidateQueries("system-settings"),Vn.success(e("api:success.updated")),r(!1)},onError:t=>{var n,i;const a=(null===(n=t.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||e("api:errors.general.serverError");Vn.error(a)}}),x=(0,Et.useMutation)(Ho,{onSuccess:()=>{m.invalidateQueries("system-settings"),Vn.success(e("common:success.updated")),r(!1)},onError:t=>{var n,i;const a=(null===(n=t.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||e("api:errors.general.serverError");Vn.error(a)}}),y=[{key:"application",label:e("admin:settings.categories.application"),icon:Ed,description:e("admin:settings.descriptions.application")},{key:"translation",label:"Translation Services",icon:Ad,description:"Configure AI translation providers and API keys"},{key:"email",label:e("admin:settings.categories.email"),icon:Qc,description:e("admin:settings.descriptions.email")},{key:"security",label:e("admin:settings.categories.security"),icon:Jc,description:e("admin:settings.descriptions.security")},{key:"training",label:e("admin:settings.categories.training"),icon:Td,description:e("admin:settings.descriptions.training")},{key:"notifications",label:e("admin:settings.categories.notifications"),icon:Md,description:e("admin:settings.descriptions.notifications")}],w=(e,t,i)=>{n((n=>{var a;return d(d({},n),{},{[e]:d(d({},n[e]),{},{[t]:d(d({},null===(a=n[e])||void 0===a?void 0:a[t]),{},{value:i})})})})),r(!0)},_=e=>{c(e),w("email","email_service_provider",e),w("email","email_provider",e)},k=e=>{h(e),w("translation","translation_provider",e)},N=(e,t,n)=>{const{value:i,type:a,description:r,options:s}=n;switch(a){case"boolean":return(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("input",{type:"checkbox",checked:"true"===i,onChange:n=>w(e,t,n.target.checked?"true":"false"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,$o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:r})]});case"number":return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("input",{type:"number",value:i,onChange:n=>w(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]});case"email":return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("input",{type:"email",value:i,onChange:n=>w(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]});case"password":return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("input",{type:"password",value:i,onChange:n=>w(e,t,n.target.value),placeholder:"Enter password/token",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r}),t.includes("smtp")&&(0,$o.jsx)("p",{className:"mt-1 text-xs text-amber-600",children:"\ud83d\udd12 This credential is stored securely in the database"}),t.includes("mailersend")&&(0,$o.jsx)("p",{className:"mt-1 text-xs text-green-600",children:"\ud83d\udd11 MailerSend API credentials are encrypted and secure"})]});case"select":return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("select",{value:i,onChange:n=>w(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:s&&Array.isArray(s)&&s.map((e=>(0,$o.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r}),s&&!Array.isArray(s)&&(0,$o.jsx)("p",{className:"mt-1 text-xs text-red-500",children:"Warning: Invalid options format for this setting"})]});default:return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("input",{type:"text",value:i,onChange:n=>w(e,t,n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]})}},j=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");if(f)return(0,$o.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,$o.jsx)("span",{className:"ml-2 text-gray-600",children:e("admin:settings.messages.loading")})]});if(g)return(0,$o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,$o.jsxs)("div",{className:"flex",children:[(0,$o.jsx)("div",{className:"flex-shrink-0",children:(0,$o.jsx)(Pd,{className:"h-5 w-5 text-red-400"})}),(0,$o.jsxs)("div",{className:"ml-3",children:[(0,$o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:e("admin:settings.messages.load_failed")}),(0,$o.jsx)("div",{className:"mt-2",children:(0,$o.jsx)("button",{onClick:()=>v(),className:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200",children:e("admin:settings.messages.try_again")})})]})]})});const S=y.find((e=>e.key===s)),C=(()=>{const e=t[s]||{};return"email"===s?(e=>{if(!e)return{};const t={};return Object.entries(e).forEach((e=>{let[n,i]=e;(["from_email","from_name","admin_notifications"].includes(n)||n.startsWith("smtp_")&&"smtp"===l||n.startsWith("mailersend_")&&"mailersend"===l)&&(t[n]=i)})),t})(e):"translation"===s?(e=>{if(!e)return{};const t={};return Object.entries(e).forEach((e=>{let[n,i]=e;(["translation_provider","default_source_language","enabled_languages"].includes(n)||n.startsWith("anthropic_")&&"claude"===u||n.startsWith("openai_")&&"openai"===u||n.startsWith("microsoft_")&&"microsoft"===u||n.startsWith("google_")&&"google"===u)&&(t[n]=i)})),t})(e):e})();return(0,$o.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,$o.jsx)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:e("admin:settings.title")}),(0,$o.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:e("admin:settings.description")})]}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:[a&&(0,$o.jsxs)("div",{className:"flex items-center justify-center text-amber-600 text-sm py-2 sm:py-0",children:[(0,$o.jsx)(Pd,{className:"w-4 h-4 mr-1"}),e("admin:settings.actions.unsaved_changes")]}),(0,$o.jsxs)("div",{className:"flex gap-2",children:[(0,$o.jsxs)("button",{onClick:()=>v(),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,$o.jsx)(kd,{className:"w-4 h-4 mr-2"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:e("admin:settings.actions.refresh")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Refresh"})]}),(0,$o.jsx)("button",{onClick:()=>{b.mutate({settings:t})},disabled:!a||b.isLoading,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-touch-target",children:b.isLoading?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:e("admin:settings.actions.saving")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Saving"})]}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Dd,{className:"w-4 h-4 mr-2"}),e("admin:settings.actions.save")]})})]})]})]})}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,$o.jsxs)("div",{className:"sm:hidden border-b border-gray-200 p-4",children:[(0,$o.jsx)("label",{htmlFor:"category-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Settings Category"}),(0,$o.jsx)("select",{id:"category-select",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:y.map((e=>(0,$o.jsx)("option",{value:e.key,children:e.label},e.key)))})]}),(0,$o.jsx)("div",{className:"hidden sm:block w-64 bg-gray-50 border-r border-gray-200",children:(0,$o.jsx)("nav",{className:"p-4 space-y-2",children:y.map((e=>{const t=e.icon;return(0,$o.jsx)("button",{onClick:()=>o(e.key),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(s===e.key?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(t,{className:"w-4 h-4 mr-3"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium",children:e.label}),(0,$o.jsx)("div",{className:"text-xs text-gray-500 hidden lg:block",children:e.description})]})]})},e.key)}))})}),(0,$o.jsxs)("div",{className:"flex-1 p-4 sm:p-6",children:[(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-6",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[S&&(0,$o.jsx)(S.icon,{className:"w-5 h-5 mr-2"}),(0,$o.jsxs)("span",{className:"hidden sm:inline",children:[null===S||void 0===S?void 0:S.label," Settings"]}),(0,$o.jsx)("span",{className:"sm:hidden",children:null===S||void 0===S?void 0:S.label})]}),(0,$o.jsx)("p",{className:"text-sm text-gray-500 mt-1 hidden sm:block",children:null===S||void 0===S?void 0:S.description})]}),(0,$o.jsxs)("button",{onClick:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.confirm(t?e("admin:settings.messages.reset_confirm",{category:t}):e("admin:settings.messages.reset_all_confirm"))&&x.mutate({category:t})}(s),disabled:x.isLoading,className:"inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 min-touch-target",children:[(0,$o.jsx)(Rd,{className:"w-4 h-4 mr-2"}),e("admin:settings.actions.reset")]})]}),"email"===s&&(0,$o.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border",children:[(0,$o.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:e("admin:settings.email.provider_title")}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,$o.jsx)("button",{onClick:()=>_("smtp"),className:"flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("smtp"===l?"bg-blue-600 text-white border-2 border-blue-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-300"),children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"font-semibold",children:e("admin:settings.email.smtp_title")}),(0,$o.jsx)("div",{className:"text-xs opacity-75",children:e("admin:settings.email.smtp_description")})]})}),(0,$o.jsx)("button",{onClick:()=>_("mailersend"),className:"flex-1 px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("mailersend"===l?"bg-blue-600 text-white border-2 border-blue-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-300"),children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"font-semibold",children:e("admin:settings.email.mailersend_title")}),(0,$o.jsx)("div",{className:"text-xs opacity-75",children:e("admin:settings.email.mailersend_description")})]})})]}),(0,$o.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:e("admin:settings.email.provider_description")})]}),"translation"===s&&(0,$o.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border",children:[(0,$o.jsx)("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Translation Provider"}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,$o.jsx)("button",{onClick:()=>k("claude"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("claude"===u?"bg-orange-600 text-white border-2 border-orange-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-300"),children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"font-semibold",children:"\ud83e\udd16 Claude"}),(0,$o.jsx)("div",{className:"text-xs opacity-75",children:"Best for maritime content"})]})}),(0,$o.jsx)("button",{onClick:()=>k("openai"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("openai"===u?"bg-green-600 text-white border-2 border-green-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-green-300"),children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"font-semibold",children:"\ud83e\udde0 OpenAI"}),(0,$o.jsx)("div",{className:"text-xs opacity-75",children:"GPT-3.5 translations"})]})}),(0,$o.jsx)("button",{onClick:()=>k("microsoft"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("microsoft"===u?"bg-blue-600 text-white border-2 border-blue-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-300"),children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"font-semibold",children:"\ud83d\udd37 Microsoft"}),(0,$o.jsx)("div",{className:"text-xs opacity-75",children:"2M chars/month free"})]})}),(0,$o.jsx)("button",{onClick:()=>k("google"),className:"px-4 py-3 rounded-md text-sm font-medium transition-colors ".concat("google"===u?"bg-red-600 text-white border-2 border-red-600":"bg-white text-gray-700 border-2 border-gray-300 hover:border-red-300"),children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"font-semibold",children:"\ud83c\udf10 Google"}),(0,$o.jsx)("div",{className:"text-xs opacity-75",children:"500K chars/month free"})]})})]}),(0,$o.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-md",children:(0,$o.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,$o.jsx)("strong",{children:"\ud83d\udcdd Setup Guide:"})," Choose your preferred provider and enter the API key below. Claude offers the best maritime terminology understanding, while Microsoft and Google provide generous free tiers."]})})]}),(0,$o.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[Object.entries(C).map((e=>{let[t,n]=e;return(0,$o.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j(t)}),N(s,t,n)]},"".concat(s,"-").concat(t))})),0===Object.keys("email"===s?(e=>{if(!e)return{};const n=(()=>{var e,n,i,a;return(null===t||void 0===t||null===(e=t.email)||void 0===e||null===(n=e.email_provider)||void 0===n?void 0:n.value)||(null===t||void 0===t||null===(i=t.email)||void 0===i||null===(a=i.email_service_provider)||void 0===a?void 0:a.value)||"smtp"})(),i={};return Object.entries(e).forEach((e=>{let[t,a]=e;(["from_email","from_name","admin_notifications"].includes(t)||t.startsWith("smtp_")&&"smtp"===n||t.startsWith("mailersend_")&&"mailersend"===n)&&(i[t]=a)})),i})(C):C).length&&(0,$o.jsxs)("div",{className:"text-center py-12",children:[(0,$o.jsx)(od,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,$o.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:e("admin:settings.empty.title")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e("admin:settings.empty.message")})]})]},"".concat(s,"-").concat(l))]},s)]})]})},Ld=Gc("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Id=Gc("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Fd=Gc("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),zd=Gc("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),qd=Gc("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Wd=Gc("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Bd=Gc("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ud=Gc("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Vd=Gc("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Hd=Gc("anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]),Gd=()=>{const{t:e}=bs(["admin","common"]),[t,n]=(0,i.useState)("24h"),[a,r]=(0,i.useState)("overview"),[s,o]=(0,i.useState)(!0),{data:l,isLoading:c,error:d,refetch:u}=(0,Et.useQuery)(["performance-metrics",t],(()=>Go({timeRange:t})),{refetchInterval:!!s&&3e4,onError:t=>{Vn.error(e("admin:performance.fetch_error"))}}),{data:h,isLoading:m}=(0,Et.useQuery)(["maritime-metrics",t],(()=>Qo({timeRange:t})),{refetchInterval:!!s&&3e4}),{data:p,isLoading:f}=(0,Et.useQuery)(["feedback-summary",t],(()=>Yo({timeRange:t})),{refetchInterval:!!s&&6e4});if(c||m||f)return(0,$o.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(kd,{className:"w-5 h-5 animate-spin text-blue-600"}),(0,$o.jsx)("span",{className:"text-gray-600",children:e("admin:performance.loading")})]})});if(d)return(0,$o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Pd,{className:"w-5 h-5 text-red-600"}),(0,$o.jsx)("span",{className:"text-red-800",children:e("admin:performance.error_loading")})]})});const g=(null===l||void 0===l?void 0:l.metrics)||{},v=(null===h||void 0===h?void 0:h.metrics)||{},b=(null===p||void 0===p?void 0:p.summary)||{};return(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[(0,$o.jsx)(Ld,{className:"w-6 h-6 text-blue-600"}),(0,$o.jsx)("span",{children:e("admin:performance.title")})]}),(0,$o.jsx)("p",{className:"text-gray-600 mt-1",children:e("admin:performance.subtitle")})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[(0,$o.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,$o.jsx)("option",{value:"1h",children:e("admin:performance.time_ranges.1h")}),(0,$o.jsx)("option",{value:"24h",children:e("admin:performance.time_ranges.24h")}),(0,$o.jsx)("option",{value:"7d",children:e("admin:performance.time_ranges.7d")}),(0,$o.jsx)("option",{value:"30d",children:e("admin:performance.time_ranges.30d")})]}),(0,$o.jsx)("button",{onClick:()=>o(!s),className:"px-3 py-2 rounded-lg border transition-colors ".concat(s?"bg-green-50 border-green-200 text-green-700":"bg-gray-50 border-gray-200 text-gray-700"),children:(0,$o.jsx)(kd,{className:"w-4 h-4 ".concat(s?"animate-spin":"")})}),(0,$o.jsxs)("button",{onClick:async()=>{try{const n=await Ko({timeRange:t}),i=new Blob([n.data],{type:"text/csv"}),a=window.URL.createObjectURL(i),r=document.createElement("a");r.href=a,r.download="performance-data-".concat(t,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r),Vn.success(e("admin:performance.export_success"))}catch(d){Vn.error(e("admin:performance.export_error"))}},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,$o.jsx)(Id,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:e("admin:performance.export")})]})]})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,$o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,$o.jsx)(Fd,{className:"w-6 h-6 text-blue-600"})}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.overall_score")}),(0,$o.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[v.performanceScore||85,"/100"]}),(0,$o.jsxs)("p",{className:"text-xs text-green-600 flex items-center",children:[(0,$o.jsx)(zd,{className:"w-3 h-3 mr-1"}),"+5% from last period"]})]})]})}),(0,$o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,$o.jsx)(ad,{className:"w-6 h-6 text-green-600"})}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.active_users")}),(0,$o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.activeUsers||0}),(0,$o.jsxs)("p",{className:"text-xs text-gray-500",children:[v.usersAtSea||0," at sea, ",v.usersInPort||0," in port"]})]})]})}),(0,$o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,$o.jsx)(qd,{className:"w-6 h-6 text-yellow-600"})}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.avg_response_time")}),(0,$o.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[g.avgResponseTime||0,"ms"]}),(0,$o.jsxs)("p",{className:"text-xs text-green-600 flex items-center",children:[(0,$o.jsx)(Wd,{className:"w-3 h-3 mr-1"}),"-12ms from last period"]})]})]})}),(0,$o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,$o.jsx)(Bd,{className:"w-6 h-6 text-purple-600"})}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e("admin:performance.metrics.user_satisfaction")}),(0,$o.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[b.averageRating||0,"/5.0"]}),(0,$o.jsxs)("p",{className:"text-xs text-gray-500",children:[b.totalResponses||0," responses"]})]})]})})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,$o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,$o.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(Ud,{className:"w-5 h-5 text-blue-600 mr-2"}),e("admin:performance.maritime.connection_quality")]}),(0,$o.jsx)("div",{className:"space-y-3",children:v.connectionQuality&&Object.entries(v.connectionQuality).map((e=>{let[t,n]=e;return(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:["offline"===t?(0,$o.jsx)(Vd,{className:"w-4 h-4 text-red-500"}):(0,$o.jsx)(Ud,{className:"w-4 h-4 text-green-500"}),(0,$o.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:t})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,$o.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(n/(v.totalUsers||1)*100,"%")}})}),(0,$o.jsx)("span",{className:"text-sm font-medium text-gray-900",children:n})]})]},t)}))})]}),(0,$o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,$o.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)($c,{className:"w-5 h-5 text-blue-600 mr-2"}),e("admin:performance.maritime.location_distribution")]}),(0,$o.jsx)("div",{className:"space-y-3",children:v.locationDistribution&&Object.entries(v.locationDistribution).map((e=>{let[t,n]=e;return(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Hd,{className:"w-4 h-4 text-blue-500"}),(0,$o.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:t.replace("_"," ")})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,$o.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(n/(v.totalUsers||1)*100,"%")}})}),(0,$o.jsx)("span",{className:"text-sm font-medium text-gray-900",children:n})]})]},t)}))})]})]}),g.alerts&&g.alerts.length>0&&(0,$o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,$o.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(Pd,{className:"w-5 h-5 text-red-600 mr-2"}),e("admin:performance.alerts.title")]}),(0,$o.jsx)("div",{className:"space-y-3",children:g.alerts.map(((e,t)=>(0,$o.jsx)("div",{className:"p-3 rounded-lg border-l-4 ".concat("critical"===e.severity?"bg-red-50 border-red-500":"high"===e.severity?"bg-orange-50 border-orange-500":"medium"===e.severity?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"),children:(0,$o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,$o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]}),(0,$o.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("critical"===e.severity?"bg-red-100 text-red-800":"high"===e.severity?"bg-orange-100 text-orange-800":"medium"===e.severity?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.severity})]})},t)))})]}),b.recentFeedback&&b.recentFeedback.length>0&&(0,$o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e("admin:performance.feedback.recent_title")}),(0,$o.jsx)("div",{className:"space-y-3",children:b.recentFeedback.slice(0,5).map(((e,t)=>(0,$o.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,$o.jsx)("div",{className:"text-2xl",children:"positive"===e.type?"\ud83d\ude0a":"negative"===e.type?"\ud83d\ude1e":"\ud83d\ude10"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("span",{className:"font-medium text-gray-900",children:e.context}),e.rating&&(0,$o.jsxs)("span",{className:"text-sm text-yellow-600",children:["\u2605".repeat(e.rating),"\u2606".repeat(5-e.rating)]})]}),e.comment&&(0,$o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.comment}),(0,$o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.submitted_at).toLocaleString()})]})]},t)))})]})]})},Qd=()=>{const{user:e}=el(),{t:t}=bs(["admin","common"]),n=pe(),a=(0,Et.useQueryClient)(),[r,s]=(0,i.useState)("overview"),[o,l]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[h,m]=(0,i.useState)({}),[p,f]=(0,i.useState)(!0),[g,v]=(0,i.useState)(!1),[b,x]=(0,i.useState)(!1),[y,w]=(0,i.useState)(null),[_,k]=(0,i.useState)({}),N=(e,t)=>{k((n=>d(d({},n),{},{[e]:t})))};(0,i.useEffect)((()=>{"admin"===(null===e||void 0===e?void 0:e.role)&&j()}),[e]);const j=async()=>{try{f(!0);const[e,t,n]=await Promise.all([Oo(),Ro(),Co()]);l(e.managers||[]),m(t||{}),u(n.templates||[])}catch(e){Vn.error(t("admin:dashboard.messages.loadFailed"))}finally{f(!1)}},S=[{id:"overview",name:t("admin:dashboard.tabs.overview"),icon:id},{id:"managers",name:t("admin:dashboard.tabs.managers"),icon:ad},{id:"templates",name:t("admin:dashboard.tabs.templates"),icon:rd},{id:"performance",name:"Performance",icon:id},{id:"content",name:t("admin:dashboard.tabs.content"),icon:sd},{id:"settings",name:t("admin:dashboard.tabs.settings"),icon:od},{id:"audit",name:t("admin:dashboard.tabs.audit"),icon:Jc}];return p?(0,$o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,$o.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,$o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,$o.jsx)("div",{className:"bg-white shadow",children:(0,$o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,$o.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t("admin:dashboard.title")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t("common:welcome_back",{name:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)})})]}),(0,$o.jsx)("div",{className:"flex items-center space-x-4",children:(0,$o.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,$o.jsx)(Jc,{className:"w-3 h-3 mr-1"}),t("common:roles.admin")]})})]})})}),(0,$o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$o.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,$o.jsx)("nav",{className:"-mb-px flex overflow-x-auto scrollbar-hide",children:S.map((e=>{const t=e.icon;return(0,$o.jsxs)("button",{onClick:()=>s(e.id),className:"".concat(r===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-2 px-3 sm:px-1 border-b-2 font-medium text-sm flex items-center flex-shrink-0"),children:[(0,$o.jsx)(t,{className:"w-4 h-4 mr-1 sm:mr-2"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:e.name}),(0,$o.jsx)("span",{className:"sm:hidden",children:e.name.split(" ")[0]})]},e.id)}))})}),"overview"===r&&(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[(0,$o.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg cursor-pointer hover:shadow-lg transition-shadow duration-200 hover:bg-gray-50",onClick:()=>s("managers"),children:(0,$o.jsx)("div",{className:"p-5",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"flex-shrink-0",children:(0,$o.jsx)(ad,{className:"h-6 w-6 text-gray-400"})}),(0,$o.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,$o.jsxs)("dl",{children:[(0,$o.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("admin:dashboard.stats.managers")}),(0,$o.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:h.totalManagers||0})]})})]})})}),(0,$o.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,$o.jsx)("div",{className:"p-5",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"flex-shrink-0",children:(0,$o.jsx)(ad,{className:"h-6 w-6 text-gray-400"})}),(0,$o.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,$o.jsxs)("dl",{children:[(0,$o.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("admin:dashboard.stats.crew")}),(0,$o.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:h.totalCrew||0})]})})]})})}),(0,$o.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg cursor-pointer hover:shadow-lg transition-shadow duration-200 hover:bg-gray-50",onClick:()=>s("templates"),children:(0,$o.jsx)("div",{className:"p-5",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"flex-shrink-0",children:(0,$o.jsx)(rd,{className:"h-6 w-6 text-gray-400"})}),(0,$o.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,$o.jsxs)("dl",{children:[(0,$o.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("admin:dashboard.tabs.templates")}),(0,$o.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:c.length})]})})]})})})]}),"managers"===r&&(0,$o.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,$o.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t("admin:dashboard.sections.managers.title")}),(0,$o.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:t("admin:dashboard.sections.managers.description")})]}),(0,$o.jsxs)("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 w-full sm:w-auto justify-center",children:[(0,$o.jsx)(ld,{className:"w-4 h-4 mr-2"}),t("admin:dashboard.sections.managers.add")]})]})}),(0,$o.jsx)("ul",{className:"divide-y divide-gray-200",children:o.map((e=>(0,$o.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"flex-shrink-0",children:(0,$o.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,$o.jsx)(ad,{className:"h-5 w-5 text-gray-600"})})}),(0,$o.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,$o.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,$o.jsxs)("div",{className:"text-sm text-gray-500 truncate",children:[(0,$o.jsx)("span",{className:"block sm:inline",children:e.email}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:" \u2022 "}),(0,$o.jsx)("span",{className:"block sm:inline",children:e.position})]})]})]}),(0,$o.jsxs)("div",{className:"flex items-center gap-2 ml-14 sm:ml-0",children:[(0,$o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?t("admin:dashboard.sections.managers.active"):t("admin:dashboard.sections.managers.inactive")}),(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("button",{onClick:()=>(async(e,n,i)=>{const a="toggle-".concat(e);try{N(a,!0),await Fo(e,{is_active:!n});const r=n?"managerDeactivated":"managerActivated";Vn.success(t("admin:dashboard.messages.".concat(r),{name:i})),j()}catch(r){Vn.error(t("admin:dashboard.messages.statusUpdateFailed"))}finally{N(a,!1)}})(e.id,e.is_active,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full ".concat(e.is_active?"text-red-600 hover:bg-red-100":"text-green-600 hover:bg-green-100"," disabled:opacity-50 disabled:cursor-not-allowed"),title:e.is_active?t("admin:dashboard.tooltips.deactivateManager"):t("admin:dashboard.tooltips.activateManager"),disabled:_["toggle-".concat(e.id)],children:_["toggle-".concat(e.id)]?(0,$o.jsx)(cd,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):e.is_active?(0,$o.jsx)(dd,{className:"w-5 h-5 sm:w-4 sm:h-4"}):(0,$o.jsx)(ud,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,$o.jsx)("button",{onClick:()=>(async(e,n)=>{const i="magic-".concat(e);try{N(i,!0),await qo(e),Vn.success(t("admin:dashboard.messages.magicLinkSent",{name:n}))}catch(s){var a,r;const e=(null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||t("admin:dashboard.messages.magicLinkFailed");Vn.error(e)}finally{N(i,!1)}})(e.id,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full text-purple-600 hover:bg-purple-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("admin:dashboard.tooltips.sendMagicLink"),disabled:!e.is_active||_["magic-".concat(e.id)],children:_["magic-".concat(e.id)]?(0,$o.jsx)(cd,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,$o.jsx)(Qc,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,$o.jsx)("button",{onClick:()=>(async(e,n)=>{const i="welcome-".concat(e);try{N(i,!0),await Wo(e),Vn.success(t("admin:dashboard.messages.welcomeEmailResent",{name:n})),a.invalidateQueries(["manager",e]),j()}catch(o){var r,s;const e=(null===(r=o.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.error)||t("admin:dashboard.messages.welcomeEmailFailed");Vn.error(e)}finally{N(i,!1)}})(e.id,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full text-green-600 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("admin:dashboard.tooltips.resendWelcomeEmail"),disabled:!e.is_active||_["welcome-".concat(e.id)],children:_["welcome-".concat(e.id)]?(0,$o.jsx)(cd,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,$o.jsx)(hd,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,$o.jsx)("button",{onClick:()=>{return t=e.id,w(t),void x(!0);var t},className:"p-2 sm:p-1 rounded-full text-blue-600 hover:bg-blue-100",title:t("admin:dashboard.tooltips.editManager"),children:(0,$o.jsx)(sd,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,$o.jsx)("button",{onClick:()=>(async(e,n)=>{if(window.confirm(t("admin:dashboard.messages.deleteConfirm",{name:n}))){const n="delete-".concat(e);try{N(n,!0),await zo(e),Vn.success(t("admin:dashboard.messages.managerDeleted")),j()}catch(i){Vn.error(t("admin:dashboard.messages.deleteFailed"))}finally{N(n,!1)}}})(e.id,"".concat(e.first_name," ").concat(e.last_name)),className:"p-2 sm:p-1 rounded-full text-red-600 hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("admin:dashboard.tooltips.deleteManager"),disabled:_["delete-".concat(e.id)],children:_["delete-".concat(e.id)]?(0,$o.jsx)(cd,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,$o.jsx)(md,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]})]})},e.id)))})]}),"templates"===r&&(0,$o.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,$o.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t("admin:dashboard.sections.templates.title")}),(0,$o.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:t("admin:dashboard.sections.templates.description")})]}),(0,$o.jsxs)("button",{onClick:()=>window.location.href="/templates/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 w-full sm:w-auto justify-center",children:[(0,$o.jsx)(ld,{className:"w-4 h-4 mr-2"}),t("admin:dashboard.sections.templates.create")]})]})}),c.length>0?(0,$o.jsx)("ul",{className:"divide-y divide-gray-200",children:c.map((e=>(0,$o.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,$o.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,$o.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,$o.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,$o.jsx)("span",{className:"block sm:inline truncate",children:e.description}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:" \u2022 "}),(0,$o.jsxs)("span",{className:"block sm:inline",children:["Created ",new Date(e.createdAt||e.created_at).toLocaleDateString()]})]})]}),(0,$o.jsxs)("div",{className:"flex items-center gap-2 ml-0 sm:ml-4",children:[(0,$o.jsx)("button",{onClick:()=>window.location.href="/templates/preview/".concat(e.id),className:"p-2 sm:p-1 rounded-full text-blue-600 hover:bg-blue-100",title:t("common:actions.preview"),children:(0,$o.jsx)(pd,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,$o.jsx)("button",{onClick:()=>window.location.href="/templates/edit/".concat(e.id),className:"p-2 sm:p-1 rounded-full text-blue-600 hover:bg-blue-100",title:t("common:actions.edit"),children:(0,$o.jsx)(sd,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),(0,$o.jsx)("button",{onClick:()=>(async(e,n)=>{if(window.confirm(t("admin:dashboard.messages.templateDeleteConfirm",{name:n}))){const n="template-delete-".concat(e);try{N(n,!0),await Po(e),Vn.success(t("admin:dashboard.messages.templateDeleted")),j()}catch(i){Vn.error(t("admin:dashboard.messages.templateDeleteFailed"))}finally{N(n,!1)}}})(e.id,e.name),className:"p-2 sm:p-1 rounded-full text-red-600 hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed",title:t("common:actions.delete"),disabled:_["template-delete-".concat(e.id)],children:_["template-delete-".concat(e.id)]?(0,$o.jsx)(cd,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):(0,$o.jsx)(md,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]})},e.id)))}):(0,$o.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,$o.jsx)(rd,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,$o.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t("admin:dashboard.sections.templates.empty")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t("admin:dashboard.sections.templates.emptyDescription")}),(0,$o.jsx)("div",{className:"mt-6",children:(0,$o.jsxs)("button",{onClick:()=>window.location.href="/templates/new",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,$o.jsx)(ld,{className:"w-4 h-4 mr-2"}),t("admin:dashboard.sections.templates.create")]})})]})]}),"performance"===r&&(0,$o.jsx)(Gd,{}),"audit"===r&&(0,$o.jsx)(Cd,{}),"settings"===r&&(0,$o.jsx)(Od,{}),"content"===r&&(0,$o.jsxs)("div",{className:"text-center py-8",children:[(0,$o.jsx)("p",{className:"text-gray-500",children:t("admin:dashboard.sections.content.redirecting")}),(n("/flows"),null)]})]}),(0,$o.jsx)(yd,{isOpen:g,onClose:()=>v(!1),onSuccess:j}),(0,$o.jsx)(wd,{isOpen:b,onClose:()=>{x(!1),w(null)},onSuccess:j,managerId:y})]})},Yd=Gc("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Kd=Gc("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Xd=Gc("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Jd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function $d(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Zd={date:$d({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:$d({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:$d({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},eu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function tu(e){return(t,n)=>{let i;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):t;i=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;i=e.values[a]||e.values[t]}return i[e.argumentCallback?e.argumentCallback(t):t]}}const nu={ordinalNumber:(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:tu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:tu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:tu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:tu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:tu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function iu(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],r=t.match(a);if(!r)return null;const s=r[0],o=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(s))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(s)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(s.length)}}}var au;const ru={code:"en-US",formatDistance:(e,t,n)=>{let i;const a=Jd[e];return i="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:Zd,formatRelative:(e,t,n,i)=>eu[e],localize:nu,match:{ordinalNumber:(au={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(au.matchPattern);if(!n)return null;const i=n[0],a=e.match(au.parsePattern);if(!a)return null;let r=au.valueCallback?au.valueCallback(a[0]):a[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(i.length)}}),era:iu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:iu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:iu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:iu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:iu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let su={};function ou(){return su}Math.pow(10,8);const lu=6048e5,cu=Symbol.for("constructDateFrom");function du(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&cu in e?e[cu](t):e instanceof Date?new e.constructor(t):new Date(t)}function uu(e,t){return du(t||e,e)}function hu(e){const t=uu(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function mu(e,t){const n=uu(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function pu(e,t,n){const[i,a]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const a=du.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(a)}(null===n||void 0===n?void 0:n.in,e,t),r=mu(i),s=mu(a),o=+r-hu(r),l=+s-hu(s);return Math.round((o-l)/864e5)}function fu(e,t){const n=uu(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function gu(e,t){const n=uu(e,null===t||void 0===t?void 0:t.in);return pu(n,fu(n))+1}function vu(e,t){var n,i,a,r,s,o;const l=ou(),c=null!==(n=null!==(i=null!==(a=null!==(r=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==r?r:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==i?i:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,d=uu(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=(u<c?7:0)+u-c;return d.setDate(d.getDate()-h),d.setHours(0,0,0,0),d}function bu(e,t){return vu(e,d(d({},t),{},{weekStartsOn:1}))}function xu(e,t){const n=uu(e,null===t||void 0===t?void 0:t.in),i=n.getFullYear(),a=du(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const r=bu(a),s=du(n,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);const o=bu(s);return n.getTime()>=r.getTime()?i+1:n.getTime()>=o.getTime()?i:i-1}function yu(e,t){const n=xu(e,t),i=du((null===t||void 0===t?void 0:t.in)||e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),bu(i)}function wu(e,t){const n=uu(e,null===t||void 0===t?void 0:t.in),i=+bu(n)-+yu(n);return Math.round(i/lu)+1}function _u(e,t){var n,i,a,r,s,o;const l=uu(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),d=ou(),u=null!==(n=null!==(i=null!==(a=null!==(r=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==a?a:d.firstWeekContainsDate)&&void 0!==i?i:null===(o=d.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,h=du((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,u),h.setHours(0,0,0,0);const m=vu(h,t),p=du((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,u),p.setHours(0,0,0,0);const f=vu(p,t);return+l>=+m?c+1:+l>=+f?c:c-1}function ku(e,t){var n,i,a,r,s,o;const l=ou(),c=null!==(n=null!==(i=null!==(a=null!==(r=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==i?i:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,d=_u(e,t),u=du((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d,0,c),u.setHours(0,0,0,0);return vu(u,t)}function Nu(e,t){const n=uu(e,null===t||void 0===t?void 0:t.in),i=+vu(n,t)-+ku(n,t);return Math.round(i/lu)+1}function ju(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Su={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return ju("yy"===t?i%100:i,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):ju(n+1,2)},d:(e,t)=>ju(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>ju(e.getHours()%12||12,t.length),H:(e,t)=>ju(e.getHours(),t.length),m:(e,t)=>ju(e.getMinutes(),t.length),s:(e,t)=>ju(e.getSeconds(),t.length),S(e,t){const n=t.length,i=e.getMilliseconds();return ju(Math.trunc(i*Math.pow(10,n-3)),t.length)}},Cu="midnight",Eu="noon",Au="morning",Tu="afternoon",Mu="evening",Pu="night",Du={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),i=t>0?t:1-t;return n.ordinalNumber(i,{unit:"year"})}return Su.y(e,t)},Y:function(e,t,n,i){const a=_u(e,i),r=a>0?a:1-a;if("YY"===t){return ju(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):ju(r,t.length)},R:function(e,t){return ju(xu(e),t.length)},u:function(e,t){return ju(e.getFullYear(),t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return ju(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return ju(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Su.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return ju(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=Nu(e,i);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):ju(a,t.length)},I:function(e,t,n){const i=wu(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):ju(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Su.d(e,t)},D:function(e,t,n){const i=gu(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):ju(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),r=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return ju(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),r=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return ju(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=0===i?7:i;switch(t){case"i":return String(a);case"ii":return ju(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(a=12===i?Eu:0===i?Cu:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(a=i>=17?Mu:i>=12?Tu:i>=4?Au:Pu,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Su.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Su.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):ju(i,t.length)},k:function(e,t,n){let i=e.getHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):ju(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Su.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Su.s(e,t)},S:function(e,t){return Su.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Ou(i);case"XXXX":case"XX":return Lu(i);default:return Lu(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return Ou(i);case"xxxx":case"xx":return Lu(i);default:return Lu(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ru(i,":");default:return"GMT"+Lu(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ru(i,":");default:return"GMT"+Lu(i,":")}},t:function(e,t,n){return ju(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return ju(+e,t.length)}};function Ru(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),r=i%60;return 0===r?n+String(a):n+String(a)+t+ju(r,2)}function Ou(e,t){if(e%60===0){return(e>0?"-":"+")+ju(Math.abs(e)/60,2)}return Lu(e,t)}function Lu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",i=Math.abs(e);return n+ju(Math.trunc(i/60),2)+t+ju(i%60,2)}const Iu=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Fu=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},zu={p:Fu,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return Iu(e,t);let r;switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Iu(i,t)).replace("{{time}}",Fu(a,t))}},qu=/^D+$/,Wu=/^Y+$/,Bu=["D","DD","YY","YYYY"];function Uu(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Vu(e){return!(!Uu(e)&&"number"!==typeof e||isNaN(+uu(e)))}const Hu=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qu=/^'([^]*?)'?$/,Yu=/''/g,Ku=/[a-zA-Z]/;function Xu(e,t,n){var i,a,r,s,o,l,c,d,u,h,m,p,f,g;const v=ou(),b=null!==(i=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:v.locale)&&void 0!==i?i:ru,x=null!==(r=null!==(s=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:v.firstWeekContainsDate)&&void 0!==s?s:null===(d=v.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==r?r:1,y=null!==(u=null!==(h=null!==(m=null!==(p=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==p?p:null===n||void 0===n||null===(f=n.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==m?m:v.weekStartsOn)&&void 0!==h?h:null===(g=v.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==u?u:0,w=uu(e,null===n||void 0===n?void 0:n.in);if(!Vu(w))throw new RangeError("Invalid time value");let _=t.match(Gu).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,zu[t])(e,b.formatLong)}return e})).join("").match(Hu).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Ju(e)};if(Du[t])return{isToken:!0,value:e};if(t.match(Ku))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));b.localize.preprocessor&&(_=b.localize.preprocessor(w,_));const k={firstWeekContainsDate:x,weekStartsOn:y,locale:b};return _.map((i=>{if(!i.isToken)return i.value;const a=i.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return Wu.test(e)}(a))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return qu.test(e)}(a))||function(e,t,n){const i=function(e,t,n){const i="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(i," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(i),Bu.includes(e))throw new RangeError(i)}(a,t,String(e));return(0,Du[a[0]])(w,a,b.localize,k)})).join("")}function Ju(e){const t=e.match(Qu);return t?t[1].replace(Yu,"'"):e}const $u=e=>{var t;let{onViewCertificate:n,onRegenerateCertificate:a,onDeleteCertificate:r}=e;const{t:s}=bs(["admin","common"]),[o,l]=(0,i.useState)(""),[c,d]=(0,i.useState)("all"),[u,h]=(0,i.useState)(1),[m,p]=(0,i.useState)(10),[f,g]=(0,i.useState)("created_at"),[v,b]=(0,i.useState)("desc"),{data:x,isLoading:y,isError:w,error:_,refetch:k}=(0,Et.useQuery)(["certificates",u,m,c,f,v],(()=>mo({page:u,limit:m,certificate_type:"all"!==c?c:void 0,sort_by:f,sort_order:v})),{keepPreviousData:!0}),N=(null===x||void 0===x||null===(t=x.certificates)||void 0===t?void 0:t.filter((e=>{if(!o)return!0;const t=o.toLowerCase();return"".concat(e.users.first_name," ").concat(e.users.last_name).toLowerCase().includes(t)||(e.certificate_number||"").toLowerCase().includes(t)||(e.certificate_type||"").toLowerCase().includes(t)||(e.users.email||"").toLowerCase().includes(t)||(e.users.position||"").toLowerCase().includes(t)||(e.users.vessel_assignment||"").toLowerCase().includes(t)})))||[],j=e=>{f===e?b("asc"===v?"desc":"asc"):(g(e),b("desc"))},S=e=>{if(!e)return s("common:common.not_set");try{return Xu(new Date(e),"dd MMM yyyy")}catch(Tt){return e}},C=e=>{if(!e.expiry_date)return"badge badge-secondary";const t=new Date,n=new Date(e.expiry_date);if(n<t)return"badge badge-danger";const i=new Date;return i.setDate(t.getDate()+30),n<i?"badge badge-warning":e.verified?"badge badge-success":"badge badge-info"},E=e=>{if(!e.expiry_date)return s("admin:certificates.status.noExpiry");const t=new Date,n=new Date(e.expiry_date);if(n<t)return s("admin:certificates.status.expired");const i=new Date;return i.setDate(t.getDate()+30),n<i?s("admin:certificates.status.expiringSoon"):e.verified?s("admin:certificates.status.valid"):s("admin:certificates.status.unverified")};return y?(0,$o.jsx)(Zc,{message:s("admin:certificates.loading")}):w?(0,$o.jsxs)("div",{className:"glass-card p-6 text-center",children:[(0,$o.jsx)(Yd,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("admin:certificates.error")}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:(null===_||void 0===_?void 0:_.message)||s("admin:certificates.failed")}),(0,$o.jsxs)("button",{onClick:k,className:"btn btn-primary",children:[(0,$o.jsx)(kd,{className:"h-4 w-4 mr-2"}),s("admin:certificates.tryAgain")]})]}):(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsx)("div",{className:"glass-card p-6",children:(0,$o.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,$o.jsx)("div",{className:"flex-1 max-w-md",children:(0,$o.jsxs)("div",{className:"relative",children:[(0,$o.jsx)(Kd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,$o.jsx)("input",{type:"text",placeholder:s("admin:certificates.search"),value:o,onChange:e=>l(e.target.value),className:"glass-input pl-10 pr-4 py-3 w-full"})]})}),(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(_d,{className:"h-4 w-4 text-gray-500"}),(0,$o.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"glass-input px-4 py-3",children:[(0,$o.jsx)("option",{value:"all",children:s("admin:certificates.filters.allTypes")}),(0,$o.jsx)("option",{value:"Maritime Onboarding Training",children:s("admin:certificates.filters.onboardingTraining")}),(0,$o.jsx)("option",{value:"Intro Kapitein",children:s("admin:certificates.filters.introKapitein")})]})]}),(0,$o.jsxs)("button",{onClick:k,className:"glass-input px-4 py-2 text-slate-700 hover:text-slate-900 transition-all duration-300 flex items-center gap-2 rounded-xl",children:[(0,$o.jsx)(kd,{className:"h-4 w-4"}),s("admin:certificates.refresh")]})]})]})}),(0,$o.jsxs)("div",{className:"glass-card hover-lift",children:[(0,$o.jsxs)("div",{className:"p-8 border-b border-white/20",children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("admin:certificates.title")}),(0,$o.jsx)("p",{className:"text-slate-600 mt-2",children:s("admin:certificates.description")})]}),(0,$o.jsxs)("div",{className:"p-6",children:[(0,$o.jsx)("div",{className:"overflow-x-auto",children:0===N.length?(0,$o.jsxs)("div",{className:"text-center py-12",children:[(0,$o.jsx)(rd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("admin:certificates.noFound")}),(0,$o.jsx)("p",{className:"text-gray-600",children:s("admin:certificates.noFoundDescription")})]}):(0,$o.jsxs)("table",{className:"w-full",children:[(0,$o.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-t-xl",children:(0,$o.jsxs)("tr",{children:[(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tl-xl cursor-pointer",onClick:()=>j("certificate_type"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.type"),"certificate_type"===f&&(0,$o.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer",onClick:()=>j("users.last_name"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.crewMember"),"users.last_name"===f&&(0,$o.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer",onClick:()=>j("issue_date"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.issueDate"),"issue_date"===f&&(0,$o.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer",onClick:()=>j("expiry_date"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[s("admin:certificates.table.expiryDate"),"expiry_date"===f&&(0,$o.jsx)("span",{className:"ml-1",children:"asc"===v?"\u2191":"\u2193"})]})}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("admin:certificates.table.status")}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tr-xl",children:s("admin:certificates.table.actions")})]})}),(0,$o.jsx)("tbody",{className:"bg-white/50 divide-y divide-slate-200",children:N.map((e=>(0,$o.jsxs)("tr",{className:"hover:bg-white/80 transition-colors duration-200",children:[(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(rd,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,$o.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.certificate_type})]})}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[(0,$o.jsx)(gd,{className:"h-4 w-4 text-gray-400 mr-2"}),e.users.first_name," ",e.users.last_name]}),(0,$o.jsx)("div",{className:"text-sm text-gray-500",children:e.users.position})]})}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,$o.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,$o.jsx)(Nd,{className:"h-4 w-4 text-gray-400 mr-2"}),S(e.issue_date)]})}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,$o.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,$o.jsx)(Nd,{className:"h-4 w-4 text-gray-400 mr-2"}),S(e.expiry_date)]})}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,$o.jsx)("span",{className:C(e),children:E(e)})}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>n(e),className:"btn btn-sm btn-info",title:s("common:buttons.view"),children:(0,$o.jsx)(pd,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>window.open(e.file_url,"_blank"),className:"btn btn-sm btn-outline",title:s("common:buttons.download"),disabled:!e.file_url,children:(0,$o.jsx)(Id,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>a(e),className:"btn btn-sm btn-secondary",title:s("admin:certificates.details.regenerate"),children:(0,$o.jsx)(Xd,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>r(e),className:"btn btn-sm btn-danger",title:s("common:buttons.delete"),children:(0,$o.jsx)(md,{className:"h-3 w-3"})})]})})]},e.id)))})]})}),(null===x||void 0===x?void 0:x.pagination)&&(0,$o.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,$o.jsxs)("div",{className:"text-sm text-gray-600",children:[s("admin:certificates.pagination.showing")," ",(u-1)*m+1," ",s("admin:certificates.pagination.to")," ",Math.min(u*m,x.pagination.total)," ",s("admin:certificates.pagination.of")," ",x.pagination.total," ",s("admin:certificates.pagination.results")]}),(0,$o.jsxs)("div",{className:"flex space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>{h((e=>Math.max(e-1,1)))},disabled:1===u,className:"btn btn-sm ".concat(1===u?"btn-disabled":"btn-outline"),children:s("admin:certificates.pagination.previous")}),(0,$o.jsx)("button",{onClick:()=>{null!==x&&void 0!==x&&x.pagination&&h((e=>e<x.pagination.pages?e+1:e))},disabled:u>=x.pagination.pages,className:"btn btn-sm ".concat(u>=x.pagination.pages?"btn-disabled":"btn-outline"),children:s("admin:certificates.pagination.next")})]})]})]})]})]})},Zu=Gc("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),eh=e=>{let{certificate:t,onClose:n,onRegenerateSuccess:a}=e;const{t:r}=bs(["admin","common"]),[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)({certificate_type:t.certificate_type,certificate_number:t.certificate_number,issue_date:t.issue_date,expiry_date:t.expiry_date,issuing_authority:t.issuing_authority,verified:t.verified}),[u,h]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),f=(0,Et.useQueryClient)(),g=e=>{if(!e)return r("common:common.not_set");try{return Xu(new Date(e),"dd MMM yyyy")}catch(Tt){return e}},v=(0,Et.useMutation)((e=>po(t.id,e)),{onSuccess:()=>{f.invalidateQueries("certificates"),Vn.success(r("admin:certificates.messages.updated")),o(!1)},onError:e=>{Vn.error(r("admin:certificates.messages.updateFailed",{error:e.message}))}}),b=(0,Et.useMutation)((()=>fo(t.id)),{onSuccess:()=>{f.invalidateQueries("certificates"),Vn.success(r("admin:certificates.messages.deleted")),n()},onError:e=>{Vn.error(r("admin:certificates.messages.deleteFailed",{error:e.message}))}}),x=(0,Et.useMutation)((()=>go({userId:t.user_id,certificateType:"Intro Kapitein"===t.certificate_type?"intro_kapitein":"standard",certificateId:t.id})),{onSuccess:e=>{f.invalidateQueries("certificates"),Vn.success(r("admin:certificates.messages.regenerated")),a&&a(e.certificate),p(!1)},onError:e=>{Vn.error(r("admin:certificates.messages.regenerateFailed",{error:e.message}))}}),y=e=>{const{name:t,value:n,type:i,checked:a}=e.target;c((e=>d(d({},e),{},{[t]:"checkbox"===i?a:n})))};return(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,$o.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,$o.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,$o.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,$o.jsx)(rd,{className:"h-5 w-5 text-blue-600 mr-2"}),r("admin:certificates.details.title")]}),(0,$o.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,$o.jsx)(fd,{className:"h-6 w-6"})})]}),(0,$o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,$o.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t.certificate_type}),(0,$o.jsxs)("p",{className:"text-gray-600 flex items-center mt-1",children:[(0,$o.jsx)(Zu,{className:"h-4 w-4 mr-2"}),"Certificate #",t.certificate_number]})]}),(0,$o.jsxs)("div",{className:"flex flex-col items-end",children:[(0,$o.jsx)("span",{className:(()=>{if(!t.expiry_date)return"badge badge-secondary";const e=new Date,n=new Date(t.expiry_date);if(n<e)return"badge badge-danger";const i=new Date;return i.setDate(e.getDate()+30),n<i?"badge badge-warning":t.verified?"badge badge-success":"badge badge-info"})(),children:(()=>{if(!t.expiry_date)return r("admin:certificates.status.noExpiry");const e=new Date,n=new Date(t.expiry_date);if(n<e)return r("admin:certificates.status.expired");const i=new Date;return i.setDate(e.getDate()+30),n<i?r("admin:certificates.status.expiringSoon"):t.verified?r("admin:certificates.status.valid"):r("admin:certificates.status.unverified")})()}),(0,$o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:t.verified?r("admin:certificates.status.verified"):r("admin:certificates.status.notVerified")})]})]}),(0,$o.jsxs)("div",{className:"glass-card p-4",children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:r("admin:certificates.details.crewInfo")}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.name")}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,$o.jsx)(gd,{className:"h-4 w-4 text-gray-400 mr-2"}),t.users.first_name," ",t.users.last_name]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.email")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.users.email})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.position")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.users.position})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.vessel")}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,$o.jsx)($c,{className:"h-4 w-4 text-gray-400 mr-2"}),t.users.vessel_assignment]})]})]})]}),s?(0,$o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v.mutate(l)},className:"glass-card p-4",children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:r("admin:certificates.details.editTitle")}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:r("admin:certificates.details.certificateType")}),(0,$o.jsx)("input",{type:"text",name:"certificate_type",value:l.certificate_type,onChange:y,className:"form-input"})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:r("admin:certificates.details.certificateNumber")}),(0,$o.jsx)("input",{type:"text",name:"certificate_number",value:l.certificate_number,onChange:y,className:"form-input"})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:r("admin:certificates.details.issueDate")}),(0,$o.jsx)("input",{type:"date",name:"issue_date",value:l.issue_date,onChange:y,className:"form-input"})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:r("admin:certificates.details.expiryDate")}),(0,$o.jsx)("input",{type:"date",name:"expiry_date",value:l.expiry_date,onChange:y,className:"form-input"})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:r("admin:certificates.details.issuingAuthority")}),(0,$o.jsx)("input",{type:"text",name:"issuing_authority",value:l.issuing_authority,onChange:y,className:"form-input"})]}),(0,$o.jsxs)("div",{className:"form-group flex items-center",children:[(0,$o.jsx)("label",{className:"form-label mr-2",children:r("admin:certificates.details.verified")}),(0,$o.jsx)("input",{type:"checkbox",name:"verified",checked:l.verified,onChange:y,className:"form-checkbox h-5 w-5"})]})]}),(0,$o.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,$o.jsx)("button",{type:"button",onClick:()=>o(!1),className:"btn btn-secondary",children:r("admin:certificates.details.cancel")}),(0,$o.jsx)("button",{type:"submit",disabled:v.isLoading,className:"btn btn-primary",children:v.isLoading?(0,$o.jsx)(Zc,{size:"small",message:""}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Dd,{className:"h-4 w-4 mr-2"}),r("admin:certificates.details.saveChanges")]})})]})]}):(0,$o.jsxs)("div",{className:"glass-card p-4",children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:r("admin:certificates.details.title")}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.certificateType")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.certificate_type})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.certificateNumber")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.certificate_number})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.issueDate")}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,$o.jsx)(Nd,{className:"h-4 w-4 text-gray-400 mr-2"}),g(t.issue_date)]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.expiryDate")}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,$o.jsx)(Nd,{className:"h-4 w-4 text-gray-400 mr-2"}),g(t.expiry_date)]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("admin:certificates.details.issuingAuthority")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.issuing_authority})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r("common:general.created_at")}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:g(t.created_at)})]})]})]}),t.metadata&&(0,$o.jsxs)("div",{className:"glass-card p-4",children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:r("admin:certificates.details.metadata")}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.metadata.phase1_completed&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 1 Completed"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase1_completed})]}),t.metadata.phase1_score&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 1 Score"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase1_score})]}),t.metadata.phase2_completed&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 2 Completed"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase2_completed})]}),t.metadata.phase2_score&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 2 Score"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase2_score})]}),t.metadata.phase3_completed&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 3 Completed"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase3_completed})]}),t.metadata.phase3_score&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phase 3 Score"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.phase3_score})]}),t.metadata.overall_score&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Overall Score"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.metadata.overall_score})]}),t.metadata.replaced_by&&(0,$o.jsxs)("div",{className:"col-span-2",children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Replaced By"}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900",children:["Certificate #",t.metadata.replaced_by]})]})]})]}),(0,$o.jsxs)("div",{className:"flex flex-wrap justify-end space-x-3 pt-4 border-t",children:[!s&&(0,$o.jsxs)("button",{onClick:()=>o(!0),className:"btn btn-secondary",children:[(0,$o.jsx)(sd,{className:"h-4 w-4 mr-2"}),r("admin:certificates.details.editDetails")]}),(0,$o.jsxs)("button",{onClick:()=>window.open(t.file_url,"_blank"),className:"btn btn-outline",disabled:!t.file_url,children:[(0,$o.jsx)(Id,{className:"h-4 w-4 mr-2"}),r("admin:certificates.details.download")]}),m?(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsxs)("span",{className:"text-sm text-red-600 flex items-center",children:[(0,$o.jsx)(Pd,{className:"h-4 w-4 mr-1"}),r("admin:certificates.details.regenerateConfirm")]}),(0,$o.jsx)("button",{onClick:()=>x.mutate(),disabled:x.isLoading,className:"btn btn-danger",children:x.isLoading?(0,$o.jsx)(Zc,{size:"small",message:""}):(0,$o.jsx)(Bd,{className:"h-4 w-4"})}),(0,$o.jsx)("button",{onClick:()=>p(!1),className:"btn btn-secondary",children:(0,$o.jsx)(Yd,{className:"h-4 w-4"})})]}):(0,$o.jsxs)("button",{onClick:()=>p(!0),className:"btn btn-primary",children:[(0,$o.jsx)(Xd,{className:"h-4 w-4 mr-2"}),r("admin:certificates.details.regenerate")]}),u?(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsxs)("span",{className:"text-sm text-red-600 flex items-center",children:[(0,$o.jsx)(Pd,{className:"h-4 w-4 mr-1"}),r("admin:certificates.details.deleteConfirm")]}),(0,$o.jsx)("button",{onClick:()=>b.mutate(),disabled:b.isLoading,className:"btn btn-danger",children:b.isLoading?(0,$o.jsx)(Zc,{size:"small",message:""}):(0,$o.jsx)(Bd,{className:"h-4 w-4"})}),(0,$o.jsx)("button",{onClick:()=>h(!1),className:"btn btn-secondary",children:(0,$o.jsx)(Yd,{className:"h-4 w-4"})})]}):(0,$o.jsxs)("button",{onClick:()=>h(!0),className:"btn btn-danger",children:[(0,$o.jsx)(md,{className:"h-4 w-4 mr-2"}),r("admin:certificates.details.delete")]})]})]})]})})},th=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{invalidMessage:n="Not Set",formatOptions:i={}}=t;if(null===e||void 0===e)return n;const a=new Date(e);return isNaN(a.getTime())?n:a.toLocaleDateString(void 0,i)},nh=()=>{var e,t,n;const{user:a}=el(),r=pe(),{t:s,i18n:o}=bs(["manager","dashboard","common","forms","api"]);i.useEffect((()=>{}),[o,s]);const[l,c]=(0,i.useState)("crew"),[u,h]=(0,i.useState)(null),[m,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(""),[v,b]=(0,i.useState)("all"),[x,y]=(0,i.useState)([]),[w,_]=(0,i.useState)(!1),[k,N]=(0,i.useState)(null),[j,S]=(0,i.useState)(null),C=(0,Et.useQueryClient)(),E=[{code:"en",name:"English",flag:"EN"},{code:"nl",name:"Nederlands",flag:"NL"}],{register:A,handleSubmit:T,formState:{errors:M},reset:P}=zc(),{register:D,handleSubmit:R,formState:{errors:O},reset:L,setValue:I}=zc(),{data:F,isLoading:z}=(0,Et.useQuery)("dashboard-stats",oo),{data:q,isLoading:W}=(0,Et.useQuery)("crew-members",Zs),{data:B,isLoading:U}=(0,Et.useQuery)("pending-quiz-reviews",lo,{enabled:"quiz-reviews"===l}),{data:V,isLoading:H}=(0,Et.useQuery)("onboarding-reviews",uo,{enabled:"onboarding-reviews"===l}),{data:G,isLoading:Q}=(0,Et.useQuery)("certificates",mo,{enabled:"certificates"===l}),Y=(0,Et.useMutation)($s,{onSuccess:()=>{C.invalidateQueries("crew-members"),C.invalidateQueries("dashboard-stats"),Vn.success(s("manager:dashboard.messages.crewCreated")),p(!1),P()},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.crewCreateFailed");Vn.error(i)}}),K=(0,Et.useMutation)(io,{onSuccess:()=>{Vn.success(s("manager:dashboard.messages.magicLinkSent"))},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.magicLinkFailed");Vn.error(i)}}),X=(0,Et.useMutation)((e=>{let{id:t,data:n}=e;return eo(t,n)}),{onSuccess:()=>{C.invalidateQueries("crew-members"),C.invalidateQueries("dashboard-stats"),Vn.success(s("manager:dashboard.messages.crewUpdated")),N(null)},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.crewUpdateFailed");Vn.error(i)}}),J=(0,Et.useMutation)((e=>{let{id:t,forceDelete:n}=e;return to(t,n)}),{onSuccess:e=>{C.invalidateQueries("crew-members"),C.invalidateQueries("dashboard-stats"),Vn.success(e.message)},onError:e=>{var t,n;const i=null===(t=e.response)||void 0===t?void 0:t.data;if(409===(null===(n=e.response)||void 0===n?void 0:n.status)&&null!==i&&void 0!==i&&i.requiresConfirmation){const{crewMember:t}=i,n="".concat(t.name," has training records.\n\n").concat(i.message,"\n\nDo you want to proceed?");if(window.confirm(n)){var a;const t=null===(a=e.config.url.match(/\/crew\/(\d+)/))||void 0===a?void 0:a[1];t&&J.mutate({id:t,forceDelete:!0})}}else{const e=(null===i||void 0===i?void 0:i.error)||s("manager:dashboard.messages.crewDeleteFailed");Vn.error(e)}}}),$=(0,Et.useMutation)((e=>{let{action:t,userIds:n}=e;return no(t,n)}),{onSuccess:e=>{C.invalidateQueries("crew-members"),C.invalidateQueries("dashboard-stats"),Vn.success(e.message),y([]),_(!1)},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("api:errors.general.serverError");Vn.error(i)}}),Z=(0,Et.useMutation)((e=>{let{quizId:t,reviewData:n}=e;return co(t,n)}),{onSuccess:()=>{C.invalidateQueries("pending-quiz-reviews"),C.invalidateQueries("onboarding-reviews"),Vn.success(s("manager:dashboard.messages.quizReviewed"))},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.quizReviewFailed");Vn.error(i)}}),ee=(0,Et.useMutation)(ho,{onSuccess:()=>{C.invalidateQueries("onboarding-reviews"),C.invalidateQueries("crew-members"),C.invalidateQueries("dashboard-stats"),Vn.success(s("manager:dashboard.messages.onboardingApproved"))},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||s("manager:dashboard.messages.onboardingApproveFailed");Vn.error(i)}});i.useEffect((()=>{k&&(I("firstName",k.firstName),I("lastName",k.lastName),I("email",k.email),I("position",k.position),I("vesselAssignment",k.vesselAssignment),I("expectedBoardingDate",k.expectedBoardingDate),I("contactPhone",k.contactPhone||""),I("emergencyContactName",k.emergencyContactName||""),I("emergencyContactPhone",k.emergencyContactPhone||""),I("status",k.status),I("preferredLanguage",k.preferredLanguage||"en"))}),[k,I]);const te=e=>{K.mutate(e)},ne=async e=>{try{await ao(e),Vn.success(s("manager:dashboard.messages.safetyPdfSent"))}catch(t){Vn.error(s("manager:dashboard.messages.safetyPdfFailed",{error:t.message}))}},ie=async e=>{try{await ro(e),Vn.success(s("manager:dashboard.messages.onboardingEmailSent"))}catch(t){Vn.error(s("manager:dashboard.messages.onboardingEmailFailed",{error:t.message}))}},ae=async(e,t)=>{const n=prompt("Resend completion email to ".concat(t,"?\n\nOptional comments for the email:"),"Email resent by manager");if(null!==n)try{await so(e,n),Vn.success("Completion email resent successfully to ".concat(t))}catch(i){Vn.error("Failed to resend completion email: ".concat(i.message))}},re=e=>{window.confirm(s("manager:dashboard.messages.deleteConfirm",{name:"".concat(e.firstName," ").concat(e.lastName)}))&&J.mutate({id:e.id,forceDelete:!1})},se=e=>{y((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},oe=e=>{0!==x.length?"delete"===e?window.confirm(s("manager:dashboard.messages.bulkDeleteConfirm",{count:x.length}))&&$.mutate({action:e,userIds:x}):$.mutate({action:e,userIds:x}):Vn.error(s("manager:dashboard.bulk.selectFirst"))},le=function(e,t){const n={action:t?"approve":"reject",comments:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""};Z.mutate({quizId:e,reviewData:n})},ce=(null===q||void 0===q?void 0:q.filter((e=>{const t=f.toLowerCase(),n=(e.firstName||"").toLowerCase().includes(t)||(e.lastName||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t)||(e.position||"").toLowerCase().includes(t)||(e.vesselAssignment||"").toLowerCase().includes(t),i="all"===v||e.status===v;return n&&i})))||[],de=e=>({not_started:"badge badge-warning",in_progress:"badge badge-info",forms_completed:"badge badge-primary",training_completed:"badge badge-accent",fully_completed:"badge badge-success",suspended:"badge badge-secondary"}[e]||"badge badge-secondary"),ue=e=>({not_started:s("manager:dashboard.status.notStarted"),in_progress:s("manager:dashboard.status.inProgress"),forms_completed:s("manager:dashboard.status.formsCompleted"),training_completed:s("manager:dashboard.status.trainingCompleted"),fully_completed:s("manager:dashboard.status.fullyCompleted"),suspended:s("manager:dashboard.status.suspended")}[e]||e);return z||W?(0,$o.jsx)(Zc,{message:s("common:loading.default")}):(0,$o.jsxs)("div",{className:"space-y-8 max-w-none",children:[(0,$o.jsx)("div",{className:"glass-card-elevated p-4 sm:p-8 hover-lift",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-2xl sm:text-4xl font-bold text-gradient-navy mb-2",children:s("dashboard.title")}),(0,$o.jsx)("p",{className:"text-slate-600 text-base sm:text-lg",children:s("dashboard.sections.crew.description")})]}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[(0,$o.jsxs)("button",{onClick:()=>{C.invalidateQueries("crew-members"),C.invalidateQueries("dashboard-stats"),C.invalidateQueries("pending-quiz-reviews"),C.invalidateQueries("onboarding-reviews"),C.invalidateQueries("certificates")},className:"glass-input px-4 py-2 text-slate-700 hover:text-slate-900 transition-all duration-300 flex items-center justify-center gap-2 rounded-xl min-touch-target",children:[(0,$o.jsx)(kd,{className:"h-4 w-4"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:s("common:general.refresh")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Refresh"})]}),"crew"===l&&(0,$o.jsxs)("button",{onClick:()=>p(!0),className:"glass-button text-white px-6 py-2 flex items-center justify-center gap-2 rounded-xl min-touch-target",children:[(0,$o.jsx)(ld,{className:"h-4 w-4"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:s("manager:dashboard.sections.crew.add")}),(0,$o.jsx)("span",{className:"sm:hidden",children:s("manager:dashboard.sections.crew.add")})]})]})]})}),(0,$o.jsx)("div",{className:"glass-card p-2",children:(0,$o.jsxs)("nav",{className:"flex flex-wrap sm:space-x-2 gap-2",children:[(0,$o.jsxs)("button",{onClick:()=>c("crew"),className:"py-2 sm:py-3 px-3 sm:px-6 rounded-xl font-medium text-xs sm:text-sm transition-all duration-300 flex items-center justify-center gap-2 min-touch-target flex-1 sm:flex-none ".concat("crew"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,$o.jsx)(ad,{className:"h-4 w-4"}),s("common:manager.crew_management")]}),(0,$o.jsxs)("button",{onClick:()=>c("quiz-reviews"),className:"py-2 sm:py-3 px-3 sm:px-6 rounded-xl font-medium text-xs sm:text-sm transition-all duration-300 flex items-center justify-center gap-2 min-touch-target flex-1 sm:flex-none ".concat("quiz-reviews"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,$o.jsx)(Bd,{className:"h-4 w-4"}),s("common:manager.quiz_reviews"),(null===B||void 0===B?void 0:B.length)>0&&(0,$o.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:B.length})]}),(0,$o.jsxs)("button",{onClick:()=>c("onboarding-reviews"),className:"py-2 sm:py-3 px-3 sm:px-6 rounded-xl font-medium text-xs sm:text-sm transition-all duration-300 flex items-center justify-center gap-2 min-touch-target flex-1 sm:flex-none ".concat("onboarding-reviews"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,$o.jsx)(Yc,{className:"h-4 w-4"}),s("common:manager.onboarding_reviews")]}),(0,$o.jsxs)("button",{onClick:()=>c("compliance"),className:"py-3 px-6 rounded-xl font-medium text-sm transition-all duration-300 flex items-center gap-2 ".concat("compliance"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,$o.jsx)(rd,{className:"h-4 w-4"}),s("common:general.compliance_metrics")]}),(0,$o.jsxs)("button",{onClick:()=>c("certificates"),className:"py-3 px-6 rounded-xl font-medium text-sm transition-all duration-300 flex items-center gap-2 ".concat("certificates"===l?"glass-button text-white shadow-lg":"text-slate-600 hover:text-slate-800 hover:bg-white/30"),children:[(0,$o.jsx)(Zu,{className:"h-4 w-4"}),s("common:manager.certificates")]}),(null===a||void 0===a||null===(e=a.permissions)||void 0===e?void 0:e.includes("content_edit"))&&(0,$o.jsxs)("button",{onClick:()=>r("/flows"),className:"py-3 px-6 rounded-xl font-medium text-sm transition-all duration-300 flex items-center gap-2 text-slate-600 hover:text-slate-800 hover:bg-white/30",children:[(0,$o.jsx)(sd,{className:"h-4 w-4"}),s("dashboard.contentManagement")]})]})}),"crew"===l&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("div",{className:"glass-card p-4 sm:p-6",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,$o.jsx)("div",{className:"flex-1 sm:max-w-md",children:(0,$o.jsxs)("div",{className:"relative",children:[(0,$o.jsx)(Kd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,$o.jsx)("input",{type:"text",placeholder:s("manager:dashboard.sections.crew.search"),value:f,onChange:e=>g(e.target.value),className:"glass-input pl-10 pr-4 py-3 w-full"})]})}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[(0,$o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$o.jsx)(_d,{className:"h-4 w-4 text-gray-500"}),(0,$o.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"glass-input px-4 py-3 flex-1 sm:flex-none",children:[(0,$o.jsx)("option",{value:"all",children:s("manager:dashboard.filters.allStatus")}),(0,$o.jsx)("option",{value:"not_started",children:s("manager:dashboard.filters.notStarted")}),(0,$o.jsx)("option",{value:"in_progress",children:s("manager:dashboard.filters.inProgress")}),(0,$o.jsx)("option",{value:"forms_completed",children:s("manager:dashboard.filters.formsCompleted")}),(0,$o.jsx)("option",{value:"training_completed",children:s("manager:dashboard.filters.trainingCompleted")}),(0,$o.jsx)("option",{value:"fully_completed",children:s("manager:dashboard.filters.fullyCompleted")}),(0,$o.jsx)("option",{value:"suspended",children:s("manager:dashboard.filters.suspended")})]})]}),x.length>0&&(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[(0,$o.jsxs)("span",{className:"text-sm text-gray-600 text-center sm:text-left",children:[x.length," selected"]}),(0,$o.jsxs)("div",{className:"flex gap-1",children:[(0,$o.jsx)("button",{onClick:()=>oe("activate"),className:"btn btn-sm btn-success",title:"Activate selected",children:(0,$o.jsx)(ud,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>oe("deactivate"),className:"btn btn-sm btn-secondary",title:"Deactivate selected",children:(0,$o.jsx)(dd,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>oe("send-magic-links"),className:"btn btn-sm btn-outline",title:"Send magic links",children:(0,$o.jsx)(Qc,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>oe("delete"),className:"btn btn-sm btn-danger",title:"Delete selected",children:(0,$o.jsx)(md,{className:"h-3 w-3"})})]})]})]})]})}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,$o.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("crew"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-teal-500 to-teal-600 text-white",children:(0,$o.jsx)(ad,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,$o.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,$o.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("manager:dashboard.stats.total_crew")}),(0,$o.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:(null===F||void 0===F?void 0:F.totalCrew)||0})]})]})}),(0,$o.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("quiz-reviews"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 text-white",children:(0,$o.jsx)(qd,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,$o.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,$o.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("common:general.pending_reviews")}),(0,$o.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:((null===B||void 0===B?void 0:B.length)||0)+((null===V||void 0===V?void 0:V.length)||0)})]})]})}),(0,$o.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("crew"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,$o.jsx)(Yc,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,$o.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,$o.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("dashboard.status.inProgress")}),(0,$o.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:(null===F||void 0===F?void 0:F.activeTraining)||0})]})]})}),(0,$o.jsx)("div",{className:"glass-card p-4 md:p-6 hover-lift cursor-pointer transition-all duration-200 hover:shadow-lg touch-target",onClick:()=>c("crew"),children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("div",{className:"p-2 md:p-3 rounded-xl bg-gradient-to-br from-yellow-500 to-orange-600 text-white",children:(0,$o.jsx)(qd,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,$o.jsxs)("div",{className:"ml-3 md:ml-4",children:[(0,$o.jsx)("p",{className:"text-xs md:text-sm font-medium text-slate-600",children:s("dashboard.status.notStarted")}),(0,$o.jsx)("p",{className:"text-2xl md:text-3xl font-bold text-gradient-navy",children:(null===F||void 0===F?void 0:F.notStarted)||0})]})]})})]}),(0,$o.jsxs)("div",{className:"glass-card hover-lift",children:[(0,$o.jsxs)("div",{className:"p-6 border-b border-white/20",children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("common:manager.crew_management")}),(0,$o.jsx)("p",{className:"text-slate-600 mt-2",children:s("manager:dashboard.sections.crew.description")})]}),(0,$o.jsxs)("div",{className:"p-4",children:[(0,$o.jsx)("div",{className:"block md:hidden",children:(0,$o.jsx)("div",{className:"space-y-4",children:null===ce||void 0===ce?void 0:ce.map((e=>(0,$o.jsxs)("div",{className:"bg-white/70 rounded-lg p-4 border border-gray-200",children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,$o.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),(0,$o.jsx)("div",{className:"flex items-center",children:(0,$o.jsx)("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>se(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.position"),":"]}),(0,$o.jsx)("div",{className:"font-medium",children:e.position})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.vessel"),":"]}),(0,$o.jsxs)("div",{className:"font-medium flex items-center",children:[(0,$o.jsx)($c,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,$o.jsx)("span",{className:"truncate",children:e.vesselAssignment})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.boardingDate"),":"]}),(0,$o.jsxs)("div",{className:"font-medium flex items-center",children:[(0,$o.jsx)(Nd,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,$o.jsx)("span",{children:th(e.expectedBoardingDate)})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("span",{className:"text-gray-500",children:[s("manager:dashboard.table.headers.status"),":"]}),(0,$o.jsx)("div",{children:(0,$o.jsx)("span",{className:de(e.status),children:ue(e.status)})})]})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>S(e),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors touch-target",title:"View crew member details",children:(0,$o.jsx)(pd,{className:"h-4 w-4"})}),(0,$o.jsx)("button",{onClick:()=>te(e.id),disabled:K.isLoading,className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors touch-target",title:"Send magic link",children:(0,$o.jsx)(Qc,{className:"h-4 w-4"})}),(0,$o.jsx)("button",{onClick:()=>N(e),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors touch-target",title:"Edit crew member",children:(0,$o.jsx)(sd,{className:"h-4 w-4"})})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>ne(e.id),className:"p-2 text-orange-600 hover:text-orange-900 hover:bg-orange-50 rounded-lg transition-colors touch-target",title:"Send Safety Management PDF",children:"\ud83d\udee1\ufe0f"}),(0,$o.jsx)("button",{onClick:()=>ie(e.id),className:"p-2 text-emerald-600 hover:text-emerald-900 hover:bg-emerald-50 rounded-lg transition-colors touch-target",title:"Send Onboarding Start Email",children:"\ud83d\udea2"}),"fully_completed"===e.status&&(0,$o.jsx)("button",{onClick:()=>ae(e.id,"".concat(e.firstName," ").concat(e.lastName)),className:"p-2 text-purple-600 hover:text-purple-900 hover:bg-purple-50 rounded-lg transition-colors touch-target",title:"Resend Completion Email",children:"\ud83d\udce7"}),(0,$o.jsx)("button",{onClick:()=>re(e),disabled:J.isLoading,className:"p-2 text-red-600 hover:text-red-900 hover:bg-red-50 rounded-lg transition-colors touch-target",title:"Delete crew member",children:(0,$o.jsx)(md,{className:"h-4 w-4"})})]})]})]},e.id)))})}),(0,$o.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,$o.jsxs)("table",{className:"w-full min-w-full",children:[(0,$o.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-t-xl",children:(0,$o.jsxs)("tr",{children:[(0,$o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tl-xl",children:(0,$o.jsx)("input",{type:"checkbox",checked:x.length===ce.length&&ce.length>0,onChange:()=>{x.length===ce.length?y([]):y(ce.map((e=>e.id)))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,$o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.name")}),(0,$o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.position")}),(0,$o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.vessel")}),(0,$o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.boardingDate")}),(0,$o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:s("manager:dashboard.table.headers.status")}),(0,$o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tr-xl",children:s("manager:dashboard.table.headers.actions")})]})}),(0,$o.jsx)("tbody",{className:"bg-white/50 divide-y divide-slate-200",children:null===ce||void 0===ce?void 0:ce.map((e=>(0,$o.jsxs)("tr",{className:"hover:bg-white/80 transition-colors duration-200",children:[(0,$o.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,$o.jsx)("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>se(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,$o.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,$o.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-32",children:e.email})]})}),(0,$o.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:e.position}),(0,$o.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)($c,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,$o.jsx)("span",{className:"truncate",children:e.vesselAssignment})]})}),(0,$o.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(Nd,{className:"h-3 w-3 text-gray-400 mr-1"}),(0,$o.jsx)("span",{className:"text-xs",children:th(e.expectedBoardingDate)})]})}),(0,$o.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,$o.jsx)("span",{className:de(e.status),children:ue(e.status)})}),(0,$o.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)("button",{onClick:()=>S(e),className:"p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded transition-colors",title:s("manager:dashboard.tooltips.viewCrewMember"),children:(0,$o.jsx)(pd,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>te(e.id),disabled:K.isLoading,className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-50 rounded transition-colors",title:s("manager:dashboard.tooltips.sendMagicLink"),children:(0,$o.jsx)(Qc,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>ne(e.id),className:"p-1 text-orange-600 hover:text-orange-900 hover:bg-orange-50 rounded transition-colors",title:s("manager:dashboard.tooltips.sendSafetyPDF"),children:"\ud83d\udee1\ufe0f"}),(0,$o.jsx)("button",{onClick:()=>ie(e.id),className:"p-1 text-emerald-600 hover:text-emerald-900 hover:bg-emerald-50 rounded transition-colors",title:s("manager:dashboard.tooltips.sendOnboardingStart"),children:"\ud83d\udea2"}),"fully_completed"===e.status&&(0,$o.jsx)("button",{onClick:()=>ae(e.id,"".concat(e.firstName," ").concat(e.lastName)),className:"p-1 text-purple-600 hover:text-purple-900 hover:bg-purple-50 rounded transition-colors",title:s("manager:dashboard.tooltips.resendCompletionEmail"),children:"\ud83d\udce7"}),(0,$o.jsx)("button",{onClick:()=>N(e),className:"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded transition-colors",title:s("manager:dashboard.tooltips.editCrewMember"),children:(0,$o.jsx)(sd,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>re(e),disabled:J.isLoading,className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded transition-colors",title:s("manager:dashboard.tooltips.deleteCrewMember"),children:(0,$o.jsx)(md,{className:"h-3 w-3"})})]})})]},e.id)))})]})})]})]})]}),"quiz-reviews"===l&&(0,$o.jsx)("div",{className:"space-y-6",children:U?(0,$o.jsx)(Zc,{message:s("common:loading.quiz")}):(0,$o.jsxs)("div",{className:"glass-card hover-lift",children:[(0,$o.jsxs)("div",{className:"p-8 border-b border-white/20",children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("dashboard.sections.quizReviews.title")}),(0,$o.jsx)("p",{className:"text-slate-600 mt-2",children:s("dashboard.sections.quizReviews.description")})]}),(0,$o.jsx)("div",{className:"p-6",children:0===(null===B||void 0===B?void 0:B.length)?(0,$o.jsxs)("div",{className:"text-center py-12",children:[(0,$o.jsx)(Bd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("dashboard.sections.quizReviews.empty")}),(0,$o.jsx)("p",{className:"text-gray-600",children:s("dashboard.sections.quizReviews.emptyDescription")})]}):(0,$o.jsx)("div",{className:"overflow-x-auto",children:(0,$o.jsxs)("table",{className:"w-full",children:[(0,$o.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-t-xl",children:(0,$o.jsxs)("tr",{children:[(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tl-xl",children:"Crew Member"}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Phase"}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Score"}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Submitted"}),(0,$o.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider rounded-tr-xl",children:"Actions"})]})}),(0,$o.jsx)("tbody",{className:"bg-white/50 divide-y divide-slate-200",children:null===B||void 0===B?void 0:B.map((e=>(0,$o.jsxs)("tr",{className:"hover:bg-white/80 transition-colors duration-200",children:[(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,$o.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,$o.jsxs)("span",{className:"badge badge-info",children:[s("training.phase")," ",e.phase]})}),(0,$o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,$o.jsxs)("div",{className:"text-sm text-gray-900",children:[e.score,"/",e.total_questions," (",Math.round(e.score/e.total_questions*100),"%)"]}),(0,$o.jsx)("div",{className:"text-sm ".concat(e.passed?"text-green-600":"text-red-600"),children:e.passed?"Passed":"Failed"})]}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.completed_at).toLocaleString()}),(0,$o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>le(e.id,!0),disabled:Z.isLoading,className:"btn btn-sm btn-success",title:"Approve quiz",children:(0,$o.jsx)(Bd,{className:"h-3 w-3"})}),(0,$o.jsx)("button",{onClick:()=>le(e.id,!1,"Quiz requires review"),disabled:Z.isLoading,className:"btn btn-sm btn-danger",title:"Reject quiz",children:(0,$o.jsx)(fd,{className:"h-3 w-3"})})]})})]},e.id)))})]})})})]})}),"onboarding-reviews"===l&&(0,$o.jsx)("div",{className:"space-y-6",children:H?(0,$o.jsx)(Zc,{message:s("common:loading.content")}):(0,$o.jsxs)("div",{className:"glass-card hover-lift",children:[(0,$o.jsxs)("div",{className:"p-8 border-b border-white/20",children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy",children:s("dashboard.sections.onboardingReviews.title")}),(0,$o.jsx)("p",{className:"text-slate-600 mt-2",children:s("dashboard.sections.onboardingReviews.description")})]}),(0,$o.jsx)("div",{className:"p-6",children:0===(null===V||void 0===V?void 0:V.length)?(0,$o.jsxs)("div",{className:"text-center py-12",children:[(0,$o.jsx)(Yc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("dashboard.sections.quizReviews.empty")}),(0,$o.jsx)("p",{className:"text-gray-600",children:s("dashboard.sections.onboardingReviews.emptyDescription")})]}):(0,$o.jsx)("div",{className:"space-y-6",children:(Array.isArray(V)?V:[]).map((e=>(0,$o.jsxs)("div",{className:"glass-card p-8 hover-lift",children:[(0,$o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.user.firstName," ",e.user.lastName]}),(0,$o.jsxs)("p",{className:"text-gray-600",children:[e.user.email," \u2022 ",e.user.position]}),(0,$o.jsxs)("p",{className:"text-sm text-gray-500",children:[s("profile.vessel"),": ",e.user.vesselAssignment]})]}),(0,$o.jsx)("span",{className:"badge ".concat(de(e.user.status)),children:e.user.status})]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:(Array.isArray(e.phases)?e.phases:[]).map((e=>{var t,n;return(0,$o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,$o.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:[s("training.phase")," ",e.phase]}),(0,$o.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,$o.jsxs)("div",{className:"flex justify-between",children:[(0,$o.jsx)("span",{children:"Training Items:"}),(0,$o.jsxs)("span",{className:e.completedItems===e.totalItems?"text-green-600":"text-yellow-600",children:[e.completedItems,"/",e.totalItems]})]}),(0,$o.jsxs)("div",{className:"flex justify-between",children:[(0,$o.jsx)("span",{children:"Quiz:"}),(0,$o.jsx)("span",{className:"approved"===(null===(t=e.quiz)||void 0===t?void 0:t.reviewStatus)?"text-green-600":"rejected"===(null===(n=e.quiz)||void 0===n?void 0:n.reviewStatus)?"text-red-600":"text-yellow-600",children:e.quiz?e.quiz.reviewStatus:"Not taken"})]}),(0,$o.jsxs)("div",{className:"flex justify-between",children:[(0,$o.jsxs)("span",{children:[s("common.status"),":"]}),(0,$o.jsx)("span",{className:"completed"===e.status?"text-green-600":"text-yellow-600",children:e.status})]})]})]},e.phase)}))}),(0,$o.jsx)("div",{className:"flex justify-end",children:(0,$o.jsxs)("button",{onClick:()=>{return t=e.user.id,void(window.confirm(s("manager:dashboard.messages.approveOnboardingConfirm"))&&ee.mutate(t));var t},disabled:ee.isLoading,className:"btn btn-success",children:[(0,$o.jsx)(Bd,{className:"h-4 w-4 mr-2"}),"Approve Complete Onboarding"]})})]},e.user.id)))})})]})}),"compliance"===l&&(0,$o.jsx)("div",{className:"space-y-6",children:(0,$o.jsxs)("div",{className:"glass-card p-6",children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gradient-navy mb-6",children:s("general.compliance_metrics")}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,$o.jsx)("div",{className:"glass-card p-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("p",{className:"text-sm text-slate-600",children:s("general.overall_completion_rate")}),(0,$o.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[(null===F||void 0===F||null===(t=F.completionRates)||void 0===t?void 0:t.overall)||0,"%"]})]}),(0,$o.jsx)(Bd,{className:"h-8 w-8 text-green-500"})]})}),(0,$o.jsx)("div",{className:"glass-card p-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("p",{className:"text-sm text-slate-600",children:s("general.pending_reviews")}),(0,$o.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:((null===B||void 0===B?void 0:B.length)||0)+((null===V||void 0===V?void 0:V.length)||0)})]}),(0,$o.jsx)(qd,{className:"h-8 w-8 text-orange-500"})]})}),(0,$o.jsx)("div",{className:"glass-card p-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("p",{className:"text-sm text-slate-600",children:s("dashboard.certificates.issued")}),(0,$o.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===G||void 0===G?void 0:G.length)||0})]}),(0,$o.jsx)(Zu,{className:"h-8 w-8 text-blue-500"})]})})]}),(0,$o.jsxs)("div",{className:"mb-8",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:s("dashboard.sections.compliance.trainingProgress")}),(0,$o.jsx)("div",{className:"space-y-3",children:["Deksman","Lichtmatroos","Matroos","Volmatroos","Stuurman","Kapitein"].map((e=>{const t=ce.filter((t=>t.position===e)),n=t.filter((e=>"fully_completed"===e.status)),i=t.length>0?Math.round(n.length/t.length*100):0;return(0,$o.jsxs)("div",{className:"flex items-center justify-between p-3 glass-card",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("span",{className:"font-medium text-slate-700",children:e}),(0,$o.jsxs)("span",{className:"text-sm text-slate-500",children:["(",n.length,"/",t.length,")"]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,$o.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(i,"%")}})}),(0,$o.jsxs)("span",{className:"text-sm font-medium text-slate-700 w-12 text-right",children:[i,"%"]})]})]},e)}))})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:s("general.recent_activity")}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)("div",{className:"glass-card p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Bd,{className:"h-5 w-5 text-green-500"}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[(null===F||void 0===F||null===(n=F.recentActivity)||void 0===n?void 0:n.completedSessions)||0," training sessions completed this week"]}),(0,$o.jsx)("p",{className:"text-xs text-slate-500",children:s("dashboard.sections.compliance.lastUpdated",{date:(new Date).toLocaleDateString()})})]})]})}),(0,$o.jsx)("div",{className:"glass-card p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(qd,{className:"h-5 w-5 text-orange-500"}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[(null===B||void 0===B?void 0:B.length)||0," quiz reviews pending your approval"]}),(0,$o.jsx)("p",{className:"text-xs text-slate-500",children:s("dashboard.sections.compliance.requiresAttention")})]})]})}),(0,$o.jsx)("div",{className:"glass-card p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Zu,{className:"h-5 w-5 text-blue-500"}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[(null===G||void 0===G?void 0:G.length)||0," certificates issued this month"]}),(0,$o.jsx)("p",{className:"text-xs text-slate-500",children:s("dashboard.sections.compliance.certificatesDistributed")})]})]})})]})]})]})}),"certificates"===l&&(0,$o.jsx)("div",{className:"space-y-6",children:Q?(0,$o.jsx)(Zc,{message:s("common:loading.content")}):(0,$o.jsx)($o.Fragment,{children:(0,$o.jsx)($u,{onViewCertificate:e=>h(e),onRegenerateCertificate:e=>h(e),onDeleteCertificate:e=>{window.confirm("Are you sure you want to delete this certificate? This action cannot be undone.")&&fo(e.id).then((()=>{C.invalidateQueries("certificates"),Vn.success("Certificate deleted successfully")})).catch((e=>{Vn.error("Failed to delete certificate: ".concat(e.message))}))}})})}),m&&(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,$o.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto modal-mobile",children:[(0,$o.jsxs)("div",{className:"flex justify-between items-center p-4 md:p-6 border-b",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold",children:s("forms:addCrewMember.title")}),(0,$o.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 p-2 touch-target",children:(0,$o.jsx)(fd,{className:"h-6 w-6"})})]}),(0,$o.jsxs)("form",{onSubmit:T((e=>{const t=d(d({},e),{},{preferredLanguage:e.preferredLanguage||"en"});Y.mutate(t)})),className:"p-4 md:p-6 space-y-4",children:[(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.firstName")}),(0,$o.jsx)("input",d({type:"text",className:"form-input ".concat(M.firstName?"error":"")},A("firstName",{required:"First name is required"}))),M.firstName&&(0,$o.jsx)("p",{className:"form-error",children:M.firstName.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.lastName")}),(0,$o.jsx)("input",d({type:"text",className:"form-input ".concat(M.lastName?"error":"")},A("lastName",{required:"Last name is required"}))),M.lastName&&(0,$o.jsx)("p",{className:"form-error",children:M.lastName.message})]})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.email")}),(0,$o.jsx)("input",d({type:"email",className:"form-input ".concat(M.email?"error":"")},A("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}))),M.email&&(0,$o.jsx)("p",{className:"form-error",children:M.email.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.position")}),(0,$o.jsxs)("select",d(d({className:"form-input form-select ".concat(M.position?"error":"")},A("position",{required:"Position is required"})),{},{children:[(0,$o.jsx)("option",{value:"",children:s("forms:selectPosition")}),(0,$o.jsx)("option",{value:"Deksman",children:"Deksman"}),(0,$o.jsx)("option",{value:"Lichtmatroos",children:"Lichtmatroos"}),(0,$o.jsx)("option",{value:"Matroos",children:"Matroos"}),(0,$o.jsx)("option",{value:"Volmatroos",children:"Volmatroos"}),(0,$o.jsx)("option",{value:"Stuurman",children:"Stuurman"}),(0,$o.jsx)("option",{value:"Kapitein",children:"Kapitein"})]})),M.position&&(0,$o.jsx)("p",{className:"form-error",children:M.position.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsxs)("label",{className:"form-label",children:[(0,$o.jsx)(ed,{className:"h-4 w-4 inline mr-1"}),s("forms:addCrewMember.fields.preferredLanguage")]}),(0,$o.jsx)("select",d(d({className:"form-input form-select ".concat(M.preferredLanguage?"error":"")},A("preferredLanguage",{required:s("forms:required")})),{},{defaultValue:"en",children:E.map((e=>(0,$o.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),M.preferredLanguage&&(0,$o.jsx)("p",{className:"form-error",children:M.preferredLanguage.message}),(0,$o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s("profile.language_description")})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.vesselAssignment")}),(0,$o.jsx)("input",d({type:"text",className:"form-input ".concat(M.vesselAssignment?"error":""),placeholder:"e.g., MS Burando Atlantic"},A("vesselAssignment",{required:"Vessel assignment is required"}))),M.vesselAssignment&&(0,$o.jsx)("p",{className:"form-error",children:M.vesselAssignment.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.expectedBoardingDate")}),(0,$o.jsx)("input",d({type:"date",className:"form-input ".concat(M.expectedBoardingDate?"error":"")},A("expectedBoardingDate",{required:"Boarding date is required"}))),M.expectedBoardingDate&&(0,$o.jsx)("p",{className:"form-error",children:M.expectedBoardingDate.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.contactPhone")}),(0,$o.jsx)("input",d({type:"tel",className:"form-input"},A("contactPhone")))]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.emergencyContactName")}),(0,$o.jsx)("input",d({type:"text",className:"form-input"},A("emergencyContactName")))]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:addCrewMember.fields.emergencyContactPhone")}),(0,$o.jsx)("input",d({type:"tel",className:"form-input"},A("emergencyContactPhone")))]}),(0,$o.jsxs)("div",{className:"flex flex-col md:flex-row justify-end space-y-3 md:space-y-0 md:space-x-3 pt-4",children:[(0,$o.jsx)("button",{type:"button",onClick:()=>p(!1),className:"btn btn-secondary touch-target",children:s("forms:addCrewMember.actions.cancel")}),(0,$o.jsx)("button",{type:"submit",disabled:Y.isLoading,className:"btn btn-primary touch-target",children:Y.isLoading?(0,$o.jsx)(Zc,{size:"small",message:""}):s("forms:addCrewMember.actions.create")})]})]})]})}),k&&(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,$o.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto modal-mobile",children:[(0,$o.jsxs)("div",{className:"flex justify-between items-center p-4 md:p-6 border-b",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold",children:s("forms:editCrewMember.title")}),(0,$o.jsx)("button",{onClick:()=>{N(null),L()},className:"text-gray-400 hover:text-gray-600 p-2 touch-target",children:(0,$o.jsx)(fd,{className:"h-6 w-6"})})]}),(0,$o.jsxs)("form",{onSubmit:R((e=>{X.mutate({id:k.id,data:e})})),className:"p-4 md:p-6 space-y-4",children:[(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:editCrewMember.fields.firstName")}),(0,$o.jsx)("input",d({type:"text",className:"form-input ".concat(O.firstName?"error":"")},D("firstName",{required:"First name is required"}))),O.firstName&&(0,$o.jsx)("p",{className:"form-error",children:O.firstName.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("forms:editCrewMember.fields.lastName")}),(0,$o.jsx)("input",d({type:"text",className:"form-input ".concat(O.lastName?"error":"")},D("lastName",{required:"Last name is required"}))),O.lastName&&(0,$o.jsx)("p",{className:"form-error",children:O.lastName.message})]})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("profile.email")}),(0,$o.jsx)("input",d({type:"email",className:"form-input ".concat(O.email?"error":"")},D("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}))),O.email&&(0,$o.jsx)("p",{className:"form-error",children:O.email.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("profile.position")}),(0,$o.jsxs)("select",d(d({className:"form-input form-select ".concat(O.position?"error":"")},D("position",{required:"Position is required"})),{},{children:[(0,$o.jsx)("option",{value:"",children:s("forms.selectPosition")}),(0,$o.jsx)("option",{value:"Deksman",children:"Deksman"}),(0,$o.jsx)("option",{value:"Lichtmatroos",children:"Lichtmatroos"}),(0,$o.jsx)("option",{value:"Matroos",children:"Matroos"}),(0,$o.jsx)("option",{value:"Volmatroos",children:"Volmatroos"}),(0,$o.jsx)("option",{value:"Stuurman",children:"Stuurman"}),(0,$o.jsx)("option",{value:"Kapitein",children:"Kapitein"})]})),O.position&&(0,$o.jsx)("p",{className:"form-error",children:O.position.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsxs)("label",{className:"form-label",children:[(0,$o.jsx)(ed,{className:"h-4 w-4 inline mr-1"}),s("profile.language_preference")]}),(0,$o.jsx)("select",d(d({className:"form-input form-select ".concat(O.preferredLanguage?"error":"")},D("preferredLanguage")),{},{children:E.map((e=>(0,$o.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))})),O.preferredLanguage&&(0,$o.jsx)("p",{className:"form-error",children:O.preferredLanguage.message}),(0,$o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s("profile.language_description")})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("profile.vessel_assignment")}),(0,$o.jsx)("input",d({type:"text",className:"form-input ".concat(O.vesselAssignment?"error":""),placeholder:"e.g., MS Burando Atlantic"},D("vesselAssignment",{required:"Vessel assignment is required"}))),O.vesselAssignment&&(0,$o.jsx)("p",{className:"form-error",children:O.vesselAssignment.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:s("profile.boarding_date")}),(0,$o.jsx)("input",d({type:"date",className:"form-input ".concat(O.expectedBoardingDate?"error":"")},D("expectedBoardingDate",{required:"Boarding date is required"}))),O.expectedBoardingDate&&(0,$o.jsx)("p",{className:"form-error",children:O.expectedBoardingDate.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsx)("label",{className:"form-label",children:"Status"}),(0,$o.jsxs)("select",d(d({className:"form-input form-select ".concat(O.status?"error":"")},D("status",{required:"Status is required"})),{},{children:[(0,$o.jsx)("option",{value:"pending",children:"Pending"}),(0,$o.jsx)("option",{value:"active",children:"Active"}),(0,$o.jsx)("option",{value:"completed",children:"Completed"}),(0,$o.jsx)("option",{value:"inactive",children:"Inactive"})]})),O.status&&(0,$o.jsx)("p",{className:"form-error",children:O.status.message})]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsxs)("label",{className:"form-label",children:[s("profile.contact_phone")," (",s("forms.optional"),")"]}),(0,$o.jsx)("input",d({type:"tel",className:"form-input"},D("contactPhone")))]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsxs)("label",{className:"form-label",children:[s("profile.contact_name")," (",s("forms.optional"),")"]}),(0,$o.jsx)("input",d({type:"text",className:"form-input"},D("emergencyContactName")))]}),(0,$o.jsxs)("div",{className:"form-group",children:[(0,$o.jsxs)("label",{className:"form-label",children:[s("profile.contact_phone")," (",s("forms.optional"),")"]}),(0,$o.jsx)("input",d({type:"tel",className:"form-input"},D("emergencyContactPhone")))]}),(0,$o.jsxs)("div",{className:"flex flex-col md:flex-row justify-end space-y-3 md:space-y-0 md:space-x-3 pt-4",children:[(0,$o.jsx)("button",{type:"button",onClick:()=>{N(null),L()},className:"btn btn-secondary touch-target",children:"Cancel"}),(0,$o.jsx)("button",{type:"submit",disabled:X.isLoading,className:"btn btn-primary touch-target",children:X.isLoading?(0,$o.jsx)(Zc,{size:"small",message:""}):"Update Crew Member"})]})]})]})}),j&&(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,$o.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,$o.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold",children:s("general.details")}),(0,$o.jsx)("button",{onClick:()=>S(null),className:"text-gray-400 hover:text-gray-600",children:(0,$o.jsx)(fd,{className:"h-6 w-6"})})]}),(0,$o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Personal Information"}),(0,$o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.firstName})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.lastName})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.email})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Phone"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.contactPhone||"Not provided"})]})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Work Information"}),(0,$o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Position"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.position})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Vessel Assignment"}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,$o.jsx)($c,{className:"h-4 w-4 text-gray-400 mr-2"}),j.vesselAssignment]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Expected Boarding Date"}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,$o.jsx)(Nd,{className:"h-4 w-4 text-gray-400 mr-2"}),th(j.expectedBoardingDate)]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,$o.jsx)("span",{className:"mt-1 inline-flex ".concat(de(j.status)),children:ue(j.status)})]})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Emergency Contact"}),(0,$o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Name"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.emergencyContactName||"Not provided"})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Phone"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.emergencyContactPhone||"Not provided"})]})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,$o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Created At"}),(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:j.createdAt?new Date(j.createdAt).toLocaleString():"Unknown"})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Member ID"}),(0,$o.jsxs)("p",{className:"mt-1 text-sm text-gray-900",children:["#",j.id]})]})]})]}),(0,$o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,$o.jsxs)("button",{onClick:()=>{S(null),N(j)},className:"btn btn-secondary",children:[(0,$o.jsx)(sd,{className:"h-4 w-4 mr-2"}),"Edit Member"]}),(0,$o.jsxs)("button",{onClick:()=>{te(j.id),S(null)},disabled:K.isLoading,className:"btn btn-outline",children:[(0,$o.jsx)(Qc,{className:"h-4 w-4 mr-2"}),"Send Magic Link"]}),(0,$o.jsx)("button",{onClick:()=>S(null),className:"btn btn-primary",children:"Close"})]})]})]})}),u&&(0,$o.jsx)(eh,{certificate:u,onClose:()=>h(null),onRegenerateSuccess:e=>{h(null),Vn.success("Certificate regenerated successfully. Certificate #".concat(e.certificateNumber))}})]})},ih=e=>{let{user:t,profile:n,stats:i}=e;const{t:a}=bs("dashboard");return(0,$o.jsxs)("div",{className:"bg-gradient-to-r from-burando-navy to-burando-teal rounded-lg text-white p-4 sm:p-6 shadow-burando-lg",children:[(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2",children:a("crew.welcome",{name:null===t||void 0===t?void 0:t.firstName})}),(0,$o.jsx)("p",{className:"text-burando-light-green mb-4",children:a("crew.subtitle")}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-sm",children:[(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)($c,{className:"h-4 w-4 mr-2"}),a("crew.vessel"),": ",null===n||void 0===n?void 0:n.vesselAssignment]}),(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(Nd,{className:"h-4 w-4 mr-2"}),a("crew.position"),": ",null===n||void 0===n?void 0:n.position]})]})]}),(0,$o.jsxs)("div",{className:"text-center sm:text-right",children:[(0,$o.jsxs)("div",{className:"text-3xl font-bold",children:[(null===i||void 0===i?void 0:i.overallProgress)||0,"%"]}),(0,$o.jsx)("div",{className:"text-burando-light-green",children:a("crew.overall_progress")})]})]}),(0,$o.jsx)("div",{className:"mt-4",children:(0,$o.jsx)("div",{className:"burando-progress",children:(0,$o.jsx)("div",{className:"burando-progress-bar",style:{width:"".concat((null===i||void 0===i?void 0:i.overallProgress)||0,"%")}})})})]})},ah=Gc("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),rh=Gc("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),sh=Gc("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),oh=e=>{switch(e){case"completed":return(0,$o.jsx)(Bd,{className:"h-5 w-5 text-green-600"});case"in_progress":return(0,$o.jsx)(qd,{className:"h-5 w-5 text-blue-600"});default:return(0,$o.jsx)(sh,{className:"h-5 w-5 text-gray-400"})}},lh=e=>{switch(e){case"completed":return"badge badge-success";case"in_progress":return"badge badge-info";default:return"badge badge-secondary"}},ch=(e,t)=>{if(!t)return null;const n=t.filter((t=>t.phase===e));if(0===n.length)return null;const i=n.sort(((e,t)=>new Date(t.completedAt)-new Date(e.completedAt)));return i[0]},dh=(e,t,n)=>{if("completed"!==t)return null;const i=ch(e.phase_number,n);return i?"pending_review"===i.review_status?(0,$o.jsxs)("span",{className:"burando-badge burando-badge-info",children:[(0,$o.jsx)(pd,{className:"h-3 w-3 mr-1"}),"Awaiting Review (",i.score,"%)"]}):"approved"===i.review_status&&i.passed?(0,$o.jsxs)("span",{className:"burando-badge burando-badge-success",children:[(0,$o.jsx)(Bd,{className:"h-3 w-3 mr-1"}),"Quiz Approved (",i.score,"%)"]}):"rejected"!==i.review_status&&i.passed&&i.passed?(0,$o.jsxs)("span",{className:"burando-badge burando-badge-success",children:[(0,$o.jsx)(Bd,{className:"h-3 w-3 mr-1"}),"Quiz Passed (",i.score,"%)"]}):(0,$o.jsxs)("span",{className:"burando-badge burando-badge-error",children:[(0,$o.jsx)(Pd,{className:"h-3 w-3 mr-1"}),"Quiz Failed (",i.score,"%) - Retake Required"]}):(0,$o.jsxs)("span",{className:"burando-badge burando-badge-warning",children:[(0,$o.jsx)(Pd,{className:"h-3 w-3 mr-1"}),"Quiz Required"]})},uh=e=>{var t;let{stats:n,progress:i,profile:a,quizHistory:r}=e;const s=pe();return(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,$o.jsx)("div",{className:"burando-card cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:()=>{const e=(null===i||void 0===i?void 0:i.phases)||[],t=e.find((e=>"in_progress"===e.status))||e.find((e=>"not_started"===e.status));t&&s("/crew/training/".concat(t.phase_number))},children:(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(ah,{className:"h-8 w-8 text-burando-teal"}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Training"}),(0,$o.jsx)("p",{className:"text-2xl font-bold text-burando-navy",children:(()=>{if(null!==n&&void 0!==n&&n.isCompleted||3===(null===n||void 0===n?void 0:n.completedPhases))return"Completed";const e=(null===i||void 0===i?void 0:i.phases)||[],t=e.find((e=>"in_progress"===e.status))||e.find((e=>"not_started"===e.status));return"Phase ".concat((null===t||void 0===t?void 0:t.phase_number)||1)})()})]})]})})}),(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(Bd,{className:"h-8 w-8 text-burando-light-green"}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Items Completed"}),(0,$o.jsxs)("p",{className:"text-2xl font-bold text-burando-navy",children:[(null===n||void 0===n?void 0:n.completedItems)||0,"/",(null===n||void 0===n?void 0:n.totalItems)||0]})]})]})})}),(0,$o.jsx)("div",{className:"burando-card cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:()=>{const e=((null===i||void 0===i?void 0:i.phases)||[]).find((e=>"completed"===e.status&&!ch(e.phase_number,r)));s(e?"/crew/quiz/".concat(e.phase_number):"/crew/profile")},children:(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(rh,{className:"h-8 w-8 text-burando-bright-teal"}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Quiz Results"}),(0,$o.jsxs)("p",{className:"text-2xl font-bold text-burando-navy",children:[(null===n||void 0===n||null===(t=n.quizStats)||void 0===t?void 0:t.completed)||0,"/3"]})]})]})})}),(0,$o.jsx)("div",{className:"burando-card cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:()=>s("/crew/profile"),children:(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)(qd,{className:"h-8 w-8 text-burando-teal-light"}),(0,$o.jsxs)("div",{className:"ml-4",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"My Profile"}),(0,$o.jsx)("p",{className:"text-lg font-bold text-burando-navy capitalize",children:(null===a||void 0===a?void 0:a.status)||"Active"})]})]})})})]})},hh=e=>{let{phase:t,progress:n,quizHistory:i}=e;const{t:a}=bs(["dashboard","common"]),r=(e=>{const t=new Date(e)-new Date;return Math.ceil(t/864e5)})(new Date(Date.now()+2592e6)),s=r<0,o=((e,t)=>{if(1===e)return!0;const n=((null===t||void 0===t?void 0:t.phases)||[]).find((t=>t.phase_number===e-1));return"completed"===(null===n||void 0===n?void 0:n.status)})(t.phase_number,n),l=ch(t.phase_number,i);return(0,$o.jsx)("div",{className:"border rounded-lg p-4 transition-colors ".concat(o?"border-gray-200 hover:border-blue-300":"border-gray-100 bg-gray-50"),children:(0,$o.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,$o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$o.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[oh(t.status),(0,$o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:t.title||"Phase ".concat(t.phase_number)}),(0,$o.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:t.description||"Training phase description"})]})]}),(0,$o.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3 lg:mb-0",children:[(0,$o.jsx)("span",{className:lh(t.status),children:a("common:status.".concat(t.status.replace("_","_")))}),(0,$o.jsx)("span",{className:"text-sm text-gray-500",children:"Items: 0/0 completed"}),dh(t,t.status,i),s&&"completed"!==t.status&&(0,$o.jsxs)("span",{className:"flex items-center text-sm text-red-600",children:[(0,$o.jsx)(Pd,{className:"h-4 w-4 mr-1"}),a("dashboard:crew.completion.overdue_by_days",{days:Math.abs(r)})]}),!s&&"completed"!==t.status&&(0,$o.jsx)("span",{className:"text-sm text-gray-500",children:a("dashboard:crew.completion.due_in_days",{days:r})})]})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between lg:justify-end gap-3 lg:gap-3",children:[(0,$o.jsxs)("div",{className:"text-center flex-shrink-0",children:[(0,$o.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Steps"}),(0,$o.jsxs)("div",{className:"relative w-12 h-12 sm:w-16 sm:h-16",children:[(c=t.progressPercentage||0,d="completed"===t.status?"text-burando-light-green":"text-burando-teal",(0,$o.jsxs)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 transform -rotate-90",viewBox:"0 0 36 36",children:[(0,$o.jsx)("path",{className:"text-gray-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,$o.jsx)("path",{className:d,stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"".concat(c,", 100"),d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]})),(0,$o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,$o.jsxs)("span",{className:"text-xs sm:text-sm font-semibold",children:[t.progressPercentage||0,"%"]})})]})]}),"completed"===t.status&&(0,$o.jsxs)("div",{className:"text-center flex-shrink-0",children:[(0,$o.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Quiz"}),(0,$o.jsx)("div",{className:"relative w-12 h-12 sm:w-16 sm:h-16",children:(()=>{const e=(e=>e?"pending_review"===e.review_status?{color:"text-blue-500",icon:"\u23f3",fillOpacity:"0.1"}:"approved"===e.review_status&&e.passed?{color:"text-burando-light-green",icon:"\u2713",fillOpacity:"0.1"}:"rejected"!==e.review_status&&e.passed?{color:e.passed?"text-burando-light-green":"text-orange-600",icon:e.passed?"\u2713":"\u2717",fillOpacity:"0.1"}:{color:"text-orange-600",icon:"\u2717",fillOpacity:"0.1"}:{color:"text-gray-300",icon:"?",fillOpacity:"0.1"})(l);return(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16",viewBox:"0 0 36 36",children:(0,$o.jsx)("circle",{className:e.color,stroke:"currentColor",strokeWidth:"3",fill:"currentColor",fillOpacity:e.fillOpacity,cx:"18",cy:"18",r:"15.9155"})}),(0,$o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,$o.jsx)("span",{className:"text-lg sm:text-xl font-bold ".concat(e.color),children:e.icon})})]})})()})]}),o?"completed"===t.status?l?(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(t.phase_number),className:"burando-btn text-sm px-3 py-2 touch-target ".concat(l.passed?"burando-btn-success":"burando-btn-outline"),children:[(0,$o.jsx)("span",{className:"hidden sm:inline",children:"View Results"}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Results"})]}):(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(t.phase_number),className:"burando-btn burando-btn-primary text-sm px-3 py-2 touch-target",children:[(0,$o.jsx)("span",{className:"hidden sm:inline",children:"Take Quiz"}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Quiz"})]}):"in_progress"===t.status?(0,$o.jsxs)(xt,{to:"/crew/training/".concat(t.phase_number),className:"burando-btn burando-btn-primary text-sm px-3 py-2 touch-target",children:[(0,$o.jsx)("span",{className:"hidden sm:inline",children:a("common:buttons.continue")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Continue"})]}):(0,$o.jsxs)(xt,{to:"/crew/training/".concat(t.phase_number),className:"burando-btn burando-btn-outline text-sm px-3 py-2 touch-target",children:[(0,$o.jsx)("span",{className:"hidden sm:inline",children:a("common:buttons.start")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Start"})]}):(0,$o.jsxs)("button",{disabled:!0,className:"burando-btn burando-btn-secondary opacity-50 text-sm px-3 py-2 touch-target",children:[(0,$o.jsx)("span",{className:"hidden sm:inline",children:a("common:buttons.locked")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Locked"})]})]})]})});var c,d},mh=e=>{let{progress:t,quizHistory:n}=e;const{t:i}=bs("dashboard");return(0,$o.jsxs)("div",{className:"burando-card",children:[(0,$o.jsxs)("div",{className:"burando-card-header",children:[(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy",children:i("crew.training_phases.title")}),(0,$o.jsx)("p",{className:"burando-text-muted",children:i("crew.training_phases.subtitle")})]}),(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsx)("div",{className:"space-y-4",children:((null===t||void 0===t?void 0:t.phases)||[]).map((e=>(0,$o.jsx)(hh,{phase:e,progress:t,quizHistory:n},e.phase_number)))})})]})},ph=e=>{let{completedPhases:t}=e;const{t:n}=bs("dashboard");if(t>=3)return null;return(0,$o.jsxs)("div",{className:"burando-card",children:[(0,$o.jsx)("div",{className:"burando-card-header",children:(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy",children:"Next Steps"})}),(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsx)("div",{className:"bg-gradient-to-r from-burando-bright-teal/10 to-burando-light-green/10 border border-burando-bright-teal/20 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-start",children:[(0,$o.jsx)(ah,{className:"h-5 w-5 text-burando-teal mt-0.5 mr-3 flex-shrink-0"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-medium text-burando-navy mb-1",children:n("crew.next_steps.continue_training")}),(0,$o.jsx)("p",{className:"text-burando-teal text-sm",children:n(0===t?"crew.next_steps.phase1_next":1===t?"crew.next_steps.phase2_next":"crew.next_steps.phase3_next")})]})]})})})]})};ph.defaultProps={completedPhases:0};const fh=ph,gh=e=>{let{completedPhases:t}=e;return 3!==t?null:(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsxs)("div",{className:"bg-gradient-to-r from-burando-light-green/20 to-burando-bright-teal/20 border border-burando-light-green/30 rounded-lg p-6 text-center",children:[(0,$o.jsx)(rh,{className:"h-12 w-12 text-burando-light-green mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"burando-heading-2 text-burando-navy mb-2",children:"Congratulations! \ud83c\udf89"}),(0,$o.jsx)("p",{className:"text-burando-teal",children:"You have successfully completed all phases of the onboarding training program. Your completion certificate has been generated and sent to HR."})]})})})};gh.defaultProps={completedPhases:0};const vh=gh,bh=()=>{const{user:e}=el(),{t:t}=bs("dashboard"),{progress:n,stats:i,profile:a,quizHistory:r,isLoading:s,error:o}=(()=>{const{user:e}=el(),{data:t,isLoading:n,error:i}=(0,Et.useQuery)("training-progress",bo),{data:a,isLoading:r,error:s}=(0,Et.useQuery)("training-stats",So),{data:o,isLoading:l,error:c}=(0,Et.useQuery)("crew-profile",vo),{data:d,isLoading:u,error:h}=(0,Et.useQuery)("quiz-history",(()=>jo()),{enabled:!!e,staleTime:3e5});return{progress:t,stats:a,profile:o,quizHistory:d,isLoading:n||r||l,error:i||s||c||h,loadingStates:{progressLoading:n,statsLoading:r,profileLoading:l,quizHistoryLoading:u}}})();return s?(0,$o.jsx)(Zc,{message:"Loading your dashboard..."}):o?(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsx)("div",{className:"burando-card-body",children:(0,$o.jsxs)("div",{className:"text-center py-8",children:[(0,$o.jsx)("p",{className:"text-red-600 mb-2",children:"Failed to load dashboard data"}),(0,$o.jsx)("p",{className:"text-gray-600 text-sm",children:"Please try refreshing the page"})]})})}):(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsx)(ih,{user:e,profile:a,stats:i}),(0,$o.jsx)(uh,{stats:i,progress:n,profile:a,quizHistory:r}),(0,$o.jsx)(mh,{progress:n,quizHistory:r}),(0,$o.jsx)(fh,{completedPhases:null===i||void 0===i?void 0:i.completedPhases}),(0,$o.jsx)(vh,{completedPhases:null===i||void 0===i?void 0:i.completedPhases})]})},xh=Gc("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),yh=Gc("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),wh=Gc("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_h=Gc("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),kh=Gc("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Nh=Gc("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),jh=e=>{let{mediaFiles:t=[],title:n="Resources"}=e;const[a,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(0);if(!t||0===t.length)return null;const l=e=>{switch(e){case"image":return(0,$o.jsx)(Nh,{className:"h-5 w-5"});case"video":return(0,$o.jsx)(sh,{className:"h-5 w-5"});default:return(0,$o.jsx)(rd,{className:"h-5 w-5"})}},c=e=>{if(!e)return"";if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},d=(e,t)=>{r(e),o(t)},u=e=>{const n="next"===e?(s+1)%t.length:(s-1+t.length)%t.length;o(n),r(t[n])};return(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsxs)("div",{className:"mt-8",children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(rd,{className:"h-5 w-5 mr-2 text-blue-600"}),n]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(((e,t)=>(0,$o.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow duration-200",children:[(0,$o.jsx)("div",{className:"relative",children:"image"===e.file_type?(0,$o.jsxs)("div",{className:"aspect-video bg-gray-100 relative overflow-hidden",children:[(0,$o.jsx)("img",{src:e.file_path,alt:e.alt_text||e.file_name,className:"w-full h-full object-cover",loading:"lazy"}),(0,$o.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:(0,$o.jsx)("button",{onClick:()=>d(e,t),className:"opacity-0 hover:opacity-100 bg-white bg-opacity-90 p-2 rounded-full transition-opacity duration-200",children:(0,$o.jsx)(pd,{className:"h-5 w-5 text-gray-700"})})})]}):"video"===e.file_type?(0,$o.jsxs)("div",{className:"aspect-video bg-gray-900 relative flex items-center justify-center",children:[(0,$o.jsx)(sh,{className:"h-12 w-12 text-white opacity-80"}),(0,$o.jsx)("button",{onClick:()=>d(e,t),className:"absolute inset-0 flex items-center justify-center hover:bg-black hover:bg-opacity-20 transition-all duration-200",children:(0,$o.jsx)("div",{className:"bg-white bg-opacity-90 p-2 rounded-full",children:(0,$o.jsx)(pd,{className:"h-5 w-5 text-gray-700"})})})]}):(0,$o.jsx)("div",{className:"aspect-video bg-gray-50 flex items-center justify-center",children:l(e.file_type)})}),(0,$o.jsxs)("div",{className:"p-4",children:[(0,$o.jsx)("h4",{className:"font-medium text-gray-900 text-sm mb-1 truncate",title:e.file_name,children:e.file_name}),e.description&&(0,$o.jsx)("p",{className:"text-gray-600 text-xs mb-2 line-clamp-2",children:e.description}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("span",{className:"text-xs text-gray-500 capitalize",children:[e.file_type,e.file_size&&" \u2022 ".concat(c(e.file_size))]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>d(e,t),className:"text-blue-600 hover:text-blue-700 p-1",title:"Preview",children:(0,$o.jsx)(pd,{className:"h-4 w-4"})}),(0,$o.jsx)("a",{href:e.file_path,download:e.file_name,className:"text-gray-600 hover:text-gray-700 p-1",title:"Download",children:(0,$o.jsx)(Id,{className:"h-4 w-4"})})]})]})]})]},e.id||t)))})]}),a&&(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,$o.jsxs)("div",{className:"relative max-w-4xl max-h-full w-full",children:[(0,$o.jsx)("button",{onClick:()=>{r(null),o(0)},className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200",children:(0,$o.jsx)(fd,{className:"h-6 w-6"})}),t.length>1&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("button",{onClick:()=>u("prev"),className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200",children:(0,$o.jsx)(jd,{className:"h-6 w-6"})}),(0,$o.jsx)("button",{onClick:()=>u("next"),className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200",children:(0,$o.jsx)(Sd,{className:"h-6 w-6"})})]}),(0,$o.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden",children:["image"===a.file_type?(0,$o.jsx)("img",{src:a.file_path,alt:a.alt_text||a.file_name,className:"w-full h-auto max-h-[70vh] object-contain"}):"video"===a.file_type?(0,$o.jsx)("video",{src:a.file_path,controls:!0,className:"w-full h-auto max-h-[70vh]",autoPlay:!0,children:"Your browser does not support the video tag."}):(0,$o.jsxs)("div",{className:"p-8 text-center",children:[(0,$o.jsx)("div",{className:"mb-4",children:l(a.file_type)}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.file_name}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:"Preview not available for this file type"}),(0,$o.jsxs)("a",{href:a.file_path,download:a.file_name,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[(0,$o.jsx)(Id,{className:"h-4 w-4 mr-2"}),"Download File"]})]}),(0,$o.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,$o.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:a.file_name}),a.description&&(0,$o.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:a.description}),(0,$o.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,$o.jsxs)("span",{className:"capitalize",children:[a.file_type,a.file_size&&" \u2022 ".concat(c(a.file_size))]}),t.length>1&&(0,$o.jsxs)("span",{children:[s+1," of ",t.length]})]})]})]})]})})]})};var Sh=n(672);const Ch=Sh.default||Sh,{entries:Eh,setPrototypeOf:Ah,isFrozen:Th,getPrototypeOf:Mh,getOwnPropertyDescriptor:Ph}=Object;let{freeze:Dh,seal:Rh,create:Oh}=Object,{apply:Lh,construct:Ih}="undefined"!==typeof Reflect&&Reflect;Dh||(Dh=function(e){return e}),Rh||(Rh=function(e){return e}),Lh||(Lh=function(e,t,n){return e.apply(t,n)}),Ih||(Ih=function(e,t){return new e(...t)});const Fh=Zh(Array.prototype.forEach),zh=Zh(Array.prototype.lastIndexOf),qh=Zh(Array.prototype.pop),Wh=Zh(Array.prototype.push),Bh=Zh(Array.prototype.splice),Uh=Zh(String.prototype.toLowerCase),Vh=Zh(String.prototype.toString),Hh=Zh(String.prototype.match),Gh=Zh(String.prototype.replace),Qh=Zh(String.prototype.indexOf),Yh=Zh(String.prototype.trim),Kh=Zh(Object.prototype.hasOwnProperty),Xh=Zh(RegExp.prototype.test),Jh=($h=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ih($h,t)});var $h;function Zh(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return Lh(e,t,i)}}function em(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uh;Ah&&Ah(e,null);let i=t.length;for(;i--;){let a=t[i];if("string"===typeof a){const e=n(a);e!==a&&(Th(t)||(t[i]=e),a=e)}e[a]=!0}return e}function tm(e){for(let t=0;t<e.length;t++){Kh(e,t)||(e[t]=null)}return e}function nm(e){const t=Oh(null);for(const[n,i]of Eh(e)){Kh(e,n)&&(Array.isArray(i)?t[n]=tm(i):i&&"object"===typeof i&&i.constructor===Object?t[n]=nm(i):t[n]=i)}return t}function im(e,t){for(;null!==e;){const n=Ph(e,t);if(n){if(n.get)return Zh(n.get);if("function"===typeof n.value)return Zh(n.value)}e=Mh(e)}return function(){return null}}const am=Dh(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rm=Dh(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sm=Dh(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),om=Dh(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lm=Dh(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),cm=Dh(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dm=Dh(["#text"]),um=Dh(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),hm=Dh(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mm=Dh(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pm=Dh(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fm=Rh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gm=Rh(/<%[\w\W]*|[\w\W]*%>/gm),vm=Rh(/\$\{[\w\W]*/gm),bm=Rh(/^data-[\-\w.\u00B7-\uFFFF]+$/),xm=Rh(/^aria-[\-\w]+$/),ym=Rh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wm=Rh(/^(?:\w+script|data):/i),_m=Rh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),km=Rh(/^html$/i),Nm=Rh(/^[a-z][.\w]*(-[.\w]+)+$/i);var jm=Object.freeze({__proto__:null,ARIA_ATTR:xm,ATTR_WHITESPACE:_m,CUSTOM_ELEMENT:Nm,DATA_ATTR:bm,DOCTYPE_NAME:km,ERB_EXPR:gm,IS_ALLOWED_URI:ym,IS_SCRIPT_OR_DATA:wm,MUSTACHE_EXPR:fm,TMPLIT_EXPR:vm});const Sm=1,Cm=3,Em=7,Am=8,Tm=9,Mm=function(){return"undefined"===typeof window?null:window};var Pm=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mm();const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==Tm||!t.Element)return n.isSupported=!1,n;let{document:i}=t;const a=i,r=a.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:m,trustedTypes:p}=t,f=c.prototype,g=im(f,"cloneNode"),v=im(f,"remove"),b=im(f,"nextSibling"),x=im(f,"childNodes"),y=im(f,"parentNode");if("function"===typeof o){const e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let w,_="";const{implementation:k,createNodeIterator:N,createDocumentFragment:j,getElementsByTagName:S}=i,{importNode:C}=a;let E={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"===typeof Eh&&"function"===typeof y&&k&&void 0!==k.createHTMLDocument;const{MUSTACHE_EXPR:A,ERB_EXPR:T,TMPLIT_EXPR:M,DATA_ATTR:P,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:L}=jm;let{IS_ALLOWED_URI:I}=jm,F=null;const z=em({},[...am,...rm,...sm,...lm,...dm]);let q=null;const W=em({},[...um,...hm,...mm,...pm]);let B=Object.seal(Oh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,V=null,H=!0,G=!0,Q=!1,Y=!0,K=!1,X=!0,J=!1,$=!1,Z=!1,ee=!1,te=!1,ne=!1,ie=!0,ae=!1,re=!0,se=!1,oe={},le=null;const ce=em({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const ue=em({},["audio","video","img","source","image","track"]);let he=null;const me=em({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let ve=ge,be=!1,xe=null;const ye=em({},[pe,fe,ge],Vh);let we=em({},["mi","mo","mn","ms","mtext"]),_e=em({},["annotation-xml"]);const ke=em({},["title","style","font","a","script"]);let Ne=null;const je=["application/xhtml+xml","text/html"];let Se=null,Ce=null;const Ee=i.createElement("form"),Ae=function(e){return e instanceof RegExp||e instanceof Function},Te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ce||Ce!==e){if(e&&"object"===typeof e||(e={}),e=nm(e),Ne=-1===je.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Se="application/xhtml+xml"===Ne?Vh:Uh,F=Kh(e,"ALLOWED_TAGS")?em({},e.ALLOWED_TAGS,Se):z,q=Kh(e,"ALLOWED_ATTR")?em({},e.ALLOWED_ATTR,Se):W,xe=Kh(e,"ALLOWED_NAMESPACES")?em({},e.ALLOWED_NAMESPACES,Vh):ye,he=Kh(e,"ADD_URI_SAFE_ATTR")?em(nm(me),e.ADD_URI_SAFE_ATTR,Se):me,de=Kh(e,"ADD_DATA_URI_TAGS")?em(nm(ue),e.ADD_DATA_URI_TAGS,Se):ue,le=Kh(e,"FORBID_CONTENTS")?em({},e.FORBID_CONTENTS,Se):ce,U=Kh(e,"FORBID_TAGS")?em({},e.FORBID_TAGS,Se):nm({}),V=Kh(e,"FORBID_ATTR")?em({},e.FORBID_ATTR,Se):nm({}),oe=!!Kh(e,"USE_PROFILES")&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,Q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,J=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Z=e.FORCE_BODY||!1,ie=!1!==e.SANITIZE_DOM,ae=e.SANITIZE_NAMED_PROPS||!1,re=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,I=e.ALLOWED_URI_REGEXP||ym,ve=e.NAMESPACE||ge,we=e.MATHML_TEXT_INTEGRATION_POINTS||we,_e=e.HTML_INTEGRATION_POINTS||_e,B=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ae(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ae(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(B.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(G=!1),te&&(ee=!0),oe&&(F=em({},dm),q=[],!0===oe.html&&(em(F,am),em(q,um)),!0===oe.svg&&(em(F,rm),em(q,hm),em(q,pm)),!0===oe.svgFilters&&(em(F,sm),em(q,hm),em(q,pm)),!0===oe.mathMl&&(em(F,lm),em(q,mm),em(q,pm))),e.ADD_TAGS&&(F===z&&(F=nm(F)),em(F,e.ADD_TAGS,Se)),e.ADD_ATTR&&(q===W&&(q=nm(q)),em(q,e.ADD_ATTR,Se)),e.ADD_URI_SAFE_ATTR&&em(he,e.ADD_URI_SAFE_ATTR,Se),e.FORBID_CONTENTS&&(le===ce&&(le=nm(le)),em(le,e.FORBID_CONTENTS,Se)),re&&(F["#text"]=!0),J&&em(F,["html","head","body"]),F.table&&(em(F,["tbody"]),delete U.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Jh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Jh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,_=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:e=>e,createScriptURL:e=>e})}catch(Tn){return console.warn("TrustedTypes policy "+a+" could not be created."),null}}(p,r)),null!==w&&"string"===typeof _&&(_=w.createHTML(""));Dh&&Dh(e),Ce=e}},Me=em({},[...rm,...sm,...om]),Pe=em({},[...lm,...cm]),De=function(e){Wh(n.removed,{element:e});try{y(e).removeChild(e)}catch(Tn){v(e)}},Re=function(e,t){try{Wh(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(Tn){Wh(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{De(t)}catch(Tn){}else try{t.setAttribute(e,"")}catch(Tn){}},Oe=function(e){let t=null,n=null;if(Z)e="<remove></remove>"+e;else{const t=Hh(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Ne&&ve===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const a=w?w.createHTML(e):e;if(ve===ge)try{t=(new m).parseFromString(a,Ne)}catch(Tn){}if(!t||!t.documentElement){t=k.createDocument(ve,"template",null);try{t.documentElement.innerHTML=be?_:a}catch(Tn){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(i.createTextNode(n),r.childNodes[0]||null),ve===ge?S.call(t,J?"html":"body")[0]:J?t.documentElement:r},Le=function(e){return N.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Ie=function(e){return e instanceof h&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof u)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)},Fe=function(e){return"function"===typeof l&&e instanceof l};function ze(e,t,i){Fh(e,(e=>{e.call(n,t,i,Ce)}))}const qe=function(e){let t=null;if(ze(E.beforeSanitizeElements,e,null),Ie(e))return De(e),!0;const i=Se(e.nodeName);if(ze(E.uponSanitizeElement,e,{tagName:i,allowedTags:F}),X&&e.hasChildNodes()&&!Fe(e.firstElementChild)&&Xh(/<[/\w!]/g,e.innerHTML)&&Xh(/<[/\w!]/g,e.textContent))return De(e),!0;if(e.nodeType===Em)return De(e),!0;if(X&&e.nodeType===Am&&Xh(/<[/\w]/g,e.data))return De(e),!0;if(!F[i]||U[i]){if(!U[i]&&Be(i)){if(B.tagNameCheck instanceof RegExp&&Xh(B.tagNameCheck,i))return!1;if(B.tagNameCheck instanceof Function&&B.tagNameCheck(i))return!1}if(re&&!le[i]){const t=y(e)||e.parentNode,n=x(e)||e.childNodes;if(n&&t){for(let i=n.length-1;i>=0;--i){const a=g(n[i],!0);a.__removalCount=(e.__removalCount||0)+1,t.insertBefore(a,b(e))}}}return De(e),!0}return e instanceof c&&!function(e){let t=y(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const n=Uh(e.tagName),i=Uh(t.tagName);return!!xe[e.namespaceURI]&&(e.namespaceURI===fe?t.namespaceURI===ge?"svg"===n:t.namespaceURI===pe?"svg"===n&&("annotation-xml"===i||we[i]):Boolean(Me[n]):e.namespaceURI===pe?t.namespaceURI===ge?"math"===n:t.namespaceURI===fe?"math"===n&&_e[i]:Boolean(Pe[n]):e.namespaceURI===ge?!(t.namespaceURI===fe&&!_e[i])&&!(t.namespaceURI===pe&&!we[i])&&!Pe[n]&&(ke[n]||!Me[n]):!("application/xhtml+xml"!==Ne||!xe[e.namespaceURI]))}(e)?(De(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!Xh(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&e.nodeType===Cm&&(t=e.textContent,Fh([A,T,M],(e=>{t=Gh(t,e," ")})),e.textContent!==t&&(Wh(n.removed,{element:e.cloneNode()}),e.textContent=t)),ze(E.afterSanitizeElements,e,null),!1):(De(e),!0)},We=function(e,t,n){if(ie&&("id"===t||"name"===t)&&(n in i||n in Ee))return!1;if(G&&!V[t]&&Xh(P,t));else if(H&&Xh(D,t));else if(!q[t]||V[t]){if(!(Be(e)&&(B.tagNameCheck instanceof RegExp&&Xh(B.tagNameCheck,e)||B.tagNameCheck instanceof Function&&B.tagNameCheck(e))&&(B.attributeNameCheck instanceof RegExp&&Xh(B.attributeNameCheck,t)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(t))||"is"===t&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&Xh(B.tagNameCheck,n)||B.tagNameCheck instanceof Function&&B.tagNameCheck(n))))return!1}else if(he[t]);else if(Xh(I,Gh(n,O,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Qh(n,"data:")||!de[e]){if(Q&&!Xh(R,Gh(n,O,"")));else if(n)return!1}else;return!0},Be=function(e){return"annotation-xml"!==e&&Hh(e,L)},Ue=function(e){ze(E.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Ie(e))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let a=t.length;for(;a--;){const r=t[a],{name:s,namespaceURI:o,value:l}=r,c=Se(s),d=l;let u="value"===s?d:Yh(d);if(i.attrName=c,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,ze(E.uponSanitizeAttribute,e,i),u=i.attrValue,!ae||"id"!==c&&"name"!==c||(Re(s,e),u="user-content-"+u),X&&Xh(/((--!?|])>)|<\/(style|title)/i,u)){Re(s,e);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr){Re(s,e);continue}if(!Y&&Xh(/\/>/i,u)){Re(s,e);continue}K&&Fh([A,T,M],(e=>{u=Gh(u,e," ")}));const h=Se(e.nodeName);if(We(h,c,u)){if(w&&"object"===typeof p&&"function"===typeof p.getAttributeType)if(o);else switch(p.getAttributeType(h,c)){case"TrustedHTML":u=w.createHTML(u);break;case"TrustedScriptURL":u=w.createScriptURL(u)}if(u!==d)try{o?e.setAttributeNS(o,s,u):e.setAttribute(s,u),Ie(e)?De(e):qh(n.removed)}catch(Tn){Re(s,e)}}else Re(s,e)}ze(E.afterSanitizeAttributes,e,null)},Ve=function e(t){let n=null;const i=Le(t);for(ze(E.beforeSanitizeShadowDOM,t,null);n=i.nextNode();)ze(E.uponSanitizeShadowNode,n,null),qe(n),Ue(n),n.content instanceof s&&e(n.content);ze(E.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,r=null,o=null,c=null;if(be=!e,be&&(e="\x3c!--\x3e"),"string"!==typeof e&&!Fe(e)){if("function"!==typeof e.toString)throw Jh("toString is not a function");if("string"!==typeof(e=e.toString()))throw Jh("dirty is not a string, aborting")}if(!n.isSupported)return e;if($||Te(t),n.removed=[],"string"===typeof e&&(se=!1),se){if(e.nodeName){const t=Se(e.nodeName);if(!F[t]||U[t])throw Jh("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)i=Oe("\x3c!----\x3e"),r=i.ownerDocument.importNode(e,!0),r.nodeType===Sm&&"BODY"===r.nodeName||"HTML"===r.nodeName?i=r:i.appendChild(r);else{if(!ee&&!K&&!J&&-1===e.indexOf("<"))return w&&ne?w.createHTML(e):e;if(i=Oe(e),!i)return ee?null:ne?_:""}i&&Z&&De(i.firstChild);const d=Le(se?e:i);for(;o=d.nextNode();)qe(o),Ue(o),o.content instanceof s&&Ve(o.content);if(se)return e;if(ee){if(te)for(c=j.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return(q.shadowroot||q.shadowrootmode)&&(c=C.call(a,c,!0)),c}let u=J?i.outerHTML:i.innerHTML;return J&&F["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Xh(km,i.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+u),K&&Fh([A,T,M],(e=>{u=Gh(u,e," ")})),w&&ne?w.createHTML(u):u},n.setConfig=function(){Te(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),$=!0},n.clearConfig=function(){Ce=null,$=!1},n.isValidAttribute=function(e,t,n){Ce||Te({});const i=Se(e),a=Se(t);return We(i,a,n)},n.addHook=function(e,t){"function"===typeof t&&Wh(E[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=zh(E[e],t);return-1===n?void 0:Bh(E[e],n,1)[0]}return qh(E[e])},n.removeHooks=function(e){E[e]=[]},n.removeAllHooks=function(){E={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const Dm={ALLOWED_TAGS:["p","br","strong","em","u","b","i","s","sub","sup","h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","div","span","a","img","table","thead","tbody","tr","th","td","code","pre"],ALLOWED_ATTR:["href","title","target","alt","src","width","height","class","id","colspan","rowspan"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,FORBID_TAGS:["script","object","embed","form","input","button","textarea","select","option","iframe","frame","frameset","noframes","meta","link","style","base","head","html","body"],FORBID_ATTR:["onerror","onload","onclick","onmouseover","onfocus","onblur","onchange","onsubmit","onreset","onselect","onunload","onabort","onkeydown","onkeypress","onkeyup","onmousedown","onmouseup","onmousemove","onmouseout","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll","onwheel","ontouchstart","ontouchend","ontouchmove","ontouchcancel","style"],KEEP_CONTENT:!0,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_DOM_IMPORT:!1};d(d({},Dm),{},{ALLOWED_TAGS:[...Dm.ALLOWED_TAGS,"hr","small","mark","del","ins","abbr","cite","q"],ALLOWED_ATTR:[...Dm.ALLOWED_ATTR,"style"]});function Rm(e){if(!e||"string"!==typeof e)return"";const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||Dm;try{return Pm.sanitize(e,t)}catch(n){return""}}function Om(e){return Rm(e,d(d({},Dm),{},{ALLOWED_TAGS:[...Dm.ALLOWED_TAGS,"hr","small","mark","del","ins","abbr","cite","q","details","summary"],ALLOWED_ATTR:[...Dm.ALLOWED_ATTR,"data-*"]}))}function Lm(e){if(!e||"string"!==typeof e)return"";try{return Pm.sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[],KEEP_CONTENT:!0})}catch(t){return e.replace(/<[^>]*>/g,"")}}function Im(e){if(!e||"string"!==typeof e)return!0;try{const t=[/<script[^>]*>.*?<\/script>/gi,/javascript:/gi,/on\w+\s*=\s*["'][^"']*["']/gi,/<iframe[^>]*>/gi,/<object[^>]*>/gi,/<embed[^>]*>/gi,/<form[^>]*>/gi,/<input[^>]*>/gi,/<button[^>]*>/gi,/data:text\/html/gi,/vbscript:/gi,/expression\s*\(/gi,/@import/gi,/url\s*\(\s*["']?javascript:/gi];for(const a of t)if(a.test(e))return!1;const n=Rm(e),i=Math.abs(e.length-n.length);return!(i>.1*e.length)}catch(t){return!1}}const Fm=["html","fallback","className","style","allowImages","allowLinks","strictMode"],zm=["content"],qm=e=>{let{html:t,fallback:n="Content not available",className:a="",style:s={},allowImages:o=!0,allowLinks:l=!0,strictMode:c=!1}=e,u=r(e,Fm);if(!t||"string"!==typeof t||""===t.trim())return(0,$o.jsx)("div",d(d({className:a,style:s},u),{},{children:n}));try{if(!Im(t))return(0,$o.jsx)("div",d(d({className:a,style:s},u),{},{children:Lm(t)||n}));const e=Om(t);if(!e)return(0,$o.jsx)("div",d(d({className:a,style:s},u),{},{children:Lm(t)||n}));if(!Im(e))return(0,$o.jsx)("div",d(d({className:a,style:s},u),{},{children:Lm(t)||n}));const r={replace:e=>{if("tag"===e.type){const{name:a,attribs:r={}}=e;if(["script","iframe","object","embed","form","input","button"].includes(a.toLowerCase()))return(0,$o.jsx)("span",{children:"Blocked content"});if("img"===a){if(!o)return(0,$o.jsx)("span",{children:"[Image removed for security]"});const e=r.src||"";return e.startsWith("javascript:")||e.startsWith("data:text/html")?(0,$o.jsx)("span",{children:"[Unsafe image blocked]"}):(0,$o.jsx)("img",d(d({},r),{},{src:e,alt:r.alt||"Training content image",onError:e=>{e.target.style.display="none"},style:{maxWidth:"100%",height:"auto"}}))}if("a"===a){var t,n;if(!l)return(0,$o.jsx)("span",{children:(null===(t=e.children)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.data)||"Link removed for security"});const i=r.href||"";return i.startsWith("javascript:")||i.startsWith("vbscript:")||i.startsWith("data:")?(0,$o.jsx)("span",{children:"[Unsafe link blocked]"}):(0,$o.jsx)("a",d(d({},r),{},{href:i,target:"_blank",rel:"noopener noreferrer",onClick:e=>{(i.includes("javascript:")||i.includes("vbscript:"))&&e.preventDefault()}}))}const s={};return Object.keys(r).forEach((e=>{e.toLowerCase().startsWith("on")||(s[e]=r[e])})),i.createElement(a,s)}return e}},c=Ch(e,r);return(0,$o.jsx)("div",d(d({className:a,style:s},u),{},{children:c}))}catch(h){return(0,$o.jsx)("div",d(d({className:a,style:s},u),{},{children:Lm(t)||n}))}},Wm=e=>{let{content:t}=e,n=r(e,zm);return(0,$o.jsx)(qm,d({html:t,fallback:"Training content not available",allowImages:!0,allowLinks:!0,strictMode:!1,className:"text-gray-700 leading-relaxed text-lg prose prose-lg max-w-none"},n))},Bm=()=>{var e,t,n;const{t:a}=bs(["training","common"]),{phase:r}=ge(),s=pe(),{user:o}=el(),l=(0,Et.useQueryClient)(),[c,u]=(0,i.useState)(0),[h,m]=(0,i.useState)(new Set),[p,f]=(0,i.useState)(0),[g,v]=(0,i.useState)(!1),[b,x]=(0,i.useState)(!1),[y,w]=(0,i.useState)(null),_=e=>{if(!e)return!1;const t=String(e);if(!/^\d+$/.test(t))return!1;const n=parseInt(t,10);return Number.isInteger(n)&&n>=1&&n<=3},k=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.itemNumber)&&void 0!==t?t:null===e||void 0===e?void 0:e.number},N=()=>{var e,t,n,i;return null!==(e=null!==(t=null===j||void 0===j||null===(n=j.progress)||void 0===n?void 0:n.totalItems)&&void 0!==t?t:null===j||void 0===j||null===(i=j.items)||void 0===i?void 0:i.length)&&void 0!==e?e:0},{data:j,isLoading:S,error:C}=(0,Et.useQuery)(["crew-training-phase",r],(async()=>{if(!_(r))throw new Error("Invalid phase parameter: ".concat(r,". Must be 1, 2, or 3."));try{return await xo(r)}catch(C){const t=await yo(r);return d(d({},t),{},{items:Array.isArray(null===t||void 0===t?void 0:t.items)?t.items.map((e=>d(d({},e),{},{itemNumber:e.number,content:null}))):[]})}}),{enabled:_(r)}),{data:E}=(0,Et.useQuery)("quiz-history",(()=>jo()),{enabled:!!o,staleTime:3e5});(0,i.useEffect)((()=>{}),[E,r]);const A=(0,Et.useMutation)((e=>{let{phase:t,itemNumber:n}=e;return wo(t,n)}),{onSuccess:()=>{l.invalidateQueries(["training-phase",r]),l.invalidateQueries("training-progress")},onError:e=>{var t,n;Vn.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to complete item")}}),T=(0,Et.useMutation)((e=>{let{phase:t,itemNumber:n}=e;return _o(t,n)}),{onSuccess:()=>{l.invalidateQueries(["training-phase",r]),l.invalidateQueries("training-progress"),Vn.success("Training item marked as incomplete")},onError:e=>{var t,n;Vn.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to uncomplete item")}});(0,i.useEffect)((()=>{let e=null;return g?e=setInterval((()=>{f((e=>e+1))}),1e3):g||0===p||clearInterval(e),()=>clearInterval(e)}),[g,p]),(0,i.useEffect)((()=>(v(!0),()=>v(!1))),[]);const M=(0,i.useCallback)((e=>{try{const t=Array.isArray(e)?e:[];return t.filter((e=>e&&"object"===typeof e&&(e.number||e.itemNumber))).map((e=>{var t;return null!==(t=e.number)&&void 0!==t?t:e.itemNumber}))}catch(C){return[]}}),[]);if((0,i.useEffect)((()=>{try{if(null!==j&&void 0!==j&&j.completedItems&&null!==j&&void 0!==j&&j.items){const e=M(j.completedItems),t=new Set(e),n=h.size,i=t.size,a=N(),s=!(n===a)&&i===a&&n>0;m(t);const o=null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(r,10)));s&&(x(!0),v(!1),Vn.success("\ud83c\udf89 Congratulations! All training items completed!"),o||w(10))}}catch(C){m(new Set)}}),[null===j||void 0===j?void 0:j.completedItems,null===j||void 0===j?void 0:j.items,E,r]),(0,i.useEffect)((()=>{try{if(null!==j&&void 0!==j&&j.items&&null!==j&&void 0!==j&&j.completedItems){const e=M(j.completedItems),t=new Set(e),n=j.items.findIndex((e=>!t.has(k(e))));if(n>0)u(n),Vn("Resuming at Step ".concat(n+1),{duration:3e3});else if(-1===n&&N()>0){const e=N()-1;u(e)}}}catch(C){u(0)}}),[j]),(0,i.useEffect)((()=>{let e=null;return null!==y&&y>0?e=setInterval((()=>{w((e=>e-1))}),1e3):0===y&&s("/crew/quiz/".concat(r)),()=>clearInterval(e)}),[y,s,r]),!_(r))return(0,$o.jsxs)("div",{className:"text-center py-12",children:[(0,$o.jsx)(Yc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:a("training:ui.invalid_phase_title","Invalid Training Phase")}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:a("training:ui.invalid_phase_message","The training phase must be 1, 2, or 3.")}),(0,$o.jsx)(xt,{to:"/crew/dashboard",className:"btn btn-primary",children:a("training:ui.return_to_dashboard")})]});if(S)return(0,$o.jsx)(Zc,{message:a("training:ui.loading_content")});if(C||!j)return(0,$o.jsxs)("div",{className:"text-center py-12",children:[(0,$o.jsx)(Yc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:C?a("training:ui.failed_to_load_title","Failed to Load Training Data"):a("training:ui.not_found_title")}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:C?a("training:ui.failed_to_load_message","There was an error loading the training content. Please try again."):a("training:ui.not_found_message")}),(0,$o.jsx)(xt,{to:"/crew/dashboard",className:"btn btn-primary",children:a("training:ui.return_to_dashboard")})]});const P=null===j||void 0===j||null===(e=j.items)||void 0===e?void 0:e[c],D=k(P),R=h.has(D);N();return(0,$o.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 sm:space-y-8 px-4 sm:px-6 lg:px-8",children:[b&&(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl p-6 sm:p-8 max-w-md w-full text-center shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,$o.jsxs)("div",{className:"flex justify-center space-x-3 mb-6",children:[(0,$o.jsx)(rh,{className:"h-12 w-12 text-yellow-500 animate-bounce"}),(0,$o.jsx)(xh,{className:"h-10 w-10 text-yellow-400 animate-pulse"}),(0,$o.jsx)(yh,{className:"h-12 w-12 text-green-600 animate-bounce",style:{animationDelay:"0.3s"}})]}),(0,$o.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["\ud83c\udf89 ",a("training:ui.outstanding_achievement")," \ud83c\udf89"]}),(0,$o.jsxs)("p",{className:"text-gray-700 mb-6",children:[a("training:ui.phase_completion_message",{count:null===j||void 0===j||null===(t=j.items)||void 0===t?void 0:t.length,title:null===j||void 0===j?void 0:j.title}),(0,$o.jsx)("br",{}),(0,$o.jsx)("br",{}),a("training:ui.dedication_message"),(()=>{const e=E&&E.some((e=>e.phase===parseInt(r,10)));return" ".concat(a(e?"training:ui.view_quiz_results_message":"training:ui.test_knowledge"))})()]}),(0,$o.jsxs)("div",{className:"space-y-3",children:[E&&E.some((e=>e.phase===parseInt(r,10)))?(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"w-full btn btn-outline text-lg py-3 flex items-center justify-center space-x-2",onClick:()=>x(!1),children:[(0,$o.jsx)(Zu,{className:"h-5 w-5"}),(0,$o.jsx)("span",{children:"View Quiz Results"})]}):(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"w-full btn btn-success text-lg py-3 flex items-center justify-center space-x-2",onClick:()=>x(!1),children:[(0,$o.jsx)(Zu,{className:"h-5 w-5"}),(0,$o.jsx)("span",{children:"Take Quiz Now"})]}),(0,$o.jsx)("button",{onClick:()=>x(!1),className:"w-full btn btn-outline",children:"Continue Reviewing"})]})]})}),(0,$o.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[(0,$o.jsxs)("button",{onClick:()=>s("/crew/dashboard"),className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors self-start",children:[(0,$o.jsx)(wh,{className:"h-5 w-5 mr-2"}),a("training:ui.back_to_dashboard")]}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:j.title}),(0,$o.jsx)("p",{className:"text-base sm:text-lg text-gray-600 mt-1",children:j.description})]})]}),(0,$o.jsx)("div",{className:"bg-white rounded-xl px-4 sm:px-6 py-3 shadow-lg border self-start sm:self-auto",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(qd,{className:"h-5 w-5 text-gray-500"}),(0,$o.jsx)("span",{className:"font-mono text-lg font-semibold",children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(p)}),(0,$o.jsx)("button",{onClick:()=>v(!g),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors touch-target",children:g?(0,$o.jsx)(_h,{className:"h-4 w-4"}):(0,$o.jsx)(sh,{className:"h-4 w-4"})}),(0,$o.jsx)("button",{onClick:()=>f(0),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors touch-target",children:(0,$o.jsx)(Rd,{className:"h-4 w-4"})})]})})]}),(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(kh,{className:"h-6 w-6 text-blue-600"}),(0,$o.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:a("training:ui.training_progress")})]}),(0,$o.jsx)("span",{className:"text-sm text-gray-500",children:a("common:progress.completed_items",{completed:h.size,total:N()})})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,$o.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:"".concat(h.size/N()*100,"%")}})}),(0,$o.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,$o.jsxs)("span",{children:[a("common:general.item")," ",c+1," of ",N()]}),(0,$o.jsxs)("span",{children:[Math.round(h.size/N()*100),"% ",a("common:status.completed")]})]})]}),(0,$o.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-4 lg:gap-8 gap-4 sm:gap-6",children:[(0,$o.jsx)("div",{className:"order-1 lg:col-span-3",children:(0,$o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,$o.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("div",{className:"p-3 rounded-lg bg-white bg-opacity-20",children:(e=>{switch(e){case"orientation":return(0,$o.jsx)(ad,{className:"h-5 w-5"});case"emergency":return(0,$o.jsx)(Yc,{className:"h-5 w-5"});case"safety":return(0,$o.jsx)(Jc,{className:"h-5 w-5"});case"documentation":return(0,$o.jsx)(rd,{className:"h-5 w-5"});default:return(0,$o.jsx)(ah,{className:"h-5 w-5"})}})(null===P||void 0===P?void 0:P.category)}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold",children:[null!=D?D:"N/A",". ",null===P||void 0===P?void 0:P.title]}),(0,$o.jsx)("p",{className:"text-blue-100 mt-1",children:null===P||void 0===P?void 0:P.description})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"orientation":return"bg-blue-100 text-blue-800";case"emergency":return"bg-red-100 text-red-800";case"safety":return"bg-green-100 text-green-800";case"documentation":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(null===P||void 0===P?void 0:P.category)),children:null===P||void 0===P?void 0:P.category}),R&&(0,$o.jsx)("div",{className:"bg-green-500 p-2 rounded-full",children:(0,$o.jsx)(Bd,{className:"h-5 w-5 text-white"})})]})]})}),(0,$o.jsxs)("div",{className:"p-8",children:[null!==P&&void 0!==P&&P.content?(0,$o.jsxs)("div",{className:"space-y-8",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(ah,{className:"h-5 w-5 mr-2 text-blue-600"}),a("training:ui.overview")]}),(0,$o.jsx)(Wm,{content:P.content.overview,fallback:"Training content overview not available"})]}),P.content.objectives&&(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(kh,{className:"h-5 w-5 mr-2 text-green-600"}),a("training:ui.learning_objectives")]}),(0,$o.jsx)("ul",{className:"space-y-3",children:P.content.objectives.map(((e,t)=>(0,$o.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("div",{className:"bg-green-100 p-1 rounded-full mt-1",children:(0,$o.jsx)(Bd,{className:"h-4 w-4 text-green-600"})}),(0,$o.jsx)("span",{className:"text-gray-700",children:e})]},t)))})]}),P.content.keyPoints&&(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(Yc,{className:"h-5 w-5 mr-2 text-orange-600"}),a("training:ui.key_points")]}),(0,$o.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:(0,$o.jsx)("ul",{className:"space-y-3",children:P.content.keyPoints.map(((e,t)=>(0,$o.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("div",{className:"bg-orange-500 w-2 h-2 rounded-full mt-2 flex-shrink-0"}),(0,$o.jsx)("span",{className:"text-gray-800",children:e})]},t)))})})]}),P.content.procedures&&(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(rd,{className:"h-5 w-5 mr-2 text-purple-600"}),a("training:ui.procedures")]}),(0,$o.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:(0,$o.jsx)("ol",{className:"space-y-4",children:P.content.procedures.map(((e,t)=>(0,$o.jsxs)("li",{className:"flex items-start space-x-4",children:[(0,$o.jsx)("div",{className:"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold flex-shrink-0",children:t+1}),(0,$o.jsx)("span",{className:"text-gray-800 pt-1",children:e})]},t)))})})]}),P.content.emergencyTypes&&(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$o.jsx)(Jc,{className:"h-5 w-5 mr-2 text-red-600"}),a("training:ui.emergency_response_types")]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:P.content.emergencyTypes.map(((e,t)=>(0,$o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)(Yc,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,$o.jsx)("span",{className:"text-gray-800 text-sm",children:e})]})},t)))})]})]}):(0,$o.jsxs)("div",{className:"text-center py-12",children:[(0,$o.jsx)(ah,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a("training:ui.training_content")}),(0,$o.jsx)("p",{className:"text-gray-600",children:a("training:ui.training_content_placeholder",{title:null===P||void 0===P?void 0:P.title})})]}),Array.isArray(null===j||void 0===j?void 0:j.mediaFiles)&&j.mediaFiles.length>0&&(0,$o.jsx)(jh,{mediaFiles:j.mediaFiles,title:a("training:ui.resources")}),(0,$o.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[!R&&(0,$o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("div",{className:"bg-blue-100 p-1 rounded-full mt-0.5",children:(0,$o.jsx)(Bd,{className:"h-4 w-4 text-blue-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h4",{className:"font-semibold text-blue-900 mb-1",children:["\u2728 ",a("training:ui.streamlined_flow_title")]}),(0,$o.jsx)("p",{className:"text-blue-800 text-sm",children:a("training:ui.auto_complete_message")})]})]})}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("div",{className:"flex items-center space-x-4",children:R?(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,$o.jsx)(Bd,{className:"h-6 w-6"}),(0,$o.jsx)("span",{className:"font-semibold",children:a("common:status.completed")})]}),(0,$o.jsxs)("button",{onClick:()=>{P&&R&&null!=D&&(T.mutate({phase:parseInt(r,10),itemNumber:D}),m((e=>{const t=new Set(e);return t.delete(D),t})))},disabled:T.isLoading,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 text-sm",children:[T.isLoading?(0,$o.jsx)(Zc,{size:"small"}):(0,$o.jsx)(Rd,{className:"h-4 w-4"}),(0,$o.jsx)("span",{children:a("training:ui.mark_incomplete")})]})]}):(0,$o.jsxs)("button",{onClick:()=>{P&&!R&&null!=D&&(A.mutate({phase:parseInt(r,10),itemNumber:D}),m((e=>new Set([...e,D]))))},disabled:A.isLoading,className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center space-x-2",children:[A.isLoading?(0,$o.jsx)(Zc,{size:"small"}):(0,$o.jsx)(Bd,{className:"h-5 w-5"}),(0,$o.jsx)("span",{children:a("training:ui.mark_complete_now")})]})}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsxs)("button",{onClick:()=>{c>0&&u((e=>e-1))},disabled:0===c,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,$o.jsx)(jd,{className:"h-5 w-5 mr-1"}),a("common:buttons.previous")]}),c===N()-1?(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a("training:ui.last_training_item")}),(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(r,10))))?(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"flex items-center px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 font-semibold transition-all duration-200",children:[(0,$o.jsx)(Zu,{className:"h-5 w-5 mr-2"}),a("common:buttons.view_results")]}):(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 font-semibold transition-all duration-200",children:[(0,$o.jsx)(Zu,{className:"h-5 w-5 mr-2"}),a("common:buttons.take_quiz")]})]}):(0,$o.jsxs)("button",{onClick:()=>{P&&!R&&null!=D&&(A.mutate({phase:parseInt(r,10),itemNumber:D}),m((e=>new Set([...e,D]))),Vn.success('\u2705 "'.concat(P.title,'" marked as complete!'),{duration:2e3,position:"bottom-right"})),c<N()-1&&u((e=>e+1))},className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 font-semibold",children:[!R&&(0,$o.jsx)("span",{className:"text-xs bg-blue-500 px-2 py-1 rounded-full mr-2",children:"\u2713 Complete &"}),a("common:buttons.next"),(0,$o.jsx)(Sd,{className:"h-5 w-5 ml-1"})]})]})]})]})]})]})}),(0,$o.jsx)("div",{className:"order-2 lg:col-span-1",children:(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:a("training:ui.phase_overview")}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"text-sm text-gray-600",children:a("training:ui.time_limit")}),(0,$o.jsxs)("span",{className:"font-semibold",children:[j.timeLimit,"h"]})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"text-sm text-gray-600",children:a("training:ui.total_items")}),(0,$o.jsx)("span",{className:"font-semibold",children:N()})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"text-sm text-gray-600",children:a("training:ui.completed")}),(0,$o.jsx)("span",{className:"font-semibold text-green-600",children:h.size})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"text-sm text-gray-600",children:a("training:ui.remaining")}),(0,$o.jsx)("span",{className:"font-semibold text-orange-600",children:N()-h.size})]})]})]}),(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:a("crew.training_items")}),(0,$o.jsx)("div",{className:"space-y-2 max-h-64 sm:max-h-96 overflow-y-auto scrollbar-thin",children:null===j||void 0===j||null===(n=j.items)||void 0===n?void 0:n.map(((e,t)=>{var n;const i=null!==(n=k(e))&&void 0!==n?n:"item-".concat(t);return(0,$o.jsx)("button",{onClick:()=>u(t),className:"w-full text-left p-3 rounded-lg transition-colors ".concat(t===c?"bg-blue-100 border-2 border-blue-300":"hover:bg-gray-50 border-2 border-transparent"),children:(0,$o.jsx)("div",{className:"flex items-center justify-between",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat(h.has(i)?"bg-green-500 text-white":t===c?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"),children:h.has(i)?(0,$o.jsx)(Bd,{className:"h-4 w-4"}):(null===i||void 0===i?void 0:i.toString().replace("item-",""))||t+1}),(0,$o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,$o.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:e.category})]})]})})},i)}))})]}),(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:a("training:ui.quick_actions")}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(r,10))))?(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"w-full btn btn-outline flex items-center justify-center",children:[(0,$o.jsx)(Zu,{className:"h-4 w-4 mr-2"}),a("common:buttons.view_results")]}):(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"w-full btn btn-outline flex items-center justify-center",children:[(0,$o.jsx)(Zu,{className:"h-4 w-4 mr-2"}),a("common:buttons.take_quiz")]}),(0,$o.jsxs)(xt,{to:"/crew/dashboard",className:"w-full btn btn-secondary flex items-center justify-center",children:[(0,$o.jsx)(wh,{className:"h-4 w-4 mr-2"}),a("training:ui.back_to_dashboard")]})]})]}),h.size===N()&&(0,$o.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-300 rounded-xl p-6 shadow-lg",children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsxs)("div",{className:"flex justify-center space-x-2 mb-4",children:[(0,$o.jsx)(rh,{className:"h-8 w-8 text-yellow-500 animate-bounce"}),(0,$o.jsx)(xh,{className:"h-6 w-6 text-yellow-400 animate-pulse"}),(0,$o.jsx)(yh,{className:"h-8 w-8 text-green-600 animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,$o.jsxs)("h3",{className:"text-xl font-bold text-green-900 mb-2",children:["\ud83c\udf89 ",a("training:ui.excellent_work")," \ud83c\udf89"]}),(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(r,10))))?(0,$o.jsxs)("p",{className:"text-green-800 mb-4",children:["You've successfully completed all ",(0,$o.jsx)("strong",{children:N()})," training items in this phase.",(0,$o.jsx)("br",{}),"You can review your quiz results or continue studying the materials."]}):(0,$o.jsxs)("p",{className:"text-green-800 mb-4",children:["You've successfully completed all ",(0,$o.jsx)("strong",{children:N()})," training items in this phase.",(0,$o.jsx)("br",{}),"Time to test your knowledge with the final quiz!"]}),null!==y&&(0,$o.jsxs)("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4 mb-4",children:[(0,$o.jsxs)("p",{className:"text-blue-800 text-sm mb-2",children:["\ud83d\ude80 ",a("training:ui.auto_navigate_message")]}),(0,$o.jsxs)("div",{className:"text-2xl font-bold text-blue-900 mb-2",children:[y," seconds"]}),(0,$o.jsx)("button",{onClick:()=>w(null),className:"text-blue-600 hover:text-blue-800 text-sm underline",children:a("training:ui.cancel_auto_nav")})]}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(null===E||void 0===E?void 0:E.some((e=>e.phase===parseInt(r,10))))?(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"btn btn-outline w-full text-lg py-3 flex items-center justify-center space-x-2",children:[(0,$o.jsx)(Zu,{className:"h-5 w-5"}),(0,$o.jsx)("span",{children:a("common:buttons.view_results")})]}):(0,$o.jsxs)(xt,{to:"/crew/quiz/".concat(r),className:"btn btn-success w-full text-lg py-3 flex items-center justify-center space-x-2",children:[(0,$o.jsx)(Zu,{className:"h-5 w-5"}),(0,$o.jsx)("span",{children:a("training:ui.take_final_quiz")})]}),null===y&&!(null!==E&&void 0!==E&&E.some((e=>e.phase===parseInt(r,10))))&&(0,$o.jsx)("button",{onClick:()=>w(10),className:"w-full text-green-600 hover:text-green-800 text-sm underline",children:"Auto-navigate to quiz in 10 seconds"})]})]})})]})})]})]})},Um=Gc("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Vm=Gc("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Hm=Gc("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Gm=Gc("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Qm=Gc("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ym=Gc("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Km=Gc("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Xm=Gc("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Jm=Gc("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),$m=e=>{let{context:t="general",trigger:n="manual",onFeedbackSubmitted:a,className:r=""}=e;const{t:s}=bs(["feedback","common"]),{user:o}=el(),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),[h,m]=(0,i.useState)(0),[p,f]=(0,i.useState)(""),[g,v]=(0,i.useState)(!1),[b,x]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if("auto"===n){y()&&setTimeout((()=>c(!0)),2e3)}}),[n,t]);const y=()=>{const e=Date.now()-(window.sessionStartTime||Date.now());switch(t){case"training_completion":return e>3e5;case"quiz_completion":return!0;case"error_recovery":return e>6e4;case"offline_mode":return e>18e4;default:return e>6e5}},w=async(e,n)=>{u(e);const i={type:e,value:n,context:t,timestamp:(new Date).toISOString(),userId:null===o||void 0===o?void 0:o.id,sessionId:k(),userAgent:navigator.userAgent,connectionStatus:navigator.onLine?"online":"offline"};await _(i);const r={positive:"\u2693 Thank you! Your feedback helps us navigate better!",negative:"\ud83d\udea2 Thanks for the feedback. We'll chart a better course!",rating:"\u2b50 ".concat(n," stars received! Fair winds and following seas!")};Vn.success(r[e]||"Feedback received!"),x(!0),a&&a(i)},_=async e=>{try{const t=await fetch("/api/feedback/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to submit feedback");return await t.json()}catch(t){const n=JSON.parse(localStorage.getItem("offlineFeedback")||"[]");throw n.push(e),localStorage.setItem("offlineFeedback",JSON.stringify(n)),t}},k=()=>{let e=sessionStorage.getItem("feedbackSessionId");return e||(e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionStorage.setItem("feedbackSessionId",e)),e};return b&&"auto"===n?null:(0,$o.jsxs)("div",{className:"feedback-widget ".concat(r),children:[!l&&!b&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white/10 backdrop-blur-sm rounded-lg border border-white/20",children:[(0,$o.jsx)("span",{className:"text-white/80 text-sm hidden sm:inline",children:s("feedback:quick.how_was_experience")}),(0,$o.jsx)("button",{onClick:()=>w("positive","good"),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:quick.good_experience"),children:"\ud83d\ude0a"}),(0,$o.jsx)("button",{onClick:()=>w("neutral","okay"),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:quick.okay_experience"),children:"\ud83d\ude10"}),(0,$o.jsx)("button",{onClick:()=>w("negative","poor"),className:"text-2xl hover:scale-110 transition-transform duration-200 p-2 rounded-full hover:bg-white/10 min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:quick.poor_experience"),children:"\ud83d\ude1e"}),(0,$o.jsx)("button",{onClick:()=>c(!0),className:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors min-h-[44px] min-w-[44px] touch-manipulation",title:s("feedback:detailed.open_detailed"),children:(0,$o.jsx)(Jm,{className:"w-5 h-5"})})]}),l&&(0,$o.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,$o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(()=>{switch(t){case"training_completion":return(0,$o.jsx)(Hd,{className:"w-4 h-4"});case"offline_mode":return(0,$o.jsx)(Vd,{className:"w-4 h-4"});case"quiz_completion":return(0,$o.jsx)(qd,{className:"w-4 h-4"});default:return(0,$o.jsx)(Jm,{className:"w-4 h-4"})}})(),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(()=>{switch(t){case"training_completion":return s("feedback:contexts.training_completion");case"quiz_completion":return s("feedback:contexts.quiz_completion");case"offline_mode":return s("feedback:contexts.offline_mode");case"error_recovery":return s("feedback:contexts.error_recovery");default:return s("feedback:contexts.general")}})()})]}),(0,$o.jsx)("button",{onClick:()=>c(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:(0,$o.jsx)(fd,{className:"w-5 h-5"})})]}),(0,$o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("feedback:detailed.rate_experience")}),(0,$o.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map((e=>(0,$o.jsx)("button",{onClick:()=>m(e),className:"p-1 rounded transition-colors ".concat(e<=h?"text-yellow-400":"text-gray-300 hover:text-yellow-300"),children:(0,$o.jsx)(xh,{className:"w-6 h-6 fill-current"})},e)))})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("feedback:detailed.additional_comments")}),(0,$o.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),placeholder:s("feedback:detailed.comment_placeholder"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4,maxLength:500}),(0,$o.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[p.length,"/500 ",s("feedback:detailed.characters")]})]}),(0,$o.jsx)("div",{className:"text-xs text-gray-500 bg-gray-50 p-2 rounded",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("span",{className:"flex items-center space-x-1",children:[navigator.onLine?(0,$o.jsx)(Ud,{className:"w-3 h-3"}):(0,$o.jsx)(Vd,{className:"w-3 h-3"}),(0,$o.jsx)("span",{children:navigator.onLine?"Online":"Offline"})]}),(0,$o.jsxs)("span",{children:[s("feedback:detailed.context"),": ",t]})]})})]}),(0,$o.jsxs)("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200",children:[(0,$o.jsx)("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:g,children:s("common:cancel")}),(0,$o.jsx)("button",{onClick:async()=>{if(!h&&!p.trim())return void Vn.error(s("feedback:validation.rating_or_comment_required"));v(!0);const e={type:"detailed",rating:h,comment:p.trim(),context:t,timestamp:(new Date).toISOString(),userId:null===o||void 0===o?void 0:o.id,sessionId:k(),userAgent:navigator.userAgent,connectionStatus:navigator.onLine?"online":"offline",pageUrl:window.location.href,referrer:document.referrer};try{await _(e),Vn.success("\u2693 Detailed feedback submitted! Thank you for helping us improve!"),c(!1),x(!0),a&&a(e)}catch(n){Vn.error(s("feedback:errors.submission_failed"))}finally{v(!1)}},disabled:g||!h&&!p.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:g?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,$o.jsx)("span",{children:s("feedback:detailed.submitting")})]}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Um,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:s("feedback:detailed.submit")})]})})]})]})})]})};const Zm=new class{constructor(){this.storagePrefix="burando_maritime_",this.maxStorageSize=52428800,this.compressionEnabled=!0}getStorageKey(e){return"".concat(this.storagePrefix).concat(e)}isOffline(){return!navigator.onLine}getStorageInfo(){let e=0;const t=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);if(i&&i.startsWith(this.storagePrefix)){const n=localStorage.getItem(i);e+=i.length+(n?n.length:0),t.push(i)}}return{totalSize:e,totalSizeMB:(e/1048576).toFixed(2),keyCount:t.length,keys:t,percentUsed:(e/this.maxStorageSize*100).toFixed(1)}}setItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const a=this.getStorageKey(e),r={data:t,timestamp:Date.now(),expires:n.expires||null,version:n.version||"1.0.0",compressed:!1,offline:this.isOffline(),needsSync:n.needsSync||!1};if(this.compressionEnabled&&JSON.stringify(t).length>1e4)try{r.data=this.compressData(t),r.compressed=!0}catch(i){}const s=JSON.stringify(r);if(s.length>.1*this.maxStorageSize)throw new Error("Data too large for storage");return localStorage.setItem(a,s),!0}catch(i){return Bs.showError(i,"offline_storage"),!1}}getItem(e){try{const n=this.getStorageKey(e),i=localStorage.getItem(n);if(!i)return null;const a=JSON.parse(i);if(a.expires&&Date.now()>a.expires)return this.removeItem(e),null;let r=a.data;if(a.compressed)try{r=this.decompressData(r)}catch(t){return null}return{data:r,metadata:{timestamp:a.timestamp,version:a.version,offline:a.offline,needsSync:a.needsSync}}}catch(t){return null}}removeItem(e){try{const t=this.getStorageKey(e);return localStorage.removeItem(t),!0}catch(t){return!1}}clearAll(){try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.storagePrefix)&&e.push(n)}return e.forEach((e=>localStorage.removeItem(e))),!0}catch(e){return!1}}saveQuizProgress(e,t,n,i){const a="quiz_progress_".concat(e),r={phase:e,answers:t,currentQuestion:n,sessionId:i,status:"in_progress",lastUpdated:Date.now()};return this.setItem(a,r,{needsSync:!1})}getQuizProgress(e){const t="quiz_progress_".concat(e),n=this.getItem(t);return n?n.data:null}markQuizCompleted(e,t,n,i){const a="quiz_completed_".concat(e),r="quiz_progress_".concat(e),s={phase:e,answers:t,score:n,sessionId:i,completedAt:Date.now(),status:"completed"},o=this.setItem(a,s,{needsSync:!0});return o&&this.removeItem(r),o}saveTrainingProgress(e,t,n){const i="training_progress_".concat(e,"_").concat(t),a=d(d({phase:e,itemNumber:t},n),{},{completedAt:Date.now()});return this.setItem(i,a,{needsSync:!0})}getTrainingProgress(e,t){const n="training_progress_".concat(e,"_").concat(t),i=this.getItem(n);return i?i.data:null}getItemsNeedingSync(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n&&n.startsWith(this.storagePrefix)){const t=this.getItem(n.replace(this.storagePrefix,""));t&&t.metadata.needsSync&&e.push({key:n.replace(this.storagePrefix,""),data:t.data,metadata:t.metadata})}}return e}markAsSynced(e){const t=this.getItem(e);return!!t&&(t.metadata.needsSync=!1,this.setItem(e,t.data,d(d({},t.metadata),{},{needsSync:!1})))}compressData(e){return JSON.stringify(e).replace(/(.)\1{2,}/g,((e,t)=>"".concat(t,"*").concat(e.length)))}decompressData(e){const t=e.replace(/(.)\*(\d+)/g,((e,t,n)=>t.repeat(parseInt(n))));return JSON.parse(t)}cacheTrainingContent(e,t){const n="training_content_".concat(e),i=Date.now()+6048e5;return this.setItem(n,t,{expires:i,version:t.version||"1.0.0"})}getCachedTrainingContent(e){const t="training_content_".concat(e),n=this.getItem(t);return n?n.data:null}addToRequestQueue(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a="request_queue",r=this.getItem(a),s=r?r.data:[],o={id:Date.now()+Math.random(),type:e,endpoint:t,data:n,timestamp:Date.now(),retries:0,maxRetries:i.maxRetries||3,priority:i.priority||"normal"};return s.push(o),s.sort(((e,t)=>{const n={high:3,normal:2,low:1};return n[t.priority]-n[e.priority]})),this.setItem(a,s)}getRequestQueue(){const e=this.getItem("request_queue");return e?e.data:[]}removeFromRequestQueue(e){const t="request_queue",n=this.getItem(t);if(!n)return!1;const i=n.data.filter((t=>t.id!==e));return this.setItem(t,i)}clearRequestQueue(){return this.removeItem("request_queue")}cleanupExpiredItems(){let e=0;const t=Date.now();for(let i=0;i<localStorage.length;i++){const a=localStorage.key(i);if(a&&a.startsWith(this.storagePrefix))try{const n=localStorage.getItem(a),i=JSON.parse(n);i.expires&&t>i.expires&&(localStorage.removeItem(a),e++)}catch(n){localStorage.removeItem(a),e++}}return e}},ep=Zm;const tp=new class{constructor(){this.registration=null,this.isUpdateAvailable=!1,this.isOffline=!navigator.onLine,this.updateCallbacks=[],this.offlineCallbacks=[],this.onlineCallbacks=[]}async init(){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported in this browser"),!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("\u2705 Service Worker registered successfully"),this.setupEventListeners(),this.checkForUpdates(),this.setupNetworkMonitoring(),!0}catch(e){return console.error("\u274c Service Worker registration failed:",e),Bs.logError(e,"service_worker_registration"),!1}}setupEventListeners(){this.registration&&(this.registration.addEventListener("updatefound",(()=>{const e=this.registration.installing;e.addEventListener("statechange",(()=>{"installed"===e.state&&navigator.serviceWorker.controller&&(console.log("\ud83d\udd04 New service worker available"),this.isUpdateAvailable=!0,this.notifyUpdateCallbacks())}))})),navigator.serviceWorker.addEventListener("message",(e=>{this.handleServiceWorkerMessage(e)})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{console.log("\ud83d\udd04 Service worker controller changed"),window.location.reload()})))}handleServiceWorkerMessage(e){const{type:t,data:n}=e.data;switch(t){case"CACHE_UPDATED":console.log("\ud83d\udce6 Cache updated:",n);break;case"OFFLINE_READY":console.log("\ud83d\udcf1 App ready for offline use");break;case"SYNC_COMPLETE":console.log("\ud83d\udd04 Background sync completed:",n),this.handleSyncComplete(n);break;default:console.log("Unknown service worker message:",t,n)}}async checkForUpdates(){if(this.registration)try{await this.registration.update()}catch(e){console.error("Failed to check for updates:",e)}}async applyUpdate(){if(!this.isUpdateAvailable||!this.registration)return!1;try{const e=this.registration.waiting;if(e)return e.postMessage({type:"SKIP_WAITING"}),!0}catch(e){return console.error("Failed to apply update:",e),!1}return!1}setupNetworkMonitoring(){window.addEventListener("online",(()=>{console.log("\ud83c\udf10 Back online - triggering sync"),this.isOffline=!1,this.triggerBackgroundSync(),this.notifyOnlineCallbacks()})),window.addEventListener("offline",(()=>{console.log("\ud83d\udcf1 Gone offline - enabling offline mode"),this.isOffline=!0,this.notifyOfflineCallbacks()})),navigator.onLine?this.isOffline=!1:this.isOffline=!0}async triggerBackgroundSync(){if(!this.registration||!this.registration.sync)return console.log("Background sync not supported, using manual sync"),void await this.manualSync();try{await this.registration.sync.register("offline-data"),console.log("\ud83d\udd04 Background sync registered")}catch(e){console.error("Background sync registration failed:",e),await this.manualSync()}}async manualSync(){try{const e=ep.getItemsNeedingSync();for(const t of e)await this.syncItem(t);console.log("\u2705 Manual sync completed: ".concat(e.length," items"))}catch(e){console.error("Manual sync failed:",e),Bs.showError(e,"offline_sync")}}async syncItem(e){try{let t="",n="POST";if(e.key.startsWith("quiz_completed_"))t="/api/training/submit-quiz",n="POST";else{if(!e.key.startsWith("training_progress_"))return void console.warn("Unknown sync item type:",e.key);t="/api/training/update-progress",n="POST"}const i=await fetch(t,{method:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e.data)});if(!i.ok)throw new Error("Sync failed: ".concat(i.status," ").concat(i.statusText));ep.markAsSynced(e.key),console.log("\u2705 Synced item:",e.key)}catch(t){throw console.error("Failed to sync item:",e.key,t),t}}handleSyncComplete(e){e.success?Bs.showSuccess("offline_sync_complete",{params:{count:e.itemCount}}):Bs.showError(new Error("Sync failed"),"offline_sync")}async cacheTrainingContent(e,t){try{return ep.cacheTrainingContent(e,t),this.registration&&this.registration.active&&this.registration.active.postMessage({type:"CACHE_TRAINING_CONTENT",data:{phase:e,content:t}}),console.log("\ud83d\udce6 Training content cached for phase ".concat(e)),!0}catch(n){return console.error("Failed to cache training content:",n),!1}}async preloadCriticalContent(){try{const t=localStorage.getItem("token");if(!t)return!1;try{const e=await fetch("/api/crew/profile",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){const t=await e.json();ep.setItem("user_profile",t)}}catch(e){console.warn("Failed to preload profile:",e)}try{const e=await fetch("/api/content/training/phases",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){const t=await e.json();ep.setItem("training_phases",t)}}catch(e){console.warn("Failed to preload training phases:",e)}return console.log("\ud83d\udce6 Critical content preloaded for offline use"),!0}catch(e){return console.error("Failed to preload critical content:",e),!1}}getStatus(){return{isSupported:"serviceWorker"in navigator,isRegistered:!!this.registration,isUpdateAvailable:this.isUpdateAvailable,isOffline:this.isOffline,controller:navigator.serviceWorker.controller?"active":"none"}}onUpdate(e){this.updateCallbacks.push(e)}onOffline(e){this.offlineCallbacks.push(e)}onOnline(e){this.onlineCallbacks.push(e)}notifyUpdateCallbacks(){this.updateCallbacks.forEach((e=>{try{e()}catch(t){console.error("Update callback error:",t)}}))}notifyOfflineCallbacks(){this.offlineCallbacks.forEach((e=>{try{e()}catch(t){console.error("Offline callback error:",t)}}))}notifyOnlineCallbacks(){this.onlineCallbacks.forEach((e=>{try{e()}catch(t){console.error("Online callback error:",t)}}))}async cleanup(){try{if(ep.cleanupExpiredItems(),"caches"in window){const e=(await caches.keys()).filter((e=>e.startsWith("burando-maritime-")&&"burando-maritime-v1.0.0"!==e));await Promise.all(e.map((e=>caches.delete(e)))),e.length>0&&console.log("\ud83d\uddd1\ufe0f Cleaned up ".concat(e.length," old caches"))}}catch(e){console.error("Cleanup failed:",e)}}},np=tp;const ip=e=>{var t,n;let{question:a,answer:r,uploadedFile:s,onAnswerChange:o,onFileUpload:l,onClearFile:c,t:d}=e;const[u,h]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),f=i.useRef(null);(0,i.useEffect)((()=>{if(p(null),h(!1),f.current&&(f.current.value=""),s){const e=new FileReader;e.onload=e=>p(e.target.result),e.readAsDataURL(s)}}),[a.id]),(0,i.useEffect)((()=>{if(s){const e=new FileReader;e.onload=e=>p(e.target.result),e.readAsDataURL(s)}else p(null)}),[s]);const g=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)},v=e=>{if(!(a.acceptedFileTypes||["image/jpeg","image/png","image/webp"]).includes(e.type))return void Vn.error("Invalid file type. Please upload JPG, PNG, or WebP images.");const t=a.maxFileSize||5;e.size>1024*t*1024?Vn.error("File too large. Maximum size is ".concat(t,"MB.")):(l(e),o(e.name),Vn.success(d("common:success.uploaded")))};return(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"bg-gradient-to-r from-burando-bright-teal/10 to-burando-light-green/10 border border-burando-bright-teal/20 rounded-lg p-4",children:[(0,$o.jsx)("h4",{className:"font-semibold text-burando-navy mb-2",children:"\ud83d\udcf8 Photo Requirements:"}),(0,$o.jsx)("div",{className:"text-burando-teal text-sm whitespace-pre-line",children:a.instructions})]}),(0,$o.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-4 sm:p-8 text-center transition-colors ".concat(u?"border-burando-bright-teal bg-burando-bright-teal/10":s?"border-burando-light-green bg-burando-light-green/10":"border-gray-300 hover:border-burando-teal"),onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&v(e.dataTransfer.files[0])},children:[(0,$o.jsx)("input",{ref:f,type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:(null===(t=a.acceptedFileTypes)||void 0===t?void 0:t.join(","))||"image/*",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&v(e.target.files[0])}}),s?(0,$o.jsxs)("div",{children:[(0,$o.jsx)(Bd,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"Photo Uploaded Successfully"}),(0,$o.jsxs)("p",{className:"text-green-700 mb-4",children:[s.name," (",(s.size/1024/1024).toFixed(2)," MB)"]}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 sm:justify-center",children:[(0,$o.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"btn btn-outline min-touch-target",children:[(0,$o.jsx)(Rd,{className:"h-4 w-4 mr-2"}),"Replace Photo"]}),(0,$o.jsxs)("button",{type:"button",onClick:()=>{c(),Vn(d("quiz:file_upload.file_removed"))},className:"btn btn-outline text-red-600 border-red-300 hover:bg-red-50",children:[(0,$o.jsx)(fd,{className:"h-4 w-4 mr-2"}),"Remove Photo"]})]})]}):(0,$o.jsxs)("div",{children:[(0,$o.jsx)(Hm,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Photo"}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop your photo here, or click to browse"}),(0,$o.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"btn btn-outline",children:[(0,$o.jsx)(Gm,{className:"h-4 w-4 mr-2"}),"Choose Photo"]})]})]}),m&&(0,$o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,$o.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Preview:"}),(0,$o.jsx)("img",{src:m,alt:"Upload preview",className:"max-w-full h-auto max-h-64 mx-auto rounded-lg shadow-sm"})]}),(null===(n=a.validation)||void 0===n?void 0:n.checklistItems)&&(0,$o.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,$o.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"\u2705 Verification Checklist:"}),(0,$o.jsx)("div",{className:"space-y-1",children:a.validation.checklistItems.map(((e,t)=>(0,$o.jsxs)("div",{className:"flex items-center text-yellow-800 text-sm",children:[(0,$o.jsx)("div",{className:"w-4 h-4 border border-yellow-400 rounded mr-2"}),e]},t)))}),(0,$o.jsx)("p",{className:"text-yellow-700 text-xs mt-2",children:"Your photo will be manually reviewed to ensure all items are visible."})]})]})},ap=e=>{let{question:t,answer:n,onAnswerChange:i}=e;const a=t.options||[];return(0,$o.jsx)("div",{className:"space-y-3",children:a.map(((e,a)=>(0,$o.jsxs)("label",{className:"flex items-start p-4 sm:p-4 border rounded-lg cursor-pointer transition-all duration-200 touch-target mobile-quiz-button ".concat(n===a?"border-burando-teal bg-burando-teal/10 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,$o.jsx)("input",{type:"radio",name:t.id,value:a,checked:n===a,onChange:()=>i(a),className:"sr-only"}),(0,$o.jsx)("div",{className:"w-6 h-6 sm:w-5 sm:h-5 rounded-full border-2 mr-3 mt-0.5 flex items-center justify-center transition-all duration-200 flex-shrink-0 ".concat(n===a?"border-burando-teal bg-burando-teal":"border-gray-300"),children:n===a&&(0,$o.jsx)(Bd,{className:"w-3 h-3 text-white"})}),(0,$o.jsx)("span",{className:"flex-1 text-base sm:text-sm leading-relaxed ".concat(n===a?"text-burando-navy font-medium":"text-gray-900"),children:e}),n===a&&(0,$o.jsx)("div",{className:"ml-2 text-burando-teal",children:(0,$o.jsx)(Bd,{className:"h-5 w-5"})})]},a)))})},rp=e=>{let{question:t,answer:n,onAnswerChange:i}=e;return(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:space-x-4",children:[(0,$o.jsxs)("label",{className:"flex-1 flex items-center justify-center p-6 border-2 rounded-lg cursor-pointer transition-all duration-200 touch-target mobile-quiz-button ".concat(!0===n?"border-green-500 bg-green-50 shadow-md sm:transform sm:scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,$o.jsx)("input",{type:"radio",name:t.id,checked:!0===n,onChange:()=>i(!0),className:"sr-only"}),(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsxs)("div",{className:"relative ".concat(!0===n?"animate-pulse":""),children:[(0,$o.jsx)(Qm,{className:"h-8 w-8 mx-auto mb-2 transition-all duration-200 ".concat(!0===n?"text-green-600":"text-gray-400")}),!0===n&&(0,$o.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,$o.jsx)(Bd,{className:"h-4 w-4 text-green-600 bg-white rounded-full"})})]}),(0,$o.jsx)("span",{className:"text-lg font-semibold transition-all duration-200 ".concat(!0===n?"text-green-900":"text-gray-600"),children:"Yes"})]})]}),(0,$o.jsxs)("label",{className:"flex-1 flex items-center justify-center p-6 border-2 rounded-lg cursor-pointer transition-all duration-200 touch-target mobile-quiz-button ".concat(!1===n?"border-red-500 bg-red-50 shadow-md sm:transform sm:scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,$o.jsx)("input",{type:"radio",name:t.id,checked:!1===n,onChange:()=>i(!1),className:"sr-only"}),(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsxs)("div",{className:"relative ".concat(!1===n?"animate-pulse":""),children:[(0,$o.jsx)(fd,{className:"h-8 w-8 mx-auto mb-2 transition-all duration-200 ".concat(!1===n?"text-red-600":"text-gray-400")}),!1===n&&(0,$o.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,$o.jsx)(Bd,{className:"h-4 w-4 text-red-600 bg-white rounded-full"})})]}),(0,$o.jsx)("span",{className:"text-lg font-semibold transition-all duration-200 ".concat(!1===n?"text-red-900":"text-gray-600"),children:"No"})]})]})]})},sp=e=>{let{question:t,answer:n,onAnswerChange:a}=e;const[r,s]=(0,i.useState)(n||[]);(0,i.useEffect)((()=>{const e=t.template||t.question||"Please fill in the [BLANK].";let i=0;if(i=e.includes("[BLANK]")?(e.match(/\[BLANK\]/g)||[]).length:(e.match(/_{5,}/g)||[]).length,n&&n.length===i)s(n);else{const e=new Array(i).fill("");s(e),a(e)}}),[t.id,t.template,t.question,n,a]);const o=t.template||t.question||"Please fill in the [BLANK].";let l,c;o.includes("[BLANK]")?(l=o.split("[BLANK]"),c=l.length-1):(l=o.split(/_{5,}/),c=l.length-1);const d=r.filter((e=>e&&""!==e.trim())).length;return(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,$o.jsx)("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"\ud83d\udcdd Instructions:"}),(0,$o.jsx)("p",{className:"text-blue-700 text-sm",children:"Fill in the blanks with the correct answers. Spelling and capitalization don't need to be exact."})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,$o.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Progress: ",d," of ",c," blanks filled"]}),d===c&&c>0&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,$o.jsx)(Bd,{className:"h-4 w-4"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"All blanks filled!"})]})]}),(0,$o.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,$o.jsx)("div",{className:"text-lg leading-relaxed",children:l.map(((e,t)=>(0,$o.jsxs)("span",{children:[e,t<l.length-1&&(0,$o.jsx)("input",{type:"text",value:r[t]||"",onChange:e=>((e,t)=>{const n=[...r];n[e]=t,s(n),a(n)})(t,e.target.value),className:"inline-block mx-2 px-3 py-2 border-2 border-gray-300 rounded-md min-w-[120px] text-base focus:border-burando-teal focus:ring-2 focus:ring-burando-teal/20 focus:outline-none transition-colors",placeholder:"Enter answer ".concat(t+1),autoComplete:"off"})]},t)))})}),t.hints&&t.hints.length>0&&(0,$o.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,$o.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"\ud83d\udca1 Hints:"}),(0,$o.jsx)("ul",{className:"text-yellow-800 text-sm space-y-1",children:t.hints.map(((e,t)=>(0,$o.jsxs)("li",{children:["\u2022 ",e]},t)))})]}),d===c&&c>0?(0,$o.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Bd,{className:"h-5 w-5 text-green-600"}),(0,$o.jsx)("p",{className:"text-green-800 text-sm font-medium",children:"\u2705 Perfect! All blanks have been filled. You can continue or review your answers."})]})}):(0,$o.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,$o.jsxs)("p",{className:"text-yellow-800 text-sm",children:["Fill in ",c-d," more blank",c-d!==1?"s":""," to complete this question."]})]})})]})},op=e=>{let{question:t,answer:n,onAnswerChange:i}=e;return(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("textarea",{value:n||"",onChange:e=>i(e.target.value),className:"w-full h-32 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-vertical",placeholder:"Type your answer here...",maxLength:t.maxLength}),(0,$o.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[(0,$o.jsxs)("span",{children:[(n||"").length," / ",t.maxLength," characters"]}),(0,$o.jsx)("span",{children:"Be specific and include key terms related to the policy."})]}),t.sampleAnswer&&(0,$o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,$o.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udca1 Hint:"}),(0,$o.jsx)("p",{className:"text-blue-800 text-sm",children:"Your answer should cover the main policy points and use relevant terminology."})]})]})},lp=e=>{let{question:t,answer:n,onAnswerChange:i}=e;const a=t.scenario||"No scenario provided.",r=t.options||[];return(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,$o.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"\ud83d\udccb Scenario:"}),(0,$o.jsx)("p",{className:"text-yellow-800 leading-relaxed",children:a})]}),(0,$o.jsx)("div",{className:"space-y-3",children:r.map(((e,a)=>(0,$o.jsxs)("label",{className:"flex items-start p-4 border rounded-lg cursor-pointer transition-colors ".concat(n===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,$o.jsx)("input",{type:"radio",name:t.id,value:a,checked:n===a,onChange:()=>i(a),className:"sr-only"}),(0,$o.jsx)("div",{className:"w-4 h-4 rounded-full border-2 mr-3 mt-1 flex items-center justify-center flex-shrink-0 ".concat(n===a?"border-blue-500":"border-gray-300"),children:n===a&&(0,$o.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})}),(0,$o.jsx)("span",{className:"text-gray-900 leading-relaxed",children:e})]},a)))})]})},cp=e=>{let{question:t,answer:n,onAnswerChange:a}=e;const r=t.items||[],[s,o]=(0,i.useState)(n||r),[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(null);(0,i.useEffect)((()=>{!n&&r.length>0&&(a(r),o(r))}),[n,r,a]);const h=e=>{e.target.style.opacity="1",c(null),u(null)},m=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},p=e=>{e.currentTarget.contains(e.relatedTarget)||u(null)},f=(e,t)=>{const n=[...s],i="up"===t?e-1:e+1;i<0||i>=n.length||([n[e],n[i]]=[n[i],n[e]],o(n),a(n))};return(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,$o.jsx)("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"\ud83d\udccb Instructions:"}),(0,$o.jsx)("p",{className:"text-blue-700 text-sm",children:"Drag and drop the items below to arrange them in the correct order, or use the arrow buttons to move items up/down."})]}),(0,$o.jsx)("div",{className:"space-y-2",children:s.map(((e,t)=>(0,$o.jsxs)("div",{draggable:!0,onDragStart:e=>((e,t)=>{c(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.outerHTML),e.target.style.opacity="0.5"})(e,t),onDragEnd:h,onDragOver:m,onDragEnter:e=>((e,t)=>{e.preventDefault(),u(t)})(e,t),onDragLeave:p,onDrop:e=>((e,t)=>{if(e.preventDefault(),null===l||l===t)return;const n=[...s],i=n[l];n.splice(l,1),n.splice(t,0,i),o(n),a(n),c(null),u(null)})(e,t),className:"flex items-center p-4 border rounded-lg transition-all duration-200 ".concat(l===t?"opacity-50 transform rotate-2":d===t?"border-burando-teal bg-burando-teal/10 transform scale-105":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"," cursor-move"),children:[(0,$o.jsx)(Ym,{className:"h-5 w-5 text-gray-400 mr-3 flex-shrink-0"}),(0,$o.jsx)("span",{className:"flex-1 font-medium text-gray-900",children:e}),(0,$o.jsx)("div",{className:"flex items-center space-x-2 mr-3",children:(0,$o.jsxs)("span",{className:"text-sm font-semibold text-burando-teal bg-burando-teal/10 px-2 py-1 rounded",children:["#",t+1]})}),(0,$o.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,$o.jsx)("button",{type:"button",onClick:()=>f(t,"up"),disabled:0===t,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:(0,$o.jsx)(Km,{className:"h-4 w-4"})}),(0,$o.jsx)("button",{type:"button",onClick:()=>f(t,"down"),disabled:t===s.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:(0,$o.jsx)(Xm,{className:"h-4 w-4"})})]})]},"".concat(e,"-").concat(t))))}),(0,$o.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Bd,{className:"h-5 w-5 text-green-600"}),(0,$o.jsx)("p",{className:"text-green-800 text-sm font-medium",children:"\u2705 Order set! You can continue or adjust the order as needed."})]})})]})},dp=e=>{let{question:t,answer:n,onAnswerChange:a}=e;const r=t.leftColumn||[],s=t.rightColumn||[],[o,l]=(0,i.useState)(n||new Array(r.length).fill(null)),[c,d]=(0,i.useState)(null),[u,h]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!n&&r.length>0){const e=new Array(r.length).fill(null);a(e),l(e)}}),[n,r.length,a]);const m=e=>{e.target.style.opacity="1",d(null),h(null)},p=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},f=(e,t,n)=>{e.preventDefault(),h({type:t,index:n})},g=e=>{e.currentTarget.contains(e.relatedTarget)||h(null)},v=o.every((e=>null!==e)),b=o.filter((e=>null!==e)).length;return(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,$o.jsx)("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"\ud83d\udccb Instructions:"}),(0,$o.jsx)("p",{className:"text-blue-700 text-sm",children:"Drag items from the left column to the right column to create matches, or click items to match them automatically. Drag matched items back to the left to remove matches."})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,$o.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Progress: ",b," of ",r.length," matched"]}),v&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,$o.jsx)(Bd,{className:"h-4 w-4"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"All items matched!"})]})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)("h4",{className:"font-semibold text-burando-navy text-lg border-b border-gray-200 pb-2",children:"Equipment & Items"}),r.map(((e,t)=>{const n=null!==o[t],i=o[t];return(0,$o.jsx)("div",{draggable:!0,onDragStart:e=>((e,t)=>{d({type:"left",index:t,item:r[t]}),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.outerHTML),e.target.style.opacity="0.5"})(e,t),onDragEnd:m,onDragOver:p,onDragEnter:e=>f(e,"left",t),onDragLeave:g,onDrop:e=>(e=>{if(e.preventDefault(),!c)return;const t=[...o];if("right"===c.type){const e=t.findIndex((e=>e===c.index));-1!==e&&(t[e]=null)}else"left"===c.type&&(t[c.index]=null);l(t),a(t),d(null),h(null)})(e),onClick:()=>(e=>{if(null!==o[e]){const t=[...o];t[e]=null,l(t),a(t)}})(t),className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(n?"bg-green-50 border-green-300 text-green-800":"left"===(null===u||void 0===u?void 0:u.type)&&(null===u||void 0===u?void 0:u.index)===t?"border-red-400 bg-red-50":"bg-blue-50 border-blue-200 hover:border-blue-300 hover:bg-blue-100"),children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"font-medium",children:e}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[n&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Bd,{className:"h-4 w-4 text-green-600"}),(0,$o.jsxs)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:["\u2192 ",s[i]]})]}),(0,$o.jsx)(Ym,{className:"h-4 w-4 text-gray-400"})]})]})},t)}))]}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)("h4",{className:"font-semibold text-burando-navy text-lg border-b border-gray-200 pb-2",children:"Uses & Functions"}),s.map(((e,t)=>{const n=o.includes(t),i=o.findIndex((e=>e===t));return(0,$o.jsx)("div",{draggable:n,onDragStart:e=>n&&((e,t)=>{d({type:"right",index:t,item:s[t]}),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.outerHTML),e.target.style.opacity="0.5"})(e,t),onDragEnd:m,onDragOver:p,onDragEnter:e=>f(e,"right",t),onDragLeave:g,onDrop:e=>((e,t)=>{if(e.preventDefault(),!c||"left"!==c.type)return;const n=[...o];n[c.index]=t,l(n),a(n),d(null),h(null)})(e,t),onClick:()=>!n&&(e=>{const t=o.findIndex((e=>null===e));if(-1!==t){const n=[...o];n[t]=e,l(n),a(n)}})(t),className:"p-4 border-2 rounded-lg transition-all duration-200 ".concat(n?"bg-green-50 border-green-300 text-green-800 cursor-move":"right"===(null===u||void 0===u?void 0:u.type)&&(null===u||void 0===u?void 0:u.index)===t?"border-burando-teal bg-burando-teal/10 transform scale-105":"bg-orange-50 border-orange-200 hover:border-orange-300 hover:bg-orange-100 cursor-pointer"),children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"font-medium",children:e}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[n&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsxs)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:["\u2190 ",r[i]]}),(0,$o.jsx)(Bd,{className:"h-4 w-4 text-green-600"})]}),(0,$o.jsx)(Ym,{className:"h-4 w-4 text-gray-400"})]})]})},t)}))]})]}),v?(0,$o.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Bd,{className:"h-5 w-5 text-green-600"}),(0,$o.jsx)("p",{className:"text-green-800 text-sm font-medium",children:"\u2705 Perfect! All items have been matched. You can continue or adjust matches as needed."})]})}):(0,$o.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,$o.jsxs)("p",{className:"text-yellow-800 text-sm",children:["Match ",r.length-b," more item",r.length-b!==1?"s":""," to complete this question."]})]})})]})},up=()=>{var e,t,n;const{t:a}=bs(["quiz","common"]),{currentLanguage:r,languages:s,changeLanguage:o}=rl(),{phase:l}=ge(),c=pe(),u=(0,Et.useQueryClient)(),{isOnline:h}=function(){const[e,t]=(0,i.useState)(navigator.onLine),[n,a]=(0,i.useState)("good");return(0,i.useEffect)((()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}),[]),{isOnline:e,connectionQuality:n,checkConnection:async()=>{if(!navigator.onLine)return!1;try{return(await fetch("/api/health",{method:"HEAD",cache:"no-cache",headers:{"x-health-check-type":"monitoring"},timeout:5e3})).ok}catch(e){return!1}}}}(),[m,p]=(0,i.useState)(0),[f,g]=(0,i.useState)({}),[v,b]=(0,i.useState)(null),[x,y]=(0,i.useState)(!1),[w,_]=(0,i.useState)(!1),[k,N]=(0,i.useState)(!1),[j,S]=(0,i.useState)({}),[C,E]=(0,i.useState)({}),[A,T]=(0,i.useState)((()=>sessionStorage.getItem("quiz-session-".concat(l))||null)),[M,P]=(0,i.useState)(null),[D,R]=(0,i.useState)(!1),[O,L]=(0,i.useState)(null),[I,F]=(0,i.useState)(!1),[z,q]=(0,i.useState)(!navigator.onLine),[W,B]=(0,i.useState)(!1);(0,i.useEffect)((()=>{l&&(()=>{const e=ep.getQuizProgress(l);e&&(g(e.answers||{}),p(e.currentQuestion||0),y(!0),Vn.success(a("quiz:offline.progress_restored"),{duration:4e3}))})()}),[l,a]),(0,i.useEffect)((()=>{const e=()=>{q(!1),W&&Vn.success(a("quiz:offline.back_online_will_sync"))},t=()=>{q(!0),Vn.warning(a("quiz:offline.now_offline"),{duration:6e3})};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[W,a]),(0,i.useEffect)((()=>{const e=e=>{D&&!e.target.closest(".language-dropdown")&&R(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[D]);const{data:U,isLoading:V,error:H}=(0,Et.useQuery)(["quiz",l],(()=>ko(l)),{enabled:!!l,staleTime:0,cacheTime:0,onSuccess:e=>{e.quizSessionId&&(T(e.quizSessionId),sessionStorage.setItem("quiz-session-".concat(l),e.quizSessionId))},onError:e=>{sessionStorage.removeItem("quiz-session-".concat(l)),T(null)}}),{data:G,isLoading:Q}=(0,Et.useQuery)(["quiz-history"],(()=>jo()),{staleTime:12e4}),Y=null===G||void 0===G?void 0:G.some((e=>e.phase===parseInt(l)&&e.passed));(0,i.useEffect)((()=>{(async()=>{if(l)try{F(!0);const e=await Jo.getQuizInLanguage(l,r);L(e)}catch(e){L(null)}finally{F(!1)}})()}),[l,r]);const K=O&&O.questions&&O.questions.length>0?{title:"Phase ".concat(l," Safety Quiz"),description:"Complete this quiz to finish Phase ".concat(l," training"),timeLimit:(null===U||void 0===U?void 0:U.timeLimit)||30,passingScore:(null===U||void 0===U?void 0:U.passingScore)||70,questions:O.questions.map((e=>{var t,n,i,a,r;return{id:e.question_index,question:e.question_text,type:(null===(t=e.quiz_metadata)||void 0===t?void 0:t.type)||"multiple_choice",options:e.answers.map((e=>e.text)),correctAnswer:(null===(n=e.answers.find((e=>e.is_correct)))||void 0===n?void 0:n.answer_index)||0,explanation:(null===(i=e.answers.find((e=>e.is_correct)))||void 0===i?void 0:i.explanation)||"",timeLimit:(null===(a=e.quiz_metadata)||void 0===a?void 0:a.time_limit)||null,points:(null===(r=e.quiz_metadata)||void 0===r?void 0:r.points)||10}}))}:U?d(d({},U),{},{title:U.title||"Phase ".concat(l," Safety Quiz"),description:U.description||"Complete this quiz to finish Phase ".concat(l," training"),timeLimit:U.timeLimit||30,passingScore:U.passingScore||70}):null,X=null===K||void 0===K||null===(e=K.questions)||void 0===e?void 0:e[m],J=(null===K||void 0===K||null===(t=K.questions)||void 0===t?void 0:t.length)||0;(0,i.useEffect)((()=>{Y&&!k&&(N(!0),_(!0),y(!0))}),[Y,k]);const $=(0,Et.useMutation)((e=>No(l,e)),{onSuccess:e=>{_(!0),N(!0),b(0),Vn.success(a("quiz:results.submitted_successfully")),u.invalidateQueries("training-progress"),u.invalidateQueries("training-stats"),u.invalidateQueries("quiz-history"),u.invalidateQueries("crew-profile"),sessionStorage.removeItem("quiz-session-".concat(l))},onError:e=>{var t,n;const i=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||e.message;i.includes("session")&&(i.includes("expired")||i.includes("not found"))?(sessionStorage.removeItem("quiz-session-".concat(l)),T(null),Vn.error(a("quiz:errors.session_expired"))):Vn.error(a("quiz:errors.submission_failed",{error:i}))}});(0,i.useEffect)((()=>{x&&null===v&&null!==K&&void 0!==K&&K.timeLimit&&b(60*K.timeLimit)}),[x,null===K||void 0===K?void 0:K.timeLimit,v]),(0,i.useEffect)((()=>{if(x&&v>0&&!k&&!w){const e=setInterval((()=>{b((e=>e<=1?(ie(),0):e-1))}),1e3);return()=>clearInterval(e)}}),[x,v,k,w]),(0,i.useEffect)((()=>()=>{M&&clearTimeout(M)}),[M,m]);const Z=e=>["multiple_choice","yes_no","scenario"].includes(e),ee=()=>{const e=f[null===X||void 0===X?void 0:X.id];return"file_upload"===(null===X||void 0===X?void 0:X.type)?j[X.id]&&e:"drag_order"===(null===X||void 0===X?void 0:X.type)?Array.isArray(e)&&e.length>0:"matching"===(null===X||void 0===X?void 0:X.type)?Array.isArray(e)&&e.length>0&&e.every((e=>null!==e)):"fill_in_gaps"===(null===X||void 0===X?void 0:X.type)?Array.isArray(e)&&e.length>0&&e.every((e=>e&&""!==e.trim())):void 0!==e&&null!==e&&""!==e},te=(e,t)=>{const n=d(d({},f),{},{[e]:t});if(g(n),A&&ep.saveQuizProgress(l,n,m,A),M&&(clearTimeout(M),P(null)),X&&Z(X.type)&&m<J-1){const e=setTimeout((()=>{ne(),P(null)}),1500);P(e)}},ne=()=>{m<J-1&&p((e=>e+1))},ie=()=>{if(!A)return void Vn.error(a("quiz:errors.session_not_found"));const e=Object.entries(f).map((e=>{let[t,n]=e;return{questionId:t,answer:n}})),t={answers:e,quizSessionId:A,phase:parseInt(l),completedAt:Date.now()};if(!z&&navigator.onLine)$.mutate(t);else{ep.markQuizCompleted(l,e,null,A)?(B(!0),_(!0),N(!0),b(0),ep.removeItem("quiz_progress_".concat(l)),Vn.success(a("quiz:offline.saved_will_sync"),{duration:6e3})):Vn.error(a("quiz:offline.save_failed"))}};return V||Q?(0,$o.jsx)("div",{className:"space-y-6",children:(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-burando-teal mx-auto mb-4"}),(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-2",children:a("common:loading.quiz")}),(0,$o.jsx)("p",{className:"burando-text-muted",children:a("quiz:loading.preparing_quiz",{phase:l})})]})})}):H?(0,$o.jsx)("div",{className:"space-y-6",children:(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,$o.jsx)(Yc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-2",children:a("common:quiz_errors.loading_failed")}),(0,$o.jsxs)("p",{className:"burando-text-muted",children:[a("common:quiz_errors.failed_message",{phase:l}),(null===H||void 0===H||null===(ae=H.response)||void 0===ae||null===(re=ae.data)||void 0===re?void 0:re.error)||(null===H||void 0===H?void 0:H.message)||a("common:quiz_errors.unknown_error")]}),(0,$o.jsx)("button",{onClick:()=>window.location.reload(),className:"burando-btn burando-btn-primary mt-4",children:a("common:quiz_errors.try_again")})]})})}):K?(0,$o.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4 sm:space-y-6 px-4 sm:px-6 lg:px-8",children:[(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsx)("div",{className:"burando-card-header",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("div",{className:"flex-1",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"burando-heading-1 text-burando-navy",children:K.title}),(0,$o.jsx)("p",{className:"burando-text-muted",children:K.description})]}),(0,$o.jsxs)("div",{className:"relative language-dropdown",children:[(0,$o.jsx)("button",{onClick:()=>R(!D),className:"flex items-center space-x-2 px-3 py-2 bg-burando-teal/10 hover:bg-burando-teal/20 border border-burando-teal/30 rounded-lg transition-colors",disabled:I,children:I?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-burando-teal border-t-transparent rounded-full"}),(0,$o.jsx)("span",{className:"text-sm text-burando-teal",children:"Loading..."})]}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(ed,{className:"h-4 w-4 text-burando-teal"}),(0,$o.jsx)("span",{className:"text-sm text-burando-teal font-medium",children:(null===(n=s.find((e=>e.code===r)))||void 0===n?void 0:n.flag)||"EN"}),(0,$o.jsx)(Xc,{className:"h-4 w-4 text-burando-teal"})]})}),D&&(0,$o.jsx)("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:s.map((e=>(0,$o.jsx)("button",{onClick:()=>{o(e.code),R(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-burando-teal/10 first:rounded-t-lg last:rounded-b-lg transition-colors ".concat(r===e.code?"bg-burando-teal/10 text-burando-teal font-medium":"text-gray-700"),children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{children:e.name}),(0,$o.jsx)("span",{className:"text-xs font-mono bg-gray-100 px-1.5 py-0.5 rounded",children:e.flag})]})},e.code)))})]})]})}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3 ml-4",children:[z&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 bg-orange-50 border border-orange-200 px-3 py-2 rounded-lg",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),(0,$o.jsx)("span",{className:"text-sm font-medium text-orange-700",children:a("quiz:offline.mode_active")})]}),W&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-50 border border-blue-200 px-3 py-2 rounded-lg",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,$o.jsx)("span",{className:"text-sm font-medium text-blue-700",children:a("quiz:offline.pending_sync")})]}),x&&null!==v&&!k&&!w&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-burando-teal/10 to-burando-bright-teal/10 border border-burando-teal/20 px-4 py-2 rounded-lg",children:[(0,$o.jsx)(qd,{className:"h-5 w-5 text-burando-teal"}),(0,$o.jsx)("span",{className:"font-mono text-lg font-semibold ".concat(v<300?"text-red-600":"text-burando-navy"),children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(v)})]})]})]})})}),!x&&(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,$o.jsx)(kh,{className:"h-16 w-16 text-burando-teal mx-auto mb-6"}),(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-4",children:a("navigation.ready_to_begin")}),(0,$o.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4 mb-8",children:[(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[(0,$o.jsxs)("div",{className:"bg-gradient-to-br from-burando-teal/10 to-burando-teal/5 border border-burando-teal/20 p-4 rounded-lg",children:[(0,$o.jsx)(qd,{className:"h-6 w-6 text-burando-teal mx-auto mb-2"}),(0,$o.jsx)("div",{className:"font-semibold text-burando-navy",children:a("navigation.time_limit_label")}),(0,$o.jsxs)("div",{className:"text-burando-teal",children:[K.timeLimit," minutes"]})]}),(0,$o.jsxs)("div",{className:"bg-gradient-to-br from-burando-bright-teal/10 to-burando-bright-teal/5 border border-burando-bright-teal/20 p-4 rounded-lg",children:[(0,$o.jsx)(rd,{className:"h-6 w-6 text-burando-bright-teal mx-auto mb-2"}),(0,$o.jsx)("div",{className:"font-semibold text-burando-navy",children:a("navigation.questions_label")}),(0,$o.jsx)("div",{className:"text-burando-bright-teal",children:a("navigation.questions_count",{count:J})})]}),(0,$o.jsxs)("div",{className:"bg-gradient-to-br from-burando-light-green/10 to-burando-light-green/5 border border-burando-light-green/20 p-4 rounded-lg",children:[(0,$o.jsx)(Zu,{className:"h-6 w-6 text-burando-light-green mx-auto mb-2"}),(0,$o.jsx)("div",{className:"font-semibold text-burando-navy",children:a("navigation.passing_score_label")}),(0,$o.jsxs)("div",{className:"text-burando-light-green",children:[K.passingScore,"%"]})]})]}),(0,$o.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-left",children:[(0,$o.jsx)("h3",{className:"font-semibold text-orange-900 mb-2",children:a("quiz:ui.important_instructions")}),(0,$o.jsxs)("ul",{className:"text-orange-800 text-sm space-y-1",children:[(0,$o.jsxs)("li",{children:["\u2022 ",a("quiz:ui.instruction_photos")]}),(0,$o.jsxs)("li",{children:["\u2022 ",a("quiz:ui.instruction_navigation")]}),(0,$o.jsxs)("li",{children:["\u2022 ",a("quiz:ui.instruction_files")]}),(0,$o.jsxs)("li",{children:["\u2022 ",a("quiz:ui.instruction_all_questions")]}),(0,$o.jsxs)("li",{children:["\u2022 ",a("quiz:ui.instruction_auto_save")]})]})]})]}),(0,$o.jsxs)("button",{onClick:()=>{y(!0),Vn.success(a("quiz:ui.quiz_started"))},className:"burando-btn burando-btn-primary burando-btn-lg text-lg px-8 py-3",children:[(0,$o.jsx)(sh,{className:"h-5 w-5 mr-2"}),a("navigation.start_quiz")]})]})}),x&&!k&&X&&(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsxs)("div",{className:"burando-card-body py-4",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$o.jsxs)("span",{className:"text-sm font-medium text-burando-navy",children:[a("navigation.question_progress")," ",m+1," ",a("common:general.of")," ",J]}),(0,$o.jsxs)("span",{className:"text-sm text-burando-teal",children:[X.points||1," points"]})]}),(0,$o.jsx)("div",{className:"burando-progress",children:(0,$o.jsx)("div",{className:"burando-progress-bar transition-all duration-300",style:{width:"".concat((m+1)/J*100,"%")}})})]})}),(0,$o.jsxs)("div",{className:"burando-card",children:[(0,$o.jsx)("div",{className:"burando-card-header",children:(0,$o.jsx)("div",{className:"flex items-start justify-between",children:(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,$o.jsx)("span",{className:"burando-badge burando-badge-info",children:X.category?String(X.category).replace("_"," ").toUpperCase():"GENERAL"}),X.required&&(0,$o.jsx)("span",{className:"burando-badge burando-badge-error",children:"REQUIRED"})]}),(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy",children:X.question})]})})}),(0,$o.jsxs)("div",{className:"burando-card-body",children:["file_upload"===X.type&&(0,$o.jsx)(ip,{question:X,answer:f[X.id],uploadedFile:j[X.id],onAnswerChange:e=>te(X.id,e),onFileUpload:e=>((e,t)=>{S((n=>d(d({},n),{},{[e]:t}))),te(e,t.name)})(X.id,e),onClearFile:()=>{return e=X.id,S((t=>{const n=d({},t);return delete n[e],n})),void te(e,null);var e},t:a}),"multiple_choice"===X.type&&(0,$o.jsx)(ap,{question:X,answer:f[X.id],onAnswerChange:e=>te(X.id,e)}),"yes_no"===X.type&&(0,$o.jsx)(rp,{question:X,answer:f[X.id],onAnswerChange:e=>te(X.id,e)}),"fill_in_gaps"===X.type&&(0,$o.jsx)(sp,{question:X,answer:f[X.id],onAnswerChange:e=>te(X.id,e)}),"drag_order"===X.type&&(0,$o.jsx)(cp,{question:X,answer:f[X.id],onAnswerChange:e=>te(X.id,e)}),"matching"===X.type&&(0,$o.jsx)(dp,{question:X,answer:f[X.id],onAnswerChange:e=>te(X.id,e)}),"short_answer"===X.type&&(0,$o.jsx)(op,{question:X,answer:f[X.id],onAnswerChange:e=>te(X.id,e)}),"scenario"===X.type&&(0,$o.jsx)(lp,{question:X,answer:f[X.id],onAnswerChange:e=>te(X.id,e)})]})]}),(0,$o.jsx)("div",{className:"burando-card border-t-4 border-t-burando-teal",children:(0,$o.jsxs)("div",{className:"burando-card-body py-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-center mb-6 space-x-4",children:[Z(null===X||void 0===X?void 0:X.type)&&M&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-burando-teal bg-burando-teal/10 px-4 py-2 rounded-full border border-burando-teal/20",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-burando-teal rounded-full animate-pulse"}),(0,$o.jsx)("span",{className:"font-medium",children:a("quiz:ui.auto_advance")})]}),ee()&&!M&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-600 bg-green-50 px-4 py-2 rounded-full border border-green-200",children:[(0,$o.jsx)(Bd,{className:"h-4 w-4"}),(0,$o.jsx)("span",{className:"font-medium",children:a("quiz:ui.question_answered")})]}),!ee()&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 bg-gray-50 px-4 py-2 rounded-full border border-gray-200",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),(0,$o.jsx)("span",{children:a("quiz:ui.provide_answer")})]})]}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,$o.jsx)("div",{className:"flex items-center justify-center sm:hidden",children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:a("quiz:ui.question_progress")}),(0,$o.jsxs)("div",{className:"text-lg font-semibold text-burando-navy",children:[m+1," ",a("common:general.of")," ",J]})]})}),(0,$o.jsxs)("div",{className:"flex items-center justify-between flex-1",children:[(0,$o.jsxs)("button",{onClick:()=>{m>0&&p((e=>e-1))},disabled:0===m,className:"burando-btn burando-btn-outline disabled:opacity-50 disabled:cursor-not-allowed touch-target",children:[(0,$o.jsx)(wh,{className:"h-4 w-4 mr-2"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:a("common:buttons.previous")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Prev"})]}),(0,$o.jsxs)("div",{className:"hidden sm:flex items-center space-x-6",children:[(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:a("quiz:ui.question_progress")}),(0,$o.jsxs)("div",{className:"text-lg font-semibold text-burando-navy",children:[m+1," ",a("common:general.of")," ",J]})]}),(0,$o.jsxs)("button",{onClick:()=>{Vn.success(a("common:success.saved"))},className:"burando-btn burando-btn-outline burando-btn-sm touch-target",title:a("quiz:ui.save_progress"),children:[(0,$o.jsx)(Dd,{className:"h-4 w-4 mr-2"}),a("common:buttons.save")]})]}),m===J-1?(0,$o.jsxs)("button",{onClick:ie,disabled:!ee(),className:"burando-btn burando-btn-success burando-btn-lg disabled:opacity-50 disabled:cursor-not-allowed touch-target",children:[(0,$o.jsx)(Um,{className:"h-5 w-5 mr-2"}),(0,$o.jsx)("span",{className:"hidden sm:inline",children:a("navigation.submit_quiz")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Submit"})]}):(0,$o.jsxs)("button",{onClick:()=>{M&&(clearTimeout(M),P(null)),ne()},disabled:!ee(),className:"burando-btn burando-btn-primary burando-btn-lg disabled:opacity-50 disabled:cursor-not-allowed touch-target",children:[(0,$o.jsx)("span",{className:"hidden sm:inline",children:a("common:buttons.continue")}),(0,$o.jsx)("span",{className:"sm:hidden",children:"Next"}),(0,$o.jsx)(Vm,{className:"h-5 w-5 ml-2"})]})]}),(0,$o.jsx)("div",{className:"flex sm:hidden justify-center",children:(0,$o.jsxs)("button",{onClick:()=>{Vn.success(a("common:success.saved"))},className:"burando-btn burando-btn-outline burando-btn-sm touch-target",title:a("quiz:ui.save_progress"),children:[(0,$o.jsx)(Dd,{className:"h-4 w-4 mr-2"}),a("common:buttons.save")]})})]})]})})]}),k&&(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,$o.jsx)(Bd,{className:"h-16 w-16 text-burando-light-green mx-auto mb-6"}),(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-4",children:a("quiz:ui.quiz_completed_title")}),(0,$o.jsx)("p",{className:"burando-text-muted mb-8",children:a("quiz:ui.quiz_completed_message")}),(0,$o.jsxs)("div",{className:"space-x-4",children:[(0,$o.jsx)("button",{onClick:()=>c("/crew/training/".concat(l)),className:"burando-btn burando-btn-primary",children:a("quiz:ui.return_to_training")}),(0,$o.jsx)("button",{onClick:()=>c("/crew/dashboard"),className:"burando-btn burando-btn-outline",children:a("quiz:ui.go_to_dashboard")})]}),(0,$o.jsx)("div",{className:"mt-8 flex justify-center",children:(0,$o.jsx)($m,{context:"quiz_completion",trigger:"auto",onFeedbackSubmitted:e=>{},className:"max-w-md"})})]})})]}):(0,$o.jsx)("div",{className:"space-y-6",children:(0,$o.jsx)("div",{className:"burando-card",children:(0,$o.jsxs)("div",{className:"burando-card-body text-center py-12",children:[(0,$o.jsx)(Yc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,$o.jsx)("h2",{className:"burando-heading-2 text-burando-navy mb-2",children:a("quiz:errors.not_found")}),(0,$o.jsx)("p",{className:"burando-text-muted",children:a("quiz:errors.not_available",{phase:l})})]})})});var ae,re},hp=Gc("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),mp=Gc("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),pp=()=>{const{user:e}=el(),{t:t}=bs("common"),{currentLanguage:n,languages:a,changeLanguage:r}=rl(),s=(0,Et.useQueryClient)(),[o,l]=(0,i.useState)(n),{data:c,isLoading:d}=(0,Et.useQuery)("crew-profile",vo,{enabled:"crew"===(null===e||void 0===e?void 0:e.role),onSuccess:e=>{var t;null!==e&&void 0!==e&&null!==(t=e.user)&&void 0!==t&&t.preferredLanguage&&l(e.user.preferredLanguage)}}),u=null===c||void 0===c?void 0:c.user,h=(0,Et.useMutation)((async e=>{const t=await fetch("/api/crew/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({preferredLanguage:e})});if(!t.ok)throw new Error("Failed to update language preference");return t.json()}),{onSuccess:async(e,n)=>{await r(n),s.invalidateQueries("crew-profile"),Vn.success(t("profile.language_updated"))},onError:()=>{Vn.error(t("profile.language_update_failed"))}});return d?(0,$o.jsx)(Zc,{message:t("profile.loading_profile")}):"manager"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role)?(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:(0,$o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,$o.jsx)("div",{className:"mb-8",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,$o.jsx)("div",{className:"p-2 bg-blue-600 rounded-lg",children:(0,$o.jsx)(Jc,{className:"h-6 w-6 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t("profile.title")}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Management Profile & Preferences"})]})]})}),(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,$o.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("div",{className:"h-16 w-16 bg-white/20 rounded-full flex items-center justify-center",children:(0,$o.jsx)(gd,{className:"h-8 w-8 text-white"})}),(0,$o.jsxs)("div",{className:"text-white",children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold",children:[e.firstName," ",e.lastName]}),(0,$o.jsxs)("p",{className:"text-blue-100 capitalize flex items-center",children:[(0,$o.jsx)(Jc,{className:"h-4 w-4 mr-1"}),e.role]})]})]})}),(0,$o.jsx)("div",{className:"p-8",children:(0,$o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,$o.jsx)(gd,{className:"h-5 w-5 text-blue-600"}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.personal_info")})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(gd,{className:"h-5 w-5 text-gray-500"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.full_name")}),(0,$o.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[e.firstName," ",e.lastName]})]})]})}),(0,$o.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Qc,{className:"h-5 w-5 text-gray-500"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.email")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.email})]})]})}),(0,$o.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Jc,{className:"h-5 w-5 text-gray-500"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.role")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:e.role})]})]})})]})]}),(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,$o.jsx)(ed,{className:"h-5 w-5 text-blue-600"}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.preferences")})]}),(0,$o.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,$o.jsx)(ed,{className:"inline h-4 w-4 mr-2 text-blue-600"}),t("profile.language_preference")]}),(0,$o.jsx)("select",{value:o,onChange:e=>{const t=e.target.value;l(t),r(t)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm",children:a.map((e=>(0,$o.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))}),(0,$o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:t("profile.language_description")})]})]})]})})]})]})}):(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100",children:(0,$o.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,$o.jsx)("div",{className:"mb-8",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,$o.jsx)("div",{className:"p-2 bg-blue-600 rounded-lg",children:(0,$o.jsx)(Hd,{className:"h-6 w-6 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t("profile.my_profile")}),(0,$o.jsx)("p",{className:"text-gray-600",children:t("profile.personal_information")})]})]})}),(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,$o.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-8",children:(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[(0,$o.jsxs)("div",{className:"relative",children:[(0,$o.jsx)("div",{className:"h-24 w-24 bg-white/20 rounded-full flex items-center justify-center border-4 border-white/30",children:(0,$o.jsx)(gd,{className:"h-12 w-12 text-white"})}),(0,$o.jsx)("button",{className:"absolute -bottom-1 -right-1 p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow",children:(0,$o.jsx)(Gm,{className:"h-4 w-4 text-gray-600"})})]}),(0,$o.jsxs)("div",{className:"text-white text-center sm:text-left",children:[(0,$o.jsxs)("h2",{className:"text-3xl font-bold",children:[null===u||void 0===u?void 0:u.firstName," ",null===u||void 0===u?void 0:u.lastName]}),(0,$o.jsxs)("p",{className:"text-blue-100 text-lg flex items-center justify-center sm:justify-start mt-1",children:[(0,$o.jsx)($c,{className:"h-5 w-5 mr-2"}),null===u||void 0===u?void 0:u.position]}),(0,$o.jsx)("div",{className:"flex items-center justify-center sm:justify-start mt-2",children:(0,$o.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-500/20 text-green-100 border border-green-400/30":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-500/20 text-blue-100 border border-blue-400/30":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-500/20 text-yellow-100 border border-yellow-400/30":"bg-gray-500/20 text-gray-100 border border-gray-400/30"),children:[(0,$o.jsx)("div",{className:"h-2 w-2 rounded-full mr-2 ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-400":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-400":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-400":"bg-gray-400")}),null===u||void 0===u?void 0:u.status]})})]})]})}),(0,$o.jsxs)("div",{className:"p-8",children:[(0,$o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(gd,{className:"h-5 w-5 text-blue-600"}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.personal_info")})]}),(0,$o.jsx)("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,$o.jsx)(hp,{className:"h-4 w-4"})})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,$o.jsx)(gd,{className:"h-5 w-5 text-blue-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.full_name")}),(0,$o.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[null===u||void 0===u?void 0:u.firstName," ",null===u||void 0===u?void 0:u.lastName]})]})]})}),(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,$o.jsx)(Qc,{className:"h-5 w-5 text-green-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.email")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===u||void 0===u?void 0:u.email})]})]})}),(null===u||void 0===u?void 0:u.contactPhone)&&(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,$o.jsx)(mp,{className:"h-5 w-5 text-purple-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.phone")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:u.contactPhone})]})]})})]})]}),(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)($c,{className:"h-5 w-5 text-blue-600"}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.work_info")})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)(Zu,{className:"h-4 w-4 text-yellow-500"}),(0,$o.jsx)("span",{className:"text-sm text-gray-600",children:"Maritime Professional"})]})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,$o.jsx)(gd,{className:"h-5 w-5 text-blue-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.position")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===u||void 0===u?void 0:u.position})]})]})}),(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,$o.jsx)($c,{className:"h-5 w-5 text-blue-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.vessel")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===u||void 0===u?void 0:u.vesselAssignment})]})]})}),(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,$o.jsx)(Nd,{className:"h-5 w-5 text-orange-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.boarding_date")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null!==u&&void 0!==u&&u.expectedBoardingDate?new Date(u.expectedBoardingDate).toLocaleDateString():t("common.not_set")})]})]})}),(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 rounded-lg ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-100":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-100":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-100":"bg-gray-100"),children:(0,$o.jsx)("div",{className:"h-5 w-5 rounded-full flex items-center justify-center ".concat("completed"===(null===u||void 0===u?void 0:u.status)?"bg-green-500":"active"===(null===u||void 0===u?void 0:u.status)?"bg-blue-500":"pending"===(null===u||void 0===u?void 0:u.status)?"bg-yellow-500":"bg-gray-500"),children:(0,$o.jsx)("div",{className:"h-2 w-2 bg-white rounded-full"})})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("common.status")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:null===u||void 0===u?void 0:u.status})]})]})})]})]})]}),(0,$o.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,$o.jsx)(ed,{className:"h-5 w-5 text-blue-600"}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.preferences")})]}),(0,$o.jsx)("div",{className:"max-w-md",children:(0,$o.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[(0,$o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,$o.jsx)(ed,{className:"inline h-4 w-4 mr-2 text-blue-600"}),t("profile.language_preference")]}),(0,$o.jsx)("select",{value:o,onChange:async e=>{const t=e.target.value;l(t),h.mutate(t)},disabled:h.isLoading,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:a.map((e=>(0,$o.jsxs)("option",{value:e.code,children:[e.flag," ",e.name]},e.code)))}),(0,$o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:t("profile.language_description")}),h.isLoading&&(0,$o.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,$o.jsxs)("p",{className:"text-sm text-blue-600",children:[t("profile.updating_language"),"..."]})]})]})})]}),((null===u||void 0===u?void 0:u.emergencyContactName)||(null===u||void 0===u?void 0:u.emergencyContactPhone))&&(0,$o.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,$o.jsx)(Jc,{className:"h-5 w-5 text-red-600"}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t("profile.emergency_contact")})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(null===u||void 0===u?void 0:u.emergencyContactName)&&(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-lg border border-red-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,$o.jsx)(gd,{className:"h-5 w-5 text-red-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.contact_name")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:u.emergencyContactName})]})]})}),(null===u||void 0===u?void 0:u.emergencyContactPhone)&&(0,$o.jsx)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-lg border border-red-200 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,$o.jsx)(mp,{className:"h-5 w-5 text-red-600"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t("profile.contact_phone")}),(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:u.emergencyContactPhone})]})]})})]})]})]})]})]})})};function fp(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var gp="function"===typeof Symbol&&Symbol.observable||"@@observable",vp=function(){return Math.random().toString(36).substring(7).split("").join(".")},bp={INIT:"@@redux/INIT"+vp(),REPLACE:"@@redux/REPLACE"+vp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+vp()}};function xp(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function yp(e,t,n){var i;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(fp(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(fp(1));return n(yp)(e,t)}if("function"!==typeof e)throw new Error(fp(2));var a=e,r=t,s=[],o=s,l=!1;function c(){o===s&&(o=s.slice())}function d(){if(l)throw new Error(fp(3));return r}function u(e){if("function"!==typeof e)throw new Error(fp(4));if(l)throw new Error(fp(5));var t=!0;return c(),o.push(e),function(){if(t){if(l)throw new Error(fp(6));t=!1,c();var n=o.indexOf(e);o.splice(n,1),s=null}}}function h(e){if(!xp(e))throw new Error(fp(7));if("undefined"===typeof e.type)throw new Error(fp(8));if(l)throw new Error(fp(9));try{l=!0,r=a(r,e)}finally{l=!1}for(var t=s=o,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:bp.INIT}),(i={dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(fp(10));a=e,h({type:bp.REPLACE})}})[gp]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(fp(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[gp]=function(){return this},e},i}function wp(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if("undefined"!==typeof process&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;e=new Error(t.replace(/%s/g,(function(){return i[n++]}))),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function _p(e,t,n){return t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:n||null),e)}function kp(e){return"object"===typeof e}const Np="dnd-core/INIT_COORDS",jp="dnd-core/BEGIN_DRAG",Sp="dnd-core/PUBLISH_DRAG_SOURCE",Cp="dnd-core/HOVER",Ep="dnd-core/DROP",Ap="dnd-core/END_DRAG";function Tp(e,t){return{type:Np,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const Mp={type:Np,payload:{clientOffset:null,sourceClientOffset:null}};function Pp(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0};const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:r}=n,s=e.getMonitor(),o=e.getRegistry();e.dispatch(Tp(a)),function(e,t,n){wp(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){wp(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,s,o);const l=function(e,t){let n=null;for(let i=e.length-1;i>=0;i--)if(t.canDragSource(e[i])){n=e[i];break}return n}(t,s);if(null==l)return void e.dispatch(Mp);let c=null;if(a){if(!r)throw new Error("getSourceClientOffset must be defined");!function(e){wp("function"===typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(r),c=r(l)}e.dispatch(Tp(a,c));const d=o.getSource(l).beginDrag(s,l);if(null==d)return;!function(e){wp(kp(e),"Item must be an object.")}(d),o.pinSource(l);const u=o.getSourceType(l);return{type:jp,payload:{itemType:u,item:d,sourceId:l,clientOffset:a||null,sourceClientOffset:c||null,isSourcePublic:!!i}}}}function Dp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Dp(e,t,n[t])}))}return e}function Op(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.getMonitor(),i=e.getRegistry();!function(e){wp(e.isDragging(),"Cannot call drop while not dragging."),wp(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);const a=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);a.forEach(((a,r)=>{const s=function(e,t,n,i){const a=n.getTarget(e);let r=a?a.drop(i,e):void 0;(function(e){wp("undefined"===typeof e||kp(e),"Drop result must either be an object or undefined.")})(r),"undefined"===typeof r&&(r=0===t?{}:i.getDropResult());return r}(a,r,i,n),o={type:Ep,payload:{dropResult:Rp({},t,s)}};e.dispatch(o)}))}}function Lp(e){return function(){const t=e.getMonitor(),n=e.getRegistry();!function(e){wp(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const i=t.getSourceId();if(null!=i){n.getSource(i,!0).endDrag(t,i),n.unpinSource()}return{type:Ap}}}function Ip(e,t){return null===t?null===e:Array.isArray(e)?e.some((e=>e===t)):e===t}function Fp(e){return function(t){let{clientOffset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e){wp(Array.isArray(e),"Expected targetIds to be an array.")}(t);const i=t.slice(0),a=e.getMonitor(),r=e.getRegistry();return function(e,t,n){for(let i=e.length-1;i>=0;i--){const a=e[i];Ip(t.getTargetType(a),n)||e.splice(i,1)}}(i,r,a.getItemType()),function(e,t,n){wp(t.isDragging(),"Cannot call hover while not dragging."),wp(!t.didDrop(),"Cannot call hover after drop.");for(let i=0;i<e.length;i++){const t=e[i];wp(e.lastIndexOf(t)===i,"Expected targetIds to be unique in the passed array.");wp(n.getTarget(t),"Expected targetIds to be registered.")}}(i,a,r),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(i,a,r),{type:Cp,payload:{targetIds:i,clientOffset:n||null}}}}function zp(e){return function(){if(e.getMonitor().isDragging())return{type:Sp}}}class qp{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const n=function(e){return{beginDrag:Pp(e),publishDragSource:zp(e),hover:Fp(e),drop:Op(e),endDrag:Lp(e)}}(this);return Object.keys(n).reduce(((i,a)=>{const r=n[a];var s;return i[a]=(s=r,function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];const r=s.apply(e,i);"undefined"!==typeof r&&t(r)}),i}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function Wp(e,t){return{x:e.x-t.x,y:e.y-t.y}}const Bp=[],Up=[];Bp.__IS_NONE__=!0,Up.__IS_ALL__=!0;class Vp{subscribeToStateChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{handlerIds:n}=t;wp("function"===typeof e,"listener must be a function."),wp("undefined"===typeof n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;return this.store.subscribe((()=>{const t=this.store.getState(),a=t.stateId;try{const r=a===i||a===i+1&&!function(e,t){if(e===Bp)return!1;if(e===Up||"undefined"===typeof t)return!0;const n=(i=e,t.filter((e=>i.indexOf(e)>-1)));var i;return n.length>0}(t.dirtyHandlerIds,n);r||e()}finally{i=a}}))}subscribeToOffsetChange(e){wp("function"===typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe((()=>{const n=this.store.getState().dragOffset;n!==t&&(t=n,e())}))}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return wp(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(wp(t,"Expected to find a valid target. targetId=".concat(e)),!this.isDragging()||this.didDrop())return!1;return Ip(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(wp(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!Ip(i,a))return!1;const r=this.getTargetIds();if(!r.length)return!1;const s=r.indexOf(e);return n?s===r.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:i}=e;return t&&n&&i?Wp(function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(t,i),n):null}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:n}=e;return t&&n?Wp(t,n):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const Hp="undefined"!==typeof global?global:self,Gp=Hp.MutationObserver||Hp.WebKitMutationObserver;function Qp(e){return function(){const t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),e()}}}const Yp="function"===typeof Gp?function(e){let t=1;const n=new Gp(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}:Qp;class Kp{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const Xp=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Yp(this.flush),this.requestErrorThrow=Qp((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},Jp=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new Kp(this.onError,(e=>t[t.length]=e));return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(Xp.registerPendingError);const $p="dnd-core/ADD_SOURCE",Zp="dnd-core/ADD_TARGET",ef="dnd-core/REMOVE_SOURCE",tf="dnd-core/REMOVE_TARGET";function nf(e,t){t&&Array.isArray(e)?e.forEach((e=>nf(e,!1))):wp("string"===typeof e||"symbol"===typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var af;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(af||(af={}));let rf=0;function sf(e){const t=(rf++).toString();switch(e){case af.SOURCE:return"S".concat(t);case af.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function of(e){switch(e[0]){case"S":return af.SOURCE;case"T":return af.TARGET;default:throw new Error("Cannot parse handler ID: ".concat(e))}}function lf(e,t){const n=e.entries();let i=!1;do{const{done:e,value:[,a]}=n.next();if(a===t)return!0;i=!!e}while(!i);return!1}class cf{addSource(e,t){nf(e),function(e){wp("function"===typeof e.canDrag,"Expected canDrag to be a function."),wp("function"===typeof e.beginDrag,"Expected beginDrag to be a function."),wp("function"===typeof e.endDrag,"Expected endDrag to be a function.")}(t);const n=this.addHandler(af.SOURCE,e,t);return this.store.dispatch(function(e){return{type:$p,payload:{sourceId:e}}}(n)),n}addTarget(e,t){nf(e,!0),function(e){wp("function"===typeof e.canDrop,"Expected canDrop to be a function."),wp("function"===typeof e.hover,"Expected hover to be a function."),wp("function"===typeof e.drop,"Expected beginDrag to be a function.")}(t);const n=this.addHandler(af.TARGET,e,t);return this.store.dispatch(function(e){return{type:Zp,payload:{targetId:e}}}(n)),n}containsHandler(e){return lf(this.dragSources,e)||lf(this.dropTargets,e)}getSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wp(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return wp(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return wp(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return wp(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return of(e)===af.SOURCE}isTargetId(e){return of(e)===af.TARGET}removeSource(e){var t;wp(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:ef,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},Xp.enqueueTask(Jp.create(t))}removeTarget(e){wp(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:tf,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);wp(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){wp(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const i=sf(e);return this.types.set(i,t),e===af.SOURCE?this.dragSources.set(i,n):e===af.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const df=(e,t)=>e===t;function uf(){let e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Cp:break;case $p:case Zp:case tf:case ef:return Bp;default:return Up}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,i=function(e,t){const n=new Map,i=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(i),t.forEach(i);const a=[];return n.forEach(((e,t)=>{1===e&&a.push(t)})),a}(t,n),a=i.length>0||!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:df;if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!n(e[i],t[i]))return!1;return!0}(t,n);if(!a)return Bp;const r=n[n.length-1],s=t[t.length-1];return r!==s&&(r&&i.push(r),s&&i.push(s)),i}function hf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mf={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function pf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mf,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case Np:case jp:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Cp:return i=e.clientOffset,a=n.clientOffset,!i&&!a||i&&a&&i.x===a.x&&i.y===a.y?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){hf(e,t,n[t])}))}return e}({},e,{clientOffset:n.clientOffset});case Ap:case Ep:return mf;default:return e}var i,a}function ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){ff(e,t,n[t])}))}return e}const vf={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function bf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vf,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case jp:return gf({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Sp:return gf({},e,{isSourcePublic:!0});case Cp:return gf({},e,{targetIds:n.targetIds});case tf:return-1===e.targetIds.indexOf(n.targetId)?e:gf({},e,{targetIds:(i=e.targetIds,a=n.targetId,i.filter((e=>e!==a)))});case Ep:return gf({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Ap:return gf({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var i,a}function xf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case $p:case Zp:return e+1;case ef:case tf:return e-1;default:return e}}function yf(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function wf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){wf(e,t,n[t])}))}return e}function kf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:uf(e.dirtyHandlerIds,{type:t.type,payload:_f({},t.payload,{prevTargetIds:_p(e,"dragOperation.targetIds",[])})}),dragOffset:pf(e.dragOffset,t),refCount:xf(e.refCount,t),dragOperation:bf(e.dragOperation,t),stateId:yf(e.stateId)}}function Nf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(e){const t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return yp(kf,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),a=new Vp(i,new cf(i)),r=new qp(i,a),s=e(r,t,n);return r.receiveBackend(s),r}const jf=(0,i.createContext)({dragDropManager:void 0});function Sf(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}let Cf=0;const Ef=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Af=(0,i.memo)((function(e){var{children:t}=e,n=Sf(e,["children"]);const[a,r]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tf(),n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const a=t;a[Ef]||(a[Ef]={dragDropManager:Nf(e,t,n,i)});return a[Ef]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(n);return(0,i.useEffect)((()=>{if(r){const e=Tf();return++Cf,()=>{0===--Cf&&(e[Ef]=null)}}}),[]),(0,$o.jsx)(jf.Provider,{value:a,children:t})}));function Tf(){return"undefined"!==typeof global?global:window}function Mf(e){let t=null;return()=>(null==t&&(t=e()),t)}class Pf{enter(e){const t=this.entered.length;return this.entered=function(e,t){const n=new Set,i=e=>n.add(e);e.forEach(i),t.forEach(i);const a=[];return n.forEach((e=>a.push(e))),a}(this.entered.filter((t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e)))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;var n,i;return this.entered=(n=this.entered.filter(this.isNodeInDocument),i=e,n.filter((e=>e!==i))),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Df{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn("Browser doesn't allow reading \"".concat(e,'" until the drop event.')),null)})}))}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach((n=>{const i=this.config.exposeProperties[n];null!=i&&(t[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Rf="__NATIVE_FILE__",Of="__NATIVE_URL__",Lf="__NATIVE_TEXT__",If="__NATIVE_HTML__";function Ff(e,t,n){const i=t.reduce(((t,n)=>t||e.getData(n)),"");return null!=i?i:n}const zf={[Rf]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[If]:{exposeProperties:{html:(e,t)=>Ff(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Of]:{exposeProperties:{urls:(e,t)=>Ff(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Lf]:{exposeProperties:{text:(e,t)=>Ff(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function qf(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(zf).filter((e=>{const n=zf[e];return!!(null===n||void 0===n?void 0:n.matchesTypes)&&n.matchesTypes.some((e=>t.indexOf(e)>-1))}))[0]||null}const Wf=Mf((()=>/firefox/i.test(navigator.userAgent))),Bf=Mf((()=>Boolean(window.safari)));class Uf{interpolate(e){const{xs:t,ys:n,c1s:i,c2s:a,c3s:r}=this;let s=t.length-1;if(e===t[s])return n[s];let o,l=0,c=r.length-1;for(;l<=c;){o=Math.floor(.5*(l+c));const i=t[o];if(i<e)l=o+1;else{if(!(i>e))return n[o];c=o-1}}s=Math.max(0,c);const d=e-t[s],u=d*d;return n[s]+i[s]*d+a[s]*u+r[s]*d*u}constructor(e,t){const{length:n}=e,i=[];for(let m=0;m<n;m++)i.push(m);i.sort(((t,n)=>e[t]<e[n]?-1:1));const a=[],r=[],s=[];let o,l;for(let m=0;m<n-1;m++)o=e[m+1]-e[m],l=t[m+1]-t[m],r.push(o),a.push(l),s.push(l/o);const c=[s[0]];for(let m=0;m<r.length-1;m++){const e=s[m],t=s[m+1];if(e*t<=0)c.push(0);else{o=r[m];const n=r[m+1],i=o+n;c.push(3*i/((i+n)/e+(i+o)/t))}}c.push(s[s.length-1]);const d=[],u=[];let h;for(let m=0;m<c.length-1;m++){h=s[m];const e=c[m],t=1/r[m],n=e+c[m+1]-h-h;d.push((h-e-n)*t),u.push(n*t*t)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=d,this.c3s=u}}function Vf(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return null;const{top:n,left:i}=t.getBoundingClientRect();return{x:i,y:n}}function Hf(e){return{x:e.clientX,y:e.clientY}}function Gf(e,t,n,i,a){const r=function(e){var t;return"IMG"===e.nodeName&&(Wf()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),s=Vf(r?e:t),o={x:n.x-s.x,y:n.y-s.y},{offsetWidth:l,offsetHeight:c}=e,{anchorX:d,anchorY:u}=i,{dragPreviewWidth:h,dragPreviewHeight:m}=function(e,t,n,i){let a=e?t.width:n,r=e?t.height:i;return Bf()&&e&&(r/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:r}}(r,t,l,c),{offsetX:p,offsetY:f}=a,g=0===f||f;return{x:0===p||p?p:new Uf([0,.5,1],[o.x,o.x/l*h,o.x+h-l]).interpolate(d),y:g?f:(()=>{let e=new Uf([0,.5,1],[o.y,o.y/c*m,o.y+m-c]).interpolate(u);return Bf()&&r&&(e+=(window.devicePixelRatio-1)*m),e})()}}class Qf{get window(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Yf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Yf(e,t,n[t])}))}return e}class Xf{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const i=t=>this.handleDragStart(t,e),a=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",a),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=t=>this.handleDragEnter(t,e),i=t=>this.handleDragOver(t,e),a=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",i),t.addEventListener("drop",a),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",i),t.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Kf({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return Kf({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(t).some((n=>t[n]===e))}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const n=zf[e];if(!n)throw new Error("native type ".concat(e," has no configuration"));const i=new Df(n);return i.loadDataTransfer(t),i}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&Vf(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!==typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!==typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const n=Hf(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});const{dataTransfer:i}=e,a=qf(i);if(this.monitor.isDragging()){if(i&&"function"===typeof i.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),a=this.sourcePreviewNodes.get(e)||t;if(a){const{anchorX:e,anchorY:r,offsetX:s,offsetY:o}=this.getCurrentSourcePreviewNodeOptions(),l=Gf(t,a,n,{anchorX:e,anchorY:r},{offsetX:s,offsetY:o});i.setDragImage(a,l.x,l.y)}}try{null===i||void 0===i||i.setData("application/json",{})}catch(r){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(a)this.beginDragNativeItem(a);else{if(i&&!i.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:n}=e,i=qf(n);i&&this.beginDragNativeItem(i,n)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:Hf(e)});t.some((e=>this.monitor.canDropOnTarget(e)))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=Hf(e),this.scheduleHover(t);(t||[]).some((e=>this.monitor.canDropOnTarget(e)))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):qf(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:Hf(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Qf(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Pf(this.isNodeInDocument)}}const Jf=function(e,t,n){return new Xf(e,t,n)};var $f=n(355);const Zf="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;function eg(e,t,n){const[a,r]=function(e,t,n){const[a,r]=(0,i.useState)((()=>t(e))),s=(0,i.useCallback)((()=>{const i=t(e);$f(a,i)||(r(i),n&&n())}),[a,e,n]);return Zf(s),[a,s]}(e,t,n);return Zf((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(r,{handlerIds:[t]})}),[e,r]),a}function tg(e,t,n){return eg(t,e||(()=>({})),(()=>n.reconnect()))}function ng(e,t){const n=[...t||[]];return null==t&&"function"!==typeof e&&n.push(e),(0,i.useMemo)((()=>"function"===typeof e?e():e),n)}function ig(e){return(0,i.useMemo)((()=>e.hooks.dropTarget()),[e])}function ag(e,t,n,i){let a=n?n.call(i,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;const o=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<r.length;l++){const s=r[l];if(!o(s))return!1;const c=e[s],d=t[s];if(a=n?n.call(i,c,d,s):void 0,!1===a||void 0===a&&c!==d)return!1}return!0}function rg(e){return null!==e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function sg(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,i.isValidElement)(t)){const i=t;return e(i,n),i}const a=t;!function(e){if("string"===typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}(a);return function(e,t){const n=e.ref;return wp("string"!==typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,i.cloneElement)(e,{ref:e=>{lg(n,e),lg(t,e)}}):(0,i.cloneElement)(e,{ref:t})}(a,n?t=>e(t,n):e)}}function og(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const e=sg(i);t[n]=()=>e}})),t}function lg(e,t){"function"===typeof e?e(t):e.current=t}class cg{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ag(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=og({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,rg(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function dg(){const{dragDropManager:e}=(0,i.useContext)(jf);return wp(null!=e,"Expected drag drop context"),e}let ug=!1;class hg{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;wp(!ug,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return ug=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{ug=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class mg{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function pg(e,t,n){const a=dg(),r=function(e,t){const n=(0,i.useMemo)((()=>new mg(e,t)),[t]);return(0,i.useEffect)((()=>{n.spec=e}),[e]),n}(e,t),s=function(e){const{accept:t}=e;return(0,i.useMemo)((()=>(wp(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);Zf((function(){const[e,i]=function(e,t,n){const i=n.getRegistry(),a=i.addTarget(e,t);return[a,()=>i.removeTarget(a)]}(s,r,a);return t.receiveHandlerId(e),n.receiveHandlerId(e),i}),[a,t,r,n,s.map((e=>e.toString())).join("|")])}function fg(e,t){const n=ng(e,t),a=function(){const e=dg();return(0,i.useMemo)((()=>new hg(e)),[e])}(),r=function(e){const t=dg(),n=(0,i.useMemo)((()=>new cg(t.getBackend())),[t]);return Zf((()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget())),[e]),n}(n.options);return pg(n,a,r),[tg(n.collect,a,r),ig(r)]}const gg={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let vg;const bg=new Uint8Array(16);const xg=[];for(let n=0;n<256;++n)xg.push((n+256).toString(16).slice(1));function yg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(xg[e[t+0]]+xg[e[t+1]]+xg[e[t+2]]+xg[e[t+3]]+"-"+xg[e[t+4]]+xg[e[t+5]]+"-"+xg[e[t+6]]+xg[e[t+7]]+"-"+xg[e[t+8]]+xg[e[t+9]]+"-"+xg[e[t+10]]+xg[e[t+11]]+xg[e[t+12]]+xg[e[t+13]]+xg[e[t+14]]+xg[e[t+15]]).toLowerCase()}const wg=function(e,t,n){var i,a,r,s;if(gg.randomUUID&&!t&&!e)return gg.randomUUID();const o=null!==(i=null!==(a=(e=e||{}).random)&&void 0!==a?a:null===(r=(s=e).rng)||void 0===r?void 0:r.call(s))&&void 0!==i?i:function(){if(!vg){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vg=crypto.getRandomValues.bind(crypto)}return vg(bg)}();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)t[n+e]=o[e];return t}return yg(o)},_g=(0,i.createContext)(),kg="text",Ng="number",jg="date",Sg="checkbox",Cg="signature",Eg="image",Ag="table",Tg="barcode",Mg="qr_code",Pg={[kg]:{fontSize:12,fontFamily:"Arial",color:"#000000",backgroundColor:"transparent",border:"none",textAlign:"left",placeholder:"Enter text..."},[Ng]:{fontSize:12,fontFamily:"Arial",color:"#000000",backgroundColor:"transparent",border:"1px solid #ccc",textAlign:"right",placeholder:"0"},[jg]:{fontSize:12,fontFamily:"Arial",color:"#000000",backgroundColor:"transparent",border:"1px solid #ccc",format:"MM/DD/YYYY"},[Sg]:{size:16,color:"#000000",backgroundColor:"transparent",border:"1px solid #000"},[Cg]:{width:200,height:60,border:"1px solid #000",backgroundColor:"transparent"}},Dg={template:{id:null,name:"Untitled Template",description:"",pageSize:"A4",orientation:"portrait",backgroundImage:null,fields:[],metadata:{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:1}},history:[],historyIndex:-1,isDirty:!1};function Rg(e,t){var n,i;switch(t.type){case"LOAD_TEMPLATE":return d(d({},e),{},{template:t.payload,history:[t.payload],historyIndex:0,isDirty:!1});case"IMPORT_TEMPLATE":const a=d(d({},t.payload),{},{id:e.template.id,metadata:d(d({},t.payload.metadata),{},{importedAt:(new Date).toISOString(),originalVersion:(null===(n=t.payload.metadata)||void 0===n?void 0:n.version)||1,version:((null===(i=e.template.metadata)||void 0===i?void 0:i.version)||0)+1})});return d(d({},e),{},{template:a,history:[...e.history.slice(0,e.historyIndex+1),a],historyIndex:e.historyIndex+1,isDirty:!0});case"ADD_FIELD":const r={id:wg(),type:t.payload.type,x:t.payload.x||50,y:t.payload.y||50,width:t.payload.width||100,height:t.payload.height||30,properties:d(d({},Pg[t.payload.type]),t.payload.properties),dataBinding:t.payload.dataBinding||null},s=d(d({},e.template),{},{fields:[...e.template.fields,r],metadata:d(d({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return d(d({},e),{},{template:s,history:[...e.history.slice(0,e.historyIndex+1),s],historyIndex:e.historyIndex+1,isDirty:!0});case"UPDATE_FIELD":const o=d(d({},e.template),{},{fields:e.template.fields.map((e=>e.id===t.payload.id?d(d({},e),t.payload.updates):e)),metadata:d(d({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return d(d({},e),{},{template:o,history:[...e.history.slice(0,e.historyIndex+1),o],historyIndex:e.historyIndex+1,isDirty:!0});case"DELETE_FIELD":const l=d(d({},e.template),{},{fields:e.template.fields.filter((e=>e.id!==t.payload.id)),metadata:d(d({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return d(d({},e),{},{template:l,history:[...e.history.slice(0,e.historyIndex+1),l],historyIndex:e.historyIndex+1,isDirty:!0});case"DUPLICATE_FIELD":const c=e.template.fields.find((e=>e.id===t.payload.id));if(!c)return e;const u=d(d({},c),{},{id:wg(),x:c.x+20,y:c.y+20,properties:d({},c.properties)}),h=d(d({},e.template),{},{fields:[...e.template.fields,u],metadata:d(d({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return d(d({},e),{},{template:h,history:[...e.history.slice(0,e.historyIndex+1),h],historyIndex:e.historyIndex+1,isDirty:!0});case"SET_BACKGROUND_IMAGE":const m=d(d({},e.template),{},{backgroundImage:t.payload,metadata:d(d({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return d(d({},e),{},{template:m,history:[...e.history.slice(0,e.historyIndex+1),m],historyIndex:e.historyIndex+1,isDirty:!0});case"UPDATE_TEMPLATE_NAME":const p=d(d({},e.template),{},{name:t.payload,metadata:d(d({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})});return d(d({},e),{},{template:p,history:[...e.history.slice(0,e.historyIndex+1),p],historyIndex:e.historyIndex+1,isDirty:!0});case"UNDO":return e.historyIndex>0?d(d({},e),{},{template:e.history[e.historyIndex-1],historyIndex:e.historyIndex-1,isDirty:!0}):e;case"REDO":return e.historyIndex<e.history.length-1?d(d({},e),{},{template:e.history[e.historyIndex+1],historyIndex:e.historyIndex+1,isDirty:!0}):e;case"SAVE_TEMPLATE":return d(d({},e),{},{isDirty:!1,template:d(d({},e.template),{},{metadata:d(d({},e.template.metadata),{},{updatedAt:(new Date).toISOString()})})});default:return e}}const Og=e=>{let{children:t}=e;const[n,a]=(0,i.useReducer)(Rg,Dg),r=(0,i.useCallback)((e=>{a({type:"ADD_FIELD",payload:e})}),[]),s=(0,i.useCallback)(((e,t)=>{a({type:"UPDATE_FIELD",payload:{id:e,updates:t}})}),[]),o=(0,i.useCallback)((e=>{a({type:"DELETE_FIELD",payload:{id:e}})}),[]),l=(0,i.useCallback)((e=>{a({type:"DUPLICATE_FIELD",payload:{id:e}})}),[]),c=(0,i.useCallback)((e=>{e&&"string"===typeof e&&(e.startsWith("data:")||e.startsWith("http://")||e.startsWith("https://")||(e="data:application/pdf;base64,".concat(e))),a({type:"SET_BACKGROUND_IMAGE",payload:e})}),[]),u=(0,i.useCallback)((e=>{"string"===typeof e&&e.trim().length>0&&a({type:"UPDATE_TEMPLATE_NAME",payload:e.trim()})}),[]),h=(0,i.useCallback)((()=>{a({type:"UNDO"})}),[]),m=(0,i.useCallback)((()=>{a({type:"REDO"})}),[]),p=(0,i.useCallback)((e=>{const t=d(d({},n.template),{},{metadata:d(d({},n.template.metadata),{},{updatedAt:(new Date).toISOString()})});return t.backgroundImage&&"string"===typeof t.backgroundImage&&(t.backgroundImage.startsWith("data:")||t.backgroundImage.startsWith("http://")||t.backgroundImage.startsWith("https://")||(t.backgroundImage="data:application/pdf;base64,".concat(t.backgroundImage))),Array.isArray(t.fields)||(t.fields=[]),e&&e(t),a({type:"SAVE_TEMPLATE"}),t}),[n.template]),f=(0,i.useCallback)((e=>{e&&(e.backgroundImage&&"string"===typeof e.backgroundImage&&(e.backgroundImage.startsWith("data:")||e.backgroundImage.startsWith("http://")||e.backgroundImage.startsWith("https://")||(e.backgroundImage="data:application/pdf;base64,".concat(e.backgroundImage))),Array.isArray(e.fields)||(e.fields=[])),a({type:"LOAD_TEMPLATE",payload:e})}),[]),g=(0,i.useCallback)((e=>{a({type:"IMPORT_TEMPLATE",payload:e})}),[]),v={template:n.template,isDirty:n.isDirty,canUndo:n.historyIndex>0,canRedo:n.historyIndex<n.history.length-1,addField:r,updateField:s,deleteField:o,duplicateField:l,setBackgroundImage:c,updateTemplateName:u,undo:h,redo:m,saveTemplate:p,loadTemplate:f,importTemplate:g};return(0,$o.jsx)(_g.Provider,{value:v,children:t})},Lg=()=>{const e=(0,i.useContext)(_g);if(!e)throw new Error("useTemplate must be used within a TemplateProvider");return e};function Ig(e){return(0,i.useMemo)((()=>e.hooks.dragSource()),[e])}function Fg(e){return(0,i.useMemo)((()=>e.hooks.dragPreview()),[e])}class zg{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(t?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ag(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ag(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=og({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,rg(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,rg(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}let qg=!1,Wg=!1;class Bg{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){wp(!qg,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return qg=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{qg=!1}}isDragging(){if(!this.sourceId)return!1;wp(!Wg,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Wg=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Wg=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class Ug{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return n="object"===typeof e.item?e.item:"function"===typeof e.item?e.item(t):{},null!==n&&void 0!==n?n:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"===typeof e.canDrag?e.canDrag:"function"!==typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const n=this.spec,i=this.monitor,{isDragging:a}=n;return a?a(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:i}=e;i&&i(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function Vg(e,t,n){const a=dg(),r=function(e,t,n){const a=(0,i.useMemo)((()=>new Ug(e,t,n)),[t,n]);return(0,i.useEffect)((()=>{a.spec=e}),[e]),a}(e,t,n),s=function(e){return(0,i.useMemo)((()=>{const t=e.type;return wp(null!=t,"spec.type must be defined"),t}),[e])}(e);Zf((function(){if(null!=s){const[e,i]=function(e,t,n){const i=n.getRegistry(),a=i.addSource(e,t);return[a,()=>i.removeSource(a)]}(s,r,a);return t.receiveHandlerId(e),n.receiveHandlerId(e),i}}),[a,t,n,r,s])}function Hg(e,t){const n=ng(e,t);wp(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const a=function(){const e=dg();return(0,i.useMemo)((()=>new Bg(e)),[e])}(),r=function(e,t){const n=dg(),a=(0,i.useMemo)((()=>new zg(n.getBackend())),[n]);return Zf((()=>(a.dragSourceOptions=e||null,a.reconnect(),()=>a.disconnectDragSource())),[a,e]),Zf((()=>(a.dragPreviewOptions=t||null,a.reconnect(),()=>a.disconnectDragPreview())),[a,t]),a}(n.options,n.previewOptions);return Vg(n,a,r),[tg(n.collect,a,r),Ig(r),Fg(r)]}const Gg=e=>{let{field:t,isSelected:n,onSelect:a,onMove:r,onResize:s,onDragStart:o,onDragEnd:l}=e;const c=(0,i.useRef)(null),[d,u]=(0,i.useState)(!1),[h,m]=(0,i.useState)(null),[{isDragging:p},f]=Hg({type:"FIELD_MOVE",item:()=>({id:t.id,type:"field"}),collect:e=>({isDragging:e.isDragging()}),end:()=>{null===l||void 0===l||l()}});i.useEffect((()=>{p&&(null===o||void 0===o||o())}),[p,o]);const g=(0,i.useCallback)((e=>{if(e.target.classList.contains("resize-handle"))return;e.preventDefault(),e.stopPropagation(),a();const n=e.clientX,i=e.clientY,s=t.x,o=t.y;let c=!1;const d=e=>{const a=e.clientX-n,l=e.clientY-i;if(Math.abs(a)>1||Math.abs(l)>1){c=!0;const e=s+a,n=o+l;r(t.id,e,n,!0)}},u=()=>{c&&(null===l||void 0===l||l()),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)}),[t.id,t.x,t.y,a,r,l]),v=(0,i.useCallback)(((e,n)=>{e.preventDefault(),e.stopPropagation(),u(!0),m(n);const i=e.clientX,a=e.clientY,r=t.width,o=t.height,l=t.x,c=t.y,d=e=>{const d=e.clientX-i,u=e.clientY-a;let h=r,m=o,p=l,f=c;switch(n){case"se":h=r+d,m=o+u;break;case"sw":h=r-d,m=o+u,p=l+d;break;case"ne":h=r+d,m=o-u,f=c+u;break;case"nw":h=r-d,m=o-u,p=l+d,f=c+u;break;case"e":h=r+d;break;case"w":h=r-d,p=l+d;break;case"n":m=o-u,f=c+u;break;case"s":m=o+u}s(t.id,Math.max(20,h),Math.max(20,m),p,f)},h=()=>{u(!1),m(null),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",h)}),[t.id,t.width,t.height,t.x,t.y,s]);return f(c),(0,$o.jsxs)("div",{ref:c,className:"field-component ".concat(n?"selected":""," ").concat(p?"dragging":""),style:{position:"absolute",left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),cursor:d?"nw-resize":"move"},onMouseDown:g,onClick:e=>{e.stopPropagation(),d||a()},children:[(0,$o.jsx)("div",{className:"field-content",children:(()=>{const{properties:e}=t;switch(t.type){case kg:return(0,$o.jsx)("input",{type:"text",placeholder:e.placeholder||"Text field",style:{fontSize:"".concat(e.fontSize,"px"),fontFamily:e.fontFamily,color:e.color,backgroundColor:e.backgroundColor,border:e.border,textAlign:e.textAlign,width:"100%",height:"100%",padding:"2px 4px",outline:"none"},readOnly:!0});case Ng:return(0,$o.jsx)("input",{type:"number",placeholder:e.placeholder||"0",style:{fontSize:"".concat(e.fontSize,"px"),fontFamily:e.fontFamily,color:e.color,backgroundColor:e.backgroundColor,border:e.border,textAlign:e.textAlign,width:"100%",height:"100%",padding:"2px 4px",outline:"none"},readOnly:!0});case jg:return(0,$o.jsx)("input",{type:"date",style:{fontSize:"".concat(e.fontSize,"px"),fontFamily:e.fontFamily,color:e.color,backgroundColor:e.backgroundColor,border:e.border,width:"100%",height:"100%",padding:"2px 4px",outline:"none"},readOnly:!0});case Sg:return(0,$o.jsx)("input",{type:"checkbox",style:{width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),margin:"auto"},readOnly:!0});case Cg:return(0,$o.jsx)("div",{style:{width:"100%",height:"100%",border:e.border,backgroundColor:e.backgroundColor,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:"Signature"});case Eg:return(0,$o.jsx)("div",{style:{width:"100%",height:"100%",border:"1px dashed #ccc",backgroundColor:"#f9f9f9",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:"Image"});default:return(0,$o.jsx)("div",{style:{width:"100%",height:"100%",border:"1px solid #ccc",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:t.type})}})()}),t.dataBinding&&(0,$o.jsx)("div",{className:"data-binding-indicator",title:"Bound to: ".concat(t.dataBinding),children:t.dataBinding}),n&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)("div",{className:"resize-handle nw",onMouseDown:e=>v(e,"nw")}),(0,$o.jsx)("div",{className:"resize-handle ne",onMouseDown:e=>v(e,"ne")}),(0,$o.jsx)("div",{className:"resize-handle sw",onMouseDown:e=>v(e,"sw")}),(0,$o.jsx)("div",{className:"resize-handle se",onMouseDown:e=>v(e,"se")}),(0,$o.jsx)("div",{className:"resize-handle n",onMouseDown:e=>v(e,"n")}),(0,$o.jsx)("div",{className:"resize-handle s",onMouseDown:e=>v(e,"s")}),(0,$o.jsx)("div",{className:"resize-handle w",onMouseDown:e=>v(e,"w")}),(0,$o.jsx)("div",{className:"resize-handle e",onMouseDown:e=>v(e,"e")})]})]})},Qg=e=>{let{guides:t}=e;return t&&0!==t.length?(0,$o.jsx)("div",{className:"alignment-guides",children:t.map(((e,t)=>(0,$o.jsx)("div",{className:"alignment-guide ".concat(e.type),style:{["vertical"===e.type?"left":"top"]:"".concat(e.position,"px"),["vertical"===e.type?"top":"left"]:"".concat(e.start,"px"),["vertical"===e.type?"height":"width"]:"".concat(e.end-e.start,"px")}},t)))}):null},Yg=(0,i.forwardRef)(((e,t)=>{let{width:n,height:a,zoom:r,showGrid:s,snapToGrid:o,selectedField:l,onFieldSelect:c,onClick:u}=e;const{template:h,addField:m,updateField:p}=Lg(),[f,g]=(0,i.useState)(null),[v,b]=(0,i.useState)([]),x=(0,i.useRef)(null),y=(0,i.useCallback)((e=>o?10*Math.round(e/10):e),[o]),w=(0,i.useCallback)(((e,t)=>{const n=[];return t.forEach((t=>{t.id!==e.id&&(Math.abs(t.x-e.x)<5&&n.push({type:"vertical",position:t.x,start:Math.min(t.y,e.y),end:Math.max(t.y+t.height,e.y+e.height)}),Math.abs(t.x+t.width-(e.x+e.width))<5&&n.push({type:"vertical",position:t.x+t.width,start:Math.min(t.y,e.y),end:Math.max(t.y+t.height,e.y+e.height)}),Math.abs(t.y-e.y)<5&&n.push({type:"horizontal",position:t.y,start:Math.min(t.x,e.x),end:Math.max(t.x+t.width,e.x+e.width)}),Math.abs(t.y+t.height-(e.y+e.height))<5&&n.push({type:"horizontal",position:t.y+t.height,start:Math.min(t.x,e.x),end:Math.max(t.x+t.width,e.x+e.width)}))})),n}),[]),[{isOver:_},k]=fg((()=>({accept:"FIELD_TYPE",drop:(e,t)=>{const i=t.getClientOffset(),s=x.current.getBoundingClientRect(),o=y((i.x-s.left)/r),l=y((i.y-s.top)/r);m({type:e.fieldType,x:Math.max(0,Math.min(o,n-100)),y:Math.max(0,Math.min(l,a-30)),width:e.defaultWidth||100,height:e.defaultHeight||30,properties:e.defaultProperties||{}})},collect:e=>({isOver:e.isOver()})})),[y,r,n,a,m]),N=(0,i.useCallback)((function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=h.fields.find((t=>t.id===e));if(!s)return;let o,l;r?(o=y(Math.max(0,Math.min(t,n-s.width))),l=y(Math.max(0,Math.min(i,a-s.height)))):(o=y(Math.max(0,Math.min(s.x+t,n-s.width))),l=y(Math.max(0,Math.min(s.y+i,a-s.height))));const c=d(d({},s),{},{x:o,y:l}),u=w(c,h.fields);b(u),p(e,{x:o,y:l})}),[h.fields,n,a,y,w,p]),j=(0,i.useCallback)(((e,t,i,r,s)=>{const o=h.fields.find((t=>t.id===e));if(!o)return;const l={};void 0!==r&&void 0!==s&&(l.x=y(Math.max(0,Math.min(r,n-t))),l.y=y(Math.max(0,Math.min(s,a-i)))),l.width=y(Math.max(20,Math.min(t,n-(l.x||o.x)))),l.height=y(Math.max(20,Math.min(i,a-(l.y||o.y)))),p(e,l)}),[n,a,y,p,h.fields]);return(0,i.useEffect)((()=>{f||b([])}),[f]),(0,i.useEffect)((()=>{}),[h.backgroundImage,n,a]),(0,i.useEffect)((()=>{t&&(t.current=x.current)}),[t]),k(x),(0,$o.jsx)("div",{className:"template-canvas-container",style:{transform:"scale(".concat(r,")"),transformOrigin:"top left"},children:(0,$o.jsxs)("div",{ref:x,className:"template-canvas ".concat(_?"drop-target":""),style:{width:"".concat(n,"px"),height:"".concat(a,"px"),backgroundImage:h.backgroundImage?"url(".concat(h.backgroundImage,")"):"none",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:h.backgroundImage?"transparent":"white"},onClick:u,children:[s&&(0,$o.jsx)("div",{className:"grid-overlay",style:{backgroundImage:"\n                linear-gradient(to right, #e0e0e0 1px, transparent 1px),\n                linear-gradient(to bottom, #e0e0e0 1px, transparent 1px)\n              ",backgroundSize:"".concat(10,"px ").concat(10,"px")}}),(0,$o.jsx)(Qg,{guides:v}),(h.fields||[]).map((e=>(0,$o.jsx)(Gg,{field:e,isSelected:(null===l||void 0===l?void 0:l.id)===e.id,onSelect:()=>c(e),onMove:N,onResize:j,onDragStart:()=>g(e),onDragEnd:()=>g(null)},e.id))),_&&(0,$o.jsx)("div",{className:"drop-indicator",children:"Drop field here"})]})})}));Yg.displayName="TemplateCanvas";const Kg=Yg,Xg=Gc("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),Jg=Gc("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),$g=Gc("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Zg=Gc("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),ev=Gc("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),tv=Gc("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),nv=Gc("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),iv={[kg]:{label:"Text Field",icon:Xg,description:"Single or multi-line text input",defaultWidth:150,defaultHeight:30,category:"basic"},[Ng]:{label:"Number Field",icon:Jg,description:"Numeric input with validation",defaultWidth:100,defaultHeight:30,category:"basic"},[jg]:{label:"Date Field",icon:Nd,description:"Date picker with formatting",defaultWidth:120,defaultHeight:30,category:"basic"},[Sg]:{label:"Checkbox",icon:$g,description:"Boolean checkbox input",defaultWidth:20,defaultHeight:20,category:"basic"},[Cg]:{label:"Signature",icon:Zg,description:"Digital signature capture",defaultWidth:200,defaultHeight:60,category:"advanced"},[Eg]:{label:"Image",icon:Nh,description:"Image placeholder or upload",defaultWidth:100,defaultHeight:100,category:"advanced"},[Ag]:{label:"Table",icon:ev,description:"Dynamic data table",defaultWidth:300,defaultHeight:150,category:"advanced"},[Mg]:{label:"QR Code",icon:tv,description:"QR code generator",defaultWidth:80,defaultHeight:80,category:"advanced"},[Tg]:{label:"Barcode",icon:id,description:"Barcode generator",defaultWidth:150,defaultHeight:40,category:"advanced"}},av=e=>{let{fieldType:t,definition:n}=e;const[{isDragging:i},a]=Hg({type:"FIELD_TYPE",item:()=>({fieldType:t,defaultWidth:n.defaultWidth,defaultHeight:n.defaultHeight,defaultProperties:n.defaultProperties||{}}),collect:e=>({isDragging:e.isDragging()})}),r=n.icon;return(0,$o.jsxs)("div",{ref:a,className:"field-item ".concat(i?"dragging":""),title:n.description,children:[(0,$o.jsx)("div",{className:"field-icon",children:(0,$o.jsx)(r,{size:18})}),(0,$o.jsxs)("div",{className:"field-info",children:[(0,$o.jsx)("div",{className:"field-label",children:n.label}),(0,$o.jsx)("div",{className:"field-description",children:n.description})]})]})},rv=e=>{let{dataSource:t}=e;const[n,a]=(0,i.useState)(!1);return t&&t.fields?(0,$o.jsxs)("div",{className:"toolbox-section",children:[(0,$o.jsxs)("div",{className:"section-header clickable",onClick:()=>a(!n),children:[n?(0,$o.jsx)(Xc,{size:16}):(0,$o.jsx)(Sd,{size:16}),(0,$o.jsx)(nv,{size:16}),(0,$o.jsx)("span",{children:"Data Fields"})]}),n&&(0,$o.jsxs)("div",{className:"section-content",children:[(0,$o.jsx)("div",{className:"data-fields-hint",children:"Drag these fields to automatically bind to your data source"}),t.fields.map((e=>(0,$o.jsx)(av,{fieldType:e.type||kg,definition:{label:e.label||e.name,icon:sv(e.type),description:"Auto-bind to ".concat(e.name),defaultWidth:ov(e.type),defaultHeight:lv(e.type),defaultProperties:{dataBinding:e.name,placeholder:e.placeholder||e.label}}},"data-".concat(e.name))))]})]}):null},sv=e=>{switch(e){case"number":return Jg;case"date":return Nd;case"boolean":return $g;case"image":return Nh;default:return Xg}},ov=e=>{switch(e){case"number":case"image":return 100;case"date":return 120;case"boolean":return 20;default:return 150}},lv=e=>{switch(e){case"boolean":return 20;case"image":return 100;default:return 30}},cv=e=>{let{dataSource:t}=e;const[n,a]=(0,i.useState)({basic:!0,advanced:!1}),r=e=>{a((t=>d(d({},t),{},{[e]:!t[e]})))},s=Object.entries(iv).filter((e=>{let[t,n]=e;return"basic"===n.category})),o=Object.entries(iv).filter((e=>{let[t,n]=e;return"advanced"===n.category}));return(0,$o.jsxs)("div",{className:"field-toolbox",children:[(0,$o.jsxs)("div",{className:"toolbox-header",children:[(0,$o.jsx)("h3",{children:"Field Toolbox"}),(0,$o.jsx)("p",{children:"Drag fields onto the canvas"})]}),(0,$o.jsx)(rv,{dataSource:t}),(0,$o.jsxs)("div",{className:"toolbox-section",children:[(0,$o.jsxs)("div",{className:"section-header clickable",onClick:()=>r("basic"),children:[n.basic?(0,$o.jsx)(Xc,{size:16}):(0,$o.jsx)(Sd,{size:16}),(0,$o.jsx)("span",{children:"Basic Fields"})]}),n.basic&&(0,$o.jsx)("div",{className:"section-content",children:s.map((e=>{let[t,n]=e;return(0,$o.jsx)(av,{fieldType:t,definition:n},t)}))})]}),(0,$o.jsxs)("div",{className:"toolbox-section",children:[(0,$o.jsxs)("div",{className:"section-header clickable",onClick:()=>r("advanced"),children:[n.advanced?(0,$o.jsx)(Xc,{size:16}):(0,$o.jsx)(Sd,{size:16}),(0,$o.jsx)("span",{children:"Advanced Fields"})]}),n.advanced&&(0,$o.jsx)("div",{className:"section-content",children:o.map((e=>{let[t,n]=e;return(0,$o.jsx)(av,{fieldType:t,definition:n},t)}))})]}),(0,$o.jsxs)("div",{className:"toolbox-tips",children:[(0,$o.jsx)("h4",{children:"Tips:"}),(0,$o.jsxs)("ul",{children:[(0,$o.jsx)("li",{children:"Drag fields from here to the canvas"}),(0,$o.jsx)("li",{children:"Use grid snap for perfect alignment"}),(0,$o.jsx)("li",{children:"Select fields to edit properties"}),(0,$o.jsx)("li",{children:"Import PDF as background template"})]})]})]})},dv=Gc("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),uv=e=>{let{selectedField:t,onFieldUpdate:n}=e;const{updateField:i,deleteField:a,duplicateField:r}=Lg();if(!t)return(0,$o.jsxs)("div",{className:"property-panel",children:[(0,$o.jsx)("div",{className:"panel-header",children:(0,$o.jsx)("h3",{children:"Properties"})}),(0,$o.jsx)("div",{className:"no-selection",children:(0,$o.jsx)("p",{children:"Select a field to edit its properties"})})]});const s=(e,n)=>{i(t.id,{properties:d(d({},t.properties),{},{[e]:n})})},o=(e,n)=>{i(t.id,{[e]:parseFloat(n)||0})};return(0,$o.jsxs)("div",{className:"property-panel",children:[(0,$o.jsxs)("div",{className:"panel-header",children:[(0,$o.jsx)("h3",{children:"Properties"}),(0,$o.jsxs)("div",{className:"field-actions",children:[(0,$o.jsx)("button",{className:"action-btn",onClick:()=>{r(t.id)},title:"Duplicate Field",children:(0,$o.jsx)(dv,{size:14})}),(0,$o.jsx)("button",{className:"action-btn delete",onClick:()=>{window.confirm("Are you sure you want to delete this field?")&&(a(t.id),n&&n(null))},title:"Delete Field",children:(0,$o.jsx)(md,{size:14})})]})]}),(0,$o.jsxs)("div",{className:"panel-content",children:[(0,$o.jsxs)("div",{className:"property-section",children:[(0,$o.jsx)("h4",{children:"Field Info"}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Field Type"}),(0,$o.jsx)("input",{type:"text",value:t.type,readOnly:!0,className:"readonly"})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Field ID"}),(0,$o.jsx)("input",{type:"text",value:t.id,readOnly:!0,className:"readonly"})]})]}),(0,$o.jsxs)("div",{className:"property-section",children:[(0,$o.jsx)("h4",{children:"Position & Size"}),(0,$o.jsxs)("div",{className:"property-row",children:[(0,$o.jsxs)("div",{className:"property-group half",children:[(0,$o.jsx)("label",{children:"X Position"}),(0,$o.jsx)("input",{type:"number",value:t.x,onChange:e=>o("x",e.target.value),step:"1"})]}),(0,$o.jsxs)("div",{className:"property-group half",children:[(0,$o.jsx)("label",{children:"Y Position"}),(0,$o.jsx)("input",{type:"number",value:t.y,onChange:e=>o("y",e.target.value),step:"1"})]})]}),(0,$o.jsxs)("div",{className:"property-row",children:[(0,$o.jsxs)("div",{className:"property-group half",children:[(0,$o.jsx)("label",{children:"Width"}),(0,$o.jsx)("input",{type:"number",value:t.width,onChange:e=>o("width",e.target.value),min:"10",step:"1"})]}),(0,$o.jsxs)("div",{className:"property-group half",children:[(0,$o.jsx)("label",{children:"Height"}),(0,$o.jsx)("input",{type:"number",value:t.height,onChange:e=>o("height",e.target.value),min:"10",step:"1"})]})]})]}),(0,$o.jsxs)("div",{className:"property-section",children:[(0,$o.jsx)("h4",{children:"Appearance"}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Background Color"}),(0,$o.jsxs)("div",{className:"color-input",children:[(0,$o.jsx)("input",{type:"color",value:"transparent"!==t.properties.backgroundColor&&t.properties.backgroundColor?t.properties.backgroundColor:"#ffffff",onChange:e=>s("backgroundColor",e.target.value)}),(0,$o.jsx)("input",{type:"text",value:t.properties.backgroundColor||"transparent",onChange:e=>s("backgroundColor",e.target.value),placeholder:"transparent"})]})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Text Color"}),(0,$o.jsxs)("div",{className:"color-input",children:[(0,$o.jsx)("input",{type:"color",value:t.properties.color||"#000000",onChange:e=>s("color",e.target.value)}),(0,$o.jsx)("input",{type:"text",value:t.properties.color||"#000000",onChange:e=>s("color",e.target.value)})]})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Border"}),(0,$o.jsx)("input",{type:"text",value:t.properties.border||"none",onChange:e=>s("border",e.target.value),placeholder:"1px solid #000"})]})]}),(0,$o.jsxs)("div",{className:"property-section",children:[(0,$o.jsx)("h4",{children:"Data Binding"}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Data Source"}),(0,$o.jsx)("input",{type:"text",value:t.dataBinding||"",onChange:e=>i(t.id,{dataBinding:e.target.value}),placeholder:"e.g., user.firstName"})]})]}),(0,$o.jsxs)("div",{className:"property-section",children:[(0,$o.jsx)("h4",{children:"Field Properties"}),(()=>{const{properties:e}=t;switch(t.type){case kg:return(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Font Size"}),(0,$o.jsx)("input",{type:"number",value:e.fontSize||12,onChange:e=>s("fontSize",parseInt(e.target.value)),min:"8",max:"72"})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Font Family"}),(0,$o.jsxs)("select",{value:e.fontFamily||"Arial",onChange:e=>s("fontFamily",e.target.value),children:[(0,$o.jsx)("option",{value:"Arial",children:"Arial"}),(0,$o.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,$o.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,$o.jsx)("option",{value:"Courier New",children:"Courier New"})]})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Text Align"}),(0,$o.jsxs)("select",{value:e.textAlign||"left",onChange:e=>s("textAlign",e.target.value),children:[(0,$o.jsx)("option",{value:"left",children:"Left"}),(0,$o.jsx)("option",{value:"center",children:"Center"}),(0,$o.jsx)("option",{value:"right",children:"Right"})]})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Placeholder"}),(0,$o.jsx)("input",{type:"text",value:e.placeholder||"",onChange:e=>s("placeholder",e.target.value),placeholder:"Enter placeholder text"})]})]});case Ng:return(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Font Size"}),(0,$o.jsx)("input",{type:"number",value:e.fontSize||12,onChange:e=>s("fontSize",parseInt(e.target.value)),min:"8",max:"72"})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Decimal Places"}),(0,$o.jsx)("input",{type:"number",value:e.decimalPlaces||0,onChange:e=>s("decimalPlaces",parseInt(e.target.value)),min:"0",max:"10"})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Min Value"}),(0,$o.jsx)("input",{type:"number",value:e.min||"",onChange:e=>s("min",e.target.value),placeholder:"No minimum"})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Max Value"}),(0,$o.jsx)("input",{type:"number",value:e.max||"",onChange:e=>s("max",e.target.value),placeholder:"No maximum"})]})]});case jg:return(0,$o.jsx)($o.Fragment,{children:(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Date Format"}),(0,$o.jsxs)("select",{value:e.format||"MM/DD/YYYY",onChange:e=>s("format",e.target.value),children:[(0,$o.jsx)("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),(0,$o.jsx)("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),(0,$o.jsx)("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"}),(0,$o.jsx)("option",{value:"DD MMM YYYY",children:"DD MMM YYYY"})]})]})});case Sg:return(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Size"}),(0,$o.jsx)("input",{type:"number",value:e.size||16,onChange:e=>s("size",parseInt(e.target.value)),min:"10",max:"50"})]}),(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Default Checked"}),(0,$o.jsx)("input",{type:"checkbox",checked:e.defaultChecked||!1,onChange:e=>s("defaultChecked",e.target.checked)})]})]});case Cg:return(0,$o.jsx)($o.Fragment,{children:(0,$o.jsxs)("div",{className:"property-group",children:[(0,$o.jsx)("label",{children:"Signature Type"}),(0,$o.jsxs)("select",{value:e.signatureType||"draw",onChange:e=>s("signatureType",e.target.value),children:[(0,$o.jsx)("option",{value:"draw",children:"Draw"}),(0,$o.jsx)("option",{value:"type",children:"Type"}),(0,$o.jsx)("option",{value:"upload",children:"Upload"})]})]})});default:return null}})()]})]})]})},hv=Gc("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),mv=Gc("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),pv=Gc("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),fv=Gc("magnet",[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]]),gv=Gc("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),vv=Gc("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),bv=Gc("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),xv=Gc("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),yv=e=>{let{onSave:t,autoSave:n=!1}=e;const{template:a,updateTemplateName:r,isDirty:s,saveTemplate:o}=Lg(),[l,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(a.name),[m,p]=(0,i.useState)(""),[f,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)(a.name),x=(0,i.useRef)(null),y=(0,Et.useQueryClient)();(0,i.useEffect)((()=>{l||h(a.name)}),[a.name,l]),(0,i.useEffect)((()=>{l&&x.current&&(x.current.focus(),x.current.select())}),[l]);const w=async()=>{const e=u.trim();if(e)if(e.length>100)p("Template name must be less than 100 characters");else if(e!==a.name){b(a.name),g(!0);try{a.id&&await Mo(a.id,e),r(e),c(!1),p(""),y.setQueryData("templates",(t=>t?t.map((t=>t.id===a.id?d(d({},t),{},{name:e,updated_at:(new Date).toISOString()}):t)):t)),y.invalidateQueries("templates"),Vn.success("Template name updated successfully!")}catch(m){var t,n;r(v),y.setQueryData("templates",(e=>e?e.map((e=>e.id===a.id?d(d({},e),{},{name:v}):e)):e));const i=(null===(t=m.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to update template name";Vn.error(i),p(i),c(!0)}finally{g(!1)}}else c(!1);else p("Template name cannot be empty")},_=()=>{h(a.name),c(!1),p("")},k=e=>{"Enter"===e.key?(e.preventDefault(),w()):"Escape"===e.key&&(e.preventDefault(),_())},N=e=>{h(e.target.value),m&&p("")};return l?(0,$o.jsxs)("div",{className:"editable-template-name editing",children:[(0,$o.jsxs)("div",{className:"edit-container",children:[(0,$o.jsx)("input",{ref:x,type:"text",value:u,onChange:N,onKeyDown:k,className:"name-input ".concat(m?"error":""),placeholder:"Enter template name...",maxLength:100}),(0,$o.jsxs)("div",{className:"edit-actions",children:[(0,$o.jsx)("button",{className:"edit-btn save-btn",onClick:w,title:"Save name",disabled:!u.trim(),children:(0,$o.jsx)(Qm,{size:14})}),(0,$o.jsx)("button",{className:"edit-btn cancel-btn",onClick:_,title:"Cancel editing",children:(0,$o.jsx)(fd,{size:14})})]})]}),m&&(0,$o.jsx)("div",{className:"error-message",children:m}),(0,$o.jsx)("div",{className:"edit-hint",children:"Press Enter to save, Escape to cancel"})]}):(0,$o.jsxs)("div",{className:"editable-template-name",children:[(0,$o.jsxs)("h2",{className:"template-name",onClick:()=>{c(!0),h(a.name),p("")},title:"Click to edit template name",children:[a.name,s&&(0,$o.jsx)("span",{className:"dirty-indicator",title:"Template has unsaved changes",children:"*"}),f?(0,$o.jsx)(cd,{size:14,className:"edit-icon saving-icon"}):(0,$o.jsx)(xv,{size:14,className:"edit-icon"})]}),f&&(0,$o.jsxs)("div",{className:"saving-notice",children:[(0,$o.jsx)(cd,{size:12,className:"saving-spinner"}),(0,$o.jsx)("span",{children:"Saving template name..."})]}),s&&!f&&(0,$o.jsxs)("div",{className:"unsaved-notice",children:[(0,$o.jsx)("span",{children:"Unsaved changes"}),t&&(0,$o.jsxs)("button",{className:"quick-save-btn",onClick:()=>t(o()),title:"Save template now",disabled:f,children:[(0,$o.jsx)(Dd,{size:12}),"Save now"]})]})]})};function wv(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(a){t[i]=a,e.apply(n,t)}})}function _v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kv(e,t){_v(e,t),t.add(e)}function Nv(e,t,n){_v(e,t),t.set(e,n)}function jv(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Sv(e,t,n){return n(jv(e,t))}function Cv(e,t){return e.get(jv(e,t))}function Ev(e,t,n){return e.set(jv(e,t),n),n}var Av,Tv,Mv,Pv,Dv,Rv,Ov,Lv,Iv,Fv,zv,qv,Wv,Bv,Uv;const Vv="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Hv=[.001,0,0,.001,0,0],Gv=1.35,Qv=1,Yv=2,Kv=4,Xv=16,Jv=32,$v=64,Zv=128,eb=256,tb={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},nb={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ib={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},ab=0,rb=1,sb=2,ob=3,lb=3,cb=4,db={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ub={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},hb=1,mb=2,pb=3,fb=4,gb=5,vb={ERRORS:0,WARNINGS:1,INFOS:5},bb={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},xb=0,yb=1,wb=2,_b=3;let kb=vb.WARNINGS;function Nb(e){Number.isInteger(e)&&(kb=e)}function jb(){return kb}function Sb(e){kb>=vb.INFOS&&console.log("Info: ".concat(e))}function Cb(e){kb>=vb.WARNINGS&&console.log("Warning: ".concat(e))}function Eb(e){throw new Error(e)}function Ab(e,t){e||Eb(t)}function Tb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(a){}}const i=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function Mb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(e);return i?(i.hash=t,i.href):n&&Tb(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function Pb(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const Db=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class Rb extends Db{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ob extends Db{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Lb extends Db{constructor(e){super(e,"InvalidPDFException")}}class Ib extends Db{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class Fb extends Db{constructor(e){super(e,"FormatError")}}class zb extends Db{constructor(e){super(e,"AbortException")}}function qb(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||Eb("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let a=0;a<t;a+=n){const r=Math.min(a+n,t),s=e.subarray(a,r);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function Wb(e){"string"!==typeof e&&Eb("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}class Bb{static get isLittleEndian(){return Pb(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return Pb(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return Pb(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return Pb(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return Pb(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Pb(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ub=Array.from(Array(256).keys(),(e=>e.toString(16).padStart(2,"0")));class Vb{static makeHexColor(e,t,n){return"#".concat(Ub[e]).concat(Ub[t]).concat(Ub[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[n],a=e[n+1];e[n]=i*t[0]+a*t[2]+t[4],e[n+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[0],a=t[1],r=t[2],s=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],d=e[n+c+1];e[n+c]=t*i+d*r+o,e[n+c+1]=t*a+d*s+l}}static applyInverseTransform(e,t){const n=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,n){const i=t[0],a=t[1],r=t[2],s=t[3],o=t[4],l=t[5],c=e[0],d=e[1],u=e[2],h=e[3];let m=i*c+o,p=m,f=i*u+o,g=f,v=s*d+l,b=v,x=s*h+l,y=x;if(0!==a||0!==r){const e=a*c,t=a*u,n=r*d,i=r*h;m+=n,g+=n,f+=i,p+=i,v+=e,y+=e,x+=t,b+=t}n[0]=Math.min(n[0],m,f,p,g),n[1]=Math.min(n[1],v,x,b,y),n[2]=Math.max(n[2],m,f,p,g),n[3]=Math.max(n[3],v,x,b,y)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],a=e[2],r=e[3],s=n**2+i**2,o=n*a+i*r,l=a**2+r**2,c=(s+l)/2,d=Math.sqrt(c**2-(s*l-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>r?null:[n,a,i,r]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],t,i)}static bezierBoundingBox(e,t,n,i,a,r,s,o,l){l[0]=Math.min(l[0],e,s),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,s),l[3]=Math.max(l[3],t,o),jv(Vb,this,Gb).call(this,e,n,a,s,t,i,r,o,3*(3*(n-a)-e+s),6*(e-2*n+a),3*(n-e),l),jv(Vb,this,Gb).call(this,e,n,a,s,t,i,r,o,3*(3*(i-r)-t+o),6*(t-2*i+r),3*(i-t),l)}}function Hb(e,t,n,i,a,r,s,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,m=d*(d*(d*e+3*l*t)+3*u*n)+h*i,p=d*(d*(d*a+3*l*r)+3*u*s)+h*o;c[0]=Math.min(c[0],m),c[1]=Math.min(c[1],p),c[2]=Math.max(c[2],m),c[3]=Math.max(c[3],p)}function Gb(e,t,n,i,a,r,s,o,l,c,d,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&jv(Av,this,Hb).call(this,e,t,n,i,a,r,s,o,-d/c,u));const h=c**2-4*d*l;if(h<0)return;const m=Math.sqrt(h),p=2*l;jv(Av,this,Hb).call(this,e,t,n,i,a,r,s,o,(-c+m)/p,u),jv(Av,this,Hb).call(this,e,t,n,i,a,r,s,o,(-c-m)/p,u)}Av=Vb;let Qb=null,Yb=null;function Kb(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),qb(e)}const Xb="pdfjs_internal_id_";function Jb(e,t,n){return Math.min(Math.max(e,t),n)}function $b(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(qb(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise((t=>{t(e(...n))}))}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce(((e,t)=>e+t),0)});const Zb="http://www.w3.org/2000/svg";class ex{}async function tx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(ox(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise(((n,i)=>{const a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE)if(200!==a.status&&0!==a.status)i(new Error(a.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(a.response)}n(a.responseText)}},a.send(null)}))}Tv=ex,l(ex,"CSS",96),l(ex,"PDF",72),l(ex,"PDF_TO_CSS_UNITS",Tv.CSS/Tv.PDF);class nx{constructor(e){let{viewBox:t,userUnit:n,scale:i,rotation:a,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=a,this.offsetX=r,this.offsetY=s,i*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,u,h,m,p,f,g,v;switch(a%=360,a<0&&(a+=360),a){case 180:d=-1,u=0,h=0,m=1;break;case 90:d=0,u=1,h=1,m=0;break;case 270:d=0,u=-1,h=-1,m=0;break;case 0:d=1,u=0,h=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,m=-m),0===d?(p=Math.abs(c-t[1])*i+r,f=Math.abs(l-t[0])*i+s,g=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(p=Math.abs(l-t[0])*i+r,f=Math.abs(c-t[1])*i+s,g=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[d*i,u*i,h*i,m*i,p-d*i*l-h*i*c,f-u*i*l-m*i*c],this.width=g,this.height=v}get rawDims(){const e=this.viewBox;return Pb(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new nx({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const n=[e,t];return Vb.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Vb.applyTransform(t,this.transform);const n=[e[2],e[3]];return Vb.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Vb.applyInverseTransform(n,this.transform),n}}class ix extends Db{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function ax(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function rx(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class sx{constructor(){l(this,"started",Object.create(null)),l(this,"times",[])}time(e){e in this.started&&Cb("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||Cb("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push("".concat(n.padEnd(t)," ").concat(a-i,"ms\n"));return e.join("")}}function ox(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function lx(e){e.preventDefault()}function cx(e){e.preventDefault(),e.stopPropagation()}class dx{static toDateObject(e){if(!e||"string"!==typeof e)return null;jv(dx,this,ux)._||(ux._=jv(dx,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=jv(dx,this,ux)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(r+=c,s+=d):"+"===l&&(r-=c,s-=d),new Date(Date.UTC(n,i,a,r,s,o))}}var ux={_:void 0};function hx(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):(Cb('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function mx(e){const{a:t,b:n,c:i,d:a,e:r,f:s}=e.getTransform();return[t,n,i,a,r,s]}function px(e){const{a:t,b:n,c:i,d:a,e:r,f:s}=e.getTransform().invertSelf();return[t,n,i,a,r,s]}function fx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof nx){const{pageWidth:i,pageHeight:a}=t.rawDims,{style:r}=e,s=Bb.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(a,"px"),c=s?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),d=s?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(r.width=d,r.height=c):(r.width=c,r.height=d)}i&&e.setAttribute("data-main-rotation",t.rotation)}class gx{constructor(){const{pixelRatio:e}=gx;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=1/0,s=1/0,o=1/0;(n=gx.capPixels(n,a))>0&&(r=Math.sqrt(n/(e*t))),-1!==i&&(s=i/e,o=i/t);const l=Math.min(r,s,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const vx=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var bx=new WeakMap,xx=new WeakMap,yx=new WeakMap,wx=new WeakMap,_x=new WeakMap,kx=new WeakMap,Nx=new WeakSet;class jx{constructor(e){kv(this,Nx),Nv(this,bx,null),Nv(this,xx,null),Nv(this,yx,void 0),Nv(this,wx,null),Nv(this,_x,null),Nv(this,kx,null),Ev(yx,this,e),Px._||(Px._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=Ev(bx,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=Cv(yx,this)._uiManager._signal;e.addEventListener("contextmenu",lx,{signal:t}),e.addEventListener("pointerdown",Sx,{signal:t});const n=Ev(wx,this,document.createElement("div"));n.className="buttons",e.append(n);const i=Cv(yx,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===Cv(yx,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return jv(Nx,this,Tx).call(this),e}get div(){return Cv(bx,this)}hide(){var e;Cv(bx,this).classList.add("hidden"),null===(e=Cv(xx,this))||void 0===e||e.hideDropdown()}show(){var e;Cv(bx,this).classList.remove("hidden"),null===(e=Cv(_x,this))||void 0===e||e.shown()}async addAltText(e){const t=await e.render();jv(Nx,this,Ax).call(this,t),Cv(wx,this).prepend(t,Sv(Nx,this,Mx)),Ev(_x,this,e)}addColorPicker(e){Ev(xx,this,e);const t=e.renderButton();jv(Nx,this,Ax).call(this,t),Cv(wx,this).prepend(t,Sv(Nx,this,Mx))}async addEditSignatureButton(e){const t=Ev(kx,this,await e.renderEditButton(Cv(yx,this)));jv(Nx,this,Ax).call(this,t),Cv(wx,this).prepend(t,Sv(Nx,this,Mx))}updateEditSignatureButton(e){Cv(kx,this)&&(Cv(kx,this).title=e)}remove(){var e;Cv(bx,this).remove(),null===(e=Cv(xx,this))||void 0===e||e.destroy(),Ev(xx,this,null)}}function Sx(e){e.stopPropagation()}function Cx(e){Cv(yx,this)._focusEventsAllowed=!1,cx(e)}function Ex(e){Cv(yx,this)._focusEventsAllowed=!0,cx(e)}function Ax(e){const t=Cv(yx,this)._uiManager._signal;e.addEventListener("focusin",jv(Nx,this,Cx).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",jv(Nx,this,Ex).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",lx,{signal:t})}function Tx(){const{editorType:e,_uiManager:t}=Cv(yx,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Px._[e]),jv(Nx,this,Ax).call(this,n),n.addEventListener("click",(e=>{t.delete()}),{signal:t._signal}),Cv(wx,this).append(n)}function Mx(e){const t=document.createElement("div");return t.className="divider",t}var Px={_:null},Dx=new WeakMap,Rx=new WeakMap,Ox=new WeakMap,Lx=new WeakSet;class Ix{constructor(e){kv(this,Lx),Nv(this,Dx,null),Nv(this,Rx,null),Nv(this,Ox,void 0),Ev(Ox,this,e)}show(e,t,n){const[i,a]=jv(Lx,this,zx).call(this,t,n),{style:r}=Cv(Rx,this)||Ev(Rx,this,jv(Lx,this,Fx).call(this));e.append(Cv(Rx,this)),r.insetInlineEnd="".concat(100*i,"%"),r.top="calc(".concat(100*a,"% + var(--editor-toolbar-vert-offset))")}hide(){Cv(Rx,this).remove()}}function Fx(){const e=Ev(Rx,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",lx,{signal:Cv(Ox,this)._signal});const t=Ev(Dx,this,document.createElement("div"));return t.className="buttons",e.append(t),jv(Lx,this,qx).call(this),e}function zx(e,t){let n=0,i=0;for(const a of e){const e=a.y+a.height;if(e<n)continue;const r=a.x+(t?a.width:0);e>n?(i=r,n=e):t?r>i&&(i=r):r<i&&(i=r)}return[t?1-i:i,n]}function qx(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=Cv(Ox,this)._signal;e.addEventListener("contextmenu",lx,{signal:n}),e.addEventListener("click",(()=>{Cv(Ox,this).highlightSelection("floating_button")}),{signal:n}),Cv(Dx,this).append(e)}function Wx(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var Bx=new WeakMap;class Ux{constructor(){Nv(this,Bx,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((Ev(Bx,this,(e=Cv(Bx,this),t=e++,e)),t))}}var Vx=new WeakMap,Hx=new WeakMap,Gx=new WeakMap,Qx=new WeakSet;class Yx{constructor(){kv(this,Qx),Nv(this,Vx,Kb()),Nv(this,Hx,0),Nv(this,Gx,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Pb(this,"_isSVGFittingCanvas",t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]))))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return jv(Qx,this,Kx).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(a),e)}async getFromUrl(e){return jv(Qx,this,Kx).call(this,e,e)}async getFromBlob(e,t){const n=await t;return jv(Qx,this,Kx).call(this,e,n)}async getFromId(e){Cv(Gx,this)||Ev(Gx,this,new Map);const t=Cv(Gx,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,a;Cv(Gx,this)||Ev(Gx,this,new Map);let r=Cv(Gx,this).get(e);if(null!==(a=r)&&void 0!==a&&a.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:"image_".concat(Cv(Vx,this),"_").concat((Ev(Hx,this,(n=Cv(Hx,this),i=n++,n)),i)),refCounter:1,isSvg:!1},Cv(Gx,this).set(e,r),Cv(Gx,this).set(r.id,r),r}getSvgUrl(e){const t=Cv(Gx,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;Cv(Gx,this)||Ev(Gx,this,new Map);const n=Cv(Gx,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(Cv(Vx,this),"_"))}}async function Kx(e,t){var n;Cv(Gx,this)||Ev(Gx,this,new Map);let i=Cv(Gx,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var a,r;let e;if(i||(i={bitmap:null,id:"image_".concat(Cv(Vx,this),"_").concat((Ev(Hx,this,(a=Cv(Hx,this),r=a++,a)),r)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await tx(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=Mv._isSVGFittingCanvas,n=new FileReader,a=new Image,r=new Promise(((e,r)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;a.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},a.onerror=n.onerror=r}));n.readAsDataURL(e),await r}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(Tt){Cb(Tt),i=null}return Cv(Gx,this).set(e,i),i&&Cv(Gx,this).set(i.id,i),i}Mv=Yx;var Xx=new WeakMap,Jx=new WeakMap,$x=new WeakMap,Zx=new WeakMap;class ey{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;Nv(this,Xx,[]),Nv(this,Jx,!1),Nv(this,$x,void 0),Nv(this,Zx,-1),Ev($x,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:a,type:r=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}=e;if(a&&t(),Cv(Jx,this))return;const l={cmd:t,undo:n,post:i,type:r};if(-1===Cv(Zx,this))return Cv(Xx,this).length>0&&(Cv(Xx,this).length=0),Ev(Zx,this,0),void Cv(Xx,this).push(l);if(s&&Cv(Xx,this)[Cv(Zx,this)].type===r)return o&&(l.undo=Cv(Xx,this)[Cv(Zx,this)].undo),void(Cv(Xx,this)[Cv(Zx,this)]=l);const c=Cv(Zx,this)+1;c===Cv($x,this)?Cv(Xx,this).splice(0,1):(Ev(Zx,this,c),c<Cv(Xx,this).length&&Cv(Xx,this).splice(c)),Cv(Xx,this).push(l)}undo(){if(-1===Cv(Zx,this))return;Ev(Jx,this,!0);const{undo:e,post:t}=Cv(Xx,this)[Cv(Zx,this)];e(),null===t||void 0===t||t(),Ev(Jx,this,!1),Ev(Zx,this,Cv(Zx,this)-1)}redo(){if(Cv(Zx,this)<Cv(Xx,this).length-1){Ev(Zx,this,Cv(Zx,this)+1),Ev(Jx,this,!0);const{cmd:e,post:t}=Cv(Xx,this)[Cv(Zx,this)];e(),null===t||void 0===t||t(),Ev(Jx,this,!1)}}hasSomethingToUndo(){return-1!==Cv(Zx,this)}hasSomethingToRedo(){return Cv(Zx,this)<Cv(Xx,this).length-1}cleanType(e){if(-1!==Cv(Zx,this)){for(let t=Cv(Zx,this);t>=0;t--)if(Cv(Xx,this)[t].type!==e)return Cv(Xx,this).splice(t+1,Cv(Zx,this)-t),void Ev(Zx,this,t);Cv(Xx,this).length=0,Ev(Zx,this,-1)}}destroy(){Ev(Xx,this,null)}}var ty=new WeakSet;class ny{constructor(e){kv(this,ty),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Bb.platform;for(const[n,i,a={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:a}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:a}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(jv(ty,this,iy).call(this,t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:r=[],checker:s=null}}=n;s&&!s(e,t)||(i.bind(e,...r,t)(),a||cx(t))}}function iy(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class ay{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,hx(i))}t.remove()}(e),Pb(this,"_colors",e)}convert(e){const t=hx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every(((e,n)=>e===t[n])))return ay._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Vb.makeHexColor(...t):e}}l(ay,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var ry=new WeakMap,sy=new WeakMap,oy=new WeakMap,ly=new WeakMap,cy=new WeakMap,dy=new WeakMap,uy=new WeakMap,hy=new WeakMap,my=new WeakMap,py=new WeakMap,fy=new WeakMap,gy=new WeakMap,vy=new WeakMap,by=new WeakMap,xy=new WeakMap,yy=new WeakMap,wy=new WeakMap,_y=new WeakMap,ky=new WeakMap,Ny=new WeakMap,jy=new WeakMap,Sy=new WeakMap,Cy=new WeakMap,Ey=new WeakMap,Ay=new WeakMap,Ty=new WeakMap,My=new WeakMap,Py=new WeakMap,Dy=new WeakMap,Ry=new WeakMap,Oy=new WeakMap,Ly=new WeakMap,Iy=new WeakMap,Fy=new WeakMap,zy=new WeakMap,qy=new WeakMap,Wy=new WeakMap,By=new WeakMap,Uy=new WeakMap,Vy=new WeakMap,Hy=new WeakMap,Gy=new WeakMap,Qy=new WeakMap,Yy=new WeakMap,Ky=new WeakSet;class Xy{static get _keyboardManager(){const e=Xy.prototype,t=e=>Cv(Gy,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Pb(this,"_keyboardManager",new ny([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Cv(Gy,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Cv(Gy,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,n,i,a,r,s,o,c,d,u,h,m,p){kv(this,Ky),Nv(this,ry,new AbortController),Nv(this,sy,null),Nv(this,oy,new Map),Nv(this,ly,new Map),Nv(this,cy,null),Nv(this,dy,null),Nv(this,uy,null),Nv(this,hy,new ey),Nv(this,my,null),Nv(this,py,null),Nv(this,fy,0),Nv(this,gy,new Set),Nv(this,vy,null),Nv(this,by,null),Nv(this,xy,new Set),l(this,"_editorUndoBar",null),Nv(this,yy,!1),Nv(this,wy,!1),Nv(this,_y,!1),Nv(this,ky,null),Nv(this,Ny,null),Nv(this,jy,null),Nv(this,Sy,null),Nv(this,Cy,!1),Nv(this,Ey,null),Nv(this,Ay,new Ux),Nv(this,Ty,!1),Nv(this,My,!1),Nv(this,Py,null),Nv(this,Dy,null),Nv(this,Ry,null),Nv(this,Oy,null),Nv(this,Ly,null),Nv(this,Iy,nb.NONE),Nv(this,Fy,new Set),Nv(this,zy,null),Nv(this,qy,null),Nv(this,Wy,null),Nv(this,By,null),Nv(this,Uy,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Nv(this,Vy,[0,0]),Nv(this,Hy,null),Nv(this,Gy,null),Nv(this,Qy,null),Nv(this,Yy,null);const f=this._signal=Cv(ry,this).signal;Ev(Gy,this,e),Ev(Qy,this,t),Ev(cy,this,n),Ev(qy,this,i),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:f}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),a._on("setpreference",this.onSetPreference.bind(this),{signal:f}),a._on("switchannotationeditorparams",(e=>this.updateParams(e.type,e.value)),{signal:f}),jv(Ky,this,nw).call(this),jv(Ky,this,cw).call(this),jv(Ky,this,rw).call(this),Ev(dy,this,r.annotationStorage),Ev(ky,this,r.filterFactory),Ev(Wy,this,s),Ev(Sy,this,o||null),Ev(yy,this,c),Ev(wy,this,d),Ev(_y,this,u),Ev(Ly,this,h||null),this.viewParameters={realScale:ex.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=!1!==p}destroy(){var e,t,n,i,a,r,s,o;null===(e=Cv(Yy,this))||void 0===e||e.resolve(),Ev(Yy,this,null),null===(t=Cv(ry,this))||void 0===t||t.abort(),Ev(ry,this,null),this._signal=null;for(const l of Cv(ly,this).values())l.destroy();Cv(ly,this).clear(),Cv(oy,this).clear(),Cv(xy,this).clear(),null===(n=Cv(Oy,this))||void 0===n||n.clear(),Ev(sy,this,null),Cv(Fy,this).clear(),Cv(hy,this).destroy(),null===(i=Cv(cy,this))||void 0===i||i.destroy(),null===(a=Cv(qy,this))||void 0===a||a.destroy(),null===(r=Cv(Ey,this))||void 0===r||r.hide(),Ev(Ey,this,null),null===(s=Cv(Ry,this))||void 0===s||s.destroy(),Ev(Ry,this,null),Cv(Ny,this)&&(clearTimeout(Cv(Ny,this)),Ev(Ny,this,null)),Cv(Hy,this)&&(clearTimeout(Cv(Hy,this)),Ev(Hy,this,null)),null===(o=this._editorUndoBar)||void 0===o||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return Cv(Ly,this)}get useNewAltTextFlow(){return Cv(wy,this)}get useNewAltTextWhenAddingImage(){return Cv(_y,this)}get hcmFilter(){return Pb(this,"hcmFilter",Cv(Wy,this)?Cv(ky,this).addHCMFilter(Cv(Wy,this).foreground,Cv(Wy,this).background):"none")}get direction(){return Pb(this,"direction",getComputedStyle(Cv(Gy,this)).direction)}get highlightColors(){return Pb(this,"highlightColors",Cv(Sy,this)?new Map(Cv(Sy,this).split(",").map((e=>e.split("=").map((e=>e.trim()))))):null)}get highlightColorNames(){return Pb(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(e=>e.reverse()))):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Ev(py,this,e)}setMainHighlightColorPicker(e){Ev(Ry,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=Cv(cy,this))||void 0===t||t.editAltText(this,e,n)}getSignature(e){var t;null===(t=Cv(qy,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return Cv(qy,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)Ev(_y,this,n)}onPageChanging(e){let{pageNumber:t}=e;Ev(fy,this,t-1)}focusMainContainer(){Cv(Gy,this).focus()}findParent(e,t){for(const n of Cv(ly,this).values()){const{x:i,y:a,width:r,height:s}=n.div.getBoundingClientRect();if(e>=i&&e<=i+r&&t>=a&&t<=a+s)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Cv(Qy,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){Cv(xy,this).add(e)}removeShouldRescale(e){Cv(xy,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*ex.PDF_TO_CSS_UNITS;for(const i of Cv(xy,this))i.onScaleChanging();null===(t=Cv(py,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:r}=t,s=t.toString(),o=jv(Ky,this,Jy).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;t.empty();const c=jv(Ky,this,$y).call(this,o),d=Cv(Iy,this)===nb.NONE,u=()=>{null===c||void 0===c||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:r,text:s}),d&&this.showAllEditors("highlight",!0,!0)};d?this.switchToMode(nb.HIGHLIGHT,u):u()}addToAnnotationStorage(e){e.isEmpty()||!Cv(dy,this)||Cv(dy,this).has(e.id)||Cv(dy,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,Cv(Cy,this)&&(Ev(Cy,this,!1),jv(Ky,this,tw).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of Cv(Fy,this))if(t.div.contains(e)){Ev(Dy,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!Cv(Dy,this))return;const[e,t]=Cv(Dy,this);Ev(Dy,this,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),t.focus()}addEditListeners(){jv(Ky,this,rw).call(this),jv(Ky,this,ow).call(this)}removeEditListeners(){jv(Ky,this,sw).call(this),jv(Ky,this,lw).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of Cv(by,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of Cv(by,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=Cv(sy,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of Cv(Fy,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const e of Cv(by,this))if(e.isHandlingMimeForPasting(r.type))return void e.paste(r,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){return void Cb('paste: "'.concat(a.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const r of n){const t=await i.deserialize(r);if(!t)return;e.push(t)}const t=()=>{for(const t of e)jv(Ky,this,pw).call(this,t);jv(Ky,this,vw).call(this,e)},a=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:a,mustExec:!0})}catch(a){Cb('paste: "'.concat(a.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),Cv(Iy,this)===nb.NONE||this.isEditorHandlingKeyboard||Xy._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,Cv(Cy,this)&&(Ev(Cy,this,!1),jv(Ky,this,tw).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(jv(Ky,this,iw).call(this),jv(Ky,this,ow).call(this),jv(Ky,this,dw).call(this,{isEditing:Cv(Iy,this)!==nb.NONE,isEmpty:jv(Ky,this,gw).call(this),hasSomethingToUndo:Cv(hy,this).hasSomethingToUndo(),hasSomethingToRedo:Cv(hy,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(jv(Ky,this,aw).call(this),jv(Ky,this,lw).call(this),jv(Ky,this,dw).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!Cv(by,this)){Ev(by,this,e);for(const e of Cv(by,this))jv(Ky,this,uw).call(this,e.defaultPropertiesToUpdate)}}getId(){return Cv(Ay,this).id}get currentLayer(){return Cv(ly,this).get(Cv(fy,this))}getLayer(e){return Cv(ly,this).get(e)}get currentPageIndex(){return Cv(fy,this)}addLayer(e){Cv(ly,this).set(e.pageIndex,e),Cv(Ty,this)?e.enable():e.disable()}removeLayer(e){Cv(ly,this).delete(e.pageIndex)}async updateMode(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Cv(Iy,this)!==e&&(!Cv(Yy,this)||(await Cv(Yy,this).promise,Cv(Yy,this)))){var a,r;if(Ev(Yy,this,Promise.withResolvers()),null===(t=Cv(py,this))||void 0===t||t.commitOrRemove(),Ev(Iy,this,e),e===nb.NONE)return this.setEditingState(!1),jv(Ky,this,mw).call(this),null===(a=this._editorUndoBar)||void 0===a||a.hide(),void Cv(Yy,this).resolve();if(e===nb.SIGNATURE)await(null===(r=Cv(qy,this))||void 0===r?void 0:r.loadSignatures());this.setEditingState(!0),await jv(Ky,this,hw).call(this),this.unselectAll();for(const t of Cv(ly,this).values())t.updateMode(e);if(!n)return i&&this.addNewEditorFromKeyboard(),void Cv(Yy,this).resolve();for(const e of Cv(oy,this).values())e.annotationElementId===n||e.id===n?(this.setSelected(e),e.enterInEditMode()):e.unselect();Cv(Yy,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==Cv(Iy,this)&&this._eventBus.dispatch("switchannotationeditormode",d({source:this},e))}updateParams(e,t){var n;if(Cv(by,this)){switch(e){case ib.CREATE:return void this.currentLayer.addNewEditor(t);case ib.HIGHLIGHT_DEFAULT_COLOR:null===(n=Cv(Ry,this))||void 0===n||n.updateColor(t);break;case ib.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Cv(By,this)||Ev(By,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of Cv(Fy,this))n.updateParams(e,t);for(const n of Cv(by,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const a of Cv(oy,this).values())a.editorType===e&&a.show(t);(null===(n=null===(i=Cv(By,this))||void 0===i?void 0:i.get(ib.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&jv(Ky,this,uw).call(this,[[ib.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Cv(My,this)!==e){Ev(My,this,e);for(const t of Cv(ly,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of Cv(oy,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return Cv(oy,this).get(e)}addEditor(e){Cv(oy,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(Cv(Ny,this)&&clearTimeout(Cv(Ny,this)),Ev(Ny,this,setTimeout((()=>{this.focusMainContainer(),Ev(Ny,this,null)}),0))),Cv(oy,this).delete(e.id),e.annotationElementId)&&(null===(t=Cv(Oy,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&Cv(gy,this).has(e.annotationElementId))||(null===(n=Cv(dy,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){Cv(gy,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return Cv(gy,this).has(e)}removeDeletedAnnotationElement(e){Cv(gy,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){Cv(sy,this)!==e&&(Ev(sy,this,e),e&&jv(Ky,this,uw).call(this,e.propertiesToUpdate))}updateUI(e){Sv(Ky,this,fw)===e&&jv(Ky,this,uw).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){jv(Ky,this,uw).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(Cv(Fy,this).has(e))return Cv(Fy,this).delete(e),e.unselect(),void jv(Ky,this,dw).call(this,{hasSelectedEditor:this.hasSelection});Cv(Fy,this).add(e),e.select(),jv(Ky,this,uw).call(this,e.propertiesToUpdate),jv(Ky,this,dw).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;null===(t=Cv(py,this))||void 0===t||t.commitOrRemove();for(const n of Cv(Fy,this))n!==e&&n.unselect();Cv(Fy,this).clear(),Cv(Fy,this).add(e),e.select(),jv(Ky,this,uw).call(this,e.propertiesToUpdate),jv(Ky,this,dw).call(this,{hasSelectedEditor:!0})}isSelected(e){return Cv(Fy,this).has(e)}get firstSelectedEditor(){return Cv(Fy,this).values().next().value}unselect(e){e.unselect(),Cv(Fy,this).delete(e),jv(Ky,this,dw).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Cv(Fy,this).size}get isEnterHandled(){return 1===Cv(Fy,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;Cv(hy,this).undo(),jv(Ky,this,dw).call(this,{hasSomethingToUndo:Cv(hy,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:jv(Ky,this,gw).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){Cv(hy,this).redo(),jv(Ky,this,dw).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Cv(hy,this).hasSomethingToRedo(),isEmpty:jv(Ky,this,gw).call(this)})}addCommands(e){Cv(hy,this).add(e),jv(Ky,this,dw).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:jv(Ky,this,gw).call(this)})}cleanUndoStack(e){Cv(hy,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...Cv(Fy,this)],i=()=>{for(const e of n)jv(Ky,this,pw).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(i,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){var e;null===(e=Cv(sy,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return Cv(sy,this)||this.hasSelection}selectAll(){for(const e of Cv(Fy,this))e.commit();jv(Ky,this,vw).call(this,Cv(oy,this).values())}unselectAll(){var e;if((!Cv(sy,this)||(Cv(sy,this).commitOrRemove(),Cv(Iy,this)===nb.NONE))&&(null===(e=Cv(py,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of Cv(Fy,this))e.unselect();Cv(Fy,this).clear(),jv(Ky,this,dw).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;Cv(Vy,this)[0]+=e,Cv(Vy,this)[1]+=t;const[n,i]=Cv(Vy,this),a=[...Cv(Fy,this)];Cv(Hy,this)&&clearTimeout(Cv(Hy,this)),Ev(Hy,this,setTimeout((()=>{Ev(Hy,this,null),Cv(Vy,this)[0]=Cv(Vy,this)[1]=0,this.addCommands({cmd:()=>{for(const e of a)Cv(oy,this).has(e.id)&&(e.translateInPage(n,i),e.translationDone())},undo:()=>{for(const e of a)Cv(oy,this).has(e.id)&&(e.translateInPage(-n,-i),e.translationDone())},mustExec:!1})}),1e3));for(const r of a)r.translateInPage(e,t),r.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Ev(vy,this,new Map);for(const e of Cv(Fy,this))Cv(vy,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Cv(vy,this))return!1;this.disableUserSelect(!1);const e=Cv(vy,this);Ev(vy,this,null);let t=!1;for(const[{x:i,y:a,pageIndex:r},s]of e)s.newX=i,s.newY=a,s.newPageIndex=r,t||(t=i!==s.savedX||a!==s.savedY||r!==s.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(Cv(oy,this).has(e.id)){const a=Cv(ly,this).get(i);a?e._setParentAndPosition(a,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:a,newPageIndex:r}]of e)n(t,i,a,r)},undo:()=>{for(const[t,{savedX:i,savedY:a,savedPageIndex:r}]of e)n(t,i,a,r)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(Cv(vy,this))for(const n of Cv(vy,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===Cv(Fy,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return Cv(sy,this)===e}getActive(){return Cv(sy,this)}getMode(){return Cv(Iy,this)}get imageManager(){return Pb(this,"imageManager",new Yx)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:r}=e.getBoundingClientRect();let s;switch(e.getAttribute("data-main-rotation")){case"90":s=(e,t,s,o)=>({x:(t-i)/r,y:1-(e+s-n)/a,width:o/r,height:s/a});break;case"180":s=(e,t,s,o)=>({x:1-(e+s-n)/a,y:1-(t+o-i)/r,width:s/a,height:o/r});break;case"270":s=(e,t,s,o)=>({x:1-(t+o-i)/r,y:(e-n)/a,width:o/r,height:s/a});break;default:s=(e,t,s,o)=>({x:(e-n)/a,y:(t-i)/r,width:s/a,height:o/r})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:a}of e.getClientRects())0!==i&&0!==a&&o.push(s(t,n,i,a))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(Cv(uy,this)||Ev(uy,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=Cv(uy,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=Cv(uy,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=Cv(dy,this).getRawValue(n);i&&(Cv(Iy,this)!==nb.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var i;const a=null===(i=Cv(Oy,this))||void 0===i?void 0:i.get(e);a&&(a.setCanvas(t,n),Cv(Oy,this).delete(e))}addMissingCanvas(e,t){(Cv(Oy,this)||Ev(Oy,this,new Map)).set(e,t)}}function Jy(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function $y(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of Cv(ly,this).values())if(n.hasTextLayer(e))return n;return null}function Zy(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=jv(Ky,this,Jy).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(Cv(Ey,this)||Ev(Ey,this,new Ix(this)),Cv(Ey,this).show(t,n,"ltr"===this.direction))}function ew(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(Cv(zy,this))null===(n=Cv(Ey,this))||void 0===n||n.hide(),Ev(zy,this,null),jv(Ky,this,dw).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===Cv(zy,this))return;const a=jv(Ky,this,Jy).call(this,t).closest(".textLayer");var r;if(a){if(null===(e=Cv(Ey,this))||void 0===e||e.hide(),Ev(zy,this,i),jv(Ky,this,dw).call(this,{hasSelectedText:!0}),(Cv(Iy,this)===nb.HIGHLIGHT||Cv(Iy,this)===nb.NONE)&&(Cv(Iy,this)===nb.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Ev(Cy,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=Cv(Iy,this)===nb.HIGHLIGHT?jv(Ky,this,$y).call(this,a):null;null===e||void 0===e||e.toggleDrawing();const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&jv(Ky,this,tw).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}}else Cv(zy,this)&&(null===(r=Cv(Ey,this))||void 0===r||r.hide(),Ev(zy,this,null),jv(Ky,this,dw).call(this,{hasSelectedText:!1}))}function tw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Cv(Iy,this)===nb.HIGHLIGHT?this.highlightSelection(e):Cv(yy,this)&&jv(Ky,this,Zy).call(this)}function nw(){document.addEventListener("selectionchange",jv(Ky,this,ew).bind(this),{signal:this._signal})}function iw(){if(Cv(jy,this))return;Ev(jy,this,new AbortController);const e=this.combinedSignal(Cv(jy,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function aw(){var e;null===(e=Cv(jy,this))||void 0===e||e.abort(),Ev(jy,this,null)}function rw(){if(Cv(Py,this))return;Ev(Py,this,new AbortController);const e=this.combinedSignal(Cv(Py,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function sw(){var e;null===(e=Cv(Py,this))||void 0===e||e.abort(),Ev(Py,this,null)}function ow(){if(Cv(my,this))return;Ev(my,this,new AbortController);const e=this.combinedSignal(Cv(my,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function lw(){var e;null===(e=Cv(my,this))||void 0===e||e.abort(),Ev(my,this,null)}function cw(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function dw(e){Object.entries(e).some((e=>{let[t,n]=e;return Cv(Uy,this)[t]!==n}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Cv(Uy,this),e)}),Cv(Iy,this)===nb.HIGHLIGHT&&!1===e.hasSelectedEditor&&jv(Ky,this,uw).call(this,[[ib.HIGHLIGHT_FREE,!0]]))}function uw(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function hw(){if(!Cv(Ty,this)){Ev(Ty,this,!0);const e=[];for(const t of Cv(ly,this).values())e.push(t.enable());await Promise.all(e);for(const t of Cv(oy,this).values())t.enable()}}function mw(){if(this.unselectAll(),Cv(Ty,this)){Ev(Ty,this,!1);for(const e of Cv(ly,this).values())e.disable();for(const e of Cv(oy,this).values())e.disable()}}function pw(e){const t=Cv(ly,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function fw(e){let t=null;for(t of Cv(Fy,e));return t}function gw(){if(0===Cv(oy,this).size)return!0;if(1===Cv(oy,this).size)for(const e of Cv(oy,this).values())return e.isEmpty();return!1}function vw(e){for(const t of Cv(Fy,this))t.unselect();Cv(Fy,this).clear();for(const t of e)t.isEmpty()||(Cv(Fy,this).add(t),t.select());jv(Ky,this,dw).call(this,{hasSelectedEditor:this.hasSelection})}l(Xy,"TRANSLATE_SMALL",1),l(Xy,"TRANSLATE_BIG",10);var bw=new WeakMap,xw=new WeakMap,yw=new WeakMap,ww=new WeakMap,_w=new WeakMap,kw=new WeakMap,Nw=new WeakMap,jw=new WeakMap,Sw=new WeakMap,Cw=new WeakMap,Ew=new WeakMap,Aw=new WeakMap,Tw=new WeakSet;class Mw{constructor(e){kv(this,Tw),Nv(this,bw,null),Nv(this,xw,!1),Nv(this,yw,null),Nv(this,ww,null),Nv(this,_w,null),Nv(this,kw,null),Nv(this,Nw,!1),Nv(this,jw,null),Nv(this,Sw,null),Nv(this,Cw,null),Nv(this,Ew,null),Nv(this,Aw,!1),Ev(Sw,this,e),Ev(Aw,this,e._uiManager.useNewAltTextFlow),Rw._||(Rw._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=Mw._l10n)&&void 0!==t||(Mw._l10n=e)}async render(){const e=Ev(yw,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=Ev(ww,this,document.createElement("span"));e.append(t),Cv(Aw,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",Rw._.missing),t.setAttribute("data-l10n-id",Rw._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=Cv(Sw,this)._uiManager._signal;e.addEventListener("contextmenu",lx,{signal:n}),e.addEventListener("pointerdown",(e=>e.stopPropagation()),{signal:n});const i=e=>{e.preventDefault(),Cv(Sw,this)._uiManager.editAltText(Cv(Sw,this)),Cv(Aw,this)&&Cv(Sw,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Sv(Tw,this,Pw)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(Ev(Nw,this,!0),i(t))}),{signal:n}),await jv(Tw,this,Dw).call(this),e}finish(){Cv(yw,this)&&(Cv(yw,this).focus({focusVisible:Cv(Nw,this)}),Ev(Nw,this,!1))}isEmpty(){return Cv(Aw,this)?null===Cv(bw,this):!Cv(bw,this)&&!Cv(xw,this)}hasData(){return Cv(Aw,this)?null!==Cv(bw,this)||!!Cv(Cw,this):this.isEmpty()}get guessedText(){return Cv(Cw,this)}async setGuessedText(e){null===Cv(bw,this)&&(Ev(Cw,this,e),Ev(Ew,this,await Mw._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),jv(Tw,this,Dw).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!Cv(Aw,this)||Cv(bw,this))return null===(t=Cv(jw,this))||void 0===t||t.remove(),void Ev(jw,this,null);if(!Cv(jw,this)){const e=Ev(jw,this,document.createElement("div"));e.className="noAltTextBadge",Cv(Sw,this).div.append(e)}Cv(jw,this).classList.toggle("hidden",!e)}serialize(e){let t=Cv(bw,this);return e||Cv(Cw,this)!==t||(t=Cv(Ew,this)),{altText:t,decorative:Cv(xw,this),guessedText:Cv(Cw,this),textWithDisclaimer:Cv(Ew,this)}}get data(){return{altText:Cv(bw,this),decorative:Cv(xw,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:a,cancel:r=!1}=e;i&&(Ev(Cw,this,i),Ev(Ew,this,a)),Cv(bw,this)===t&&Cv(xw,this)===n||(r||(Ev(bw,this,t),Ev(xw,this,n)),jv(Tw,this,Dw).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Cv(yw,this)&&(!e&&Cv(kw,this)&&(clearTimeout(Cv(kw,this)),Ev(kw,this,null)),Cv(yw,this).disabled=!e)}shown(){Cv(Sw,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Sv(Tw,this,Pw)}})}destroy(){var e,t;null===(e=Cv(yw,this))||void 0===e||e.remove(),Ev(yw,this,null),Ev(ww,this,null),Ev(_w,this,null),null===(t=Cv(jw,this))||void 0===t||t.remove(),Ev(jw,this,null)}}function Pw(e){return(Cv(bw,e)?"added":null===Cv(bw,e)&&e.guessedText&&"review")||"missing"}async function Dw(){const e=Cv(yw,this);if(!e)return;if(Cv(Aw,this)){var t,n;if(e.classList.toggle("done",!!Cv(bw,this)),e.setAttribute("data-l10n-id",Rw._[Sv(Tw,this,Pw)]),null===(t=Cv(ww,this))||void 0===t||t.setAttribute("data-l10n-id",Rw._["".concat(Sv(Tw,this,Pw),"-label")]),!Cv(bw,this))return void(null===(n=Cv(_w,this))||void 0===n||n.remove())}else{var i;if(!Cv(bw,this)&&!Cv(xw,this))return e.classList.remove("done"),void(null===(i=Cv(_w,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let a=Cv(_w,this);if(!a){Ev(_w,this,a=document.createElement("span")),a.className="tooltip",a.setAttribute("role","tooltip"),a.id="alt-text-tooltip-".concat(Cv(Sw,this).id);const t=100,n=Cv(Sw,this)._uiManager._signal;n.addEventListener("abort",(()=>{clearTimeout(Cv(kw,this)),Ev(kw,this,null)}),{once:!0}),e.addEventListener("mouseenter",(()=>{Ev(kw,this,setTimeout((()=>{Ev(kw,this,null),Cv(_w,this).classList.add("show"),Cv(Sw,this)._reportTelemetry({action:"alt_text_tooltip"})}),t))}),{signal:n}),e.addEventListener("mouseleave",(()=>{var e;Cv(kw,this)&&(clearTimeout(Cv(kw,this)),Ev(kw,this,null)),null===(e=Cv(_w,this))||void 0===e||e.classList.remove("show")}),{signal:n})}Cv(xw,this)?a.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(a.removeAttribute("data-l10n-id"),a.textContent=Cv(bw,this)),a.parentNode||e.append(a);const r=Cv(Sw,this).getElementForAltText();null===r||void 0===r||r.setAttribute("aria-describedby",a.id)}var Rw={_:null};l(Mw,"_l10n",null);var Ow=new WeakMap,Lw=new WeakMap,Iw=new WeakMap,Fw=new WeakMap,zw=new WeakMap,qw=new WeakMap,Ww=new WeakMap,Bw=new WeakMap,Uw=new WeakMap,Vw=new WeakMap,Hw=new WeakMap,Gw=new WeakMap,Qw=new WeakSet;class Yw{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:r=null,onPinchEnd:s=null,signal:o}=e;kv(this,Qw),Nv(this,Ow,void 0),Nv(this,Lw,!1),Nv(this,Iw,null),Nv(this,Fw,void 0),Nv(this,zw,void 0),Nv(this,qw,void 0),Nv(this,Ww,void 0),Nv(this,Bw,null),Nv(this,Uw,void 0),Nv(this,Vw,null),Nv(this,Hw,void 0),Nv(this,Gw,null),Ev(Ow,this,t),Ev(Iw,this,i),Ev(Fw,this,n),Ev(zw,this,a),Ev(qw,this,r),Ev(Ww,this,s),Ev(Hw,this,new AbortController),Ev(Uw,this,AbortSignal.any([o,Cv(Hw,this).signal])),t.addEventListener("touchstart",jv(Qw,this,Kw).bind(this),{passive:!1,signal:Cv(Uw,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/gx.pixelRatio}destroy(){var e,t;null===(e=Cv(Hw,this))||void 0===e||e.abort(),Ev(Hw,this,null),null===(t=Cv(Bw,this))||void 0===t||t.abort(),Ev(Bw,this,null)}}function Kw(e){var t,n;if(null!==(t=Cv(Fw,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(Cv(Bw,this))return;const e=Ev(Bw,this,new AbortController),t=AbortSignal.any([Cv(Uw,this),e.signal]),n=Cv(Ow,this),i={capture:!0,signal:t,passive:!1},a=e=>{var t;"touch"===e.pointerType&&(null===(t=Cv(Bw,this))||void 0===t||t.abort(),Ev(Bw,this,null))};return n.addEventListener("pointerdown",(e=>{"touch"===e.pointerType&&(cx(e),a(e))}),i),n.addEventListener("pointerup",a,i),void n.addEventListener("pointercancel",a,i)}if(!Cv(Gw,this)){var i;Ev(Gw,this,new AbortController);const e=AbortSignal.any([Cv(Uw,this),Cv(Gw,this).signal]),t=Cv(Ow,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",jv(Qw,this,Xw).bind(this),n);const a=jv(Qw,this,Jw).bind(this);t.addEventListener("touchend",a,n),t.addEventListener("touchcancel",a,n),n.capture=!0,t.addEventListener("pointerdown",cx,n),t.addEventListener("pointermove",cx,n),t.addEventListener("pointercancel",cx,n),t.addEventListener("pointerup",cx,n),null===(i=Cv(zw,this))||void 0===i||i.call(this)}if(cx(e),2!==e.touches.length||null!==(n=Cv(Iw,this))&&void 0!==n&&n.call(this))return void Ev(Vw,this,null);let[a,r]=e.touches;a.identifier>r.identifier&&([a,r]=[r,a]),Ev(Vw,this,{touch0X:a.screenX,touch0Y:a.screenY,touch1X:r.screenX,touch1Y:r.screenY})}function Xw(e){var t;if(!Cv(Vw,this)||2!==e.touches.length)return;cx(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:a,screenY:r}=n,{screenX:s,screenY:o}=i,l=Cv(Vw,this),{touch0X:c,touch0Y:d,touch1X:u,touch1Y:h}=l,m=u-c,p=h-d,f=s-a,g=o-r,v=Math.hypot(f,g)||1,b=Math.hypot(m,p)||1;if(!Cv(Lw,this)&&Math.abs(b-v)<=Pv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=a,l.touch0Y=r,l.touch1X=s,l.touch1Y=o,!Cv(Lw,this))return void Ev(Lw,this,!0);const x=[(a+s)/2,(r+o)/2];null===(t=Cv(qw,this))||void 0===t||t.call(this,x,b,v)}function Jw(e){if(!(e.touches.length>=2)){var t;if(Cv(Gw,this))Cv(Gw,this).abort(),Ev(Gw,this,null),null===(t=Cv(Ww,this))||void 0===t||t.call(this);Cv(Vw,this)&&(cx(e),Ev(Vw,this,null),Ev(Lw,this,!1))}}Pv=Yw;var $w=new WeakMap,Zw=new WeakMap,e_=new WeakMap,t_=new WeakMap,n_=new WeakMap,i_=new WeakMap,a_=new WeakMap,r_=new WeakMap,s_=new WeakMap,o_=new WeakMap,l_=new WeakMap,c_=new WeakMap,d_=new WeakMap,u_=new WeakMap,h_=new WeakMap,m_=new WeakMap,p_=new WeakMap,f_=new WeakMap,g_=new WeakMap,v_=new WeakMap,b_=new WeakMap,x_=new WeakMap,y_=new WeakMap,w_=new WeakMap,__=new WeakSet;class k_{static get _resizerKeyboardManager(){const e=k_.prototype._resizeWithKeyboard,t=Xy.TRANSLATE_SMALL,n=Xy.TRANSLATE_BIG;return Pb(this,"_resizerKeyboardManager",new ny([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],k_.prototype._stopResizingWithKeyboard]]))}constructor(e){kv(this,__),Nv(this,$w,null),Nv(this,Zw,null),Nv(this,e_,null),Nv(this,t_,!1),Nv(this,n_,null),Nv(this,i_,""),Nv(this,a_,!1),Nv(this,r_,null),Nv(this,s_,null),Nv(this,o_,null),Nv(this,l_,null),Nv(this,c_,""),Nv(this,d_,!1),Nv(this,u_,null),Nv(this,h_,!1),Nv(this,m_,!1),Nv(this,p_,!1),Nv(this,f_,null),Nv(this,g_,0),Nv(this,v_,0),Nv(this,b_,null),Nv(this,x_,null),l(this,"isSelected",!1),l(this,"_isCopy",!1),l(this,"_editToolbar",null),l(this,"_initialOptions",Object.create(null)),l(this,"_initialData",null),l(this,"_isVisible",!0),l(this,"_uiManager",null),l(this,"_focusEventsAllowed",!0),Nv(this,y_,!1),Nv(this,w_,k_._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:r}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,r];const[s,o]=this.parentDimensions;this.x=e.x/s,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Pb(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new U_({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=k_._l10n)&&void 0!==n||(k_._l10n=e),k_._l10nResizer||(k_._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==k_._borderLineWidth)return;const i=getComputedStyle(document.documentElement);k_._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Eb("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Cv(y_,this)}set _isDraggable(e){var t;Ev(y_,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Cv(w_,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):jv(__,this,B_).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(Cv(d_,this)?Ev(d_,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,r]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/r,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){jv(__,this,N_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){Cv(u_,this)||Ev(u_,this,[this.x,this.y,this.width,this.height]),jv(__,this,N_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){Cv(u_,this)||Ev(u_,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:s}=this;const[o,l]=this.getBaseTranslation();r+=o,s+=l;const{style:c}=n;c.left="".concat((100*r).toFixed(2),"%"),c.top="".concat((100*s).toFixed(2),"%"),this._onTranslating(r,s),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!Cv(u_,this)&&(Cv(u_,this)[0]!==this.x||Cv(u_,this)[1]!==this.y)}get _hasBeenResized(){return!!Cv(u_,this)&&(Cv(u_,this)[2]!==this.width||Cv(u_,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=k_,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:r,width:s,height:o}=this;if(s*=n,o*=i,a*=n,r*=i,this._mustFixPosition)switch(e){case 0:a=Jb(a,0,n-s),r=Jb(r,0,i-o);break;case 90:a=Jb(a,0,n-o),r=Jb(r,s,i);break;case 180:a=Jb(a,s,n),r=Jb(r,o,i);break;case 270:a=Jb(a,o,n),r=Jb(r,0,i-s)}this.x=a/=n,this.y=r/=i;const[l,c]=this.getBaseTranslation();a+=l,r+=c,t.left="".concat((100*a).toFixed(2),"%"),t.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return j_.call(k_,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return j_.call(k_,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:a}=this.div;a.width="".concat((100*e/n).toFixed(2),"%"),Cv(a_,this)||(a.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),a=!Cv(a_,this)&&t.endsWith("%");if(i&&a)return;const[r,s]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/r).toFixed(2),"%")),Cv(a_,this)||a||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=Cv(e_,this))||void 0===e||e.finish()}async addEditToolbar(){return this._editToolbar||Cv(m_,this)||(this._editToolbar=new jx(this),this.div.append(this._editToolbar.render()),Cv(e_,this)&&await this._editToolbar.addAltText(Cv(e_,this))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=Cv(e_,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){Cv(e_,this)||(Mw.initialize(k_._l10n),Ev(e_,this,new Mw(this)),Cv($w,this)&&(Cv(e_,this).data=Cv($w,this),Ev($w,this,null)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=Cv(e_,this))||void 0===e?void 0:e.data}set altTextData(e){Cv(e_,this)&&(Cv(e_,this).data=e)}get guessedAltText(){var e;return null===(e=Cv(e_,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=Cv(e_,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=Cv(e_,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!Cv(e_,this)&&!Cv(e_,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=Cv(e_,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=Cv(t_,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),jv(__,this,I_).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[a,r]=this.getInitialTranslation();return this.translate(a,r),Wx(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Cv(x_,this)||Ev(x_,this,new Yw({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:jv(__,this,P_).bind(this),onPinching:jv(__,this,D_).bind(this),onPinchEnd:jv(__,this,R_).bind(this),signal:this._uiManager._signal}))),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=Bb.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(Ev(d_,this,!0),this._isDraggable?jv(__,this,L_).call(this,e):jv(__,this,O_).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Cv(f_,this)&&clearTimeout(Cv(f_,this)),Ev(f_,this,setTimeout((()=>{var e;Ev(f_,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)}),0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[a,r]=this.pageDimensions,[s,o]=this.pageTranslation,l=e/i,c=t/i,d=this.x*a,u=this.y*r,h=this.width*a,m=this.height*r;switch(n){case 0:return[d+l+s,r-u-c-m+o,d+l+h+s,r-u-c+o];case 90:return[d+c+s,r-u+l+o,d+c+m+s,r-u+l+h+o];case 180:return[d-l-h+s,r-u+c+o,d-l+s,r-u+c+m+o];case 270:return[d-c-m+s,r-u-l-h+o,d-c+s,r-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,r]=e,s=a-n,o=r-i;switch(this.rotation){case 0:return[n,t-r,s,o];case 90:return[n,t-i,o,s];case 180:return[a,t-i,s,o];case 270:return[a,t-r,o,s];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),Ev(m_,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),Ev(m_,this,!1),!0)}isInEditMode(){return Cv(m_,this)}shouldGetKeyboardEvents(){return Cv(p_,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:r}=window;return t<r&&i>0&&e<a&&n>0}rebuild(){jv(__,this,I_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){Eb("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,Ev($w,i,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,r]=i.pageDimensions,[s,o,l,c]=i.getRectInCurrentCoords(e.rect,r);return i.x=s/a,i.y=o/r,i.width=l/a,i.height=c/r,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=Cv(l_,this))||void 0===e||e.abort(),Ev(l_,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Cv(f_,this)&&(clearTimeout(Cv(f_,this)),Ev(f_,this,null)),jv(__,this,B_).call(this),this.removeEditToolbar(),Cv(b_,this)){for(const e of Cv(b_,this).values())clearTimeout(e);Ev(b_,this,null)}this.parent=null,null===(t=Cv(x_,this))||void 0===t||t.destroy(),Ev(x_,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(jv(__,this,C_).call(this),Cv(r_,this).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),Ev(o_,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=Cv(r_,this).children;if(!Cv(Zw,this)){Ev(Zw,this,Array.from(t));const e=jv(__,this,F_).bind(this),n=jv(__,this,z_).bind(this),i=this._uiManager._signal;for(const t of Cv(Zw,this)){const a=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",jv(__,this,q_).bind(this,a),{signal:i}),t.setAttribute("data-l10n-id",k_._l10nResizer[a])}}const n=Cv(Zw,this)[0];let i=0;for(const r of t){if(r===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(Cv(Zw,this).length/4);if(a!==i){if(a<i)for(let t=0;t<i-a;t++)Cv(r_,this).append(Cv(r_,this).firstChild);else if(a>i)for(let t=0;t<a-i;t++)Cv(r_,this).firstChild.before(Cv(r_,this).lastChild);let e=0;for(const n of t){const t=Cv(Zw,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",k_._l10nResizer[t])}}jv(__,this,W_).call(this,0),Ev(p_,this,!0),Cv(r_,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){Cv(p_,this)&&jv(__,this,M_).call(this,Cv(c_,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){jv(__,this,B_).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=Cv(e_,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then((()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())})))}unselect(){var e,t,n,i,a;this.isSelected&&(this.isSelected=!1,null===(e=Cv(r_,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(a=Cv(e_,this))||void 0===a||a.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Cv(h_,this)}set isEditing(e){Ev(h_,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){Ev(a_,this,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){Cv(b_,this)||Ev(b_,this,new Map);const{action:t}=e;let n=Cv(b_,this).get(t);return n&&clearTimeout(n),n=setTimeout((()=>{this._reportTelemetry(e),Cv(b_,this).delete(t),0===Cv(b_,this).size&&Ev(b_,this,null)}),k_._telemetryTimeout),void Cv(b_,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Ev(t_,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),Ev(t_,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function N_(e,t,n){let[i,a]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/a,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function j_(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function S_(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function C_(){if(Cv(r_,this))return;Ev(r_,this,document.createElement("div")),Cv(r_,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");Cv(r_,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",jv(__,this,E_).bind(this,n),{signal:t}),e.addEventListener("contextmenu",lx,{signal:t}),e.tabIndex=-1}this.div.prepend(Cv(r_,this))}function E_(e,t){var n;t.preventDefault();const{isMac:i}=Bb.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=Cv(e_,this))||void 0===n||n.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,Ev(s_,this,[t.screenX,t.screenY]);const r=new AbortController,s=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",jv(__,this,M_).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",cx,{passive:!1,signal:s}),window.addEventListener("contextmenu",lx,{signal:s}),Ev(o_,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;r.abort(),this.parent.togglePointerEvents(!0),null===(e=Cv(e_,this))||void 0===e||e.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=o,this.div.style.cursor=l,jv(__,this,T_).call(this)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})}function A_(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[a,r]=this.parentDimensions;this.setDims(a*n,r*i),this.fixAndSetPosition(),this._onResized()}function T_(){if(!Cv(o_,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=Cv(o_,this);Ev(o_,this,null);const a=this.x,r=this.y,s=this.width,o=this.height;a===e&&r===t&&s===n&&o===i||this.addCommands({cmd:jv(__,this,A_).bind(this,a,r,s,o),undo:jv(__,this,A_).bind(this,e,t,n,i),mustExec:!0})}function M_(e,t){const[n,i]=this.parentDimensions,a=this.x,r=this.y,s=this.width,o=this.height,l=Dv.MIN_SIZE/n,c=Dv.MIN_SIZE/i,d=jv(__,this,S_).call(this,this.rotation),u=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],h=jv(__,this,S_).call(this,360-this.rotation);let m,p,f=!1,g=!1;switch(e){case"topLeft":f=!0,m=(e,t)=>[0,0],p=(e,t)=>[e,t];break;case"topMiddle":m=(e,t)=>[e/2,0],p=(e,t)=>[e/2,t];break;case"topRight":f=!0,m=(e,t)=>[e,0],p=(e,t)=>[0,t];break;case"middleRight":g=!0,m=(e,t)=>[e,t/2],p=(e,t)=>[0,t/2];break;case"bottomRight":f=!0,m=(e,t)=>[e,t],p=(e,t)=>[0,0];break;case"bottomMiddle":m=(e,t)=>[e/2,t],p=(e,t)=>[e/2,0];break;case"bottomLeft":f=!0,m=(e,t)=>[0,t],p=(e,t)=>[e,0];break;case"middleLeft":g=!0,m=(e,t)=>[0,t/2],p=(e,t)=>[e,t/2]}const v=m(s,o),b=p(s,o);let x=u(...b);const y=Dv._round(a+x[0]),w=Dv._round(r+x[1]);let _,k,N=1,j=1;if(t.fromKeyboard)({deltaX:_,deltaY:k}=t);else{const{screenX:e,screenY:n}=t,[i,a]=Cv(s_,this);[_,k]=this.screenToPageTranslation(e-i,n-a),Cv(s_,this)[0]=e,Cv(s_,this)[1]=n}if([_,k]=((e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t])(_/n,k/i),f){const e=Math.hypot(s,o);N=j=Math.max(Math.min(Math.hypot(b[0]-v[0]-_,b[1]-v[1]-k)/e,1/s,1/o),l/s,c/o)}else g?N=Jb(Math.abs(b[0]-v[0]-_),l,1)/s:j=Jb(Math.abs(b[1]-v[1]-k),c,1)/o;const S=Dv._round(s*N),C=Dv._round(o*j);x=u(...p(S,C));const E=y-x[0],A=w-x[1];Cv(u_,this)||Ev(u_,this,[this.x,this.y,this.width,this.height]),this.width=S,this.height=C,this.x=E,this.y=A,this.setDims(n*S,i*C),this.fixAndSetPosition(),this._onResizing()}function P_(){var e;Ev(o_,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=Cv(e_,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function D_(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;const a=jv(__,this,S_).call(this,this.rotation),r=(e,t)=>[a[0]*e+a[2]*t,a[1]*e+a[3]*t],[s,o]=this.parentDimensions,l=this.x,c=this.y,d=this.width,u=this.height,h=Dv.MIN_SIZE/s,m=Dv.MIN_SIZE/o;i=Math.max(Math.min(i,1/d,1/u),h/d,m/u);const p=Dv._round(d*i),f=Dv._round(u*i);if(p===d&&f===u)return;Cv(u_,this)||Ev(u_,this,[l,c,d,u]);const g=r(d/2,u/2),v=Dv._round(l+g[0]),b=Dv._round(c+g[1]),x=r(p/2,f/2);this.x=v-x[0],this.y=b-x[1],this.width=p,this.height=f,this.setDims(s*p,o*f),this.fixAndSetPosition(),this._onResizing()}function R_(){var e;null===(e=Cv(e_,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),jv(__,this,T_).call(this)}function O_(e){const{isMac:t}=Bb.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function L_(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),r={capture:!0,passive:!1,signal:a},s=e=>{i.abort(),Ev(n_,this,null),Ev(d_,this,!1),this._uiManager.endDragSession()||jv(__,this,O_).call(this,e),n&&this._onStopDragging()};t&&(Ev(g_,this,e.clientX),Ev(v_,this,e.clientY),Ev(n_,this,e.pointerId),Ev(i_,this,e.pointerType),window.addEventListener("pointermove",(e=>{n||(n=!0,this._onStartDragging());const{clientX:t,clientY:i,pointerId:a}=e;if(a!==Cv(n_,this))return void cx(e);const[r,s]=this.screenToPageTranslation(t-Cv(g_,this),i-Cv(v_,this));Ev(g_,this,t),Ev(v_,this,i),this._uiManager.dragSelectedEditors(r,s)}),r),window.addEventListener("touchmove",cx,r),window.addEventListener("pointerdown",(e=>{e.pointerType===Cv(i_,this)&&(Cv(x_,this)||e.isPrimary)&&s(e),cx(e)}),r));const o=e=>{Cv(n_,this)&&Cv(n_,this)!==e.pointerId?cx(e):s(e)};window.addEventListener("pointerup",o,{signal:a}),window.addEventListener("blur",o,{signal:a})}function I_(){if(Cv(l_,this)||!this.div)return;Ev(l_,this,new AbortController);const e=this._uiManager.combinedSignal(Cv(l_,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function F_(e){Dv._resizerKeyboardManager.exec(this,e)}function z_(e){var t;Cv(p_,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==Cv(r_,this)&&jv(__,this,B_).call(this)}function q_(e){Ev(c_,this,Cv(p_,this)?e:"")}function W_(e){if(Cv(Zw,this))for(const t of Cv(Zw,this))t.tabIndex=e}function B_(){Ev(p_,this,!1),jv(__,this,W_).call(this,-1),jv(__,this,T_).call(this)}Dv=k_,l(k_,"_l10n",null),l(k_,"_l10nResizer",null),l(k_,"_borderLineWidth",-1),l(k_,"_colorManager",new ay),l(k_,"_zIndex",1),l(k_,"_telemetryTimeout",1e3);class U_ extends k_{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const V_=3285377520,H_=4294901760,G_=65535;class Q_{constructor(e){this.h1=e?4294967295&e:V_,this.h2=e?4294967295&e:V_}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,a=e.length;i<a;i++){const a=e.charCodeAt(i);a<=255?t[n++]=a:(t[n++]=a>>>8,t[n++]=255&a)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,a=n-4*i,r=new Uint32Array(t.buffer,0,i);let s=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,m=13715;for(let p=0;p<i;p++)1&p?(s=r[p],s=s*d&H_|s*h&G_,s=s<<15|s>>>17,s=s*u&H_|s*m&G_,l^=s,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[p],o=o*d&H_|o*h&G_,o=o<<15|o>>>17,o=o*u&H_|o*m&G_,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(s=0,a){case 3:s^=t[4*i+2]<<16;case 2:s^=t[4*i+1]<<8;case 1:s^=t[4*i],s=s*d&H_|s*h&G_,s=s<<15|s>>>17,s=s*u&H_|s*m&G_,1&i?l^=s:c^=s}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&H_|36045*e&G_,t=4283543511*t&H_|(2950163797*(t<<16|e>>>16)&H_)>>>16,e^=t>>>1,e=444984403*e&H_|60499*e&G_,t=3301882366*t&H_|(3120437893*(t<<16|e>>>16)&H_)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Y_=Object.freeze({map:null,hash:"",transfer:void 0});var K_=new WeakMap,X_=new WeakMap,J_=new WeakMap,$_=new WeakSet;class Z_{constructor(){kv(this,$_),Nv(this,K_,!1),Nv(this,X_,null),Nv(this,J_,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=Cv(J_,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return Cv(J_,this).get(e)}remove(e){if(Cv(J_,this).delete(e),0===Cv(J_,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of Cv(J_,this).values())if(e instanceof k_)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=Cv(J_,this).get(e);let i=!1;if(void 0!==n)for(const[a,r]of Object.entries(t))n[a]!==r&&(i=!0,n[a]=r);else i=!0,Cv(J_,this).set(e,t);i&&jv($_,this,ek).call(this),t instanceof k_&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return Cv(J_,this).has(e)}get size(){return Cv(J_,this).size}resetModified(){Cv(K_,this)&&(Ev(K_,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new nk(this)}get serializable(){if(0===Cv(J_,this).size)return Y_;const e=new Map,t=new Q_,n=[],i=Object.create(null);let a=!1;for(const[r,s]of Cv(J_,this)){const n=s instanceof k_?s.serialize(!1,i):s;n&&(e.set(r,n),t.update("".concat(r,":").concat(JSON.stringify(n))),a||(a=!!n.bitmap))}if(a)for(const r of e.values())r.bitmap&&n.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Y_}get editorStats(){let e=null;const t=new Map;for(const a of Cv(J_,this).values()){var n;if(!(a instanceof k_))continue;const r=a.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const o=(n=e)[s]||(n[s]=new Map);for(const[e,t]of Object.entries(r)){var i;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const a=null!==(i=n.get(t))&&void 0!==i?i:0;n.set(t,a+1)}}for(const[a,r]of t)e[a]=r.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){Ev(X_,this,null)}get modifiedIds(){if(Cv(X_,this))return Cv(X_,this);const e=[];for(const t of Cv(J_,this).values())t instanceof k_&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return Ev(X_,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return Cv(J_,this).entries()}}function ek(){Cv(K_,this)||(Ev(K_,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var tk=new WeakMap;class nk extends Z_{constructor(e){super(),Nv(this,tk,void 0);const{map:t,hash:n,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);Ev(tk,this,{map:a,hash:n,transfer:i})}get print(){Eb("Should not call PrintAnnotationStorage.print")}get serializable(){return Cv(tk,this)}get modifiedIds(){return Pb(this,"modifiedIds",{ids:new Set,hash:""})}}var ik=new WeakMap;class ak{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;Nv(this,ik,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),Cv(ik,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:i}=e;if(t&&!Cv(ik,this).has(t.loadedName))if(Ab(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:r}=t,s=new FontFace(e,n,r);this.addNativeFontFace(s);try{await s.load(),Cv(ik,this).add(e),null===i||void 0===i||i(t)}catch(a){Cb("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(s)}}else Eb("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw Cb("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){var e;return Pb(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return Pb(this,"isSyncFontLoadingSupported",Vv||Bb.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(Ab(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return Pb(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let a,r;const s=this._document.createElement("canvas");s.width=1,s.height=1;const o=s.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=i(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(a=0,r=c.length-3;a<r;a+=4)h=h-u+n(c,a)|0;var m;a<c.length&&(h=h-u+n(c+"XXX",a)|0),d=i(d,16,4,(m=h,String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,255&m)));const p="url(data:font/opentype;base64,".concat(btoa(d),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,g.append(e)}this._document.body.append(g),function e(t,n){if(++l>30)return Cb("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,(()=>{g.remove(),t.complete()}))}}class rk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat($b(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(r){Cb('getPathGenerator - ignoring character: "'.concat(r,'".'))}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}}function sk(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const ok=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,lk=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,a,...r]=n;if(!e(i)&&!Number.isInteger(i))return!1;if(!t(a))return!1;const s=r.length;let o=!0;switch(a.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return 0===s;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(4!==s)return!1;o=!1;break;default:return!1}for(const l of r)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,ok,(e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name)));var ck=new WeakMap,dk=new WeakMap;class uk{constructor(){Nv(this,ck,new Map),Nv(this,dk,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};Cv(dk,this).then((()=>{for(const[e]of Cv(ck,this))e.call(this,n)}))}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted)return void Cb("LoopbackPort - cannot use an `aborted` signal.");const r=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",r),a.addEventListener("abort",r)}Cv(ck,this).set(t,i)}removeEventListener(e,t){const n=Cv(ck,this).get(t);null===n||void 0===n||n(),Cv(ck,this).delete(t)}terminate(){for(const[,e]of Cv(ck,this))null===e||void 0===e||e();Cv(ck,this).clear()}}const hk=1,mk=2,pk=1,fk=2,gk=3,vk=4,bk=5,xk=6,yk=7,wk=8;function _k(){}function kk(e){if(e instanceof zb||e instanceof Lb||e instanceof Rb||e instanceof Ib||e instanceof Ob)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||Eb('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new zb(e.message);case"InvalidPDFException":return new Lb(e.message);case"PasswordException":return new Rb(e.message,e.code);case"ResponseException":return new Ib(e.message,e.status,e.missing);case"UnknownErrorException":return new Ob(e.message,e.details)}return new Ob(e.message,e.toString())}var Nk=new WeakMap,jk=new WeakSet;class Sk{constructor(e,t,n){kv(this,jk),Nv(this,Nk,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",jv(jk,this,Ck).bind(this),{signal:Cv(Nk,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(r){a.reject(r)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,r=this.sourceName,s=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[a]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:s,action:e,streamId:a,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[a].pullCall=t,o.postMessage({sourceName:r,targetName:s,stream:xk,streamId:a,desiredSize:e.desiredSize}),t.promise},cancel:e=>{Ab(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[a].cancelCall=t,this.streamControllers[a].isClosed=!0,o.postMessage({sourceName:r,targetName:s,stream:pk,streamId:a,reason:kk(e)}),t.promise}},n)}destroy(){var e;null===(e=Cv(Nk,this))||void 0===e||e.abort(),Ev(Nk,this,null)}}function Ck(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void jv(jk,this,Ak).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===hk)n.resolve(t.data);else{if(t.callback!==mk)throw new Error("Unexpected callback case");n.reject(kk(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,a=this.comObj;Promise.try(n,t.data).then((function(n){a.postMessage({sourceName:e,targetName:i,callback:hk,callbackId:t.callbackId,data:n})}),(function(n){a.postMessage({sourceName:e,targetName:i,callback:mk,callbackId:t.callbackId,reason:kk(n)})}))}else t.streamId?jv(jk,this,Ek).call(this,t):n(t.data)}function Ek(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,r=this,s=this.actionHandler[e.action],o={enqueue(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:vk,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:gk,streamId:t}),delete r.streamSinks[t])},error(e){Ab(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:bk,streamId:t,reason:kk(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(s,e.data,o).then((function(){a.postMessage({sourceName:n,targetName:i,stream:wk,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:i,stream:wk,streamId:t,reason:kk(e)})}))}function Ak(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,r=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case wk:e.success?r.startCall.resolve():r.startCall.reject(kk(e.reason));break;case yk:e.success?r.pullCall.resolve():r.pullCall.reject(kk(e.reason));break;case xk:if(!s){a.postMessage({sourceName:n,targetName:i,stream:yk,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,Promise.try(s.onPull||_k).then((function(){a.postMessage({sourceName:n,targetName:i,stream:yk,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:i,stream:yk,streamId:t,reason:kk(e)})}));break;case vk:if(Ab(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(e.chunk);break;case gk:if(Ab(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),jv(jk,this,Tk).call(this,r,t);break;case bk:Ab(r,"error should have stream controller"),r.controller.error(kk(e.reason)),jv(jk,this,Tk).call(this,r,t);break;case fk:e.success?r.cancelCall.resolve():r.cancelCall.reject(kk(e.reason)),jv(jk,this,Tk).call(this,r,t);break;case pk:if(!s)break;const o=kk(e.reason);Promise.try(s.onCancel||_k,o).then((function(){a.postMessage({sourceName:n,targetName:i,stream:fk,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:i,stream:fk,streamId:t,reason:kk(e)})})),s.sinkCapability.reject(o),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function Tk(e,t){var n,i,a;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(a=e.cancelCall)||void 0===a?void 0:a.promise]),delete this.streamControllers[t]}var Mk=new WeakMap;class Pk{constructor(e){let{enableHWA:t=!1}=e;Nv(this,Mk,!1),Ev(Mk,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Cv(Mk,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Eb("Abstract method `_createCanvas` called.")}}class Dk extends Pk{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class Rk{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then((e=>({cMapData:e,isCompressed:this.isCompressed}))).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}async _fetch(e){Eb("Abstract method `_fetch` called.")}}class Ok extends Rk{async _fetch(e){const t=await tx(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Wb(t)}}class Lk{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(){}}var Ik=new WeakMap,Fk=new WeakMap,zk=new WeakMap,qk=new WeakMap,Wk=new WeakMap,Bk=new WeakMap,Uk=new WeakMap,Vk=new WeakSet;class Hk extends Lk{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),kv(this,Vk),Nv(this,Ik,void 0),Nv(this,Fk,void 0),Nv(this,zk,void 0),Nv(this,qk,void 0),Nv(this,Wk,void 0),Nv(this,Bk,void 0),Nv(this,Uk,0),Ev(qk,this,t),Ev(Wk,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=Sv(Vk,this,Gk).get(e);if(i)return i;const[a,r,s]=jv(Vk,this,Kk).call(this,e),o=1===e.length?a:"".concat(a).concat(r).concat(s);if(i=Sv(Vk,this,Gk).get(o),i)return Sv(Vk,this,Gk).set(e,i),i;const l="g_".concat(Cv(qk,this),"_transfer_map_").concat((Ev(Uk,this,(t=Cv(Uk,this),n=t++,t)),n)),c=jv(Vk,this,Xk).call(this,l);Sv(Vk,this,Gk).set(e,c),Sv(Vk,this,Gk).set(o,c);const d=jv(Vk,this,Zk).call(this,l);return jv(Vk,this,tN).call(this,a,r,s,d),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),a="base";let r=Sv(Vk,this,Qk).get(a);if((null===(n=r)||void 0===n?void 0:n.key)===i)return r.url;var s;r?(null===(s=r.filter)||void 0===s||s.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},Sv(Vk,this,Qk).set(a,r));if(!e||!t)return r.url;const o=jv(Vk,this,iN).call(this,e);e=Vb.makeHexColor(...o);const l=jv(Vk,this,iN).call(this,t);if(t=Vb.makeHexColor(...l),Sv(Vk,this,Yk).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;const c=new Array(256);for(let p=0;p<=255;p++){const e=p/255;c[p]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),u="g_".concat(Cv(qk,this),"_hcm_filter"),h=r.filter=jv(Vk,this,Zk).call(this,u);jv(Vk,this,tN).call(this,d,d,d,h),jv(Vk,this,$k).call(this,h);const m=(e,t)=>{const n=o[e]/255,i=l[e]/255,a=new Array(t+1);for(let r=0;r<=t;r++)a[r]=n+r/t*(i-n);return a.join(",")};return jv(Vk,this,tN).call(this,m(0,5),m(1,5),m(2,5),h),r.url=jv(Vk,this,Xk).call(this,u),r.url}addAlphaFilter(e){var t,n;let i=Sv(Vk,this,Gk).get(e);if(i)return i;const[a]=jv(Vk,this,Kk).call(this,[e]),r="alpha_".concat(a);if(i=Sv(Vk,this,Gk).get(r),i)return Sv(Vk,this,Gk).set(e,i),i;const s="g_".concat(Cv(qk,this),"_alpha_map_").concat((Ev(Uk,this,(t=Cv(Uk,this),n=t++,t)),n)),o=jv(Vk,this,Xk).call(this,s);Sv(Vk,this,Gk).set(e,o),Sv(Vk,this,Gk).set(r,o);const l=jv(Vk,this,Zk).call(this,s);return jv(Vk,this,nN).call(this,a,l),o}addLuminosityFilter(e){var t,n;let i,a,r=Sv(Vk,this,Gk).get(e||"luminosity");if(r)return r;if(e?([i]=jv(Vk,this,Kk).call(this,[e]),a="luminosity_".concat(i)):a="luminosity",r=Sv(Vk,this,Gk).get(a),r)return Sv(Vk,this,Gk).set(e,r),r;const s="g_".concat(Cv(qk,this),"_luminosity_map_").concat((Ev(Uk,this,(t=Cv(Uk,this),n=t++,t)),n)),o=jv(Vk,this,Xk).call(this,s);Sv(Vk,this,Gk).set(e,o),Sv(Vk,this,Gk).set(a,o);const l=jv(Vk,this,Zk).call(this,s);return jv(Vk,this,Jk).call(this,l),e&&jv(Vk,this,nN).call(this,i,l),o}addHighlightHCMFilter(e,t,n,i,a){var r;const s="".concat(t,"-").concat(n,"-").concat(i,"-").concat(a);let o=Sv(Vk,this,Qk).get(e);if((null===(r=o)||void 0===r?void 0:r.key)===s)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},Sv(Vk,this,Qk).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(jv(Vk,this,iN).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,p]=[i,a].map(jv(Vk,this,iN).bind(this));h<u&&([u,h,m,p]=[h,u,p,m]),Sv(Vk,this,Yk).style.color="";const f=(e,t,n)=>{const i=new Array(256),a=(h-u)/n,r=e/255,s=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*a),t=r+l*s;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},g="g_".concat(Cv(qk,this),"_hcm_").concat(e,"_filter"),v=o.filter=jv(Vk,this,Zk).call(this,g);return jv(Vk,this,$k).call(this,v),jv(Vk,this,tN).call(this,f(m[0],p[0],5),f(m[1],p[1],5),f(m[2],p[2],5),v),o.url=jv(Vk,this,Xk).call(this,g),o.url}destroy(){var e,t,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=Cv(Bk,this))&&void 0!==e&&e.size||(null===(t=Cv(zk,this))||void 0===t||t.parentNode.parentNode.remove(),Ev(zk,this,null),null===(n=Cv(Fk,this))||void 0===n||n.clear(),Ev(Fk,this,null),null===(i=Cv(Bk,this))||void 0===i||i.clear(),Ev(Bk,this,null),Ev(Uk,this,0))}}function Gk(e){return Cv(Fk,e)||Ev(Fk,e,new Map)}function Qk(e){return Cv(Bk,e)||Ev(Bk,e,new Map)}function Yk(e){if(!Cv(zk,e)){const t=Cv(Wk,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=Cv(Wk,e).createElementNS(Zb,"svg");i.setAttribute("width",0),i.setAttribute("height",0),Ev(zk,e,Cv(Wk,e).createElementNS(Zb,"defs")),t.append(i),i.append(Cv(zk,e)),Cv(Wk,e).body.append(t)}return Cv(zk,e)}function Kk(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,a=new Array(256),r=new Array(256),s=new Array(256);for(let o=0;o<256;o++)a[o]=t[o]/255,r[o]=n[o]/255,s[o]=i[o]/255;return[a.join(","),r.join(","),s.join(",")]}function Xk(e){if(void 0===Cv(Ik,this)){Ev(Ik,this,"");const e=Cv(Wk,this).URL;e!==Cv(Wk,this).baseURI&&(ax(e)?Cb('#createUrl: ignore "data:"-URL for performance reasons.'):Ev(Ik,this,Mb(e,"")))}return"url(".concat(Cv(Ik,this),"#").concat(e,")")}function Jk(e){const t=Cv(Wk,this).createElementNS(Zb,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function $k(e){const t=Cv(Wk,this).createElementNS(Zb,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function Zk(e){const t=Cv(Wk,this).createElementNS(Zb,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),Sv(Vk,this,Yk).append(t),t}function eN(e,t,n){const i=Cv(Wk,this).createElementNS(Zb,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function tN(e,t,n,i){const a=Cv(Wk,this).createElementNS(Zb,"feComponentTransfer");i.append(a),jv(Vk,this,eN).call(this,a,"feFuncR",e),jv(Vk,this,eN).call(this,a,"feFuncG",t),jv(Vk,this,eN).call(this,a,"feFuncB",n)}function nN(e,t){const n=Cv(Wk,this).createElementNS(Zb,"feComponentTransfer");t.append(n),jv(Vk,this,eN).call(this,n,"feFuncA",e)}function iN(e){return Sv(Vk,this,Yk).style.color=e,hx(getComputedStyle(Sv(Vk,this,Yk)).getPropertyValue("color"))}class aN{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch((e=>{throw new Error("Unable to load font data at: ".concat(n))}))}async _fetch(e){Eb("Abstract method `_fetch` called.")}}class rN extends aN{async _fetch(e){const t=await tx(e,"arraybuffer");return new Uint8Array(t)}}class sN{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch((e=>{throw new Error("Unable to load wasm data at: ".concat(n))}))}async _fetch(e){Eb("Abstract method `_fetch` called.")}}class oN extends sN{async _fetch(e){const t=await tx(e,"arraybuffer");return new Uint8Array(t)}}async function lN(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}Vv&&Cb("Please use the `legacy` build in Node.js environments.");class cN extends Lk{}class dN extends Pk{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///home/martin/Ontwikkeling/new-onboarding-2025/client/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class uN extends Rk{async _fetch(e){return lN(e)}}class hN extends aN{async _fetch(e){return lN(e)}}class mN extends sN{async _fetch(e){return lN(e)}}const pN="Fill",fN="Stroke",gN="Shading";function vN(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,i),e.clip(a)}class bN{isModifyingCurrentTransform(){return!1}getPattern(){Eb("Abstract method `getPattern` called.")}}class xN extends bN{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===fN||i===pN){const r=t.current.getClippedPathBoundingBox(i,mx(e))||[0,0,0,0],s=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=t.cachedCanvases.getCanvas("pattern",s,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-r[0],-r[1]),n=Vb.transform(n,[1,0,0,1,r[0],r[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),vN(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),a=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);a.setTransform(d)}else vN(e,this._bbox),a=this._createGradient(e);return a}}function yN(e,t,n,i,a,r,s,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=r,r=s,s=h),l[i+1]>l[a+1]&&(h=i,i=a,a=h,h=s,s=o,o=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=r,r=s,s=h);const m=(l[n]+t.offsetX)*t.scaleX,p=(l[n+1]+t.offsetY)*t.scaleY,f=(l[i]+t.offsetX)*t.scaleX,g=(l[i+1]+t.offsetY)*t.scaleY,v=(l[a]+t.offsetX)*t.scaleX,b=(l[a+1]+t.offsetY)*t.scaleY;if(p>=b)return;const x=c[r],y=c[r+1],w=c[r+2],_=c[s],k=c[s+1],N=c[s+2],j=c[o],S=c[o+1],C=c[o+2],E=Math.round(p),A=Math.round(b);let T,M,P,D,R,O,L,I;for(let F=E;F<=A;F++){if(F<g){const e=F<p?0:(p-F)/(p-g);T=m-(m-f)*e,M=x-(x-_)*e,P=y-(y-k)*e,D=w-(w-N)*e}else{let e;e=F>b?1:g===b?0:(g-F)/(g-b),T=f-(f-v)*e,M=_-(_-j)*e,P=k-(k-S)*e,D=N-(N-C)*e}let e;e=F<p?0:F>b?1:(p-F)/(p-b),R=m-(m-v)*e,O=x-(x-j)*e,L=y-(y-S)*e,I=w-(w-C)*e;const t=Math.round(Math.min(T,R)),n=Math.round(Math.max(T,R));let i=u*F+4*t;for(let a=t;a<=n;a++)e=(T-a)/(T-R),e<0?e=0:e>1&&(e=1),d[i++]=M-(M-O)*e|0,d[i++]=P-(P-L)*e|0,d[i++]=D-(D-I)*e|0,d[i++]=255}}function wN(e,t,n){const i=t.coords,a=t.colors;let r,s;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(r=0;r<l;r++){let t=r*o;for(let r=0;r<c;r++,t++)yN(e,n,i[t],i[t+1],i[t+o],a[t],a[t+1],a[t+o]),yN(e,n,i[t+o+1],i[t+1],i[t+o],a[t+o+1],a[t+1],a[t+o])}break;case"triangles":for(r=0,s=i.length;r<s;r+=3)yN(e,n,i[r],i[r+1],i[r+2],a[r],a[r+1],a[r+2]);break;default:throw new Error("illegal figure")}}class _N extends bN{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,s=Math.ceil(this._bounds[3])-a,o=Math.min(Math.ceil(Math.abs(r*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),c=r/o,d=s/l,u={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-a,scaleX:1/c,scaleY:1/d},h=o+4,m=l+4,p=n.getCanvas("mesh",h,m),f=p.context,g=f.createImageData(o,l);if(t){const e=g.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)wN(g,v,u);f.putImageData(g,2,2);return{canvas:p.canvas,offsetX:i-2*c,offsetY:a-2*d,scaleX:c,scaleY:d}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){vN(e,this._bbox);const a=new Float32Array(2);if(i===gN)Vb.singularValueDecompose2dScale(mx(e),a);else if(this.matrix){Vb.singularValueDecompose2dScale(this.matrix,a);const[e,n]=a;Vb.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=e,a[1]*=n}else Vb.singularValueDecompose2dScale(t.baseTransform,a);const r=this._createMeshCanvas(a,i===gN?null:this._background,t.cachedCanvases);return i!==gN&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(r.offsetX,r.offsetY),e.scale(r.scaleX,r.scaleY),e.createPattern(r.canvas,"no-repeat")}}class kN extends bN{getPattern(){return"hotpink"}}const NN=1,jN=2;class SN{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:a,color:r,canvasGraphicsFactory:s}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),Sb("TilingType: "+a);const c=t[0],d=t[1],u=t[2],h=t[3],m=u-c,p=h-d,f=new Float32Array(2);Vb.singularValueDecompose2dScale(this.matrix,f);const[g,v]=f;Vb.singularValueDecompose2dScale(this.baseTransform,f);const b=g*f[0],x=v*f[1];let y=m,w=p,_=!1,k=!1;const N=Math.ceil(o*b),j=Math.ceil(l*x);N>=Math.ceil(m*b)?y=o:_=!0,j>=Math.ceil(p*x)?w=l:k=!0;const S=this.getSizeAndScale(y,this.ctx.canvas.width,b),C=this.getSizeAndScale(w,this.ctx.canvas.height,x),E=e.cachedCanvases.getCanvas("pattern",S.size,C.size),A=E.context,T=s.createCanvasGraphics(A);if(T.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(T,i,r),A.translate(-S.scale*c,-C.scale*d),T.transform(S.scale,0,0,C.scale,0,0),A.save(),this.clipBbox(T,c,d,u,h),T.baseTransform=mx(T.ctx),T.executeOperatorList(n),T.endDrawing(),A.restore(),_||k){const t=E.canvas;_&&(y=o),k&&(w=l);const n=this.getSizeAndScale(y,this.ctx.canvas.width,b),i=this.getSizeAndScale(w,this.ctx.canvas.height,x),a=n.size,r=i.size,s=e.cachedCanvases.getCanvas("pattern-workaround",a,r),u=s.context,h=_?Math.floor(m/o):0,f=k?Math.floor(p/l):0;for(let e=0;e<=h;e++)for(let n=0;n<=f;n++)u.drawImage(t,a*e,r*n,a,r,0,0,a,r);return{canvas:s.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:c,offsetY:d}}return{canvas:E.canvas,scaleX:S.scale,scaleY:C.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,t,n){const i=Math.max(SN.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const r=i-t,s=a-n;e.ctx.rect(t,n,r,s),Vb.axialAlignedBoundingBox([t,n,i,a],mx(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case NN:const{fillStyle:e,strokeStyle:r}=this.ctx;i.fillStyle=a.fillColor=e,i.strokeStyle=a.strokeColor=r;break;case jN:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new Fb("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i){let a=n;i!==gN&&(a=Vb.transform(a,t.baseTransform),this.matrix&&(a=Vb.transform(a,this.matrix)));const r=this.createPatternCanvas(t);let s=new DOMMatrix(a);s=s.translate(r.offsetX,r.offsetY),s=s.scale(1/r.scaleX,1/r.scaleY);const o=e.createPattern(r.canvas,"repeat");return o.setTransform(s),o}}function CN(e){let{src:t,srcPos:n=0,dest:i,width:a,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}=e;const l=Bb.isLittleEndian?4278190080:255,[c,d]=o?[s,l]:[l,s],u=a>>3,h=7&a,m=t.length;i=new Uint32Array(i.buffer);let p=0;for(let f=0;f<r;f++){for(const a=n+u;n<a;n++){const e=n<m?t[n]:255;i[p++]=128&e?d:c,i[p++]=64&e?d:c,i[p++]=32&e?d:c,i[p++]=16&e?d:c,i[p++]=8&e?d:c,i[p++]=4&e?d:c,i[p++]=2&e?d:c,i[p++]=1&e?d:c}if(0===h)continue;const e=n<m?t[n++]:255;for(let t=0;t<h;t++)i[p++]=e&1<<7-t?d:c}return{srcPos:n,destPos:p}}l(SN,"MAX_PATTERN_SIZE",3e3);const EN=16,AN=new DOMMatrix,TN=new Float32Array(2),MN=new Float32Array([1/0,1/0,-1/0,-1/0]);class PN{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function DN(e,t,n,i,a,r,s,o,l,c){const[d,u,h,m,p,f]=mx(e);if(0===u&&0===h){const g=s*d+p,v=Math.round(g),b=o*m+f,x=Math.round(b),y=(s+l)*d+p,w=Math.abs(Math.round(y)-v)||1,_=(o+c)*m+f,k=Math.abs(Math.round(_)-x)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(m),v,x),e.drawImage(t,n,i,a,r,0,0,w,k),e.setTransform(d,u,h,m,p,f),[w,k]}if(0===d&&0===m){const g=o*h+p,v=Math.round(g),b=s*u+f,x=Math.round(b),y=(o+c)*h+p,w=Math.abs(Math.round(y)-v)||1,_=(s+l)*u+f,k=Math.abs(Math.round(_)-x)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,x),e.drawImage(t,n,i,a,r,0,0,k,w),e.setTransform(d,u,h,m,p,f),[k,w]}e.drawImage(t,n,i,a,r,s,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,m)*c]}class RN{constructor(e,t){l(this,"alphaIsShape",!1),l(this,"fontSize",0),l(this,"fontSizeScale",1),l(this,"textMatrix",null),l(this,"textMatrixScale",1),l(this,"fontMatrix",Hv),l(this,"leading",0),l(this,"x",0),l(this,"y",0),l(this,"lineX",0),l(this,"lineY",0),l(this,"charSpacing",0),l(this,"wordSpacing",0),l(this,"textHScale",1),l(this,"textRenderingMode",ab),l(this,"textRise",0),l(this,"fillColor","#000000"),l(this,"strokeColor","#000000"),l(this,"patternFill",!1),l(this,"patternStroke",!1),l(this,"fillAlpha",1),l(this,"strokeAlpha",1),l(this,"lineWidth",1),l(this,"activeSMask",null),l(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=MN.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===fN){t||Eb("Stroke bounding box must include transform."),Vb.singularValueDecompose2dScale(t,TN);const e=TN[0]*this.lineWidth/2,i=TN[1]*this.lineWidth/2;n[0]-=e,n[1]-=i,n[2]+=e,n[3]+=i}return n}updateClipFromPath(){const e=Vb.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(MN,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Vb.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ON(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,a=n%EN,r=(n-a)/EN,s=0===a?r:r+1,o=e.createImageData(i,EN);let l,c=0;const d=t.data,u=o.data;let h,m,p,f;if(t.kind===db.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),f=n.length,g=i+7>>3,v=4294967295,b=Bb.isLittleEndian?4278190080:255;for(h=0;h<s;h++){for(p=h<r?EN:a,l=0,m=0;m<p;m++){const e=t-c;let a=0;const r=e>g?i:8*e-7,s=-8&r;let o=0,u=0;for(;a<s;a+=8)u=d[c++],n[l++]=128&u?v:b,n[l++]=64&u?v:b,n[l++]=32&u?v:b,n[l++]=16&u?v:b,n[l++]=8&u?v:b,n[l++]=4&u?v:b,n[l++]=2&u?v:b,n[l++]=1&u?v:b;for(;a<r;a++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:b,o>>=1}for(;l<f;)n[l++]=0;e.putImageData(o,0,h*EN)}}else if(t.kind===db.RGBA_32BPP){for(m=0,f=i*EN*4,h=0;h<r;h++)u.set(d.subarray(c,c+f)),c+=f,e.putImageData(o,0,m),m+=EN;h<s&&(f=i*a*4,u.set(d.subarray(c,c+f)),e.putImageData(o,0,m))}else{if(t.kind!==db.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(p=EN,f=i*p,h=0;h<s;h++){for(h>=r&&(p=a,f=i*p),l=0,m=f;m--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*EN)}}}function LN(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,a=n%EN,r=(n-a)/EN,s=0===a?r:r+1,o=e.createImageData(i,EN);let l=0;const c=t.data,d=o.data;for(let u=0;u<s;u++){const t=u<r?EN:a;({srcPos:l}=CN({src:c,srcPos:l,dest:d,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,u*EN)}}function IN(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function FN(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function zN(e,t){if(t)return!0;Vb.singularValueDecompose2dScale(e,TN);const n=Math.fround(gx.pixelRatio*ex.PDF_TO_CSS_UNITS);return TN[0]<=n&&TN[1]<=n}const qN=["butt","round","square"],WN=["miter","round","bevel"],BN={},UN={};var VN=new WeakSet;class HN{constructor(e,t,n,i,a,r,s,o){let{optionalContentConfig:l,markedContentStack:c=null}=r;kv(this,VN),this.ctx=e,this.current=new RN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new PN(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:a=null}=e;const r=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,r,s),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",r,s);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...mx(this.compositeCtx))}this.ctx.save(),FN(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=mx(this.ctx)}executeOperatorList(e,t,n,i){const a=e.argsArray,r=e.fnArray;let s=t||0;const o=a.length;if(o===s)return s;const l=o-s>10&&"function"===typeof n,c=l?Date.now()+15:0;let d=0;const u=this.commonObjs,h=this.objs;let m;for(;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,n),s;if(m=r[s],m!==bb.dependency)this[m].apply(this,a[s]);else for(const e of a[s]){const t=e.startsWith("g_")?u:h;if(!t.has(e))return t.get(e,n),s}if(s++,s===o)return s;if(l&&++d>10){if(Date.now()>c)return n(),s;d=0}}}endDrawing(){jv(VN,this,GN).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),jv(VN,this,QN).call(this)}_scaleImage(e,t){var n,i;const a=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,r=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let s,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=a,u=r,h="prescale1";for(;l>2&&d>1||c>2&&u>1;){let t=d,n=u;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),s=this.cachedCanvases.getCanvas(h,t,n),o=s.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,u,0,0,t,n),e=s.canvas,d=t,u=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,a=this.current.fillColor,r=this.current.patternFill,s=mx(t);let o,l,c,d;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(r?s:[s.slice(0,4),a]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!r){return{canvas:n,offsetX:Math.round(Math.min(s[0],s[2])+s[4]),offsetY:Math.round(Math.min(s[1],s[3])+s[5])}}c=n}c||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),LN(d.context,e));let u=Vb.transform(s,[1/n,0,0,-1/i,0,0]);u=Vb.transform(u,[1,0,0,1,0,-i]);const h=MN.slice();Vb.axialAlignedBoundingBox([0,0,n,i],u,h);const[m,p,f,g]=h,v=Math.round(f-m)||1,b=Math.round(g-p)||1,x=this.cachedCanvases.getCanvas("fillCanvas",v,b),y=x.context,w=m,_=p;y.translate(-w,-_),y.transform(...u),c||(c=this._scaleImage(d.canvas,px(y)),c=c.img,o&&r&&o.set(l,c)),y.imageSmoothingEnabled=zN(mx(y),e.interpolate),DN(y,c,0,0,c.width,c.height,0,0,n,i),y.globalCompositeOperation="source-in";const k=Vb.transform(px(y),[1,0,0,1,-w,-_]);return y.fillStyle=r?a.getPattern(t,this,k,pN):a,y.fillRect(0,0,n,i),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,x.canvas)),{canvas:x.canvas,offsetX:Math.round(w),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=qN[e]}setLineJoin(e){this.ctx.lineJoin=WN[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),IN(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,a,r,s){t.transform(e,n,i,a,r,s),this.__originalTransform(e,n,i,a,r,s)},e.setTransform=function(e,n,i,a,r,s){t.setTransform(e,n,i,a,r,s),this.__originalSetTransform(e,n,i,a,r,s)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,a,r,s){t.bezierCurveTo(e,n,i,a,r,s),this.__originalBezierCurveTo(e,n,i,a,r,s)},e.rect=function(e,n,i,a){t.rect(e,n,i,a),this.__originalRect(e,n,i,a)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),IN(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],r=i[1],s=i[2]-a,o=i[3]-r;0!==s&&0!==o&&(this.genericComposeSMask(t.context,n,s,o,t.subtype,t.backdrop,t.transferMap,a,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,r,s,o,l,c,d){let u=e.canvas,h=o-c,m=l-d;if(r)if(h<0||m<0||h+n>u.width||m+i>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(u,-h,-m),t.globalCompositeOperation="destination-atop",t.fillStyle=r,t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over",u=e.canvas,h=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,m,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=r,e.fillRect(h,m,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===a&&s?t.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===a&&(t.filter=this.filterFactory.addLuminosityFilter(s));const p=new Path2D;p.rect(o,l,n,i),t.clip(p),t.globalCompositeOperation="destination-in",t.drawImage(u,h,m,n,i,o,l,n,i),t.restore()}save(){this.inSMaskMode&&IN(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&IN(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,i,a,r){this.ctx.transform(e,t,n,i,a,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[i]=t;if(!n)return i||(i=t[0]=new Path2D),void this[e](i);if(!(i instanceof Path2D)){const e=t[0]=new Path2D;for(let t=0,n=i.length;t<n;)switch(i[t++]){case xb:e.moveTo(i[t++],i[t++]);break;case yb:e.lineTo(i[t++],i[t++]);break;case wb:e.bezierCurveTo(i[t++],i[t++],i[t++],i[t++],i[t++],i[t++]);break;case _b:e.closePath();break;default:Cb("Unrecognized drawing path operator: ".concat(i[t-1]))}i=e}Vb.axialAlignedBoundingBox(n,mx(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof i&&null!==i&&void 0!==i&&i.getPattern){const t=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,px(n),fN),t){const i=new Path2D;i.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=i}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(fN,mx(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.ctx,i=this.current.fillColor;let a=!1;if(this.current.patternFill){const t=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,px(n),pN),t){const i=new Path2D;i.addPath(e,n.getTransform().invertSelf().multiplySelf(t)),e=i}a=!0}const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),a&&n.restore(),t&&this.consumePath(e,r)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=BN}eoClip(){this.pendingClip=UN}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return;const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:a,x:r,y:s,fontSize:o,path:l}of e)n.addPath(l,new DOMMatrix(a).preMultiplySelf(i).translate(r,s).scale(o,-o));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),a=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(a.fontMatrix=i.fontMatrix||Hv,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||Cb("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",s=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(r,'", ').concat(i.fallbackName);let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(s)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i,a){const r=this.ctx,s=this.current,o=s.font,l=s.textRenderingMode,c=s.fontSize/s.fontSizeScale,d=l&lb,u=!!(l&cb),h=s.patternFill&&!o.missingFile,m=s.patternStroke&&!o.missingFile;let p;if((o.disableFontFace||u||h||m)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||h||m){let e;if(r.save(),r.translate(t,n),r.scale(c,-c),d!==ab&&d!==sb||(i?(e=r.getTransform(),r.setTransform(...i),r.fill(jv(VN,this,YN).call(this,p,e,i))):r.fill(p)),d===rb||d===sb)if(a){e||(e=r.getTransform()),r.setTransform(...a);const{a:t,b:n,c:i,d:s}=e,o=Vb.inverseTransform(a),l=Vb.transform([t,n,i,s,0,0],o);Vb.singularValueDecompose2dScale(l,TN),r.lineWidth*=Math.max(TN[0],TN[1])/c,r.stroke(jv(VN,this,YN).call(this,p,e,a))}else r.lineWidth/=c,r.stroke(p);r.restore()}else d!==ab&&d!==sb||r.fillText(e,t,n),d!==rb&&d!==sb||r.strokeText(e,t,n);if(u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:mx(r),x:t,y:n,fontSize:c,path:p})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Pb(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(0===i)return;const a=this.ctx,r=t.fontSizeScale,s=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,d=e.length,u=n.vertical,h=u?1:-1,m=n.defaultVMetrics,p=i*t.fontMatrix[0],f=t.textRenderingMode===ab&&!n.disableFontFace&&!t.patternFill;let g,v;if(a.save(),t.textMatrix&&a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),l>0?a.scale(c,-1):a.scale(c,1),t.patternFill){a.save();const e=t.fillColor.getPattern(a,this,px(a),pN);g=mx(a),a.restore(),a.fillStyle=e}if(t.patternStroke){a.save();const e=t.strokeColor.getPattern(a,this,px(a),fN);v=mx(a),a.restore(),a.strokeStyle=e}let b=t.lineWidth;const x=t.textMatrixScale;if(0===x||0===b){const e=t.textRenderingMode&lb;e!==rb&&e!==sb||(b=this.getSinglePixelWidth())}else b/=x;if(1!==r&&(a.scale(r,r),b/=r),a.lineWidth=b,n.isInvalidPDFjsFont){const n=[];let i=0;for(const t of e)n.push(t.unicode),i+=t.width;return a.fillText(n.join(""),0,0),t.x+=i*p*c,a.restore(),void this.compose()}let y,w=0;for(y=0;y<d;++y){const t=e[y];if("number"===typeof t){w+=h*t*i/1e3;continue}let c=!1;const d=(t.isSpace?o:0)+s,b=t.fontChar,x=t.accent;let _,k,N=t.width;if(u){const e=t.vmetric||m,n=-(t.vmetric?e[1]:.5*N)*p,i=e[2]*p;N=e?-e[0]:N,_=n/r,k=(w+i)/r}else _=w/r,k=0;if(n.remeasure&&N>0){const e=1e3*a.measureText(b).width/i*r;if(N<e&&this.isFontSubpixelAAEnabled){const t=N/e;c=!0,a.save(),a.scale(t,1),_/=t}else N!==e&&(_+=(N-e)/2e3*i/r)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(f&&!x)a.fillText(b,_,k);else if(this.paintChar(b,_,k,g,v),x){const e=_+i*x.offset.x/r,t=k-i*x.offset.y/r;this.paintChar(x.fontChar,e,t,g,v)}w+=u?N*p-d*l:N*p+d*l,c&&a.restore()}u?t.y-=w:t.x+=w*c,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,a=n.fontSize,r=n.fontDirection,s=i.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*r,d=n.fontMatrix||Hv,u=e.length;let h,m,p,f;if(!(n.textRenderingMode===ob)&&0!==a){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(c,r),h=0;h<u;++h){if(m=e[h],"number"===typeof m){f=s*m*a/1e3,this.ctx.translate(f,0),n.x+=f*c;continue}const r=(m.isSpace?l:0)+o,u=i.charProcOperatorList[m.operatorListId];u?this.contentVisible&&(this.save(),t.scale(a,a),t.transform(...d),this.executeOperatorList(u),this.restore()):Cb('Type3 character "'.concat(m.operatorListId,'" is not available.'));const g=[m.width,0];Vb.applyTransform(g,d),p=g[0]*a+r,t.translate(p,0),n.x+=p*c}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,a,r){const s=new Path2D;s.rect(n,i,a-n,r-i),this.ctx.clip(s),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=this.baseTransform||mx(this.ctx),i={createCanvasGraphics:e=>new HN(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new SN(e,this.ctx,i,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new xN(e);case"Mesh":return new _N(e);case"Dummy":return new kN}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,px(t),gN);const i=px(t);if(i){const{width:e,height:n}=t.canvas,a=MN.slice();Vb.axialAlignedBoundingBox([0,0,e,n],i,a);const[r,s,o,l]=a;this.ctx.fillRect(r,s,o-r,l-s)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Eb("Should not call beginInlineImage")}beginImageData(){Eb("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=mx(this.ctx),t)){Vb.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[e,n,i,a]=t,r=new Path2D;r.rect(e,n,i-e,a-n),this.ctx.clip(r),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Sb("TODO: Support non-isolated groups."),e.knockout&&Cb("Knockout groups not supported.");const n=mx(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=MN.slice();Vb.axialAlignedBoundingBox(e.bbox,mx(t),i);const a=[0,0,t.canvas.width,t.canvas.height];i=Vb.intersect(i,a)||[0,0,0,0];const r=Math.floor(i[0]),s=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-r,1),l=Math.max(Math.ceil(i[3])-s,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,o,l),u=d.context;u.translate(-r,-s),u.transform(...n);let h=new Path2D;const[m,p,f,g]=e.bbox;if(h.rect(m,p,f-m,g-p),e.matrix){const t=new Path2D;t.addPath(h,new DOMMatrix(e.matrix)),h=t}u.clip(h),e.smask?this.smaskStack.push({canvas:d.canvas,context:u,offsetX:r,offsetY:s,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,s),t.save()),IN(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=mx(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=MN.slice();Vb.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e,n),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,a){if(jv(VN,this,GN).call(this),FN(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const i=t[2]-t[0],r=t[3]-t[1];if(a&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=i,t[3]=r,Vb.singularValueDecompose2dScale(mx(this.ctx),TN);const{viewportScale:a}=this,s=Math.ceil(i*this.outputScaleX*a),o=Math.ceil(r*this.outputScaleY*a);this.annotationCanvas=this.canvasFactory.create(s,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(TN[0],0,0,-TN[1],0,r*TN[1]),FN(this.ctx)}else{FN(this.ctx),this.endPath();const e=new Path2D;e.rect(t[0],t[1],i,r),this.ctx.clip(e)}}this.current=new RN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),jv(VN,this,QN).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const s=this.ctx;s.save();const o=mx(s);s.transform(t,n,i,a,0,0);const l=this._createMaskCanvas(e);s.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,d=r.length;c<d;c+=2){const e=Vb.transform(o,[t,n,i,a,r[c],r[c+1]]);s.drawImage(l.canvas,e[4],e[5])}s.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const a of e){const{data:e,width:r,height:s,transform:o}=a,l=this.cachedCanvases.getCanvas("maskCanvas",r,s),c=l.context;c.save();LN(c,this.getObject(e,a)),c.globalCompositeOperation="source-in",c.fillStyle=i?n.getPattern(c,this,px(t),pN):n,c.fillRect(0,0,r,s),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),DN(t,l.canvas,0,0,r,s,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):Cb("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a)return void Cb("Dependent image isn't ready yet");const r=a.width,s=a.height,o=[];for(let l=0,c=i.length;l<c;l+=2)o.push({transform:[t,0,0,n,i[l],i[l+1]],x:0,y:0,w:r,h:s});this.paintInlineImageXObjectGroup(a,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),r=a.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;this.save();const{filter:a}=i;let r;if("none"!==a&&""!==a&&(i.filter="none"),i.scale(1/t,-1/n),e.bitmap)r=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)r=e;else{const i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ON(i,e),r=this.applyTransferMapsToCanvas(i)}const s=this._scaleImage(r,px(i));i.imageSmoothingEnabled=zN(mx(i),e.interpolate),DN(i,s.img,0,0,s.paintWidth,s.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const t=e.width,n=e.height,a=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ON(a,e),i=this.applyTransferMapsToCanvas(a)}for(const a of t)n.save(),n.transform(...a.transform),n.scale(1,-1),DN(n,i,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===UN?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=mx(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let r,s;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(a);if(n===i)if(0===e)r=s=1/n;else{const t=n*e;r=s=t<1?1/t:1}else if(0===e)r=1/n,s=1/i;else{const t=n*e,a=i*e;r=t<1?1/t:1,s=a<1?1/a:1}}else{const o=Math.abs(t*a-n*i),l=Math.hypot(t,n),c=Math.hypot(i,a);if(0===e)r=c/o,s=l/o;else{const t=e*o;r=c>t?c/t:1,s=l>t?l/t:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=s}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[a,r]=this.getScaleForStroking();if(a===r)return n.lineWidth=(i||1)*a,void n.stroke(e);const s=n.getLineDash();t&&n.save(),n.scale(a,r),AN.a=1/a,AN.d=1/r;const o=new Path2D;if(o.addPath(e,AN),s.length>0){const e=Math.max(a,r);n.setLineDash(s.map((t=>t/e))),n.lineDashOffset/=e}n.lineWidth=i||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function GN(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function QN(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function YN(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}for(const n in bb)void 0!==HN.prototype[n]&&(HN.prototype[bb[n]]=HN.prototype[n]);class KN{static get workerPort(){return jv(KN,this,XN)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");XN._=jv(KN,this,e)}static get workerSrc(){return jv(KN,this,JN)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");JN._=jv(KN,this,e)}}var XN={_:null},JN={_:""},$N=new WeakMap,ZN=new WeakMap;class ej{constructor(e){let{parsedData:t,rawData:n}=e;Nv(this,$N,void 0),Nv(this,ZN,void 0),Ev($N,this,t),Ev(ZN,this,n)}getRaw(){return Cv(ZN,this)}get(e){var t;return null!==(t=Cv($N,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return Cv($N,this).entries()}}const tj=Symbol("INTERNAL");var nj=new WeakMap,ij=new WeakMap,aj=new WeakMap,rj=new WeakMap;class sj{constructor(e,t){let{name:n,intent:i,usage:a,rbGroups:r}=t;Nv(this,nj,!1),Nv(this,ij,!1),Nv(this,aj,!1),Nv(this,rj,!0),Ev(nj,this,!!(e&Yv)),Ev(ij,this,!!(e&Kv)),this.name=n,this.intent=i,this.usage=a,this.rbGroups=r}get visible(){if(Cv(aj,this))return Cv(rj,this);if(!Cv(rj,this))return!1;const{print:e,view:t}=this.usage;return Cv(nj,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!Cv(ij,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==tj&&Eb("Internal method `_setVisible` called."),Ev(aj,this,n),Ev(rj,this,t)}}var oj=new WeakMap,lj=new WeakMap,cj=new WeakMap,dj=new WeakMap,uj=new WeakSet;class hj{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yv;if(kv(this,uj),Nv(this,oj,null),Nv(this,lj,new Map),Nv(this,cj,null),Nv(this,dj,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,Ev(dj,this,e.order);for(const n of e.groups)Cv(lj,this).set(n.id,new sj(t,n));if("OFF"===e.baseState)for(const e of Cv(lj,this).values())e._setVisible(tj,!1);for(const t of e.on)Cv(lj,this).get(t)._setVisible(tj,!0);for(const t of e.off)Cv(lj,this).get(t)._setVisible(tj,!1);Ev(cj,this,this.getHash())}}isVisible(e){if(0===Cv(lj,this).size)return!0;if(!e)return Sb("Optional content group not defined."),!0;if("OCG"===e.type)return Cv(lj,this).has(e.id)?Cv(lj,this).get(e.id).visible:(Cb("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return jv(uj,this,mj).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!Cv(lj,this).has(t))return Cb("Optional content group not found: ".concat(t)),!0;if(Cv(lj,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!Cv(lj,this).has(t))return Cb("Optional content group not found: ".concat(t)),!0;if(!Cv(lj,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!Cv(lj,this).has(t))return Cb("Optional content group not found: ".concat(t)),!0;if(!Cv(lj,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!Cv(lj,this).has(t))return Cb("Optional content group not found: ".concat(t)),!0;if(Cv(lj,this).get(t).visible)return!1}return!0}return Cb("Unknown optional content policy ".concat(e.policy,".")),!0}return Cb("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Cv(lj,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var a;if(n!==e)null===(a=Cv(lj,this).get(n))||void 0===a||a._setVisible(tj,!1,!0)}i._setVisible(tj,!!t,!0),Ev(oj,this,null)}else Cb("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const a of n){switch(a){case"ON":case"OFF":case"Toggle":t=a;continue}const e=Cv(lj,this).get(a);if(e)switch(t){case"ON":this.setVisibility(a,!0,i);break;case"OFF":this.setVisibility(a,!1,i);break;case"Toggle":this.setVisibility(a,!e.visible,i)}}Ev(oj,this,null)}get hasInitialVisibility(){return null===Cv(cj,this)||this.getHash()===Cv(cj,this)}getOrder(){return Cv(lj,this).size?Cv(dj,this)?Cv(dj,this).slice():[...Cv(lj,this).keys()]:null}getGroup(e){return Cv(lj,this).get(e)||null}getHash(){if(null!==Cv(oj,this))return Cv(oj,this);const e=new Q_;for(const[t,n]of Cv(lj,this))e.update("".concat(t,":").concat(n.visible));return Ev(oj,this,e.hexdigest())}[Symbol.iterator](){return Cv(lj,this).entries()}}function mj(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let a;if(Array.isArray(t))a=jv(uj,this,mj).call(this,t);else{if(!Cv(lj,this).has(t))return Cb("Optional content group not found: ".concat(t)),!0;a=Cv(lj,this).get(t).visible}switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===n}class pj{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;Ab(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:r,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,(null===r||void 0===r?void 0:r.length)>0){const e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),e.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),e.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),e.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{Ab(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,a;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(a=i.onProgress)||void 0===a||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ab(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new fj(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new gj(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class fj{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=rx(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class gj{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function vj(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function bj(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function xj(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:a}=e;const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(s))return r;if(r.suggestedLength=s,s<=2*i)return r;if(a||!n)return r;if("bytes"!==t.get("Accept-Ranges"))return r;return"identity"!==(t.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function yj(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=s(n);return e=unescape(e),e=o(e),e=l(e),r(e)}if(n=function(e){const t=[];let n;const a=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=a.exec(e));){let[,e,i,a]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,a]}const r=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=s(n),e&&(n=unescape(n),0===i&&(n=o(n))),r.push(n)}return r.join("")}(e),n)return r(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=s(n);return e=l(e),r(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function a(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),a=Wb(n);n=i.decode(a),t=!1}catch(i){}}return n}function r(e){return t&&/[\x80-\xff]/.test(e)&&(e=a("utf-8",e),t&&(e=a("iso-8859-1",e))),e}function s(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:a(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,i){if("q"===n||"Q"===n)return i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})),a(t,i);try{i=atob(i)}catch(r){}return a(t,i)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(rx(e))return e}return null}function wj(e,t){return new Ib("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function _j(e){return 200===e||206===e}function kj(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Nj(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Cb("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class jj{constructor(e){l(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=vj(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Ab(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Sj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Cj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Sj{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,kj(n,this._withCredentials,this._abortController)).then((t=>{if(e._responseOrigin=bj(t.url),!_j(t.status))throw wj(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:a,suggestedLength:r}=xj({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=r||this._contentLength,this._filename=yj(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zb("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Nj(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class Cj{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range","bytes=".concat(t,"-").concat(n-1));const r=i.url;fetch(r,kj(a,this._withCredentials,this._abortController)).then((t=>{const n=bj(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!_j(t.status))throw wj(t.status,r);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:Nj(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class Ej{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;l(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=vj(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,r]of this.headers)t.setRequestHeader(a,r);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",Ab(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError(i.status);const a=i.status||200;if(!(200===a&&206===n.expectedStatus)&&a!==n.expectedStatus)return void n.onError(i.status);const r=function(e){const t=e.response;return"string"!==typeof t?t:Wb(t).buffer}(i);if(206===a){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:r}):(Cb('Missing or invalid "Content-Range" header.'),n.onError(0))}else r?n.onDone({begin:0,chunk:r}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Aj{constructor(e){this._source=e,this._manager=new Ej(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ab(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Tj(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Mj(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Tj{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=bj(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map((e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]})):[]),{allowRangeRequests:a,suggestedLength:r}=xj({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=yj(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=wj(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Mj{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=bj(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=wj(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Pj=/^[a-z][a-z0-9\-+.]+:/i;class Dj{constructor(e){this.source=e,this.url=function(e){if(Pj.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),Ab("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Ab(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Rj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Oj(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Rj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then((e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()}),(e=>{"ENOENT"===e.code&&(e=wj(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)}))}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new zb("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Oj{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}const Lj=Symbol("INITIAL_DATA");var Ij=new WeakMap,Fj=new WeakSet;class zj{constructor(){kv(this,Fj),Nv(this,Ij,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=jv(Fj,this,qj).call(this,e);return n.promise.then((()=>t(n.data))),null}const n=Cv(Ij,this)[e];if(!n||n.data===Lj)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=Cv(Ij,this)[e];return!!t&&t.data!==Lj}delete(e){const t=Cv(Ij,this)[e];return!(!t||t.data===Lj)&&(delete Cv(Ij,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=jv(Fj,this,qj).call(this,e);n.data=t,n.resolve()}clear(){for(const t in Cv(Ij,this)){var e;const{data:n}=Cv(Ij,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}Ev(Ij,this,Object.create(null))}*[Symbol.iterator](){for(const e in Cv(Ij,this)){const{data:t}=Cv(Ij,this)[e];t!==Lj&&(yield[e,t])}}}function qj(e){var t;return(t=Cv(Ij,this))[e]||(t[e]=d(d({},Promise.withResolvers()),{},{data:Lj}))}var Wj=new WeakMap,Bj=new WeakMap,Uj=new WeakMap,Vj=new WeakMap,Hj=new WeakMap,Gj=new WeakMap,Qj=new WeakMap,Yj=new WeakMap,Kj=new WeakMap,Xj=new WeakMap,Jj=new WeakMap,$j=new WeakMap,Zj=new WeakMap,eS=new WeakMap,tS=new WeakMap,nS=new WeakMap,iS=new WeakMap,aS=new WeakMap,rS=new WeakSet;class sS{constructor(e){var t;let{textContentSource:n,container:i,viewport:a}=e;if(kv(this,rS),Nv(this,Wj,Promise.withResolvers()),Nv(this,Bj,null),Nv(this,Uj,!1),Nv(this,Vj,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),Nv(this,Hj,null),Nv(this,Gj,null),Nv(this,Qj,0),Nv(this,Yj,0),Nv(this,Kj,null),Nv(this,Xj,null),Nv(this,Jj,0),Nv(this,$j,0),Nv(this,Zj,Object.create(null)),Nv(this,eS,[]),Nv(this,tS,null),Nv(this,nS,[]),Nv(this,iS,new WeakMap),Nv(this,aS,null),n instanceof ReadableStream)Ev(tS,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');Ev(tS,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}Ev(Bj,this,Ev(Xj,this,i)),Ev($j,this,a.scale*gx.pixelRatio),Ev(Jj,this,a.rotation),Ev(Gj,this,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:l}=a.rawDims;Ev(aS,this,[1,0,0,-1,-o,l+s]),Ev(Yj,this,r),Ev(Qj,this,s),hS.call(sS),fx(i,a),Cv(Wj,this).promise.finally((()=>{bS._.delete(this),Ev(Gj,this,null),Ev(Zj,this,null)})).catch((()=>{}))}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Bb.platform;return Pb(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{Cv(Kj,this).read().then((t=>{var n;let{value:i,done:a}=t;a?Cv(Wj,this).resolve():(null!==(n=Cv(Hj,this))&&void 0!==n||Ev(Hj,this,i.lang),Object.assign(Cv(Zj,this),i.styles),jv(rS,this,oS).call(this,i.items),e())}),Cv(Wj,this).reject)};return Ev(Kj,this,Cv(tS,this).getReader()),bS._.add(this),e(),Cv(Wj,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*gx.pixelRatio,a=t.rotation;if(a!==Cv(Jj,this)&&(null===n||void 0===n||n(),Ev(Jj,this,a),fx(Cv(Xj,this),{rotation:a})),i!==Cv($j,this)){null===n||void 0===n||n(),Ev($j,this,i);const e={div:null,properties:null,ctx:dS.call(sS,Cv(Hj,this))};for(const t of Cv(nS,this))e.properties=Cv(iS,this).get(t),e.div=t,jv(rS,this,cS).call(this,e)}}cancel(){var e;const t=new zb("TextLayer task cancelled.");null===(e=Cv(Kj,this))||void 0===e||e.cancel(t).catch((()=>{})),Ev(Kj,this,null),Cv(Wj,this).reject(t)}get textDivs(){return Cv(nS,this)}get textContentItemsStr(){return Cv(eS,this)}static cleanup(){if(!(jv(sS,this,bS)._.size>0)){jv(sS,this,pS)._.clear();for(const{canvas:e}of jv(sS,this,fS)._.values())e.remove();jv(sS,this,fS)._.clear()}}}function oS(e){var t,n;if(Cv(Uj,this))return;null!==(n=(t=Cv(Gj,this)).ctx)&&void 0!==n||(t.ctx=dS.call(Rv,Cv(Hj,this)));const i=Cv(nS,this),a=Cv(eS,this);for(const r of e){if(i.length>1e5)return Cb("Ignoring additional textDivs for performance reasons."),void Ev(Uj,this,!0);if(void 0!==r.str)a.push(r.str),jv(rS,this,lS).call(this,r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const e=Cv(Bj,this);Ev(Bj,this,document.createElement("span")),Cv(Bj,this).classList.add("markedContent"),null!==r.id&&Cv(Bj,this).setAttribute("id","".concat(r.id)),e.append(Cv(Bj,this))}else"endMarkedContent"===r.type&&Ev(Bj,this,Cv(Bj,this).parentNode)}}function lS(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};Cv(nS,this).push(t);const i=Vb.transform(Cv(aS,this),e.transform);let a=Math.atan2(i[1],i[0]);const r=Cv(Zj,this)[e.fontName];r.vertical&&(a+=Math.PI/2);let s=Cv(Vj,this)&&r.fontSubstitution||r.fontFamily;s=Rv.fontFamilyMap.get(s)||s;const o=Math.hypot(i[2],i[3]),l=o*mS.call(Rv,s,r,Cv(Hj,this));let c,d;0===a?(c=i[4],d=i[5]-l):(c=i[4]+l*Math.sin(a),d=i[5]-l*Math.cos(a));const u="calc(var(--total-scale-factor) *",h=t.style;Cv(Bj,this)===Cv(Xj,this)?(h.left="".concat((100*c/Cv(Yj,this)).toFixed(2),"%"),h.top="".concat((100*d/Cv(Qj,this)).toFixed(2),"%")):(h.left="".concat(u).concat(c.toFixed(2),"px)"),h.top="".concat(u).concat(d.toFixed(2),"px)")),h.fontSize="".concat(u).concat((vS._*o).toFixed(2),"px)"),h.fontFamily=s,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,Cv(Vj,this)&&(t.dataset.fontName=r.fontSubstitutionLoadedName||e.fontName),0!==a&&(n.angle=a*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(m=!0)}if(m&&(n.canvasWidth=r.vertical?e.height:e.width),Cv(iS,this).set(t,n),Cv(Gj,this).div=t,Cv(Gj,this).properties=n,jv(rS,this,cS).call(this,Cv(Gj,this)),n.hasText&&Cv(Bj,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),Cv(Bj,this).append(e)}}function cS(e){const{div:t,properties:n,ctx:i}=e,{style:a}=t;let r="";if(vS._>1&&(r="scale(".concat(1/vS._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=a,{canvasWidth:s,fontSize:o}=n;uS.call(Rv,i,o*Cv($j,this),e);const{width:l}=i.measureText(t.textContent);l>0&&(r="scaleX(".concat(s*Cv($j,this)/l,") ").concat(r))}0!==n.angle&&(r="rotate(".concat(n.angle,"deg) ").concat(r)),r.length>0&&(a.transform=r)}function dS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=jv(Rv,this,fS)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),jv(Rv,this,fS)._.set(e,t),jv(Rv,this,gS)._.set(t,{size:0,family:""})}return t}function uS(e,t,n){const i=jv(Rv,this,gS)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function hS(){if(null!==jv(Rv,this,vS)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),vS._=jv(Rv,this,e.getBoundingClientRect().height),e.remove()}function mS(e,t,n){const i=jv(Rv,this,pS)._.get(e);if(i)return i;const a=jv(Rv,this,dS).call(this,n);a.canvas.width=a.canvas.height=30,jv(Rv,this,uS).call(this,a,30,e);const r=a.measureText(""),s=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let l=.8;return s?l=s/(s+o):(Bb.platform.isFirefox&&Cb("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),jv(Rv,this,pS)._.set(e,l),l}Rv=sS;var pS={_:new Map},fS={_:new Map},gS={_:new WeakMap},vS={_:null},bS={_:new Set};class xS{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let a=null;const r=n.name;if("#text"===r)a=n.value;else{if(!xS.shouldBuildText(r))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?a=n.attributes.textContent:n.value&&(a=n.value)}if(null!==a&&t.push({str:a}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}function yS(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new wS,{docId:a}=i,r=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(Vv)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,s=n.data?function(e){if(Vv&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return Wb(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,d=n.range instanceof ES?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let h=n.worker instanceof zS?n.worker:null;const m=n.verbosity,p="string"!==typeof n.docBaseUrl||ax(n.docBaseUrl)?null:n.docBaseUrl,f=sk(n.cMapUrl),g=!1!==n.cMapPacked,v=n.CMapReaderFactory||(Vv?uN:Ok),b=sk(n.iccUrl),x=sk(n.standardFontDataUrl),y=n.StandardFontDataFactory||(Vv?hN:rN),w=sk(n.wasmUrl),_=n.WasmFactory||(Vv?mN:oN),k=!0!==n.stopAtErrors,N=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,j=!1!==n.isEvalSupported,S="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!Vv,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!Vv&&(Bb.platform.isFirefox||!globalThis.chrome),E=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,A="boolean"===typeof n.disableFontFace?n.disableFontFace:Vv,T=!0===n.fontExtraProperties,M=!0===n.enableXfa,P=n.ownerDocument||globalThis.document,D=!0===n.disableRange,R=!0===n.disableStream,O=!0===n.disableAutoFetch,L=!0===n.pdfBug,I=n.CanvasFactory||(Vv?dN:Dk),F=n.FilterFactory||(Vv?cN:Hk),z=!0===n.enableHWA,q=!1!==n.useWasm,W=d?d.length:null!==(t=n.length)&&void 0!==t?t:NaN,B="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!Vv&&!A,U="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===Ok&&y===rN&&_===oN&&f&&x&&w&&ox(f,document.baseURI)&&ox(x,document.baseURI)&&ox(w,document.baseURI));Nb(m);const V={canvasFactory:new I({ownerDocument:P,enableHWA:z}),filterFactory:new F({docId:a,ownerDocument:P}),cMapReaderFactory:U?null:new v({baseUrl:f,isCompressed:g}),standardFontDataFactory:U?null:new y({baseUrl:x}),wasmFactory:U?null:new _({baseUrl:w})};h||(h=zS.create({verbosity:m,port:KN.workerPort}),i._worker=h);const H={docId:a,apiVersion:"5.3.31",data:s,password:c,disableAutoFetch:O,rangeChunkSize:u,length:W,docBaseUrl:p,enableXfa:M,evaluatorOptions:{maxImageSize:N,disableFontFace:A,ignoreErrors:k,isEvalSupported:j,isOffscreenCanvasSupported:S,isImageDecoderSupported:C,canvasMaxAreaInBytes:E,fontExtraProperties:T,useSystemFonts:B,useWasm:q,useWorkerFetch:U,cMapUrl:f,iccUrl:b,standardFontDataUrl:x,wasmUrl:w}},G={ownerDocument:P,pdfBug:L,styleElement:null,loadingParams:{disableAutoFetch:O,enableXfa:M}};return h.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const e=h.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);let t;if(d)t=new pj(d,{disableRange:D,disableStream:R});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const e=ox(r)?jj:Vv?Dj:Aj;t=new e({url:r,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:D,disableStream:R})}return e.then((e=>{if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const n=new Sk(a,e,h.port),r=new eC(n,i,t,G,V);i._transport=r,n.send("Ready",null)}))})).catch(i._capability.reject),i}class wS{constructor(){l(this,"_capability",Promise.withResolvers()),l(this,"_transport",null),l(this,"_worker",null),l(this,"docId","d".concat((_S._=(Ov=_S._,Lv=Ov++,Ov),Lv))),l(this,"destroyed",!1),l(this,"onPassword",null),l(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(a){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,a}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var _S={_:0},kS=new WeakMap,NS=new WeakMap,jS=new WeakMap,SS=new WeakMap,CS=new WeakMap;class ES{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Nv(this,kS,Promise.withResolvers()),Nv(this,NS,[]),Nv(this,jS,[]),Nv(this,SS,[]),Nv(this,CS,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){Cv(CS,this).push(e)}addProgressListener(e){Cv(SS,this).push(e)}addProgressiveReadListener(e){Cv(jS,this).push(e)}addProgressiveDoneListener(e){Cv(NS,this).push(e)}onDataRange(e,t){for(const n of Cv(CS,this))n(e,t)}onDataProgress(e,t){Cv(kS,this).promise.then((()=>{for(const n of Cv(SS,this))n(e,t)}))}onDataProgressiveRead(e){Cv(kS,this).promise.then((()=>{for(const t of Cv(jS,this))t(e)}))}onDataProgressiveDone(){Cv(kS,this).promise.then((()=>{for(const e of Cv(NS,this))e()}))}transportReady(){Cv(kS,this).resolve()}requestDataRange(e,t){Eb("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class AS{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Pb(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var TS=new WeakMap,MS=new WeakSet;class PS{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];kv(this,MS),Nv(this,TS,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new sx:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new zj,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new nx({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Pb(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:i,viewport:a,intent:r="display",annotationMode:s=tb.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:m=!1}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(r,s,h,m),{renderingIntent:f,cacheKey:g}=p;Ev(TS,this,!1),c||(c=this._transport.getOptionalContentConfig(f));let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const b=!!(f&Kv);var x;v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(x=this._stats)||void 0===x||x.time("Page Request"),this._pumpOperatorList(p));const y=e=>{var t;(v.renderTasks.delete(w),b&&Ev(TS,this,!0),jv(MS,this,DS).call(this),e?(w.capability.reject(e),this._abortOperatorList({intentState:v,reason:e instanceof Error?e:new Error(e)})):w.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new rC({callback:y,params:{canvasContext:i,viewport:a,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:u});((n=v).renderTasks||(n.renderTasks=new Set)).add(w);const _=w.task;return Promise.all([v.displayReadyCapability.promise,c]).then((e=>{var t;let[n,i]=e;if(this.destroyed)y();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:n,optionalContentConfig:i}),w.operatorListChanged()}})).catch(y),_}getOperatorList(){let{intent:e="display",annotationMode:t=tb.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=this._transport.getRenderingIntent(e,t,n,i,!0);let r,s=this._intentStates.get(a.cacheKey);var o,l;(s||(s=Object.create(null),this._intentStates.set(a.cacheKey,s)),s.opListReadCapability)||(r=Object.create(null),r.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(r))},s.opListReadCapability=Promise.withResolvers(),((o=s).renderTasks||(o.renderTasks=new Set)).add(r),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(a));return s.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>xS.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const i=t.getReader(),a={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then((function(n){var i;let{value:r,done:s}=n;s?e(a):(null!==(i=a.lang)&&void 0!==i||(a.lang=r.lang),Object.assign(a.styles,r.styles),a.items.push(...r.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),Ev(TS,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ev(TS,this,!0);const t=jv(MS,this,DS).call(this);return e&&t&&this._stats&&(this._stats=new sx),t}_startRenderPage(e,t){var n,i;const a=this._intentStates.get(t);a&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=a.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&jv(MS,this,DS).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:a}=e;const{map:r,transfer:s}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:r,modifiedIds:a},s).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then((e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())}),(e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();jv(MS,this,DS).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}}))};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof ix){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new zb(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function DS(){if(!Cv(TS,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ev(TS,this,!1),!0}var RS=new WeakMap,OS=new WeakMap,LS=new WeakMap,IS=new WeakMap,FS=new WeakSet;class zS{constructor(){let{name:e=null,port:t=null,verbosity:n=jb()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(kv(this,FS),Nv(this,RS,Promise.withResolvers()),Nv(this,OS,null),Nv(this,LS,null),Nv(this,IS,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(QS._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");QS._.set(t,this),jv(FS,this,WS).call(this,t)}else jv(FS,this,BS).call(this)}get promise(){return Cv(RS,this).promise}get port(){return Cv(LS,this)}get messageHandler(){return Cv(OS,this)}destroy(){var e,t;this.destroyed=!0,null===(e=Cv(IS,this))||void 0===e||e.terminate(),Ev(IS,this,null),QS._.delete(Cv(LS,this)),Ev(LS,this,null),null===(t=Cv(OS,this))||void 0===t||t.destroy(),Ev(OS,this,null)}static create(e){const t=jv(zS,this,QS)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new zS(e)}static get workerSrc(){if(KN.workerSrc)return KN.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Pb(this,"_setupFakeWorkerGlobal",(async()=>{if(Sv(zS,this,VS))return Sv(zS,this,VS);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function qS(){Cv(RS,this).resolve(),Cv(OS,this).send("configure",{verbosity:this.verbosity})}function WS(e){Ev(LS,this,e),Ev(OS,this,new Sk("main","worker",e)),Cv(OS,this).on("ready",(()=>{})),jv(FS,this,qS).call(this)}function BS(){if(GS._||VS(Iv))return void jv(FS,this,US).call(this);let{workerSrc:e}=Iv;try{Iv._isSameOrigin(window.location,e)||(e=Iv._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Sk("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?Cv(RS,this).reject(new Error("Worker was destroyed")):jv(FS,this,US).call(this)},a=new AbortController;t.addEventListener("error",(()=>{Cv(IS,this)||i()}),{signal:a.signal}),n.on("test",(e=>{a.abort(),!this.destroyed&&e?(Ev(OS,this,n),Ev(LS,this,t),Ev(IS,this,t),jv(FS,this,qS).call(this)):i()})),n.on("ready",(e=>{if(a.abort(),this.destroyed)i();else try{r()}catch(t){jv(FS,this,US).call(this)}}));const r=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void r()}catch(t){Sb("The worker has been disabled.")}jv(FS,this,US).call(this)}function US(){GS._||(Cb("Setting up fake worker."),GS._=!0),Iv._setupFakeWorkerGlobal.then((e=>{var t,n;if(this.destroyed)return void Cv(RS,this).reject(new Error("Worker was destroyed"));const i=new uk;Ev(LS,this,i);const a="fake".concat((HS._=(t=HS._,n=t++,t),n)),r=new Sk(a+"_worker",a,i);e.setup(r,i),Ev(OS,this,new Sk(a,a+"_worker",i)),jv(FS,this,qS).call(this)})).catch((e=>{Cv(RS,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}function VS(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}Iv=zS;var HS={_:0},GS={_:!1},QS={_:new WeakMap};Vv&&(GS._=jv(Iv,Iv,!0),KN.workerSrc||(KN.workerSrc="./pdf.worker.mjs")),Iv._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(t,n);return n.origin===i.origin},Iv._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Iv.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Iv.create(e)};var YS=new WeakMap,KS=new WeakMap,XS=new WeakMap,JS=new WeakMap,$S=new WeakMap,ZS=new WeakSet;class eC{constructor(e,t,n,i,a){kv(this,ZS),Nv(this,YS,new Map),Nv(this,KS,new Map),Nv(this,XS,new Map),Nv(this,JS,new Map),Nv(this,$S,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new zj,this.fontLoader=new ak({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Pb(this,"annotationStorage",new Z_)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tb.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=Yv,s=Y_;switch(e){case"any":r=Qv;break;case"display":break;case"print":r=Kv;break;default:Cb("getRenderingIntent - invalid intent: ".concat(e))}const o=r&Kv&&n instanceof nk?n:this.annotationStorage;switch(t){case tb.DISABLE:r+=$v;break;case tb.ENABLE:break;case tb.ENABLE_FORMS:r+=Xv;break;case tb.ENABLE_STORAGE:r+=Jv,s=o.serializable;break;default:Cb("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(r+=Zv),a&&(r+=eb);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:r,cacheKey:[r,s.hash,c].join("_"),annotationStorageSerializable:s,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=Cv($S,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of Cv(KS,this).values())t.push(i._destroy());Cv(KS,this).clear(),Cv(XS,this).clear(),Cv(JS,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),Cv(YS,this).clear(),this.filterFactory.destroy(),sS.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new zb("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{Ab(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:i}=e;i?t.close():(Ab(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:a}=this._fullReader;if(!n||!i){var r;if(this._lastProgress)null===(r=t.onProgress)||void 0===r||r.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:a}})),e.on("GetRangeReader",((e,t)=>{Ab(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:i}=e;i?t.close():(Ab(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new AS(n,this))})),e.on("DocException",(e=>{t._capability.reject(kk(e))})),e.on("PasswordRequest",(e=>{Ev($S,this,Promise.withResolvers());try{if(!t.onPassword)throw kk(e);const n=e=>{e instanceof Error?Cv($S,this).reject(e):Cv($S,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){Cv($S,this).reject(n)}return Cv($S,this).promise})),e.on("DataLoaded",(e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{if(this.destroyed)return;Cv(KS,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{var n;let[i,a,r]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in r){const e=r.error;Cb("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const t=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,s=new rk(r,t);this.fontLoader.bind(s).catch((()=>e.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!s.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(i,s)}));break;case"CopyLocalImage":const{imageRef:o}=r;Ab(o,"The imageRef must be defined.");for(const e of Cv(KS,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===o)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error("Got unknown common object type ".concat(a))}return null})),e.on("obj",(e=>{let[t,n,i,a]=e;if(this.destroyed)return;const r=Cv(KS,this).get(n);var s;if(!r.objs.has(t))if(0!==r._intentStates.size)switch(i){case"Image":case"Pattern":r.objs.resolve(t,a);break;default:throw new Error("Got unknown object type ".concat(i))}else null===a||void 0===a||null===(s=a.bitmap)||void 0===s||s.close()})),e.on("DocProgress",(e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBinaryData",(async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&Cb("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=Cv(XS,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&Cv(JS,this).set(n.refStr,e);const i=new PS(t,n,this,this._params.pdfBug);return Cv(KS,this).set(t,i),i}));return Cv(XS,this).set(t,i),i}getPageIndex(e){return ok(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return jv(ZS,this,tC).call(this,"GetFieldObjects")}hasJSActions(){return jv(ZS,this,tC).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return jv(ZS,this,tC).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return jv(ZS,this,tC).call(this,"GetOptionalContentConfig").then((t=>new hj(t,e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=Cv(YS,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,n,i,a;return{info:e[0],metadata:e[1]?new ej(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(a=this._fullReader)||void 0===a?void 0:a.contentLength)&&void 0!==i?i:null}}));return Cv(YS,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of Cv(KS,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),Cv(YS,this).clear(),this.filterFactory.destroy(!0),sS.cleanup()}}cachedPageNumber(e){var t;if(!ok(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=Cv(JS,this).get(n))&&void 0!==t?t:null}}function tC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Cv(YS,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return Cv(YS,this).set(e,i),i}var nC=new WeakMap;class iC{constructor(e){Nv(this,nC,null),l(this,"onContinue",null),l(this,"onError",null),Ev(nC,this,e)}get promise(){return Cv(nC,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Cv(nC,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=Cv(nC,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=Cv(nC,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var aC=new WeakMap;class rC{constructor(e){let{callback:t,params:n,objs:i,commonObjs:a,annotationCanvasMap:r,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null}=e;Nv(this,aC,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new iC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:a}=e;if(this.cancelled)return;if(this._canvas){if(sC._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");sC._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:o,background:l}=this.params;this.gfx=new HN(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:a},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:i,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),Cv(aC,this)&&(window.cancelAnimationFrame(Cv(aC,this)),Ev(aC,this,null)),sC._.delete(this._canvas),i||(i=new ix("Rendering cancelled, page ".concat(this._pageIndex+1),a)),this.callback(i),null===(t=(n=this.task).onError)||void 0===t||t.call(n,i)}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Ev(aC,this,window.requestAnimationFrame((()=>{Ev(aC,this,null),this._nextBound().catch(this._cancelBound)}))):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),sC._.delete(this._canvas),this.callback())))}}var sC={_:new WeakSet};const oC="5.3.31";function lC(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function cC(e){return Math.max(0,Math.min(255,255*e))}class dC{static CMYK_G(e){let[t,n,i,a]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+a)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=cC(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=lC(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(cC)}static RGB_HTML(e){return"#".concat(e.map(lC).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,a]=e;return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,n+a)]}static CMYK_rgb(e){let[t,n,i,a]=e;return[cC(1-Math.min(1,t+a)),cC(1-Math.min(1,i+a)),cC(1-Math.min(1,n+a))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const a=1-t,r=1-n,s=1-i;return["CMYK",a,r,s,Math.min(a,r,s)]}}class uC{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Eb("Abstract method `_createSVG` called.")}}class hC extends uC{_createSVG(e){return document.createElementNS(Zb,e)}}class mC{static setupStorage(e,t,n,i,a){const r=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(e.textContent=r.value),"print"===a)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?e.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===a)break;e.addEventListener("change",(e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&e.setAttribute("value",r.value),"print"===a)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==r.value){e.setAttribute("value",r.value);for(const e of n.children)e.attributes.value===r.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,a=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:a})}))}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:a,linkService:r}=e;const{attributes:s}=n,o=t instanceof HTMLAnchorElement;"radio"===s.type&&(s.name="".concat(s.name,"-").concat(a));for(const[l,c]of Object.entries(s))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&r.addLinkAttributes(t,s.href,s.newWindow),i&&s.dataId&&this.setupStorage(t,s.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:a,linkService:n});const s="richText"!==a,o=e.div;if(o.append(r),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}s&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);r.append(e),s&&xS.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,r]];for(;c.length>0;){var d,u;const[e,i,r]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),r.append(e);continue}const m=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(r.append(m),o.attributes&&this.setAttributes({html:m,element:o,storage:t,intent:a,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,m]);else if(o.value){const e=document.createTextNode(o.value);s&&xS.shouldBuildText(h)&&l.push(e),m.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const pC=1e3,fC=new WeakSet;class gC{static create(e){switch(e.data.annotationType){case ub.LINK:return new NC(e);case ub.TEXT:return new EC(e);case ub.WIDGET:switch(e.data.fieldType){case"Tx":return new TC(e);case"Btn":return e.data.radioButton?new DC(e):e.data.checkBox?new PC(e):new RC(e);case"Ch":return new OC(e);case"Sig":return new MC(e)}return new AC(e);case ub.POPUP:return new LC(e);case ub.FREETEXT:return new mE(e);case ub.LINE:return new fE(e);case ub.SQUARE:return new vE(e);case ub.CIRCLE:return new xE(e);case ub.POLYLINE:return new wE(e);case ub.CARET:return new kE(e);case ub.INK:return new CE(e);case ub.POLYGON:return new _E(e);case ub.HIGHLIGHT:return new AE(e);case ub.UNDERLINE:return new TE(e);case ub.SQUIGGLY:return new ME(e);case ub.STRIKEOUT:return new PE(e);case ub.STAMP:return new DE(e);case ub.FILEATTACHMENT:return new LE(e);default:return new wC(e)}}}var vC=new WeakMap,bC=new WeakMap,xC=new WeakMap,yC=new WeakSet;class wC{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};kv(this,yC),Nv(this,vC,null),Nv(this,bC,!1),Nv(this,xC,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:i}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==i&&void 0!==i&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return wC._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;Cv(vC,this)||Ev(vC,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&jv(yC,this,_C).call(this,n),null===(t=Cv(xC,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;Cv(vC,this)&&(jv(yC,this,_C).call(this,Cv(vC,this).rect),null===(e=Cv(xC,this))||void 0===e||e.popup.resetEdited(),Ev(vC,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof AC||(a.tabIndex=pC);const{style:r}=a;if(r.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof LC){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,a),a}const{width:s,height:o}=this;if(!e&&t.borderStyle.width>0){r.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");r.borderRadius=t}else if(this instanceof DC){const e="calc(".concat(s,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");r.borderRadius=e}switch(t.borderStyle.style){case hb:r.borderStyle="solid";break;case mb:r.borderStyle="dashed";break;case pb:Cb("Unimplemented border style: beveled");break;case fb:Cb("Unimplemented border style: inset");break;case gb:r.borderBottomStyle="solid"}const i=t.borderColor||null;i?(Ev(bC,this,!0),r.borderColor=Vb.makeHexColor(0|i[0],0|i[1],0|i[2])):r.borderWidth=0}const l=Vb.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=i.rawDims;r.left="".concat(100*(l[0]-u)/c,"%"),r.top="".concat(100*(l[1]-h)/d,"%");const{rotation:m}=t;return t.hasOwnCanvas||0===m?(r.width="".concat(100*s/c,"%"),r.height="".concat(100*o/d,"%")):this.setRotation(m,a),a}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:r}=this;e%180!==0&&([a,r]=[r,a]),t.style.width="".concat(100*a/n,"%"),t.style.height="".concat(100*r/i,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],a=i[0],r=i.slice(1);n.target.style[t]=dC["".concat(a,"_HTML")](r),this.annotationStorage.setValue(this.data.id,{[t]:dC["".concat(a,"_rgb")](r)})};return Pb(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const a=e[i]||n[i];null===a||void 0===a||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const r=n[i];if(r){r({detail:{[i]:a},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map((e=>Math.fround(e)));if(8===e.length){const[r,s,o,l]=e.subarray(2,6);if(i===r&&a===s&&t===o&&n===l)return}const{style:r}=this.container;let s;if(Cv(bC,this)){const{borderColor:e,borderWidth:t}=r;r.borderWidth=0,s=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=a-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),m="clippath_".concat(this.data.id);h.setAttribute("id",m),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let f=2,g=e.length;f<g;f+=8){var p;const n=e[f],i=e[f+1],r=e[f+2],d=e[f+3],u=c.createElement("rect"),m=(r-t)/o,g=(a-i)/l,v=(n-r)/o,b=(i-d)/l;u.setAttribute("x",m),u.setAttribute("y",g),u.setAttribute("width",v),u.setAttribute("height",b),h.append(u),null===(p=s)||void 0===p||p.push('<rect vector-effect="non-scaling-stroke" x="'.concat(m,'" y="').concat(g,'" width="').concat(v,'" height="').concat(b,'"/>'))}Cv(bC,this)&&(s.push("</g></svg>')"),r.backgroundImage=s.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(m,")")}_createPopup(){const{data:e}=this,t=Ev(xC,this,new LC({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Eb("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:a,exportValues:r}of i){if(-1===e)continue;if(a===t)continue;const i="string"===typeof r?r:null,s=document.querySelector('[data-element-id="'.concat(a,'"]'));!s||fC.has(s)?n.push({id:a,exportValue:i,domElement:s}):Cb("_getElementsByName - element not allowed: ".concat(a))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,a=i.getAttribute("data-element-id");a!==t&&(fC.has(i)&&n.push({id:a,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function _C(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:r,pageX:s,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-s)/a,"%"),t.top="".concat(100*(r-e[3]+o)/r,"%"),0===i?(t.width="".concat(100*(e[2]-e[0])/a,"%"),t.height="".concat(100*(e[3]-e[1])/r,"%")):this.setRotation(i)}var kC=new WeakSet;class NC extends wC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),kv(this,kC),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action),i=!0):e.attachment?(jv(kC,this,SC).call(this,n,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(jv(kC,this,CC).call(this,n,e.setOCGState),i=!0):e.dest?(this._bindLink(n,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&jv(kC,this,jC).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),jv(kC,this,jC).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=n.get(i);a&&(e[a]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}e.onclick||(e.onclick=()=>!1),jv(kC,this,jC).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),jv(kC,this,jC).call(this),!this._fieldObjects)return Cb('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:a}=t,r=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===a&&r.push(n)}else for(const t of Object.values(this._fieldObjects))r.push(...t);const s=this.annotationStorage,o=[];for(const t of r){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";s.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;s.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";s.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(fC.has(n)?n.dispatchEvent(new Event("resetform")):Cb("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function jC(){this.container.setAttribute("data-internal-link","")}function SC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},jv(kC,this,jC).call(this)}function CC(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),jv(kC,this,jC).call(this)}class EC extends wC{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class AC extends wC{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Bb.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{var r;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}a&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(e)}}))}))}_setEventListeners(e,t,n,i){for(const[o,l]of n){var a,r,s;if("Action"===l||null!==(a=this.data.actions)&&void 0!==a&&a[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Blur?"Blur"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":Vb.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,a=e.style;let r;const s=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(Gv*i))||1);r=Math.min(i,s(t/Gv))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(i,s(e/Gv))}a.fontSize="calc(".concat(r,"px * var(--total-scale-factor))"),a.color=Vb.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class TC extends AC{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=n),a.setValue(r.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const r=e.getValue(t,{value:this.data.fieldValue});let s=r.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let l=r.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),fC.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=pC,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",(i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null})),n.addEventListener("resetform",(e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=i,c.formattedValue=null}));let d=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var a;n.addEventListener("focus",(e=>{var t;if(c.focused)return;const{target:n}=e;c.userValue&&(n.value=c.userValue),c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i),e.setValue(t,{formattedValue:i})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:a}=n.detail,{target:r}=n;if(0===a)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",a);let s=c.userValue;!s||s.length<=a||(s=s.slice(0,a),r.value=c.userValue=s,e.setValue(t,{value:s}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)})),n.addEventListener("keydown",(e=>{var n;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:a}=e.target;c.lastCommittedValue!==a&&(c.lastCommittedValue=a,c.userValue=a,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const i=d;d=null,n.addEventListener("blur",(e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{value:a}=e.target;var r;(c.userValue=a,c.lastCommittedValue!==a)&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)})),null!==(a=this.data.actions)&&void 0!==a&&a.Keystroke&&n.addEventListener("beforeinput",(e=>{var n;c.lastCommittedValue=null;const{data:i,target:a}=e,{value:r,selectionStart:s,selectionEnd:o}=a;let l=s,d=o;switch(e.inputType){case"deleteWordBackward":{const e=r.substring(0,s).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=r.substring(s).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":s===o&&(l-=1);break;case"deleteContentForward":s===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:d}})})),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(d&&n.addEventListener("blur",d),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class MC extends AC{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class PC extends AC{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return fC.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=pC,a.addEventListener("change",(i=>{const{name:a,checked:r}=i.target;for(const s of this._getElementsByName(a,n)){const n=r&&s.exportValue===t.exportValue;s.domElement&&(s.domElement.checked=n),e.setValue(s.id,{value:n})}e.setValue(n,{value:r})})),a.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",(t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class DC extends AC{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});const a=document.createElement("input");if(fC.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=pC,a.addEventListener("change",(t=>{const{name:i,checked:a}=t.target;for(const r of this._getElementsByName(i,n))e.setValue(r.id,{value:!1});e.setValue(n,{value:a})})),a.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;a.addEventListener("updatefromsandbox",(t=>{const a={value:t=>{const a=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=a&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(a,t)})),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class RC extends NC{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class OC extends AC{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");fC.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=pC;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),a=!1),i.append(e)}let r=null;if(a){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),r=()=>{e.remove(),i.removeEventListener("input",r),r=null},i.addEventListener("input",r)}const s=e=>{const t=e?"value":"textContent",{options:n,multiple:a}=i;return a?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=s(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(n=>{const a={value(n){var a;null===(a=r)||void 0===a||a();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:s(!0)}),o=s(!1)},multipleSelection(e){i.multiple=!0},remove(n){const a=i.options,r=n.detail.remove;if(a[r].selected=!1,i.remove(r),a.length>0){-1===Array.prototype.findIndex.call(a,(e=>e.selected))&&(a[0].selected=!0)}e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=s(!1)},insert(n){const{index:a,displayValue:r,exportValue:c}=n.detail.insert,d=i.children[a],u=document.createElement("option");u.textContent=r,u.value=c,d?d.before(u):i.append(u),e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},items(n){const{items:a}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of a){const{displayValue:t,exportValue:n}=e,a=document.createElement("option");a.textContent=t,a.value=n,i.append(a)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:s(!0),items:l(n)}),o=s(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:s(!0)}),o=s(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(a,n)})),i.addEventListener("input",(n=>{var i;const a=s(!0),r=s(!1);e.setValue(t,{value:a}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:r,changeEx:a,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):i.addEventListener("input",(function(n){e.setValue(t,{value:s(!0)})})),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class LC extends wC{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:wC._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new iE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(Xb).concat(e))).join(",")),this.container}}var IC=new WeakMap,FC=new WeakMap,zC=new WeakMap,qC=new WeakMap,WC=new WeakMap,BC=new WeakMap,UC=new WeakMap,VC=new WeakMap,HC=new WeakMap,GC=new WeakMap,QC=new WeakMap,YC=new WeakMap,KC=new WeakMap,XC=new WeakMap,JC=new WeakMap,$C=new WeakMap,ZC=new WeakMap,eE=new WeakMap,tE=new WeakMap,nE=new WeakSet;class iE{constructor(e){let{container:t,color:n,elements:i,titleObj:a,modificationDate:r,contentsObj:s,richText:o,parent:l,rect:c,parentRect:d,open:u}=e;kv(this,nE),Nv(this,IC,jv(nE,this,lE).bind(this)),Nv(this,FC,jv(nE,this,hE).bind(this)),Nv(this,zC,jv(nE,this,uE).bind(this)),Nv(this,qC,jv(nE,this,dE).bind(this)),Nv(this,WC,null),Nv(this,BC,null),Nv(this,UC,null),Nv(this,VC,null),Nv(this,HC,null),Nv(this,GC,null),Nv(this,QC,null),Nv(this,YC,!1),Nv(this,KC,null),Nv(this,XC,null),Nv(this,JC,null),Nv(this,$C,null),Nv(this,ZC,null),Nv(this,eE,null),Nv(this,tE,!1),Ev(BC,this,t),Ev(ZC,this,a),Ev(UC,this,s),Ev($C,this,o),Ev(GC,this,l),Ev(WC,this,n),Ev(JC,this,c),Ev(QC,this,d),Ev(HC,this,i),Ev(VC,this,dx.toDateObject(r)),this.trigger=i.flatMap((e=>e.getElementsToTriggerPopup()));for(const m of this.trigger)m.addEventListener("click",Cv(qC,this)),m.addEventListener("mouseenter",Cv(zC,this)),m.addEventListener("mouseleave",Cv(FC,this)),m.classList.add("popupTriggerArea");for(const m of i){var h;null===(h=m.container)||void 0===h||h.addEventListener("keydown",Cv(IC,this))}Cv(BC,this).hidden=!0,u&&jv(nE,this,dE).call(this)}render(){if(Cv(KC,this))return;const e=Ev(KC,this,document.createElement("div"));if(e.className="popup",Cv(WC,this)){const t=e.style.outlineColor=Vb.makeHexColor(...Cv(WC,this));e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=Cv(ZC,this)),e.append(t),Cv(VC,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:Cv(VC,this).valueOf()})),t.append(e)}const i=Sv(nE,this,aE);if(i)mC.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(Cv(UC,this));e.append(t)}Cv(BC,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const a=t.split(/(?:\r\n?|\n)/);for(let r=0,s=a.length;r<s;++r){const e=a[r];i.append(document.createTextNode(e)),r<s-1&&i.append(document.createElement("br"))}return i}updateEdited(e){var t;let{rect:n,popupContent:i}=e;Cv(eE,this)||Ev(eE,this,{contentsObj:Cv(UC,this),richText:Cv($C,this)}),n&&Ev(XC,this,null),i&&(Ev($C,this,jv(nE,this,oE).call(this,i)),Ev(UC,this,null)),null===(t=Cv(KC,this))||void 0===t||t.remove(),Ev(KC,this,null)}resetEdited(){var e;Cv(eE,this)&&(({contentsObj:wv(Ev,[UC,this])._,richText:wv(Ev,[$C,this])._}=Cv(eE,this)),Ev(eE,this,null),null===(e=Cv(KC,this))||void 0===e||e.remove(),Ev(KC,this,null),Ev(XC,this,null))}forceHide(){Ev(tE,this,this.isVisible),Cv(tE,this)&&(Cv(BC,this).hidden=!0)}maybeShow(){Cv(tE,this)&&(Cv(KC,this)||jv(nE,this,uE).call(this),Ev(tE,this,!1),Cv(BC,this).hidden=!1)}get isVisible(){return!1===Cv(BC,this).hidden}}function aE(e){const t=Cv($C,e),n=Cv(UC,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:Cv($C,e).html||null}function rE(e){var t;return(null===(t=Sv(nE,e,aE))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function sE(e){var t;return(null===(t=Sv(nE,e,aE))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function oE(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:Sv(nE,this,sE),fontSize:Sv(nE,this,rE)?"calc(".concat(Sv(nE,this,rE),"px * var(--total-scale-factor))"):""}};for(const a of e.split("\n"))t.push({name:"span",value:a,attributes:i});return n}function lE(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&Cv(YC,this))&&jv(nE,this,dE).call(this)}function cE(){if(null!==Cv(XC,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=Cv(GC,this);let r=!!Cv(QC,this),s=Cv(r?QC:JC,this);for(const h of Cv(HC,this))if(!s||null!==Vb.intersect(h.data.rect,s)){s=h.data.rect,r=!0;break}const o=Vb.normalizeRect([s[0],e[3]-s[1]+e[1],s[2],e[3]-s[3]+e[1]]),l=r?s[2]-s[0]+5:0,c=o[0]+l,d=o[1];Ev(XC,this,[100*(c-i)/t,100*(d-a)/n]);const{style:u}=Cv(BC,this);u.left="".concat(Cv(XC,this)[0],"%"),u.top="".concat(Cv(XC,this)[1],"%")}function dE(){Ev(YC,this,!Cv(YC,this)),Cv(YC,this)?(jv(nE,this,uE).call(this),Cv(BC,this).addEventListener("click",Cv(qC,this)),Cv(BC,this).addEventListener("keydown",Cv(IC,this))):(jv(nE,this,hE).call(this),Cv(BC,this).removeEventListener("click",Cv(qC,this)),Cv(BC,this).removeEventListener("keydown",Cv(IC,this)))}function uE(){Cv(KC,this)||this.render(),this.isVisible?Cv(YC,this)&&Cv(BC,this).classList.add("focused"):(jv(nE,this,cE).call(this),Cv(BC,this).hidden=!1,Cv(BC,this).style.zIndex=parseInt(Cv(BC,this).style.zIndex)+1e3)}function hE(){Cv(BC,this).classList.remove("focused"),!Cv(YC,this)&&this.isVisible&&(Cv(BC,this).hidden=!0,Cv(BC,this).style.zIndex=parseInt(Cv(BC,this).style.zIndex)-1e3)}class mE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=nb.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pE=new WeakMap;class fE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Nv(this,pE,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=Ev(pE,this,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Cv(pE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var gE=new WeakMap;class vE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Nv(this,gE,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,r=Ev(gE,this,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",a/2),r.setAttribute("y",a/2),r.setAttribute("width",t-a),r.setAttribute("height",n-a),r.setAttribute("stroke-width",a||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Cv(gE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var bE=new WeakMap;class xE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Nv(this,bE,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,r=Ev(bE,this,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",t/2),r.setAttribute("cy",n/2),r.setAttribute("rx",t/2-a/2),r.setAttribute("ry",n/2-a/2),r.setAttribute("stroke-width",a||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Cv(bE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var yE=new WeakMap;class wE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Nv(this,yE,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:a,height:r}=this;if(!t)return this.container;const s=this.svgFactory.create(a,r,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=Ev(yE,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Cv(yE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class _E extends wE{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var NE=new WeakMap,jE=new WeakMap,SE=new WeakSet;class CE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),kv(this,SE),Nv(this,NE,null),Nv(this,jE,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?nb.HIGHLIGHT:nb.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:a}}=this,{transform:r,width:s,height:o}=jv(SE,this,EE).call(this,t,e),l=this.svgFactory.create(s,o,!0),c=Ev(NE,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",r);for(let d=0,u=n.length;d<u;d++){const e=this.svgFactory.createElement(this.svgElementName);Cv(jE,this).push(e),e.setAttribute("points",n[d].join(",")),c.append(e)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,a=Cv(NE,this);if(t>=0&&a.setAttribute("stroke-width",t||1),n)for(let r=0,s=Cv(jE,this).length;r<s;r++)Cv(jE,this)[r].setAttribute("points",n[r].join(","));if(i){const{transform:e,width:t,height:n}=jv(SE,this,EE).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),a.setAttribute("transform",e)}}getElementsToTriggerPopup(){return Cv(jE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function EE(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class AE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=nb.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class TE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ME extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class PE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class DE extends wC{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=nb.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var RE=new WeakMap,OE=new WeakSet;class LE extends wC{constructor(e){var t;super(e,{isRenderable:!0}),kv(this,OE),Nv(this,RE,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",d({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",jv(OE,this,IE).bind(this)),Ev(RE,this,n);const{isMac:i}=Bb.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&jv(OE,this,IE).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return Cv(RE,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function IE(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var FE=new WeakMap,zE=new WeakMap,qE=new WeakMap,WE=new WeakMap,BE=new WeakSet;class UE{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:a,page:r,viewport:s,structTreeLayer:o}=e;kv(this,BE),Nv(this,FE,null),Nv(this,zE,null),Nv(this,qE,new Map),Nv(this,WE,null),this.div=t,Ev(FE,this,n),Ev(zE,this,i),Ev(WE,this,o||null),this.page=r,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return Cv(qE,this).size>0}async render(e){const{annotations:t}=e,n=this.div;fx(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new hC,annotationStorage:e.annotationStorage||new Z_,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const s of t){if(s.noHTML)continue;const e=s.annotationType===ub.POPUP;if(e){const e=i.get(s.id);if(!e)continue;a.elements=e}else if(s.rect[2]===s.rect[0]||s.rect[3]===s.rect[1])continue;a.data=s;const t=gC.create(a);if(!t.isRenderable)continue;if(!e&&s.popupRef){const e=i.get(s.popupRef);e?e.push(t):i.set(s.popupRef,[t])}const n=t.render();var r;if(s.hidden&&(n.style.visibility="hidden"),await jv(BE,this,VE).call(this,n,s.id),t._isEditable)Cv(qE,this).set(t.data.id,t),null===(r=this._annotationEditorUIManager)||void 0===r||r.renderAnnotationElement(t)}jv(BE,this,HE).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new hC,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=UE._defaultBorderStyle),n.data=i;const e=gC.create(n);if(!e.isRenderable)continue;const t=e.render();await jv(BE,this,VE).call(this,t,i.id)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,fx(n,{rotation:t.rotation}),jv(BE,this,HE).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(Cv(qE,this).values())}getEditableAnnotation(e){return Cv(qE,this).get(e)}static get _defaultBorderStyle(){return Pb(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:hb,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function VE(e,t){var n,i;const a=e.firstChild||e,r=a.id="".concat(Xb).concat(t),s=await(null===(n=Cv(WE,this))||void 0===n?void 0:n.getAriaAttributes(r));if(s)for(const[o,l]of s)a.setAttribute(o,l);this.div.append(e),null===(i=Cv(FE,this))||void 0===i||i.moveElementInDOM(this.div,e,a,!1)}function HE(){if(!Cv(zE,this))return;const e=this.div;for(const[n,i]of Cv(zE,this)){const a=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!a)continue;i.className="annotationContent";const{firstChild:r}=a;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):a.append(i);const s=Cv(qE,this).get(n);var t;if(s)if(s._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,a.id,i),s._hasNoCanvas=!1;else s.canvas=i}Cv(zE,this).clear()}const GE=/\r\n?|\n/g;var QE=new WeakMap,YE=new WeakMap,KE=new WeakMap,XE=new WeakMap,JE=new WeakMap,$E=new WeakSet;class ZE extends k_{static get _keyboardManager(){const e=ZE.prototype,t=e=>e.isEmpty(),n=Xy.TRANSLATE_SMALL,i=Xy.TRANSLATE_BIG;return Pb(this,"_keyboardManager",new ny([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super(d(d({},e),{},{name:"freeTextEditor"})),kv(this,$E),Nv(this,QE,void 0),Nv(this,YE,""),Nv(this,KE,"".concat(this.id,"-editor")),Nv(this,XE,null),Nv(this,JE,void 0),Ev(QE,this,e.color||ZE._defaultColor||k_._defaultLineColor),Ev(JE,this,e.fontSize||ZE._defaultFontSize)}static initialize(e,t){k_.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ib.FREETEXT_SIZE:ZE._defaultFontSize=t;break;case ib.FREETEXT_COLOR:ZE._defaultColor=t}}updateParams(e,t){switch(e){case ib.FREETEXT_SIZE:jv($E,this,eA).call(this,t);break;case ib.FREETEXT_COLOR:jv($E,this,tA).call(this,t)}}static get defaultPropertiesToUpdate(){return[[ib.FREETEXT_SIZE,ZE._defaultFontSize],[ib.FREETEXT_COLOR,ZE._defaultColor||k_._defaultLineColor]]}get propertiesToUpdate(){return[[ib.FREETEXT_SIZE,Cv(JE,this)],[ib.FREETEXT_COLOR,Cv(QE,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-ZE._internalPadding*e,-(ZE._internalPadding+Cv(JE,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Ev(XE,this,new AbortController);const e=this._uiManager.combinedSignal(Cv(XE,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Cv(KE,this)),this._isDraggable=!0,null===(e=Cv(XE,this))||void 0===e||e.abort(),Ev(XE,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=Cv(YE,this),t=Ev(YE,this,jv($E,this,nA).call(this).trimEnd());if(e===t)return;const n=e=>{Ev(YE,this,e),e?(jv($E,this,rA).call(this),this._uiManager.rebuild(this),jv($E,this,iA).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),jv($E,this,iA).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ZE._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Cv(KE,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(Cv(JE,this),"px * var(--total-scale-factor))"),n.color=Cv(QE,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[r,s]=this.getInitialTranslation();[r,s]=this.pageTranslationToScreen(r,s);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(a[0]-c)/o,h=t+this.height-(a[1]-d)/l;break;case 90:u=e+(a[0]-c)/o,h=t-(a[1]-d)/l,[r,s]=[s,-r];break;case 180:u=e-this.width+(a[0]-c)/o,h=t-(a[1]-d)/l,[r,s]=[-r,-s];break;case 270:u=e+(a[0]-c-this.height*l)/o,h=t+(a[1]-d-this.width*o)/l,[r,s]=[-s,r]}this.setAt(u*n,h*i,r,s)}else this._moveAfterPaste(e,t);jv($E,this,rA).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=oA.call(ZE,t.getData("text")||"").replaceAll(GE,"\n");if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const r=a.getRangeAt(0);if(!i.includes("\n"))return r.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void a.collapseToStart();const{startContainer:s,startOffset:o}=r,l=[],c=[];if(s.nodeType===Node.TEXT_NODE){const e=s.parentElement;if(c.push(s.nodeValue.slice(o).replaceAll(GE,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(aA.call(ZE,n)):t=c}l.push(s.nodeValue.slice(0,o).replaceAll(GE,""))}else if(s===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(aA.call(ZE,n))}Ev(YE,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),jv($E,this,rA).call(this);const d=new Range;let u=Math.sumPrecise(l.map((e=>e.length)));for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(u<=e){d.setStart(h,u),d.setEnd(h,u);break}u-=e}a.removeAllRanges(),a.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let i=null;if(e instanceof mE){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:a,rotation:r,id:s,popupRef:o},textContent:l,textPosition:c,parent:{page:{pageNumber:d}}}=e;if(!l||0===l.length)return null;i=e={annotationType:nb.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:d-1,rect:a.slice(0),rotation:r,id:s,deleted:!1,popupRef:o}}const a=await super.deserialize(e,t,n);return Ev(JE,a,e.fontSize),Ev(QE,a,Vb.makeHexColor(...e.color)),Ev(YE,a,oA.call(ZE,e.value)),a.annotationElementId=e.id||null,a._initialData=i,a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ZE._internalPadding*this.parentScale,n=this.getRect(t,t),i=k_._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Cv(QE,this)),a={annotationType:nb.FREETEXT,color:i,fontSize:Cv(JE,this),value:jv($E,this,sA).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.isCopy=!0,a):this.annotationElementId&&!jv($E,this,lA).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(Cv(JE,this),"px * var(--total-scale-factor))"),n.color=Cv(QE,this),t.replaceChildren();for(const a of Cv(YE,this).split("\n")){const e=document.createElement("div");e.append(a?document.createTextNode(a):document.createElement("br")),t.append(e)}const i=ZE._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:Cv(YE,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function eA(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-Cv(JE,this))*this.parentScale),Ev(JE,this,e),jv($E,this,iA).call(this)},n=Cv(JE,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ib.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function tA(e){const t=e=>{Ev(QE,this,this.editorDiv.style.color=e)},n=Cv(QE,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ib.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function nA(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(aA.call(Fv,i)),t=i)}return e.join("\n")}function iA(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,a=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function aA(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(GE,"")}function rA(){if(this.editorDiv.replaceChildren(),Cv(YE,this))for(const e of Cv(YE,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function sA(){return Cv(YE,this).replaceAll("\xa0"," ")}function oA(e){return e.replaceAll(" ","\xa0")}function lA(e){const{value:t,fontSize:n,color:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some(((e,t)=>e!==i[t]))||e.pageIndex!==a}Fv=ZE,l(ZE,"_freeTextDefaultContent",""),l(ZE,"_internalPadding",0),l(ZE,"_defaultColor",null),l(ZE,"_defaultFontSize",10),l(ZE,"_type","freetext"),l(ZE,"_editorType",nb.FREETEXT);class cA{toSVGPath(){Eb("Abstract method `toSVGPath` must be implemented.")}get box(){Eb("Abstract getter `box` must be implemented.")}serialize(e,t){Eb("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,r){r||(r=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)r[s]=t+e[s]*i,r[s+1]=n+e[s+1]*a;return r}static _rescaleAndSwap(e,t,n,i,a,r){r||(r=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)r[s]=t+e[s+1]*i,r[s+1]=n+e[s]*a;return r}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let a=0,r=e.length;a<r;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,r){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+r)/6,(n+a)/2,(i+r)/2]}}l(cA,"PRECISION",1e-4);var dA=new WeakMap,uA=new WeakMap,hA=new WeakMap,mA=new WeakMap,pA=new WeakMap,fA=new WeakMap,gA=new WeakMap,vA=new WeakMap,bA=new WeakMap,xA=new WeakMap,yA=new WeakMap,wA=new WeakMap,_A=new WeakMap,kA=new WeakSet;class NA{constructor(e,t,n,i,a){let{x:r,y:s}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;kv(this,kA),Nv(this,dA,void 0),Nv(this,uA,[]),Nv(this,hA,void 0),Nv(this,mA,void 0),Nv(this,pA,[]),Nv(this,fA,new Float32Array(18)),Nv(this,gA,void 0),Nv(this,vA,void 0),Nv(this,bA,void 0),Nv(this,xA,void 0),Nv(this,yA,void 0),Nv(this,wA,void 0),Nv(this,_A,[]),Ev(dA,this,t),Ev(wA,this,i*n),Ev(mA,this,a),Cv(fA,this).set([NaN,NaN,NaN,NaN,r,s],6),Ev(hA,this,o),Ev(xA,this,PA._*n),Ev(bA,this,DA._*n),Ev(yA,this,n),Cv(_A,this).push(r,s)}isEmpty(){return isNaN(Cv(fA,this)[8])}add(e){var t;let{x:n,y:i}=e;Ev(gA,this,n),Ev(vA,this,i);const[a,r,s,o]=Cv(dA,this);let[l,c,d,u]=Cv(fA,this).subarray(8,12);const h=n-d,m=i-u,p=Math.hypot(h,m);if(p<Cv(bA,this))return!1;const f=p-Cv(xA,this),g=f/p,v=g*h,b=g*m;let x=l,y=c;l=d,c=u,d+=v,u+=b,null===(t=Cv(_A,this))||void 0===t||t.push(n,i);const w=v/f,_=-b/f*Cv(wA,this),k=w*Cv(wA,this);if(Cv(fA,this).set(Cv(fA,this).subarray(2,8),0),Cv(fA,this).set([d+_,u+k],4),Cv(fA,this).set(Cv(fA,this).subarray(14,18),12),Cv(fA,this).set([d-_,u-k],16),isNaN(Cv(fA,this)[6]))return 0===Cv(pA,this).length&&(Cv(fA,this).set([l+_,c+k],2),Cv(pA,this).push(NaN,NaN,NaN,NaN,(l+_-a)/s,(c+k-r)/o),Cv(fA,this).set([l-_,c-k],14),Cv(uA,this).push(NaN,NaN,NaN,NaN,(l-_-a)/s,(c-k-r)/o)),Cv(fA,this).set([x,y,l,c,d,u],6),!this.isEmpty();Cv(fA,this).set([x,y,l,c,d,u],6);return Math.abs(Math.atan2(y-c,x-l)-Math.atan2(b,v))<Math.PI/2?([l,c,d,u]=Cv(fA,this).subarray(2,6),Cv(pA,this).push(NaN,NaN,NaN,NaN,((l+d)/2-a)/s,((c+u)/2-r)/o),[l,c,x,y]=Cv(fA,this).subarray(14,18),Cv(uA,this).push(NaN,NaN,NaN,NaN,((x+l)/2-a)/s,((y+c)/2-r)/o),!0):([x,y,l,c,d,u]=Cv(fA,this).subarray(0,6),Cv(pA,this).push(((x+5*l)/6-a)/s,((y+5*c)/6-r)/o,((5*l+d)/6-a)/s,((5*c+u)/6-r)/o,((l+d)/2-a)/s,((c+u)/2-r)/o),[d,u,l,c,x,y]=Cv(fA,this).subarray(12,18),Cv(uA,this).push(((x+5*l)/6-a)/s,((y+5*c)/6-r)/o,((5*l+d)/6-a)/s,((5*c+u)/6-r)/o,((l+d)/2-a)/s,((c+u)/2-r)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=Cv(pA,this),t=Cv(uA,this);if(isNaN(Cv(fA,this)[6])&&!this.isEmpty())return jv(kA,this,SA).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));jv(kA,this,EA).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return jv(kA,this,CA).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,a,r){return new BA(e,t,n,i,a,r)}getOutlines(){var e,t;const n=Cv(pA,this),i=Cv(uA,this),a=Cv(fA,this),[r,s,o,l]=Cv(dA,this),c=new Float32Array((null!==(e=null===(t=Cv(_A,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let h=0,m=c.length-2;h<m;h+=2)c[h]=(Cv(_A,this)[h]-r)/o,c[h+1]=(Cv(_A,this)[h+1]-s)/l;if(c[c.length-2]=(Cv(gA,this)-r)/o,c[c.length-1]=(Cv(vA,this)-s)/l,isNaN(a[6])&&!this.isEmpty())return jv(kA,this,AA).call(this,c);const d=new Float32Array(Cv(pA,this).length+24+Cv(uA,this).length);let u=n.length;for(let h=0;h<u;h+=2)isNaN(n[h])?d[h]=d[h+1]=NaN:(d[h]=n[h],d[h+1]=n[h+1]);u=jv(kA,this,MA).call(this,d,u);for(let h=i.length-6;h>=6;h-=6)for(let e=0;e<6;e+=2)isNaN(i[h+e])?(d[u]=d[u+1]=NaN,u+=2):(d[u]=i[h+e],d[u+1]=i[h+e+1],u+=2);return jv(kA,this,TA).call(this,d,u),this.newFreeDrawOutline(d,c,Cv(dA,this),Cv(yA,this),Cv(hA,this),Cv(mA,this))}}function jA(){const e=Cv(fA,this).subarray(4,6),t=Cv(fA,this).subarray(16,18),[n,i,a,r]=Cv(dA,this);return[(Cv(gA,this)+(e[0]-t[0])/2-n)/a,(Cv(vA,this)+(e[1]-t[1])/2-i)/r,(Cv(gA,this)+(t[0]-e[0])/2-n)/a,(Cv(vA,this)+(t[1]-e[1])/2-i)/r]}function SA(){const[e,t,n,i]=Cv(dA,this),[a,r,s,o]=jv(kA,this,jA).call(this);return"M".concat((Cv(fA,this)[2]-e)/n," ").concat((Cv(fA,this)[3]-t)/i," L").concat((Cv(fA,this)[4]-e)/n," ").concat((Cv(fA,this)[5]-t)/i," L").concat(a," ").concat(r," L").concat(s," ").concat(o," L").concat((Cv(fA,this)[16]-e)/n," ").concat((Cv(fA,this)[17]-t)/i," L").concat((Cv(fA,this)[14]-e)/n," ").concat((Cv(fA,this)[15]-t)/i," Z")}function CA(e){const t=Cv(uA,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function EA(e){const[t,n,i,a]=Cv(dA,this),r=Cv(fA,this).subarray(4,6),s=Cv(fA,this).subarray(16,18),[o,l,c,d]=jv(kA,this,jA).call(this);e.push("L".concat((r[0]-t)/i," ").concat((r[1]-n)/a," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((s[0]-t)/i," ").concat((s[1]-n)/a))}function AA(e){const t=Cv(fA,this),[n,i,a,r]=Cv(dA,this),[s,o,l,c]=jv(kA,this,jA).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/r,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/r,NaN,NaN,NaN,NaN,s,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/r,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/r],0),this.newFreeDrawOutline(d,e,Cv(dA,this),Cv(yA,this),Cv(hA,this),Cv(mA,this))}function TA(e,t){const n=Cv(uA,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function MA(e,t){const n=Cv(fA,this).subarray(4,6),i=Cv(fA,this).subarray(16,18),[a,r,s,o]=Cv(dA,this),[l,c,d,u]=jv(kA,this,jA).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/s,(n[1]-r)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(i[0]-a)/s,(i[1]-r)/o],t),t+24}var PA={_:8},DA={_:PA._+2},RA=new WeakMap,OA=new WeakMap,LA=new WeakMap,IA=new WeakMap,FA=new WeakMap,zA=new WeakMap,qA=new WeakMap,WA=new WeakSet;class BA extends cA{constructor(e,t,n,i,a,r){super(),kv(this,WA),Nv(this,RA,void 0),Nv(this,OA,new Float32Array(4)),Nv(this,LA,void 0),Nv(this,IA,void 0),Nv(this,FA,void 0),Nv(this,zA,void 0),Nv(this,qA,void 0),Ev(qA,this,e),Ev(FA,this,t),Ev(RA,this,n),Ev(zA,this,i),Ev(LA,this,a),Ev(IA,this,r),this.lastPoint=[NaN,NaN],jv(WA,this,UA).call(this,r);const[s,o,l,c]=Cv(OA,this);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-s)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-s)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(Cv(qA,this)[4]," ").concat(Cv(qA,this)[5])];for(let t=6,n=Cv(qA,this).length;t<n;t+=6)isNaN(Cv(qA,this)[t])?e.push("L".concat(Cv(qA,this)[t+4]," ").concat(Cv(qA,this)[t+5])):e.push("C".concat(Cv(qA,this)[t]," ").concat(Cv(qA,this)[t+1]," ").concat(Cv(qA,this)[t+2]," ").concat(Cv(qA,this)[t+3]," ").concat(Cv(qA,this)[t+4]," ").concat(Cv(qA,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,a,r]=e;const s=a-n,o=r-i;let l,c;switch(t){case 0:l=cA._rescale(Cv(qA,this),n,r,s,-o),c=cA._rescale(Cv(FA,this),n,r,s,-o);break;case 90:l=cA._rescaleAndSwap(Cv(qA,this),n,i,s,o),c=cA._rescaleAndSwap(Cv(FA,this),n,i,s,o);break;case 180:l=cA._rescale(Cv(qA,this),a,i,-s,o),c=cA._rescale(Cv(FA,this),a,i,-s,o);break;case 270:l=cA._rescaleAndSwap(Cv(qA,this),a,r,-s,-o),c=cA._rescaleAndSwap(Cv(FA,this),a,r,-s,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return Cv(OA,this)}newOutliner(e,t,n,i,a){return new NA(e,t,n,i,a,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,i,a,r]=Cv(OA,this),[s,o,l,c]=Cv(RA,this),d=a*l,u=r*c,h=n*l+s,m=i*c+o,p=this.newOutliner({x:Cv(FA,this)[0]*d+h,y:Cv(FA,this)[1]*u+m},Cv(RA,this),Cv(zA,this),e,Cv(IA,this),null!==t&&void 0!==t?t:Cv(LA,this));for(let f=2;f<Cv(FA,this).length;f+=2)p.add({x:Cv(FA,this)[f]*d+h,y:Cv(FA,this)[f+1]*u+m});return p.getOutlines()}}function UA(e){const t=Cv(qA,this);let n=t[4],i=t[5];const a=[n,i,n,i];let r=n,s=i;const o=e?Math.max:Math.min;for(let c=6,d=t.length;c<d;c+=6){const e=t[c+4],l=t[c+5];if(isNaN(t[c]))Vb.pointBoundingBox(e,l,a),s<l?(r=e,s=l):s===l&&(r=o(r,e));else{const e=[1/0,1/0,-1/0,-1/0];Vb.bezierBoundingBox(n,i,...t.slice(c,c+6),e),Vb.rectBoundingBox(...e,a),s<e[3]?(r=e[2],s=e[3]):s===e[3]&&(r=o(r,e[2]))}n=e,i=l}const l=Cv(OA,this);l[0]=a[0]-Cv(LA,this),l[1]=a[1]-Cv(LA,this),l[2]=a[2]-a[0]+2*Cv(LA,this),l[3]=a[3]-a[1]+2*Cv(LA,this),this.lastPoint=[r,s]}var VA=new WeakMap,HA=new WeakMap,GA=new WeakMap,QA=new WeakMap,YA=new WeakSet;class KA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];kv(this,YA),Nv(this,VA,void 0),Nv(this,HA,void 0),Nv(this,GA,[]),Nv(this,QA,[]);const a=[1/0,1/0,-1/0,-1/0],r=10**-4;for(const{x:h,y:m,width:p,height:f}of e){const e=Math.floor((h-t)/r)*r,n=Math.ceil((h+p+t)/r)*r,i=Math.floor((m-t)/r)*r,s=Math.ceil((m+f+t)/r)*r,o=[e,i,s,!0],l=[n,i,s,!1];Cv(GA,this).push(o,l),Vb.rectBoundingBox(e,i,n,s,a)}const s=a[2]-a[0]+2*n,o=a[3]-a[1]+2*n,l=a[0]-n,c=a[1]-n,d=Cv(GA,this).at(i?-1:-2),u=[d[0],d[2]];for(const h of Cv(GA,this)){const[e,t,n]=h;h[0]=(e-l)/s,h[1]=(t-c)/o,h[2]=(n-c)/o}Ev(VA,this,new Float32Array([l,c,s,o])),Ev(HA,this,u)}getOutlines(){Cv(GA,this).sort(((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]));const e=[];for(const t of Cv(GA,this))t[3]?(e.push(...jv(YA,this,eT).call(this,t)),jv(YA,this,$A).call(this,t)):(jv(YA,this,ZA).call(this,t),e.push(...jv(YA,this,eT).call(this,t)));return jv(YA,this,XA).call(this,e)}}function XA(e){const t=[],n=new Set;for(const r of e){const[e,n,i]=r;t.push([e,n,r],[e,i,r])}t.sort(((e,t)=>e[1]-t[1]||e[0]-t[0]));for(let r=0,s=t.length;r<s;r+=2){const e=t[r][2],i=t[r+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let a;for(;n.size>0;){const e=n.values().next().value;let[t,r,s,o,l]=e;n.delete(e);let c=t,d=r;for(a=[t,s],i.push(a);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,r,s,o,l]=e,c!==t&&(a.push(c,d,t,d===r?r:s),c=t),d=d===r?s:r}a.push(c,d)}return new iT(i,Cv(VA,this),Cv(HA,this))}function JA(e){const t=Cv(QA,this);let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,r=t[a][0];if(r===e)return a;r<e?n=a+1:i=a-1}return i+1}function $A(e){let[,t,n]=e;const i=jv(YA,this,JA).call(this,t);Cv(QA,this).splice(i,0,[t,n])}function ZA(e){let[,t,n]=e;const i=jv(YA,this,JA).call(this,t);for(let a=i;a<Cv(QA,this).length;a++){const[e,i]=Cv(QA,this)[a];if(e!==t)break;if(e===t&&i===n)return void Cv(QA,this).splice(a,1)}for(let a=i-1;a>=0;a--){const[e,i]=Cv(QA,this)[a];if(e!==t)break;if(e===t&&i===n)return void Cv(QA,this).splice(a,1)}}function eT(e){const[t,n,i]=e,a=[[t,n,i]],r=jv(YA,this,JA).call(this,i);for(let s=0;s<r;s++){const[e,n]=Cv(QA,this)[s];for(let i=0,r=a.length;i<r;i++){const[,s,o]=a[i];if(!(n<=s||o<=e))if(s>=e)if(o>n)a[i][1]=n;else{if(1===r)return[];a.splice(i,1),i--,r--}else a[i][2]=e,o>n&&a.push([t,n,o])}}return a}var tT=new WeakMap,nT=new WeakMap;class iT extends cA{constructor(e,t,n){super(),Nv(this,tT,void 0),Nv(this,nT,void 0),Ev(nT,this,e),Ev(tT,this,t),this.lastPoint=n}toSVGPath(){const e=[];for(const t of Cv(nT,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let a=2;a<t.length;a+=2){const r=t[a],s=t[a+1];r===n?(e.push("V".concat(s)),i=s):s===i&&(e.push("H".concat(r)),n=r)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,a,r]=e;const s=[],o=a-n,l=r-i;for(const c of Cv(nT,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=r-c[t+1]*l;s.push(e)}return s}get box(){return Cv(tT,this)}get classNamesForOutlining(){return["highlightOutline"]}}class aT extends NA{newFreeDrawOutline(e,t,n,i,a,r){return new rT(e,t,n,i,a,r)}}class rT extends BA{newOutliner(e,t,n,i,a){return new aT(e,t,n,i,a,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var sT=new WeakMap,oT=new WeakMap,lT=new WeakMap,cT=new WeakMap,dT=new WeakMap,uT=new WeakMap,hT=new WeakMap,mT=new WeakMap,pT=new WeakMap,fT=new WeakMap,gT=new WeakMap,vT=new WeakSet;class bT{static get _keyboardManager(){return Pb(this,"_keyboardManager",new ny([[["Escape","mac+Escape"],bT.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],bT.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],bT.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],bT.prototype._moveToPrevious],[["Home","mac+Home"],bT.prototype._moveToBeginning],[["End","mac+End"],bT.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:i=null}=e;kv(this,vT),Nv(this,sT,null),Nv(this,oT,null),Nv(this,lT,void 0),Nv(this,cT,null),Nv(this,dT,!1),Nv(this,uT,!1),Nv(this,hT,null),Nv(this,mT,void 0),Nv(this,pT,null),Nv(this,fT,null),Nv(this,gT,void 0),n?(Ev(uT,this,!1),Ev(gT,this,ib.HIGHLIGHT_COLOR),Ev(hT,this,n)):(Ev(uT,this,!0),Ev(gT,this,ib.HIGHLIGHT_DEFAULT_COLOR)),Ev(fT,this,(null===n||void 0===n?void 0:n._uiManager)||i),Ev(mT,this,Cv(fT,this)._eventBus),Ev(lT,this,(null===n||void 0===n?void 0:n.color)||(null===(t=Cv(fT,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98"),jT._||(jT._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=Ev(sT,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=Cv(fT,this)._signal;e.addEventListener("click",jv(vT,this,_T).bind(this),{signal:t}),e.addEventListener("keydown",jv(vT,this,wT).bind(this),{signal:t});const n=Ev(oT,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=Cv(lT,this),e.append(n),e}renderMainDropdown(){const e=Ev(cT,this,jv(vT,this,xT).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===Cv(sT,this))return void jv(vT,this,_T).call(this,e);const t=e.target.getAttribute("data-color");t&&jv(vT,this,yT).call(this,t,e)}_moveToNext(e){var t,n;Sv(vT,this,NT)?e.target!==Cv(sT,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=Cv(cT,this).firstChild)||void 0===n||n.focus():jv(vT,this,_T).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=Cv(cT,this))||void 0===t?void 0:t.firstChild)&&e.target!==Cv(sT,this)?(Sv(vT,this,NT)||jv(vT,this,_T).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):Sv(vT,this,NT)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;Sv(vT,this,NT)?null===(t=Cv(cT,this).firstChild)||void 0===t||t.focus():jv(vT,this,_T).call(this,e)}_moveToEnd(e){var t;Sv(vT,this,NT)?null===(t=Cv(cT,this).lastChild)||void 0===t||t.focus():jv(vT,this,_T).call(this,e)}hideDropdown(){var e,t;null===(e=Cv(cT,this))||void 0===e||e.classList.add("hidden"),null===(t=Cv(pT,this))||void 0===t||t.abort(),Ev(pT,this,null)}_hideDropdownFromKeyboard(){var e;Cv(uT,this)||(Sv(vT,this,NT)?(this.hideDropdown(),Cv(sT,this).focus({preventScroll:!0,focusVisible:Cv(dT,this)})):null===(e=Cv(hT,this))||void 0===e||e.unselect())}updateColor(e){if(Cv(oT,this)&&(Cv(oT,this).style.backgroundColor=e),!Cv(cT,this))return;const t=Cv(fT,this).highlightColors.values();for(const n of Cv(cT,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=Cv(sT,this))||void 0===e||e.remove(),Ev(sT,this,null),Ev(oT,this,null),null===(t=Cv(cT,this))||void 0===t||t.remove(),Ev(cT,this,null)}}function xT(){const e=document.createElement("div"),t=Cv(fT,this)._signal;e.addEventListener("contextmenu",lx,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of Cv(fT,this).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",jT._[n]);const r=document.createElement("span");a.append(r),r.className="swatch",r.style.backgroundColor=i,a.setAttribute("aria-selected",i===Cv(lT,this)),a.addEventListener("click",jv(vT,this,yT).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",jv(vT,this,wT).bind(this),{signal:t}),e}function yT(e,t){t.stopPropagation(),Cv(mT,this).dispatch("switchannotationeditorparams",{source:this,type:Cv(gT,this),value:e})}function wT(e){zv._keyboardManager.exec(this,e)}function _T(e){if(Sv(vT,this,NT))return void this.hideDropdown();if(Ev(dT,this,0===e.detail),Cv(pT,this)||(Ev(pT,this,new AbortController),window.addEventListener("pointerdown",jv(vT,this,kT).bind(this),{signal:Cv(fT,this).combinedSignal(Cv(pT,this))})),Cv(cT,this))return void Cv(cT,this).classList.remove("hidden");const t=Ev(cT,this,jv(vT,this,xT).call(this));Cv(sT,this).append(t)}function kT(e){var t;null!==(t=Cv(cT,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function NT(e){return Cv(cT,e)&&!Cv(cT,e).classList.contains("hidden")}zv=bT;var jT={_:null},ST=new WeakMap,CT=new WeakMap,ET=new WeakMap,AT=new WeakMap,TT=new WeakMap,MT=new WeakMap,PT=new WeakMap,DT=new WeakMap,RT=new WeakMap,OT=new WeakMap,LT=new WeakMap,IT=new WeakMap,FT=new WeakMap,zT=new WeakMap,qT=new WeakMap,WT=new WeakMap,BT=new WeakMap,UT=new WeakMap,VT=new WeakSet;class HT extends k_{static get _keyboardManager(){const e=HT.prototype;return Pb(this,"_keyboardManager",new ny([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(d(d({},e),{},{name:"highlightEditor"})),kv(this,VT),Nv(this,ST,null),Nv(this,CT,0),Nv(this,ET,void 0),Nv(this,AT,null),Nv(this,TT,null),Nv(this,MT,null),Nv(this,PT,null),Nv(this,DT,0),Nv(this,RT,null),Nv(this,OT,null),Nv(this,LT,null),Nv(this,IT,!1),Nv(this,FT,null),Nv(this,zT,void 0),Nv(this,qT,null),Nv(this,WT,""),Nv(this,BT,void 0),Nv(this,UT,""),this.color=e.color||HT._defaultColor,Ev(BT,this,e.thickness||HT._defaultThickness),Ev(zT,this,e.opacity||HT._defaultOpacity),Ev(ET,this,e.boxes||null),Ev(UT,this,e.methodOfCreation||""),Ev(WT,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(Ev(IT,this,!0),jv(VT,this,QT).call(this,e),jv(VT,this,$T).call(this)):Cv(ET,this)&&(Ev(ST,this,e.anchorNode),Ev(CT,this,e.anchorOffset),Ev(PT,this,e.focusNode),Ev(DT,this,e.focusOffset),jv(VT,this,GT).call(this),jv(VT,this,$T).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:Cv(IT,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:Cv(BT,this),methodOfCreation:Cv(UT,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;k_.initialize(e,t),HT._defaultColor||(HT._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case ib.HIGHLIGHT_DEFAULT_COLOR:HT._defaultColor=t;break;case ib.HIGHLIGHT_THICKNESS:HT._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return Cv(FT,this)}updateParams(e,t){switch(e){case ib.HIGHLIGHT_COLOR:jv(VT,this,YT).call(this,t);break;case ib.HIGHLIGHT_THICKNESS:jv(VT,this,KT).call(this,t)}}static get defaultPropertiesToUpdate(){return[[ib.HIGHLIGHT_DEFAULT_COLOR,HT._defaultColor],[ib.HIGHLIGHT_THICKNESS,HT._defaultThickness]]}get propertiesToUpdate(){return[[ib.HIGHLIGHT_COLOR,this.color||HT._defaultColor],[ib.HIGHLIGHT_THICKNESS,Cv(BT,this)||HT._defaultThickness],[ib.HIGHLIGHT_FREE,Cv(IT,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(Ev(TT,this,new bT({editor:this})),e.addColorPicker(Cv(TT,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(jv(VT,this,nM).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,jv(VT,this,nM).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){jv(VT,this,JT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(jv(VT,this,$T).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)jv(VT,this,JT).call(this);else if(e){var n;jv(VT,this,$T).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;Cv(IT,this)?(e=(e-this.rotation+360)%360,n=ZT.call(HT,Cv(OT,this).box,e)):n=ZT.call(HT,[this.x,this.y,this.width,this.height],e),t.updateProperties(Cv(LT,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(Cv(qT,this),{bbox:ZT.call(HT,Cv(MT,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();Cv(WT,this)&&(e.setAttribute("aria-label",Cv(WT,this)),e.setAttribute("role","mark")),Cv(IT,this)?e.classList.add("free"):this.div.addEventListener("keydown",jv(VT,this,eM).bind(this),{signal:this._uiManager._signal});const t=Ev(RT,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=Cv(AT,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Wx(this,Cv(RT,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Cv(qT,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Cv(qT,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:jv(VT,this,tM).call(this,!0);break;case 1:case 3:jv(VT,this,tM).call(this,!1)}}select(){var e;super.select(),Cv(qT,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Cv(qT,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),Cv(qT,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Cv(qT,this),{rootClass:{selected:!1}}),Cv(IT,this)||jv(VT,this,tM).call(this,!1))}get _mustFixPosition(){return!Cv(IT,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(Cv(LT,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(Cv(qT,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:i,x:a,y:r}=n;const{x:s,y:o,width:l,height:c}=i.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=t=>{d.abort(),jv(HT,this,sM).call(this,e,t)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",cx,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",lx,{signal:u}),i.addEventListener("pointermove",jv(HT,this,rM).bind(this,e),{signal:u}),this._freeHighlight=new aT({x:a,y:r},[s,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof AE){const{data:{quadPoints:t,rect:n,rotation:a,id:r,color:s,opacity:o,popupRef:l},parent:{page:{pageNumber:c}}}=e;i=e={annotationType:nb.HIGHLIGHT,color:Array.from(s),opacity:o,quadPoints:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:a,id:r,deleted:!1,popupRef:l}}else if(e instanceof CE){const{data:{inkLists:t,rect:n,rotation:a,id:r,color:s,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:c}}}=e;i=e={annotationType:nb.HIGHLIGHT,color:Array.from(s),thickness:o,inkLists:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:a,id:r,deleted:!1,popupRef:l}}const{color:a,quadPoints:r,inkLists:s,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=Vb.makeHexColor(...a),Ev(zT,l,o||1),s&&Ev(BT,l,e.thickness),l.annotationElementId=e.id||null,l._initialData=i;const[c,d]=l.pageDimensions,[u,h]=l.pageTranslation;if(r){const e=Ev(ET,l,[]);for(let t=0;t<r.length;t+=8)e.push({x:(r[t]-u)/c,y:1-(r[t+1]-h)/d,width:(r[t+2]-r[t])/c,height:(r[t+1]-r[t+5])/d});jv(VT,l,GT).call(l),jv(VT,l,$T).call(l),l.rotate(l.rotation)}else if(s){Ev(IT,l,!0);const e=s[0],n={x:e[0]-u,y:d-(e[1]-h)},i=new aT(n,[0,0,c,d],1,Cv(BT,l)/2,!0,.001);for(let t=0,s=e.length;t<s;t+=2)n.x=e[t]-u,n.y=d-(e[t+1]-h),i.add(n);const{id:a,clipPathId:r}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);jv(VT,l,QT).call(l,{highlightOutlines:i.getOutlines(),highlightId:a,clipPathId:r}),jv(VT,l,$T).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=k_._colorManager.convert(this.color),i={annotationType:nb.HIGHLIGHT,color:n,opacity:Cv(zT,this),thickness:Cv(BT,this),quadPoints:jv(VT,this,iM).call(this),outlines:jv(VT,this,aM).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:jv(VT,this,nM).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!jv(VT,this,oM).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function GT(){const e=new KA(Cv(ET,this),.001);Ev(OT,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=Cv(OT,this).box;const t=new KA(Cv(ET,this),.0025,.001,"ltr"===this._uiManager.direction);Ev(MT,this,t.getOutlines());const{lastPoint:n}=Cv(MT,this);Ev(FT,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function QT(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;Ev(OT,this,t);if(Ev(MT,this,t.getNewOutline(Cv(BT,this)/2+1.5,.0025)),n>=0)Ev(LT,this,n),Ev(AT,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),Ev(qT,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Cv(MT,this).box,path:{d:Cv(MT,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Cv(LT,this),{bbox:ZT.call(qv,Cv(OT,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(Cv(qT,this),{bbox:ZT.call(qv,Cv(MT,this).box,e),path:{d:Cv(MT,this).toSVGPath()}})}const[a,r,s,o]=t.box;switch(this.rotation){case 0:this.x=a,this.y=r,this.width=s,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=r,this.y=1-a,this.width=s*t/e,this.height=o*e/t;break}case 180:this.x=1-a,this.y=1-r,this.width=s,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-r,this.y=a,this.width=s*t/e,this.height=o*e/t;break}}const{lastPoint:l}=Cv(MT,this);Ev(FT,this,[(l[0]-a)/s,(l[1]-r)/o])}function YT(e){const t=(e,t)=>{var n,i;this.color=e,Ev(zT,this,t),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(Cv(LT,this),{root:{fill:e,"fill-opacity":t}}),null===(i=Cv(TT,this))||void 0===i||i.updateColor(e)},n=this.color,i=Cv(zT,this);this.addCommands({cmd:t.bind(this,e,qv._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ib.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function KT(e){const t=Cv(BT,this),n=e=>{Ev(BT,this,e),jv(VT,this,XT).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ib.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function XT(e){if(!Cv(IT,this))return;jv(VT,this,QT).call(this,{highlightOutlines:Cv(OT,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function JT(){null!==Cv(LT,this)&&this.parent&&(this.parent.drawLayer.remove(Cv(LT,this)),Ev(LT,this,null),this.parent.drawLayer.remove(Cv(qT,this)),Ev(qT,this,null))}function $T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===Cv(LT,this)&&(({id:wv(Ev,[LT,this])._,clipPathId:wv(Ev,[AT,this])._}=e.drawLayer.draw({bbox:Cv(OT,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":Cv(zT,this)},rootClass:{highlight:!0,free:Cv(IT,this)},path:{d:Cv(OT,this).toSVGPath()}},!1,!0)),Ev(qT,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Cv(IT,this)},bbox:Cv(MT,this).box,path:{d:Cv(MT,this).toSVGPath()}},Cv(IT,this))),Cv(RT,this)&&(Cv(RT,this).style.clipPath=Cv(AT,this)))}function ZT(e,t){let[n,i,a,r]=e;switch(t){case 90:return[1-i-r,n,r,a];case 180:return[1-n-a,1-i-r,a,r];case 270:return[i,1-n-a,r,a]}return[n,i,a,r]}function eM(e){qv._keyboardManager.exec(this,e)}function tM(e){if(!Cv(ST,this))return;const t=window.getSelection();e?t.setPosition(Cv(ST,this),Cv(CT,this)):t.setPosition(Cv(PT,this),Cv(DT,this))}function nM(){return Cv(IT,this)?this.rotation:0}function iM(){if(Cv(IT,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,a=Cv(ET,this),r=new Float32Array(8*a.length);let s=0;for(const{x:o,y:l,width:c,height:d}of a){const a=o*e+n,u=(1-l)*t+i;r[s]=r[s+4]=a,r[s+1]=r[s+3]=u,r[s+2]=r[s+6]=a+c*e,r[s+5]=r[s+7]=u-d*t,s+=8}return r}function aM(e){return Cv(OT,this).serialize(e,jv(VT,this,nM).call(this))}function rM(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function sM(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function oM(e){const{color:t}=this._initialData;return e.color.some(((e,n)=>e!==t[n]))}qv=HT,l(HT,"_defaultColor",null),l(HT,"_defaultOpacity",1),l(HT,"_defaultThickness",12),l(HT,"_type","highlight"),l(HT,"_editorType",nb.HIGHLIGHT),l(HT,"_freeHighlightId",-1),l(HT,"_freeHighlight",null),l(HT,"_freeHighlightClipId","");var lM=new WeakMap;class cM{constructor(){Nv(this,lM,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){Cv(lM,this)[e]=t}toSVGProperties(){const e=Cv(lM,this);return Ev(lM,this,Object.create(null)),{root:e}}reset(){Ev(lM,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){Eb("Not implemented")}}var dM=new WeakMap,uM=new WeakMap,hM=new WeakSet;class mM extends k_{constructor(e){super(e),kv(this,hM),Nv(this,dM,null),Nv(this,uM,void 0),l(this,"_drawId",null),Ev(uM,this,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(jv(hM,this,pM).call(this,e),jv(hM,this,vM).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))n.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){Eb("Not implemented")}static get typesMap(){Eb("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(_M._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,a=i[t],r=e=>{var n;i.updateProperty(t,e);const a=Cv(dM,this).updateProperty(t,e);a&&jv(hM,this,yM).call(this,a),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,mM._mergeSVGProperties(Cv(dM,this).getPathResizingSVGProperties(jv(hM,this,xM).call(this)),{bbox:jv(hM,this,wM).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,mM._mergeSVGProperties(Cv(dM,this).getPathResizedSVGProperties(jv(hM,this,xM).call(this)),{bbox:jv(hM,this,wM).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:jv(hM,this,wM).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,mM._mergeSVGProperties(Cv(dM,this).getPathTranslatedSVGProperties(jv(hM,this,xM).call(this),this.parentDimensions),{bbox:jv(hM,this,wM).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Cv(uM,this)&&(Ev(uM,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){jv(hM,this,gM).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(jv(hM,this,vM).call(this),jv(hM,this,yM).call(this,Cv(dM,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),jv(hM,this,gM).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),jv(hM,this,vM).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mM._mergeSVGProperties({bbox:jv(hM,this,wM).call(this)},Cv(dM,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&jv(hM,this,yM).call(this,Cv(dM,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,r]=this.parentDimensions;return this.setDims(this.width*a,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,a){Eb("Not implemented")}static startDrawing(e,t,n,i){var a,r;const{target:s,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=i;if(SM._&&SM._!==d)return;const{viewport:{rotation:u}}=e,{width:h,height:m}=s.getBoundingClientRect(),p=kM._=new AbortController,f=e.combinedSignal(p);jM._||(jM._=c),null!==(a=SM._)&&void 0!==a||(SM._=d),window.addEventListener("pointerup",(e=>{var t;jM._===e.pointerId?this._endDraw(e):null===(t=CM._)||void 0===t||t.delete(e.pointerId)}),{signal:f}),window.addEventListener("pointercancel",(e=>{var t;jM._===e.pointerId?this._currentParent.endDrawingSession():null===(t=CM._)||void 0===t||t.delete(e.pointerId)}),{signal:f}),window.addEventListener("pointerdown",(e=>{SM._===e.pointerType&&((CM._||(CM._=new Set)).add(e.pointerId),_M._.isCancellable()&&(_M._.removeLastElement(),_M._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))}),{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",lx,{signal:f}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),s.addEventListener("touchmove",(e=>{e.timeStamp===EM._&&cx(e)}),{signal:f}),e.toggleDrawing(),null===(r=t._editorUndoBar)||void 0===r||r.hide(),_M._?e.drawLayer.updateProperties(this._currentDrawId,_M._.startNew(o,l,h,m,u)):(t.updateUIForDefaultProperties(this),_M._=this.createDrawerInstance(o,l,h,m,u),NM._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(NM._.toSVGProperties(),_M._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(EM._=-1,!_M._)return;const{offsetX:n,offsetY:i,pointerId:a}=e;jM._===a&&((null===(t=CM._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,_M._.add(n,i)),EM._=e.timeStamp,cx(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,_M._=null,NM._=null,SM._=null,EM._=NaN),kM._&&(kM._.abort(),kM._=null,jM._=NaN,CM._=null)}static _endDraw(e){const t=this._currentParent;if(t)if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,_M._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=_M._,n=this._currentDrawId,i=e.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:ib.DRAW_STEP})}else this.endDrawing(!1)}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(ib.DRAW_STEP),!_M._.isEmpty()){const{pageDimensions:[n,i],scale:a}=t,r=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:_M._.getOutlines(n*a,i*a,a,this._INNER_MARGIN),drawingOptions:NM._,mustBeCommitted:!e});return this._cleanup(!0),r}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,a,r){Eb("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:a,pageX:r,pageY:s}}=t.viewport,o=this.deserializeDraw(r,s,i,a,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),jv(hM,l,pM).call(l,{drawOutlines:o}),jv(hM,l,vM).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[i,a]=this.pageDimensions;return Cv(dM,this).serialize([t,n,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function pM(e){let{drawOutlines:t,drawId:n,drawingOptions:i}=e;Ev(dM,this,t),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=jv(hM,this,fM).call(this,t,this.parent),jv(hM,this,yM).call(this,t.box)}function fM(e,t){const{id:n}=t.drawLayer.draw(Wv._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function gM(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function vM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=jv(hM,this,fM).call(this,Cv(dM,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function bM(e){let[t,n,i,a]=e;const{parentDimensions:[r,s],rotation:o}=this;switch(o){case 90:return[n,1-t,i*(s/r),a*(r/s)];case 180:return[1-t,1-n,i,a];case 270:return[1-n,t,i*(s/r),a*(r/s)];default:return[t,n,i,a]}}function xM(){const{x:e,y:t,width:n,height:i,parentDimensions:[a,r],rotation:s}=this;switch(s){case 90:return[1-t,e,n*(a/r),i*(r/a)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(a/r),i*(r/a)];default:return[e,t,n,i]}}function yM(e){if([this.x,this.y,this.width,this.height]=jv(hM,this,bM).call(this,e),this.div){this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function wM(){const{x:e,y:t,width:n,height:i,rotation:a,parentRotation:r,parentDimensions:[s,o]}=this;switch((4*a+r)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(s/o),i*(o/s),n*(s/o)];case 5:return[1-t,e,n*(s/o),i*(o/s)];case 6:return[1-e-i*(o/s),1-t,i*(o/s),n*(s/o)];case 7:return[t-n*(s/o),1-e-i*(o/s),n*(s/o),i*(o/s)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(o/s),t,i*(o/s),n*(s/o)];case 13:return[1-t-n*(s/o),e-i*(o/s),n*(s/o),i*(o/s)];case 14:return[1-e,1-t-n*(s/o),i*(o/s),n*(s/o)];case 15:return[t,1-e,n*(s/o),i*(o/s)];default:return[e,t,n,i]}}Wv=mM,l(mM,"_currentDrawId",-1),l(mM,"_currentParent",null);var _M={_:null},kM={_:null},NM={_:null},jM={_:NaN},SM={_:null},CM={_:null},EM={_:NaN};l(mM,"_INNER_MARGIN",3);var AM=new WeakMap,TM=new WeakMap,MM=new WeakMap,PM=new WeakMap,DM=new WeakMap,RM=new WeakMap,OM=new WeakMap,LM=new WeakMap,IM=new WeakMap,FM=new WeakMap,zM=new WeakMap,qM=new WeakSet;class WM{constructor(e,t,n,i,a,r){kv(this,qM),Nv(this,AM,new Float64Array(6)),Nv(this,TM,void 0),Nv(this,MM,void 0),Nv(this,PM,void 0),Nv(this,DM,void 0),Nv(this,RM,void 0),Nv(this,OM,""),Nv(this,LM,0),Nv(this,IM,new ZM),Nv(this,FM,void 0),Nv(this,zM,void 0),Ev(FM,this,n),Ev(zM,this,i),Ev(PM,this,a),Ev(DM,this,r),[e,t]=jv(qM,this,BM).call(this,e,t);const s=Ev(TM,this,[NaN,NaN,NaN,NaN,e,t]);Ev(RM,this,[e,t]),Ev(MM,this,[{line:s,points:Cv(RM,this)}]),Cv(AM,this).set(s,0)}updateProperty(e,t){"stroke-width"===e&&Ev(DM,this,t)}isEmpty(){return!Cv(MM,this)||0===Cv(MM,this).length}isCancellable(){return Cv(RM,this).length<=10}add(e,t){[e,t]=jv(qM,this,BM).call(this,e,t);const[n,i,a,r]=Cv(AM,this).subarray(2,6),s=e-a,o=t-r;return Math.hypot(Cv(FM,this)*s,Cv(zM,this)*o)<=2?null:(Cv(RM,this).push(e,t),isNaN(n)?(Cv(AM,this).set([a,r,e,t],2),Cv(TM,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(Cv(AM,this)[0])&&Cv(TM,this).splice(6,6),Cv(AM,this).set([n,i,a,r,e,t],0),Cv(TM,this).push(...cA.createBezierPoints(n,i,a,r,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===Cv(RM,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){Ev(FM,this,n),Ev(zM,this,i),Ev(PM,this,a),[e,t]=jv(qM,this,BM).call(this,e,t);const r=Ev(TM,this,[NaN,NaN,NaN,NaN,e,t]);Ev(RM,this,[e,t]);const s=Cv(MM,this).at(-1);return s&&(s.line=new Float32Array(s.line),s.points=new Float32Array(s.points)),Cv(MM,this).push({line:r,points:Cv(RM,this)}),Cv(AM,this).set(r,0),Ev(LM,this,0),this.toSVGPath(),null}getLastElement(){return Cv(MM,this).at(-1)}setLastElement(e){return Cv(MM,this)?(Cv(MM,this).push(e),Ev(TM,this,e.line),Ev(RM,this,e.points),Ev(LM,this,0),{path:{d:this.toSVGPath()}}):Cv(IM,this).setLastElement(e)}removeLastElement(){if(!Cv(MM,this))return Cv(IM,this).removeLastElement();Cv(MM,this).pop(),Ev(OM,this,"");for(let e=0,t=Cv(MM,this).length;e<t;e++){const{line:t,points:n}=Cv(MM,this)[e];Ev(TM,this,t),Ev(RM,this,n),Ev(LM,this,0),this.toSVGPath()}return{path:{d:Cv(OM,this)}}}toSVGPath(){const e=cA.svgRound(Cv(TM,this)[4]),t=cA.svgRound(Cv(TM,this)[5]);if(2===Cv(RM,this).length)return Ev(OM,this,"".concat(Cv(OM,this)," M ").concat(e," ").concat(t," Z")),Cv(OM,this);if(Cv(RM,this).length<=6){const n=Cv(OM,this).lastIndexOf("M");Ev(OM,this,"".concat(Cv(OM,this).slice(0,n)," M ").concat(e," ").concat(t)),Ev(LM,this,6)}if(4===Cv(RM,this).length){const e=cA.svgRound(Cv(TM,this)[10]),t=cA.svgRound(Cv(TM,this)[11]);return Ev(OM,this,"".concat(Cv(OM,this)," L ").concat(e," ").concat(t)),Ev(LM,this,12),Cv(OM,this)}const n=[];0===Cv(LM,this)&&(n.push("M ".concat(e," ").concat(t)),Ev(LM,this,6));for(let i=Cv(LM,this),a=Cv(TM,this).length;i<a;i+=6){const[e,t,a,r,s,o]=Cv(TM,this).slice(i,i+6).map(cA.svgRound);n.push("C".concat(e," ").concat(t," ").concat(a," ").concat(r," ").concat(s," ").concat(o))}return Ev(OM,this,Cv(OM,this)+n.join(" ")),Ev(LM,this,Cv(TM,this).length),Cv(OM,this)}getOutlines(e,t,n,i){const a=Cv(MM,this).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),Cv(IM,this).build(Cv(MM,this),e,t,n,Cv(PM,this),Cv(DM,this),i),Ev(AM,this,null),Ev(TM,this,null),Ev(MM,this,null),Ev(OM,this,null),Cv(IM,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function BM(e,t){return cA._normalizePoint(e,t,Cv(FM,this),Cv(zM,this),Cv(PM,this))}var UM=new WeakMap,VM=new WeakMap,HM=new WeakMap,GM=new WeakMap,QM=new WeakMap,YM=new WeakMap,KM=new WeakMap,XM=new WeakMap,JM=new WeakMap,$M=new WeakSet;class ZM extends cA{constructor(){super(...arguments),kv(this,$M),Nv(this,UM,void 0),Nv(this,VM,0),Nv(this,HM,void 0),Nv(this,GM,void 0),Nv(this,QM,void 0),Nv(this,YM,void 0),Nv(this,KM,void 0),Nv(this,XM,void 0),Nv(this,JM,void 0)}build(e,t,n,i,a,r,s){Ev(QM,this,t),Ev(YM,this,n),Ev(KM,this,i),Ev(XM,this,a),Ev(JM,this,r),Ev(HM,this,null!==s&&void 0!==s?s:0),Ev(GM,this,e),jv($M,this,nP).call(this)}get thickness(){return Cv(JM,this)}setLastElement(e){return Cv(GM,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return Cv(GM,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of Cv(GM,this))if(e.push("M".concat(cA.svgRound(t[4])," ").concat(cA.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(cA.svgRound(t[10])," ").concat(cA.svgRound(t[11])));else for(let n=6,i=t.length;n<i;n+=6){const[i,a,r,s,o,l]=t.subarray(n,n+6).map(cA.svgRound);e.push("C".concat(i," ").concat(a," ").concat(r," ").concat(s," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,i,a,r]=e;const s=[],o=[],[l,c,d,u]=jv($M,this,tP).call(this);let h,m,p,f,g,v,b,x,y;switch(Cv(XM,this)){case 0:y=cA._rescale,h=n,m=i+r,p=a,f=-r,g=n+l*a,v=i+(1-c-u)*r,b=n+(l+d)*a,x=i+(1-c)*r;break;case 90:y=cA._rescaleAndSwap,h=n,m=i,p=a,f=r,g=n+c*a,v=i+l*r,b=n+(c+u)*a,x=i+(l+d)*r;break;case 180:y=cA._rescale,h=n+a,m=i,p=-a,f=r,g=n+(1-l-d)*a,v=i+c*r,b=n+(1-l)*a,x=i+(c+u)*r;break;case 270:y=cA._rescaleAndSwap,h=n+a,m=i+r,p=-a,f=-r,g=n+(1-c-u)*a,v=i+(1-l-d)*r,b=n+(1-c)*a,x=i+(1-l)*r}for(const{line:w,points:_}of Cv(GM,this))s.push(y(w,h,m,p,f,t?new Array(w.length):null)),o.push(y(_,h,m,p,f,t?new Array(_.length):null));return{lines:s,points:o,rect:[g,v,b,x]}}static deserialize(e,t,n,i,a,r){let{paths:{lines:s,points:o},rotation:l,thickness:c}=r;const d=[];let u,h,m,p,f;switch(l){case 0:f=cA._rescale,u=-e/n,h=t/i+1,m=1/n,p=-1/i;break;case 90:f=cA._rescaleAndSwap,u=-t/i,h=-e/n,m=1/i,p=1/n;break;case 180:f=cA._rescale,u=e/n+1,h=-t/i,m=-1/n,p=1/i;break;case 270:f=cA._rescaleAndSwap,u=t/i+1,h=e/n+1,m=-1/i,p=-1/n}if(!s){s=[];for(const e of o){const t=e.length;if(2===t){s.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){s.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));s.push(n);let[i,a,r,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,a],0);for(let s=4;s<t;s+=2){const t=e[s],l=e[s+1];n.set(cA.createBezierPoints(i,a,r,o,t,l),3*(s-2)),[i,a,r,o]=[r,o,t,l]}}}for(let v=0,b=s.length;v<b;v++)d.push({line:f(s[v].map((e=>null!==e&&void 0!==e?e:NaN)),u,h,m,p),points:f(o[v].map((e=>null!==e&&void 0!==e?e:NaN)),u,h,m,p)});const g=new this.prototype.constructor;return g.build(d,n,i,1,l,c,a),g}get box(){return Cv(UM,this)}updateProperty(e,t){return"stroke-width"===e?jv($M,this,iP).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e;const[a,r]=jv($M,this,eP).call(this);Ev(QM,this,n),Ev(YM,this,i),Ev(KM,this,t);const[s,o]=jv($M,this,eP).call(this),l=s-a,c=o-r,d=Cv(UM,this);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return Ev(VM,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return Cv(UM,this).map(cA.svgRound).join(" ")}get defaultProperties(){const[e,t]=Cv(UM,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(cA.svgRound(e)," ").concat(cA.svgRound(t))}}}get rotationTransform(){const[,,e,t]=Cv(UM,this);let n=0,i=0,a=0,r=0,s=0,o=0;switch(Cv(VM,this)){case 90:i=t/e,a=-e/t,s=e;break;case 180:n=-1,r=-1,s=e,o=t;break;case 270:i=-t/e,a=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(a," ").concat(r," ").concat(cA.svgRound(s)," ").concat(cA.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,i,a]=e;const[r,s]=jv($M,this,eP).call(this),[o,l,c,d]=Cv(UM,this);if(Math.abs(c-r)<=cA.PRECISION||Math.abs(d-s)<=cA.PRECISION){const e=t+i/2-(o+c/2),r=n+a/2-(l+d/2);return{path:{"transform-origin":"".concat(cA.svgRound(t)," ").concat(cA.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(r,")")}}}const u=(i-2*r)/(c-2*r),h=(a-2*s)/(d-2*s),m=c/i,p=d/a;return{path:{"transform-origin":"".concat(cA.svgRound(o)," ").concat(cA.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(m," ").concat(p,") ")+"translate(".concat(cA.svgRound(r)," ").concat(cA.svgRound(s),") scale(").concat(u," ").concat(h,") ")+"translate(".concat(cA.svgRound(-r)," ").concat(cA.svgRound(-s),")")}}}getPathResizedSVGProperties(e){let[t,n,i,a]=e;const[r,s]=jv($M,this,eP).call(this),o=Cv(UM,this),[l,c,d,u]=o;if(o[0]=t,o[1]=n,o[2]=i,o[3]=a,Math.abs(d-r)<=cA.PRECISION||Math.abs(u-s)<=cA.PRECISION){const e=t+i/2-(l+d/2),r=n+a/2-(c+u/2);for(const{line:t,points:n}of Cv(GM,this))cA._translate(t,e,r,t),cA._translate(n,e,r,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(cA.svgRound(t)," ").concat(cA.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(i-2*r)/(d-2*r),m=(a-2*s)/(u-2*s),p=-h*(l+r)+t+r,f=-m*(c+s)+n+s;if(1!==h||1!==m||0!==p||0!==f)for(const{line:g,points:v}of Cv(GM,this))cA._rescale(g,p,f,h,m,g),cA._rescale(v,p,f,h,m,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(cA.svgRound(t)," ").concat(cA.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e;const[a,r]=t,s=Cv(UM,this),o=n-s[0],l=i-s[1];if(Cv(QM,this)===a&&Cv(YM,this)===r)for(const{line:c,points:d}of Cv(GM,this))cA._translate(c,o,l,c),cA._translate(d,o,l,d);else{const e=Cv(QM,this)/a,t=Cv(YM,this)/r;Ev(QM,this,a),Ev(YM,this,r);for(const{line:n,points:i}of Cv(GM,this))cA._rescale(n,o,l,e,t,n),cA._rescale(i,o,l,e,t,i);s[2]*=e,s[3]*=t}return s[0]=n,s[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(cA.svgRound(n)," ").concat(cA.svgRound(i))}}}get defaultSVGProperties(){const e=Cv(UM,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(cA.svgRound(e[0])," ").concat(cA.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function eP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cv(JM,this);const t=Cv(HM,this)+e/2*Cv(KM,this);return Cv(XM,this)%180===0?[t/Cv(QM,this),t/Cv(YM,this)]:[t/Cv(YM,this),t/Cv(QM,this)]}function tP(){const[e,t,n,i]=Cv(UM,this),[a,r]=jv($M,this,eP).call(this,0);return[e+a,t+r,n-2*a,i-2*r]}function nP(){const e=Ev(UM,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of Cv(GM,this)){if(i.length<=12){for(let t=4,n=i.length;t<n;t+=6)Vb.pointBoundingBox(i[t],i[t+1],e);continue}let t=i[4],n=i[5];for(let a=6,r=i.length;a<r;a+=6){const[r,s,o,l,c,d]=i.subarray(a,a+6);Vb.bezierBoundingBox(t,n,r,s,o,l,c,d,e),t=c,n=d}}const[t,n]=jv($M,this,eP).call(this);e[0]=Jb(e[0]-t,0,1),e[1]=Jb(e[1]-n,0,1),e[2]=Jb(e[2]+t,0,1),e[3]=Jb(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function iP(e){const[t,n]=jv($M,this,eP).call(this);Ev(JM,this,e);const[i,a]=jv($M,this,eP).call(this),[r,s]=[i-t,a-n],o=Cv(UM,this);return o[0]-=r,o[1]-=s,o[2]+=2*r,o[3]+=2*s,o}class aP extends cM{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:k_._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new aP(this._viewParameters);return e.updateAll(this),e}}var rP=new WeakSet;class sP extends mM{constructor(e){super(d(d({},e),{},{name:"inkEditor"})),kv(this,rP),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){k_.initialize(e,t),this._defaultDrawingOptions=new aP(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Pb(this,"typesMap",new Map([[ib.INK_THICKNESS,"stroke-width"],[ib.INK_COLOR,"stroke"],[ib.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,a){return new WM(e,t,n,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,a,r){return ZM.deserialize(e,t,n,i,a,r)}static async deserialize(e,t,n){let i=null;if(e instanceof CE){const{data:{inkLists:t,rect:n,rotation:a,id:r,color:s,opacity:o,borderStyle:{rawWidth:l},popupRef:c},parent:{page:{pageNumber:d}}}=e;i=e={annotationType:nb.INK,color:Array.from(s),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:d-1,rect:n.slice(0),rotation:a,id:r,deleted:!1,popupRef:c}}const a=await super.deserialize(e,t,n);return a.annotationElementId=e.id||null,a._initialData=i,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:i}=e;this._drawingOptions=sP.getDefaultDrawingOptions({stroke:Vb.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":r,"stroke-width":s}}=this,o={annotationType:nb.INK,color:k_._colorManager.convert(a),opacity:r,thickness:s,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!jv(rP,this,oP).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}}function oP(e){const{color:t,thickness:n,opacity:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some(((e,n)=>e!==t[n]))||e.thickness!==n||e.opacity!==i||e.pageIndex!==a}l(sP,"_type","ink"),l(sP,"_editorType",nb.INK),l(sP,"_defaultDrawingOptions",null);class lP extends ZM{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class cP{static extractContoursFromText(e,t,n,i,a,r){let{fontFamily:s,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const u=d.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(s),{actualBoundingBoxLeft:h,actualBoundingBoxRight:m,actualBoundingBoxAscent:p,actualBoundingBoxDescent:f,fontBoundingBoxAscent:g,fontBoundingBoxDescent:v,width:b}=d.measureText(e),x=1.5,y=Math.ceil(Math.max(Math.abs(h)+Math.abs(m)||0,b)*x),w=Math.ceil(Math.max(Math.abs(p)+Math.abs(f)||200,Math.abs(g)+Math.abs(v)||200)*x);c=new OffscreenCanvas(y,w),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=u,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,y,w),d.fillStyle="black",d.fillText(e,.5*y/2,1.5*w/2);const _=jv(cP,this,bP).call(this,d.getImageData(0,0,y,w).data),k=jv(cP,this,vP).call(this,_),N=jv(cP,this,xP).call(this,k),j=jv(cP,this,mP).call(this,_,y,w,N);return this.processDrawnLines({lines:{curves:j,width:y,height:w},pageWidth:n,pageHeight:i,rotation:a,innerMargin:r,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,a){const[r,s,o]=jv(cP,this,yP).call(this,e),[l,c]=jv(cP,this,gP).call(this,r,s,o,Math.hypot(s,o)*jv(cP,this,wP)._.sigmaSFactor,jv(cP,this,wP)._.sigmaR,jv(cP,this,wP)._.kernelSize),d=jv(cP,this,xP).call(this,c),u=jv(cP,this,mP).call(this,l,s,o,d);return this.processDrawnLines({lines:{curves:u,width:s,height:o},pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:i,pageHeight:a,rotation:r,innerMargin:s,mustSmooth:o,areContours:l}=e;r%180!==0&&([i,a]=[a,i]);const{curves:c,width:d,height:u}=n,h=null!==(t=n.thickness)&&void 0!==t?t:0,m=[],p=Math.min(i/d,a/u),f=p/i,g=p/a,v=[];for(const{points:x}of c){const e=o?jv(cP,this,fP).call(this,x):x;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),i=new Float32Array(3*(2===t?2:t-2));if(m.push({line:i,points:n}),2===t){n[0]=e[0]*f,n[1]=e[1]*g,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[a,r,s,l]=e;a*=f,r*=g,s*=f,l*=g,n.set([a,r,s,l],0),i.set([NaN,NaN,NaN,NaN,a,r],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*f,c=n[o+1]=e[o+1]*g;i.set(cA.createBezierPoints(a,r,s,l,t,c),3*(o-2)),[a,r,s,l]=[s,l,t,c]}}if(0===m.length)return null;const b=l?new lP:new ZM;return b.build(m,i,a,1,r,l?0:h,s),{outline:b,newCurves:v,areContours:l,thickness:h,width:d,height:u}}static async compressSignature(e){let t,{outlines:n,areContours:i,thickness:a,width:r,height:s}=e,o=1/0,l=-1/0,c=0;for(const b of n){c+=b.length;for(let e=2,t=b.length;e<t;e++){const t=b[e]-b[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const d=n.length,u=8+3*d,h=new Uint32Array(u);let m=0;h[m++]=u*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*t.BYTES_PER_ELEMENT,h[m++]=0,h[m++]=r,h[m++]=s,h[m++]=i?0:1,h[m++]=Math.max(0,Math.floor(null!==a&&void 0!==a?a:0)),h[m++]=d,h[m++]=t.BYTES_PER_ELEMENT;for(const b of n)h[m++]=b.length-2,h[m++]=b[0],h[m++]=b[1];const p=new CompressionStream("deflate-raw"),f=p.writable.getWriter();await f.ready,f.write(h);const g=t.prototype.constructor;for(const b of n){const e=new g(b.length-2);for(let t=2,n=b.length;t<n;t++)e[t-2]=b[t]-b[t-2];f.write(e)}f.close();const v=await new Response(p.readable).arrayBuffer();return $b(new Uint8Array(v))}static async decompressSignature(e){try{const l=(s=e,Uint8Array.fromBase64?Uint8Array.fromBase64(s):Wb(atob(s))),{readable:c,writable:d}=new DecompressionStream("deflate-raw"),u=d.getWriter();await u.ready,u.write(l).then((async()=>{await u.ready,await u.close()})).catch((()=>{}));let h=null,m=0;var t,n=!1,i=!1;try{for(var a,r=Ra(c);n=!(a=await r.next()).done;n=!1){const e=a.value;h||(h=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),h.set(e,m),m+=e.length}}catch(o){i=!0,t=o}finally{try{n&&null!=r.return&&await r.return()}finally{if(i)throw t}}const p=new Uint32Array(h.buffer,0,h.length>>2),f=p[1];if(0!==f)throw new Error("Invalid version: ".concat(f));const g=p[2],v=p[3],b=0===p[4],x=p[5],y=p[6],w=p[7],_=[],k=(8+3*y)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(w){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(h.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(h.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(h.buffer,k)}m=0;for(let e=0;e<y;e++){const t=p[3*e+8],n=new Float32Array(t+2);_.push(n);for(let i=0;i<2;i++)n[i]=p[3*e+8+i+1];for(let e=0;e<t;e++)n[e+2]=n[e]+N[m++]}return{areContours:b,thickness:x,outlines:_,width:g,height:v}}catch(Tt){return Cb("decompressSignature: ".concat(Tt)),null}var s}}function dP(e,t,n,i){return i-=t,0===(n-=e)?i>0?0:4:1===n?i+6:2-i}function uP(e,t,n,i,a,r,s){const o=jv(Bv,this,dP).call(this,n,i,a,r);for(let l=0;l<8;l++){const a=(-l+o-s+16)%8;if(0!==e[(n+jv(Bv,this,_P)._[2*a])*t+(i+jv(Bv,this,_P)._[2*a+1])])return a}return-1}function hP(e,t,n,i,a,r,s){const o=jv(Bv,this,dP).call(this,n,i,a,r);for(let l=0;l<8;l++){const a=(l+o+s+16)%8;if(0!==e[(n+jv(Bv,this,_P)._[2*a])*t+(i+jv(Bv,this,_P)._[2*a+1])])return a}return-1}function mP(e,t,n,i){const a=e.length,r=new Int32Array(a);for(let c=0;c<a;c++)r[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)r[c*t]=r[c*t+t-1]=0;for(let c=0;c<t;c++)r[c]=r[t*n-1-c]=0;let s,o=1;const l=[];for(let c=1;c<n-1;c++){s=1;for(let e=1;e<t-1;e++){const n=c*t+e,i=r[n];if(0===i)continue;let a=c,d=e;if(1===i&&0===r[n-1])o+=1,d-=1;else{if(!(i>=1&&0===r[n+1])){1!==i&&(s=Math.abs(i));continue}o+=1,d+=1,i>1&&(s=i)}const u=[e,c],h=d===e+1,m={isHole:h,points:u,id:o,parent:0};let p;l.push(m);for(const e of l)if(e.id===s){p=e;break}p?p.isHole?m.parent=h?p.parent:s:m.parent=h?s:p.parent:m.parent=h?s:0;const f=jv(Bv,this,uP).call(this,r,t,c,e,a,d,0);if(-1===f){r[n]=-o,1!==r[n]&&(s=Math.abs(r[n]));continue}let g=jv(Bv,this,_P)._[2*f],v=jv(Bv,this,_P)._[2*f+1];const b=c+g,x=e+v;a=b,d=x;let y=c,w=e;for(;;){const i=jv(Bv,this,hP).call(this,r,t,y,w,a,d,1);g=jv(Bv,this,_P)._[2*i],v=jv(Bv,this,_P)._[2*i+1];const l=y+g,h=w+v;u.push(h,l);const m=y*t+w;if(0===r[m+1]?r[m]=-o:1===r[m]&&(r[m]=o),l===c&&h===e&&y===b&&w===x){1!==r[n]&&(s=Math.abs(r[n]));break}a=y,d=w,y=l,w=h}}}return l}function pP(e,t,n,i){if(n-t<=4){for(let a=t;a<n-2;a+=2)i.push(e[a],e[a+1]);return}const a=e[t],r=e[t+1],s=e[n-4]-a,o=e[n-3]-r,l=Math.hypot(s,o),c=s/l,d=o/l,u=c*r-d*a,h=o/s,m=1/l,p=Math.atan(h),f=Math.cos(p),g=Math.sin(p),v=m*(Math.abs(f)+Math.abs(g)),b=m*(1-v+v**2),x=Math.max(Math.atan(Math.abs(g+f)*b),Math.atan(Math.abs(g-f)*b));let y=0,w=t;for(let _=t+2;_<n-2;_+=2){const t=Math.abs(u-c*e[_+1]+d*e[_]);t>y&&(w=_,y=t)}y>(l*x)**2?(jv(Bv,this,pP).call(this,e,t,w+2,i),jv(Bv,this,pP).call(this,e,w,n,i)):i.push(a,r)}function fP(e){const t=[],n=e.length;return jv(Bv,this,pP).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function gP(e,t,n,i,a,r){const s=new Float32Array(r**2),o=-2*i**2,l=r>>1;for(let p=0;p<r;p++){const e=(p-l)**2;for(let t=0;t<r;t++)s[p*r+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),d=-2*a**2;for(let p=0;p<256;p++)c[p]=Math.exp(p**2/d);const u=e.length,h=new Uint8Array(u),m=new Uint32Array(256);for(let p=0;p<n;p++)for(let i=0;i<t;i++){const a=p*t+i,o=e[a];let d=0,u=0;for(let h=0;h<r;h++){const a=p+h-l;if(!(a<0||a>=n))for(let n=0;n<r;n++){const m=i+n-l;if(m<0||m>=t)continue;const p=e[a*t+m],f=s[h*r+n]*c[Math.abs(p-o)];d+=p*f,u+=f}}m[h[a]=Math.round(d/u)]++}return[h,m]}function vP(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function bP(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let s=0,o=n.length;s<o;s++){if(0===e[3+(s<<2)]){i=n[s]=255;continue}const t=n[s]=e[s<<2];t>i&&(i=t),t<a&&(a=t)}const r=255/(i-a);for(let s=0;s<t;s++)n[s]=(n[s]-a)*r;return n}function xP(e){let t,n=-1/0,i=-1/0;const a=e.findIndex((e=>0!==e));let r=a,s=a;for(t=a;t<256;t++){const a=e[t];a>n&&(t-r>i&&(i=t-r,s=t-1),n=a,r=t)}for(t=s-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function yP(e){const t=e,{width:n,height:i}=e,{maxDim:a}=jv(Bv,this,wP)._;let r=n,s=i;if(n>a||i>a){let o=n,l=i,c=Math.log2(Math.max(n,i)/a);const d=Math.floor(c);c=c===d?d-1:d;for(let n=0;n<c;n++){r=Math.ceil(o/2),s=Math.ceil(l/2);const n=new OffscreenCanvas(r,s);n.getContext("2d").drawImage(e,0,0,o,l,0,0,r,s),o=r,l=s,e!==t&&e.close(),e=n.transferToImageBitmap()}const u=Math.min(a/r,a/s);r=Math.round(r*u),s=Math.round(s*u)}const o=new OffscreenCanvas(r,s).getContext("2d",{willReadFrequently:!0});o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,r,s);const l=o.getImageData(0,0,r,s).data;return[jv(Bv,this,bP).call(this,l),r,s]}Bv=cP;var wP={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},_P={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class kP extends cM{constructor(){super(),super.updateProperties({fill:k_._defaultLineColor,"stroke-width":0})}clone(){const e=new kP;return e.updateAll(this),e}}class NP extends aP{constructor(e){super(e),super.updateProperties({stroke:k_._defaultLineColor,"stroke-width":1})}clone(){const e=new NP(this._viewParameters);return e.updateAll(this),e}}var jP=new WeakMap,SP=new WeakMap,CP=new WeakMap,EP=new WeakMap;class AP extends mM{constructor(e){super(d(d({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),Nv(this,jP,!1),Nv(this,SP,null),Nv(this,CP,null),Nv(this,EP,null),this._willKeepAspectRatio=!0,Ev(CP,this,e.signatureData||null),Ev(SP,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){k_.initialize(e,t),this._defaultDrawingOptions=new kP,this._defaultDrawnSignatureOptions=new NP(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Pb(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Cv(SP,this)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasDescription");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(Cv(CP,this)){const{lines:e,mustSmooth:t,areContours:n,description:i,uuid:a,heightInPage:r}=Cv(CP,this),{rawDims:{pageWidth:s,pageHeight:o},rotation:l}=this.parent.viewport,c=cP.processDrawnLines({lines:e,pageWidth:s,pageHeight:o,rotation:l,innerMargin:AP._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,r,i,a)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){Ev(EP,this,e),this.addEditToolbar()}getUuid(){return Cv(EP,this)}get description(){return Cv(SP,this)}set description(e){Ev(SP,this,e),super.addEditToolbar().then((t=>{null===t||void 0===t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:a}=Cv(CP,this),r=Math.max(i,a);return{areContours:t,outline:cP.processDrawnLines({lines:{curves:e.map((e=>({points:e}))),thickness:n,width:i,height:a},pageWidth:r,pageHeight:r,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&null!==Cv(SP,this)&&(await e.addEditSignatureButton(this._uiManager.signatureManager,Cv(EP,this),Cv(SP,this)),e.show()),e):null}addSignature(e,t,n,i){const{x:a,y:r}=this,{outline:s}=Ev(CP,this,e);let o;Ev(jP,this,s instanceof lP),Ev(SP,this,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),Cv(jP,this)?o=AP.getDefaultDrawingOptions():(o=AP._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":s.thickness})),this._addOutlines({drawOutlines:s,drawingOptions:o});const[l,c]=this.parentDimensions,[,d]=this.pageDimensions;let u=t/d;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(l*this.width,c*this.height),this.x=a,this.y=r,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return cP.process(e,t,n,i,AP._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return cP.extractContoursFromText(e,t,n,i,a,AP._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return cP.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:AP._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=AP.getDefaultDrawingOptions():(this._drawingOptions=AP._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,r={annotationType:nb.SIGNATURE,isSignature:!0,areContours:Cv(jP,this),color:[0,0,0],thickness:Cv(jP,this)?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(r.paths={lines:t,points:n},r.uuid=Cv(EP,this),r.isCopy=!0):r.lines=t,Cv(SP,this)&&(r.accessibilityData={type:"Figure",alt:Cv(SP,this)}),r}static deserializeDraw(e,t,n,i,a,r){return r.areContours?lP.deserialize(e,t,n,i,a,r):ZM.deserialize(e,t,n,i,a,r)}static async deserialize(e,t,n){var i;const a=await super.deserialize(e,t,n);return Ev(jP,a,e.areContours),Ev(SP,a,(null===(i=e.accessibilityData)||void 0===i?void 0:i.alt)||""),Ev(EP,a,e.uuid),a}}l(AP,"_type","signature"),l(AP,"_editorType",nb.SIGNATURE),l(AP,"_defaultDrawingOptions",null);var TP=new WeakMap,MP=new WeakMap,PP=new WeakMap,DP=new WeakMap,RP=new WeakMap,OP=new WeakMap,LP=new WeakMap,IP=new WeakMap,FP=new WeakMap,zP=new WeakMap,qP=new WeakMap,WP=new WeakSet;class BP extends k_{constructor(e){super(d(d({},e),{},{name:"stampEditor"})),kv(this,WP),Nv(this,TP,null),Nv(this,MP,null),Nv(this,PP,null),Nv(this,DP,null),Nv(this,RP,null),Nv(this,OP,""),Nv(this,LP,null),Nv(this,IP,!1),Nv(this,FP,null),Nv(this,zP,!1),Nv(this,qP,!1),Ev(DP,this,e.bitmapUrl),Ev(RP,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){k_.initialize(e,t)}static isHandlingMimeForPasting(e){return vx.includes(e)}static paste(e,t){t.pasteEditor({mode:nb.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:r}=e||this.copyCanvas(null,null,!0).imageData,s=await n.guess({name:"altText",request:{data:i,width:a,height:r,channels:i.length/(a*r)}});if(!s)throw new Error("No response from the AI service.");if(s.error)throw new Error("Error from the AI service.");if(s.cancel)return null;if(!s.output)throw new Error("No valid response from the AI service.");const o=s.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;Cv(MP,this)&&(Ev(TP,this,null),this._uiManager.imageManager.deleteId(Cv(MP,this)),null===(e=Cv(LP,this))||void 0===e||e.remove(),Ev(LP,this,null),Cv(FP,this)&&(clearTimeout(Cv(FP,this)),Ev(FP,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Cv(MP,this)&&null===Cv(LP,this)&&jv(WP,this,HP).call(this),this.isAttachedToDOM||this.parent.add(this))):Cv(MP,this)&&jv(WP,this,HP).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(Cv(PP,this)||Cv(TP,this)||Cv(DP,this)||Cv(RP,this)||Cv(MP,this)||Cv(IP,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),Cv(IP,this)||(Cv(TP,this)?jv(WP,this,GP).call(this):jv(WP,this,HP).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(Ev(MP,this,n),i&&Ev(TP,this,i),Ev(IP,this,!1),jv(WP,this,GP).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==Cv(FP,this)&&clearTimeout(Cv(FP,this));Ev(FP,this,setTimeout((()=>{Ev(FP,this,null),jv(WP,this,YP).call(this)}),200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:a}=Cv(TP,this),r=new gx;let s=Cv(TP,this),o=i,l=a,c=null;if(t){var d,u;if(i>t||a>t){const e=Math.min(t/i,t/a);o=Math.floor(i*e),l=Math.floor(a*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*r.sx),n=c.height=Math.ceil(l*r.sy);Cv(zP,this)||(s=jv(WP,this,QP).call(this,e,n));const h=c.getContext("2d");h.filter=this._uiManager.hcmFilter;let m="white",p="#cfcfd8";"none"!==this._uiManager.hcmFilter?p="black":null!==(d=(u=window).matchMedia)&&void 0!==d&&d.call(u,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",p="#42414d");const f=15,g=f*r.sx,v=f*r.sy,b=new OffscreenCanvas(2*g,2*v),x=b.getContext("2d");x.fillStyle=m,x.fillRect(0,0,2*g,2*v),x.fillStyle=p,x.fillRect(0,0,g,v),x.fillRect(g,v,g,v),h.fillStyle=h.createPattern(b,"repeat"),h.fillRect(0,0,e,n),h.drawImage(s,0,0,s.width,s.height,0,0,e,n)}let h=null;if(n){let t,n;if(r.symmetric&&s.width<e&&s.height<e)t=s.width,n=s.height;else if(s=Cv(TP,this),i>e||a>e){const r=Math.min(e/i,e/a);t=Math.floor(i*r),n=Math.floor(a*r),Cv(zP,this)||(s=jv(WP,this,QP).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(s,0,0,s.width,s.height,0,0,t,n),h={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:h}}static async deserialize(e,t,n){let i=null,a=!1;if(e instanceof DE){var r;const{data:{rect:s,rotation:o,id:l,structParent:c,popupRef:d},container:u,parent:{page:{pageNumber:h}},canvas:m}=e;let p,f;m?(delete e.canvas,({id:p,bitmap:f}=n.imageManager.getFromCanvas(u.id,m)),m.remove()):(a=!0,e._hasNoCanvas=!0);const g=(null===(r=await t._structTree.getAriaAttributes("".concat(Xb).concat(l)))||void 0===r?void 0:r.get("aria-label"))||"";i=e={annotationType:nb.STAMP,bitmapId:p,bitmap:f,pageIndex:h-1,rect:s.slice(0),rotation:o,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:g},isSvg:!1,structParent:c,popupRef:d}}const s=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:u,accessibilityData:h}=e;a?(n.addMissingCanvas(e.id,s),Ev(IP,s,!0)):d&&n.imageManager.isValidId(d)?(Ev(MP,s,d),l&&Ev(TP,s,l)):Ev(DP,s,c),Ev(zP,s,u);const[m,p]=s.pageDimensions;return s.width=(o[2]-o[0])/m,s.height=(o[3]-o[1])/p,s.annotationElementId=e.id||null,h&&(s.altTextData=h),s._initialData=i,Ev(qP,s,!!i),s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:nb.STAMP,bitmapId:Cv(MP,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Cv(zP,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=jv(WP,this,KP).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const e=jv(WP,this,XP).call(this,n);if(e.isSame)return null;var r;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(r=this._initialData.structParent)&&void 0!==r?r:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const s=Cv(zP,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(Cv(MP,this))){if(Cv(zP,this)){const e=t.stamps.get(Cv(MP,this));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=jv(WP,this,KP).call(this,!1))}}else t.stamps.set(Cv(MP,this),{area:s,serialized:n}),n.bitmap=jv(WP,this,KP).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}function UP(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(Ev(TP,this,e.bitmap),t||(Ev(MP,this,e.id),Ev(zP,this,e.isSvg)),e.file&&Ev(OP,this,e.file.name),jv(WP,this,GP).call(this)):this.remove()}function VP(){if(Ev(PP,this,null),this._uiManager.enableWaiting(!1),Cv(LP,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Cv(TP,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Cv(TP,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function HP(){if(Cv(MP,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Cv(MP,this)).then((e=>jv(WP,this,UP).call(this,e,!0))).finally((()=>jv(WP,this,VP).call(this)));if(Cv(DP,this)){const e=Cv(DP,this);return Ev(DP,this,null),this._uiManager.enableWaiting(!0),void Ev(PP,this,this._uiManager.imageManager.getFromUrl(e).then((e=>jv(WP,this,UP).call(this,e))).finally((()=>jv(WP,this,VP).call(this))))}if(Cv(RP,this)){const e=Cv(RP,this);return Ev(RP,this,null),this._uiManager.enableWaiting(!0),void Ev(PP,this,this._uiManager.imageManager.getFromFile(e).then((e=>jv(WP,this,UP).call(this,e))).finally((()=>jv(WP,this,VP).call(this))))}const e=document.createElement("input");e.type="file",e.accept=vx.join(",");const t=this._uiManager._signal;Ev(PP,this,new Promise((n=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),jv(WP,this,UP).call(this,t)}else this.remove();n()}),{signal:t}),e.addEventListener("cancel",(()=>{this.remove(),n()}),{signal:t})})).finally((()=>jv(WP,this,VP).call(this)))),e.click()}function GP(){var e;const{div:t}=this;let{width:n,height:i}=Cv(TP,this);const[a,r]=this.pageDimensions,s=.75;if(this.width)n=this.width*a,i=this.height*r;else if(n>s*a||i>s*r){const e=Math.min(s*a/n,s*r/i);n*=e,i*=e}const[o,l]=this.parentDimensions;this.setDims(n*o/a,i*l/r),this._uiManager.enableWaiting(!1);const c=Ev(LP,this,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/a,this.height=i/r,null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),jv(WP,this,YP).call(this),Cv(qP,this)||(this.parent.addUndoableEditor(this),Ev(qP,this,!0)),this._reportTelemetry({action:"inserted_image"}),Cv(OP,this)&&this.div.setAttribute("aria-description",Cv(OP,this))}function QP(e,t){const{width:n,height:i}=Cv(TP,this);let a=n,r=i,s=Cv(TP,this);for(;a>2*e||r>2*t;){const n=a,i=r;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(a,r);o.getContext("2d").drawImage(s,0,0,n,i,0,0,a,r),s=o.transferToImageBitmap()}return s}function YP(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,a=new gx,r=Math.ceil(n*e*a.sx),s=Math.ceil(i*t*a.sy),o=Cv(LP,this);if(!o||o.width===r&&o.height===s)return;o.width=r,o.height=s;const l=Cv(zP,this)?Cv(TP,this):jv(WP,this,QP).call(this,r,s),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,r,s)}function KP(e){if(e){if(Cv(zP,this)){const e=this._uiManager.imageManager.getSvgUrl(Cv(MP,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=Cv(TP,this));return e.getContext("2d").drawImage(Cv(TP,this),0,0),e.toDataURL()}if(Cv(zP,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*ex.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*ex.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,i);return a.getContext("2d").drawImage(Cv(TP,this),0,0,Cv(TP,this).width,Cv(TP,this).height,0,0,n,i),a.transferToImageBitmap()}return structuredClone(Cv(TP,this))}function XP(e){var t;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=e.pageIndex===n,r=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&r,isSameAltText:r}}l(BP,"_type","stamp"),l(BP,"_editorType",nb.STAMP);var JP=new WeakMap,$P=new WeakMap,ZP=new WeakMap,eD=new WeakMap,tD=new WeakMap,nD=new WeakMap,iD=new WeakMap,aD=new WeakMap,rD=new WeakMap,sD=new WeakMap,oD=new WeakMap,lD=new WeakMap,cD=new WeakMap,dD=new WeakMap,uD=new WeakSet;class hD{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:a,accessibilityManager:r,annotationLayer:s,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;kv(this,uD),Nv(this,JP,void 0),Nv(this,$P,!1),Nv(this,ZP,null),Nv(this,eD,null),Nv(this,tD,null),Nv(this,nD,new Map),Nv(this,iD,!1),Nv(this,aD,!1),Nv(this,rD,!1),Nv(this,sD,null),Nv(this,oD,null),Nv(this,lD,null),Nv(this,cD,null),Nv(this,dD,void 0);const u=[...bD._.values()];if(!hD._initialized){hD._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),Ev(dD,this,t),this.pageIndex=n,this.div=i,Ev(JP,this,r),Ev(ZP,this,s),this.viewport=c,Ev(lD,this,l),this.drawLayer=o,this._structTree=a,Cv(dD,this).addLayer(this)}get isEmpty(){return 0===Cv(nD,this).size}get isInvisible(){return this.isEmpty&&Cv(dD,this).getMode()===nb.NONE}updateToolbar(e){Cv(dD,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cv(dD,this).getMode();switch(jv(uD,this,vD).call(this),e){case nb.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case nb.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case nb.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of bD._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=Cv(lD,this))||void 0===t?void 0:t.div)}setEditingState(e){Cv(dD,this).setEditingState(e)}addCommands(e){Cv(dD,this).addCommands(e)}cleanUndoStack(e){Cv(dD,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=Cv(ZP,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){Ev(rD,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of Cv(nD,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(Cv(dD,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!Cv(ZP,this))return void Ev(rD,this,!1);const t=Cv(ZP,this).getEditableAnnotations();for(const n of t){if(n.hide(),Cv(dD,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}Ev(rD,this,!1)}disable(){Ev(aD,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of Cv(nD,this).values()){var n;a.disableEditing(),a.annotationElementId&&(null===a.serialize()?(t.set(a.annotationElementId,a),null===(n=this.getEditableAnnotation(a.annotationElementId))||void 0===n||n.show(),a.remove()):e.set(a.annotationElementId,a))}if(Cv(ZP,this)){const n=Cv(ZP,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(Cv(dD,this).isDeletedAnnotationElement(n))continue;let a=t.get(n);a?(a.resetAnnotationElement(i),a.show(!1),i.show()):(a=e.get(n),a&&(Cv(dD,this).addChangedExistingAnnotation(a),a.renderAnnotationElement(i)&&a.show(!1)),i.show())}}jv(uD,this,vD).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of bD._.values())i.remove("".concat(a._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Ev(aD,this,!1)}getEditableAnnotation(e){var t;return(null===(t=Cv(ZP,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){Cv(dD,this).getActive()!==e&&Cv(dD,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=Cv(lD,this))&&void 0!==e&&e.div&&!Cv(cD,this)){Ev(cD,this,new AbortController);const e=Cv(dD,this).combinedSignal(Cv(cD,this));Cv(lD,this).div.addEventListener("pointerdown",jv(uD,this,mD).bind(this),{signal:e}),Cv(lD,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=Cv(lD,this))&&void 0!==e&&e.div&&Cv(cD,this)&&(Cv(cD,this).abort(),Ev(cD,this,null),Cv(lD,this).div.classList.remove("highlighting"))}enableClick(){if(Cv(eD,this))return;Ev(eD,this,new AbortController);const e=Cv(dD,this).combinedSignal(Cv(eD,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=Cv(eD,this))||void 0===e||e.abort(),Ev(eD,this,null)}attach(e){Cv(nD,this).set(e.id,e);const{annotationElementId:t}=e;t&&Cv(dD,this).isDeletedAnnotationElement(t)&&Cv(dD,this).removeDeletedAnnotationElement(e)}detach(e){var t;Cv(nD,this).delete(e.id),null===(t=Cv(JP,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!Cv(aD,this)&&e.annotationElementId&&Cv(dD,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),Cv(dD,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(Cv(dD,this).addDeletedAnnotationElement(e.annotationElementId),k_.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),Cv(dD,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!Cv(rD,this)),Cv(dD,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!Cv(tD,this)&&(e._focusEventsAllowed=!1,Ev(tD,this,setTimeout((()=>{Ev(tD,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:Cv(dD,this)._signal}),n.focus())}),0))),e._structTreeParentId=null===(t=Cv(JP,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return Cv(dD,this).getId()}combinedSignal(e){return Cv(dD,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=Sv(uD,this,pD))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await Cv(dD,this).updateMode(e.mode);const{offsetX:n,offsetY:i}=jv(uD,this,gD).call(this),a=this.getNextId(),r=jv(uD,this,fD).call(this,d({parent:this,id:a,x:n,y:i,uiManager:Cv(dD,this),isCentered:!0},t));r&&this.add(r)}async deserialize(e){var t,n;return await(null===(t=bD._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,Cv(dD,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),a=jv(uD,this,fD).call(this,d({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:Cv(dD,this),isCentered:t},n));return a&&this.add(a),a}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(jv(uD,this,gD).call(this),!0,e)}setSelected(e){Cv(dD,this).setSelected(e)}toggleSelected(e){Cv(dD,this).toggleSelected(e)}unselect(e){Cv(dD,this).unselect(e)}pointerup(e){var t;const{isMac:n}=Bb.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!Cv(iD,this))return;if(Ev(iD,this,!1),null!==(t=Sv(uD,this,pD))&&void 0!==t&&t.isDrawer&&Sv(uD,this,pD).supportMultipleDrawings)return;if(!Cv($P,this))return void Ev($P,this,!0);const i=Cv(dD,this).getMode();i!==nb.STAMP&&i!==nb.SIGNATURE?this.createAndAddNewEditor(e,!1):Cv(dD,this).unselectAll()}pointerdown(e){var t;if(Cv(dD,this).getMode()===nb.HIGHLIGHT&&this.enableTextSelection(),Cv(iD,this))return void Ev(iD,this,!1);const{isMac:n}=Bb.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(Ev(iD,this,!0),null!==(t=Sv(uD,this,pD))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const i=Cv(dD,this).getActive();Ev($P,this,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),Cv(sD,this))return void Sv(uD,this,pD).startDrawing(this,Cv(dD,this),!1,e);Cv(dD,this).setCurrentDrawingSession(this),Ev(sD,this,new AbortController);const t=Cv(dD,this).combinedSignal(Cv(sD,this));this.div.addEventListener("blur",(e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(Ev(oD,this,null),this.commitOrRemove())}),{signal:t}),Sv(uD,this,pD).startDrawing(this,Cv(dD,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;this.div.contains(e)&&Ev(oD,this,e)}else Cv(oD,this)&&setTimeout((()=>{var e;null===(e=Cv(oD,this))||void 0===e||e.focus(),Ev(oD,this,null)}),0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Cv(sD,this)?(Cv(dD,this).setCurrentDrawingSession(null),Cv(sD,this).abort(),Ev(sD,this,null),Ev(oD,this,null),Sv(uD,this,pD).endDrawing(e)):null}findNewParent(e,t,n){const i=Cv(dD,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!Cv(sD,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){Cv(sD,this)&&Sv(uD,this,pD).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=Cv(dD,this).getActive())||void 0===e?void 0:e.parent)===this&&(Cv(dD,this).commitOrRemove(),Cv(dD,this).setActiveEditor(null)),Cv(tD,this)&&(clearTimeout(Cv(tD,this)),Ev(tD,this,null));for(const n of Cv(nD,this).values()){var t;null===(t=Cv(JP,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,Cv(nD,this).clear(),Cv(dD,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,fx(this.div,t);for(const n of Cv(dD,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;Cv(dD,this).commitOrRemove(),jv(uD,this,vD).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,fx(this.div,{rotation:i}),n!==i)for(const a of Cv(nD,this).values())a.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return Cv(dD,this).viewParameters.realScale}}function mD(e){Cv(dD,this).unselectAll();const{target:t}=e;if(t===Cv(lD,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&Cv(lD,this).div.contains(t)){const{isMac:t}=Bb.platform;if(0!==e.button||e.ctrlKey&&t)return;Cv(dD,this).showAllEditors("highlight",!0,!0),Cv(lD,this).div.classList.add("free"),this.toggleDrawing(),HT.startHighlighting(this,"ltr"===Cv(dD,this).direction,{target:Cv(lD,this).div,x:e.x,y:e.y}),Cv(lD,this).div.addEventListener("pointerup",(()=>{Cv(lD,this).div.classList.remove("free"),this.toggleDrawing(!0)}),{once:!0,signal:Cv(dD,this)._signal}),e.preventDefault()}}function pD(e){return bD._.get(Cv(dD,e).getMode())}function fD(e){const t=Sv(uD,this,pD);return t?new t.prototype.constructor(e):null}function gD(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),r=Math.max(0,t),s=(a+Math.min(window.innerWidth,e+n))/2-e,o=(r+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[s,o]:[o,s];return{offsetX:l,offsetY:c}}function vD(){for(const e of Cv(nD,this).values())e.isEmpty()&&e.remove()}l(hD,"_initialized",!1);var bD={_:new Map([ZE,sP,BP,HT,AP].map((e=>[e._editorType,e])))},xD=new WeakMap,yD=new WeakMap,wD=new WeakMap,_D=new WeakSet;class kD{constructor(e){let{pageIndex:t}=e;kv(this,_D),Nv(this,xD,null),Nv(this,yD,new Map),Nv(this,wD,new Map),this.pageIndex=t}setParent(e){if(Cv(xD,this)){if(Cv(xD,this)!==e){if(Cv(yD,this).size>0)for(const t of Cv(yD,this).values())t.remove(),e.append(t);Ev(xD,this,e)}}else Ev(xD,this,e)}static get _svgFactory(){return Pb(this,"_svgFactory",new hC)}draw(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(ED._=(t=ED._,n=t++,t),n),s=jv(_D,this,jD).call(this),o=kD._svgFactory.createElement("defs");s.append(o);const l=kD._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(r);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&Cv(wD,this).set(r,l);const d=a?jv(_D,this,SD).call(this,o,c):null,u=kD._svgFactory.createElement("use");return s.append(u),u.setAttribute("href","#".concat(c)),this.updateProperties(s,e),Cv(yD,this).set(r,s),{id:r,clipPathId:"url(#".concat(d,")")}}drawOutline(e,t){var n,i;const a=(ED._=(n=ED._,i=n++,n),i),r=jv(_D,this,jD).call(this),s=kD._svgFactory.createElement("defs");r.append(s);const o=kD._svgFactory.createElement("path");s.append(o);const l="path_p".concat(this.pageIndex,"_").concat(a);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=kD._svgFactory.createElement("mask");s.append(e),c="mask_p".concat(this.pageIndex,"_").concat(a),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=kD._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=kD._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const d=kD._svgFactory.createElement("use");r.append(d),d.setAttribute("href","#".concat(l)),c&&d.setAttribute("mask","url(#".concat(c,")"));const u=d.cloneNode();return r.append(u),d.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(r,e),Cv(yD,this).set(a,r),a}finalizeDraw(e,t){Cv(wD,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:a,path:r}=t,s="number"===typeof e?Cv(yD,this).get(e):e;if(s){if(n&&jv(_D,this,CD).call(this,s,n),i&&ND.call(kD,s,i),a){const{classList:e}=s;for(const[t,n]of Object.entries(a))e.toggle(t,n)}if(r){const e=s.firstChild.firstChild;jv(_D,this,CD).call(this,e,r)}}}updateParent(e,t){if(t===this)return;const n=Cv(yD,this).get(e);n&&(Cv(xD,t).append(n),Cv(yD,this).delete(e),Cv(yD,t).set(e,n))}remove(e){Cv(wD,this).delete(e),null!==Cv(xD,this)&&(Cv(yD,this).get(e).remove(),Cv(yD,this).delete(e))}destroy(){Ev(xD,this,null);for(const e of Cv(yD,this).values())e.remove();Cv(yD,this).clear(),Cv(wD,this).clear()}}function ND(e,t){let[n,i,a,r]=t;const{style:s}=e;s.top="".concat(100*i,"%"),s.left="".concat(100*n,"%"),s.width="".concat(100*a,"%"),s.height="".concat(100*r,"%")}function jD(){const e=Uv._svgFactory.create(1,1,!0);return Cv(xD,this).append(e),e.setAttribute("aria-hidden",!0),e}function SD(e,t){const n=Uv._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Uv._svgFactory.createElement("use");return n.append(a),a.setAttribute("href","#".concat(t)),a.classList.add("clip"),i}function CD(e,t){for(const[n,i]of Object.entries(t))null===i?e.removeAttribute(n):e.setAttribute(n,i)}Uv=kD;var ED={_:0};if(globalThis._pdfjsTestingUtils={HighlightOutliner:KA},globalThis.pdfjsLib={AbortException:zb,AnnotationEditorLayer:hD,AnnotationEditorParamsType:ib,AnnotationEditorType:nb,AnnotationEditorUIManager:Xy,AnnotationLayer:UE,AnnotationMode:tb,AnnotationType:ub,build:"47ad820d9",ColorPicker:bT,createValidAbsoluteUrl:Tb,DOMSVGFactory:hC,DrawLayer:kD,FeatureTest:Bb,fetchData:tx,getDocument:yS,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(ax(e))return Cb('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch(r){}return a||t},getUuid:Kb,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:i=0}=t;const{width:a,height:r}=e.attributes.style,s=[0,0,parseInt(a),parseInt(r)];return new nx({viewBox:s,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:KN,ImageKind:db,InvalidPDFException:Lb,isDataScheme:ax,isPdfFile:rx,isValidExplicitDest:lk,MathClamp:Jb,noContextMenu:lx,normalizeUnicode:function(e){return Qb||(Qb=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Yb=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Qb,((e,t,n)=>t?t.normalize("NFKC"):Yb.get(n)))},OPS:bb,OutputScale:gx,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:ES,PDFDateString:dx,PDFWorker:zS,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:ex,RenderingCancelledException:ix,ResponseException:Ib,setLayerDimensions:fx,shadow:Pb,SignatureExtractor:cP,stopEvent:cx,SupportedImageMimeTypes:vx,TextLayer:sS,TouchManager:Yw,updateUrlHash:Mb,Util:Vb,VerbosityLevel:vb,version:oC,XfaLayer:mC},"undefined"!==typeof window){const e="".concat(window.location.origin,"/pdf.worker.min.js"),t="https://unpkg.com/pdfjs-dist@".concat(oC,"/build/pdf.worker.min.mjs");KN.workerSrc=e,fetch(e).then((e=>{if(e.ok)return e.text();throw new Error("Worker not accessible: ".concat(e.status))})).then((e=>{(e.includes("<!DOCTYPE")||e.includes("<html"))&&(KN.workerSrc=t)})).catch((e=>{KN.workerSrc=t}))}const AD=e=>{let{zoom:t,onZoomChange:n,showGrid:a,onToggleGrid:r,snapToGrid:s,onToggleSnap:o,onSave:l,onPreview:c,onClose:u,isSaving:h=!1,isPreviewing:m=!1}=e;const{template:p,isDirty:f,canUndo:g,canRedo:v,undo:b,redo:x,setBackgroundImage:y,importTemplate:w,saveTemplate:_}=Lg(),[k,N]=(0,i.useState)(!1),[j,S]=(0,i.useState)(!1),C=(0,i.useRef)(null),E=async e=>{const t=new FileReader;return new Promise(((n,i)=>{t.onload=async e=>{try{const i=new Uint8Array(e.target.result);try{await fetch(KN.workerSrc)}catch(t){}let a;try{a=yS({data:i,verbosity:1,disableAutoFetch:!0,disableStream:!0})}catch(t){const e=KN.workerSrc;KN.workerSrc=null,a=yS({data:i,verbosity:1,disableAutoFetch:!0,disableStream:!0,disableWorker:!0}),KN.workerSrc=e}const r=await a.promise,s=await r.getPage(1),o=s.getViewport({scale:2}),l=document.createElement("canvas"),c=l.getContext("2d");l.height=o.height,l.width=o.width,await s.render({canvasContext:c,viewport:o}).promise;const d=l.toDataURL("image/png",.9);y(d),n()}catch(a){i(a)}},t.onerror=e=>{i(e)},t.readAsArrayBuffer(e)})).catch((e=>{throw e}))},A=async e=>{const t=new FileReader;return new Promise(((n,i)=>{t.onload=e=>{y(e.target.result),n()},t.onerror=i,t.readAsDataURL(e)}))};return(0,$o.jsxs)("div",{className:"template-header",children:[(0,$o.jsx)("div",{className:"header-left",children:(0,$o.jsxs)("div",{className:"template-info",children:[(0,$o.jsx)(yv,{onSave:l,autoSave:!0}),(0,$o.jsxs)("span",{className:"template-meta",children:[p.fields.length," fields \u2022 Last saved: ",new Date(p.metadata.updatedAt).toLocaleTimeString()]})]})}),(0,$o.jsxs)("div",{className:"header-center",children:[(0,$o.jsxs)("div",{className:"control-group",children:[(0,$o.jsx)("button",{className:"header-btn",onClick:()=>{n(Math.max(t-.1,.5))},disabled:t<=.5,title:"Zoom Out",children:(0,$o.jsx)(hv,{size:16})}),(0,$o.jsxs)("button",{className:"zoom-display",onClick:()=>{n(1)},title:"Reset Zoom",children:[Math.round(100*t),"%"]}),(0,$o.jsx)("button",{className:"header-btn",onClick:()=>{n(Math.min(t+.1,2))},disabled:t>=2,title:"Zoom In",children:(0,$o.jsx)(mv,{size:16})})]}),(0,$o.jsxs)("div",{className:"control-group",children:[(0,$o.jsx)("button",{className:"header-btn ".concat(a?"active":""),onClick:r,title:"Toggle Grid",children:(0,$o.jsx)(pv,{size:16})}),(0,$o.jsx)("button",{className:"header-btn ".concat(s?"active":""),onClick:o,title:"Snap to Grid",children:(0,$o.jsx)(fv,{size:16})})]}),(0,$o.jsxs)("div",{className:"control-group",children:[(0,$o.jsx)("button",{className:"header-btn",onClick:b,disabled:!g,title:"Undo",children:(0,$o.jsx)(gv,{size:16})}),(0,$o.jsx)("button",{className:"header-btn",onClick:x,disabled:!v,title:"Redo",children:(0,$o.jsx)(vv,{size:16})})]}),(0,$o.jsxs)("div",{className:"control-group",children:[(0,$o.jsxs)("label",{className:"header-btn file-upload ".concat(j?"loading":""),title:"Import PDF/Image as Background",children:[j?(0,$o.jsx)("div",{className:"spinner"}):(0,$o.jsx)(bv,{size:16}),(0,$o.jsx)("input",{ref:C,type:"file",accept:".pdf,image/*",onChange:async e=>{const t=e.target.files[0];if(t){S(!0);try{"application/pdf"===t.type?await E(t):t.type.startsWith("image/")?await A(t):alert("Please select a PDF or image file")}catch(n){alert("Failed to import file. Please try again.")}finally{S(!1),C.current&&(C.current.value="")}}},style:{display:"none"},disabled:j})]}),(0,$o.jsx)("button",{className:"header-btn",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{try{const t=JSON.parse(e.target.result);if(!t.name||!Array.isArray(t.fields))throw new Error("Invalid template format");window.confirm('Import template "'.concat(t.name,'"? This will replace the current template.'))&&(w(t),alert('Template "'.concat(t.name,'" imported successfully!')))}catch(t){alert("Failed to import template. Please check the file format.")}},n.readAsText(t)},e.click()},title:"Import Template JSON",children:(0,$o.jsx)(rd,{size:16})}),(0,$o.jsx)("button",{className:"header-btn",onClick:()=>{try{var e;const t={name:p.name,description:p.description,pageSize:p.pageSize,orientation:p.orientation,fields:p.fields,metadata:d(d({},p.metadata),{},{exportedAt:(new Date).toISOString(),version:(null===(e=p.metadata)||void 0===e?void 0:e.version)||1})},n=JSON.stringify(t,null,2),i=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(i),r=document.createElement("a");r.href=a,r.download="".concat(p.name.replace(/[^a-zA-Z0-9]/g,"_"),"_template.json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((()=>URL.revokeObjectURL(a)),1e3)}catch(t){alert("Failed to export template")}},title:"Export Template as JSON",children:(0,$o.jsx)(Id,{size:16})})]})]}),(0,$o.jsx)("div",{className:"header-right",children:(0,$o.jsxs)("div",{className:"control-group",children:[(0,$o.jsx)("button",{className:"header-btn",onClick:()=>N(!k),title:"Settings",children:(0,$o.jsx)(od,{size:16})}),(0,$o.jsxs)("button",{className:"header-btn preview-btn",onClick:()=>{c&&c(p)},title:"Preview PDF",children:[(0,$o.jsx)(pd,{size:16}),"Preview"]}),(0,$o.jsxs)("button",{className:"header-btn save-btn ".concat(h?"loading":""),onClick:()=>{_(l)},disabled:!f||h,title:"Save Template",children:[h?(0,$o.jsx)("div",{className:"spinner"}):(0,$o.jsx)(Dd,{size:16}),h?"Saving...":"Save"]}),(0,$o.jsx)("button",{className:"header-btn close-btn",onClick:u,title:"Close Editor",children:(0,$o.jsx)(fd,{size:16})})]})}),k&&(0,$o.jsxs)("div",{className:"settings-dropdown",children:[(0,$o.jsxs)("div",{className:"settings-section",children:[(0,$o.jsx)("h4",{children:"Page Settings"}),(0,$o.jsxs)("div",{className:"setting-item",children:[(0,$o.jsx)("label",{children:"Page Size:"}),(0,$o.jsxs)("select",{defaultValue:"A4",children:[(0,$o.jsx)("option",{value:"A4",children:"A4 (210 \xd7 297 mm)"}),(0,$o.jsx)("option",{value:"Letter",children:"Letter (8.5 \xd7 11 in)"}),(0,$o.jsx)("option",{value:"Legal",children:"Legal (8.5 \xd7 14 in)"}),(0,$o.jsx)("option",{value:"A3",children:"A3 (297 \xd7 420 mm)"})]})]}),(0,$o.jsxs)("div",{className:"setting-item",children:[(0,$o.jsx)("label",{children:"Orientation:"}),(0,$o.jsxs)("select",{defaultValue:"portrait",children:[(0,$o.jsx)("option",{value:"portrait",children:"Portrait"}),(0,$o.jsx)("option",{value:"landscape",children:"Landscape"})]})]})]}),(0,$o.jsxs)("div",{className:"settings-section",children:[(0,$o.jsx)("h4",{children:"Grid Settings"}),(0,$o.jsxs)("div",{className:"setting-item",children:[(0,$o.jsx)("label",{children:"Grid Size:"}),(0,$o.jsx)("input",{type:"number",defaultValue:"10",min:"5",max:"50"}),(0,$o.jsx)("span",{children:"px"})]})]})]})]})},TD=e=>{let{templateId:t=null,initialTemplate:n=null,onSave:a,onPreview:r,onClose:s,dataSource:o=null,isSaving:l=!1,isPreviewing:c=!1}=e;const[d,u]=(0,i.useState)(null),[h,m]=(0,i.useState)({width:595,height:842}),[p,f]=(0,i.useState)(1),[g,v]=(0,i.useState)(!0),[b,x]=(0,i.useState)(!0),y=(0,i.useRef)(null),w=(0,i.useCallback)((e=>{u(e)}),[]),_=(0,i.useCallback)((e=>{e.target===e.currentTarget&&u(null)}),[]),k=e=>{let{initialTemplate:t}=e;const{loadTemplate:n,template:a}=Lg();return(0,i.useEffect)((()=>{!t||a.id&&a.id===t.id||n(t)}),[null===t||void 0===t?void 0:t.id,n]),null},N=e=>{let{selectedField:t,onFieldSelect:n}=e;const{deleteField:a,duplicateField:r}=Lg();return(0,i.useEffect)((()=>{const e=e=>{"Delete"===e.key&&t&&(e.preventDefault(),window.confirm("Delete selected field?")&&(a(t.id),n(null))),(e.ctrlKey||e.metaKey)&&"d"===e.key&&t&&(e.preventDefault(),r(t.id)),"Escape"===e.key&&n(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[t,a,r,n]),null};return(0,$o.jsx)(Af,{backend:Jf,children:(0,$o.jsxs)(Og,{children:[(0,$o.jsx)(k,{initialTemplate:n}),(0,$o.jsx)(N,{selectedField:d,onFieldSelect:u}),(0,$o.jsxs)("div",{className:"pdf-template-editor",children:[(0,$o.jsx)(AD,{zoom:p,onZoomChange:f,showGrid:g,onToggleGrid:()=>v(!g),snapToGrid:b,onToggleSnap:()=>x(!b),onSave:a,onPreview:r,onClose:s,isSaving:l,isPreviewing:c}),(0,$o.jsxs)("div",{className:"editor-layout",children:[(0,$o.jsx)("div",{className:"editor-sidebar left",children:(0,$o.jsx)(cv,{dataSource:o})}),(0,$o.jsx)("div",{className:"editor-main",children:(0,$o.jsx)("div",{className:"canvas-container",children:(0,$o.jsx)(Kg,{ref:y,width:h.width,height:h.height,zoom:p,showGrid:g,snapToGrid:b,selectedField:d,onFieldSelect:w,onClick:_})})}),(0,$o.jsx)("div",{className:"editor-sidebar right",children:(0,$o.jsx)(uv,{selectedField:d,onFieldUpdate:u})})]})]})]})})},MD=Gc("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),PD=e=>{let{pageName:t="editor",requiresDesktop:n=!0,minWidth:a=768,showOnce:r=!0}=e;const[s,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),{t:d}=bs("common");(0,i.useEffect)((()=>{const e=()=>{const e=window.innerWidth<a;c(e);const n="mobile-warning-dismissed-".concat(t),i=r&&localStorage.getItem(n);o(e&&!i)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[a,t,r]);const u=()=>{o(!1),r&&localStorage.setItem("mobile-warning-dismissed-".concat(t),"true")};return s&&l?(0,$o.jsx)($o.Fragment,{children:(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[(0,$o.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-6 py-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center text-white",children:[(0,$o.jsx)(Pd,{className:"h-6 w-6 mr-3"}),(0,$o.jsx)("h3",{className:"text-lg font-bold",children:d("mobile_warning.title",{default:"Mobile Device Detected"})})]}),(0,$o.jsx)("button",{onClick:u,className:"text-white hover:text-gray-200 transition-colors",children:(0,$o.jsx)(fd,{className:"h-5 w-5"})})]})}),(0,$o.jsxs)("div",{className:"p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,$o.jsxs)("div",{className:"text-gray-400",children:[(0,$o.jsx)(MD,{className:"h-12 w-12"}),(0,$o.jsx)("p",{className:"text-xs text-center mt-2",children:"Mobile"})]}),(0,$o.jsx)("div",{className:"text-red-500",children:(0,$o.jsx)(fd,{className:"h-8 w-8 mx-auto"})}),(0,$o.jsxs)("div",{className:"text-green-500",children:[(0,$o.jsx)(Ed,{className:"h-12 w-12"}),(0,$o.jsx)("p",{className:"text-xs text-center mt-2",children:"Desktop"})]})]}),(0,$o.jsxs)("div",{className:"text-center mb-6",children:[(0,$o.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:d("mobile_warning.subtitle",{default:"This page works best on desktop",pageName:t})}),(0,$o.jsx)("p",{className:"text-gray-600 leading-relaxed",children:n?d("mobile_warning.desktop_required",{default:"This editor requires a desktop computer with a larger screen for the best experience. Some features may not work properly on mobile devices.",pageName:t}):d("mobile_warning.desktop_recommended",{default:"While this page works on mobile, we recommend using a desktop computer for the best experience.",pageName:t})})]}),(0,$o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,$o.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:d("mobile_warning.limitations_title",{default:"Mobile Limitations:"})}),(0,$o.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,$o.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_1",{default:"Limited drag & drop functionality"})]}),(0,$o.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_2",{default:"Smaller workspace area"})]}),(0,$o.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_3",{default:"Touch navigation challenges"})]}),n&&(0,$o.jsxs)("li",{children:["\u2022 ",d("mobile_warning.limitation_4",{default:"Some features may not work"})]})]})]}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[!n&&(0,$o.jsx)("button",{onClick:()=>{o(!1)},className:"flex-1 bg-amber-500 text-white px-4 py-3 rounded-lg font-medium hover:bg-amber-600 transition-colors",children:d("mobile_warning.proceed",{default:"Continue Anyway"})}),(0,$o.jsx)("button",{onClick:u,className:"flex-1 bg-gray-500 text-white px-4 py-3 rounded-lg font-medium hover:bg-gray-600 transition-colors",children:d("mobile_warning.dismiss",{default:"I Understand"})})]}),(0,$o.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:d("mobile_warning.help_text",{default:"For the best experience, please use a computer with a screen width of at least 768px."})})]})]})})}):null},DD={name:"Onboarding Flow",fields:[{name:"firstName",label:"First Name",type:"text",placeholder:"Enter first name"},{name:"lastName",label:"Last Name",type:"text",placeholder:"Enter last name"},{name:"email",label:"Email Address",type:"text",placeholder:"Enter email"},{name:"position",label:"Position",type:"text",placeholder:"Job position"},{name:"vesselAssignment",label:"Vessel Assignment",type:"text",placeholder:"Vessel name"},{name:"startDate",label:"Start Date",type:"date"},{name:"completionDate",label:"Completion Date",type:"date"},{name:"certificateNumber",label:"Certificate Number",type:"text"},{name:"trainingScore",label:"Training Score",type:"number"},{name:"managerSignature",label:"Manager Signature",type:"signature"},{name:"crewSignature",label:"Crew Signature",type:"signature"},{name:"companyLogo",label:"Company Logo",type:"image"},{name:"qrCode",label:"Verification QR Code",type:"qr_code"}]},RD=()=>{const{t:e}=bs(["common"]),t=pe(),{templateId:n}=ge(),a=(0,Et.useQueryClient)(),[r,s]=(0,i.useState)(!n),{data:o,isLoading:l}=(0,Et.useQuery)(["template",n],(async()=>await Eo(n)),{enabled:!!n,onError:n=>{Vn.error(e("common:pdf_template.failed_load")),t("/templates")}}),c=(0,Et.useMutation)((e=>r?Ao(e):To(n,e)),{onSuccess:n=>{Vn.success(e(r?"common:pdf_template.created":"common:pdf_template.saved")),a.invalidateQueries("templates"),r&&(s(!1),t("/templates/edit/".concat(n.id),{replace:!0}))},onError:t=>{Vn.error(e("common:pdf_template.failed_save"))}}),u=(0,Et.useMutation)((e=>Do(e)),{onSuccess:e=>{const t=URL.createObjectURL(e);window.open(t,"_blank"),setTimeout((()=>URL.revokeObjectURL(t)),1e3)},onError:t=>{Vn.error(e("common:pdf_template.failed_preview"))}});return l?(0,$o.jsx)(Zc,{}):(0,$o.jsxs)("div",{className:"pdf-template-editor-page",children:[(0,$o.jsx)(PD,{pageName:"pdf-template-editor",requiresDesktop:!0,minWidth:1200}),(0,$o.jsx)(TD,{templateId:n,initialTemplate:o,dataSource:DD,onSave:e=>{c.mutate(e)},onPreview:e=>{const t=d(d({},e),{},{sampleData:{firstName:"John",lastName:"Doe",email:"john.doe@example.com",position:"Deck Officer",vesselAssignment:"MV Ocean Explorer",startDate:"2024-01-15",completionDate:(new Date).toISOString().split("T")[0],certificateNumber:"CERT-2024-001",trainingScore:95,companyLogo:"/logo.png"}});u.mutate(t)},onClose:()=>{window.confirm(e("common:pdf_template.close_confirm"))&&t("/templates")},isSaving:c.isLoading,isPreviewing:u.isLoading})]})};var OD=i.createContext(void 0),LD=e=>{const t=i.useContext(OD);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t};var ID=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FD="undefined"===typeof window||"Deno"in globalThis;function zD(){}function qD(e){return"number"===typeof e&&e>=0&&e!==1/0}function WD(e,t){return Math.max(e+(t||0)-Date.now(),0)}function BD(e,t){return"function"===typeof e?e(t):e}function UD(e,t){return"function"===typeof e?e(t):e}function VD(e){return JSON.stringify(e,((e,t)=>YD(t)?Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}):t))}function HD(e,t){if(e===t)return e;const n=QD(e)&&QD(t);if(n||YD(e)&&YD(t)){const i=n?e:Object.keys(e),a=i.length,r=n?t:Object.keys(t),s=r.length,o=n?[]:{},l=new Set(i);let c=0;for(let d=0;d<s;d++){const i=n?d:r[d];(!n&&l.has(i)||n)&&void 0===e[i]&&void 0===t[i]?(o[i]=void 0,c++):(o[i]=HD(e[i],t[i]),o[i]===e[i]&&void 0!==e[i]&&c++)}return a===s&&c===a?e:o}return t}function GD(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function QD(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function YD(e){if(!KD(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!KD(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function KD(e){return"[object Object]"===Object.prototype.toString.call(e)}function XD(e,t,n){return"function"===typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?HD(e,t):t}var JD,$D,ZD,eR=Symbol();function tR(e,t){return"function"===typeof e?e(...t):!!e}var nR=new(JD=new WeakMap,$D=new WeakMap,ZD=new WeakMap,class extends ID{constructor(){super(),Nv(this,JD,void 0),Nv(this,$D,void 0),Nv(this,ZD,void 0),Ev(ZD,this,(e=>{if(!FD&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}))}onSubscribe(){Cv($D,this)||this.setEventListener(Cv(ZD,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Cv($D,this))||void 0===e||e.call(this),Ev($D,this,void 0))}setEventListener(e){var t;Ev(ZD,this,e),null===(t=Cv($D,this))||void 0===t||t.call(this),Ev($D,this,e((e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()})))}setFocused(e){Cv(JD,this)!==e&&(Ev(JD,this,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){var e;return"boolean"===typeof Cv(JD,this)?Cv(JD,this):"hidden"!==(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)}}),iR=e=>setTimeout(e,0);var aR,rR,sR,oR=function(){let e=[],t=0,n=e=>{e()},i=e=>{e()},a=iR;const r=i=>{t?e.push(i):a((()=>{n(i)}))};return{batch:r=>{let s;t++;try{s=r()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a((()=>{i((()=>{t.forEach((e=>{n(e)}))}))}))})()}return s},batchCalls:e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r((()=>{e(...n)}))},schedule:r,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{i=e},setScheduler:e=>{a=e}}}(),lR=new(aR=new WeakMap,rR=new WeakMap,sR=new WeakMap,class extends ID{constructor(){super(),Nv(this,aR,!0),Nv(this,rR,void 0),Nv(this,sR,void 0),Ev(sR,this,(e=>{if(!FD&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}))}onSubscribe(){Cv(rR,this)||this.setEventListener(Cv(sR,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Cv(rR,this))||void 0===e||e.call(this),Ev(rR,this,void 0))}setEventListener(e){var t;Ev(sR,this,e),null===(t=Cv(rR,this))||void 0===t||t.call(this),Ev(rR,this,e(this.setOnline.bind(this)))}setOnline(e){Cv(aR,this)!==e&&(Ev(aR,this,e),this.listeners.forEach((t=>{t(e)})))}isOnline(){return Cv(aR,this)}});function cR(){let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));function i(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch((()=>{})),n.resolve=t=>{i({status:"fulfilled",value:t}),e(t)},n.reject=e=>{i({status:"rejected",reason:e}),t(e)},n}function dR(e){return Math.min(1e3*2**e,3e4)}function uR(e){return"online"!==(null!==e&&void 0!==e?e:"online")||lR.isOnline()}var hR,mR=class extends Error{constructor(e){super("CancelledError"),this.revert=null===e||void 0===e?void 0:e.revert,this.silent=null===e||void 0===e?void 0:e.silent}};function pR(e){return e instanceof mR}function fR(e){let t,n=!1,i=0,a=!1;const r=cR(),s=()=>nR.isFocused()&&("always"===e.networkMode||lR.isOnline())&&e.canRun(),o=()=>uR(e.networkMode)&&e.canRun(),l=n=>{var i,s;a||(null===e.onSuccess||void 0===i||i.call(e,n),null===t||void 0===s||s(),r.resolve(n))},c=n=>{var i,s;a||(null===e.onError||void 0===i||i.call(e,n),null===t||void 0===s||s(),r.reject(n))},d=()=>new Promise((t=>{var n;null===e.onPause||void 0===n||n.call(e)})).then((()=>{var t;a||(null===e.onContinue||void 0===t||t.call(e))})),u=()=>{if(a)return;let t;const r=0===i?e.initialPromise:void 0;try{null!==r&&void 0!==r?r:e.fn()}catch(o){Promise.reject(o)}Promise.resolve(t).then(l).catch((t=>{var r,o,l;if(a)return;const h=null!==e.retry&&void 0!==r?r:FD?0:3,m=null!==e.retryDelay&&void 0!==o?o:dR,p="function"===typeof m?m(i,t):m,f=!0===h||"number"===typeof h&&i<h||"function"===typeof h&&h(i,t);var g;!n&&f?(null===e.onFail||void 0===l||l.call(e,i,t),new Promise((e=>{setTimeout(e,g)})).then((()=>s()?void 0:d())).then((()=>{n?c(t):u()}))):c(t)}))};return{promise:r,cancel:t=>{var n;a||(c(new mR(t)),null===e.abort||void 0===n||n.call(e))},continue:()=>{var e;return null===t||void 0===e||e(),r},cancelRetry:()=>{0},continueRetry:()=>{0},canStart:o,start:()=>(o()?u():d().then(u),r)}}var gR,vR,bR,xR,yR,wR,_R,kR,NR,jR,SR,CR,ER,AR,TR,MR,PR,DR,RR,OR,LR,IR,FR,zR,qR=(hR=new WeakMap,class{constructor(){Nv(this,hR,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qD(this.gcTime)&&Ev(hR,this,setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!==e&&void 0!==e?e:FD?1/0:3e5)}clearGcTimeout(){Cv(hR,this)&&(clearTimeout(Cv(hR,this)),Ev(hR,this,void 0))}});gR=new WeakMap,vR=new WeakMap,bR=new WeakMap,xR=new WeakMap,yR=new WeakMap,wR=new WeakMap,_R=new WeakMap,kR=new WeakSet;function WR(e){this.state=(t=>{var n,i;switch(e.type){case"failed":return d(d({},t),{},{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return d(d({},t),{},{fetchStatus:"paused"});case"continue":return d(d({},t),{},{fetchStatus:"fetching"});case"fetch":return d(d(d({},t),BR(t.data,this.options)),{},{fetchMeta:null!==e.meta&&void 0!==n?n:null});case"success":return Ev(vR,this,void 0),d(d({},t),{},{data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!==e.dataUpdatedAt&&void 0!==i?i:Date.now(),error:null,isInvalidated:!1,status:"success"},!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const a=e.error;return pR(a)&&a.revert&&Cv(vR,this)?d(d({},Cv(vR,this)),{},{fetchStatus:"idle"}):d(d({},t),{},{error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"});case"invalidate":return d(d({},t),{},{isInvalidated:!0});case"setState":return d(d({},t),e.state)}})(this.state),oR.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),Cv(bR,this).notify({query:this,type:"updated",action:e})}))}function BR(e,t){return d({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uR(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}var UR=(NR=new WeakMap,jR=new WeakMap,SR=new WeakMap,CR=new WeakMap,ER=new WeakMap,AR=new WeakMap,TR=new WeakMap,MR=new WeakMap,PR=new WeakMap,DR=new WeakMap,RR=new WeakMap,OR=new WeakMap,LR=new WeakMap,IR=new WeakMap,FR=new WeakMap,zR=new WeakSet,class extends ID{constructor(e,t){super(),kv(this,zR),Nv(this,NR,void 0),Nv(this,jR,void 0),Nv(this,SR,void 0),Nv(this,CR,void 0),Nv(this,ER,void 0),Nv(this,AR,void 0),Nv(this,TR,void 0),Nv(this,MR,void 0),Nv(this,PR,void 0),Nv(this,DR,void 0),Nv(this,RR,void 0),Nv(this,OR,void 0),Nv(this,LR,void 0),Nv(this,IR,void 0),Nv(this,FR,new Set),this.options=t,Ev(NR,this,e),Ev(MR,this,null),Ev(TR,this,cR()),this.options.experimental_prefetchInRender||Cv(TR,this).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Cv(jR,this).addObserver(this),ZR(Cv(jR,this),this.options)?jv(zR,this,VR).call(this):this.updateResult(),jv(zR,this,YR).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return eO(Cv(jR,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return eO(Cv(jR,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,jv(zR,this,KR).call(this),jv(zR,this,XR).call(this),Cv(jR,this).removeObserver(this)}setOptions(e){const t=this.options,n=Cv(jR,this);if(this.options=Cv(NR,this).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!==typeof this.options.enabled&&"function"!==typeof this.options.enabled&&"boolean"!==typeof UD(this.options.enabled,Cv(jR,this)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");jv(zR,this,JR).call(this),Cv(jR,this).setOptions(this.options),t._defaulted&&!GD(this.options,t)&&Cv(NR,this).getQueryCache().notify({type:"observerOptionsUpdated",query:Cv(jR,this),observer:this});const i=this.hasListeners();i&&tO(Cv(jR,this),n,this.options,t)&&jv(zR,this,VR).call(this),this.updateResult(),!i||Cv(jR,this)===n&&UD(this.options.enabled,Cv(jR,this))===UD(t.enabled,Cv(jR,this))&&BD(this.options.staleTime,Cv(jR,this))===BD(t.staleTime,Cv(jR,this))||jv(zR,this,HR).call(this);const a=jv(zR,this,GR).call(this);!i||Cv(jR,this)===n&&UD(this.options.enabled,Cv(jR,this))===UD(t.enabled,Cv(jR,this))&&a===Cv(IR,this)||jv(zR,this,QR).call(this,a)}getOptimisticResult(e){const t=Cv(NR,this).getQueryCache().build(Cv(NR,this),e),n=this.createResult(t,e);return function(e,t){if(!GD(e.getCurrentResult(),t))return!0;return!1}(this,n)&&(Ev(CR,this,n),Ev(AR,this,this.options),Ev(ER,this,Cv(jR,this).state)),n}getCurrentResult(){return Cv(CR,this)}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),null===t||void 0===t||t(n),Reflect.get(e,n))})}trackProp(e){Cv(FR,this).add(e)}getCurrentQuery(){return Cv(jR,this)}refetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return this.fetch(d({},t))}fetchOptimistic(e){const t=Cv(NR,this).defaultQueryOptions(e),n=Cv(NR,this).getQueryCache().build(Cv(NR,this),t);return n.fetch().then((()=>this.createResult(n,t)))}fetch(e){var t;return jv(zR,this,VR).call(this,d(d({},e),{},{cancelRefetch:null===(t=e.cancelRefetch)||void 0===t||t})).then((()=>(this.updateResult(),Cv(CR,this))))}createResult(e,t){const n=Cv(jR,this),i=this.options,a=Cv(CR,this),r=Cv(ER,this),s=Cv(AR,this),o=e!==n?e.state:Cv(SR,this),{state:l}=e;let c,u=d({},l),h=!1;if(t._optimisticResults){const a=this.hasListeners(),r=!a&&ZR(e,t),s=a&&tO(e,n,t,i);(r||s)&&(u=d(d({},u),BR(l.data,e.options))),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:f}=u;c=u.data;let g=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===f){let e;var v;if(null!==a&&void 0!==a&&a.isPlaceholderData&&t.placeholderData===(null===s||void 0===s?void 0:s.placeholderData))e=a.data,g=!0;else e="function"===typeof t.placeholderData?t.placeholderData(null===(v=Cv(RR,this))||void 0===v?void 0:v.state.data,Cv(RR,this)):t.placeholderData;void 0!==e&&(f="success",c=XD(null===a||void 0===a?void 0:a.data,e,t),h=!0)}if(t.select&&void 0!==c&&!g)if(a&&c===(null===r||void 0===r?void 0:r.data)&&t.select===Cv(PR,this))c=Cv(DR,this);else try{Ev(PR,this,t.select),c=t.select(c),c=XD(null===a||void 0===a?void 0:a.data,c,t),Ev(DR,this,c),Ev(MR,this,null)}catch(N){Ev(MR,this,N)}Cv(MR,this)&&(m=Cv(MR,this),c=Cv(DR,this),p=Date.now(),f="error");const b="fetching"===u.fetchStatus,x="pending"===f,y="error"===f,w=x&&b,_=void 0!==c,k={status:f,fetchStatus:u.fetchStatus,isPending:x,isSuccess:"success"===f,isError:y,isInitialLoading:w,isLoading:w,data:c,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:b,isRefetching:b&&!x,isLoadingError:y&&!_,isPaused:"paused"===u.fetchStatus,isPlaceholderData:h,isRefetchError:y&&_,isStale:nO(e,t),refetch:this.refetch,promise:Cv(TR,this)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===k.status?e.reject(k.error):void 0!==k.data&&e.resolve(k.data)},i=()=>{const e=Ev(TR,this,k.promise=cR());t(e)},a=Cv(TR,this);switch(a.status){case"pending":e.queryHash===n.queryHash&&t(a);break;case"fulfilled":"error"!==k.status&&k.data===a.value||i();break;case"rejected":"error"===k.status&&k.error===a.reason||i()}}return k}updateResult(){const e=Cv(CR,this),t=this.createResult(Cv(jR,this),this.options);if(Ev(ER,this,Cv(jR,this).state),Ev(AR,this,this.options),void 0!==Cv(ER,this).data&&Ev(RR,this,Cv(jR,this)),GD(t,e))return;Ev(CR,this,t);jv(zR,this,$R).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"===typeof t?t():t;if("all"===n||!n&&!Cv(FR,this).size)return!0;const i=new Set(null!==n&&void 0!==n?n:Cv(FR,this));return this.options.throwOnError&&i.add("error"),Object.keys(Cv(CR,this)).some((t=>{const n=t;return Cv(CR,this)[n]!==e[n]&&i.has(n)}))})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&jv(zR,this,YR).call(this)}});function VR(e){jv(zR,this,JR).call(this);let t=Cv(jR,this).fetch(this.options,e);return null!==e&&void 0!==e&&e.throwOnError||(t=t.catch(zD)),t}function HR(){jv(zR,this,KR).call(this);const e=BD(this.options.staleTime,Cv(jR,this));if(FD||Cv(CR,this).isStale||!qD(e))return;const t=WD(Cv(CR,this).dataUpdatedAt,e);Ev(OR,this,setTimeout((()=>{Cv(CR,this).isStale||this.updateResult()}),t+1))}function GR(){var e;return null!==(e="function"===typeof this.options.refetchInterval?this.options.refetchInterval(Cv(jR,this)):this.options.refetchInterval)&&void 0!==e&&e}function QR(e){jv(zR,this,XR).call(this),Ev(IR,this,e),!FD&&!1!==UD(this.options.enabled,Cv(jR,this))&&qD(Cv(IR,this))&&0!==Cv(IR,this)&&Ev(LR,this,setInterval((()=>{(this.options.refetchIntervalInBackground||nR.isFocused())&&jv(zR,this,VR).call(this)}),Cv(IR,this)))}function YR(){jv(zR,this,HR).call(this),jv(zR,this,QR).call(this,jv(zR,this,GR).call(this))}function KR(){Cv(OR,this)&&(clearTimeout(Cv(OR,this)),Ev(OR,this,void 0))}function XR(){Cv(LR,this)&&(clearInterval(Cv(LR,this)),Ev(LR,this,void 0))}function JR(){const e=Cv(NR,this).getQueryCache().build(Cv(NR,this),this.options);if(e===Cv(jR,this))return;const t=Cv(jR,this);Ev(jR,this,e),Ev(SR,this,e.state),this.hasListeners()&&(null===t||void 0===t||t.removeObserver(this),e.addObserver(this))}function $R(e){oR.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(Cv(CR,this))})),Cv(NR,this).getQueryCache().notify({query:Cv(jR,this),type:"observerResultsUpdated"})}))}function ZR(e,t){return function(e,t){return!1!==UD(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&eO(e,t,t.refetchOnMount)}function eO(e,t,n){if(!1!==UD(t.enabled,e)&&"static"!==BD(t.staleTime,e)){const i="function"===typeof n?n(e):n;return"always"===i||!1!==i&&nO(e,t)}return!1}function tO(e,t,n,i){return(e!==t||!1===UD(i.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&nO(e,n)}function nO(e,t){return!1!==UD(t.enabled,e)&&e.isStaleByTime(BD(t.staleTime,e))}function iO(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var aO,rO,sO,oO,lO=i.createContext(iO()),cO=i.createContext(!1),dO=(cO.Provider,(e,t,n)=>t.fetchOptimistic(e).catch((()=>{n.clearReset()})));function uO(e,t,n){var a,r,s,o;const l=i.useContext(cO),c=i.useContext(lO),d=LD(n),u=d.defaultQueryOptions(e);null===(a=d.getDefaultOptions().queries)||void 0===a||null===(r=a._experimental_beforeQuery)||void 0===r||r.call(a,u),u._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(null!==e&&void 0!==e?e:1e3,1e3),n=e.staleTime;e.staleTime="function"===typeof n?function(){return t(n(...arguments))}:t(n),"number"===typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(u),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(u,c),(e=>{i.useEffect((()=>{e.clearReset()}),[e])})(c);const h=!d.getQueryCache().get(u.queryHash),[m]=i.useState((()=>new t(d,u))),p=m.getOptimisticResult(u),f=!l&&!1!==e.subscribed;if(i.useSyncExternalStore(i.useCallback((e=>{const t=f?m.subscribe(oR.batchCalls(e)):zD;return m.updateResult(),t}),[m,f]),(()=>m.getCurrentResult()),(()=>m.getCurrentResult())),i.useEffect((()=>{m.setOptions(u)}),[u,m]),((e,t)=>(null===e||void 0===e?void 0:e.suspense)&&t.isPending)(u,p))throw dO(u,m,c);if((e=>{let{result:t,errorResetBoundary:n,throwOnError:i,query:a,suspense:r}=e;return t.isError&&!n.isReset()&&!t.isFetching&&a&&(r&&void 0===t.data||tR(i,[t.error,a]))})({result:p,errorResetBoundary:c,throwOnError:u.throwOnError,query:d.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw p.error;if(null===(s=d.getDefaultOptions().queries)||void 0===s||null===(o=s._experimental_afterQuery)||void 0===o||o.call(s,u,p),u.experimental_prefetchInRender&&!FD&&((e,t)=>e.isLoading&&e.isFetching&&!t)(p,l)){var g;const e=h?dO(u,m,c):null===(g=d.getQueryCache().get(u.queryHash))||void 0===g?void 0:g.promise;null===e||void 0===e||e.catch(zD).finally((()=>{m.updateResult()}))}return u.notifyOnChangeProps?p:m.trackResult(p)}var hO,mO,pO,fO,gO;aO=new WeakMap,rO=new WeakMap,sO=new WeakMap,oO=new WeakSet;function vO(e){this.state=(t=>{switch(e.type){case"failed":return d(d({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return d(d({},t),{},{isPaused:!0});case"continue":return d(d({},t),{},{isPaused:!1});case"pending":return d(d({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return d(d({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return d(d({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),oR.batch((()=>{Cv(aO,this).forEach((t=>{t.onMutationUpdate(e)})),Cv(rO,this).notify({mutation:this,type:"updated",action:e})}))}var bO=(hO=new WeakMap,mO=new WeakMap,pO=new WeakMap,fO=new WeakMap,gO=new WeakSet,class extends ID{constructor(e,t){super(),kv(this,gO),Nv(this,hO,void 0),Nv(this,mO,void 0),Nv(this,pO,void 0),Nv(this,fO,void 0),Ev(hO,this,e),this.setOptions(t),this.bindMethods(),jv(gO,this,xO).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=Cv(hO,this).defaultMutationOptions(e),GD(this.options,n)||Cv(hO,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Cv(pO,this),observer:this}),null!==n&&void 0!==n&&n.mutationKey&&this.options.mutationKey&&VD(n.mutationKey)!==VD(this.options.mutationKey)?this.reset():"pending"===(null===(t=Cv(pO,this))||void 0===t?void 0:t.state.status)&&Cv(pO,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Cv(pO,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){jv(gO,this,xO).call(this),jv(gO,this,yO).call(this,e)}getCurrentResult(){return Cv(mO,this)}reset(){var e;null===(e=Cv(pO,this))||void 0===e||e.removeObserver(this),Ev(pO,this,void 0),jv(gO,this,xO).call(this),jv(gO,this,yO).call(this)}mutate(e,t){var n;return Ev(fO,this,t),null===(n=Cv(pO,this))||void 0===n||n.removeObserver(this),Ev(pO,this,Cv(hO,this).getMutationCache().build(Cv(hO,this),this.options)),Cv(pO,this).addObserver(this),Cv(pO,this).execute(e)}});function xO(){var e,t;const n=null!==(e=null===(t=Cv(pO,this))||void 0===t?void 0:t.state)&&void 0!==e?e:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};Ev(mO,this,d(d({},n),{},{isPending:"pending"===n.status,isSuccess:"success"===n.status,isError:"error"===n.status,isIdle:"idle"===n.status,mutate:this.mutate,reset:this.reset}))}function yO(e){oR.batch((()=>{if(Cv(fO,this)&&this.hasListeners()){const c=Cv(mO,this).variables,d=Cv(mO,this).context;var t,n,i,a;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(n=Cv(fO,this)).onSuccess)||void 0===t||t.call(n,e.data,c,d),null===(i=(a=Cv(fO,this)).onSettled)||void 0===i||i.call(a,e.data,null,c,d);else if("error"===(null===e||void 0===e?void 0:e.type)){var r,s,o,l;null===(r=(s=Cv(fO,this)).onError)||void 0===r||r.call(s,e.error,c,d),null===(o=(l=Cv(fO,this)).onSettled)||void 0===o||o.call(l,void 0,e.error,c,d)}}this.listeners.forEach((e=>{e(Cv(mO,this))}))}))}const wO=["title","titleId"];function _O(e,t){let{title:n,titleId:a}=e,s=r(e,wO);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const kO=i.forwardRef(_O),NO=["title","titleId"];function jO(e,t){let{title:n,titleId:a}=e,s=r(e,NO);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const SO=i.forwardRef(jO),CO=["title","titleId"];function EO(e,t){let{title:n,titleId:a}=e,s=r(e,CO);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const AO=i.forwardRef(EO),TO=["title","titleId"];function MO(e,t){let{title:n,titleId:a}=e,s=r(e,TO);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const PO=i.forwardRef(MO);function DO(e){let{category:t}=e;const n=LD(),{profile:a,hasPermission:r}=el(),[s,o]=(0,i.useState)("workflows"),[l,c]=(0,i.useState)(null),[u,h]=(0,i.useState)(null),m=t?{category:[t]}:{},{data:p,isLoading:f}=function(e,t){return uO(e,UR,t)}({queryKey:["workflows",m],queryFn:async()=>await Xo.getWorkflows(m)}),g=((null===p||void 0===p?void 0:p.data)||[]).filter((e=>{const t=e.access_control;return!!(t.roles&&t.roles.length>0&&null!==a&&void 0!==a&&a.role_id&&t.roles.includes(a.role_id))||(t.groups&&t.groups.length,t.departments&&t.departments.length,!(t.roles&&0!==t.roles.length||t.groups&&0!==t.groups.length||t.departments&&0!==t.departments.length))})),v=function(e,t){const n=LD(t),[a]=i.useState((()=>new bO(n,e)));i.useEffect((()=>{a.setOptions(e)}),[a,e]);const r=i.useSyncExternalStore(i.useCallback((e=>a.subscribe(oR.batchCalls(e))),[a]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),s=i.useCallback(((e,t)=>{a.mutate(e,t).catch(zD)}),[a]);if(r.error&&tR(a.options.throwOnError,[r.error]))throw r.error;return d(d({},r),{},{mutate:s,mutateAsync:r.mutate})}({mutationFn:Xo.deleteWorkflow,onSuccess:()=>{n.invalidateQueries({queryKey:["workflows"]}),h(null)},onError:e=>{console.error("Error deleting workflow:",e)}});return(0,$o.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,$o.jsx)("div",{className:"mb-6",children:(0,$o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t?"".concat(t.charAt(0).toUpperCase()+t.slice(1)," Workflows"):"Workflow Management"})}),(0,$o.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,$o.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,$o.jsxs)("button",{onClick:()=>o("workflows"),className:"".concat("workflows"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,$o.jsx)(kO,{className:"h-5 w-5 mr-2"}),"Workflows & Steps"]}),(0,$o.jsxs)("button",{onClick:()=>o("create"),className:"".concat("create"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,$o.jsx)(SO,{className:"h-5 w-5 mr-2"}),"Create Workflow"]}),(0,$o.jsxs)("button",{onClick:()=>o("assignments"),className:"".concat("assignments"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,$o.jsx)(AO,{className:"h-5 w-5 mr-2"}),"Assignments"]}),(0,$o.jsxs)("button",{onClick:()=>o("progress"),className:"".concat("progress"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,$o.jsx)(PO,{className:"h-5 w-5 mr-2"}),"Progress"]})]})}),(0,$o.jsxs)("div",{className:"mt-6",children:["workflows"===s&&(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Workflows"}),(0,$o.jsxs)("button",{onClick:()=>{c(null),o("create")},className:"btn-primary flex items-center",children:[(0,$o.jsx)(SO,{className:"h-5 w-5 mr-1"}),"Create Workflow"]})]}),f?(0,$o.jsx)("div",{className:"flex justify-center py-8",children:(0,$o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):g.length>0?(0,$o.jsx)("div",{className:"grid gap-4",children:g.map((e=>{var t,n;return(0,$o.jsx)("div",{className:"bg-white shadow rounded-lg p-6 hover:shadow-md transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),e.description&&(0,$o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.description}),(0,$o.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500",children:[(0,$o.jsxs)("span",{children:["Category: ",e.category]}),(0,$o.jsxs)("span",{children:["Trigger: ",e.trigger_type.replace("_"," ")]}),(0,$o.jsxs)("span",{children:["Status: ",e.status]}),(0,$o.jsxs)("span",{children:["Steps: ",e.steps.length]})]}),e.access_control&&(0,$o.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Access:",(null===(t=e.access_control.roles)||void 0===t?void 0:t.length)>0&&(0,$o.jsxs)("span",{className:"ml-2",children:["Roles: ",e.access_control.roles.join(", ")]}),(null===(n=e.access_control.groups)||void 0===n?void 0:n.length)>0&&(0,$o.jsxs)("span",{className:"ml-2",children:["Groups: ",e.access_control.groups.join(", ")]})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,$o.jsx)("button",{onClick:()=>(e=>{c(e)})(e),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),(0,$o.jsx)("button",{onClick:()=>(e=>{h({workflow:e})})(e),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]})},e.id)}))}):(0,$o.jsxs)("div",{className:"text-center py-8 bg-white shadow rounded-lg",children:[(0,$o.jsx)("p",{className:"text-gray-500 mb-4",children:t?"No ".concat(t," workflows found"):"No workflows found"}),(0,$o.jsx)("button",{onClick:()=>{c(null),o("create")},className:"btn-primary",children:"Create Your First Workflow"})]})]}),"create"===s&&(0,$o.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Workflow"}),(0,$o.jsx)("p",{className:"text-gray-500",children:"Workflow creation functionality will be implemented here."})]}),"assignments"===s&&(0,$o.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Workflow Assignments"}),(0,$o.jsx)("p",{className:"text-gray-500",children:"Workflow assignment management will be implemented here."})]}),"progress"===s&&(0,$o.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Workflow Progress"}),(0,$o.jsx)("p",{className:"text-gray-500",children:"Workflow execution tracking will be implemented here."})]})]}),u&&(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,$o.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delete Workflow"}),(0,$o.jsxs)("p",{className:"text-sm text-gray-600 mb-6",children:['Are you sure you want to delete "',u.workflow.name,'"? This action cannot be undone.']}),(0,$o.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,$o.jsx)("button",{onClick:()=>h(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:v.isPending,children:"Cancel"}),(0,$o.jsx)("button",{onClick:()=>{u&&v.mutate(u.workflow.id)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 disabled:opacity-50",disabled:v.isPending,children:v.isPending?"Deleting...":"Delete"})]})]})})]})}const RO=Gc("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),OO=Gc("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),LO=()=>{const{user:e}=el(),t=ue(),{t:n}=bs("common"),i="admin"===(null===e||void 0===e?void 0:e.role)?[{name:n("admin.dashboard"),href:"/admin",icon:id},{name:n("navigation.users"),href:"/admin/users",icon:ad},{name:n("navigation.settings"),href:"/admin/settings",icon:gd}]:"manager"===(null===e||void 0===e?void 0:e.role)?[{name:n("navigation.dashboard"),href:"/manager",icon:id},{name:n("admin.crew_members"),href:"/manager/crew",icon:ad},{name:n("navigation.certificates"),href:"/manager/certificates",icon:Zu}]:[{name:n("navigation.dashboard"),href:"/crew",icon:id},{name:n("navigation.training"),href:"/crew/training",icon:ah},{name:n("navigation.profile"),href:"/crew/profile",icon:gd}];return(0,$o.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 lg:hidden z-40",children:(0,$o.jsx)("div",{className:"grid grid-cols-3 gap-1 p-2",children:i.map((e=>{const n=e.icon,i=(e=>"/manager"===e||"/crew"===e||"/admin"===e?t.pathname===e:t.pathname.startsWith(e))(e.href);return(0,$o.jsxs)(xt,{to:e.href,className:"flex flex-col items-center justify-center py-3 px-2 rounded-lg transition-all duration-200 mobile-nav-item ".concat(i?"bg-burando-teal text-white shadow-md":"text-gray-600 hover:text-burando-teal hover:bg-gray-100"),children:[(0,$o.jsx)(n,{className:"h-5 w-5 mb-1 ".concat(i?"text-white":"")}),(0,$o.jsx)("span",{className:"text-xs font-medium truncate max-w-16 ".concat(i?"text-white":""),children:e.name})]},e.name)}))})})},IO=()=>{const{user:e,logout:t}=el(),n=ue(),[a,r]=(0,i.useState)(!1),{t:s}=bs("common"),o=()=>{t()},l="admin"===(null===e||void 0===e?void 0:e.role)?[{name:s("admin.dashboard"),href:"/admin",icon:id}]:"manager"===(null===e||void 0===e?void 0:e.role)?[{name:s("navigation.dashboard"),href:"/manager",icon:id},{name:s("admin.crew_members"),href:"/manager/crew",icon:ad}]:[{name:s("navigation.dashboard"),href:"/crew",icon:id},{name:s("navigation.training"),href:"/crew/training",icon:ah},{name:s("navigation.profile"),href:"/crew/profile",icon:gd}],c=e=>"/manager"===e||"/crew"===e?n.pathname===e:n.pathname.startsWith(e);return(0,$o.jsxs)("div",{className:"min-h-screen burando-bg",children:[(0,$o.jsxs)("header",{className:"nav-glass sticky top-0 z-50",children:[(0,$o.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,$o.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,$o.jsxs)("div",{className:"flex items-center",children:[(0,$o.jsx)("img",{src:"/burando-logo.svg",alt:"Burando Maritime Services",className:"h-10 w-auto mr-4"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-xl font-bold text-gradient-navy",children:s("general.burando_maritime")}),(0,$o.jsx)("p",{className:"text-sm text-gradient-primary font-medium",children:s("crew.onboarding")})]})]}),(0,$o.jsx)("nav",{className:"hidden md:flex space-x-2",children:l.map((e=>{const t=e.icon;return(0,$o.jsxs)(xt,{to:e.href,className:"flex items-center px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 ".concat(c(e.href)?"glass-button text-white shadow-lg":"text-slate-700 hover:text-slate-900 hover:bg-white/20 hover:backdrop-blur-sm"),children:[(0,$o.jsx)(t,{className:"h-4 w-4 mr-2"}),e.name]},e.name)}))}),(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)(td,{}),(0,$o.jsxs)("div",{className:"hidden md:block text-right",children:[(0,$o.jsxs)("p",{className:"text-sm font-medium text-slate-800",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,$o.jsx)("p",{className:"text-xs text-slate-600 capitalize",children:null===e||void 0===e?void 0:e.role})]}),(0,$o.jsxs)("button",{onClick:o,className:"flex items-center px-4 py-2 text-sm text-slate-700 hover:text-red-600 transition-all duration-300 rounded-xl hover:bg-red-50/80 hover:backdrop-blur-sm border border-transparent hover:border-red-200",title:s("navigation.logout"),children:[(0,$o.jsx)(RO,{className:"h-4 w-4"}),(0,$o.jsx)("span",{className:"ml-2 hidden md:inline",children:s("navigation.logout")})]}),(0,$o.jsx)("button",{onClick:()=>r(!a),className:"md:hidden p-3 rounded-lg text-gray-700 hover:text-burando-teal hover:bg-gray-100 touch-target transition-all duration-200","aria-label":a?"Close menu":"Open menu",children:a?(0,$o.jsx)(fd,{className:"h-6 w-6"}):(0,$o.jsx)(OO,{className:"h-6 w-6"})})]})]})}),a&&(0,$o.jsx)("div",{className:"md:hidden border-t border-gray-200 bg-white shadow-lg",children:(0,$o.jsxs)("div",{className:"px-4 py-4 space-y-2",children:[(0,$o.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 mb-3 bg-gray-50 rounded-lg",children:[(0,$o.jsxs)("p",{className:"text-base font-medium text-gray-900",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,$o.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:null===e||void 0===e?void 0:e.role})]}),l.map((e=>{const t=e.icon;return(0,$o.jsxs)(xt,{to:e.href,onClick:()=>r(!1),className:"burando-nav-link flex items-center px-4 py-4 rounded-lg text-base font-medium transition-all duration-200 touch-target ".concat(c(e.href)?"text-burando-teal bg-burando-teal/10 active shadow-sm":"text-gray-700 hover:text-burando-teal hover:bg-gray-100"),children:[(0,$o.jsx)(t,{className:"h-5 w-5 mr-4"}),e.name]},e.name)})),(0,$o.jsxs)("button",{onClick:o,className:"w-full flex items-center px-4 py-4 text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 touch-target mt-4 border-t border-gray-200 pt-6",children:[(0,$o.jsx)(RO,{className:"h-5 w-5 mr-4"}),s("navigation.logout")]})]})})]}),(0,$o.jsx)("main",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 md:py-8 pb-20 lg:pb-8",children:(0,$o.jsx)("div",{className:"fade-in",children:(0,$o.jsx)(Pe,{})})}),(0,$o.jsx)("footer",{className:"glass-card mt-auto mx-4 md:mx-6 mb-4 md:mb-6 hidden lg:block",children:(0,$o.jsx)("div",{className:"px-4 md:px-6 py-4",children:(0,$o.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center text-center md:text-left",children:[(0,$o.jsxs)("div",{className:"flex flex-col md:flex-row items-center mb-4 md:mb-0",children:[(0,$o.jsx)("img",{src:"/burando-logo.svg",alt:"Burando Maritime Services",className:"h-6 w-auto mr-0 md:mr-3 mb-2 md:mb-0"}),(0,$o.jsxs)("span",{className:"text-xs md:text-sm text-slate-600",children:["\xa9 2024 ",s("general.burando_maritime")," ",s("general.maritime_services"),". ",s("general.all_rights_reserved"),"."]})]}),(0,$o.jsxs)("div",{className:"text-xs md:text-sm text-gradient-primary font-medium",children:[s("general.safety_management_system")," v1.0"]})]})})}),(0,$o.jsx)(LO,{})]})},FO=Gc("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const zO=new class{constructor(){this.sessionId=wg(),this.errorQueue=[],this.isOnline=navigator.onLine,this.maxRetries=3,this.retryDelay=1e3,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this))}handleOnline(){this.isOnline=!0,this.flushErrorQueue()}handleOffline(){this.isOnline=!1}generateErrorId(){return"fe_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}async logError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={id:this.generateErrorId(),type:e,message:t.message||"Unknown error",stack:t.stack,timestamp:(new Date).toISOString(),sessionId:this.sessionId,url:window.location.href,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},context:d(d({},n),{},{reactVersion:i.version,environment:"production"})};return this.errorQueue.push(a),this.isOnline&&await this.sendErrorToBackend(a),a.id}async sendErrorToBackend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{const t=await fetch("/api/errors/frontend",{method:"POST",headers:{"Content-Type":"application/json","X-Session-ID":this.sessionId},body:JSON.stringify(e)});if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));return this.errorQueue=this.errorQueue.filter((t=>t.id!==e.id)),!0}catch(n){return t<this.maxRetries&&setTimeout((()=>{this.sendErrorToBackend(e,t+1)}),this.retryDelay*Math.pow(2,t)),!1}}async flushErrorQueue(){if(!this.isOnline||0===this.errorQueue.length)return;const e=this.errorQueue.map((e=>this.sendErrorToBackend(e)));try{await Promise.allSettled(e)}catch(t){}}logReactError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown";return this.logError("REACT_ERROR_BOUNDARY",e,{componentStack:t.componentStack,errorBoundary:n,errorInfo:t})}logUnhandledRejection(e){var t;const n=e.reason instanceof Error?e.reason:new Error(e.reason);return this.logError("UNHANDLED_PROMISE_REJECTION",n,{reason:e.reason,promise:null===(t=e.promise)||void 0===t?void 0:t.toString()})}logGlobalError(e){const t=new Error(e.message);return t.stack="".concat(e.filename,":").concat(e.lineno,":").concat(e.colno),this.logError("GLOBAL_JAVASCRIPT_ERROR",t,{filename:e.filename,lineno:e.lineno,colno:e.colno})}logCustomError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Error(e);return this.logError("CUSTOM_APPLICATION_ERROR",n,t)}logPerformanceIssue(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=new Error("Performance issue: ".concat(e," (").concat(t,") exceeded threshold (").concat(n,")"));return this.logError("PERFORMANCE_ISSUE",a,d({metric:e,value:t,threshold:n},i))}getErrorStats(){return{sessionId:this.sessionId,queuedErrors:this.errorQueue.length,isOnline:this.isOnline,totalErrors:this.errorQueue.length}}clearErrorQueue(){this.errorQueue=[]}};window.addEventListener("error",(e=>{zO.logGlobalError(e)})),window.addEventListener("unhandledrejection",(e=>{zO.logUnhandledRejection(e)}));const qO=zO;class WO extends i.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState((e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1})))},this.handleRefresh=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),Bs.logError(e,"react_error_boundary",{componentStack:t.componentStack,errorBoundary:this.constructor.name}),qO.logReactError(e,t,this.constructor.name)}render(){return this.state.hasError?(0,$o.jsx)(BO,d({error:this.state.error,errorInfo:this.state.errorInfo,retryCount:this.state.retryCount,onRetry:this.handleRetry,onRefresh:this.handleRefresh,onGoHome:this.handleGoHome},this.props)):this.props.children}}function BO(e){let{error:t,errorInfo:n,retryCount:i,onRetry:a,onRefresh:r,onGoHome:s,context:o="general"}=e;const{t:l}=bs(["errors","common"]);return(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-deep-blue via-burando-navy to-burando-dark-blue flex items-center justify-center p-4",children:(0,$o.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-6 text-center",children:[(0,$o.jsx)("div",{className:"flex justify-center mb-4",children:(0,$o.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Pd,{className:"w-8 h-8 text-red-600"})})}),(0,$o.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:l(i>2?"errors:user_friendly.technical_difficulties":"errors:user_friendly.something_went_wrong")}),(0,$o.jsx)("p",{className:"text-gray-600 mb-6",children:(()=>{var e,n,a;return null!==t&&void 0!==t&&null!==(e=t.message)&&void 0!==e&&e.includes("ChunkLoadError")||null!==t&&void 0!==t&&null!==(n=t.message)&&void 0!==n&&n.includes("Loading chunk")?l("errors:network.slow_connection"):null!==t&&void 0!==t&&null!==(a=t.message)&&void 0!==a&&a.includes("Network")?l("errors:network.connection_lost"):l(i>2?"errors:user_friendly.working_on_it":"errors:user_friendly.please_try_again")})()}),(0,$o.jsx)("div",{className:"space-y-3 mb-6",children:(()=>{const e=[];return i<3&&e.push({label:l("errors:actions.retry"),action:a,primary:!0,icon:kd}),e.push({label:l("errors:actions.refresh"),action:r,primary:i>=3,icon:kd}),e.push({label:l("errors:actions.go_back"),action:s,icon:FO}),e})().map(((e,t)=>(0,$o.jsxs)("button",{onClick:e.action,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat(e.primary?"bg-burando-light-green text-white hover:bg-burando-green":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,$o.jsx)(e.icon,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:e.label})]},t)))}),(0,$o.jsxs)("div",{className:"border-t pt-4",children:[(0,$o.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:l("errors:help.still_stuck")}),(0,$o.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-burando-blue",children:[(0,$o.jsx)(Qc,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:l("errors:help.contact_info")})]})]}),!1]})})}function UO(e){let{children:t,context:n="general"}=e;return(0,$o.jsx)(WO,{context:n,children:t})}const VO=Gc("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]),HO=()=>{const[e,t]=(0,i.useState)(navigator.onLine),[n,a]=(0,i.useState)(!1),[r,s]=(0,i.useState)("unknown"),[o,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(0),[m,p]=(0,i.useState)(!1),f=(0,i.useCallback)((async()=>{if(e)try{const e=Date.now(),t=await fetch("/api/health",{method:"HEAD",cache:"no-cache"}),n=Date.now()-e;t.ok?s(n<200?"excellent":n<500?"good":n<1e3?"fair":"poor"):s("poor")}catch(n){s("offline"),t(!1)}else s("offline")}),[e]),g=(0,i.useCallback)((()=>{t(!0),n&&(vn.success("\ud83d\udea2 Connection restored! Syncing your progress...",{duration:4e3,icon:"\ud83d\udce1",style:{background:"#10b981",color:"white"}}),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SYNC_OFFLINE_DATA"}),l(new Date),a(!1)),f()}),[n,f]),v=(0,i.useCallback)((()=>{t(!1),a(!0),s("offline"),d(!0),vn.error("\ud83d\udce1 You're now offline. Don't worry - you can continue your maritime training!",{duration:6e3,icon:"\u26a0\ufe0f",style:{background:"#ef4444",color:"white"}})}),[]),b=(0,i.useCallback)((()=>{const e=localStorage.getItem("pendingQuizSync"),t=localStorage.getItem("pendingProgressSync");let n=0;if(e)try{n+=JSON.parse(e).length}catch(Tt){}if(t)try{n+=JSON.parse(t).length}catch(Tt){}h(n)}),[]);(0,i.useEffect)((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((()=>{p(!0)}))}),[]),(0,i.useEffect)((()=>{window.addEventListener("online",g),window.addEventListener("offline",v);const e=setInterval(f,3e4),t=setInterval(b,5e3);return f(),b(),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",v),clearInterval(e),clearInterval(t)}}),[g,v,f,b]);return e&&0===u&&"excellent"===r?null:(0,$o.jsxs)("div",{className:"fixed top-4 right-4 z-50",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-white text-sm font-medium shadow-lg ".concat((()=>{if(!e)return"bg-red-500";switch(r){case"excellent":return"bg-green-500";case"good":return"bg-green-400";case"fair":return"bg-yellow-500";case"poor":return"bg-orange-500";default:return"bg-gray-500"}})()),children:[(()=>{if(!e)return(0,$o.jsx)(Vd,{className:"h-4 w-4"});switch(r){case"excellent":case"good":return(0,$o.jsx)(Ud,{className:"h-4 w-4"});case"fair":case"poor":return(0,$o.jsx)(VO,{className:"h-4 w-4"});default:return(0,$o.jsx)(kd,{className:"h-4 w-4 animate-spin"})}})(),(0,$o.jsx)("span",{children:(()=>{if(!e)return"Offline Mode";switch(r){case"excellent":return"Excellent Connection";case"good":return"Good Connection";case"fair":return"Fair Connection";case"poor":return"Poor Connection";default:return"Checking..."}})()}),u>0&&(0,$o.jsxs)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs",children:[u," pending"]}),!m&&(0,$o.jsx)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs",children:"SW Loading..."})]}),o&&(0,$o.jsxs)("div",{className:"mt-1 text-xs text-gray-600 text-right",children:["Last sync: ",o.toLocaleTimeString()]})]})},GO=()=>{const{t:e}=bs(["common"]),{getTokenTimeRemaining:t,isTokenExpiringSoon:n,logout:a}=el(),[r,s]=(0,i.useState)(0),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=()=>{const e=t();s(e);const i=n(10);l(i&&!c)};e();const i=setInterval(e,3e4);return()=>clearInterval(i)}),[t,n,c]);if(!o||r<=0)return null;const u=Math.floor(r/6e4)<=2;return(0,$o.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md ".concat(u?"animate-pulse":""),children:(0,$o.jsx)("div",{className:"rounded-lg shadow-lg border-l-4 p-4 ".concat(u?"bg-red-50 border-red-500 text-red-800":"bg-yellow-50 border-yellow-500 text-yellow-800"),children:(0,$o.jsxs)("div",{className:"flex items-start",children:[(0,$o.jsx)("div",{className:"flex-shrink-0",children:u?(0,$o.jsx)(Pd,{className:"h-5 w-5 text-red-500"}):(0,$o.jsx)(qd,{className:"h-5 w-5 text-yellow-500"})}),(0,$o.jsxs)("div",{className:"ml-3 flex-1",children:[(0,$o.jsx)("h3",{className:"text-sm font-semibold",children:e(u?"common:session.expiring_soon":"common:session.warning")}),(0,$o.jsx)("p",{className:"text-sm mt-1",children:e("common:session.expires_in",{time:(e=>{const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return t>0?"".concat(t,"m ").concat(n,"s"):"".concat(n,"s")})(r)})}),(0,$o.jsxs)("div",{className:"mt-3 flex space-x-2",children:[(0,$o.jsxs)("button",{onClick:()=>{window.location.href="/login"},className:"inline-flex items-center px-3 py-1 rounded text-xs font-medium transition-colors ".concat(u?"bg-red-600 text-white hover:bg-red-700":"bg-yellow-600 text-white hover:bg-yellow-700"),children:[(0,$o.jsx)(kd,{className:"h-3 w-3 mr-1"}),e("common:session.refresh_session")]}),(0,$o.jsx)("button",{onClick:()=>{a(),window.location.href="/login"},className:"inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-gray-600 text-white hover:bg-gray-700 transition-colors",children:e("common:session.logout")})]})]}),(0,$o.jsx)("div",{className:"flex-shrink-0 ml-2",children:(0,$o.jsx)("button",{onClick:()=>{d(!0),l(!1)},className:"rounded-md p-1 inline-flex items-center justify-center transition-colors ".concat(u?"text-red-400 hover:text-red-600 hover:bg-red-100":"text-yellow-400 hover:text-yellow-600 hover:bg-yellow-100"),children:(0,$o.jsx)(fd,{className:"h-4 w-4"})})})]})})})},QO=(Gc("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),()=>{const{user:e,nextOnboardingStep:t}=el(),{nextStep:n,trackEvent:a}=ml(),{t:r}=bs(["onboarding","common"]);(0,i.useEffect)((()=>{a&&null!==e&&void 0!==e&&e.id&&a("step_start",{step_name:"welcome_aboard",user_role:null===e||void 0===e?void 0:e.role,vessel_assignment:null===e||void 0===e?void 0:e.vessel_assignment})}),[a,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.role,null===e||void 0===e?void 0:e.vessel_assignment]);return(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-navy via-burando-teal to-burando-bright-teal flex items-center justify-center p-4",children:(0,$o.jsx)("div",{className:"max-w-2xl w-full",children:(0,$o.jsxs)("div",{className:"glass-card-elevated p-8 sm:p-12 text-center",children:[(0,$o.jsxs)("div",{className:"relative mb-8",children:[(0,$o.jsx)("div",{className:"inline-flex items-center justify-center w-32 h-32 bg-gradient-to-br from-burando-bright-teal to-burando-teal rounded-full mb-6 shadow-2xl animate-pulse",children:(0,$o.jsx)($c,{className:"h-16 w-16 text-white"})}),(0,$o.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-burando-light-green rounded-full flex items-center justify-center animate-bounce",children:(0,$o.jsx)(Hd,{className:"h-4 w-4 text-white"})})]}),(0,$o.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4 drop-shadow-xl",children:"\ud83d\udea2 Welcome Aboard!"}),(0,$o.jsxs)("div",{className:"text-white/90 text-lg sm:text-xl mb-8 space-y-2",children:[(0,$o.jsxs)("p",{className:"font-semibold",children:["Hi ",null===e||void 0===e?void 0:e.firstName,", you're joining the crew as a ",(0,$o.jsx)("span",{className:"text-burando-light-green font-bold",children:null===e||void 0===e?void 0:e.role})]}),(0,$o.jsx)("p",{children:"Let's get you started with your maritime safety training"})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,$o.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,$o.jsx)(ah,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Safety Training"}),(0,$o.jsx)("p",{className:"text-white/70 text-xs",children:"Essential maritime safety protocols"})]}),(0,$o.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,$o.jsx)(ad,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Team Integration"}),(0,$o.jsx)("p",{className:"text-white/70 text-xs",children:"Meet your crew and responsibilities"})]}),(0,$o.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,$o.jsx)($c,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Vessel Operations"}),(0,$o.jsx)("p",{className:"text-white/70 text-xs",children:"Ship-specific procedures and equipment"})]})]}),(0,$o.jsxs)("div",{className:"glass-card p-6 mb-8 text-left",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 text-center",children:"Your Training Journey"}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsxs)("div",{className:"flex items-center text-white/90",children:[(0,$o.jsx)("div",{className:"w-3 h-3 bg-burando-bright-teal rounded-full mr-3"}),(0,$o.jsxs)("span",{className:"text-sm",children:[(0,$o.jsx)("strong",{children:"Phase 1:"})," Safety Fundamentals (2 hours)"]})]}),(0,$o.jsxs)("div",{className:"flex items-center text-white/90",children:[(0,$o.jsx)("div",{className:"w-3 h-3 bg-burando-teal rounded-full mr-3"}),(0,$o.jsxs)("span",{className:"text-sm",children:[(0,$o.jsx)("strong",{children:"Phase 2:"})," Emergency Procedures (2 hours)"]})]}),(0,$o.jsxs)("div",{className:"flex items-center text-white/90",children:[(0,$o.jsx)("div",{className:"w-3 h-3 bg-burando-navy rounded-full mr-3"}),(0,$o.jsxs)("span",{className:"text-sm",children:[(0,$o.jsx)("strong",{children:"Phase 3:"})," Operational Training (2 hours)"]})]})]}),(0,$o.jsx)("div",{className:"mt-4 p-3 bg-burando-bright-teal/20 rounded-lg",children:(0,$o.jsxs)("p",{className:"text-white/90 text-sm text-center",children:[(0,$o.jsx)("strong",{children:"Total Time:"})," 4-6 hours over 2 weeks"]})})]}),(0,$o.jsx)("button",{onClick:async()=>{a&&null!==e&&void 0!==e&&e.id&&await a("step_complete",{step_name:"welcome_aboard",action:"continue_clicked"}),n?await n():t()},className:"w-full bg-gradient-to-r from-burando-light-green to-burando-bright-teal text-white font-bold py-4 px-8 rounded-xl text-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-burando-bright-teal/50 focus:ring-offset-2 shadow-xl min-h-[56px] touch-manipulation",children:(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)("span",{children:"Start Your Training Journey"}),(0,$o.jsx)(Vm,{className:"h-6 w-6 ml-3"})]})}),(0,$o.jsx)("div",{className:"mt-6 text-center",children:(0,$o.jsx)("p",{className:"text-white/60 text-sm",children:"\ud83c\udf0a Designed for maritime professionals by maritime experts"})})]})})})}),YO=Gc("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),KO=Gc("hard-hat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]),XO=()=>{const{user:e,nextOnboardingStep:t}=el(),{nextStep:n,saveRoleSelection:a,trackEvent:r,progress:s}=ml(),{t:o}=bs(["onboarding","common"]),[l,c]=(0,i.useState)((null===s||void 0===s?void 0:s.selected_role_focus)||null);(0,i.useEffect)((()=>{r&&null!==e&&void 0!==e&&e.id&&r("step_start",{step_name:"role_setup",user_position:null===e||void 0===e?void 0:e.position,vessel_assignment:null===e||void 0===e?void 0:e.vessel_assignment})}),[r,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.position,null===e||void 0===e?void 0:e.vessel_assignment]);const d={schipper:{icon:YO,title:"Schipper/Kapitein",description:"Leiding, navigatie en volledige verantwoordelijkheid voor het schip",modules:["Rijnvaart Navigatie & Verkeerswetten","Leiderschap & Crisismanagement","Lading Planning & Stabiliteit","Wettelijke Verantwoordelijkheden"],duration:"8 uur",priority:"Leiderschap & Navigatie"},stuurman:{icon:Hd,title:"Stuurman",description:"Navigatie ondersteuning en operationele taken",modules:["Navigatie Ondersteuning","Communicatie Systemen (VHF/AIS)","Sluizen & Bruggen Operaties","Wachtdienst Procedures"],duration:"6 uur",priority:"Navigatie & Operaties"},matroos:{icon:KO,title:"Matroos",description:"Ervaren dekwerkzaamheden en specialistische taken",modules:["Geavanceerde Dekwerkzaamheden","Lading Behandeling & Veiligheid","Onderhoud & Reparaties","Mentoring Nieuwe Bemanningsleden"],duration:"5 uur",priority:"Dekoperaties & Mentoring"},deksman:{icon:ad,title:"Deksman",description:"Basis dekwerkzaamheden en algemene ondersteuning",modules:["Basis Dekwerkzaamheden","Veiligheid & Persoonlijke Bescherming","Basis Onderhoud & Schoonmaak","Teamwerk & Communicatie"],duration:"4 uur",priority:"Basis Dekoperaties"}};return(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-navy via-burando-teal to-burando-bright-teal flex items-center justify-center p-4",children:(0,$o.jsx)("div",{className:"max-w-4xl w-full",children:(0,$o.jsxs)("div",{className:"glass-card-elevated p-6 sm:p-8",children:[(0,$o.jsxs)("div",{className:"text-center mb-8",children:[(0,$o.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"\ud83c\udfaf Customize Your Training"}),(0,$o.jsx)("p",{className:"text-white/90 text-lg",children:"Select your primary role focus to personalize your training experience"})]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:Object.entries(d).map((e=>{let[t,n]=e;const i=n.icon,a=l===t;return(0,$o.jsx)("div",{onClick:()=>c(t),className:"glass-card p-6 cursor-pointer transition-all duration-300 transform hover:scale-[1.02] ".concat(a?"ring-4 ring-burando-light-green bg-burando-bright-teal/20":"hover:bg-white/10"),children:(0,$o.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,$o.jsx)("div",{className:"p-3 rounded-full ".concat(a?"bg-burando-light-green":"bg-burando-bright-teal"),children:(0,$o.jsx)(i,{className:"h-8 w-8 text-white"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$o.jsx)("h3",{className:"text-xl font-bold text-white",children:n.title}),a&&(0,$o.jsx)(Bd,{className:"h-6 w-6 text-burando-light-green"})]}),(0,$o.jsx)("p",{className:"text-white/80 text-sm mb-4",children:n.description}),(0,$o.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center text-white/70 text-sm",children:[(0,$o.jsx)(qd,{className:"h-4 w-4 mr-2"}),(0,$o.jsxs)("span",{children:["Duration: ",n.duration]})]}),(0,$o.jsxs)("div",{className:"flex items-center text-white/70 text-sm",children:[(0,$o.jsx)(Zu,{className:"h-4 w-4 mr-2"}),(0,$o.jsxs)("span",{children:["Focus: ",n.priority]})]})]}),(0,$o.jsxs)("div",{className:"space-y-1",children:[(0,$o.jsx)("p",{className:"text-white/90 text-sm font-medium",children:"Training Modules:"}),n.modules.map(((e,t)=>(0,$o.jsxs)("div",{className:"flex items-center text-white/70 text-xs",children:[(0,$o.jsx)("div",{className:"w-1.5 h-1.5 bg-burando-bright-teal rounded-full mr-2"}),(0,$o.jsx)("span",{children:e})]},t)))]})]})]})},t)}))}),l&&(0,$o.jsxs)("div",{className:"glass-card p-6 mb-8 bg-burando-bright-teal/20 border border-burando-light-green/30",children:[(0,$o.jsxs)("h3",{className:"text-lg font-bold text-white mb-2",children:["\u2705 Selected: ",d[l].title]}),(0,$o.jsxs)("p",{className:"text-white/90 text-sm",children:["Your training will be customized for ",d[l].description.toLowerCase(),"with emphasis on ",d[l].priority.toLowerCase(),"."]})]}),(0,$o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,$o.jsxs)("button",{onClick:()=>{},className:"flex items-center justify-center px-6 py-3 text-white/80 bg-white/10 border border-white/20 rounded-lg hover:bg-white/20 transition-all duration-300 min-h-[48px] touch-manipulation",children:[(0,$o.jsx)(wh,{className:"h-5 w-5 mr-2"}),(0,$o.jsx)("span",{children:"Back"})]}),(0,$o.jsxs)("button",{onClick:async()=>{if(l){if(a&&null!==e&&void 0!==e&&e.id){var i;const t={selected_at:(new Date).toISOString(),user_position:null===e||void 0===e?void 0:e.position,vessel_assignment:null===e||void 0===e?void 0:e.vessel_assignment,training_modules:(null===(i=d[l])||void 0===i?void 0:i.modules)||[]};await a(l,t),r&&await r("role_select",{step_name:"role_setup",selected_role:l,role_details:d[l],user_position:null===e||void 0===e?void 0:e.position})}localStorage.setItem("training_focus_".concat(e.id),l),n?await n():t()}},disabled:!l,className:"flex items-center justify-center px-8 py-3 rounded-lg font-semibold transition-all duration-300 min-h-[48px] touch-manipulation ".concat(l?"bg-gradient-to-r from-burando-light-green to-burando-bright-teal text-white hover:shadow-lg transform hover:scale-[1.02]":"bg-gray-500 text-gray-300 cursor-not-allowed"),children:[(0,$o.jsx)("span",{children:"Continue to Training Overview"}),(0,$o.jsx)(Vm,{className:"h-5 w-5 ml-2"})]})]}),(0,$o.jsx)("div",{className:"mt-6 text-center",children:(0,$o.jsx)("p",{className:"text-white/60 text-sm",children:"\ud83d\udca1 Don't worry - you can access training for all roles later"})})]})})})},JO=Gc("life-buoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),$O=()=>{const{user:e,completeOnboarding:t}=el(),{completeOnboarding:n,trackEvent:a,progress:r,roleContent:s}=ml(),{t:o}=bs(["onboarding","common"]);(0,i.useEffect)((()=>{a&&null!==e&&void 0!==e&&e.id&&a("step_start",{step_name:"training_overview",selected_role_focus:null===r||void 0===r?void 0:r.selected_role_focus,user_position:null===e||void 0===e?void 0:e.position})}),[a,null===e||void 0===e?void 0:e.id,null===r||void 0===r?void 0:r.selected_role_focus,null===e||void 0===e?void 0:e.position]);const l=(null===r||void 0===r?void 0:r.selected_role_focus)||"general",c=[{phase:1,title:"Safety Fundamentals",description:"Essential maritime safety knowledge and emergency procedures",icon:JO,duration:"2 hours",modules:["Personal Safety Equipment","Emergency Alarm Signals","Muster Station Procedures","Basic First Aid"],status:"ready"},{phase:2,title:"Emergency Procedures",description:"Advanced emergency response and crisis management",icon:Pd,duration:"2 hours",modules:["Fire Fighting Procedures","Abandon Ship Procedures","Man Overboard Response","Emergency Communication"],status:"locked"},{phase:3,title:"Operational Training",description:"Role-specific operational procedures and equipment",icon:$c,duration:"2 hours",modules:["Equipment Operation","Standard Procedures","Documentation Requirements","Quality Assurance"],status:"locked"}],d=e=>{switch(e){case"ready":return(0,$o.jsx)(sh,{className:"h-5 w-5 text-burando-light-green"});case"locked":return(0,$o.jsx)(qd,{className:"h-5 w-5 text-white/50"});default:return(0,$o.jsx)(Bd,{className:"h-5 w-5 text-burando-light-green"})}},u=e=>{switch(e){case"ready":return"Ready to Start";case"locked":return"Unlocks After Previous Phase";default:return"Completed"}},h=e=>{switch(e){case"ready":return"text-white font-semibold";case"locked":return"text-white/50";default:return"text-burando-light-green font-semibold"}};return(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-navy via-burando-teal to-burando-bright-teal flex items-center justify-center p-4",children:(0,$o.jsx)("div",{className:"max-w-4xl w-full",children:(0,$o.jsxs)("div",{className:"glass-card-elevated p-6 sm:p-8",children:[(0,$o.jsxs)("div",{className:"text-center mb-8",children:[(0,$o.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"\ud83d\udcda Your Training Program"}),(0,$o.jsx)("p",{className:"text-white/90 text-lg mb-2",children:"Welcome to your personalized maritime training journey"}),(0,$o.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-burando-bright-teal/20 rounded-full",children:[(0,$o.jsx)(Zu,{className:"h-5 w-5 text-burando-light-green mr-2"}),(0,$o.jsxs)("span",{className:"text-white font-medium",children:["Focus: ",l.charAt(0).toUpperCase()+l.slice(1).replace("-"," ")]})]})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,$o.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,$o.jsx)(ah,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-white",children:"3 Phases"}),(0,$o.jsx)("p",{className:"text-white/70 text-sm",children:"Comprehensive training program"})]}),(0,$o.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,$o.jsx)(qd,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-white",children:"6 Hours Total"}),(0,$o.jsx)("p",{className:"text-white/70 text-sm",children:"Flexible self-paced learning"})]}),(0,$o.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,$o.jsx)(ad,{className:"h-8 w-8 text-burando-bright-teal mx-auto mb-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-white",children:"Expert Support"}),(0,$o.jsx)("p",{className:"text-white/70 text-sm",children:"Maritime professionals available"})]})]}),(0,$o.jsx)("div",{className:"space-y-6 mb-8",children:c.map((e=>{const t=e.icon,n="ready"===e.status;return(0,$o.jsx)("div",{className:"glass-card p-6 transition-all duration-300 ".concat(n?"ring-2 ring-burando-light-green":""),children:(0,$o.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,$o.jsx)("div",{className:"p-3 rounded-full ".concat(n?"bg-burando-light-green":"bg-white/20"),children:(0,$o.jsx)(t,{className:"h-8 w-8 text-white"})}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$o.jsxs)("h3",{className:"text-xl font-bold text-white",children:["Phase ",e.phase,": ",e.title]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[d(e.status),(0,$o.jsx)("span",{className:"text-sm font-semibold ".concat(h(e.status)),children:u(e.status)})]})]}),(0,$o.jsx)("p",{className:"text-white/80 mb-4",children:e.description}),(0,$o.jsxs)("div",{className:"flex items-center text-white/70 text-sm mb-4",children:[(0,$o.jsx)(qd,{className:"h-4 w-4 mr-2"}),(0,$o.jsxs)("span",{children:["Duration: ",e.duration]})]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.modules.map(((e,t)=>(0,$o.jsxs)("div",{className:"flex items-center text-white/70 text-sm",children:[(0,$o.jsx)("div",{className:"w-1.5 h-1.5 bg-burando-bright-teal rounded-full mr-2"}),(0,$o.jsx)("span",{children:e})]},t)))})]})]})},e.phase)}))}),(0,$o.jsxs)("div",{className:"glass-card p-6 mb-8 bg-burando-bright-teal/20 border border-burando-light-green/30",children:[(0,$o.jsxs)("h3",{className:"text-lg font-bold text-white mb-3 flex items-center",children:[(0,$o.jsx)(Pd,{className:"h-5 w-5 mr-2 text-burando-light-green"}),"Important Information"]}),(0,$o.jsxs)("div",{className:"space-y-2 text-white/90 text-sm",children:[(0,$o.jsx)("p",{children:"\u2022 Training must be completed in sequence - each phase unlocks the next"}),(0,$o.jsx)("p",{children:"\u2022 You can pause and resume training at any time"}),(0,$o.jsx)("p",{children:"\u2022 All progress is automatically saved"}),(0,$o.jsx)("p",{children:"\u2022 Certificates are generated upon successful completion"}),(0,$o.jsx)("p",{children:"\u2022 Support is available 24/7 for maritime emergencies"})]})]}),(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("button",{onClick:async()=>{a&&null!==e&&void 0!==e&&e.id&&await a("flow_complete",{step_name:"training_overview",action:"start_training_clicked",selected_role_focus:l,completion_method:"normal_flow"}),n?await n():t()},className:"w-full sm:w-auto bg-gradient-to-r from-burando-light-green to-burando-bright-teal text-white font-bold py-4 px-8 rounded-xl text-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-burando-bright-teal/50 focus:ring-offset-2 shadow-xl min-h-[56px] touch-manipulation",children:(0,$o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,$o.jsx)(sh,{className:"h-6 w-6 mr-3"}),(0,$o.jsx)("span",{children:"Start Phase 1: Safety Fundamentals"}),(0,$o.jsx)(Vm,{className:"h-6 w-6 ml-3"})]})}),(0,$o.jsx)("p",{className:"text-white/60 text-sm mt-4",children:"\ud83c\udfaf Ready to begin your maritime training journey"})]})]})})})},ZO=()=>{const{onboardingStep:e}=el(),{currentStep:t,isLoading:n}=ml(),i=void 0!==t?t:e;if(n)return(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-burando-deep-blue via-burando-navy to-burando-dark-blue flex items-center justify-center",children:(0,$o.jsxs)("div",{className:"text-white text-center",children:[(0,$o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-burando-light-green mx-auto mb-4"}),(0,$o.jsx)("p",{children:"Loading your onboarding..."})]})});switch(i){case 0:default:return(0,$o.jsx)(QO,{});case 1:return(0,$o.jsx)(XO,{});case 2:return(0,$o.jsx)($O,{})}};const eL=()=>{const{user:e}=el(),[t,n]=(0,i.useState)({}),[a,r]=(0,i.useState)(!1),s=(0,i.useRef)({}),o=(0,i.useRef)(Date.now());(0,i.useEffect)((()=>(e&&!a&&l(),()=>{a&&c()})),[e,a]);const l=(0,i.useCallback)((()=>{if(r(!0),o.current=Date.now(),"PerformanceObserver"in window){const t=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{"navigation"===e.entryType&&(u("page_load_time",e.loadEventEnd-e.loadEventStart),u("dom_content_loaded",e.domContentLoadedEventEnd-e.domContentLoadedEventStart),u("first_contentful_paint",e.loadEventEnd-e.fetchStart))}))}));try{t.observe({entryTypes:["navigation"]})}catch(e){}const n=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{"resource"===e.entryType&&u("resource_load_time",e.responseEnd-e.requestStart,{resource:e.name.split("/").pop(),type:e.initiatorType})}))}));try{n.observe({entryTypes:["resource"]})}catch(e){}const i=new PerformanceObserver((e=>{const t=e.getEntries(),n=t[t.length-1];n&&u("largest_contentful_paint",n.startTime)}));try{i.observe({entryTypes:["largest-contentful-paint"]})}catch(e){}const a=new PerformanceObserver((e=>{let t=0;e.getEntries().forEach((e=>{e.hadRecentInput||(t+=e.value)})),u("cumulative_layout_shift",t)}));try{a.observe({entryTypes:["layout-shift"]})}catch(e){}}b(),x()}),[e]),c=(0,i.useCallback)((()=>{r(!1);const e=Date.now()-o.current;u("session_duration",e)}),[]),u=(0,i.useCallback)((function(t,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={name:t,value:i,unit:h(t),timestamp:(new Date).toISOString(),tags:d(d({},a),{},{userId:null===e||void 0===e?void 0:e.id,sessionId:m(),userAgent:navigator.userAgent,connectionStatus:navigator.onLine?"online":"offline"},p())};s.current[t]=r,n((e=>d(d({},e),{},{[t]:r}))),y(r)}),[e]),h=e=>["page_load_time","dom_content_loaded","first_contentful_paint","largest_contentful_paint","resource_load_time","api_response_time","session_duration"].includes(e)?"ms":"cumulative_layout_shift"===e?"score":e.includes("_rate")?"%":e.includes("_count")?"count":"value",m=(0,i.useCallback)((()=>{let e=sessionStorage.getItem("performanceSessionId");return e||(e="perf_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionStorage.setItem("performanceSessionId",e)),e}),[]),p=(0,i.useCallback)((()=>({vessel:(null===e||void 0===e?void 0:e.vessel_assignment)||"unknown",position:(null===e||void 0===e?void 0:e.position)||"unknown",location:f(),deviceType:g(),connectionQuality:v()})),[e]),f=()=>{const e=navigator.connection;return e?"2g"===e.effectiveType||e.downlink<1?"at_sea":"3g"===e.effectiveType||e.downlink<5?"in_port":"onshore":"unknown"},g=()=>{const e=navigator.userAgent;return/Mobile|Android|iPhone/i.test(e)?"mobile":/Tablet|iPad/i.test(e)?"tablet":"desktop"},v=()=>{if(!navigator.onLine)return"offline";const e=navigator.connection;if(!e)return"good";switch(e.effectiveType){case"4g":return"excellent";case"3g":return"good";case"2g":return"fair";default:return"poor"}},b=(0,i.useCallback)((()=>{const e=()=>{const e=navigator.connection;e&&(u("connection_bandwidth",e.downlink||0,{unit:"mbps"}),u("connection_rtt",e.rtt||0,{unit:"ms"}),u("connection_type",1,{type:e.effectiveType||"unknown"}))};e();const t=setInterval(e,3e4);return()=>clearInterval(t)}),[]),x=(0,i.useCallback)((()=>{const e=()=>{if("memory"in performance){const e=performance.memory;u("memory_used",e.usedJSHeapSize,{unit:"bytes"}),u("memory_total",e.totalJSHeapSize,{unit:"bytes"}),u("memory_limit",e.jsHeapSizeLimit,{unit:"bytes"})}"getBattery"in navigator&&navigator.getBattery().then((e=>{u("battery_level",100*e.level,{unit:"%"}),u("battery_charging",e.charging?1:0)}))};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[]),y=(0,i.useCallback)(function(e,t){let n;return function(){for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];const s=()=>{clearTimeout(n),e(...a)};clearTimeout(n),n=setTimeout(s,t)}}((e=>{w(e)}),1e3),[]),w=async e=>{},_=(0,i.useCallback)((e=>{const t=Date.now();return{end:n=>{const i=Date.now()-t;return u("api_response_time",i,{endpoint:e,status:(null===n||void 0===n?void 0:n.toString())||"unknown"}),i}}}),[u]),k=(0,i.useCallback)((e=>{const t=Date.now();return{end:()=>{const n=Date.now()-t;return u("user_action_time",n,{action:e}),n}}}),[u]);return{metrics:t,isMonitoring:a,recordMetric:u,measureApiCall:_,measureUserAction:k,startMonitoring:l,stopMonitoring:c}};function tL(){var e;const{user:t,login:n,logout:a,isLoading:r}=el(),{needsOnboarding:s}=ml();const{isMonitoring:o,measureApiCall:l}=eL();i.useEffect((()=>{np.init().then((e=>{e&&t&&np.preloadCriticalContent()}))}),[t]);const{isLoading:c}=(0,Et.useQuery)("verify-token",Ks,{enabled:!t&&!!localStorage.getItem("token"),onSuccess:e=>{n(e.user,localStorage.getItem("token"))},onError:()=>{localStorage.removeItem("token")},retry:!1});return r||c?(0,$o.jsx)(Zc,{}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(HO,{}),t&&(0,$o.jsx)(GO,{}),(0,$o.jsxs)(Oe,{children:[(0,$o.jsx)(De,{path:"/login",element:t?(0,$o.jsx)(Me,{to:"admin"===t.role?"/admin":"manager"===t.role?"/manager":"/crew",replace:!0}):(0,$o.jsx)(nd,{})}),t?(0,$o.jsx)($o.Fragment,{children:s&&"crew"===t.role?(0,$o.jsx)(De,{path:"*",element:(0,$o.jsx)(ZO,{})}):(0,$o.jsxs)(De,{path:"/",element:(0,$o.jsx)(IO,{}),children:["admin"===t.role&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(De,{path:"/admin",element:(0,$o.jsx)(Qd,{})}),(0,$o.jsx)(De,{path:"/templates/new",element:(0,$o.jsx)(RD,{})}),(0,$o.jsx)(De,{path:"/templates/edit/:templateId",element:(0,$o.jsx)(RD,{})}),!1,(0,$o.jsx)(De,{path:"/flows",element:(0,$o.jsx)(DO,{})})]}),"manager"===t.role&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(De,{path:"/manager",element:(0,$o.jsx)(nh,{})}),(null===(e=t.permissions)||void 0===e?void 0:e.includes("content_edit"))&&(0,$o.jsx)(De,{path:"/flows",element:(0,$o.jsx)(DO,{})})]}),"crew"===t.role&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(De,{path:"/crew",element:(0,$o.jsx)(bh,{})}),(0,$o.jsx)(De,{path:"/crew/training/:phase",element:(0,$o.jsx)(Bm,{})}),(0,$o.jsx)(De,{path:"/crew/quiz/:phase",element:(0,$o.jsx)(up,{})}),(0,$o.jsx)(De,{path:"/crew/profile",element:(0,$o.jsx)(pp,{})})]}),(0,$o.jsx)(De,{path:"/profile",element:(0,$o.jsx)(pp,{})}),(0,$o.jsx)(De,{path:"/",element:(0,$o.jsx)(Me,{to:"admin"===t.role?"/admin":"manager"===t.role?"/manager":"/crew",replace:!0})})]})}):(0,$o.jsx)(De,{path:"*",element:(0,$o.jsx)(Me,{to:"/login",replace:!0})}),(0,$o.jsx)(De,{path:"*",element:(0,$o.jsx)(Me,{to:"/",replace:!0})})]}),!1]})}const nL=function(){return(0,$o.jsx)(UO,{context:"application",children:(0,$o.jsx)(il,{children:(0,$o.jsx)(pl,{children:(0,$o.jsx)(sl,{children:(0,$o.jsx)(tL,{})})})})})};"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller}))}))})).catch((e=>{}))}));const iL=new Et.QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:3e5}}});a.createRoot(document.getElementById("root")).render((0,$o.jsx)(i.StrictMode,{children:(0,$o.jsx)(Et.QueryClientProvider,{client:iL,children:(0,$o.jsxs)(vt,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[(0,$o.jsx)(nL,{}),(0,$o.jsx)(Un,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}))})()})();