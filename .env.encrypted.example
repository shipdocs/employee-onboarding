# ========================================
# MARITIME ONBOARDING SYSTEM - ENCRYPTED CONFIGURATION
# ========================================
# This configuration enables encryption at rest and enhanced security

# ========================================
# DATABASE CONFIGURATION (ENCRYPTED)
# ========================================
# PostgreSQL connection (will use encrypted volume)
DATABASE_URL=postgresql://postgres:POSTGRES_PASSWORD_FROM_SECRETS@localhost:5432/maritime
DB_NAME=maritime
DB_USER=postgres
# Note: DB_PASSWORD is loaded from secrets/passwords/postgres_admin.txt

# ========================================
# ENCRYPTION CONFIGURATION
# ========================================
# Enable encryption features
ENCRYPTION_ENABLED=true
BACKUP_ENCRYPTION_ENABLED=true

# Encryption keys (loaded from secrets directory)
# These environment variables point to secret files
FIELD_ENCRYPTION_KEY_FILE=./secrets/keys/field_encryption.key
DATABASE_ENCRYPTION_KEY_FILE=./secrets/keys/database_encryption.key
JWT_SECRET_FILE=./secrets/keys/jwt_secret.key
BACKUP_ENCRYPTION_KEY_FILE=./secrets/keys/backup_encryption.key

# Volume encryption settings
ENCRYPTED_VOLUME_ENABLED=true
ENCRYPTED_VOLUME_MOUNT=/mnt/maritime_encrypted

# ========================================
# SECURITY CONFIGURATION
# ========================================
# Session and authentication
SESSION_TIMEOUT_MINUTES=480
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30
MFA_ENABLED=true

# Password requirements
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_UPPERCASE=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS settings
CORS_ORIGIN=https://your-domain.com
CORS_CREDENTIALS=true

# Security headers
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
CSP_ENABLED=true

# ========================================
# SSL/TLS CONFIGURATION
# ========================================
# SSL settings for production
SSL_ENABLED=true
SSL_CERT_PATH=./nginx/ssl/cert.pem
SSL_KEY_PATH=./nginx/ssl/private.key
SSL_REDIRECT=true

# ========================================
# BACKUP CONFIGURATION
# ========================================
# Encrypted backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION_ALGORITHM=AES-256-GCM

# Backup storage
BACKUP_STORAGE_PATH=./backups
BACKUP_REMOTE_ENABLED=false
# BACKUP_REMOTE_URL=s3://your-backup-bucket
# BACKUP_REMOTE_ACCESS_KEY=your-access-key
# BACKUP_REMOTE_SECRET_KEY=your-secret-key

# ========================================
# MONITORING & LOGGING
# ========================================
# Audit logging
AUDIT_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_RETENTION_DAYS=365

# Security monitoring
SECURITY_MONITORING_ENABLED=true
FAILED_LOGIN_THRESHOLD=5
SUSPICIOUS_ACTIVITY_THRESHOLD=10

# Performance monitoring
PERFORMANCE_MONITORING_ENABLED=true
SLOW_QUERY_THRESHOLD_MS=1000

# ========================================
# EMAIL CONFIGURATION
# ========================================
# SMTP settings (encrypted in transit)
SMTP_ENABLED=true
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-smtp-user
SMTP_PASS=your-smtp-password
SMTP_FROM=noreply@your-domain.com
SMTP_FROM_NAME=Maritime Onboarding System

# Email encryption
EMAIL_ENCRYPTION_ENABLED=true
EMAIL_SIGN_ENABLED=false

# ========================================
# REDIS CONFIGURATION (ENCRYPTED)
# ========================================
# Redis for caching and sessions
REDIS_ENABLED=true
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_TLS_ENABLED=false

# Session storage in Redis
SESSION_STORE=redis
SESSION_SECRET=your-session-secret

# ========================================
# FILE STORAGE CONFIGURATION
# ========================================
# File upload settings (encrypted storage)
FILE_UPLOAD_ENABLED=true
FILE_UPLOAD_MAX_SIZE=50MB
FILE_UPLOAD_ALLOWED_TYPES=pdf,doc,docx,jpg,jpeg,png,mp4,mp3
FILE_ENCRYPTION_ENABLED=true

# Storage paths (on encrypted volume)
UPLOAD_PATH=/app/uploads
CERTIFICATE_PATH=/app/certificates
TEMP_PATH=/app/temp

# ========================================
# COMPLIANCE CONFIGURATION
# ========================================
# GDPR compliance
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years
PERSONAL_DATA_ENCRYPTION=true
RIGHT_TO_ERASURE_ENABLED=true

# Maritime compliance
IMO_COMPLIANCE_ENABLED=true
CREW_DATA_ENCRYPTION=true
CERTIFICATE_VALIDATION_ENABLED=true

# ========================================
# DEVELOPMENT/PRODUCTION SETTINGS
# ========================================
# Environment
NODE_ENV=production
DEBUG=false
LOG_LEVEL=info

# Application settings
APP_NAME=Maritime Onboarding System
APP_VERSION=2.1.0
APP_URL=https://your-domain.com

# Feature flags
FEATURE_ADVANCED_ENCRYPTION=true
FEATURE_ZERO_TRUST_NETWORK=true
FEATURE_AUTOMATED_BACKUPS=true
FEATURE_COMPLIANCE_REPORTING=true

# ========================================
# DOCKER CONFIGURATION
# ========================================
# Docker Compose settings
COMPOSE_PROJECT_NAME=maritime-encrypted
COMPOSE_FILE=docker-compose.encrypted.yml

# Container security
CONTAINER_SECURITY_ENABLED=true
CONTAINER_READ_ONLY=true
CONTAINER_NO_NEW_PRIVILEGES=true

# ========================================
# NETWORK CONFIGURATION
# ========================================
# Network security
NETWORK_ENCRYPTION_ENABLED=true
INTERNAL_NETWORK_ONLY=true
EXTERNAL_ACCESS_RESTRICTED=true

# Firewall settings
FIREWALL_ENABLED=true
ALLOWED_IPS=127.0.0.1,::1
BLOCKED_COUNTRIES=

# ========================================
# SECRETS MANAGEMENT
# ========================================
# Secrets configuration
SECRETS_DIRECTORY=./secrets
SECRETS_ROTATION_ENABLED=true
SECRETS_ROTATION_INTERVAL_DAYS=90

# Key management
KEY_DERIVATION_ITERATIONS=100000
KEY_DERIVATION_ALGORITHM=PBKDF2
KEY_STORAGE_ENCRYPTED=true

# ========================================
# MAINTENANCE CONFIGURATION
# ========================================
# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance for security updates.
MAINTENANCE_ALLOWED_IPS=127.0.0.1

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# ========================================
# NOTES
# ========================================
# 1. All passwords and keys should be stored in the secrets/ directory
# 2. Never commit actual secrets to version control
# 3. Use strong, unique passwords for all services
# 4. Regularly rotate encryption keys and passwords
# 5. Monitor audit logs for suspicious activity
# 6. Test backup and recovery procedures regularly
# 7. Keep this configuration file secure and encrypted
