<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Guide - Maritime Onboarding System - Maritime Onboarding System 2025</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f9f9f9;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 24px;
            margin-bottom: 16px;
        }
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 8px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        pre code {
            background: none;
            color: inherit;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        blockquote {
            border-left: 4px solid #3498db;
            margin: 20px 0;
            padding-left: 20px;
            color: #666;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ecf0f1;
            color: #7f8c8d;
            font-size: 0.9em;
            text-align: center;
        }
        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
                padding: 0;
            }
            .footer {
                page-break-before: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Deployment Guide - Maritime Onboarding System</h1>
<p>Complete deployment documentation for the Docker-based Maritime Onboarding System.</p>
<h2>üéØ <strong>Deployment Overview</strong></h2>
<p>The Maritime Onboarding System uses a <strong>Docker-only architecture</strong> for easy deployment and management. All components run in containers with secure networking and persistent storage.</p>
<h3><strong>Architecture Components</strong></h3>
<ul>
<li><strong>PostgreSQL</strong>: Primary database with persistent storage</li>
<li><strong>PostgREST</strong>: Automatic REST API from database schema</li>
<li><strong>Node.js Backend</strong>: Business logic and authentication</li>
<li><strong>React Frontend</strong>: User interface served by Nginx</li>
<li><strong>MinIO</strong>: S3-compatible object storage for files</li>
<li><strong>Nginx</strong>: Reverse proxy with SSL termination</li>
</ul>
<h2>üîß <strong>Prerequisites</strong></h2>
<h3><strong>System Requirements</strong></h3>
<ul>
<li><strong>OS</strong>: Linux (Ubuntu 20.04+ recommended)</li>
<li><strong>RAM</strong>: 4GB minimum, 8GB recommended</li>
<li><strong>Storage</strong>: 50GB minimum, 100GB+ for production</li>
<li><strong>CPU</strong>: 2 cores minimum, 4+ cores recommended</li>
<li><strong>Network</strong>: Static IP address, domain name</li>
</ul>
<h3><strong>Software Requirements</strong></h3>
<ul>
<li><strong>Docker</strong>: Version 20.10+</li>
<li><strong>Docker Compose</strong>: Version 2.0+</li>
<li><strong>Git</strong>: For repository access</li>
<li><strong>OpenSSL</strong>: For certificate generation</li>
</ul>
<h3><strong>Network Requirements</strong></h3>
<ul>
<li><strong>Ports</strong>: 80 (HTTP), 443 (HTTPS)</li>
<li><strong>Firewall</strong>: Configure to allow only necessary ports</li>
<li><strong>DNS</strong>: Domain name pointing to server IP</li>
</ul>
<h2>üöÄ <strong>Quick Deployment</strong></h2>
<h3><strong>1. Server Setup</strong></h3>
<pre><code class="language-bash"># Update system
sudo apt update &amp;&amp; sudo apt upgrade -y

# Install Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# Install Docker Compose
sudo apt install docker-compose-plugin

# Add user to docker group
sudo usermod -aG docker $USER
newgrp docker
</code></pre>
<h3><strong>2. Get the Code</strong></h3>
<pre><code class="language-bash"># Clone repository
git clone https://github.com/shipdocs/employee-onboarding.git
cd employee-onboarding

# Create environment file
cp .env.example .env.production
</code></pre>
<h3><strong>3. Configure Environment</strong></h3>
<p>Edit <code>.env.production</code> with your settings:</p>
<pre><code class="language-bash"># Database Configuration
POSTGRES_DB=maritime_onboarding_prod
POSTGRES_USER=maritime_user
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# JWT Configuration (generate with: openssl rand -base64 32)
JWT_SECRET=YOUR_GENERATED_JWT_SECRET
NEXTAUTH_SECRET=YOUR_GENERATED_NEXTAUTH_SECRET

# Application Configuration
NODE_ENV=production
NEXTAUTH_URL=https://your-domain.com

# MinIO Configuration
MINIO_ROOT_PASSWORD=CHANGE_THIS_MINIO_PASSWORD

# Email Configuration
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASS=your-smtp-password
SMTP_FROM=noreply@your-domain.com
</code></pre>
<h3><strong>4. SSL Certificate</strong></h3>
<pre><code class="language-bash"># Option 1: Let&#39;s Encrypt (recommended)
sudo apt install certbot
sudo certbot certonly --standalone -d your-domain.com

# Copy certificates
sudo cp /etc/letsencrypt/live/your-domain.com/fullchain.pem nginx/ssl/cert.pem
sudo cp /etc/letsencrypt/live/your-domain.com/privkey.pem nginx/ssl/key.pem

# Option 2: Self-signed (development only)
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout nginx/ssl/key.pem -out nginx/ssl/cert.pem \
  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=your-domain.com&quot;
</code></pre>
<h3><strong>5. Deploy</strong></h3>
<pre><code class="language-bash"># Start all services
docker compose --env-file .env.production -f docker-compose.secure-simple.yml up -d

# Verify deployment
docker ps
curl -k https://localhost/health
</code></pre>
<h2>üîí <strong>Security Configuration</strong></h2>
<h3><strong>Firewall Setup</strong></h3>
<pre><code class="language-bash"># Install UFW
sudo apt install ufw

# Configure firewall
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
</code></pre>
<h3><strong>SSL/TLS Configuration</strong></h3>
<p>The system includes secure SSL/TLS configuration:</p>
<ul>
<li><strong>TLS 1.2 and 1.3</strong> only</li>
<li><strong>Strong cipher suites</strong></li>
<li><strong>HSTS headers</strong></li>
<li><strong>Perfect Forward Secrecy</strong></li>
</ul>
<h3><strong>Security Headers</strong></h3>
<p>Automatically configured security headers:</p>
<ul>
<li><code>Strict-Transport-Security</code></li>
<li><code>X-Frame-Options: DENY</code></li>
<li><code>X-Content-Type-Options: nosniff</code></li>
<li><code>X-XSS-Protection: 1; mode=block</code></li>
<li><code>Content-Security-Policy</code></li>
</ul>
<h2>üìä <strong>Monitoring and Health Checks</strong></h2>
<h3><strong>Health Endpoints</strong></h3>
<ul>
<li><strong>Application</strong>: <code>https://your-domain.com/health</code></li>
<li><strong>API</strong>: <code>https://your-domain.com/api/health</code></li>
<li><strong>Database</strong>: Internal health checks</li>
</ul>
<h3><strong>Container Monitoring</strong></h3>
<pre><code class="language-bash"># Check container status
docker ps

# View container logs
docker logs maritime_backend
docker logs maritime_nginx
docker logs maritime_database

# Monitor resource usage
docker stats
</code></pre>
<h3><strong>Log Management</strong></h3>
<pre><code class="language-bash"># View application logs
docker logs -f maritime_backend

# View nginx access logs
docker exec maritime_nginx tail -f /var/log/nginx/access.log

# View nginx error logs
docker exec maritime_nginx tail -f /var/log/nginx/error.log
</code></pre>
<h2>üíæ <strong>Backup and Recovery</strong></h2>
<h3><strong>Database Backup</strong></h3>
<pre><code class="language-bash"># Create backup
docker exec maritime_database pg_dump -U maritime_user maritime_onboarding_prod &gt; backup_$(date +%Y%m%d_%H%M%S).sql

# Automated backup script
cat &gt; backup.sh &lt;&lt; &#39;EOF&#39;
#!/bin/bash
BACKUP_DIR=&quot;/backups&quot;
DATE=$(date +%Y%m%d_%H%M%S)
docker exec maritime_database pg_dump -U maritime_user maritime_onboarding_prod &gt; $BACKUP_DIR/db_backup_$DATE.sql
find $BACKUP_DIR -name &quot;db_backup_*.sql&quot; -mtime +7 -delete
EOF

chmod +x backup.sh

# Add to crontab for daily backups
echo &quot;0 2 * * * /path/to/backup.sh&quot; | crontab -
</code></pre>
<h3><strong>File Storage Backup</strong></h3>
<pre><code class="language-bash"># Backup MinIO data
docker exec maritime_minio mc mirror /data /backup/minio_$(date +%Y%m%d)

# Backup uploaded files
docker cp maritime_backend:/app/uploads ./uploads_backup_$(date +%Y%m%d)
</code></pre>
<h3><strong>Recovery Process</strong></h3>
<pre><code class="language-bash"># Restore database
docker exec -i maritime_database psql -U maritime_user maritime_onboarding_prod &lt; backup.sql

# Restore files
docker cp uploads_backup_20241201 maritime_backend:/app/uploads
</code></pre>
<h2>üîÑ <strong>Updates and Maintenance</strong></h2>
<h3><strong>Application Updates</strong></h3>
<pre><code class="language-bash"># Pull latest code
git pull origin main

# Rebuild containers
docker compose --env-file .env.production -f docker-compose.secure-simple.yml build

# Deploy updates
docker compose --env-file .env.production -f docker-compose.secure-simple.yml up -d
</code></pre>
<h3><strong>Security Updates</strong></h3>
<pre><code class="language-bash"># Update base images
docker compose pull

# Restart with updated images
docker compose --env-file .env.production -f docker-compose.secure-simple.yml up -d

# Clean up old images
docker image prune -f
</code></pre>
<h3><strong>SSL Certificate Renewal</strong></h3>
<pre><code class="language-bash"># Renew Let&#39;s Encrypt certificate
sudo certbot renew

# Copy renewed certificates
sudo cp /etc/letsencrypt/live/your-domain.com/fullchain.pem nginx/ssl/cert.pem
sudo cp /etc/letsencrypt/live/your-domain.com/privkey.pem nginx/ssl/key.pem

# Reload nginx
docker exec maritime_nginx nginx -s reload
</code></pre>
<h2>üêõ <strong>Troubleshooting</strong></h2>
<h3><strong>Common Issues</strong></h3>
<h4><strong>Containers Won&#39;t Start</strong></h4>
<pre><code class="language-bash"># Check logs
docker logs maritime_database
docker logs maritime_backend

# Check disk space
df -h

# Check memory usage
free -h
</code></pre>
<h4><strong>Database Connection Issues</strong></h4>
<pre><code class="language-bash"># Check database status
docker exec maritime_database pg_isready -U maritime_user

# Check database logs
docker logs maritime_database

# Test connection
docker exec maritime_backend node -e &quot;console.log(&#39;Testing DB connection...&#39;)&quot;
</code></pre>
<h4><strong>SSL Certificate Issues</strong></h4>
<pre><code class="language-bash"># Check certificate validity
openssl x509 -in nginx/ssl/cert.pem -text -noout

# Test SSL configuration
curl -I https://your-domain.com

# Check nginx configuration
docker exec maritime_nginx nginx -t
</code></pre>
<h3><strong>Performance Optimization</strong></h3>
<pre><code class="language-bash"># Monitor resource usage
docker stats

# Optimize database
docker exec maritime_database psql -U maritime_user -c &quot;VACUUM ANALYZE;&quot;

# Clear application logs
docker exec maritime_backend sh -c &quot;echo &#39;&#39; &gt; /app/logs/app.log&quot;
</code></pre>
<h2>üìû <strong>Support</strong></h2>
<h3><strong>Getting Help</strong></h3>
<ul>
<li><strong>Documentation</strong>: This deployment guide</li>
<li><strong>GitHub Issues</strong>: <a href="https://github.com/shipdocs/employee-onboarding/issues">Report deployment issues</a></li>
<li><strong>Email Support</strong>: <a href="mailto:support@burando.online">support@burando.online</a></li>
</ul>
<h3><strong>Professional Services</strong></h3>
<ul>
<li><strong>Deployment Assistance</strong>: Available for enterprise customers</li>
<li><strong>Custom Configuration</strong>: Tailored deployment solutions</li>
<li><strong>24/7 Support</strong>: Enterprise support packages available</li>
</ul>
<hr>
<p><strong>For development deployment, see <a href="../developer-guides/development-setup.md">Development Setup</a></strong></p>

    </div>
    <div class="footer">
        <p>Maritime Onboarding System 2025 - Documentation</p>
        <p>Generated: 2025-08-19T12:00:22.196Z</p>
    </div>
</body>
</html>